(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();var aR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function sl(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Jy={exports:{}},Jl={},Xy={exports:{}},Ot={};var Kw;function uR(){if(Kw)return Ot;Kw=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),g=Symbol.iterator;function b(F){return F===null||typeof F!="object"?null:(F=g&&F[g]||F["@@iterator"],typeof F=="function"?F:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,D={};function O(F,j,ae){this.props=F,this.context=j,this.refs=D,this.updater=ae||S}O.prototype.isReactComponent={},O.prototype.setState=function(F,j){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,j,"setState")},O.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function $(){}$.prototype=O.prototype;function P(F,j,ae){this.props=F,this.context=j,this.refs=D,this.updater=ae||S}var C=P.prototype=new $;C.constructor=P,E(C,O.prototype),C.isPureReactComponent=!0;var B=Array.isArray,k=Object.prototype.hasOwnProperty,x={current:null},U={key:!0,ref:!0,__self:!0,__source:!0};function ie(F,j,ae){var Q,M={},A=null,q=null;if(j!=null)for(Q in j.ref!==void 0&&(q=j.ref),j.key!==void 0&&(A=""+j.key),j)k.call(j,Q)&&!U.hasOwnProperty(Q)&&(M[Q]=j[Q]);var we=arguments.length-2;if(we===1)M.children=ae;else if(1<we){for(var Oe=Array(we),be=0;be<we;be++)Oe[be]=arguments[be+2];M.children=Oe}if(F&&F.defaultProps)for(Q in we=F.defaultProps,we)M[Q]===void 0&&(M[Q]=we[Q]);return{$$typeof:t,type:F,key:A,ref:q,props:M,_owner:x.current}}function Y(F,j){return{$$typeof:t,type:F.type,key:j,ref:F.ref,props:F.props,_owner:F._owner}}function _e(F){return typeof F=="object"&&F!==null&&F.$$typeof===t}function le(F){var j={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(ae){return j[ae]})}var me=/\/+/g;function ke(F,j){return typeof F=="object"&&F!==null&&F.key!=null?le(""+F.key):j.toString(36)}function Pe(F,j,ae,Q,M){var A=typeof F;(A==="undefined"||A==="boolean")&&(F=null);var q=!1;if(F===null)q=!0;else switch(A){case"string":case"number":q=!0;break;case"object":switch(F.$$typeof){case t:case e:q=!0}}if(q)return q=F,M=M(q),F=Q===""?"."+ke(q,0):Q,B(M)?(ae="",F!=null&&(ae=F.replace(me,"$&/")+"/"),Pe(M,j,ae,"",function(be){return be})):M!=null&&(_e(M)&&(M=Y(M,ae+(!M.key||q&&q.key===M.key?"":(""+M.key).replace(me,"$&/")+"/")+F)),j.push(M)),1;if(q=0,Q=Q===""?".":Q+":",B(F))for(var we=0;we<F.length;we++){A=F[we];var Oe=Q+ke(A,we);q+=Pe(A,j,ae,Oe,M)}else if(Oe=b(F),typeof Oe=="function")for(F=Oe.call(F),we=0;!(A=F.next()).done;)A=A.value,Oe=Q+ke(A,we++),q+=Pe(A,j,ae,Oe,M);else if(A==="object")throw j=String(F),Error("Objects are not valid as a React child (found: "+(j==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":j)+"). If you meant to render a collection of children, use an array instead.");return q}function We(F,j,ae){if(F==null)return F;var Q=[],M=0;return Pe(F,Q,"","",function(A){return j.call(ae,A,M++)}),Q}function nt(F){if(F._status===-1){var j=F._result;j=j(),j.then(function(ae){(F._status===0||F._status===-1)&&(F._status=1,F._result=ae)},function(ae){(F._status===0||F._status===-1)&&(F._status=2,F._result=ae)}),F._status===-1&&(F._status=0,F._result=j)}if(F._status===1)return F._result.default;throw F._result}var et={current:null},Ee={transition:null},je={ReactCurrentDispatcher:et,ReactCurrentBatchConfig:Ee,ReactCurrentOwner:x};return Ot.Children={map:We,forEach:function(F,j,ae){We(F,function(){j.apply(this,arguments)},ae)},count:function(F){var j=0;return We(F,function(){j++}),j},toArray:function(F){return We(F,function(j){return j})||[]},only:function(F){if(!_e(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},Ot.Component=O,Ot.Fragment=r,Ot.Profiler=s,Ot.PureComponent=P,Ot.StrictMode=n,Ot.Suspense=d,Ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=je,Ot.cloneElement=function(F,j,ae){if(F==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+F+".");var Q=E({},F.props),M=F.key,A=F.ref,q=F._owner;if(j!=null){if(j.ref!==void 0&&(A=j.ref,q=x.current),j.key!==void 0&&(M=""+j.key),F.type&&F.type.defaultProps)var we=F.type.defaultProps;for(Oe in j)k.call(j,Oe)&&!U.hasOwnProperty(Oe)&&(Q[Oe]=j[Oe]===void 0&&we!==void 0?we[Oe]:j[Oe])}var Oe=arguments.length-2;if(Oe===1)Q.children=ae;else if(1<Oe){we=Array(Oe);for(var be=0;be<Oe;be++)we[be]=arguments[be+2];Q.children=we}return{$$typeof:t,type:F.type,key:M,ref:A,props:Q,_owner:q}},Ot.createContext=function(F){return F={$$typeof:u,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},F.Provider={$$typeof:a,_context:F},F.Consumer=F},Ot.createElement=ie,Ot.createFactory=function(F){var j=ie.bind(null,F);return j.type=F,j},Ot.createRef=function(){return{current:null}},Ot.forwardRef=function(F){return{$$typeof:l,render:F}},Ot.isValidElement=_e,Ot.lazy=function(F){return{$$typeof:y,_payload:{_status:-1,_result:F},_init:nt}},Ot.memo=function(F,j){return{$$typeof:m,type:F,compare:j===void 0?null:j}},Ot.startTransition=function(F){var j=Ee.transition;Ee.transition={};try{F()}finally{Ee.transition=j}},Ot.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},Ot.useCallback=function(F,j){return et.current.useCallback(F,j)},Ot.useContext=function(F){return et.current.useContext(F)},Ot.useDebugValue=function(){},Ot.useDeferredValue=function(F){return et.current.useDeferredValue(F)},Ot.useEffect=function(F,j){return et.current.useEffect(F,j)},Ot.useId=function(){return et.current.useId()},Ot.useImperativeHandle=function(F,j,ae){return et.current.useImperativeHandle(F,j,ae)},Ot.useInsertionEffect=function(F,j){return et.current.useInsertionEffect(F,j)},Ot.useLayoutEffect=function(F,j){return et.current.useLayoutEffect(F,j)},Ot.useMemo=function(F,j){return et.current.useMemo(F,j)},Ot.useReducer=function(F,j,ae){return et.current.useReducer(F,j,ae)},Ot.useRef=function(F){return et.current.useRef(F)},Ot.useState=function(F){return et.current.useState(F)},Ot.useSyncExternalStore=function(F,j,ae){return et.current.useSyncExternalStore(F,j,ae)},Ot.useTransition=function(){return et.current.useTransition()},Ot.version="18.2.0",Ot}var Ww;function zg(){return Ww||(Ww=1,Xy.exports=uR()),Xy.exports}var Hw;function cR(){if(Hw)return Jl;Hw=1;var t=zg(),e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function u(l,d,m){var y,g={},b=null,S=null;m!==void 0&&(b=""+m),d.key!==void 0&&(b=""+d.key),d.ref!==void 0&&(S=d.ref);for(y in d)n.call(d,y)&&!a.hasOwnProperty(y)&&(g[y]=d[y]);if(l&&l.defaultProps)for(y in d=l.defaultProps,d)g[y]===void 0&&(g[y]=d[y]);return{$$typeof:e,type:l,key:b,ref:S,props:g,_owner:s.current}}return Jl.Fragment=r,Jl.jsx=u,Jl.jsxs=u,Jl}var Qw;function lR(){return Qw||(Qw=1,Jy.exports=cR()),Jy.exports}var fR=lR(),oh={},Zy={exports:{}},Rn={},ev={exports:{}},tv={};var Yw;function dR(){return Yw||(Yw=1,(function(t){function e(Ee,je){var F=Ee.length;Ee.push(je);e:for(;0<F;){var j=F-1>>>1,ae=Ee[j];if(0<s(ae,je))Ee[j]=je,Ee[F]=ae,F=j;else break e}}function r(Ee){return Ee.length===0?null:Ee[0]}function n(Ee){if(Ee.length===0)return null;var je=Ee[0],F=Ee.pop();if(F!==je){Ee[0]=F;e:for(var j=0,ae=Ee.length,Q=ae>>>1;j<Q;){var M=2*(j+1)-1,A=Ee[M],q=M+1,we=Ee[q];if(0>s(A,F))q<ae&&0>s(we,A)?(Ee[j]=we,Ee[q]=F,j=q):(Ee[j]=A,Ee[M]=F,j=M);else if(q<ae&&0>s(we,F))Ee[j]=we,Ee[q]=F,j=q;else break e}}return je}function s(Ee,je){var F=Ee.sortIndex-je.sortIndex;return F!==0?F:Ee.id-je.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var u=Date,l=u.now();t.unstable_now=function(){return u.now()-l}}var d=[],m=[],y=1,g=null,b=3,S=!1,E=!1,D=!1,O=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(Ee){for(var je=r(m);je!==null;){if(je.callback===null)n(m);else if(je.startTime<=Ee)n(m),je.sortIndex=je.expirationTime,e(d,je);else break;je=r(m)}}function B(Ee){if(D=!1,C(Ee),!E)if(r(d)!==null)E=!0,nt(k);else{var je=r(m);je!==null&&et(B,je.startTime-Ee)}}function k(Ee,je){E=!1,D&&(D=!1,$(ie),ie=-1),S=!0;var F=b;try{for(C(je),g=r(d);g!==null&&(!(g.expirationTime>je)||Ee&&!le());){var j=g.callback;if(typeof j=="function"){g.callback=null,b=g.priorityLevel;var ae=j(g.expirationTime<=je);je=t.unstable_now(),typeof ae=="function"?g.callback=ae:g===r(d)&&n(d),C(je)}else n(d);g=r(d)}if(g!==null)var Q=!0;else{var M=r(m);M!==null&&et(B,M.startTime-je),Q=!1}return Q}finally{g=null,b=F,S=!1}}var x=!1,U=null,ie=-1,Y=5,_e=-1;function le(){return!(t.unstable_now()-_e<Y)}function me(){if(U!==null){var Ee=t.unstable_now();_e=Ee;var je=!0;try{je=U(!0,Ee)}finally{je?ke():(x=!1,U=null)}}else x=!1}var ke;if(typeof P=="function")ke=function(){P(me)};else if(typeof MessageChannel<"u"){var Pe=new MessageChannel,We=Pe.port2;Pe.port1.onmessage=me,ke=function(){We.postMessage(null)}}else ke=function(){O(me,0)};function nt(Ee){U=Ee,x||(x=!0,ke())}function et(Ee,je){ie=O(function(){Ee(t.unstable_now())},je)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Ee){Ee.callback=null},t.unstable_continueExecution=function(){E||S||(E=!0,nt(k))},t.unstable_forceFrameRate=function(Ee){0>Ee||125<Ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<Ee?Math.floor(1e3/Ee):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_getFirstCallbackNode=function(){return r(d)},t.unstable_next=function(Ee){switch(b){case 1:case 2:case 3:var je=3;break;default:je=b}var F=b;b=je;try{return Ee()}finally{b=F}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Ee,je){switch(Ee){case 1:case 2:case 3:case 4:case 5:break;default:Ee=3}var F=b;b=Ee;try{return je()}finally{b=F}},t.unstable_scheduleCallback=function(Ee,je,F){var j=t.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?j+F:j):F=j,Ee){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=F+ae,Ee={id:y++,callback:je,priorityLevel:Ee,startTime:F,expirationTime:ae,sortIndex:-1},F>j?(Ee.sortIndex=F,e(m,Ee),r(d)===null&&Ee===r(m)&&(D?($(ie),ie=-1):D=!0,et(B,F-j))):(Ee.sortIndex=ae,e(d,Ee),E||S||(E=!0,nt(k))),Ee},t.unstable_shouldYield=le,t.unstable_wrapCallback=function(Ee){var je=b;return function(){var F=b;b=je;try{return Ee.apply(this,arguments)}finally{b=F}}}})(tv)),tv}var Gw;function hR(){return Gw||(Gw=1,ev.exports=dR()),ev.exports}var Jw;function pR(){if(Jw)return Rn;Jw=1;var t=zg(),e=hR();function r(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,c=1;c<arguments.length;c++)o+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function a(i,o){u(i,o),u(i+"Capture",o)}function u(i,o){for(s[i]=o,i=0;i<o.length;i++)n.add(o[i])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},g={};function b(i){return d.call(g,i)?!0:d.call(y,i)?!1:m.test(i)?g[i]=!0:(y[i]=!0,!1)}function S(i,o,c,h){if(c!==null&&c.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return h?!1:c!==null?!c.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function E(i,o,c,h){if(o===null||typeof o>"u"||S(i,o,c,h))return!0;if(h)return!1;if(c!==null)switch(c.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function D(i,o,c,h,v,w,N){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=h,this.attributeNamespace=v,this.mustUseProperty=c,this.propertyName=i,this.type=o,this.sanitizeURL=w,this.removeEmptyString=N}var O={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){O[i]=new D(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];O[o]=new D(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){O[i]=new D(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){O[i]=new D(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){O[i]=new D(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){O[i]=new D(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){O[i]=new D(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){O[i]=new D(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){O[i]=new D(i,5,!1,i.toLowerCase(),null,!1,!1)});var $=/[\-:]([a-z])/g;function P(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace($,P);O[o]=new D(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace($,P);O[o]=new D(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace($,P);O[o]=new D(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){O[i]=new D(i,1,!1,i.toLowerCase(),null,!1,!1)}),O.xlinkHref=new D("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){O[i]=new D(i,1,!1,i.toLowerCase(),null,!0,!0)});function C(i,o,c,h){var v=O.hasOwnProperty(o)?O[o]:null;(v!==null?v.type!==0:h||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(E(o,c,v,h)&&(c=null),h||v===null?b(o)&&(c===null?i.removeAttribute(o):i.setAttribute(o,""+c)):v.mustUseProperty?i[v.propertyName]=c===null?v.type===3?!1:"":c:(o=v.attributeName,h=v.attributeNamespace,c===null?i.removeAttribute(o):(v=v.type,c=v===3||v===4&&c===!0?"":""+c,h?i.setAttributeNS(h,o,c):i.setAttribute(o,c))))}var B=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,k=Symbol.for("react.element"),x=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),ie=Symbol.for("react.strict_mode"),Y=Symbol.for("react.profiler"),_e=Symbol.for("react.provider"),le=Symbol.for("react.context"),me=Symbol.for("react.forward_ref"),ke=Symbol.for("react.suspense"),Pe=Symbol.for("react.suspense_list"),We=Symbol.for("react.memo"),nt=Symbol.for("react.lazy"),et=Symbol.for("react.offscreen"),Ee=Symbol.iterator;function je(i){return i===null||typeof i!="object"?null:(i=Ee&&i[Ee]||i["@@iterator"],typeof i=="function"?i:null)}var F=Object.assign,j;function ae(i){if(j===void 0)try{throw Error()}catch(c){var o=c.stack.trim().match(/\n( *(at )?)/);j=o&&o[1]||""}return`
`+j+i}var Q=!1;function M(i,o){if(!i||Q)return"";Q=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(ye){var h=ye}Reflect.construct(i,[],o)}else{try{o.call()}catch(ye){h=ye}i.call(o.prototype)}else{try{throw Error()}catch(ye){h=ye}i()}}catch(ye){if(ye&&h&&typeof ye.stack=="string"){for(var v=ye.stack.split(`
`),w=h.stack.split(`
`),N=v.length-1,V=w.length-1;1<=N&&0<=V&&v[N]!==w[V];)V--;for(;1<=N&&0<=V;N--,V--)if(v[N]!==w[V]){if(N!==1||V!==1)do if(N--,V--,0>V||v[N]!==w[V]){var G=`
`+v[N].replace(" at new "," at ");return i.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",i.displayName)),G}while(1<=N&&0<=V);break}}}finally{Q=!1,Error.prepareStackTrace=c}return(i=i?i.displayName||i.name:"")?ae(i):""}function A(i){switch(i.tag){case 5:return ae(i.type);case 16:return ae("Lazy");case 13:return ae("Suspense");case 19:return ae("SuspenseList");case 0:case 2:case 15:return i=M(i.type,!1),i;case 11:return i=M(i.type.render,!1),i;case 1:return i=M(i.type,!0),i;default:return""}}function q(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case U:return"Fragment";case x:return"Portal";case Y:return"Profiler";case ie:return"StrictMode";case ke:return"Suspense";case Pe:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case le:return(i.displayName||"Context")+".Consumer";case _e:return(i._context.displayName||"Context")+".Provider";case me:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case We:return o=i.displayName||null,o!==null?o:q(i.type)||"Memo";case nt:o=i._payload,i=i._init;try{return q(i(o))}catch{}}return null}function we(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(o);case 8:return o===ie?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Oe(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function be(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Xe(i){var o=be(i)?"checked":"value",c=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),h=""+i[o];if(!i.hasOwnProperty(o)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var v=c.get,w=c.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return v.call(this)},set:function(N){h=""+N,w.call(this,N)}}),Object.defineProperty(i,o,{enumerable:c.enumerable}),{getValue:function(){return h},setValue:function(N){h=""+N},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function ee(i){i._valueTracker||(i._valueTracker=Xe(i))}function J(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var c=o.getValue(),h="";return i&&(h=be(i)?i.checked?"true":"false":i.value),i=h,i!==c?(o.setValue(i),!0):!1}function Se(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Ce(i,o){var c=o.checked;return F({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??i._wrapperState.initialChecked})}function Ke(i,o){var c=o.defaultValue==null?"":o.defaultValue,h=o.checked!=null?o.checked:o.defaultChecked;c=Oe(o.value!=null?o.value:c),i._wrapperState={initialChecked:h,initialValue:c,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function pt(i,o){o=o.checked,o!=null&&C(i,"checked",o,!1)}function yr(i,o){pt(i,o);var c=Oe(o.value),h=o.type;if(c!=null)h==="number"?(c===0&&i.value===""||i.value!=c)&&(i.value=""+c):i.value!==""+c&&(i.value=""+c);else if(h==="submit"||h==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?Dr(i,o.type,c):o.hasOwnProperty("defaultValue")&&Dr(i,o.type,Oe(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function Qr(i,o,c){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var h=o.type;if(!(h!=="submit"&&h!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,c||o===i.value||(i.value=o),i.defaultValue=o}c=i.name,c!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,c!==""&&(i.name=c)}function Dr(i,o,c){(o!=="number"||Se(i.ownerDocument)!==i)&&(c==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+c&&(i.defaultValue=""+c))}var lr=Array.isArray;function Pt(i,o,c,h){if(i=i.options,o){o={};for(var v=0;v<c.length;v++)o["$"+c[v]]=!0;for(c=0;c<i.length;c++)v=o.hasOwnProperty("$"+i[c].value),i[c].selected!==v&&(i[c].selected=v),v&&h&&(i[c].defaultSelected=!0)}else{for(c=""+Oe(c),o=null,v=0;v<i.length;v++){if(i[v].value===c){i[v].selected=!0,h&&(i[v].defaultSelected=!0);return}o!==null||i[v].disabled||(o=i[v])}o!==null&&(o.selected=!0)}}function qn(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(r(91));return F({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Ir(i,o){var c=o.value;if(c==null){if(c=o.children,o=o.defaultValue,c!=null){if(o!=null)throw Error(r(92));if(lr(c)){if(1<c.length)throw Error(r(93));c=c[0]}o=c}o==null&&(o=""),c=o}i._wrapperState={initialValue:Oe(c)}}function Us(i,o){var c=Oe(o.value),h=Oe(o.defaultValue);c!=null&&(c=""+c,c!==i.value&&(i.value=c),o.defaultValue==null&&i.defaultValue!==c&&(i.defaultValue=c)),h!=null&&(i.defaultValue=""+h)}function ci(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function Yr(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ai(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?Yr(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Vn,zs=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,c,h,v){MSApp.execUnsafeLocalFunction(function(){return i(o,c,h,v)})}:i})(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(Vn=Vn||document.createElement("div"),Vn.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=Vn.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function li(i,o){if(o){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=o;return}}i.textContent=o}var Kn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Mu=["Webkit","ms","Moz","O"];Object.keys(Kn).forEach(function(i){Mu.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),Kn[o]=Kn[i]})});function Fu(i,o,c){return o==null||typeof o=="boolean"||o===""?"":c||typeof o!="number"||o===0||Kn.hasOwnProperty(i)&&Kn[i]?(""+o).trim():o+"px"}function Ni(i,o){i=i.style;for(var c in o)if(o.hasOwnProperty(c)){var h=c.indexOf("--")===0,v=Fu(c,o[c],h);c==="float"&&(c="cssFloat"),h?i.setProperty(c,v):i[c]=v}}var Ge=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qs(i,o){if(o){if(Ge[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(r(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(r(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(r(61))}if(o.style!=null&&typeof o.style!="object")throw Error(r(62))}}function Ti(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lo=null;function Ue(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Ua=null,Vs=null,ss=null;function vl(i){if(i=Ml(i)){if(typeof Ua!="function")throw Error(r(280));var o=i.stateNode;o&&(o=bd(o),Ua(i.stateNode,i.type,o))}}function Bu(i){Vs?ss?ss.push(i):ss=[i]:Vs=i}function Jf(){if(Vs){var i=Vs,o=ss;if(ss=Vs=null,vl(i),o)for(i=0;i<o.length;i++)vl(o[i])}}function Xf(i,o){return i(o)}function Ks(){}var os=!1;function Lu(i,o,c){if(os)return i(o,c);os=!0;try{return Xf(i,o,c)}finally{os=!1,(Vs!==null||ss!==null)&&(Ks(),Jf())}}function as(i,o){var c=i.stateNode;if(c===null)return null;var h=bd(c);if(h===null)return null;c=h[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(i=i.type,h=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!h;break e;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(r(231,o,typeof c));return c}var Ht=!1;if(l)try{var fr={};Object.defineProperty(fr,"passive",{get:function(){Ht=!0}}),window.addEventListener("test",fr,fr),window.removeEventListener("test",fr,fr)}catch{Ht=!1}function $m(i,o,c,h,v,w,N,V,G){var ye=Array.prototype.slice.call(arguments,3);try{o.apply(c,ye)}catch(Re){this.onError(Re)}}var us=!1,Ws=null,Hs=!1,gl=null,cs={onError:function(i){us=!0,Ws=i}};function jo(i,o,c,h,v,w,N,V,G){us=!1,Ws=null,$m.apply(cs,arguments)}function ls(i,o,c,h,v,w,N,V,G){if(jo.apply(this,arguments),us){if(us){var ye=Ws;us=!1,Ws=null}else throw Error(r(198));Hs||(Hs=!0,gl=ye)}}function fi(i){var o=i,c=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(c=o.return),i=o.return;while(i)}return o.tag===3?c:null}function Zf(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function xi(i){if(fi(i)!==i)throw Error(r(188))}function ed(i){var o=i.alternate;if(!o){if(o=fi(i),o===null)throw Error(r(188));return o!==i?null:i}for(var c=i,h=o;;){var v=c.return;if(v===null)break;var w=v.alternate;if(w===null){if(h=v.return,h!==null){c=h;continue}break}if(v.child===w.child){for(w=v.child;w;){if(w===c)return xi(v),i;if(w===h)return xi(v),o;w=w.sibling}throw Error(r(188))}if(c.return!==h.return)c=v,h=w;else{for(var N=!1,V=v.child;V;){if(V===c){N=!0,c=v,h=w;break}if(V===h){N=!0,h=v,c=w;break}V=V.sibling}if(!N){for(V=w.child;V;){if(V===c){N=!0,c=w,h=v;break}if(V===h){N=!0,h=w,c=v;break}V=V.sibling}if(!N)throw Error(r(189))}}if(c.alternate!==h)throw Error(r(190))}if(c.tag!==3)throw Error(r(188));return c.stateNode.current===c?i:o}function fs(i){return i=ed(i),i!==null?_l(i):null}function _l(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=_l(i);if(o!==null)return o;i=i.sibling}return null}var ju=e.unstable_scheduleCallback,dr=e.unstable_cancelCallback,Qs=e.unstable_shouldYield,Mi=e.unstable_requestPaint,hr=e.unstable_now,Uo=e.unstable_getCurrentPriorityLevel,zo=e.unstable_ImmediatePriority,Uu=e.unstable_UserBlockingPriority,qo=e.unstable_NormalPriority,Ys=e.unstable_LowPriority,wl=e.unstable_IdlePriority,Gs=null,Wn=null;function It(i){if(Wn&&typeof Wn.onCommitFiberRoot=="function")try{Wn.onCommitFiberRoot(Gs,i,void 0,(i.current.flags&128)===128)}catch{}}var bn=Math.clz32?Math.clz32:er,td=Math.log,rd=Math.LN2;function er(i){return i>>>=0,i===0?32:31-(td(i)/rd|0)|0}var ds=64,hs=4194304;function di(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Vo(i,o){var c=i.pendingLanes;if(c===0)return 0;var h=0,v=i.suspendedLanes,w=i.pingedLanes,N=c&268435455;if(N!==0){var V=N&~v;V!==0?h=di(V):(w&=N,w!==0&&(h=di(w)))}else N=c&~v,N!==0?h=di(N):w!==0&&(h=di(w));if(h===0)return 0;if(o!==0&&o!==h&&(o&v)===0&&(v=h&-h,w=o&-o,v>=w||v===16&&(w&4194240)!==0))return o;if((h&4)!==0&&(h|=c&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=h;0<o;)c=31-bn(o),v=1<<c,h|=i[c],o&=~v;return h}function bl(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zu(i,o){for(var c=i.suspendedLanes,h=i.pingedLanes,v=i.expirationTimes,w=i.pendingLanes;0<w;){var N=31-bn(w),V=1<<N,G=v[N];G===-1?((V&c)===0||(V&h)!==0)&&(v[N]=bl(V,o)):G<=o&&(i.expiredLanes|=V),w&=~V}}function qu(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function za(){var i=ds;return ds<<=1,(ds&4194240)===0&&(ds=64),i}function Vu(i){for(var o=[],c=0;31>c;c++)o.push(i);return o}function an(i,o,c){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-bn(o),i[o]=c}function qa(i,o){var c=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var h=i.eventTimes;for(i=i.expirationTimes;0<c;){var v=31-bn(c),w=1<<v;o[v]=0,h[v]=-1,i[v]=-1,c&=~w}}function Ku(i,o){var c=i.entangledLanes|=o;for(i=i.entanglements;c;){var h=31-bn(c),v=1<<h;v&o|i[h]&o&&(i[h]|=o),c&=~v}}var Tt=0;function Dt(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var Wu,Sl,nd,Gr,Js,Ko=!1,Hn=[],Fi=null,Bi=null,tr=null,Jr=new Map,Li=new Map,Sn=[],El="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ji(i,o){switch(i){case"focusin":case"focusout":Fi=null;break;case"dragenter":case"dragleave":Bi=null;break;case"mouseover":case"mouseout":tr=null;break;case"pointerover":case"pointerout":Jr.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Li.delete(o.pointerId)}}function Va(i,o,c,h,v,w){return i===null||i.nativeEvent!==w?(i={blockedOn:o,domEventName:c,eventSystemFlags:h,nativeEvent:w,targetContainers:[v]},o!==null&&(o=Ml(o),o!==null&&Sl(o)),i):(i.eventSystemFlags|=h,o=i.targetContainers,v!==null&&o.indexOf(v)===-1&&o.push(v),i)}function hi(i,o,c,h,v){switch(o){case"focusin":return Fi=Va(Fi,i,o,c,h,v),!0;case"dragenter":return Bi=Va(Bi,i,o,c,h,v),!0;case"mouseover":return tr=Va(tr,i,o,c,h,v),!0;case"pointerover":var w=v.pointerId;return Jr.set(w,Va(Jr.get(w)||null,i,o,c,h,v)),!0;case"gotpointercapture":return w=v.pointerId,Li.set(w,Va(Li.get(w)||null,i,o,c,h,v)),!0}return!1}function Hu(i){var o=iu(i.target);if(o!==null){var c=fi(o);if(c!==null){if(o=c.tag,o===13){if(o=Zf(c),o!==null){i.blockedOn=o,Js(i.priority,function(){nd(c)});return}}else if(o===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Ka(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var c=Ha(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(c===null){c=i.nativeEvent;var h=new c.constructor(c.type,c);Lo=h,c.target.dispatchEvent(h),Lo=null}else return o=Ml(c),o!==null&&Sl(o),i.blockedOn=c,!1;o.shift()}return!0}function Qu(i,o,c){Ka(i)&&c.delete(o)}function Wa(){Ko=!1,Fi!==null&&Ka(Fi)&&(Fi=null),Bi!==null&&Ka(Bi)&&(Bi=null),tr!==null&&Ka(tr)&&(tr=null),Jr.forEach(Qu),Li.forEach(Qu)}function Xs(i,o){i.blockedOn===o&&(i.blockedOn=null,Ko||(Ko=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Wa)))}function Wo(i){function o(v){return Xs(v,i)}if(0<Hn.length){Xs(Hn[0],i);for(var c=1;c<Hn.length;c++){var h=Hn[c];h.blockedOn===i&&(h.blockedOn=null)}}for(Fi!==null&&Xs(Fi,i),Bi!==null&&Xs(Bi,i),tr!==null&&Xs(tr,i),Jr.forEach(o),Li.forEach(o),c=0;c<Sn.length;c++)h=Sn[c],h.blockedOn===i&&(h.blockedOn=null);for(;0<Sn.length&&(c=Sn[0],c.blockedOn===null);)Hu(c),c.blockedOn===null&&Sn.shift()}var Ho=B.ReactCurrentBatchConfig,ps=!0;function Am(i,o,c,h){var v=Tt,w=Ho.transition;Ho.transition=null;try{Tt=1,Qo(i,o,c,h)}finally{Tt=v,Ho.transition=w}}function Nm(i,o,c,h){var v=Tt,w=Ho.transition;Ho.transition=null;try{Tt=4,Qo(i,o,c,h)}finally{Tt=v,Ho.transition=w}}function Qo(i,o,c,h){if(ps){var v=Ha(i,o,c,h);if(v===null)Um(i,o,h,Zs,c),ji(i,h);else if(hi(v,i,o,c,h))h.stopPropagation();else if(ji(i,h),o&4&&-1<El.indexOf(i)){for(;v!==null;){var w=Ml(v);if(w!==null&&Wu(w),w=Ha(i,o,c,h),w===null&&Um(i,o,h,Zs,c),w===v)break;v=w}v!==null&&h.stopPropagation()}else Um(i,o,h,null,c)}}var Zs=null;function Ha(i,o,c,h){if(Zs=null,i=Ue(h),i=iu(i),i!==null)if(o=fi(i),o===null)i=null;else if(c=o.tag,c===13){if(i=Zf(o),i!==null)return i;i=null}else if(c===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return Zs=i,null}function id(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Uo()){case zo:return 1;case Uu:return 4;case qo:case Ys:return 16;case wl:return 536870912;default:return 16}default:return 16}}var ms=null,Il=null,Yo=null;function Yu(){if(Yo)return Yo;var i,o=Il,c=o.length,h,v="value"in ms?ms.value:ms.textContent,w=v.length;for(i=0;i<c&&o[i]===v[i];i++);var N=c-i;for(h=1;h<=N&&o[c-h]===v[w-h];h++);return Yo=v.slice(i,1<h?1-h:void 0)}function Qa(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function eo(){return!0}function Ya(){return!1}function Br(i){function o(c,h,v,w,N){this._reactName=c,this._targetInst=v,this.type=h,this.nativeEvent=w,this.target=N,this.currentTarget=null;for(var V in i)i.hasOwnProperty(V)&&(c=i[V],this[V]=c?c(w):w[V]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?eo:Ya,this.isPropagationStopped=Ya,this}return F(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=eo)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=eo)},persist:function(){},isPersistent:eo}),o}var to={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ol=Br(to),ys=F({},to,{view:0,detail:0}),kl=Br(ys),Ga,Ja,ro,Or=F({},ys,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Za,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==ro&&(ro&&i.type==="mousemove"?(Ga=i.screenX-ro.screenX,Ja=i.screenY-ro.screenY):Ja=Ga=0,ro=i),Ga)},movementY:function(i){return"movementY"in i?i.movementY:Ja}}),Go=Br(Or),Xa=F({},Or,{dataTransfer:0}),sd=Br(Xa),Gu=F({},ys,{relatedTarget:0}),Ju=Br(Gu),od=F({},to,{animationName:0,elapsedTime:0,pseudoElement:0}),Xu=Br(od),Pl=F({},to,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),no=Br(Pl),Dl=F({},to,{data:0}),Zu=Br(Dl),ec={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Rl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ad={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tm(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=ad[i])?!!o[i]:!1}function Za(){return Tm}var tc=F({},ys,{key:function(i){if(i.key){var o=ec[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=Qa(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Rl[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Za,charCode:function(i){return i.type==="keypress"?Qa(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Qa(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),xm=Br(tc),Cl=F({},Or,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rc=Br(Cl),Mm=F({},ys,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Za}),ud=Br(Mm),Fm=F({},to,{propertyName:0,elapsedTime:0,pseudoElement:0}),cd=Br(Fm),ld=F({},Or,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Bm=Br(ld),fd=[9,13,27,32],eu=l&&"CompositionEvent"in window,Jo=null;l&&"documentMode"in document&&(Jo=document.documentMode);var dd=l&&"TextEvent"in window&&!Jo,hd=l&&(!eu||Jo&&8<Jo&&11>=Jo),pd=" ",md=!1;function tu(i,o){switch(i){case"keyup":return fd.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pi(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Qt=!1;function nc(i,o){switch(i){case"compositionend":return pi(o);case"keypress":return o.which!==32?null:(md=!0,pd);case"textInput":return i=o.data,i===pd&&md?null:i;default:return null}}function En(i,o){if(Qt)return i==="compositionend"||!eu&&tu(i,o)?(i=Yu(),Yo=Il=ms=null,Qt=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return hd&&o.locale!=="ko"?null:o.data;default:return null}}var Lm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ic(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!Lm[i.type]:o==="textarea"}function $l(i,o,c,h){Bu(h),o=gd(o,"onChange"),0<o.length&&(c=new Ol("onChange","change",null,c,h),i.push({event:c,listeners:o}))}var Qn=null,io=null;function Xo(i){o_(i,0)}function Yn(i){var o=ac(i);if(J(o))return i}function yd(i,o){if(i==="change")return o}var f=!1;if(l){var p;if(l){var _="oninput"in document;if(!_){var I=document.createElement("div");I.setAttribute("oninput","return;"),_=typeof I.oninput=="function"}p=_}else p=!1;f=p&&(!document.documentMode||9<document.documentMode)}function R(){Qn&&(Qn.detachEvent("onpropertychange",T),io=Qn=null)}function T(i){if(i.propertyName==="value"&&Yn(io)){var o=[];$l(o,io,i,Ue(i)),Lu(Xo,o)}}function z(i,o,c){i==="focusin"?(R(),Qn=o,io=c,Qn.attachEvent("onpropertychange",T)):i==="focusout"&&R()}function W(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Yn(io)}function X(i,o){if(i==="click")return Yn(o)}function te(i,o){if(i==="input"||i==="change")return Yn(o)}function oe(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var H=typeof Object.is=="function"?Object.is:oe;function ue(i,o){if(H(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var c=Object.keys(i),h=Object.keys(o);if(c.length!==h.length)return!1;for(h=0;h<c.length;h++){var v=c[h];if(!d.call(o,v)||!H(i[v],o[v]))return!1}return!0}function Z(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function se(i,o){var c=Z(i);i=0;for(var h;c;){if(c.nodeType===3){if(h=i+c.textContent.length,i<=o&&h>=o)return{node:c,offset:o-i};i=h}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Z(c)}}function ce(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?ce(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function ne(){for(var i=window,o=Se();o instanceof i.HTMLIFrameElement;){try{var c=typeof o.contentWindow.location.href=="string"}catch{c=!1}if(c)i=o.contentWindow;else break;o=Se(i.document)}return o}function he(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function ve(i){var o=ne(),c=i.focusedElem,h=i.selectionRange;if(o!==c&&c&&c.ownerDocument&&ce(c.ownerDocument.documentElement,c)){if(h!==null&&he(c)){if(o=h.start,i=h.end,i===void 0&&(i=o),"selectionStart"in c)c.selectionStart=o,c.selectionEnd=Math.min(i,c.value.length);else if(i=(o=c.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var v=c.textContent.length,w=Math.min(h.start,v);h=h.end===void 0?w:Math.min(h.end,v),!i.extend&&w>h&&(v=h,h=w,w=v),v=se(c,w);var N=se(c,h);v&&N&&(i.rangeCount!==1||i.anchorNode!==v.node||i.anchorOffset!==v.offset||i.focusNode!==N.node||i.focusOffset!==N.offset)&&(o=o.createRange(),o.setStart(v.node,v.offset),i.removeAllRanges(),w>h?(i.addRange(o),i.extend(N.node,N.offset)):(o.setEnd(N.node,N.offset),i.addRange(o)))}}for(o=[],i=c;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<o.length;c++)i=o[c],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var ge=l&&"documentMode"in document&&11>=document.documentMode,Ie=null,Ae=null,Fe=null,Ne=!1;function Te(i,o,c){var h=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Ne||Ie==null||Ie!==Se(h)||(h=Ie,"selectionStart"in h&&he(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Fe&&ue(Fe,h)||(Fe=h,h=gd(Ae,"onSelect"),0<h.length&&(o=new Ol("onSelect","select",null,o,c),i.push({event:o,listeners:h}),o.target=Ie)))}function Le(i,o){var c={};return c[i.toLowerCase()]=o.toLowerCase(),c["Webkit"+i]="webkit"+o,c["Moz"+i]="moz"+o,c}var xe={animationend:Le("Animation","AnimationEnd"),animationiteration:Le("Animation","AnimationIteration"),animationstart:Le("Animation","AnimationStart"),transitionend:Le("Transition","TransitionEnd")},ze={},at={};l&&(at=document.createElement("div").style,"AnimationEvent"in window||(delete xe.animationend.animation,delete xe.animationiteration.animation,delete xe.animationstart.animation),"TransitionEvent"in window||delete xe.transitionend.transition);function mt(i){if(ze[i])return ze[i];if(!xe[i])return i;var o=xe[i],c;for(c in o)if(o.hasOwnProperty(c)&&c in at)return ze[i]=o[c];return i}var wt=mt("animationend"),Xr=mt("animationiteration"),ot=mt("animationstart"),Ar=mt("transitionend"),Nr=new Map,ru="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function pr(i,o){Nr.set(i,o),a(o,[i])}for(var Ui=0;Ui<ru.length;Ui++){var nu=ru[Ui],yD=nu.toLowerCase(),vD=nu[0].toUpperCase()+nu.slice(1);pr(yD,"on"+vD)}pr(wt,"onAnimationEnd"),pr(Xr,"onAnimationIteration"),pr(ot,"onAnimationStart"),pr("dblclick","onDoubleClick"),pr("focusin","onFocus"),pr("focusout","onBlur"),pr(Ar,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Al="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gD=new Set("cancel close invalid load scroll toggle".split(" ").concat(Al));function s_(i,o,c){var h=i.type||"unknown-event";i.currentTarget=c,ls(h,o,void 0,i),i.currentTarget=null}function o_(i,o){o=(o&4)!==0;for(var c=0;c<i.length;c++){var h=i[c],v=h.event;h=h.listeners;e:{var w=void 0;if(o)for(var N=h.length-1;0<=N;N--){var V=h[N],G=V.instance,ye=V.currentTarget;if(V=V.listener,G!==w&&v.isPropagationStopped())break e;s_(v,V,ye),w=G}else for(N=0;N<h.length;N++){if(V=h[N],G=V.instance,ye=V.currentTarget,V=V.listener,G!==w&&v.isPropagationStopped())break e;s_(v,V,ye),w=G}}}if(Hs)throw i=gl,Hs=!1,gl=null,i}function or(i,o){var c=o[Hm];c===void 0&&(c=o[Hm]=new Set);var h=i+"__bubble";c.has(h)||(a_(o,i,2,!1),c.add(h))}function jm(i,o,c){var h=0;o&&(h|=4),a_(c,i,h,o)}var vd="_reactListening"+Math.random().toString(36).slice(2);function Nl(i){if(!i[vd]){i[vd]=!0,n.forEach(function(c){c!=="selectionchange"&&(gD.has(c)||jm(c,!1,i),jm(c,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[vd]||(o[vd]=!0,jm("selectionchange",!1,o))}}function a_(i,o,c,h){switch(id(o)){case 1:var v=Am;break;case 4:v=Nm;break;default:v=Qo}c=v.bind(null,o,c,i),v=void 0,!Ht||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(v=!0),h?v!==void 0?i.addEventListener(o,c,{capture:!0,passive:v}):i.addEventListener(o,c,!0):v!==void 0?i.addEventListener(o,c,{passive:v}):i.addEventListener(o,c,!1)}function Um(i,o,c,h,v){var w=h;if((o&1)===0&&(o&2)===0&&h!==null)e:for(;;){if(h===null)return;var N=h.tag;if(N===3||N===4){var V=h.stateNode.containerInfo;if(V===v||V.nodeType===8&&V.parentNode===v)break;if(N===4)for(N=h.return;N!==null;){var G=N.tag;if((G===3||G===4)&&(G=N.stateNode.containerInfo,G===v||G.nodeType===8&&G.parentNode===v))return;N=N.return}for(;V!==null;){if(N=iu(V),N===null)return;if(G=N.tag,G===5||G===6){h=w=N;continue e}V=V.parentNode}}h=h.return}Lu(function(){var ye=w,Re=Ue(c),$e=[];e:{var De=Nr.get(i);if(De!==void 0){var qe=Ol,Qe=i;switch(i){case"keypress":if(Qa(c)===0)break e;case"keydown":case"keyup":qe=xm;break;case"focusin":Qe="focus",qe=Ju;break;case"focusout":Qe="blur",qe=Ju;break;case"beforeblur":case"afterblur":qe=Ju;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":qe=Go;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":qe=sd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":qe=ud;break;case wt:case Xr:case ot:qe=Xu;break;case Ar:qe=cd;break;case"scroll":qe=kl;break;case"wheel":qe=Bm;break;case"copy":case"cut":case"paste":qe=no;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":qe=rc}var Ye=(o&4)!==0,kr=!Ye&&i==="scroll",de=Ye?De!==null?De+"Capture":null:De;Ye=[];for(var re=ye,pe;re!==null;){pe=re;var Me=pe.stateNode;if(pe.tag===5&&Me!==null&&(pe=Me,de!==null&&(Me=as(re,de),Me!=null&&Ye.push(Tl(re,Me,pe)))),kr)break;re=re.return}0<Ye.length&&(De=new qe(De,Qe,null,c,Re),$e.push({event:De,listeners:Ye}))}}if((o&7)===0){e:{if(De=i==="mouseover"||i==="pointerover",qe=i==="mouseout"||i==="pointerout",De&&c!==Lo&&(Qe=c.relatedTarget||c.fromElement)&&(iu(Qe)||Qe[so]))break e;if((qe||De)&&(De=Re.window===Re?Re:(De=Re.ownerDocument)?De.defaultView||De.parentWindow:window,qe?(Qe=c.relatedTarget||c.toElement,qe=ye,Qe=Qe?iu(Qe):null,Qe!==null&&(kr=fi(Qe),Qe!==kr||Qe.tag!==5&&Qe.tag!==6)&&(Qe=null)):(qe=null,Qe=ye),qe!==Qe)){if(Ye=Go,Me="onMouseLeave",de="onMouseEnter",re="mouse",(i==="pointerout"||i==="pointerover")&&(Ye=rc,Me="onPointerLeave",de="onPointerEnter",re="pointer"),kr=qe==null?De:ac(qe),pe=Qe==null?De:ac(Qe),De=new Ye(Me,re+"leave",qe,c,Re),De.target=kr,De.relatedTarget=pe,Me=null,iu(Re)===ye&&(Ye=new Ye(de,re+"enter",Qe,c,Re),Ye.target=pe,Ye.relatedTarget=kr,Me=Ye),kr=Me,qe&&Qe)t:{for(Ye=qe,de=Qe,re=0,pe=Ye;pe;pe=sc(pe))re++;for(pe=0,Me=de;Me;Me=sc(Me))pe++;for(;0<re-pe;)Ye=sc(Ye),re--;for(;0<pe-re;)de=sc(de),pe--;for(;re--;){if(Ye===de||de!==null&&Ye===de.alternate)break t;Ye=sc(Ye),de=sc(de)}Ye=null}else Ye=null;qe!==null&&u_($e,De,qe,Ye,!1),Qe!==null&&kr!==null&&u_($e,kr,Qe,Ye,!0)}}e:{if(De=ye?ac(ye):window,qe=De.nodeName&&De.nodeName.toLowerCase(),qe==="select"||qe==="input"&&De.type==="file")var Je=yd;else if(ic(De))if(f)Je=te;else{Je=W;var tt=z}else(qe=De.nodeName)&&qe.toLowerCase()==="input"&&(De.type==="checkbox"||De.type==="radio")&&(Je=X);if(Je&&(Je=Je(i,ye))){$l($e,Je,c,Re);break e}tt&&tt(i,De,ye),i==="focusout"&&(tt=De._wrapperState)&&tt.controlled&&De.type==="number"&&Dr(De,"number",De.value)}switch(tt=ye?ac(ye):window,i){case"focusin":(ic(tt)||tt.contentEditable==="true")&&(Ie=tt,Ae=ye,Fe=null);break;case"focusout":Fe=Ae=Ie=null;break;case"mousedown":Ne=!0;break;case"contextmenu":case"mouseup":case"dragend":Ne=!1,Te($e,c,Re);break;case"selectionchange":if(ge)break;case"keydown":case"keyup":Te($e,c,Re)}var rt;if(eu)e:{switch(i){case"compositionstart":var it="onCompositionStart";break e;case"compositionend":it="onCompositionEnd";break e;case"compositionupdate":it="onCompositionUpdate";break e}it=void 0}else Qt?tu(i,c)&&(it="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(it="onCompositionStart");it&&(hd&&c.locale!=="ko"&&(Qt||it!=="onCompositionStart"?it==="onCompositionEnd"&&Qt&&(rt=Yu()):(ms=Re,Il="value"in ms?ms.value:ms.textContent,Qt=!0)),tt=gd(ye,it),0<tt.length&&(it=new Zu(it,i,null,c,Re),$e.push({event:it,listeners:tt}),rt?it.data=rt:(rt=pi(c),rt!==null&&(it.data=rt)))),(rt=dd?nc(i,c):En(i,c))&&(ye=gd(ye,"onBeforeInput"),0<ye.length&&(Re=new Zu("onBeforeInput","beforeinput",null,c,Re),$e.push({event:Re,listeners:ye}),Re.data=rt))}o_($e,o)})}function Tl(i,o,c){return{instance:i,listener:o,currentTarget:c}}function gd(i,o){for(var c=o+"Capture",h=[];i!==null;){var v=i,w=v.stateNode;v.tag===5&&w!==null&&(v=w,w=as(i,c),w!=null&&h.unshift(Tl(i,w,v)),w=as(i,o),w!=null&&h.push(Tl(i,w,v))),i=i.return}return h}function sc(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function u_(i,o,c,h,v){for(var w=o._reactName,N=[];c!==null&&c!==h;){var V=c,G=V.alternate,ye=V.stateNode;if(G!==null&&G===h)break;V.tag===5&&ye!==null&&(V=ye,v?(G=as(c,w),G!=null&&N.unshift(Tl(c,G,V))):v||(G=as(c,w),G!=null&&N.push(Tl(c,G,V)))),c=c.return}N.length!==0&&i.push({event:o,listeners:N})}var _D=/\r\n?/g,wD=/\u0000|\uFFFD/g;function c_(i){return(typeof i=="string"?i:""+i).replace(_D,`
`).replace(wD,"")}function _d(i,o,c){if(o=c_(o),c_(i)!==o&&c)throw Error(r(425))}function wd(){}var zm=null,qm=null;function Vm(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Km=typeof setTimeout=="function"?setTimeout:void 0,bD=typeof clearTimeout=="function"?clearTimeout:void 0,l_=typeof Promise=="function"?Promise:void 0,SD=typeof queueMicrotask=="function"?queueMicrotask:typeof l_<"u"?function(i){return l_.resolve(null).then(i).catch(ED)}:Km;function ED(i){setTimeout(function(){throw i})}function Wm(i,o){var c=o,h=0;do{var v=c.nextSibling;if(i.removeChild(c),v&&v.nodeType===8)if(c=v.data,c==="/$"){if(h===0){i.removeChild(v),Wo(o);return}h--}else c!=="$"&&c!=="$?"&&c!=="$!"||h++;c=v}while(c);Wo(o)}function Zo(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function f_(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"){if(o===0)return i;o--}else c==="/$"&&o++}i=i.previousSibling}return null}var oc=Math.random().toString(36).slice(2),vs="__reactFiber$"+oc,xl="__reactProps$"+oc,so="__reactContainer$"+oc,Hm="__reactEvents$"+oc,ID="__reactListeners$"+oc,OD="__reactHandles$"+oc;function iu(i){var o=i[vs];if(o)return o;for(var c=i.parentNode;c;){if(o=c[so]||c[vs]){if(c=o.alternate,o.child!==null||c!==null&&c.child!==null)for(i=f_(i);i!==null;){if(c=i[vs])return c;i=f_(i)}return o}i=c,c=i.parentNode}return null}function Ml(i){return i=i[vs]||i[so],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function ac(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(r(33))}function bd(i){return i[xl]||null}var Qm=[],uc=-1;function ea(i){return{current:i}}function ar(i){0>uc||(i.current=Qm[uc],Qm[uc]=null,uc--)}function ir(i,o){uc++,Qm[uc]=i.current,i.current=o}var ta={},Zr=ea(ta),In=ea(!1),su=ta;function cc(i,o){var c=i.type.contextTypes;if(!c)return ta;var h=i.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===o)return h.__reactInternalMemoizedMaskedChildContext;var v={},w;for(w in c)v[w]=o[w];return h&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=v),v}function On(i){return i=i.childContextTypes,i!=null}function Sd(){ar(In),ar(Zr)}function d_(i,o,c){if(Zr.current!==ta)throw Error(r(168));ir(Zr,o),ir(In,c)}function h_(i,o,c){var h=i.stateNode;if(o=o.childContextTypes,typeof h.getChildContext!="function")return c;h=h.getChildContext();for(var v in h)if(!(v in o))throw Error(r(108,we(i)||"Unknown",v));return F({},c,h)}function Ed(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||ta,su=Zr.current,ir(Zr,i),ir(In,In.current),!0}function p_(i,o,c){var h=i.stateNode;if(!h)throw Error(r(169));c?(i=h_(i,o,su),h.__reactInternalMemoizedMergedChildContext=i,ar(In),ar(Zr),ir(Zr,i)):ar(In),ir(In,c)}var oo=null,Id=!1,Ym=!1;function m_(i){oo===null?oo=[i]:oo.push(i)}function kD(i){Id=!0,m_(i)}function ra(){if(!Ym&&oo!==null){Ym=!0;var i=0,o=Tt;try{var c=oo;for(Tt=1;i<c.length;i++){var h=c[i];do h=h(!0);while(h!==null)}oo=null,Id=!1}catch(v){throw oo!==null&&(oo=oo.slice(i+1)),ju(zo,ra),v}finally{Tt=o,Ym=!1}}return null}var lc=[],fc=0,Od=null,kd=0,mi=[],yi=0,ou=null,ao=1,uo="";function au(i,o){lc[fc++]=kd,lc[fc++]=Od,Od=i,kd=o}function y_(i,o,c){mi[yi++]=ao,mi[yi++]=uo,mi[yi++]=ou,ou=i;var h=ao;i=uo;var v=32-bn(h)-1;h&=~(1<<v),c+=1;var w=32-bn(o)+v;if(30<w){var N=v-v%5;w=(h&(1<<N)-1).toString(32),h>>=N,v-=N,ao=1<<32-bn(o)+v|c<<v|h,uo=w+i}else ao=1<<w|c<<v|h,uo=i}function Gm(i){i.return!==null&&(au(i,1),y_(i,1,0))}function Jm(i){for(;i===Od;)Od=lc[--fc],lc[fc]=null,kd=lc[--fc],lc[fc]=null;for(;i===ou;)ou=mi[--yi],mi[yi]=null,uo=mi[--yi],mi[yi]=null,ao=mi[--yi],mi[yi]=null}var Gn=null,Jn=null,mr=!1,zi=null;function v_(i,o){var c=wi(5,null,null,0);c.elementType="DELETED",c.stateNode=o,c.return=i,o=i.deletions,o===null?(i.deletions=[c],i.flags|=16):o.push(c)}function g_(i,o){switch(i.tag){case 5:var c=i.type;return o=o.nodeType!==1||c.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,Gn=i,Jn=Zo(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,Gn=i,Jn=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(c=ou!==null?{id:ao,overflow:uo}:null,i.memoizedState={dehydrated:o,treeContext:c,retryLane:1073741824},c=wi(18,null,null,0),c.stateNode=o,c.return=i,i.child=c,Gn=i,Jn=null,!0):!1;default:return!1}}function Xm(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Zm(i){if(mr){var o=Jn;if(o){var c=o;if(!g_(i,o)){if(Xm(i))throw Error(r(418));o=Zo(c.nextSibling);var h=Gn;o&&g_(i,o)?v_(h,c):(i.flags=i.flags&-4097|2,mr=!1,Gn=i)}}else{if(Xm(i))throw Error(r(418));i.flags=i.flags&-4097|2,mr=!1,Gn=i}}}function __(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Gn=i}function Pd(i){if(i!==Gn)return!1;if(!mr)return __(i),mr=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!Vm(i.type,i.memoizedProps)),o&&(o=Jn)){if(Xm(i))throw w_(),Error(r(418));for(;o;)v_(i,o),o=Zo(o.nextSibling)}if(__(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var c=i.data;if(c==="/$"){if(o===0){Jn=Zo(i.nextSibling);break e}o--}else c!=="$"&&c!=="$!"&&c!=="$?"||o++}i=i.nextSibling}Jn=null}}else Jn=Gn?Zo(i.stateNode.nextSibling):null;return!0}function w_(){for(var i=Jn;i;)i=Zo(i.nextSibling)}function dc(){Jn=Gn=null,mr=!1}function ey(i){zi===null?zi=[i]:zi.push(i)}var PD=B.ReactCurrentBatchConfig;function qi(i,o){if(i&&i.defaultProps){o=F({},o),i=i.defaultProps;for(var c in i)o[c]===void 0&&(o[c]=i[c]);return o}return o}var Dd=ea(null),Rd=null,hc=null,ty=null;function ry(){ty=hc=Rd=null}function ny(i){var o=Dd.current;ar(Dd),i._currentValue=o}function iy(i,o,c){for(;i!==null;){var h=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,h!==null&&(h.childLanes|=o)):h!==null&&(h.childLanes&o)!==o&&(h.childLanes|=o),i===c)break;i=i.return}}function pc(i,o){Rd=i,ty=hc=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&o)!==0&&(kn=!0),i.firstContext=null)}function vi(i){var o=i._currentValue;if(ty!==i)if(i={context:i,memoizedValue:o,next:null},hc===null){if(Rd===null)throw Error(r(308));hc=i,Rd.dependencies={lanes:0,firstContext:i}}else hc=hc.next=i;return o}var uu=null;function sy(i){uu===null?uu=[i]:uu.push(i)}function b_(i,o,c,h){var v=o.interleaved;return v===null?(c.next=c,sy(o)):(c.next=v.next,v.next=c),o.interleaved=c,co(i,h)}function co(i,o){i.lanes|=o;var c=i.alternate;for(c!==null&&(c.lanes|=o),c=i,i=i.return;i!==null;)i.childLanes|=o,c=i.alternate,c!==null&&(c.childLanes|=o),c=i,i=i.return;return c.tag===3?c.stateNode:null}var na=!1;function oy(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function S_(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function lo(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function ia(i,o,c){var h=i.updateQueue;if(h===null)return null;if(h=h.shared,($t&2)!==0){var v=h.pending;return v===null?o.next=o:(o.next=v.next,v.next=o),h.pending=o,co(i,c)}return v=h.interleaved,v===null?(o.next=o,sy(h)):(o.next=v.next,v.next=o),h.interleaved=o,co(i,c)}function Cd(i,o,c){if(o=o.updateQueue,o!==null&&(o=o.shared,(c&4194240)!==0)){var h=o.lanes;h&=i.pendingLanes,c|=h,o.lanes=c,Ku(i,c)}}function E_(i,o){var c=i.updateQueue,h=i.alternate;if(h!==null&&(h=h.updateQueue,c===h)){var v=null,w=null;if(c=c.firstBaseUpdate,c!==null){do{var N={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};w===null?v=w=N:w=w.next=N,c=c.next}while(c!==null);w===null?v=w=o:w=w.next=o}else v=w=o;c={baseState:h.baseState,firstBaseUpdate:v,lastBaseUpdate:w,shared:h.shared,effects:h.effects},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=o:i.next=o,c.lastBaseUpdate=o}function $d(i,o,c,h){var v=i.updateQueue;na=!1;var w=v.firstBaseUpdate,N=v.lastBaseUpdate,V=v.shared.pending;if(V!==null){v.shared.pending=null;var G=V,ye=G.next;G.next=null,N===null?w=ye:N.next=ye,N=G;var Re=i.alternate;Re!==null&&(Re=Re.updateQueue,V=Re.lastBaseUpdate,V!==N&&(V===null?Re.firstBaseUpdate=ye:V.next=ye,Re.lastBaseUpdate=G))}if(w!==null){var $e=v.baseState;N=0,Re=ye=G=null,V=w;do{var De=V.lane,qe=V.eventTime;if((h&De)===De){Re!==null&&(Re=Re.next={eventTime:qe,lane:0,tag:V.tag,payload:V.payload,callback:V.callback,next:null});e:{var Qe=i,Ye=V;switch(De=o,qe=c,Ye.tag){case 1:if(Qe=Ye.payload,typeof Qe=="function"){$e=Qe.call(qe,$e,De);break e}$e=Qe;break e;case 3:Qe.flags=Qe.flags&-65537|128;case 0:if(Qe=Ye.payload,De=typeof Qe=="function"?Qe.call(qe,$e,De):Qe,De==null)break e;$e=F({},$e,De);break e;case 2:na=!0}}V.callback!==null&&V.lane!==0&&(i.flags|=64,De=v.effects,De===null?v.effects=[V]:De.push(V))}else qe={eventTime:qe,lane:De,tag:V.tag,payload:V.payload,callback:V.callback,next:null},Re===null?(ye=Re=qe,G=$e):Re=Re.next=qe,N|=De;if(V=V.next,V===null){if(V=v.shared.pending,V===null)break;De=V,V=De.next,De.next=null,v.lastBaseUpdate=De,v.shared.pending=null}}while(!0);if(Re===null&&(G=$e),v.baseState=G,v.firstBaseUpdate=ye,v.lastBaseUpdate=Re,o=v.shared.interleaved,o!==null){v=o;do N|=v.lane,v=v.next;while(v!==o)}else w===null&&(v.shared.lanes=0);fu|=N,i.lanes=N,i.memoizedState=$e}}function I_(i,o,c){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var h=i[o],v=h.callback;if(v!==null){if(h.callback=null,h=c,typeof v!="function")throw Error(r(191,v));v.call(h)}}}var O_=new t.Component().refs;function ay(i,o,c,h){o=i.memoizedState,c=c(h,o),c=c==null?o:F({},o,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var Ad={isMounted:function(i){return(i=i._reactInternals)?fi(i)===i:!1},enqueueSetState:function(i,o,c){i=i._reactInternals;var h=cn(),v=ua(i),w=lo(h,v);w.payload=o,c!=null&&(w.callback=c),o=ia(i,w,v),o!==null&&(Wi(o,i,v,h),Cd(o,i,v))},enqueueReplaceState:function(i,o,c){i=i._reactInternals;var h=cn(),v=ua(i),w=lo(h,v);w.tag=1,w.payload=o,c!=null&&(w.callback=c),o=ia(i,w,v),o!==null&&(Wi(o,i,v,h),Cd(o,i,v))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var c=cn(),h=ua(i),v=lo(c,h);v.tag=2,o!=null&&(v.callback=o),o=ia(i,v,h),o!==null&&(Wi(o,i,h,c),Cd(o,i,h))}};function k_(i,o,c,h,v,w,N){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(h,w,N):o.prototype&&o.prototype.isPureReactComponent?!ue(c,h)||!ue(v,w):!0}function P_(i,o,c){var h=!1,v=ta,w=o.contextType;return typeof w=="object"&&w!==null?w=vi(w):(v=On(o)?su:Zr.current,h=o.contextTypes,w=(h=h!=null)?cc(i,v):ta),o=new o(c,w),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Ad,i.stateNode=o,o._reactInternals=i,h&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=v,i.__reactInternalMemoizedMaskedChildContext=w),o}function D_(i,o,c,h){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(c,h),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(c,h),o.state!==i&&Ad.enqueueReplaceState(o,o.state,null)}function uy(i,o,c,h){var v=i.stateNode;v.props=c,v.state=i.memoizedState,v.refs=O_,oy(i);var w=o.contextType;typeof w=="object"&&w!==null?v.context=vi(w):(w=On(o)?su:Zr.current,v.context=cc(i,w)),v.state=i.memoizedState,w=o.getDerivedStateFromProps,typeof w=="function"&&(ay(i,o,w,c),v.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(o=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),o!==v.state&&Ad.enqueueReplaceState(v,v.state,null),$d(i,c,v,h),v.state=i.memoizedState),typeof v.componentDidMount=="function"&&(i.flags|=4194308)}function Fl(i,o,c){if(i=c.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(r(309));var h=c.stateNode}if(!h)throw Error(r(147,i));var v=h,w=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===w?o.ref:(o=function(N){var V=v.refs;V===O_&&(V=v.refs={}),N===null?delete V[w]:V[w]=N},o._stringRef=w,o)}if(typeof i!="string")throw Error(r(284));if(!c._owner)throw Error(r(290,i))}return i}function Nd(i,o){throw i=Object.prototype.toString.call(o),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function R_(i){var o=i._init;return o(i._payload)}function C_(i){function o(de,re){if(i){var pe=de.deletions;pe===null?(de.deletions=[re],de.flags|=16):pe.push(re)}}function c(de,re){if(!i)return null;for(;re!==null;)o(de,re),re=re.sibling;return null}function h(de,re){for(de=new Map;re!==null;)re.key!==null?de.set(re.key,re):de.set(re.index,re),re=re.sibling;return de}function v(de,re){return de=la(de,re),de.index=0,de.sibling=null,de}function w(de,re,pe){return de.index=pe,i?(pe=de.alternate,pe!==null?(pe=pe.index,pe<re?(de.flags|=2,re):pe):(de.flags|=2,re)):(de.flags|=1048576,re)}function N(de){return i&&de.alternate===null&&(de.flags|=2),de}function V(de,re,pe,Me){return re===null||re.tag!==6?(re=Ky(pe,de.mode,Me),re.return=de,re):(re=v(re,pe),re.return=de,re)}function G(de,re,pe,Me){var Je=pe.type;return Je===U?Re(de,re,pe.props.children,Me,pe.key):re!==null&&(re.elementType===Je||typeof Je=="object"&&Je!==null&&Je.$$typeof===nt&&R_(Je)===re.type)?(Me=v(re,pe.props),Me.ref=Fl(de,re,pe),Me.return=de,Me):(Me=Xd(pe.type,pe.key,pe.props,null,de.mode,Me),Me.ref=Fl(de,re,pe),Me.return=de,Me)}function ye(de,re,pe,Me){return re===null||re.tag!==4||re.stateNode.containerInfo!==pe.containerInfo||re.stateNode.implementation!==pe.implementation?(re=Wy(pe,de.mode,Me),re.return=de,re):(re=v(re,pe.children||[]),re.return=de,re)}function Re(de,re,pe,Me,Je){return re===null||re.tag!==7?(re=mu(pe,de.mode,Me,Je),re.return=de,re):(re=v(re,pe),re.return=de,re)}function $e(de,re,pe){if(typeof re=="string"&&re!==""||typeof re=="number")return re=Ky(""+re,de.mode,pe),re.return=de,re;if(typeof re=="object"&&re!==null){switch(re.$$typeof){case k:return pe=Xd(re.type,re.key,re.props,null,de.mode,pe),pe.ref=Fl(de,null,re),pe.return=de,pe;case x:return re=Wy(re,de.mode,pe),re.return=de,re;case nt:var Me=re._init;return $e(de,Me(re._payload),pe)}if(lr(re)||je(re))return re=mu(re,de.mode,pe,null),re.return=de,re;Nd(de,re)}return null}function De(de,re,pe,Me){var Je=re!==null?re.key:null;if(typeof pe=="string"&&pe!==""||typeof pe=="number")return Je!==null?null:V(de,re,""+pe,Me);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case k:return pe.key===Je?G(de,re,pe,Me):null;case x:return pe.key===Je?ye(de,re,pe,Me):null;case nt:return Je=pe._init,De(de,re,Je(pe._payload),Me)}if(lr(pe)||je(pe))return Je!==null?null:Re(de,re,pe,Me,null);Nd(de,pe)}return null}function qe(de,re,pe,Me,Je){if(typeof Me=="string"&&Me!==""||typeof Me=="number")return de=de.get(pe)||null,V(re,de,""+Me,Je);if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case k:return de=de.get(Me.key===null?pe:Me.key)||null,G(re,de,Me,Je);case x:return de=de.get(Me.key===null?pe:Me.key)||null,ye(re,de,Me,Je);case nt:var tt=Me._init;return qe(de,re,pe,tt(Me._payload),Je)}if(lr(Me)||je(Me))return de=de.get(pe)||null,Re(re,de,Me,Je,null);Nd(re,Me)}return null}function Qe(de,re,pe,Me){for(var Je=null,tt=null,rt=re,it=re=0,Ur=null;rt!==null&&it<pe.length;it++){rt.index>it?(Ur=rt,rt=null):Ur=rt.sibling;var At=De(de,rt,pe[it],Me);if(At===null){rt===null&&(rt=Ur);break}i&&rt&&At.alternate===null&&o(de,rt),re=w(At,re,it),tt===null?Je=At:tt.sibling=At,tt=At,rt=Ur}if(it===pe.length)return c(de,rt),mr&&au(de,it),Je;if(rt===null){for(;it<pe.length;it++)rt=$e(de,pe[it],Me),rt!==null&&(re=w(rt,re,it),tt===null?Je=rt:tt.sibling=rt,tt=rt);return mr&&au(de,it),Je}for(rt=h(de,rt);it<pe.length;it++)Ur=qe(rt,de,it,pe[it],Me),Ur!==null&&(i&&Ur.alternate!==null&&rt.delete(Ur.key===null?it:Ur.key),re=w(Ur,re,it),tt===null?Je=Ur:tt.sibling=Ur,tt=Ur);return i&&rt.forEach(function(fa){return o(de,fa)}),mr&&au(de,it),Je}function Ye(de,re,pe,Me){var Je=je(pe);if(typeof Je!="function")throw Error(r(150));if(pe=Je.call(pe),pe==null)throw Error(r(151));for(var tt=Je=null,rt=re,it=re=0,Ur=null,At=pe.next();rt!==null&&!At.done;it++,At=pe.next()){rt.index>it?(Ur=rt,rt=null):Ur=rt.sibling;var fa=De(de,rt,At.value,Me);if(fa===null){rt===null&&(rt=Ur);break}i&&rt&&fa.alternate===null&&o(de,rt),re=w(fa,re,it),tt===null?Je=fa:tt.sibling=fa,tt=fa,rt=Ur}if(At.done)return c(de,rt),mr&&au(de,it),Je;if(rt===null){for(;!At.done;it++,At=pe.next())At=$e(de,At.value,Me),At!==null&&(re=w(At,re,it),tt===null?Je=At:tt.sibling=At,tt=At);return mr&&au(de,it),Je}for(rt=h(de,rt);!At.done;it++,At=pe.next())At=qe(rt,de,it,At.value,Me),At!==null&&(i&&At.alternate!==null&&rt.delete(At.key===null?it:At.key),re=w(At,re,it),tt===null?Je=At:tt.sibling=At,tt=At);return i&&rt.forEach(function(oR){return o(de,oR)}),mr&&au(de,it),Je}function kr(de,re,pe,Me){if(typeof pe=="object"&&pe!==null&&pe.type===U&&pe.key===null&&(pe=pe.props.children),typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case k:e:{for(var Je=pe.key,tt=re;tt!==null;){if(tt.key===Je){if(Je=pe.type,Je===U){if(tt.tag===7){c(de,tt.sibling),re=v(tt,pe.props.children),re.return=de,de=re;break e}}else if(tt.elementType===Je||typeof Je=="object"&&Je!==null&&Je.$$typeof===nt&&R_(Je)===tt.type){c(de,tt.sibling),re=v(tt,pe.props),re.ref=Fl(de,tt,pe),re.return=de,de=re;break e}c(de,tt);break}else o(de,tt);tt=tt.sibling}pe.type===U?(re=mu(pe.props.children,de.mode,Me,pe.key),re.return=de,de=re):(Me=Xd(pe.type,pe.key,pe.props,null,de.mode,Me),Me.ref=Fl(de,re,pe),Me.return=de,de=Me)}return N(de);case x:e:{for(tt=pe.key;re!==null;){if(re.key===tt)if(re.tag===4&&re.stateNode.containerInfo===pe.containerInfo&&re.stateNode.implementation===pe.implementation){c(de,re.sibling),re=v(re,pe.children||[]),re.return=de,de=re;break e}else{c(de,re);break}else o(de,re);re=re.sibling}re=Wy(pe,de.mode,Me),re.return=de,de=re}return N(de);case nt:return tt=pe._init,kr(de,re,tt(pe._payload),Me)}if(lr(pe))return Qe(de,re,pe,Me);if(je(pe))return Ye(de,re,pe,Me);Nd(de,pe)}return typeof pe=="string"&&pe!==""||typeof pe=="number"?(pe=""+pe,re!==null&&re.tag===6?(c(de,re.sibling),re=v(re,pe),re.return=de,de=re):(c(de,re),re=Ky(pe,de.mode,Me),re.return=de,de=re),N(de)):c(de,re)}return kr}var mc=C_(!0),$_=C_(!1),Bl={},gs=ea(Bl),Ll=ea(Bl),jl=ea(Bl);function cu(i){if(i===Bl)throw Error(r(174));return i}function cy(i,o){switch(ir(jl,o),ir(Ll,i),ir(gs,Bl),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:Ai(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=Ai(o,i)}ar(gs),ir(gs,o)}function yc(){ar(gs),ar(Ll),ar(jl)}function A_(i){cu(jl.current);var o=cu(gs.current),c=Ai(o,i.type);o!==c&&(ir(Ll,i),ir(gs,c))}function ly(i){Ll.current===i&&(ar(gs),ar(Ll))}var vr=ea(0);function Td(i){for(var o=i;o!==null;){if(o.tag===13){var c=o.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var fy=[];function dy(){for(var i=0;i<fy.length;i++)fy[i]._workInProgressVersionPrimary=null;fy.length=0}var xd=B.ReactCurrentDispatcher,hy=B.ReactCurrentBatchConfig,lu=0,gr=null,Tr=null,Lr=null,Md=!1,Ul=!1,zl=0,DD=0;function en(){throw Error(r(321))}function py(i,o){if(o===null)return!1;for(var c=0;c<o.length&&c<i.length;c++)if(!H(i[c],o[c]))return!1;return!0}function my(i,o,c,h,v,w){if(lu=w,gr=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,xd.current=i===null||i.memoizedState===null?AD:ND,i=c(h,v),Ul){w=0;do{if(Ul=!1,zl=0,25<=w)throw Error(r(301));w+=1,Lr=Tr=null,o.updateQueue=null,xd.current=TD,i=c(h,v)}while(Ul)}if(xd.current=Ld,o=Tr!==null&&Tr.next!==null,lu=0,Lr=Tr=gr=null,Md=!1,o)throw Error(r(300));return i}function yy(){var i=zl!==0;return zl=0,i}function _s(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Lr===null?gr.memoizedState=Lr=i:Lr=Lr.next=i,Lr}function gi(){if(Tr===null){var i=gr.alternate;i=i!==null?i.memoizedState:null}else i=Tr.next;var o=Lr===null?gr.memoizedState:Lr.next;if(o!==null)Lr=o,Tr=i;else{if(i===null)throw Error(r(310));Tr=i,i={memoizedState:Tr.memoizedState,baseState:Tr.baseState,baseQueue:Tr.baseQueue,queue:Tr.queue,next:null},Lr===null?gr.memoizedState=Lr=i:Lr=Lr.next=i}return Lr}function ql(i,o){return typeof o=="function"?o(i):o}function vy(i){var o=gi(),c=o.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=i;var h=Tr,v=h.baseQueue,w=c.pending;if(w!==null){if(v!==null){var N=v.next;v.next=w.next,w.next=N}h.baseQueue=v=w,c.pending=null}if(v!==null){w=v.next,h=h.baseState;var V=N=null,G=null,ye=w;do{var Re=ye.lane;if((lu&Re)===Re)G!==null&&(G=G.next={lane:0,action:ye.action,hasEagerState:ye.hasEagerState,eagerState:ye.eagerState,next:null}),h=ye.hasEagerState?ye.eagerState:i(h,ye.action);else{var $e={lane:Re,action:ye.action,hasEagerState:ye.hasEagerState,eagerState:ye.eagerState,next:null};G===null?(V=G=$e,N=h):G=G.next=$e,gr.lanes|=Re,fu|=Re}ye=ye.next}while(ye!==null&&ye!==w);G===null?N=h:G.next=V,H(h,o.memoizedState)||(kn=!0),o.memoizedState=h,o.baseState=N,o.baseQueue=G,c.lastRenderedState=h}if(i=c.interleaved,i!==null){v=i;do w=v.lane,gr.lanes|=w,fu|=w,v=v.next;while(v!==i)}else v===null&&(c.lanes=0);return[o.memoizedState,c.dispatch]}function gy(i){var o=gi(),c=o.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=i;var h=c.dispatch,v=c.pending,w=o.memoizedState;if(v!==null){c.pending=null;var N=v=v.next;do w=i(w,N.action),N=N.next;while(N!==v);H(w,o.memoizedState)||(kn=!0),o.memoizedState=w,o.baseQueue===null&&(o.baseState=w),c.lastRenderedState=w}return[w,h]}function N_(){}function T_(i,o){var c=gr,h=gi(),v=o(),w=!H(h.memoizedState,v);if(w&&(h.memoizedState=v,kn=!0),h=h.queue,_y(F_.bind(null,c,h,i),[i]),h.getSnapshot!==o||w||Lr!==null&&Lr.memoizedState.tag&1){if(c.flags|=2048,Vl(9,M_.bind(null,c,h,v,o),void 0,null),jr===null)throw Error(r(349));(lu&30)!==0||x_(c,o,v)}return v}function x_(i,o,c){i.flags|=16384,i={getSnapshot:o,value:c},o=gr.updateQueue,o===null?(o={lastEffect:null,stores:null},gr.updateQueue=o,o.stores=[i]):(c=o.stores,c===null?o.stores=[i]:c.push(i))}function M_(i,o,c,h){o.value=c,o.getSnapshot=h,B_(o)&&L_(i)}function F_(i,o,c){return c(function(){B_(o)&&L_(i)})}function B_(i){var o=i.getSnapshot;i=i.value;try{var c=o();return!H(i,c)}catch{return!0}}function L_(i){var o=co(i,1);o!==null&&Wi(o,i,1,-1)}function j_(i){var o=_s();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ql,lastRenderedState:i},o.queue=i,i=i.dispatch=$D.bind(null,gr,i),[o.memoizedState,i]}function Vl(i,o,c,h){return i={tag:i,create:o,destroy:c,deps:h,next:null},o=gr.updateQueue,o===null?(o={lastEffect:null,stores:null},gr.updateQueue=o,o.lastEffect=i.next=i):(c=o.lastEffect,c===null?o.lastEffect=i.next=i:(h=c.next,c.next=i,i.next=h,o.lastEffect=i)),i}function U_(){return gi().memoizedState}function Fd(i,o,c,h){var v=_s();gr.flags|=i,v.memoizedState=Vl(1|o,c,void 0,h===void 0?null:h)}function Bd(i,o,c,h){var v=gi();h=h===void 0?null:h;var w=void 0;if(Tr!==null){var N=Tr.memoizedState;if(w=N.destroy,h!==null&&py(h,N.deps)){v.memoizedState=Vl(o,c,w,h);return}}gr.flags|=i,v.memoizedState=Vl(1|o,c,w,h)}function z_(i,o){return Fd(8390656,8,i,o)}function _y(i,o){return Bd(2048,8,i,o)}function q_(i,o){return Bd(4,2,i,o)}function V_(i,o){return Bd(4,4,i,o)}function K_(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function W_(i,o,c){return c=c!=null?c.concat([i]):null,Bd(4,4,K_.bind(null,o,i),c)}function wy(){}function H_(i,o){var c=gi();o=o===void 0?null:o;var h=c.memoizedState;return h!==null&&o!==null&&py(o,h[1])?h[0]:(c.memoizedState=[i,o],i)}function Q_(i,o){var c=gi();o=o===void 0?null:o;var h=c.memoizedState;return h!==null&&o!==null&&py(o,h[1])?h[0]:(i=i(),c.memoizedState=[i,o],i)}function Y_(i,o,c){return(lu&21)===0?(i.baseState&&(i.baseState=!1,kn=!0),i.memoizedState=c):(H(c,o)||(c=za(),gr.lanes|=c,fu|=c,i.baseState=!0),o)}function RD(i,o){var c=Tt;Tt=c!==0&&4>c?c:4,i(!0);var h=hy.transition;hy.transition={};try{i(!1),o()}finally{Tt=c,hy.transition=h}}function G_(){return gi().memoizedState}function CD(i,o,c){var h=ua(i);if(c={lane:h,action:c,hasEagerState:!1,eagerState:null,next:null},J_(i))X_(o,c);else if(c=b_(i,o,c,h),c!==null){var v=cn();Wi(c,i,h,v),Z_(c,o,h)}}function $D(i,o,c){var h=ua(i),v={lane:h,action:c,hasEagerState:!1,eagerState:null,next:null};if(J_(i))X_(o,v);else{var w=i.alternate;if(i.lanes===0&&(w===null||w.lanes===0)&&(w=o.lastRenderedReducer,w!==null))try{var N=o.lastRenderedState,V=w(N,c);if(v.hasEagerState=!0,v.eagerState=V,H(V,N)){var G=o.interleaved;G===null?(v.next=v,sy(o)):(v.next=G.next,G.next=v),o.interleaved=v;return}}catch{}c=b_(i,o,v,h),c!==null&&(v=cn(),Wi(c,i,h,v),Z_(c,o,h))}}function J_(i){var o=i.alternate;return i===gr||o!==null&&o===gr}function X_(i,o){Ul=Md=!0;var c=i.pending;c===null?o.next=o:(o.next=c.next,c.next=o),i.pending=o}function Z_(i,o,c){if((c&4194240)!==0){var h=o.lanes;h&=i.pendingLanes,c|=h,o.lanes=c,Ku(i,c)}}var Ld={readContext:vi,useCallback:en,useContext:en,useEffect:en,useImperativeHandle:en,useInsertionEffect:en,useLayoutEffect:en,useMemo:en,useReducer:en,useRef:en,useState:en,useDebugValue:en,useDeferredValue:en,useTransition:en,useMutableSource:en,useSyncExternalStore:en,useId:en,unstable_isNewReconciler:!1},AD={readContext:vi,useCallback:function(i,o){return _s().memoizedState=[i,o===void 0?null:o],i},useContext:vi,useEffect:z_,useImperativeHandle:function(i,o,c){return c=c!=null?c.concat([i]):null,Fd(4194308,4,K_.bind(null,o,i),c)},useLayoutEffect:function(i,o){return Fd(4194308,4,i,o)},useInsertionEffect:function(i,o){return Fd(4,2,i,o)},useMemo:function(i,o){var c=_s();return o=o===void 0?null:o,i=i(),c.memoizedState=[i,o],i},useReducer:function(i,o,c){var h=_s();return o=c!==void 0?c(o):o,h.memoizedState=h.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},h.queue=i,i=i.dispatch=CD.bind(null,gr,i),[h.memoizedState,i]},useRef:function(i){var o=_s();return i={current:i},o.memoizedState=i},useState:j_,useDebugValue:wy,useDeferredValue:function(i){return _s().memoizedState=i},useTransition:function(){var i=j_(!1),o=i[0];return i=RD.bind(null,i[1]),_s().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,c){var h=gr,v=_s();if(mr){if(c===void 0)throw Error(r(407));c=c()}else{if(c=o(),jr===null)throw Error(r(349));(lu&30)!==0||x_(h,o,c)}v.memoizedState=c;var w={value:c,getSnapshot:o};return v.queue=w,z_(F_.bind(null,h,w,i),[i]),h.flags|=2048,Vl(9,M_.bind(null,h,w,c,o),void 0,null),c},useId:function(){var i=_s(),o=jr.identifierPrefix;if(mr){var c=uo,h=ao;c=(h&~(1<<32-bn(h)-1)).toString(32)+c,o=":"+o+"R"+c,c=zl++,0<c&&(o+="H"+c.toString(32)),o+=":"}else c=DD++,o=":"+o+"r"+c.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},ND={readContext:vi,useCallback:H_,useContext:vi,useEffect:_y,useImperativeHandle:W_,useInsertionEffect:q_,useLayoutEffect:V_,useMemo:Q_,useReducer:vy,useRef:U_,useState:function(){return vy(ql)},useDebugValue:wy,useDeferredValue:function(i){var o=gi();return Y_(o,Tr.memoizedState,i)},useTransition:function(){var i=vy(ql)[0],o=gi().memoizedState;return[i,o]},useMutableSource:N_,useSyncExternalStore:T_,useId:G_,unstable_isNewReconciler:!1},TD={readContext:vi,useCallback:H_,useContext:vi,useEffect:_y,useImperativeHandle:W_,useInsertionEffect:q_,useLayoutEffect:V_,useMemo:Q_,useReducer:gy,useRef:U_,useState:function(){return gy(ql)},useDebugValue:wy,useDeferredValue:function(i){var o=gi();return Tr===null?o.memoizedState=i:Y_(o,Tr.memoizedState,i)},useTransition:function(){var i=gy(ql)[0],o=gi().memoizedState;return[i,o]},useMutableSource:N_,useSyncExternalStore:T_,useId:G_,unstable_isNewReconciler:!1};function vc(i,o){try{var c="",h=o;do c+=A(h),h=h.return;while(h);var v=c}catch(w){v=`
Error generating stack: `+w.message+`
`+w.stack}return{value:i,source:o,stack:v,digest:null}}function by(i,o,c){return{value:i,source:null,stack:c??null,digest:o??null}}function Sy(i,o){try{console.error(o.value)}catch(c){setTimeout(function(){throw c})}}var xD=typeof WeakMap=="function"?WeakMap:Map;function ew(i,o,c){c=lo(-1,c),c.tag=3,c.payload={element:null};var h=o.value;return c.callback=function(){Wd||(Wd=!0,Fy=h),Sy(i,o)},c}function tw(i,o,c){c=lo(-1,c),c.tag=3;var h=i.type.getDerivedStateFromError;if(typeof h=="function"){var v=o.value;c.payload=function(){return h(v)},c.callback=function(){Sy(i,o)}}var w=i.stateNode;return w!==null&&typeof w.componentDidCatch=="function"&&(c.callback=function(){Sy(i,o),typeof h!="function"&&(oa===null?oa=new Set([this]):oa.add(this));var N=o.stack;this.componentDidCatch(o.value,{componentStack:N!==null?N:""})}),c}function rw(i,o,c){var h=i.pingCache;if(h===null){h=i.pingCache=new xD;var v=new Set;h.set(o,v)}else v=h.get(o),v===void 0&&(v=new Set,h.set(o,v));v.has(c)||(v.add(c),i=YD.bind(null,i,o,c),o.then(i,i))}function nw(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function iw(i,o,c,h,v){return(i.mode&1)===0?(i===o?i.flags|=65536:(i.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(o=lo(-1,1),o.tag=2,ia(c,o,1))),c.lanes|=1),i):(i.flags|=65536,i.lanes=v,i)}var MD=B.ReactCurrentOwner,kn=!1;function un(i,o,c,h){o.child=i===null?$_(o,null,c,h):mc(o,i.child,c,h)}function sw(i,o,c,h,v){c=c.render;var w=o.ref;return pc(o,v),h=my(i,o,c,h,w,v),c=yy(),i!==null&&!kn?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~v,fo(i,o,v)):(mr&&c&&Gm(o),o.flags|=1,un(i,o,h,v),o.child)}function ow(i,o,c,h,v){if(i===null){var w=c.type;return typeof w=="function"&&!Vy(w)&&w.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(o.tag=15,o.type=w,aw(i,o,w,h,v)):(i=Xd(c.type,null,h,o,o.mode,v),i.ref=o.ref,i.return=o,o.child=i)}if(w=i.child,(i.lanes&v)===0){var N=w.memoizedProps;if(c=c.compare,c=c!==null?c:ue,c(N,h)&&i.ref===o.ref)return fo(i,o,v)}return o.flags|=1,i=la(w,h),i.ref=o.ref,i.return=o,o.child=i}function aw(i,o,c,h,v){if(i!==null){var w=i.memoizedProps;if(ue(w,h)&&i.ref===o.ref)if(kn=!1,o.pendingProps=h=w,(i.lanes&v)!==0)(i.flags&131072)!==0&&(kn=!0);else return o.lanes=i.lanes,fo(i,o,v)}return Ey(i,o,c,h,v)}function uw(i,o,c){var h=o.pendingProps,v=h.children,w=i!==null?i.memoizedState:null;if(h.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},ir(_c,Xn),Xn|=c;else{if((c&1073741824)===0)return i=w!==null?w.baseLanes|c:c,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,ir(_c,Xn),Xn|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=w!==null?w.baseLanes:c,ir(_c,Xn),Xn|=h}else w!==null?(h=w.baseLanes|c,o.memoizedState=null):h=c,ir(_c,Xn),Xn|=h;return un(i,o,v,c),o.child}function cw(i,o){var c=o.ref;(i===null&&c!==null||i!==null&&i.ref!==c)&&(o.flags|=512,o.flags|=2097152)}function Ey(i,o,c,h,v){var w=On(c)?su:Zr.current;return w=cc(o,w),pc(o,v),c=my(i,o,c,h,w,v),h=yy(),i!==null&&!kn?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~v,fo(i,o,v)):(mr&&h&&Gm(o),o.flags|=1,un(i,o,c,v),o.child)}function lw(i,o,c,h,v){if(On(c)){var w=!0;Ed(o)}else w=!1;if(pc(o,v),o.stateNode===null)Ud(i,o),P_(o,c,h),uy(o,c,h,v),h=!0;else if(i===null){var N=o.stateNode,V=o.memoizedProps;N.props=V;var G=N.context,ye=c.contextType;typeof ye=="object"&&ye!==null?ye=vi(ye):(ye=On(c)?su:Zr.current,ye=cc(o,ye));var Re=c.getDerivedStateFromProps,$e=typeof Re=="function"||typeof N.getSnapshotBeforeUpdate=="function";$e||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(V!==h||G!==ye)&&D_(o,N,h,ye),na=!1;var De=o.memoizedState;N.state=De,$d(o,h,N,v),G=o.memoizedState,V!==h||De!==G||In.current||na?(typeof Re=="function"&&(ay(o,c,Re,h),G=o.memoizedState),(V=na||k_(o,c,V,h,De,G,ye))?($e||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount()),typeof N.componentDidMount=="function"&&(o.flags|=4194308)):(typeof N.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=h,o.memoizedState=G),N.props=h,N.state=G,N.context=ye,h=V):(typeof N.componentDidMount=="function"&&(o.flags|=4194308),h=!1)}else{N=o.stateNode,S_(i,o),V=o.memoizedProps,ye=o.type===o.elementType?V:qi(o.type,V),N.props=ye,$e=o.pendingProps,De=N.context,G=c.contextType,typeof G=="object"&&G!==null?G=vi(G):(G=On(c)?su:Zr.current,G=cc(o,G));var qe=c.getDerivedStateFromProps;(Re=typeof qe=="function"||typeof N.getSnapshotBeforeUpdate=="function")||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(V!==$e||De!==G)&&D_(o,N,h,G),na=!1,De=o.memoizedState,N.state=De,$d(o,h,N,v);var Qe=o.memoizedState;V!==$e||De!==Qe||In.current||na?(typeof qe=="function"&&(ay(o,c,qe,h),Qe=o.memoizedState),(ye=na||k_(o,c,ye,h,De,Qe,G)||!1)?(Re||typeof N.UNSAFE_componentWillUpdate!="function"&&typeof N.componentWillUpdate!="function"||(typeof N.componentWillUpdate=="function"&&N.componentWillUpdate(h,Qe,G),typeof N.UNSAFE_componentWillUpdate=="function"&&N.UNSAFE_componentWillUpdate(h,Qe,G)),typeof N.componentDidUpdate=="function"&&(o.flags|=4),typeof N.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof N.componentDidUpdate!="function"||V===i.memoizedProps&&De===i.memoizedState||(o.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||V===i.memoizedProps&&De===i.memoizedState||(o.flags|=1024),o.memoizedProps=h,o.memoizedState=Qe),N.props=h,N.state=Qe,N.context=G,h=ye):(typeof N.componentDidUpdate!="function"||V===i.memoizedProps&&De===i.memoizedState||(o.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||V===i.memoizedProps&&De===i.memoizedState||(o.flags|=1024),h=!1)}return Iy(i,o,c,h,w,v)}function Iy(i,o,c,h,v,w){cw(i,o);var N=(o.flags&128)!==0;if(!h&&!N)return v&&p_(o,c,!1),fo(i,o,w);h=o.stateNode,MD.current=o;var V=N&&typeof c.getDerivedStateFromError!="function"?null:h.render();return o.flags|=1,i!==null&&N?(o.child=mc(o,i.child,null,w),o.child=mc(o,null,V,w)):un(i,o,V,w),o.memoizedState=h.state,v&&p_(o,c,!0),o.child}function fw(i){var o=i.stateNode;o.pendingContext?d_(i,o.pendingContext,o.pendingContext!==o.context):o.context&&d_(i,o.context,!1),cy(i,o.containerInfo)}function dw(i,o,c,h,v){return dc(),ey(v),o.flags|=256,un(i,o,c,h),o.child}var Oy={dehydrated:null,treeContext:null,retryLane:0};function ky(i){return{baseLanes:i,cachePool:null,transitions:null}}function hw(i,o,c){var h=o.pendingProps,v=vr.current,w=!1,N=(o.flags&128)!==0,V;if((V=N)||(V=i!==null&&i.memoizedState===null?!1:(v&2)!==0),V?(w=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(v|=1),ir(vr,v&1),i===null)return Zm(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((o.mode&1)===0?o.lanes=1:i.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(N=h.children,i=h.fallback,w?(h=o.mode,w=o.child,N={mode:"hidden",children:N},(h&1)===0&&w!==null?(w.childLanes=0,w.pendingProps=N):w=Zd(N,h,0,null),i=mu(i,h,c,null),w.return=o,i.return=o,w.sibling=i,o.child=w,o.child.memoizedState=ky(c),o.memoizedState=Oy,i):Py(o,N));if(v=i.memoizedState,v!==null&&(V=v.dehydrated,V!==null))return FD(i,o,N,h,V,v,c);if(w){w=h.fallback,N=o.mode,v=i.child,V=v.sibling;var G={mode:"hidden",children:h.children};return(N&1)===0&&o.child!==v?(h=o.child,h.childLanes=0,h.pendingProps=G,o.deletions=null):(h=la(v,G),h.subtreeFlags=v.subtreeFlags&14680064),V!==null?w=la(V,w):(w=mu(w,N,c,null),w.flags|=2),w.return=o,h.return=o,h.sibling=w,o.child=h,h=w,w=o.child,N=i.child.memoizedState,N=N===null?ky(c):{baseLanes:N.baseLanes|c,cachePool:null,transitions:N.transitions},w.memoizedState=N,w.childLanes=i.childLanes&~c,o.memoizedState=Oy,h}return w=i.child,i=w.sibling,h=la(w,{mode:"visible",children:h.children}),(o.mode&1)===0&&(h.lanes=c),h.return=o,h.sibling=null,i!==null&&(c=o.deletions,c===null?(o.deletions=[i],o.flags|=16):c.push(i)),o.child=h,o.memoizedState=null,h}function Py(i,o){return o=Zd({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function jd(i,o,c,h){return h!==null&&ey(h),mc(o,i.child,null,c),i=Py(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function FD(i,o,c,h,v,w,N){if(c)return o.flags&256?(o.flags&=-257,h=by(Error(r(422))),jd(i,o,N,h)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(w=h.fallback,v=o.mode,h=Zd({mode:"visible",children:h.children},v,0,null),w=mu(w,v,N,null),w.flags|=2,h.return=o,w.return=o,h.sibling=w,o.child=h,(o.mode&1)!==0&&mc(o,i.child,null,N),o.child.memoizedState=ky(N),o.memoizedState=Oy,w);if((o.mode&1)===0)return jd(i,o,N,null);if(v.data==="$!"){if(h=v.nextSibling&&v.nextSibling.dataset,h)var V=h.dgst;return h=V,w=Error(r(419)),h=by(w,h,void 0),jd(i,o,N,h)}if(V=(N&i.childLanes)!==0,kn||V){if(h=jr,h!==null){switch(N&-N){case 4:v=2;break;case 16:v=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:v=32;break;case 536870912:v=268435456;break;default:v=0}v=(v&(h.suspendedLanes|N))!==0?0:v,v!==0&&v!==w.retryLane&&(w.retryLane=v,co(i,v),Wi(h,i,v,-1))}return qy(),h=by(Error(r(421))),jd(i,o,N,h)}return v.data==="$?"?(o.flags|=128,o.child=i.child,o=GD.bind(null,i),v._reactRetry=o,null):(i=w.treeContext,Jn=Zo(v.nextSibling),Gn=o,mr=!0,zi=null,i!==null&&(mi[yi++]=ao,mi[yi++]=uo,mi[yi++]=ou,ao=i.id,uo=i.overflow,ou=o),o=Py(o,h.children),o.flags|=4096,o)}function pw(i,o,c){i.lanes|=o;var h=i.alternate;h!==null&&(h.lanes|=o),iy(i.return,o,c)}function Dy(i,o,c,h,v){var w=i.memoizedState;w===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:h,tail:c,tailMode:v}:(w.isBackwards=o,w.rendering=null,w.renderingStartTime=0,w.last=h,w.tail=c,w.tailMode=v)}function mw(i,o,c){var h=o.pendingProps,v=h.revealOrder,w=h.tail;if(un(i,o,h.children,c),h=vr.current,(h&2)!==0)h=h&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&pw(i,c,o);else if(i.tag===19)pw(i,c,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}h&=1}if(ir(vr,h),(o.mode&1)===0)o.memoizedState=null;else switch(v){case"forwards":for(c=o.child,v=null;c!==null;)i=c.alternate,i!==null&&Td(i)===null&&(v=c),c=c.sibling;c=v,c===null?(v=o.child,o.child=null):(v=c.sibling,c.sibling=null),Dy(o,!1,v,c,w);break;case"backwards":for(c=null,v=o.child,o.child=null;v!==null;){if(i=v.alternate,i!==null&&Td(i)===null){o.child=v;break}i=v.sibling,v.sibling=c,c=v,v=i}Dy(o,!0,c,null,w);break;case"together":Dy(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Ud(i,o){(o.mode&1)===0&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function fo(i,o,c){if(i!==null&&(o.dependencies=i.dependencies),fu|=o.lanes,(c&o.childLanes)===0)return null;if(i!==null&&o.child!==i.child)throw Error(r(153));if(o.child!==null){for(i=o.child,c=la(i,i.pendingProps),o.child=c,c.return=o;i.sibling!==null;)i=i.sibling,c=c.sibling=la(i,i.pendingProps),c.return=o;c.sibling=null}return o.child}function BD(i,o,c){switch(o.tag){case 3:fw(o),dc();break;case 5:A_(o);break;case 1:On(o.type)&&Ed(o);break;case 4:cy(o,o.stateNode.containerInfo);break;case 10:var h=o.type._context,v=o.memoizedProps.value;ir(Dd,h._currentValue),h._currentValue=v;break;case 13:if(h=o.memoizedState,h!==null)return h.dehydrated!==null?(ir(vr,vr.current&1),o.flags|=128,null):(c&o.child.childLanes)!==0?hw(i,o,c):(ir(vr,vr.current&1),i=fo(i,o,c),i!==null?i.sibling:null);ir(vr,vr.current&1);break;case 19:if(h=(c&o.childLanes)!==0,(i.flags&128)!==0){if(h)return mw(i,o,c);o.flags|=128}if(v=o.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),ir(vr,vr.current),h)break;return null;case 22:case 23:return o.lanes=0,uw(i,o,c)}return fo(i,o,c)}var yw,Ry,vw,gw;yw=function(i,o){for(var c=o.child;c!==null;){if(c.tag===5||c.tag===6)i.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},Ry=function(){},vw=function(i,o,c,h){var v=i.memoizedProps;if(v!==h){i=o.stateNode,cu(gs.current);var w=null;switch(c){case"input":v=Ce(i,v),h=Ce(i,h),w=[];break;case"select":v=F({},v,{value:void 0}),h=F({},h,{value:void 0}),w=[];break;case"textarea":v=qn(i,v),h=qn(i,h),w=[];break;default:typeof v.onClick!="function"&&typeof h.onClick=="function"&&(i.onclick=wd)}qs(c,h);var N;c=null;for(ye in v)if(!h.hasOwnProperty(ye)&&v.hasOwnProperty(ye)&&v[ye]!=null)if(ye==="style"){var V=v[ye];for(N in V)V.hasOwnProperty(N)&&(c||(c={}),c[N]="")}else ye!=="dangerouslySetInnerHTML"&&ye!=="children"&&ye!=="suppressContentEditableWarning"&&ye!=="suppressHydrationWarning"&&ye!=="autoFocus"&&(s.hasOwnProperty(ye)?w||(w=[]):(w=w||[]).push(ye,null));for(ye in h){var G=h[ye];if(V=v?.[ye],h.hasOwnProperty(ye)&&G!==V&&(G!=null||V!=null))if(ye==="style")if(V){for(N in V)!V.hasOwnProperty(N)||G&&G.hasOwnProperty(N)||(c||(c={}),c[N]="");for(N in G)G.hasOwnProperty(N)&&V[N]!==G[N]&&(c||(c={}),c[N]=G[N])}else c||(w||(w=[]),w.push(ye,c)),c=G;else ye==="dangerouslySetInnerHTML"?(G=G?G.__html:void 0,V=V?V.__html:void 0,G!=null&&V!==G&&(w=w||[]).push(ye,G)):ye==="children"?typeof G!="string"&&typeof G!="number"||(w=w||[]).push(ye,""+G):ye!=="suppressContentEditableWarning"&&ye!=="suppressHydrationWarning"&&(s.hasOwnProperty(ye)?(G!=null&&ye==="onScroll"&&or("scroll",i),w||V===G||(w=[])):(w=w||[]).push(ye,G))}c&&(w=w||[]).push("style",c);var ye=w;(o.updateQueue=ye)&&(o.flags|=4)}},gw=function(i,o,c,h){c!==h&&(o.flags|=4)};function Kl(i,o){if(!mr)switch(i.tailMode){case"hidden":o=i.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:h.sibling=null}}function tn(i){var o=i.alternate!==null&&i.alternate.child===i.child,c=0,h=0;if(o)for(var v=i.child;v!==null;)c|=v.lanes|v.childLanes,h|=v.subtreeFlags&14680064,h|=v.flags&14680064,v.return=i,v=v.sibling;else for(v=i.child;v!==null;)c|=v.lanes|v.childLanes,h|=v.subtreeFlags,h|=v.flags,v.return=i,v=v.sibling;return i.subtreeFlags|=h,i.childLanes=c,o}function LD(i,o,c){var h=o.pendingProps;switch(Jm(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tn(o),null;case 1:return On(o.type)&&Sd(),tn(o),null;case 3:return h=o.stateNode,yc(),ar(In),ar(Zr),dy(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(i===null||i.child===null)&&(Pd(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,zi!==null&&(jy(zi),zi=null))),Ry(i,o),tn(o),null;case 5:ly(o);var v=cu(jl.current);if(c=o.type,i!==null&&o.stateNode!=null)vw(i,o,c,h,v),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!h){if(o.stateNode===null)throw Error(r(166));return tn(o),null}if(i=cu(gs.current),Pd(o)){h=o.stateNode,c=o.type;var w=o.memoizedProps;switch(h[vs]=o,h[xl]=w,i=(o.mode&1)!==0,c){case"dialog":or("cancel",h),or("close",h);break;case"iframe":case"object":case"embed":or("load",h);break;case"video":case"audio":for(v=0;v<Al.length;v++)or(Al[v],h);break;case"source":or("error",h);break;case"img":case"image":case"link":or("error",h),or("load",h);break;case"details":or("toggle",h);break;case"input":Ke(h,w),or("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!w.multiple},or("invalid",h);break;case"textarea":Ir(h,w),or("invalid",h)}qs(c,w),v=null;for(var N in w)if(w.hasOwnProperty(N)){var V=w[N];N==="children"?typeof V=="string"?h.textContent!==V&&(w.suppressHydrationWarning!==!0&&_d(h.textContent,V,i),v=["children",V]):typeof V=="number"&&h.textContent!==""+V&&(w.suppressHydrationWarning!==!0&&_d(h.textContent,V,i),v=["children",""+V]):s.hasOwnProperty(N)&&V!=null&&N==="onScroll"&&or("scroll",h)}switch(c){case"input":ee(h),Qr(h,w,!0);break;case"textarea":ee(h),ci(h);break;case"select":case"option":break;default:typeof w.onClick=="function"&&(h.onclick=wd)}h=v,o.updateQueue=h,h!==null&&(o.flags|=4)}else{N=v.nodeType===9?v:v.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Yr(c)),i==="http://www.w3.org/1999/xhtml"?c==="script"?(i=N.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof h.is=="string"?i=N.createElement(c,{is:h.is}):(i=N.createElement(c),c==="select"&&(N=i,h.multiple?N.multiple=!0:h.size&&(N.size=h.size))):i=N.createElementNS(i,c),i[vs]=o,i[xl]=h,yw(i,o,!1,!1),o.stateNode=i;e:{switch(N=Ti(c,h),c){case"dialog":or("cancel",i),or("close",i),v=h;break;case"iframe":case"object":case"embed":or("load",i),v=h;break;case"video":case"audio":for(v=0;v<Al.length;v++)or(Al[v],i);v=h;break;case"source":or("error",i),v=h;break;case"img":case"image":case"link":or("error",i),or("load",i),v=h;break;case"details":or("toggle",i),v=h;break;case"input":Ke(i,h),v=Ce(i,h),or("invalid",i);break;case"option":v=h;break;case"select":i._wrapperState={wasMultiple:!!h.multiple},v=F({},h,{value:void 0}),or("invalid",i);break;case"textarea":Ir(i,h),v=qn(i,h),or("invalid",i);break;default:v=h}qs(c,v),V=v;for(w in V)if(V.hasOwnProperty(w)){var G=V[w];w==="style"?Ni(i,G):w==="dangerouslySetInnerHTML"?(G=G?G.__html:void 0,G!=null&&zs(i,G)):w==="children"?typeof G=="string"?(c!=="textarea"||G!=="")&&li(i,G):typeof G=="number"&&li(i,""+G):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(s.hasOwnProperty(w)?G!=null&&w==="onScroll"&&or("scroll",i):G!=null&&C(i,w,G,N))}switch(c){case"input":ee(i),Qr(i,h,!1);break;case"textarea":ee(i),ci(i);break;case"option":h.value!=null&&i.setAttribute("value",""+Oe(h.value));break;case"select":i.multiple=!!h.multiple,w=h.value,w!=null?Pt(i,!!h.multiple,w,!1):h.defaultValue!=null&&Pt(i,!!h.multiple,h.defaultValue,!0);break;default:typeof v.onClick=="function"&&(i.onclick=wd)}switch(c){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return tn(o),null;case 6:if(i&&o.stateNode!=null)gw(i,o,i.memoizedProps,h);else{if(typeof h!="string"&&o.stateNode===null)throw Error(r(166));if(c=cu(jl.current),cu(gs.current),Pd(o)){if(h=o.stateNode,c=o.memoizedProps,h[vs]=o,(w=h.nodeValue!==c)&&(i=Gn,i!==null))switch(i.tag){case 3:_d(h.nodeValue,c,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&_d(h.nodeValue,c,(i.mode&1)!==0)}w&&(o.flags|=4)}else h=(c.nodeType===9?c:c.ownerDocument).createTextNode(h),h[vs]=o,o.stateNode=h}return tn(o),null;case 13:if(ar(vr),h=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(mr&&Jn!==null&&(o.mode&1)!==0&&(o.flags&128)===0)w_(),dc(),o.flags|=98560,w=!1;else if(w=Pd(o),h!==null&&h.dehydrated!==null){if(i===null){if(!w)throw Error(r(318));if(w=o.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(r(317));w[vs]=o}else dc(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;tn(o),w=!1}else zi!==null&&(jy(zi),zi=null),w=!0;if(!w)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=c,o):(h=h!==null,h!==(i!==null&&i.memoizedState!==null)&&h&&(o.child.flags|=8192,(o.mode&1)!==0&&(i===null||(vr.current&1)!==0?xr===0&&(xr=3):qy())),o.updateQueue!==null&&(o.flags|=4),tn(o),null);case 4:return yc(),Ry(i,o),i===null&&Nl(o.stateNode.containerInfo),tn(o),null;case 10:return ny(o.type._context),tn(o),null;case 17:return On(o.type)&&Sd(),tn(o),null;case 19:if(ar(vr),w=o.memoizedState,w===null)return tn(o),null;if(h=(o.flags&128)!==0,N=w.rendering,N===null)if(h)Kl(w,!1);else{if(xr!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(N=Td(i),N!==null){for(o.flags|=128,Kl(w,!1),h=N.updateQueue,h!==null&&(o.updateQueue=h,o.flags|=4),o.subtreeFlags=0,h=c,c=o.child;c!==null;)w=c,i=h,w.flags&=14680066,N=w.alternate,N===null?(w.childLanes=0,w.lanes=i,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=N.childLanes,w.lanes=N.lanes,w.child=N.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=N.memoizedProps,w.memoizedState=N.memoizedState,w.updateQueue=N.updateQueue,w.type=N.type,i=N.dependencies,w.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),c=c.sibling;return ir(vr,vr.current&1|2),o.child}i=i.sibling}w.tail!==null&&hr()>wc&&(o.flags|=128,h=!0,Kl(w,!1),o.lanes=4194304)}else{if(!h)if(i=Td(N),i!==null){if(o.flags|=128,h=!0,c=i.updateQueue,c!==null&&(o.updateQueue=c,o.flags|=4),Kl(w,!0),w.tail===null&&w.tailMode==="hidden"&&!N.alternate&&!mr)return tn(o),null}else 2*hr()-w.renderingStartTime>wc&&c!==1073741824&&(o.flags|=128,h=!0,Kl(w,!1),o.lanes=4194304);w.isBackwards?(N.sibling=o.child,o.child=N):(c=w.last,c!==null?c.sibling=N:o.child=N,w.last=N)}return w.tail!==null?(o=w.tail,w.rendering=o,w.tail=o.sibling,w.renderingStartTime=hr(),o.sibling=null,c=vr.current,ir(vr,h?c&1|2:c&1),o):(tn(o),null);case 22:case 23:return zy(),h=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==h&&(o.flags|=8192),h&&(o.mode&1)!==0?(Xn&1073741824)!==0&&(tn(o),o.subtreeFlags&6&&(o.flags|=8192)):tn(o),null;case 24:return null;case 25:return null}throw Error(r(156,o.tag))}function jD(i,o){switch(Jm(o),o.tag){case 1:return On(o.type)&&Sd(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return yc(),ar(In),ar(Zr),dy(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 5:return ly(o),null;case 13:if(ar(vr),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(r(340));dc()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return ar(vr),null;case 4:return yc(),null;case 10:return ny(o.type._context),null;case 22:case 23:return zy(),null;case 24:return null;default:return null}}var zd=!1,rn=!1,UD=typeof WeakSet=="function"?WeakSet:Set,He=null;function gc(i,o){var c=i.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(h){Er(i,o,h)}else c.current=null}function Cy(i,o,c){try{c()}catch(h){Er(i,o,h)}}var _w=!1;function zD(i,o){if(zm=ps,i=ne(),he(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else e:{c=(c=i.ownerDocument)&&c.defaultView||window;var h=c.getSelection&&c.getSelection();if(h&&h.rangeCount!==0){c=h.anchorNode;var v=h.anchorOffset,w=h.focusNode;h=h.focusOffset;try{c.nodeType,w.nodeType}catch{c=null;break e}var N=0,V=-1,G=-1,ye=0,Re=0,$e=i,De=null;t:for(;;){for(var qe;$e!==c||v!==0&&$e.nodeType!==3||(V=N+v),$e!==w||h!==0&&$e.nodeType!==3||(G=N+h),$e.nodeType===3&&(N+=$e.nodeValue.length),(qe=$e.firstChild)!==null;)De=$e,$e=qe;for(;;){if($e===i)break t;if(De===c&&++ye===v&&(V=N),De===w&&++Re===h&&(G=N),(qe=$e.nextSibling)!==null)break;$e=De,De=$e.parentNode}$e=qe}c=V===-1||G===-1?null:{start:V,end:G}}else c=null}c=c||{start:0,end:0}}else c=null;for(qm={focusedElem:i,selectionRange:c},ps=!1,He=o;He!==null;)if(o=He,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,He=i;else for(;He!==null;){o=He;try{var Qe=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(Qe!==null){var Ye=Qe.memoizedProps,kr=Qe.memoizedState,de=o.stateNode,re=de.getSnapshotBeforeUpdate(o.elementType===o.type?Ye:qi(o.type,Ye),kr);de.__reactInternalSnapshotBeforeUpdate=re}break;case 3:var pe=o.stateNode.containerInfo;pe.nodeType===1?pe.textContent="":pe.nodeType===9&&pe.documentElement&&pe.removeChild(pe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(Me){Er(o,o.return,Me)}if(i=o.sibling,i!==null){i.return=o.return,He=i;break}He=o.return}return Qe=_w,_w=!1,Qe}function Wl(i,o,c){var h=o.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var v=h=h.next;do{if((v.tag&i)===i){var w=v.destroy;v.destroy=void 0,w!==void 0&&Cy(o,c,w)}v=v.next}while(v!==h)}}function qd(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var c=o=o.next;do{if((c.tag&i)===i){var h=c.create;c.destroy=h()}c=c.next}while(c!==o)}}function $y(i){var o=i.ref;if(o!==null){var c=i.stateNode;i.tag,i=c,typeof o=="function"?o(i):o.current=i}}function ww(i){var o=i.alternate;o!==null&&(i.alternate=null,ww(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[vs],delete o[xl],delete o[Hm],delete o[ID],delete o[OD])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function bw(i){return i.tag===5||i.tag===3||i.tag===4}function Sw(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||bw(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Ay(i,o,c){var h=i.tag;if(h===5||h===6)i=i.stateNode,o?c.nodeType===8?c.parentNode.insertBefore(i,o):c.insertBefore(i,o):(c.nodeType===8?(o=c.parentNode,o.insertBefore(i,c)):(o=c,o.appendChild(i)),c=c._reactRootContainer,c!=null||o.onclick!==null||(o.onclick=wd));else if(h!==4&&(i=i.child,i!==null))for(Ay(i,o,c),i=i.sibling;i!==null;)Ay(i,o,c),i=i.sibling}function Ny(i,o,c){var h=i.tag;if(h===5||h===6)i=i.stateNode,o?c.insertBefore(i,o):c.appendChild(i);else if(h!==4&&(i=i.child,i!==null))for(Ny(i,o,c),i=i.sibling;i!==null;)Ny(i,o,c),i=i.sibling}var qr=null,Vi=!1;function sa(i,o,c){for(c=c.child;c!==null;)Ew(i,o,c),c=c.sibling}function Ew(i,o,c){if(Wn&&typeof Wn.onCommitFiberUnmount=="function")try{Wn.onCommitFiberUnmount(Gs,c)}catch{}switch(c.tag){case 5:rn||gc(c,o);case 6:var h=qr,v=Vi;qr=null,sa(i,o,c),qr=h,Vi=v,qr!==null&&(Vi?(i=qr,c=c.stateNode,i.nodeType===8?i.parentNode.removeChild(c):i.removeChild(c)):qr.removeChild(c.stateNode));break;case 18:qr!==null&&(Vi?(i=qr,c=c.stateNode,i.nodeType===8?Wm(i.parentNode,c):i.nodeType===1&&Wm(i,c),Wo(i)):Wm(qr,c.stateNode));break;case 4:h=qr,v=Vi,qr=c.stateNode.containerInfo,Vi=!0,sa(i,o,c),qr=h,Vi=v;break;case 0:case 11:case 14:case 15:if(!rn&&(h=c.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){v=h=h.next;do{var w=v,N=w.destroy;w=w.tag,N!==void 0&&((w&2)!==0||(w&4)!==0)&&Cy(c,o,N),v=v.next}while(v!==h)}sa(i,o,c);break;case 1:if(!rn&&(gc(c,o),h=c.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=c.memoizedProps,h.state=c.memoizedState,h.componentWillUnmount()}catch(V){Er(c,o,V)}sa(i,o,c);break;case 21:sa(i,o,c);break;case 22:c.mode&1?(rn=(h=rn)||c.memoizedState!==null,sa(i,o,c),rn=h):sa(i,o,c);break;default:sa(i,o,c)}}function Iw(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var c=i.stateNode;c===null&&(c=i.stateNode=new UD),o.forEach(function(h){var v=JD.bind(null,i,h);c.has(h)||(c.add(h),h.then(v,v))})}}function Ki(i,o){var c=o.deletions;if(c!==null)for(var h=0;h<c.length;h++){var v=c[h];try{var w=i,N=o,V=N;e:for(;V!==null;){switch(V.tag){case 5:qr=V.stateNode,Vi=!1;break e;case 3:qr=V.stateNode.containerInfo,Vi=!0;break e;case 4:qr=V.stateNode.containerInfo,Vi=!0;break e}V=V.return}if(qr===null)throw Error(r(160));Ew(w,N,v),qr=null,Vi=!1;var G=v.alternate;G!==null&&(G.return=null),v.return=null}catch(ye){Er(v,o,ye)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)Ow(o,i),o=o.sibling}function Ow(i,o){var c=i.alternate,h=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Ki(o,i),ws(i),h&4){try{Wl(3,i,i.return),qd(3,i)}catch(Ye){Er(i,i.return,Ye)}try{Wl(5,i,i.return)}catch(Ye){Er(i,i.return,Ye)}}break;case 1:Ki(o,i),ws(i),h&512&&c!==null&&gc(c,c.return);break;case 5:if(Ki(o,i),ws(i),h&512&&c!==null&&gc(c,c.return),i.flags&32){var v=i.stateNode;try{li(v,"")}catch(Ye){Er(i,i.return,Ye)}}if(h&4&&(v=i.stateNode,v!=null)){var w=i.memoizedProps,N=c!==null?c.memoizedProps:w,V=i.type,G=i.updateQueue;if(i.updateQueue=null,G!==null)try{V==="input"&&w.type==="radio"&&w.name!=null&&pt(v,w),Ti(V,N);var ye=Ti(V,w);for(N=0;N<G.length;N+=2){var Re=G[N],$e=G[N+1];Re==="style"?Ni(v,$e):Re==="dangerouslySetInnerHTML"?zs(v,$e):Re==="children"?li(v,$e):C(v,Re,$e,ye)}switch(V){case"input":yr(v,w);break;case"textarea":Us(v,w);break;case"select":var De=v._wrapperState.wasMultiple;v._wrapperState.wasMultiple=!!w.multiple;var qe=w.value;qe!=null?Pt(v,!!w.multiple,qe,!1):De!==!!w.multiple&&(w.defaultValue!=null?Pt(v,!!w.multiple,w.defaultValue,!0):Pt(v,!!w.multiple,w.multiple?[]:"",!1))}v[xl]=w}catch(Ye){Er(i,i.return,Ye)}}break;case 6:if(Ki(o,i),ws(i),h&4){if(i.stateNode===null)throw Error(r(162));v=i.stateNode,w=i.memoizedProps;try{v.nodeValue=w}catch(Ye){Er(i,i.return,Ye)}}break;case 3:if(Ki(o,i),ws(i),h&4&&c!==null&&c.memoizedState.isDehydrated)try{Wo(o.containerInfo)}catch(Ye){Er(i,i.return,Ye)}break;case 4:Ki(o,i),ws(i);break;case 13:Ki(o,i),ws(i),v=i.child,v.flags&8192&&(w=v.memoizedState!==null,v.stateNode.isHidden=w,!w||v.alternate!==null&&v.alternate.memoizedState!==null||(My=hr())),h&4&&Iw(i);break;case 22:if(Re=c!==null&&c.memoizedState!==null,i.mode&1?(rn=(ye=rn)||Re,Ki(o,i),rn=ye):Ki(o,i),ws(i),h&8192){if(ye=i.memoizedState!==null,(i.stateNode.isHidden=ye)&&!Re&&(i.mode&1)!==0)for(He=i,Re=i.child;Re!==null;){for($e=He=Re;He!==null;){switch(De=He,qe=De.child,De.tag){case 0:case 11:case 14:case 15:Wl(4,De,De.return);break;case 1:gc(De,De.return);var Qe=De.stateNode;if(typeof Qe.componentWillUnmount=="function"){h=De,c=De.return;try{o=h,Qe.props=o.memoizedProps,Qe.state=o.memoizedState,Qe.componentWillUnmount()}catch(Ye){Er(h,c,Ye)}}break;case 5:gc(De,De.return);break;case 22:if(De.memoizedState!==null){Dw($e);continue}}qe!==null?(qe.return=De,He=qe):Dw($e)}Re=Re.sibling}e:for(Re=null,$e=i;;){if($e.tag===5){if(Re===null){Re=$e;try{v=$e.stateNode,ye?(w=v.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none"):(V=$e.stateNode,G=$e.memoizedProps.style,N=G!=null&&G.hasOwnProperty("display")?G.display:null,V.style.display=Fu("display",N))}catch(Ye){Er(i,i.return,Ye)}}}else if($e.tag===6){if(Re===null)try{$e.stateNode.nodeValue=ye?"":$e.memoizedProps}catch(Ye){Er(i,i.return,Ye)}}else if(($e.tag!==22&&$e.tag!==23||$e.memoizedState===null||$e===i)&&$e.child!==null){$e.child.return=$e,$e=$e.child;continue}if($e===i)break e;for(;$e.sibling===null;){if($e.return===null||$e.return===i)break e;Re===$e&&(Re=null),$e=$e.return}Re===$e&&(Re=null),$e.sibling.return=$e.return,$e=$e.sibling}}break;case 19:Ki(o,i),ws(i),h&4&&Iw(i);break;case 21:break;default:Ki(o,i),ws(i)}}function ws(i){var o=i.flags;if(o&2){try{e:{for(var c=i.return;c!==null;){if(bw(c)){var h=c;break e}c=c.return}throw Error(r(160))}switch(h.tag){case 5:var v=h.stateNode;h.flags&32&&(li(v,""),h.flags&=-33);var w=Sw(i);Ny(i,w,v);break;case 3:case 4:var N=h.stateNode.containerInfo,V=Sw(i);Ay(i,V,N);break;default:throw Error(r(161))}}catch(G){Er(i,i.return,G)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function qD(i,o,c){He=i,kw(i)}function kw(i,o,c){for(var h=(i.mode&1)!==0;He!==null;){var v=He,w=v.child;if(v.tag===22&&h){var N=v.memoizedState!==null||zd;if(!N){var V=v.alternate,G=V!==null&&V.memoizedState!==null||rn;V=zd;var ye=rn;if(zd=N,(rn=G)&&!ye)for(He=v;He!==null;)N=He,G=N.child,N.tag===22&&N.memoizedState!==null?Rw(v):G!==null?(G.return=N,He=G):Rw(v);for(;w!==null;)He=w,kw(w),w=w.sibling;He=v,zd=V,rn=ye}Pw(i)}else(v.subtreeFlags&8772)!==0&&w!==null?(w.return=v,He=w):Pw(i)}}function Pw(i){for(;He!==null;){var o=He;if((o.flags&8772)!==0){var c=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:rn||qd(5,o);break;case 1:var h=o.stateNode;if(o.flags&4&&!rn)if(c===null)h.componentDidMount();else{var v=o.elementType===o.type?c.memoizedProps:qi(o.type,c.memoizedProps);h.componentDidUpdate(v,c.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var w=o.updateQueue;w!==null&&I_(o,w,h);break;case 3:var N=o.updateQueue;if(N!==null){if(c=null,o.child!==null)switch(o.child.tag){case 5:c=o.child.stateNode;break;case 1:c=o.child.stateNode}I_(o,N,c)}break;case 5:var V=o.stateNode;if(c===null&&o.flags&4){c=V;var G=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":G.autoFocus&&c.focus();break;case"img":G.src&&(c.src=G.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var ye=o.alternate;if(ye!==null){var Re=ye.memoizedState;if(Re!==null){var $e=Re.dehydrated;$e!==null&&Wo($e)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}rn||o.flags&512&&$y(o)}catch(De){Er(o,o.return,De)}}if(o===i){He=null;break}if(c=o.sibling,c!==null){c.return=o.return,He=c;break}He=o.return}}function Dw(i){for(;He!==null;){var o=He;if(o===i){He=null;break}var c=o.sibling;if(c!==null){c.return=o.return,He=c;break}He=o.return}}function Rw(i){for(;He!==null;){var o=He;try{switch(o.tag){case 0:case 11:case 15:var c=o.return;try{qd(4,o)}catch(G){Er(o,c,G)}break;case 1:var h=o.stateNode;if(typeof h.componentDidMount=="function"){var v=o.return;try{h.componentDidMount()}catch(G){Er(o,v,G)}}var w=o.return;try{$y(o)}catch(G){Er(o,w,G)}break;case 5:var N=o.return;try{$y(o)}catch(G){Er(o,N,G)}}}catch(G){Er(o,o.return,G)}if(o===i){He=null;break}var V=o.sibling;if(V!==null){V.return=o.return,He=V;break}He=o.return}}var VD=Math.ceil,Vd=B.ReactCurrentDispatcher,Ty=B.ReactCurrentOwner,_i=B.ReactCurrentBatchConfig,$t=0,jr=null,Rr=null,Vr=0,Xn=0,_c=ea(0),xr=0,Hl=null,fu=0,Kd=0,xy=0,Ql=null,Pn=null,My=0,wc=1/0,ho=null,Wd=!1,Fy=null,oa=null,Hd=!1,aa=null,Qd=0,Yl=0,By=null,Yd=-1,Gd=0;function cn(){return($t&6)!==0?hr():Yd!==-1?Yd:Yd=hr()}function ua(i){return(i.mode&1)===0?1:($t&2)!==0&&Vr!==0?Vr&-Vr:PD.transition!==null?(Gd===0&&(Gd=za()),Gd):(i=Tt,i!==0||(i=window.event,i=i===void 0?16:id(i.type)),i)}function Wi(i,o,c,h){if(50<Yl)throw Yl=0,By=null,Error(r(185));an(i,c,h),(($t&2)===0||i!==jr)&&(i===jr&&(($t&2)===0&&(Kd|=c),xr===4&&ca(i,Vr)),Dn(i,h),c===1&&$t===0&&(o.mode&1)===0&&(wc=hr()+500,Id&&ra()))}function Dn(i,o){var c=i.callbackNode;zu(i,o);var h=Vo(i,i===jr?Vr:0);if(h===0)c!==null&&dr(c),i.callbackNode=null,i.callbackPriority=0;else if(o=h&-h,i.callbackPriority!==o){if(c!=null&&dr(c),o===1)i.tag===0?kD($w.bind(null,i)):m_($w.bind(null,i)),SD(function(){($t&6)===0&&ra()}),c=null;else{switch(Dt(h)){case 1:c=zo;break;case 4:c=Uu;break;case 16:c=qo;break;case 536870912:c=wl;break;default:c=qo}c=Lw(c,Cw.bind(null,i))}i.callbackPriority=o,i.callbackNode=c}}function Cw(i,o){if(Yd=-1,Gd=0,($t&6)!==0)throw Error(r(327));var c=i.callbackNode;if(bc()&&i.callbackNode!==c)return null;var h=Vo(i,i===jr?Vr:0);if(h===0)return null;if((h&30)!==0||(h&i.expiredLanes)!==0||o)o=Jd(i,h);else{o=h;var v=$t;$t|=2;var w=Nw();(jr!==i||Vr!==o)&&(ho=null,wc=hr()+500,hu(i,o));do try{HD();break}catch(V){Aw(i,V)}while(!0);ry(),Vd.current=w,$t=v,Rr!==null?o=0:(jr=null,Vr=0,o=xr)}if(o!==0){if(o===2&&(v=qu(i),v!==0&&(h=v,o=Ly(i,v))),o===1)throw c=Hl,hu(i,0),ca(i,h),Dn(i,hr()),c;if(o===6)ca(i,h);else{if(v=i.current.alternate,(h&30)===0&&!KD(v)&&(o=Jd(i,h),o===2&&(w=qu(i),w!==0&&(h=w,o=Ly(i,w))),o===1))throw c=Hl,hu(i,0),ca(i,h),Dn(i,hr()),c;switch(i.finishedWork=v,i.finishedLanes=h,o){case 0:case 1:throw Error(r(345));case 2:pu(i,Pn,ho);break;case 3:if(ca(i,h),(h&130023424)===h&&(o=My+500-hr(),10<o)){if(Vo(i,0)!==0)break;if(v=i.suspendedLanes,(v&h)!==h){cn(),i.pingedLanes|=i.suspendedLanes&v;break}i.timeoutHandle=Km(pu.bind(null,i,Pn,ho),o);break}pu(i,Pn,ho);break;case 4:if(ca(i,h),(h&4194240)===h)break;for(o=i.eventTimes,v=-1;0<h;){var N=31-bn(h);w=1<<N,N=o[N],N>v&&(v=N),h&=~w}if(h=v,h=hr()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*VD(h/1960))-h,10<h){i.timeoutHandle=Km(pu.bind(null,i,Pn,ho),h);break}pu(i,Pn,ho);break;case 5:pu(i,Pn,ho);break;default:throw Error(r(329))}}}return Dn(i,hr()),i.callbackNode===c?Cw.bind(null,i):null}function Ly(i,o){var c=Ql;return i.current.memoizedState.isDehydrated&&(hu(i,o).flags|=256),i=Jd(i,o),i!==2&&(o=Pn,Pn=c,o!==null&&jy(o)),i}function jy(i){Pn===null?Pn=i:Pn.push.apply(Pn,i)}function KD(i){for(var o=i;;){if(o.flags&16384){var c=o.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var h=0;h<c.length;h++){var v=c[h],w=v.getSnapshot;v=v.value;try{if(!H(w(),v))return!1}catch{return!1}}}if(c=o.child,o.subtreeFlags&16384&&c!==null)c.return=o,o=c;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function ca(i,o){for(o&=~xy,o&=~Kd,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var c=31-bn(o),h=1<<c;i[c]=-1,o&=~h}}function $w(i){if(($t&6)!==0)throw Error(r(327));bc();var o=Vo(i,0);if((o&1)===0)return Dn(i,hr()),null;var c=Jd(i,o);if(i.tag!==0&&c===2){var h=qu(i);h!==0&&(o=h,c=Ly(i,h))}if(c===1)throw c=Hl,hu(i,0),ca(i,o),Dn(i,hr()),c;if(c===6)throw Error(r(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,pu(i,Pn,ho),Dn(i,hr()),null}function Uy(i,o){var c=$t;$t|=1;try{return i(o)}finally{$t=c,$t===0&&(wc=hr()+500,Id&&ra())}}function du(i){aa!==null&&aa.tag===0&&($t&6)===0&&bc();var o=$t;$t|=1;var c=_i.transition,h=Tt;try{if(_i.transition=null,Tt=1,i)return i()}finally{Tt=h,_i.transition=c,$t=o,($t&6)===0&&ra()}}function zy(){Xn=_c.current,ar(_c)}function hu(i,o){i.finishedWork=null,i.finishedLanes=0;var c=i.timeoutHandle;if(c!==-1&&(i.timeoutHandle=-1,bD(c)),Rr!==null)for(c=Rr.return;c!==null;){var h=c;switch(Jm(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&Sd();break;case 3:yc(),ar(In),ar(Zr),dy();break;case 5:ly(h);break;case 4:yc();break;case 13:ar(vr);break;case 19:ar(vr);break;case 10:ny(h.type._context);break;case 22:case 23:zy()}c=c.return}if(jr=i,Rr=i=la(i.current,null),Vr=Xn=o,xr=0,Hl=null,xy=Kd=fu=0,Pn=Ql=null,uu!==null){for(o=0;o<uu.length;o++)if(c=uu[o],h=c.interleaved,h!==null){c.interleaved=null;var v=h.next,w=c.pending;if(w!==null){var N=w.next;w.next=v,h.next=N}c.pending=h}uu=null}return i}function Aw(i,o){do{var c=Rr;try{if(ry(),xd.current=Ld,Md){for(var h=gr.memoizedState;h!==null;){var v=h.queue;v!==null&&(v.pending=null),h=h.next}Md=!1}if(lu=0,Lr=Tr=gr=null,Ul=!1,zl=0,Ty.current=null,c===null||c.return===null){xr=1,Hl=o,Rr=null;break}e:{var w=i,N=c.return,V=c,G=o;if(o=Vr,V.flags|=32768,G!==null&&typeof G=="object"&&typeof G.then=="function"){var ye=G,Re=V,$e=Re.tag;if((Re.mode&1)===0&&($e===0||$e===11||$e===15)){var De=Re.alternate;De?(Re.updateQueue=De.updateQueue,Re.memoizedState=De.memoizedState,Re.lanes=De.lanes):(Re.updateQueue=null,Re.memoizedState=null)}var qe=nw(N);if(qe!==null){qe.flags&=-257,iw(qe,N,V,w,o),qe.mode&1&&rw(w,ye,o),o=qe,G=ye;var Qe=o.updateQueue;if(Qe===null){var Ye=new Set;Ye.add(G),o.updateQueue=Ye}else Qe.add(G);break e}else{if((o&1)===0){rw(w,ye,o),qy();break e}G=Error(r(426))}}else if(mr&&V.mode&1){var kr=nw(N);if(kr!==null){(kr.flags&65536)===0&&(kr.flags|=256),iw(kr,N,V,w,o),ey(vc(G,V));break e}}w=G=vc(G,V),xr!==4&&(xr=2),Ql===null?Ql=[w]:Ql.push(w),w=N;do{switch(w.tag){case 3:w.flags|=65536,o&=-o,w.lanes|=o;var de=ew(w,G,o);E_(w,de);break e;case 1:V=G;var re=w.type,pe=w.stateNode;if((w.flags&128)===0&&(typeof re.getDerivedStateFromError=="function"||pe!==null&&typeof pe.componentDidCatch=="function"&&(oa===null||!oa.has(pe)))){w.flags|=65536,o&=-o,w.lanes|=o;var Me=tw(w,V,o);E_(w,Me);break e}}w=w.return}while(w!==null)}xw(c)}catch(Je){o=Je,Rr===c&&c!==null&&(Rr=c=c.return);continue}break}while(!0)}function Nw(){var i=Vd.current;return Vd.current=Ld,i===null?Ld:i}function qy(){(xr===0||xr===3||xr===2)&&(xr=4),jr===null||(fu&268435455)===0&&(Kd&268435455)===0||ca(jr,Vr)}function Jd(i,o){var c=$t;$t|=2;var h=Nw();(jr!==i||Vr!==o)&&(ho=null,hu(i,o));do try{WD();break}catch(v){Aw(i,v)}while(!0);if(ry(),$t=c,Vd.current=h,Rr!==null)throw Error(r(261));return jr=null,Vr=0,xr}function WD(){for(;Rr!==null;)Tw(Rr)}function HD(){for(;Rr!==null&&!Qs();)Tw(Rr)}function Tw(i){var o=Bw(i.alternate,i,Xn);i.memoizedProps=i.pendingProps,o===null?xw(i):Rr=o,Ty.current=null}function xw(i){var o=i;do{var c=o.alternate;if(i=o.return,(o.flags&32768)===0){if(c=LD(c,o,Xn),c!==null){Rr=c;return}}else{if(c=jD(c,o),c!==null){c.flags&=32767,Rr=c;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{xr=6,Rr=null;return}}if(o=o.sibling,o!==null){Rr=o;return}Rr=o=i}while(o!==null);xr===0&&(xr=5)}function pu(i,o,c){var h=Tt,v=_i.transition;try{_i.transition=null,Tt=1,QD(i,o,c,h)}finally{_i.transition=v,Tt=h}return null}function QD(i,o,c,h){do bc();while(aa!==null);if(($t&6)!==0)throw Error(r(327));c=i.finishedWork;var v=i.finishedLanes;if(c===null)return null;if(i.finishedWork=null,i.finishedLanes=0,c===i.current)throw Error(r(177));i.callbackNode=null,i.callbackPriority=0;var w=c.lanes|c.childLanes;if(qa(i,w),i===jr&&(Rr=jr=null,Vr=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||Hd||(Hd=!0,Lw(qo,function(){return bc(),null})),w=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||w){w=_i.transition,_i.transition=null;var N=Tt;Tt=1;var V=$t;$t|=4,Ty.current=null,zD(i,c),Ow(c,i),ve(qm),ps=!!zm,qm=zm=null,i.current=c,qD(c),Mi(),$t=V,Tt=N,_i.transition=w}else i.current=c;if(Hd&&(Hd=!1,aa=i,Qd=v),w=i.pendingLanes,w===0&&(oa=null),It(c.stateNode),Dn(i,hr()),o!==null)for(h=i.onRecoverableError,c=0;c<o.length;c++)v=o[c],h(v.value,{componentStack:v.stack,digest:v.digest});if(Wd)throw Wd=!1,i=Fy,Fy=null,i;return(Qd&1)!==0&&i.tag!==0&&bc(),w=i.pendingLanes,(w&1)!==0?i===By?Yl++:(Yl=0,By=i):Yl=0,ra(),null}function bc(){if(aa!==null){var i=Dt(Qd),o=_i.transition,c=Tt;try{if(_i.transition=null,Tt=16>i?16:i,aa===null)var h=!1;else{if(i=aa,aa=null,Qd=0,($t&6)!==0)throw Error(r(331));var v=$t;for($t|=4,He=i.current;He!==null;){var w=He,N=w.child;if((He.flags&16)!==0){var V=w.deletions;if(V!==null){for(var G=0;G<V.length;G++){var ye=V[G];for(He=ye;He!==null;){var Re=He;switch(Re.tag){case 0:case 11:case 15:Wl(8,Re,w)}var $e=Re.child;if($e!==null)$e.return=Re,He=$e;else for(;He!==null;){Re=He;var De=Re.sibling,qe=Re.return;if(ww(Re),Re===ye){He=null;break}if(De!==null){De.return=qe,He=De;break}He=qe}}}var Qe=w.alternate;if(Qe!==null){var Ye=Qe.child;if(Ye!==null){Qe.child=null;do{var kr=Ye.sibling;Ye.sibling=null,Ye=kr}while(Ye!==null)}}He=w}}if((w.subtreeFlags&2064)!==0&&N!==null)N.return=w,He=N;else e:for(;He!==null;){if(w=He,(w.flags&2048)!==0)switch(w.tag){case 0:case 11:case 15:Wl(9,w,w.return)}var de=w.sibling;if(de!==null){de.return=w.return,He=de;break e}He=w.return}}var re=i.current;for(He=re;He!==null;){N=He;var pe=N.child;if((N.subtreeFlags&2064)!==0&&pe!==null)pe.return=N,He=pe;else e:for(N=re;He!==null;){if(V=He,(V.flags&2048)!==0)try{switch(V.tag){case 0:case 11:case 15:qd(9,V)}}catch(Je){Er(V,V.return,Je)}if(V===N){He=null;break e}var Me=V.sibling;if(Me!==null){Me.return=V.return,He=Me;break e}He=V.return}}if($t=v,ra(),Wn&&typeof Wn.onPostCommitFiberRoot=="function")try{Wn.onPostCommitFiberRoot(Gs,i)}catch{}h=!0}return h}finally{Tt=c,_i.transition=o}}return!1}function Mw(i,o,c){o=vc(c,o),o=ew(i,o,1),i=ia(i,o,1),o=cn(),i!==null&&(an(i,1,o),Dn(i,o))}function Er(i,o,c){if(i.tag===3)Mw(i,i,c);else for(;o!==null;){if(o.tag===3){Mw(o,i,c);break}else if(o.tag===1){var h=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(oa===null||!oa.has(h))){i=vc(c,i),i=tw(o,i,1),o=ia(o,i,1),i=cn(),o!==null&&(an(o,1,i),Dn(o,i));break}}o=o.return}}function YD(i,o,c){var h=i.pingCache;h!==null&&h.delete(o),o=cn(),i.pingedLanes|=i.suspendedLanes&c,jr===i&&(Vr&c)===c&&(xr===4||xr===3&&(Vr&130023424)===Vr&&500>hr()-My?hu(i,0):xy|=c),Dn(i,o)}function Fw(i,o){o===0&&((i.mode&1)===0?o=1:(o=hs,hs<<=1,(hs&130023424)===0&&(hs=4194304)));var c=cn();i=co(i,o),i!==null&&(an(i,o,c),Dn(i,c))}function GD(i){var o=i.memoizedState,c=0;o!==null&&(c=o.retryLane),Fw(i,c)}function JD(i,o){var c=0;switch(i.tag){case 13:var h=i.stateNode,v=i.memoizedState;v!==null&&(c=v.retryLane);break;case 19:h=i.stateNode;break;default:throw Error(r(314))}h!==null&&h.delete(o),Fw(i,c)}var Bw;Bw=function(i,o,c){if(i!==null)if(i.memoizedProps!==o.pendingProps||In.current)kn=!0;else{if((i.lanes&c)===0&&(o.flags&128)===0)return kn=!1,BD(i,o,c);kn=(i.flags&131072)!==0}else kn=!1,mr&&(o.flags&1048576)!==0&&y_(o,kd,o.index);switch(o.lanes=0,o.tag){case 2:var h=o.type;Ud(i,o),i=o.pendingProps;var v=cc(o,Zr.current);pc(o,c),v=my(null,o,h,i,v,c);var w=yy();return o.flags|=1,typeof v=="object"&&v!==null&&typeof v.render=="function"&&v.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,On(h)?(w=!0,Ed(o)):w=!1,o.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,oy(o),v.updater=Ad,o.stateNode=v,v._reactInternals=o,uy(o,h,i,c),o=Iy(null,o,h,!0,w,c)):(o.tag=0,mr&&w&&Gm(o),un(null,o,v,c),o=o.child),o;case 16:h=o.elementType;e:{switch(Ud(i,o),i=o.pendingProps,v=h._init,h=v(h._payload),o.type=h,v=o.tag=ZD(h),i=qi(h,i),v){case 0:o=Ey(null,o,h,i,c);break e;case 1:o=lw(null,o,h,i,c);break e;case 11:o=sw(null,o,h,i,c);break e;case 14:o=ow(null,o,h,qi(h.type,i),c);break e}throw Error(r(306,h,""))}return o;case 0:return h=o.type,v=o.pendingProps,v=o.elementType===h?v:qi(h,v),Ey(i,o,h,v,c);case 1:return h=o.type,v=o.pendingProps,v=o.elementType===h?v:qi(h,v),lw(i,o,h,v,c);case 3:e:{if(fw(o),i===null)throw Error(r(387));h=o.pendingProps,w=o.memoizedState,v=w.element,S_(i,o),$d(o,h,null,c);var N=o.memoizedState;if(h=N.element,w.isDehydrated)if(w={element:h,isDehydrated:!1,cache:N.cache,pendingSuspenseBoundaries:N.pendingSuspenseBoundaries,transitions:N.transitions},o.updateQueue.baseState=w,o.memoizedState=w,o.flags&256){v=vc(Error(r(423)),o),o=dw(i,o,h,c,v);break e}else if(h!==v){v=vc(Error(r(424)),o),o=dw(i,o,h,c,v);break e}else for(Jn=Zo(o.stateNode.containerInfo.firstChild),Gn=o,mr=!0,zi=null,c=$_(o,null,h,c),o.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(dc(),h===v){o=fo(i,o,c);break e}un(i,o,h,c)}o=o.child}return o;case 5:return A_(o),i===null&&Zm(o),h=o.type,v=o.pendingProps,w=i!==null?i.memoizedProps:null,N=v.children,Vm(h,v)?N=null:w!==null&&Vm(h,w)&&(o.flags|=32),cw(i,o),un(i,o,N,c),o.child;case 6:return i===null&&Zm(o),null;case 13:return hw(i,o,c);case 4:return cy(o,o.stateNode.containerInfo),h=o.pendingProps,i===null?o.child=mc(o,null,h,c):un(i,o,h,c),o.child;case 11:return h=o.type,v=o.pendingProps,v=o.elementType===h?v:qi(h,v),sw(i,o,h,v,c);case 7:return un(i,o,o.pendingProps,c),o.child;case 8:return un(i,o,o.pendingProps.children,c),o.child;case 12:return un(i,o,o.pendingProps.children,c),o.child;case 10:e:{if(h=o.type._context,v=o.pendingProps,w=o.memoizedProps,N=v.value,ir(Dd,h._currentValue),h._currentValue=N,w!==null)if(H(w.value,N)){if(w.children===v.children&&!In.current){o=fo(i,o,c);break e}}else for(w=o.child,w!==null&&(w.return=o);w!==null;){var V=w.dependencies;if(V!==null){N=w.child;for(var G=V.firstContext;G!==null;){if(G.context===h){if(w.tag===1){G=lo(-1,c&-c),G.tag=2;var ye=w.updateQueue;if(ye!==null){ye=ye.shared;var Re=ye.pending;Re===null?G.next=G:(G.next=Re.next,Re.next=G),ye.pending=G}}w.lanes|=c,G=w.alternate,G!==null&&(G.lanes|=c),iy(w.return,c,o),V.lanes|=c;break}G=G.next}}else if(w.tag===10)N=w.type===o.type?null:w.child;else if(w.tag===18){if(N=w.return,N===null)throw Error(r(341));N.lanes|=c,V=N.alternate,V!==null&&(V.lanes|=c),iy(N,c,o),N=w.sibling}else N=w.child;if(N!==null)N.return=w;else for(N=w;N!==null;){if(N===o){N=null;break}if(w=N.sibling,w!==null){w.return=N.return,N=w;break}N=N.return}w=N}un(i,o,v.children,c),o=o.child}return o;case 9:return v=o.type,h=o.pendingProps.children,pc(o,c),v=vi(v),h=h(v),o.flags|=1,un(i,o,h,c),o.child;case 14:return h=o.type,v=qi(h,o.pendingProps),v=qi(h.type,v),ow(i,o,h,v,c);case 15:return aw(i,o,o.type,o.pendingProps,c);case 17:return h=o.type,v=o.pendingProps,v=o.elementType===h?v:qi(h,v),Ud(i,o),o.tag=1,On(h)?(i=!0,Ed(o)):i=!1,pc(o,c),P_(o,h,v),uy(o,h,v,c),Iy(null,o,h,!0,i,c);case 19:return mw(i,o,c);case 22:return uw(i,o,c)}throw Error(r(156,o.tag))};function Lw(i,o){return ju(i,o)}function XD(i,o,c,h){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wi(i,o,c,h){return new XD(i,o,c,h)}function Vy(i){return i=i.prototype,!(!i||!i.isReactComponent)}function ZD(i){if(typeof i=="function")return Vy(i)?1:0;if(i!=null){if(i=i.$$typeof,i===me)return 11;if(i===We)return 14}return 2}function la(i,o){var c=i.alternate;return c===null?(c=wi(i.tag,o,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=o,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&14680064,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,o=i.dependencies,c.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c}function Xd(i,o,c,h,v,w){var N=2;if(h=i,typeof i=="function")Vy(i)&&(N=1);else if(typeof i=="string")N=5;else e:switch(i){case U:return mu(c.children,v,w,o);case ie:N=8,v|=8;break;case Y:return i=wi(12,c,o,v|2),i.elementType=Y,i.lanes=w,i;case ke:return i=wi(13,c,o,v),i.elementType=ke,i.lanes=w,i;case Pe:return i=wi(19,c,o,v),i.elementType=Pe,i.lanes=w,i;case et:return Zd(c,v,w,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case _e:N=10;break e;case le:N=9;break e;case me:N=11;break e;case We:N=14;break e;case nt:N=16,h=null;break e}throw Error(r(130,i==null?i:typeof i,""))}return o=wi(N,c,o,v),o.elementType=i,o.type=h,o.lanes=w,o}function mu(i,o,c,h){return i=wi(7,i,h,o),i.lanes=c,i}function Zd(i,o,c,h){return i=wi(22,i,h,o),i.elementType=et,i.lanes=c,i.stateNode={isHidden:!1},i}function Ky(i,o,c){return i=wi(6,i,null,o),i.lanes=c,i}function Wy(i,o,c){return o=wi(4,i.children!==null?i.children:[],i.key,o),o.lanes=c,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function eR(i,o,c,h,v){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vu(0),this.expirationTimes=Vu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vu(0),this.identifierPrefix=h,this.onRecoverableError=v,this.mutableSourceEagerHydrationData=null}function Hy(i,o,c,h,v,w,N,V,G){return i=new eR(i,o,c,V,G),o===1?(o=1,w===!0&&(o|=8)):o=0,w=wi(3,null,null,o),i.current=w,w.stateNode=i,w.memoizedState={element:h,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},oy(w),i}function tR(i,o,c){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:x,key:h==null?null:""+h,children:i,containerInfo:o,implementation:c}}function jw(i){if(!i)return ta;i=i._reactInternals;e:{if(fi(i)!==i||i.tag!==1)throw Error(r(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(On(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(r(171))}if(i.tag===1){var c=i.type;if(On(c))return h_(i,c,o)}return o}function Uw(i,o,c,h,v,w,N,V,G){return i=Hy(c,h,!0,i,v,w,N,V,G),i.context=jw(null),c=i.current,h=cn(),v=ua(c),w=lo(h,v),w.callback=o??null,ia(c,w,v),i.current.lanes=v,an(i,v,h),Dn(i,h),i}function eh(i,o,c,h){var v=o.current,w=cn(),N=ua(v);return c=jw(c),o.context===null?o.context=c:o.pendingContext=c,o=lo(w,N),o.payload={element:i},h=h===void 0?null:h,h!==null&&(o.callback=h),i=ia(v,o,N),i!==null&&(Wi(i,v,N,w),Cd(i,v,N)),N}function th(i){return i=i.current,i.child?(i.child.tag===5,i.child.stateNode):null}function zw(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<o?c:o}}function Qy(i,o){zw(i,o),(i=i.alternate)&&zw(i,o)}function rR(){return null}var qw=typeof reportError=="function"?reportError:function(i){console.error(i)};function Yy(i){this._internalRoot=i}rh.prototype.render=Yy.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(r(409));eh(i,o,null,null)},rh.prototype.unmount=Yy.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;du(function(){eh(null,i,null,null)}),o[so]=null}};function rh(i){this._internalRoot=i}rh.prototype.unstable_scheduleHydration=function(i){if(i){var o=Gr();i={blockedOn:null,target:i,priority:o};for(var c=0;c<Sn.length&&o!==0&&o<Sn[c].priority;c++);Sn.splice(c,0,i),c===0&&Hu(i)}};function Gy(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function nh(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function Vw(){}function nR(i,o,c,h,v){if(v){if(typeof h=="function"){var w=h;h=function(){var ye=th(N);w.call(ye)}}var N=Uw(o,h,i,0,null,!1,!1,"",Vw);return i._reactRootContainer=N,i[so]=N.current,Nl(i.nodeType===8?i.parentNode:i),du(),N}for(;v=i.lastChild;)i.removeChild(v);if(typeof h=="function"){var V=h;h=function(){var ye=th(G);V.call(ye)}}var G=Hy(i,0,!1,null,null,!1,!1,"",Vw);return i._reactRootContainer=G,i[so]=G.current,Nl(i.nodeType===8?i.parentNode:i),du(function(){eh(o,G,c,h)}),G}function ih(i,o,c,h,v){var w=c._reactRootContainer;if(w){var N=w;if(typeof v=="function"){var V=v;v=function(){var G=th(N);V.call(G)}}eh(o,N,i,v)}else N=nR(c,o,i,v,h);return th(N)}Wu=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var c=di(o.pendingLanes);c!==0&&(Ku(o,c|1),Dn(o,hr()),($t&6)===0&&(wc=hr()+500,ra()))}break;case 13:du(function(){var h=co(i,1);if(h!==null){var v=cn();Wi(h,i,1,v)}}),Qy(i,1)}},Sl=function(i){if(i.tag===13){var o=co(i,134217728);if(o!==null){var c=cn();Wi(o,i,134217728,c)}Qy(i,134217728)}},nd=function(i){if(i.tag===13){var o=ua(i),c=co(i,o);if(c!==null){var h=cn();Wi(c,i,o,h)}Qy(i,o)}},Gr=function(){return Tt},Js=function(i,o){var c=Tt;try{return Tt=i,o()}finally{Tt=c}},Ua=function(i,o,c){switch(o){case"input":if(yr(i,c),o=c.name,c.type==="radio"&&o!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<c.length;o++){var h=c[o];if(h!==i&&h.form===i.form){var v=bd(h);if(!v)throw Error(r(90));J(h),yr(h,v)}}}break;case"textarea":Us(i,c);break;case"select":o=c.value,o!=null&&Pt(i,!!c.multiple,o,!1)}},Xf=Uy,Ks=du;var iR={usingClientEntryPoint:!1,Events:[Ml,ac,bd,Bu,Jf,Uy]},Gl={findFiberByHostInstance:iu,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},sR={bundleType:Gl.bundleType,version:Gl.version,rendererPackageName:Gl.rendererPackageName,rendererConfig:Gl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:B.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=fs(i),i===null?null:i.stateNode},findFiberByHostInstance:Gl.findFiberByHostInstance||rR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sh.isDisabled&&sh.supportsFiber)try{Gs=sh.inject(sR),Wn=sh}catch{}}return Rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iR,Rn.createPortal=function(i,o){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Gy(o))throw Error(r(200));return tR(i,o,null,c)},Rn.createRoot=function(i,o){if(!Gy(i))throw Error(r(299));var c=!1,h="",v=qw;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onRecoverableError!==void 0&&(v=o.onRecoverableError)),o=Hy(i,1,!1,null,null,c,!1,h,v),i[so]=o.current,Nl(i.nodeType===8?i.parentNode:i),new Yy(o)},Rn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=fs(o),i=i===null?null:i.stateNode,i},Rn.flushSync=function(i){return du(i)},Rn.hydrate=function(i,o,c){if(!nh(o))throw Error(r(200));return ih(null,i,o,!0,c)},Rn.hydrateRoot=function(i,o,c){if(!Gy(i))throw Error(r(405));var h=c!=null&&c.hydratedSources||null,v=!1,w="",N=qw;if(c!=null&&(c.unstable_strictMode===!0&&(v=!0),c.identifierPrefix!==void 0&&(w=c.identifierPrefix),c.onRecoverableError!==void 0&&(N=c.onRecoverableError)),o=Uw(o,null,i,1,c??null,v,!1,w,N),i[so]=o.current,Nl(i),h)for(i=0;i<h.length;i++)c=h[i],v=c._getVersion,v=v(c._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[c,v]:o.mutableSourceEagerHydrationData.push(c,v);return new rh(o)},Rn.render=function(i,o,c){if(!nh(o))throw Error(r(200));return ih(null,i,o,!1,c)},Rn.unmountComponentAtNode=function(i){if(!nh(i))throw Error(r(40));return i._reactRootContainer?(du(function(){ih(null,null,i,!1,function(){i._reactRootContainer=null,i[so]=null})}),!0):!1},Rn.unstable_batchedUpdates=Uy,Rn.unstable_renderSubtreeIntoContainer=function(i,o,c,h){if(!nh(c))throw Error(r(200));if(i==null||i._reactInternals===void 0)throw Error(r(38));return ih(i,o,c,!1,h)},Rn.version="18.2.0-next-9e3b772b8-20220608",Rn}var Xw;function mR(){if(Xw)return Zy.exports;Xw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Zy.exports=pR(),Zy.exports}var Zw;function yR(){if(Zw)return oh;Zw=1;var t=mR();return oh.createRoot=t.createRoot,oh.hydrateRoot=t.hydrateRoot,oh}var vR=yR(),Gv=function(t,e){return Gv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},Gv(t,e)};function js(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Gv(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function Zt(t,e,r,n){var s=arguments.length,a=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,r,n);else for(var l=t.length-1;l>=0;l--)(u=t[l])&&(a=(s<3?u(a):s>3?u(e,r,a):u(e,r))||a);return s>3&&a&&Object.defineProperty(e,r,a),a}function Be(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function st(t,e,r,n){function s(a){return a instanceof r?a:new r(function(u){u(a)})}return new(r||(r=Promise))(function(a,u){function l(y){try{m(n.next(y))}catch(g){u(g)}}function d(y){try{m(n.throw(y))}catch(g){u(g)}}function m(y){y.done?a(y.value):s(y.value).then(l,d)}m((n=n.apply(t,e||[])).next())})}function SE(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,s,a,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=l(0),u.throw=l(1),u.return=l(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function l(m){return function(y){return d([m,y])}}function d(m){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,m[0]&&(r=0)),r;)try{if(n=1,s&&(a=m[0]&2?s.return:m[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,m[1])).done)return a;switch(s=0,a&&(m=[m[0]&2,a.value]),m[0]){case 0:case 1:a=m;break;case 4:return r.label++,{value:m[1],done:!1};case 5:r.label++,s=m[1],m=[0];continue;case 7:m=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(m[0]===6||m[0]===2)){r=0;continue}if(m[0]===3&&(!a||m[1]>a[0]&&m[1]<a[3])){r.label=m[1];break}if(m[0]===6&&r.label<a[1]){r.label=a[1],a=m;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(m);break}a[2]&&r.ops.pop(),r.trys.pop();continue}m=e.call(t,r)}catch(y){m=[6,y],s=0}finally{n=a=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}}function zc(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Zi(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),s,a=[],u;try{for(;(e===void 0||e-- >0)&&!(s=n.next()).done;)a.push(s.value)}catch(l){u={error:l}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(u)throw u.error}}return a}function Ts(t,e,r){if(r||arguments.length===2)for(var n=0,s=e.length,a;n<s;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))}function ut(t){return this instanceof ut?(this.v=t,this):new ut(t)}function Yi(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),s,a=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",u),s[Symbol.asyncIterator]=function(){return this},s;function u(S){return function(E){return Promise.resolve(E).then(S,g)}}function l(S,E){n[S]&&(s[S]=function(D){return new Promise(function(O,$){a.push([S,D,O,$])>1||d(S,D)})},E&&(s[S]=E(s[S])))}function d(S,E){try{m(n[S](E))}catch(D){b(a[0][3],D)}}function m(S){S.value instanceof ut?Promise.resolve(S.value.v).then(y,g):b(a[0][2],S)}function y(S){d("next",S)}function g(S){d("throw",S)}function b(S,E){S(E),a.shift(),a.length&&d(a[0][0],a[0][1])}}function ip(t){var e,r;return e={},n("next"),n("throw",function(s){throw s}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(s,a){e[s]=t[s]?function(u){return(r=!r)?{value:ut(t[s](u)),done:!1}:a?a(u):u}:a}}function ga(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof zc=="function"?zc(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(a){r[a]=t[a]&&function(u){return new Promise(function(l,d){u=t[a](u),s(l,d,u.done,u.value)})}}function s(a,u,l,d){Promise.resolve(d).then(function(m){a({value:m,done:l})},u)}}function yf(t){"@babel/helpers - typeof";return yf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yf(t)}function gR(t,e){if(yf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(yf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function _R(t){var e=gR(t,"string");return yf(e)=="symbol"?e:e+""}function wR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_R(n.key),n)}}function Aa(t,e,r){return e&&wR(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function bR(t){return t[t.length-1]}function qc(t){return Array.isArray(t)?t.slice(0):[t]}function SR(t,e){t=t.slice(0);for(var r=[];t.length;){var n=t.splice(0,e);r.push(n)}return r}function gp(t){return Array.isArray(t)}function ER(t){return t!=null}function rv(t,e){var r=0,n=-1;for(var s of t){n=n+1;var a=e(s,n);if(a)r=r+1;else break}return r}function Au(t,e){var r=e.length;if(r!==0){var n=t.length;t.length=n+e.length;for(var s=0;s<r;++s)t[n+s]=e[s]}}function IR(t){return t.filter(function(e,r,n){return n.indexOf(e)===r})}function ba(t){for(var e="",r=0;r<t.length;r++){var n=t[r];if(n==="-")return parseInt(e,10);e+=n}throw new Error("malformatted revision: "+t)}function No(t,e){var r=e?ba(e._rev)+1:1;return r+"-"+t}function EE(t){var e=t.split("."),r=e.length;return r===1?n=>n[t]:n=>{for(var s=n,a=0;a<r;++a){var u=e[a];if(s=s[u],typeof s>"u")return s}return s}}function Kt(t){return Object.assign({},t)}function OR(t){return Object.keys(t)[0]}function _p(t,e=!1){if(!t)return t;if(!e&&Array.isArray(t))return t.sort((n,s)=>typeof n=="string"&&typeof s=="string"?n.localeCompare(s):typeof n=="object"?1:-1).map(n=>_p(n,e));if(typeof t=="object"&&!Array.isArray(t)){var r={};return Object.keys(t).sort((n,s)=>n.localeCompare(s)).forEach(n=>{r[n]=_p(t[n],e)}),r}return t}function Jv(t){if(!t||t===null||typeof t!="object")return t;if(Array.isArray(t)){for(var e=new Array(t.length),r=e.length;r--;)e[r]=Jv(t[r]);return e}var n={};for(var s in t)n[s]=Jv(t[s]);return n}var yn=Jv;function Po(t,e,r){return Object.defineProperty(t,e,{get:function(){return r}}),r}var qg=1;function ol(){return{lwt:qg}}function Di(){return""}function kR(t){return Object.assign({},t,{_meta:void 0,_deleted:void 0,_rev:void 0})}function PR(t,e,r){if(e.length!==r.length)return!1;for(var n=0,s=e.length;n<s;){var a=e[n],u=r[n];if(n++,a[t]!==u[t]||a._rev!==u._rev||a._meta.lwt!==u._meta.lwt)return!1}return!0}function vf(t,e){return vf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},vf(t,e)}function Vg(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,vf(t,e)}function Xv(t){return Xv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Xv(t)}function DR(t){try{return Function.toString.call(t).indexOf("[native code]")!==-1}catch{return typeof t=="function"}}function IE(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(IE=function(){return!!t})()}function RR(t,e,r){if(IE())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,e);var s=new(t.bind.apply(t,n));return r&&vf(s,r.prototype),s}function wp(t){var e=typeof Map=="function"?new Map:void 0;return wp=function(n){if(n===null||!DR(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(n))return e.get(n);e.set(n,s)}function s(){return RR(n,arguments,Xv(this).constructor)}return s.prototype=Object.create(n.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),vf(s,n)},wp(t)}var Jt={isDevMode(){return!1},deepFreezeWhenDevMode(t){return t},tunnelErrorMessage(t){return`
        RxDB Error-Code: `+t+`.
        Hint: Error messages are not included in RxDB core to reduce build size.
        To show the full error messages and to ensure that you do not make any mistakes when using RxDB,
        use the dev-mode plugin when you are in development mode: https://rxdb.info/dev-mode.html?console=error
        `}};function CR(t){var e="";return Object.keys(t).length===0||(e+="-".repeat(20)+`
`,e+=`Parameters:
`,e+=Object.keys(t).map(r=>{var n="[object Object]";try{r==="errors"?n=t[r].map(s=>JSON.stringify(s,Object.getOwnPropertyNames(s))):n=JSON.stringify(t[r],function(s,a){return a===void 0?null:a},2)}catch{}return r+": "+n}).join(`
`),e+=`
`),e}function OE(t,e,r){return`
`+t+`
`+CR(r)}var $R=(function(t){function e(n,s,a={}){var u,l=OE(s,n,a);return u=t.call(this,l)||this,u.code=n,u.message=l,u.url=Kg(n),u.parameters=a,u.rxdb=!0,u}Vg(e,t);var r=e.prototype;return r.toString=function(){return this.message},Aa(e,[{key:"name",get:function(){return"RxError ("+this.code+")"}},{key:"typeError",get:function(){return!1}}])})(wp(Error)),AR=(function(t){function e(n,s,a={}){var u,l=OE(s,n,a);return u=t.call(this,l)||this,u.code=n,u.message=l,u.url=Kg(n),u.parameters=a,u.rxdb=!0,u}Vg(e,t);var r=e.prototype;return r.toString=function(){return this.message},Aa(e,[{key:"name",get:function(){return"RxTypeError ("+this.code+")"}},{key:"typeError",get:function(){return!0}}])})(wp(TypeError));function Kg(t){return"https://rxdb.info/errors.html?console=errors#"+t}function kE(t){return`
Find out more about this error here: `+Kg(t)+` 
`}function Ve(t,e){return new $R(t,Jt.tunnelErrorMessage(t)+kE(t),e)}function bp(t,e){return new AR(t,Jt.tunnelErrorMessage(t)+kE(t),e)}function Vc(t){return t&&t.status===409?t:!1}var NR={409:"document write conflict",422:"schema validation error",510:"attachment data missing"};function PE(t){return Ve("COL20",{name:NR[t.status],document:t.documentId,writeError:t})}var ah;function TR(){if(ah)return ah;if(typeof crypto>"u"||typeof crypto.subtle>"u"||typeof crypto.subtle.digest!="function")throw Ve("UT8",{args:{typeof_crypto:typeof crypto,typeof_crypto_subtle:typeof crypto?.subtle,typeof_crypto_subtle_digest:typeof crypto?.subtle?.digest}});return ah=crypto.subtle.digest.bind(crypto.subtle),ah}async function xR(t){var e=new TextEncoder().encode(t),r=await TR()("SHA-256",e),n=Array.prototype.map.call(new Uint8Array(r),s=>("00"+s.toString(16)).slice(-2)).join("");return n}var DE=xR;function MR(){return new Promise(t=>setTimeout(t,0))}function FR(t=0){return new Promise(e=>setTimeout(e,t))}function RE(t){return t&&typeof t.then=="function"?t:Promise.resolve(t)}var pm=Promise.resolve(!0),xs=Promise.resolve(!1),Wg=Promise.resolve(null),Tn=Promise.resolve();function Tf(t=1e4){return typeof requestIdleCallback=="function"?new Promise(e=>{requestIdleCallback(()=>e(),{timeout:t})}):FR(0)}var nv=Tn;function BR(t=void 0){return nv=nv.then(()=>Tf(t)),nv}function LR(t){typeof requestIdleCallback=="function"&&requestIdleCallback(()=>{t()})}function jR(t,e){return t.reduce((r,n)=>r.then(n),Promise.resolve(e))}var UR=/\./g,eb="abcdefghijklmnopqrstuvwxyz";function al(t=10){for(var e="",r=0;r<t;r++)e+=eb.charAt(Math.floor(Math.random()*eb.length));return e}function CE(t){t+="";var e=t.charAt(0).toUpperCase();return e+t.substr(1)}function nf(t){for(;t.charAt(0)===".";)t=t.substr(1);for(;t.slice(-1)===".";)t=t.slice(0,-1);return t}function Kc(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var r,n;if(Array.isArray(t)){if(r=t.length,r!==e.length)return!1;for(n=r;n--!==0;)if(!Kc(t[n],e[n]))return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();var s=Object.keys(t);if(r=s.length,r!==Object.keys(e).length)return!1;for(n=r;n--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[n]))return!1;for(n=r;n--!==0;){var a=s[n];if(!Kc(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}var Zv=t=>{var e=typeof t;return t!==null&&(e==="object"||e==="function")},iv=new Set(["__proto__","prototype","constructor"]),zR=new Set("0123456789");function $E(t){var e=[],r="",n="start",s=!1;for(var a of t)switch(a){case"\\":{if(n==="index")throw new Error("Invalid character in an index");if(n==="indexEnd")throw new Error("Invalid character after an index");s&&(r+=a),n="property",s=!s;break}case".":{if(n==="index")throw new Error("Invalid character in an index");if(n==="indexEnd"){n="property";break}if(s){s=!1,r+=a;break}if(iv.has(r))return[];e.push(r),r="",n="property";break}case"[":{if(n==="index")throw new Error("Invalid character in an index");if(n==="indexEnd"){n="index";break}if(s){s=!1,r+=a;break}if(n==="property"){if(iv.has(r))return[];e.push(r),r=""}n="index";break}case"]":{if(n==="index"){e.push(Number.parseInt(r,10)),r="",n="indexEnd";break}if(n==="indexEnd")throw new Error("Invalid character after an index")}default:{if(n==="index"&&!zR.has(a))throw new Error("Invalid character in an index");if(n==="indexEnd")throw new Error("Invalid character after an index");n==="start"&&(n="property"),s&&(s=!1,r+="\\"),r+=a}}switch(s&&(r+="\\"),n){case"property":{if(iv.has(r))return[];e.push(r);break}case"index":throw new Error("Index was not closed");case"start":{e.push("");break}}return e}function AE(t,e){if(typeof e!="number"&&Array.isArray(t)){var r=Number.parseInt(e,10);return Number.isInteger(r)&&t[r]===t[e]}return!1}function qR(t,e){if(AE(t,e))throw new Error("Cannot use string index")}function Sa(t,e,r){if(Array.isArray(e)&&(e=e.join(".")),!e.includes(".")&&!e.includes("["))return t[e];if(!Zv(t)||typeof e!="string")return r===void 0?t:r;var n=$E(e);if(n.length===0)return r;for(var s=0;s<n.length;s++){var a=n[s];if(AE(t,a)?t=s===n.length-1?void 0:null:t=t[a],t==null){if(s!==n.length-1)return r;break}}return t===void 0?r:t}function NE(t,e,r){if(Array.isArray(e)&&(e=e.join(".")),!Zv(t)||typeof e!="string")return t;for(var n=t,s=$E(e),a=0;a<s.length;a++){var u=s[a];qR(t,u),a===s.length-1?t[u]=r:Zv(t[u])||(t[u]=typeof s[a+1]=="number"?[]:{}),t=t[u]}return n}function Wc(t,e){var r=t.get(e);if(typeof r>"u")throw new Error("missing value from map "+e);return r}function nn(t,e,r,n){var s=t.get(e);return typeof s>"u"&&(s=r(),t.set(e,s)),s}function Yt(t){var e=t.split("-"),r="RxDB";return e.forEach(n=>{r+=CE(n)}),r+="Plugin",new Error(`You are using a function which must be overwritten by a plugin.
        You should either prevent the usage of this function or add the plugin via:
            import { `+r+" } from 'rxdb/plugins/"+t+`';
            addRxPlugin(`+r+`);
        `)}function eg(t){var e={name:t.name,message:t.message,rxdb:t.rxdb,parameters:t.parameters,extensions:t.extensions,code:t.code,url:t.url,stack:t.stack?t.stack.replace(/\n/g,` 
 `):void 0};return e}var sv=0;function vn(){var t=Date.now();t=t+.01,t<=sv&&(t=sv+.01);var e=parseFloat(t.toFixed(2));return sv=e,e}function Ze(t,e){if(!t)throw e||(e=""),new Error("ensureNotFalsy() is falsy: "+e);return t}var Oo={bufferSize:1,refCount:!0},Hg="16.21.1",ov={},VR="6da4936d1425ff3a5c44c02342c6daf791d266be3ae8479b8ec59e261df41b93",tb=16,av=xs,rb=!1;async function TE(){return rb||(rb=!0,av=(async()=>!!(ov.premium&&typeof ov.premium=="string"&&await DE(ov.premium)===VR))()),av}var gf={preAddRxPlugin:[],preCreateRxDatabase:[],createRxDatabase:[],preCreateRxCollection:[],createRxCollection:[],createRxState:[],postCloseRxCollection:[],postRemoveRxCollection:[],preCreateRxSchema:[],createRxSchema:[],prePrepareRxQuery:[],preCreateRxQuery:[],prePrepareQuery:[],createRxDocument:[],postCreateRxDocument:[],preCreateRxStorageInstance:[],preStorageWrite:[],preMigrateDocument:[],postMigrateDocument:[],preCloseRxDatabase:[],postRemoveRxDatabase:[],postCleanup:[],preReplicationMasterWrite:[],preReplicationMasterWriteDocumentsHandle:[]};function Mn(t,e){gf[t].length>0&&gf[t].forEach(r=>r(e))}async function Ea(t,e){for(var r of gf[t])await r(e)}function To(t,e){var r=e;r=r.replace(UR,".properties."),r="properties."+r,r=nf(r);var n=Sa(t,r);return n}function KR(t,e,r){if(typeof e.primaryKey=="string")return r;var n=Na(e,r),s=r[t];if(s&&s!==n)throw Ve("DOC19",{args:{documentData:r,existingPrimary:s,newPrimary:n},schema:e});return r[t]=n,r}function on(t){return typeof t=="string"?t:t.key}function WR(t){var e=on(t.primaryKey),r=To(t,e);return Ze(r.maxLength)}function Na(t,e){if(typeof t.primaryKey=="string")return e[t.primaryKey];var r=t.primaryKey;return r.fields.map(n=>{var s=Sa(e,n);if(typeof s>"u")throw Ve("DOC18",{args:{field:n,documentData:e}});return s}).join(r.separator)}function HR(t){var e=_p(t,!0);return e}function QR(t){return["_deleted",t]}function mm(t){t=Kt(t);var e=on(t.primaryKey);t.properties=Kt(t.properties),t.additionalProperties=!1,Object.prototype.hasOwnProperty.call(t,"keyCompression")||(t.keyCompression=!1),t.indexes=t.indexes?t.indexes.slice(0):[],t.required=t.required?t.required.slice(0):[],t.encrypted=t.encrypted?t.encrypted.slice(0):[],t.properties._rev={type:"string",minLength:1},t.properties._attachments={type:"object"},t.properties._deleted={type:"boolean"},t.properties._meta=GR,t.required=t.required?t.required.slice(0):[],t.required.push("_deleted"),t.required.push("_rev"),t.required.push("_meta"),t.required.push("_attachments");var r=xE(t);Au(t.required,r),t.required=t.required.filter(a=>!a.includes(".")).filter((a,u,l)=>l.indexOf(a)===u),t.version=t.version||0;var n=t.indexes.map(a=>{var u=gp(a)?a.slice(0):[a];return u.includes(e)||u.push(e),u[0]!=="_deleted"&&u.unshift("_deleted"),u});n.length===0&&n.push(QR(e)),n.push(["_meta.lwt",e]),t.internalIndexes&&t.internalIndexes.map(a=>{n.push(a)});var s=new Set;return n.filter(a=>{var u=a.join(",");return s.has(u)?!1:(s.add(u),!0)}),t.indexes=n,t}var YR=1e15,GR={type:"object",properties:{lwt:{type:"number",minimum:qg,maximum:YR,multipleOf:.01}},additionalProperties:!0,required:["lwt"]};function xE(t){var e=Object.keys(t.properties).filter(n=>t.properties[n].final),r=on(t.primaryKey);return e.push(r),typeof t.primaryKey!="string"&&t.primaryKey.fields.forEach(n=>e.push(n)),e}function JR(t,e){for(var r=Object.keys(t.defaultValues),n=0;n<r.length;++n){var s=r[n];(!Object.prototype.hasOwnProperty.call(e,s)||typeof e[s]>"u")&&(e[s]=t.defaultValues[s])}return e}var ME=(function(){function t(r,n){if(this.jsonSchema=r,this.hashFunction=n,this.indexes=XR(this.jsonSchema),this.primaryPath=on(this.jsonSchema.primaryKey),!r.properties[this.primaryPath].maxLength)throw Ve("SC39",{schema:r});this.finalFields=xE(this.jsonSchema)}var e=t.prototype;return e.validateChange=function(n,s){this.finalFields.forEach(a=>{if(!Kc(n[a],s[a]))throw Ve("DOC9",{dataBefore:n,dataAfter:s,fieldName:a,schema:this.jsonSchema})})},e.getDocumentPrototype=function(){var n={},s=To(this.jsonSchema,"");return Object.keys(s).forEach(a=>{var u=a;n.__defineGetter__(a,function(){if(!(!this.get||typeof this.get!="function")){var l=this.get(u);return l}}),Object.defineProperty(n,a+"$",{get:function(){return this.get$(u)},enumerable:!1,configurable:!1}),Object.defineProperty(n,a+"$$",{get:function(){return this.get$$(u)},enumerable:!1,configurable:!1}),Object.defineProperty(n,a+"_",{get:function(){return this.populate(u)},enumerable:!1,configurable:!1})}),Po(this,"getDocumentPrototype",()=>n),n},e.getPrimaryOfDocumentData=function(n){return Na(this.jsonSchema,n)},Aa(t,[{key:"version",get:function(){return this.jsonSchema.version}},{key:"defaultValues",get:function(){var r={};return Object.entries(this.jsonSchema.properties).filter(([,n])=>Object.prototype.hasOwnProperty.call(n,"default")).forEach(([n,s])=>r[n]=s.default),Po(this,"defaultValues",r)}},{key:"hash",get:function(){return Po(this,"hash",this.hashFunction(JSON.stringify(this.jsonSchema)))}}])})();function XR(t){return(t.indexes||[]).map(e=>gp(e)?e:[e])}function ZR(t){var e=t.version?t.version:0,r=0;return new Array(e).fill(0).map(()=>r++)}function eC(t,e,r=!0){r&&Mn("preCreateRxSchema",t);var n=mm(t);n=HR(n),Jt.deepFreezeWhenDevMode(n);var s=new ME(n,e);return Mn("createRxSchema",s),s}function zt(t){return typeof t=="function"}function tC(t){return zt(t?.lift)}function gn(t){return function(e){if(tC(e))return e.lift(function(r){try{return t(r,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}var Qg=(function(t){return t&&typeof t.length=="number"&&typeof t!="function"});function FE(t){return zt(t?.then)}function Yg(t){var e=function(n){Error.call(n),n.stack=new Error().stack},r=t(e);return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}var uv=Yg(function(t){return function(r){t(this),this.message=r?r.length+` errors occurred during unsubscription:
`+r.map(function(n,s){return s+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=r}});function Sp(t,e){if(t){var r=t.indexOf(e);0<=r&&t.splice(r,1)}}var ul=(function(){function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var e,r,n,s,a;if(!this.closed){this.closed=!0;var u=this._parentage;if(u)if(this._parentage=null,Array.isArray(u))try{for(var l=zc(u),d=l.next();!d.done;d=l.next()){var m=d.value;m.remove(this)}}catch(D){e={error:D}}finally{try{d&&!d.done&&(r=l.return)&&r.call(l)}finally{if(e)throw e.error}}else u.remove(this);var y=this.initialTeardown;if(zt(y))try{y()}catch(D){a=D instanceof uv?D.errors:[D]}var g=this._finalizers;if(g){this._finalizers=null;try{for(var b=zc(g),S=b.next();!S.done;S=b.next()){var E=S.value;try{nb(E)}catch(D){a=a??[],D instanceof uv?a=Ts(Ts([],Zi(a)),Zi(D.errors)):a.push(D)}}}catch(D){n={error:D}}finally{try{S&&!S.done&&(s=b.return)&&s.call(b)}finally{if(n)throw n.error}}}if(a)throw new uv(a)}},t.prototype.add=function(e){var r;if(e&&e!==this)if(this.closed)nb(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(r=this._finalizers)!==null&&r!==void 0?r:[]).push(e)}},t.prototype._hasParent=function(e){var r=this._parentage;return r===e||Array.isArray(r)&&r.includes(e)},t.prototype._addParent=function(e){var r=this._parentage;this._parentage=Array.isArray(r)?(r.push(e),r):r?[r,e]:e},t.prototype._removeParent=function(e){var r=this._parentage;r===e?this._parentage=null:Array.isArray(r)&&Sp(r,e)},t.prototype.remove=function(e){var r=this._finalizers;r&&Sp(r,e),e instanceof t&&e._removeParent(this)},t.EMPTY=(function(){var e=new t;return e.closed=!0,e})(),t})(),BE=ul.EMPTY;function LE(t){return t instanceof ul||t&&"closed"in t&&zt(t.remove)&&zt(t.add)&&zt(t.unsubscribe)}function nb(t){zt(t)?t():t.unsubscribe()}var rC={Promise:void 0},nC={setTimeout:function(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return setTimeout.apply(void 0,Ts([t,e],Zi(r)))},clearTimeout:function(t){return clearTimeout(t)},delegate:void 0};function jE(t){nC.setTimeout(function(){throw t})}function tg(){}function sp(t){t()}var Gg=(function(t){js(e,t);function e(r){var n=t.call(this)||this;return n.isStopped=!1,r?(n.destination=r,LE(r)&&r.add(n)):n.destination=oC,n}return e.create=function(r,n,s){return new Hc(r,n,s)},e.prototype.next=function(r){this.isStopped||this._next(r)},e.prototype.error=function(r){this.isStopped||(this.isStopped=!0,this._error(r))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(r){this.destination.next(r)},e.prototype._error=function(r){try{this.destination.error(r)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e})(ul),iC=(function(){function t(e){this.partialObserver=e}return t.prototype.next=function(e){var r=this.partialObserver;if(r.next)try{r.next(e)}catch(n){uh(n)}},t.prototype.error=function(e){var r=this.partialObserver;if(r.error)try{r.error(e)}catch(n){uh(n)}else uh(e)},t.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(r){uh(r)}},t})(),Hc=(function(t){js(e,t);function e(r,n,s){var a=t.call(this)||this,u;return zt(r)||!r?u={next:r??void 0,error:n??void 0,complete:s??void 0}:u=r,a.destination=new iC(u),a}return e})(Gg);function uh(t){jE(t)}function sC(t){throw t}var oC={closed:!0,next:tg,error:sC,complete:tg},Jg=(function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"})();function Ta(t){return t}function aC(t){return t.length===0?Ta:t.length===1?t[0]:function(r){return t.reduce(function(n,s){return s(n)},r)}}var br=(function(){function t(e){e&&(this._subscribe=e)}return t.prototype.lift=function(e){var r=new t;return r.source=this,r.operator=e,r},t.prototype.subscribe=function(e,r,n){var s=this,a=cC(e)?e:new Hc(e,r,n);return sp(function(){var u=s,l=u.operator,d=u.source;a.add(l?l.call(a,d):d?s._subscribe(a):s._trySubscribe(a))}),a},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(r){e.error(r)}},t.prototype.forEach=function(e,r){var n=this;return r=ib(r),new r(function(s,a){var u=new Hc({next:function(l){try{e(l)}catch(d){a(d),u.unsubscribe()}},error:a,complete:s});n.subscribe(u)})},t.prototype._subscribe=function(e){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(e)},t.prototype[Jg]=function(){return this},t.prototype.pipe=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return aC(e)(this)},t.prototype.toPromise=function(e){var r=this;return e=ib(e),new e(function(n,s){var a;r.subscribe(function(u){return a=u},function(u){return s(u)},function(){return n(a)})})},t.create=function(e){return new t(e)},t})();function ib(t){var e;return(e=t??rC.Promise)!==null&&e!==void 0?e:Promise}function uC(t){return t&&zt(t.next)&&zt(t.error)&&zt(t.complete)}function cC(t){return t&&t instanceof Gg||uC(t)&&LE(t)}function UE(t){return zt(t[Jg])}function zE(t){return Symbol.asyncIterator&&zt(t?.[Symbol.asyncIterator])}function qE(t){return new TypeError("You provided "+(t!==null&&typeof t=="object"?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function lC(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var VE=lC();function KE(t){return zt(t?.[VE])}function WE(t){return Yi(this,arguments,function(){var r,n,s,a;return SE(this,function(u){switch(u.label){case 0:r=t.getReader(),u.label=1;case 1:u.trys.push([1,,9,10]),u.label=2;case 2:return[4,ut(r.read())];case 3:return n=u.sent(),s=n.value,a=n.done,a?[4,ut(void 0)]:[3,5];case 4:return[2,u.sent()];case 5:return[4,ut(s)];case 6:return[4,u.sent()];case 7:return u.sent(),[3,2];case 8:return[3,10];case 9:return r.releaseLock(),[7];case 10:return[2]}})})}function HE(t){return zt(t?.getReader)}function jn(t){if(t instanceof br)return t;if(t!=null){if(UE(t))return fC(t);if(Qg(t))return dC(t);if(FE(t))return hC(t);if(zE(t))return QE(t);if(KE(t))return pC(t);if(HE(t))return mC(t)}throw qE(t)}function fC(t){return new br(function(e){var r=t[Jg]();if(zt(r.subscribe))return r.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function dC(t){return new br(function(e){for(var r=0;r<t.length&&!e.closed;r++)e.next(t[r]);e.complete()})}function hC(t){return new br(function(e){t.then(function(r){e.closed||(e.next(r),e.complete())},function(r){return e.error(r)}).then(null,jE)})}function pC(t){return new br(function(e){var r,n;try{for(var s=zc(t),a=s.next();!a.done;a=s.next()){var u=a.value;if(e.next(u),e.closed)return}}catch(l){r={error:l}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}e.complete()})}function QE(t){return new br(function(e){yC(t,e).catch(function(r){return e.error(r)})})}function mC(t){return QE(WE(t))}function yC(t,e){var r,n,s,a;return st(this,void 0,void 0,function(){var u,l;return SE(this,function(d){switch(d.label){case 0:d.trys.push([0,5,6,11]),r=ga(t),d.label=1;case 1:return[4,r.next()];case 2:if(n=d.sent(),!!n.done)return[3,4];if(u=n.value,e.next(u),e.closed)return[2];d.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return l=d.sent(),s={error:l},[3,11];case 6:return d.trys.push([6,,9,10]),n&&!n.done&&(a=r.return)?[4,a.call(r)]:[3,8];case 7:d.sent(),d.label=8;case 8:return[3,10];case 9:if(s)throw s.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function sn(t,e,r,n,s){return new vC(t,e,r,n,s)}var vC=(function(t){js(e,t);function e(r,n,s,a,u,l){var d=t.call(this,r)||this;return d.onFinalize=u,d.shouldUnsubscribe=l,d._next=n?function(m){try{n(m)}catch(y){r.error(y)}}:t.prototype._next,d._error=a?function(m){try{a(m)}catch(y){r.error(y)}finally{this.unsubscribe()}}:t.prototype._error,d._complete=s?function(){try{s()}catch(m){r.error(m)}finally{this.unsubscribe()}}:t.prototype._complete,d}return e.prototype.unsubscribe=function(){var r;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;t.prototype.unsubscribe.call(this),!n&&((r=this.onFinalize)===null||r===void 0||r.call(this))}},e})(Gg),gC=(function(t){js(e,t);function e(r,n){return t.call(this)||this}return e.prototype.schedule=function(r,n){return this},e})(ul),sb={setInterval:function(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return setInterval.apply(void 0,Ts([t,e],Zi(r)))},clearInterval:function(t){return clearInterval(t)},delegate:void 0},_C=(function(t){js(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.scheduler=r,s.work=n,s.pending=!1,s}return e.prototype.schedule=function(r,n){var s;if(n===void 0&&(n=0),this.closed)return this;this.state=r;var a=this.id,u=this.scheduler;return a!=null&&(this.id=this.recycleAsyncId(u,a,n)),this.pending=!0,this.delay=n,this.id=(s=this.id)!==null&&s!==void 0?s:this.requestAsyncId(u,this.id,n),this},e.prototype.requestAsyncId=function(r,n,s){return s===void 0&&(s=0),sb.setInterval(r.flush.bind(r,this),s)},e.prototype.recycleAsyncId=function(r,n,s){if(s===void 0&&(s=0),s!=null&&this.delay===s&&this.pending===!1)return n;n!=null&&sb.clearInterval(n)},e.prototype.execute=function(r,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var s=this._execute(r,n);if(s)return s;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(r,n){var s=!1,a;try{this.work(r)}catch(u){s=!0,a=u||new Error("Scheduled action threw falsy error")}if(s)return this.unsubscribe(),a},e.prototype.unsubscribe=function(){if(!this.closed){var r=this,n=r.id,s=r.scheduler,a=s.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Sp(a,this),n!=null&&(this.id=this.recycleAsyncId(s,n,null)),this.delay=null,t.prototype.unsubscribe.call(this)}},e})(gC),Xg={now:function(){return(Xg.delegate||Date).now()},delegate:void 0},ob=(function(){function t(e,r){r===void 0&&(r=t.now),this.schedulerActionCtor=e,this.now=r}return t.prototype.schedule=function(e,r,n){return r===void 0&&(r=0),new this.schedulerActionCtor(this,e).schedule(n,r)},t.now=Xg.now,t})(),wC=(function(t){js(e,t);function e(r,n){n===void 0&&(n=ob.now);var s=t.call(this,r,n)||this;return s.actions=[],s._active=!1,s}return e.prototype.flush=function(r){var n=this.actions;if(this._active){n.push(r);return}var s;this._active=!0;do if(s=r.execute(r.state,r.delay))break;while(r=n.shift());if(this._active=!1,s){for(;r=n.shift();)r.unsubscribe();throw s}},e})(ob),bC=new wC(_C),SC=bC;function EC(t){return t&&zt(t.schedule)}function IC(t){return t instanceof Date&&!isNaN(t)}function YE(t,e,r){return t===void 0&&(t=0),r===void 0&&(r=SC),new br(function(n){var s=IC(t)?+t-r.now():t;s<0&&(s=0);var a=0;return r.schedule(function(){n.closed||(n.next(a++),n.complete())},s)})}function Zg(t){return t[t.length-1]}function GE(t){return zt(Zg(t))?t.pop():void 0}function cl(t){return EC(Zg(t))?t.pop():void 0}function JE(t,e){return typeof Zg(t)=="number"?t.pop():e}function _a(t,e,r,n,s){n===void 0&&(n=0),s===void 0&&(s=!1);var a=e.schedule(function(){r(),s?t.add(this.schedule(null,n)):this.unsubscribe()},n);if(t.add(a),!s)return a}function XE(t){return gn(function(e,r){var n=null,s=!1,a;n=e.subscribe(sn(r,void 0,void 0,function(u){a=jn(t(u,XE(t)(e))),n?(n.unsubscribe(),n=null,a.subscribe(r)):s=!0})),s&&(n.unsubscribe(),n=null,a.subscribe(r))})}var OC=Array.isArray,kC=Object.getPrototypeOf,PC=Object.prototype,DC=Object.keys;function RC(t){if(t.length===1){var e=t[0];if(OC(e))return{args:e,keys:null};if(CC(e)){var r=DC(e);return{args:r.map(function(n){return e[n]}),keys:r}}}return{args:t,keys:null}}function CC(t){return t&&typeof t=="object"&&kC(t)===PC}function ZE(t,e){return e===void 0&&(e=0),gn(function(r,n){r.subscribe(sn(n,function(s){return _a(n,t,function(){return n.next(s)},e)},function(){return _a(n,t,function(){return n.complete()},e)},function(s){return _a(n,t,function(){return n.error(s)},e)}))})}function eI(t,e){return e===void 0&&(e=0),gn(function(r,n){n.add(t.schedule(function(){return r.subscribe(n)},e))})}function $C(t,e){return jn(t).pipe(eI(e),ZE(e))}function AC(t,e){return jn(t).pipe(eI(e),ZE(e))}function NC(t,e){return new br(function(r){var n=0;return e.schedule(function(){n===t.length?r.complete():(r.next(t[n++]),r.closed||this.schedule())})})}function TC(t,e){return new br(function(r){var n;return _a(r,e,function(){n=t[VE](),_a(r,e,function(){var s,a,u;try{s=n.next(),a=s.value,u=s.done}catch(l){r.error(l);return}u?r.complete():r.next(a)},0,!0)}),function(){return zt(n?.return)&&n.return()}})}function tI(t,e){if(!t)throw new Error("Iterable cannot be null");return new br(function(r){_a(r,e,function(){var n=t[Symbol.asyncIterator]();_a(r,e,function(){n.next().then(function(s){s.done?r.complete():r.next(s.value)})},0,!0)})})}function xC(t,e){return tI(WE(t),e)}function MC(t,e){if(t!=null){if(UE(t))return $C(t,e);if(Qg(t))return NC(t,e);if(FE(t))return AC(t,e);if(zE(t))return tI(t,e);if(KE(t))return TC(t,e);if(HE(t))return xC(t,e)}throw qE(t)}function ll(t,e){return e?MC(t,e):jn(t)}function ur(t,e){return gn(function(r,n){var s=0;r.subscribe(sn(n,function(a){n.next(t.call(e,a,s++))}))})}var FC=Array.isArray;function BC(t,e){return FC(e)?t.apply(void 0,Ts([],Zi(e))):t(e)}function rI(t){return ur(function(e){return BC(t,e)})}function LC(t,e){return t.reduce(function(r,n,s){return r[n]=e[s],r},{})}function nI(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=cl(t),n=GE(t),s=RC(t),a=s.args,u=s.keys;if(a.length===0)return ll([],r);var l=new br(jC(a,r,u?function(d){return LC(u,d)}:Ta));return n?l.pipe(rI(n)):l}function jC(t,e,r){return r===void 0&&(r=Ta),function(n){ab(e,function(){for(var s=t.length,a=new Array(s),u=s,l=s,d=function(y){ab(e,function(){var g=ll(t[y],e),b=!1;g.subscribe(sn(n,function(S){a[y]=S,b||(b=!0,l--),l||n.next(r(a.slice()))},function(){--u||n.complete()}))},n)},m=0;m<s;m++)d(m)},n)}}function ab(t,e,r){t?_a(r,t,e):e()}function UC(t,e,r,n,s,a,u,l){var d=[],m=0,y=0,g=!1,b=function(){g&&!d.length&&!m&&e.complete()},S=function(D){return m<n?E(D):d.push(D)},E=function(D){m++;var O=!1;jn(r(D,y++)).subscribe(sn(e,function($){e.next($)},function(){O=!0},void 0,function(){if(O)try{m--;for(var $=function(){var P=d.shift();u||E(P)};d.length&&m<n;)$();b()}catch(P){e.error(P)}}))};return t.subscribe(sn(e,S,function(){g=!0,b()})),function(){}}function es(t,e,r){return r===void 0&&(r=1/0),zt(e)?es(function(n,s){return ur(function(a,u){return e(n,a,s,u)})(jn(t(n,s)))},r):(typeof e=="number"&&(r=e),gn(function(n,s){return UC(n,s,t,r)}))}var zC=Array.isArray;function qC(t){return t.length===1&&zC(t[0])?t[0]:t}function e0(t){return t===void 0&&(t=1/0),es(Ta,t)}function VC(){return e0(1)}var KC=Yg(function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Hr=(function(t){js(e,t);function e(){var r=t.call(this)||this;return r.closed=!1,r.currentObservers=null,r.observers=[],r.isStopped=!1,r.hasError=!1,r.thrownError=null,r}return e.prototype.lift=function(r){var n=new ub(this,this);return n.operator=r,n},e.prototype._throwIfClosed=function(){if(this.closed)throw new KC},e.prototype.next=function(r){var n=this;sp(function(){var s,a;if(n._throwIfClosed(),!n.isStopped){n.currentObservers||(n.currentObservers=Array.from(n.observers));try{for(var u=zc(n.currentObservers),l=u.next();!l.done;l=u.next()){var d=l.value;d.next(r)}}catch(m){s={error:m}}finally{try{l&&!l.done&&(a=u.return)&&a.call(u)}finally{if(s)throw s.error}}}})},e.prototype.error=function(r){var n=this;sp(function(){if(n._throwIfClosed(),!n.isStopped){n.hasError=n.isStopped=!0,n.thrownError=r;for(var s=n.observers;s.length;)s.shift().error(r)}})},e.prototype.complete=function(){var r=this;sp(function(){if(r._throwIfClosed(),!r.isStopped){r.isStopped=!0;for(var n=r.observers;n.length;)n.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var r;return((r=this.observers)===null||r===void 0?void 0:r.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(r){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,r)},e.prototype._subscribe=function(r){return this._throwIfClosed(),this._checkFinalizedStatuses(r),this._innerSubscribe(r)},e.prototype._innerSubscribe=function(r){var n=this,s=this,a=s.hasError,u=s.isStopped,l=s.observers;return a||u?BE:(this.currentObservers=null,l.push(r),new ul(function(){n.currentObservers=null,Sp(l,r)}))},e.prototype._checkFinalizedStatuses=function(r){var n=this,s=n.hasError,a=n.thrownError,u=n.isStopped;s?r.error(a):u&&r.complete()},e.prototype.asObservable=function(){var r=new br;return r.source=this,r},e.create=function(r,n){return new ub(r,n)},e})(br),ub=(function(t){js(e,t);function e(r,n){var s=t.call(this)||this;return s.destination=r,s.source=n,s}return e.prototype.next=function(r){var n,s;(s=(n=this.destination)===null||n===void 0?void 0:n.next)===null||s===void 0||s.call(n,r)},e.prototype.error=function(r){var n,s;(s=(n=this.destination)===null||n===void 0?void 0:n.error)===null||s===void 0||s.call(n,r)},e.prototype.complete=function(){var r,n;(n=(r=this.destination)===null||r===void 0?void 0:r.complete)===null||n===void 0||n.call(r)},e.prototype._subscribe=function(r){var n,s;return(s=(n=this.source)===null||n===void 0?void 0:n.subscribe(r))!==null&&s!==void 0?s:BE},e})(Hr);function cb(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return VC()(ll(t,cl(t)))}var iI=new br(function(t){return t.complete()});function cv(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=cl(t);return ll(t,r)}function Ia(t,e){return e===void 0&&(e=Ta),t=t??WC,gn(function(r,n){var s,a=!0;r.subscribe(sn(n,function(u){var l=e(u);(a||!t(s,l))&&(a=!1,s=l,n.next(u))}))})}function WC(t,e){return t===e}function Gt(t,e){return gn(function(r,n){var s=0;r.subscribe(sn(n,function(a){return t.call(e,a,s++)&&n.next(a)}))})}var sI=Yg(function(t){return function(){t(this),this.name="EmptyError",this.message="no elements in sequence"}});function HC(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=cl(t),n=JE(t,1/0);return t=qC(t),gn(function(s,a){e0(n)(ll(Ts([s],Zi(t)),r)).subscribe(a)})}function QC(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return HC.apply(void 0,Ts([],Zi(t)))}var Ii=(function(t){js(e,t);function e(r){var n=t.call(this)||this;return n._value=r,n}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(r){var n=t.prototype._subscribe.call(this,r);return!n.closed&&r.next(this._value),n},e.prototype.getValue=function(){var r=this,n=r.hasError,s=r.thrownError,a=r._value;if(n)throw s;return this._throwIfClosed(),a},e.prototype.next=function(r){t.prototype.next.call(this,this._value=r)},e})(Hr),oI=(function(t){js(e,t);function e(r,n,s){r===void 0&&(r=1/0),n===void 0&&(n=1/0),s===void 0&&(s=Xg);var a=t.call(this)||this;return a._bufferSize=r,a._windowTime=n,a._timestampProvider=s,a._buffer=[],a._infiniteTimeWindow=!0,a._infiniteTimeWindow=n===1/0,a._bufferSize=Math.max(1,r),a._windowTime=Math.max(1,n),a}return e.prototype.next=function(r){var n=this,s=n.isStopped,a=n._buffer,u=n._infiniteTimeWindow,l=n._timestampProvider,d=n._windowTime;s||(a.push(r),!u&&a.push(l.now()+d)),this._trimBuffer(),t.prototype.next.call(this,r)},e.prototype._subscribe=function(r){this._throwIfClosed(),this._trimBuffer();for(var n=this._innerSubscribe(r),s=this,a=s._infiniteTimeWindow,u=s._buffer,l=u.slice(),d=0;d<l.length&&!r.closed;d+=a?1:2)r.next(l[d]);return this._checkFinalizedStatuses(r),n},e.prototype._trimBuffer=function(){var r=this,n=r._bufferSize,s=r._timestampProvider,a=r._buffer,u=r._infiniteTimeWindow,l=(u?1:2)*n;if(n<1/0&&l<a.length&&a.splice(0,a.length-l),!u){for(var d=s.now(),m=0,y=1;y<a.length&&a[y]<=d;y+=2)m=y;m&&a.splice(0,m+1)}},e})(Hr);function YC(t){t===void 0&&(t=1/0);var e;t&&typeof t=="object"?e=t:e={count:t};var r=e.count,n=r===void 0?1/0:r,s=e.delay,a=e.resetOnSuccess,u=a===void 0?!1:a;return n<=0?Ta:gn(function(l,d){var m=0,y,g=function(){var b=!1;y=l.subscribe(sn(d,function(S){u&&(m=0),d.next(S)},void 0,function(S){if(m++<n){var E=function(){y?(y.unsubscribe(),y=null,g()):b=!0};if(s!=null){var D=typeof s=="number"?YE(s):jn(s(S,m)),O=sn(d,function(){O.unsubscribe(),E()},function(){d.complete()});D.subscribe(O)}else E()}else d.error(S)})),b&&(y.unsubscribe(),y=null,g())};g()})}function GC(t){t===void 0&&(t={});var e=t.connector,r=e===void 0?function(){return new Hr}:e,n=t.resetOnError,s=n===void 0?!0:n,a=t.resetOnComplete,u=a===void 0?!0:a,l=t.resetOnRefCountZero,d=l===void 0?!0:l;return function(m){var y,g,b,S=0,E=!1,D=!1,O=function(){g?.unsubscribe(),g=void 0},$=function(){O(),y=b=void 0,E=D=!1},P=function(){var C=y;$(),C?.unsubscribe()};return gn(function(C,B){S++,!D&&!E&&O();var k=b=b??r();B.add(function(){S--,S===0&&!D&&!E&&(g=lv(P,d))}),k.subscribe(B),!y&&S>0&&(y=new Hc({next:function(x){return k.next(x)},error:function(x){D=!0,O(),g=lv($,s,x),k.error(x)},complete:function(){E=!0,O(),g=lv($,u),k.complete()}}),jn(C).subscribe(y))})(m)}}function lv(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];if(e===!0){t();return}if(e!==!1){var s=new Hc({next:function(){s.unsubscribe(),t()}});return jn(e.apply(void 0,Ts([],Zi(r)))).subscribe(s)}}function ko(t,e,r){var n,s,a,u,l=!1;return t&&typeof t=="object"?(n=t.bufferSize,u=n===void 0?1/0:n,s=t.windowTime,e=s===void 0?1/0:s,a=t.refCount,l=a===void 0?!1:a,r=t.scheduler):u=t??1/0,GC({connector:function(){return new oI(u,e,r)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:l})}function xf(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=cl(t);return gn(function(n,s){(r?cb(t,n,r):cb(t,n)).subscribe(s)})}function _f(t,e){return gn(function(r,n){var s=null,a=0,u=!1,l=function(){return u&&!s&&n.complete()};r.subscribe(sn(n,function(d){s?.unsubscribe();var m=0,y=a++;jn(t(d,y)).subscribe(s=sn(n,function(g){return n.next(e?e(d,g,y,m++):g)},function(){s=null,l()}))},function(){u=!0,l()}))})}function aI(t,e){return e===void 0&&(e=!1),gn(function(r,n){var s=0;r.subscribe(sn(n,function(a){var u=t(a,s++);(u||e)&&n.next(a),!u&&n.complete()}))})}function rg(t,e,r){var n=zt(t)||e||r?{next:t,error:e,complete:r}:t;return n?gn(function(s,a){var u;(u=n.subscribe)===null||u===void 0||u.call(n);var l=!0;s.subscribe(sn(a,function(d){var m;(m=n.next)===null||m===void 0||m.call(n,d),a.next(d)},function(){var d;l=!1,(d=n.complete)===null||d===void 0||d.call(n),a.complete()},function(d){var m;l=!1,(m=n.error)===null||m===void 0||m.call(n,d),a.error(d)},function(){var d,m;l&&((d=n.unsubscribe)===null||d===void 0||d.call(n)),(m=n.finalize)===null||m===void 0||m.call(n)}))}):Ta}function JC(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=GE(t);return gn(function(n,s){for(var a=t.length,u=new Array(a),l=t.map(function(){return!1}),d=!1,m=function(g){jn(t[g]).subscribe(sn(s,function(b){u[g]=b,!d&&!l[g]&&(l[g]=!0,(d=l.every(Ta))&&(l=null))},tg))},y=0;y<a;y++)m(y);n.subscribe(sn(s,function(g){if(d){var b=Ts([g],Zi(u));s.next(r?r.apply(void 0,Ts([],Zi(b))):b)}}))})}function uI(t){return t.documentData?t.documentData:t.previousDocumentData}function XC(t){switch(t.operation){case"INSERT":return{operation:t.operation,id:t.documentId,doc:t.documentData,previous:null};case"UPDATE":return{operation:t.operation,id:t.documentId,doc:Jt.deepFreezeWhenDevMode(t.documentData),previous:t.previousDocumentData?t.previousDocumentData:"UNKNOWN"};case"DELETE":return{operation:t.operation,id:t.documentId,doc:null,previous:t.previousDocumentData}}}var ZC=new Map;function cI(t){return nn(ZC,t,()=>{for(var e=new Array(t.events.length),r=t.events,n=t.collectionName,s=t.isLocal,a=Jt.deepFreezeWhenDevMode,u=0;u<r.length;u++){var l=r[u];e[u]={documentId:l.documentId,collectionName:n,isLocal:s,operation:l.operation,documentData:a(l.documentData),previousDocumentData:a(l.previousDocumentData)}}return e})}function e$(t){return!!t&&(t instanceof br||zt(t.lift)&&zt(t.subscribe))}function t$(t,e){return new Promise(function(r,n){var s=!1,a;t.subscribe({next:function(u){a=u,s=!0},error:n,complete:function(){s?r(a):n(new sI)}})})}function Do(t,e){return new Promise(function(r,n){var s=new Hc({next:function(a){r(a),s.unsubscribe()},error:n,complete:function(){n(new sI)}});t.subscribe(s)})}function ng(t){return new br(function(e){jn(t()).subscribe(e)})}var r$=["addListener","removeListener"],n$=["addEventListener","removeEventListener"],i$=["on","off"];function ig(t,e,r,n){if(zt(r)&&(n=r,r=void 0),n)return ig(t,e,r).pipe(rI(n));var s=Zi(a$(t)?n$.map(function(l){return function(d){return t[l](e,d,r)}}):s$(t)?r$.map(lb(t,e)):o$(t)?i$.map(lb(t,e)):[],2),a=s[0],u=s[1];if(!a&&Qg(t))return es(function(l){return ig(l,e,r)})(jn(t));if(!a)throw new TypeError("Invalid event target");return new br(function(l){var d=function(){for(var m=[],y=0;y<arguments.length;y++)m[y]=arguments[y];return l.next(1<m.length?m:m[0])};return a(d),function(){return u(d)}})}function lb(t,e){return function(r){return function(n){return t[r](e,n)}}}function s$(t){return zt(t.addListener)&&zt(t.removeListener)}function o$(t){return zt(t.on)&&zt(t.off)}function a$(t){return zt(t.addEventListener)&&zt(t.removeEventListener)}function u$(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=cl(t),n=JE(t,1/0),s=t;return s.length?s.length===1?jn(s[0]):e0(n)(ll(s,r)):iI}var Gi="",Ns=Number.MIN_SAFE_INTEGER;function c$(t,e){var r=e.selector,n=t.indexes?t.indexes.slice(0):[];e.index&&(n=[e.index]);var s=!!e.sort.find(y=>Object.values(y)[0]==="desc"),a=new Set;Object.keys(r).forEach(y=>{var g=To(t,y);g&&g.type==="boolean"&&Object.prototype.hasOwnProperty.call(r[y],"$eq")&&a.add(y)});var u=e.sort.map(y=>Object.keys(y)[0]),l=u.filter(y=>!a.has(y)).join(","),d=-1,m;if(n.forEach(y=>{var g=!0,b=!0,S=y.map(P=>{var C=r[P],B=C?Object.keys(C):[],k={};if(!C||!B.length){var x=b?Ns:Gi;k={startKey:x,endKey:g?Gi:Ns,inclusiveStart:!0,inclusiveEnd:!0}}else B.forEach(U=>{if(t0.has(U)){var ie=C[U],Y=h$(U,ie);k=Object.assign(k,Y)}});return typeof k.startKey>"u"&&(k.startKey=Ns),typeof k.endKey>"u"&&(k.endKey=Gi),typeof k.inclusiveStart>"u"&&(k.inclusiveStart=!0),typeof k.inclusiveEnd>"u"&&(k.inclusiveEnd=!0),b&&!k.inclusiveStart&&(b=!1),g&&!k.inclusiveEnd&&(g=!1),k}),E=S.map(P=>P.startKey),D=S.map(P=>P.endKey),O={index:y,startKeys:E,endKeys:D,inclusiveEnd:g,inclusiveStart:b,sortSatisfiedByIndex:!s&&l===y.filter(P=>!a.has(P)).join(","),selectorSatisfiedByIndex:d$(y,e.selector,E,D)},$=p$(t,e,O);($>=d||e.index)&&(d=$,m=O)}),!m)throw Ve("SNH",{query:e});return m}var t0=new Set(["$eq","$gt","$gte","$lt","$lte"]),l$=new Set(["$eq","$gt","$gte"]),f$=new Set(["$eq","$lt","$lte"]);function d$(t,e,r,n){var s=Object.entries(e),a=s.find(([U,ie])=>{if(!t.includes(U))return!0;var Y=Object.entries(ie).find(([_e,le])=>!t0.has(_e));return Y});if(a||e.$and||e.$or)return!1;var u=[],l=new Set;for(var[d,m]of Object.entries(e)){if(!t.includes(d))return!1;var y=Object.keys(m).filter(U=>l$.has(U));if(y.length>1)return!1;var g=y[0];if(g&&l.add(d),g!=="$eq"){if(u.length>0)return!1;u.push(g)}}var b=[],S=new Set;for(var[E,D]of Object.entries(e)){if(!t.includes(E))return!1;var O=Object.keys(D).filter(U=>f$.has(U));if(O.length>1)return!1;var $=O[0];if($&&S.add(E),$!=="$eq"){if(b.length>0)return!1;b.push($)}}var P=0;for(var C of t){for(var B of[l,S]){if(!B.has(C)&&B.size>0)return!1;B.delete(C)}var k=r[P],x=n[P];if(k!==x&&l.size>0&&S.size>0)return!1;P++}return!0}function h$(t,e){switch(t){case"$eq":return{startKey:e,endKey:e,inclusiveEnd:!0,inclusiveStart:!0};case"$lte":return{endKey:e,inclusiveEnd:!0};case"$gte":return{startKey:e,inclusiveStart:!0};case"$lt":return{endKey:e,inclusiveEnd:!1};case"$gt":return{startKey:e,inclusiveStart:!1};default:throw new Error("SNH")}}function p$(t,e,r){var n=0,s=y=>{y>0&&(n=n+y)},a=10,u=rv(r.startKeys,y=>y!==Ns&&y!==Gi);s(u*a);var l=rv(r.startKeys,y=>y!==Gi&&y!==Ns);s(l*a);var d=rv(r.startKeys,(y,g)=>y===r.endKeys[g]);s(d*a*1.5);var m=r.sortSatisfiedByIndex?5:0;return s(m),n}class Mf extends Error{}const wf=Symbol("missing"),lI=Object.freeze(new Error("mingo: cycle detected while processing object/array")),Ff=t=>{const e=op(t);let r=0,n=e.length;for(;n;)r=(r<<5)-r^e.charCodeAt(--n);return r>>>0},va=t=>typeof t!="object"&&typeof t!="function"||t===null,fI=t=>va(t)||Qc(t)||Ro(t),dI={undefined:1,null:2,number:3,string:4,symbol:5,object:6,array:7,arraybuffer:8,boolean:9,date:10,regexp:11,function:12},Ri=(t,e)=>{t===wf&&(t=void 0),e===wf&&(e=void 0);const[r,n]=[t,e].map(s=>dI[Sf(s)]||0);return r!==n?r-n:Ji(t,e)?0:t<e?-1:t>e?1:0};class bf extends Map{#e=Ff;#r=new Map;#t=e=>{const r=this.#e(e);return[(this.#r.get(r)||[]).find(n=>Ji(n,e)),r]};constructor(){super()}static init(e){const r=new bf;return e&&(r.#e=e),r}clear(){super.clear(),this.#r.clear()}delete(e){if(va(e))return super.delete(e);const[r,n]=this.#t(e);return super.delete(r)?(this.#r.set(n,this.#r.get(n).filter(s=>!Ji(s,r))),!0):!1}get(e){if(va(e))return super.get(e);const[r,n]=this.#t(e);return super.get(r)}has(e){if(va(e))return super.has(e);const[r,n]=this.#t(e);return super.has(r)}set(e,r){if(va(e))return super.set(e,r);const[n,s]=this.#t(e);if(super.has(n))super.set(n,r);else{super.set(e,r);const a=this.#r.get(s)||[];a.push(e),this.#r.set(s,a)}return this}get size(){return super.size}}function Xt(t,e){if(!t)throw new Mf(e)}const m$=Object.keys(dI).reduce((t,e)=>(t["[object "+e[0].toUpperCase()+e.substring(1)+"]"]=e,t),{});function Sf(t){const e=Object.prototype.toString.call(t);return e==="[object Object]"?t?.constructor?.name?.toLowerCase()||"object":m$[e]||e.substring(8,e.length-1).toLowerCase()}const xc=t=>typeof t=="boolean",ts=t=>typeof t=="string",y$=t=>typeof t=="symbol",zr=t=>!isNaN(t)&&typeof t=="number",kt=Array.isArray;function Pr(t){if(!t)return!1;const e=Object.getPrototypeOf(t);return(e===Object.prototype||e===null)&&Sf(t)==="object"}const hI=t=>!va(t),Qc=t=>t instanceof Date,Ro=t=>t instanceof RegExp,ym=t=>typeof t=="function",ii=t=>t==null,Yc=(t,e=!0)=>!!t||e&&t==="",r0=t=>ii(t)||ts(t)&&!t||kt(t)&&t.length===0||Pr(t)&&Object.keys(t).length===0,fl=t=>kt(t)?t:[t],rs=(t,e)=>!!t&&Object.prototype.hasOwnProperty.call(t,e),v$=t=>typeof ArrayBuffer<"u"&&ArrayBuffer.isView(t),Gc=(t,e)=>{if(ii(t)||xc(t)||zr(t)||ts(t))return t;if(Qc(t))return new Date(t);if(Ro(t))return new RegExp(t);if(v$(t)){const r=t.constructor;return new r(t)}if(e instanceof Set||(e=new Set),e.has(t))throw lI;e.add(t);try{if(kt(t)){const r=new Array(t.length);for(let n=0;n<t.length;n++)r[n]=Gc(t[n],e);return r}if(Pr(t)){const r={};for(const n of Object.keys(t))r[n]=Gc(t[n],e);return r}}finally{e.delete(t)}return t},fb=t=>t===wf;function sg(t,e){if(fb(t)||ii(t))return e;if(fb(e)||ii(e))return t;if(va(t)||va(e))return e;kt(t)&&kt(e)&&Xt(t.length===e.length,"arrays must be of equal length to merge.");for(const r of Object.keys(e))t[r]=sg(t[r],e[r]);return t}function pI(t,e=Ff){const r=[bf.init(e),bf.init(e)];if(t.length===0)return[];if(t.some(n=>n.length===0))return[];if(t.length===1)return[...t];t[t.length-1].forEach(n=>r[0].set(n,!0));for(let n=t.length-2;n>-1;n--){if(t[n].forEach(s=>{r[0].has(s)&&r[1].set(s,!0)}),r[1].size===0)return[];r.reverse(),r[1].clear()}return Array.from(r[0].keys())}function mI(t,e=1){const r=new Array;function n(s,a){for(let u=0,l=s.length;u<l;u++)kt(s[u])&&(a>0||a<0)?n(s[u],Math.max(-1,a-1)):r.push(s[u])}return n(t,e),r}function g$(t){const e={};for(;t;){for(const r of Object.getOwnPropertyNames(t))r in e||(e[r]=t[r]);t=Object.getPrototypeOf(t)}return e}function yI(t){for(;t;){if(Object.getOwnPropertyNames(t).includes("toString"))return t.toString!==Object.prototype.toString;t=Object.getPrototypeOf(t)}return!1}function Ji(t,e){if(t===e||Object.is(t,e))return!0;if(t===null||e===null||typeof t!=typeof e||typeof t!="object"||t.constructor!==e.constructor)return!1;if(t instanceof Date)return+t==+e;if(t instanceof RegExp)return t.toString()===e.toString();const r=t.constructor;if(r===Array||r===Object){const n=Object.keys(t).sort(),s=Object.keys(e).sort();if(n.length!==s.length)return!1;for(let a=0,u=n[a];a<n.length;u=n[++a])if(u!==s[a]||!Ji(t[u],e[u]))return!1;return!0}return yI(t)&&t.toString()===e.toString()}function _$(t,e=Ff){const r=bf.init(e);return t.forEach(n=>r.set(n,!0)),Array.from(r.keys())}const op=(t,e)=>{if(t===null)return"null";if(t===void 0)return"undefined";if(ts(t)||zr(t)||xc(t))return JSON.stringify(t);if(Qc(t))return t.toISOString();if(Ro(t)||y$(t)||ym(t))return t.toString();if(e instanceof Set||(e=new Set),e.has(t))throw lI;try{if(e.add(t),kt(t))return"["+t.map(n=>op(n,e)).join(",")+"]";if(Pr(t))return"{"+Object.keys(t).sort().map(s=>`${s}:${op(t[s],e)}`).join()+"}";const r=yI(t)?t.toString():op(g$(t),e);return Sf(t)+"("+r+")"}finally{e.delete(t)}};function w$(t,e){return ii(t)?null:(e=e||Ff,e(t))}function b$(t,e,r=Ff){if(t.length<1)return new Map;const n=new Map,s=new Map;for(let a=0;a<t.length;a++){const u=t[a],l=e(u,a),d=w$(l,r);if(d===null)s.has(null)?s.get(null).push(u):s.set(null,[u]);else{const m=n.has(d)?n.get(d).find(y=>Ji(y,l)):null;ii(m)?(s.set(l,[u]),n.has(d)?n.get(d).push(l):n.set(d,[l])):s.get(m).push(u)}}return s}function og(t,e){return hI(t)?t[e]:void 0}function S$(t,e){if(e<1)return t;for(;e--&&t.length===1;)t=t[0];return t}function Ms(t,e,r){let n=0;function s(u,l){let d=u;for(let m=0;m<l.length;m++){const y=l[m];if(/^\d+$/.exec(y)===null&&kt(d)){if(m===0&&n>0)break;n+=1;const b=l.slice(m);d=d.reduce((S,E)=>{const D=s(E,b);return D!==void 0&&S.push(D),S},[]);break}else d=og(d,y);if(d===void 0)break}return d}const a=fI(t)?t:s(t,e.split("."));return kt(a)&&r?.unwrapArray?S$(a,n):a}function af(t,e,r){const n=e.indexOf("."),s=n==-1?e:e.substring(0,n),a=e.substring(n+1),u=n!=-1;if(kt(t)){const m=/^\d+$/.test(s),y=m&&r?.preserveIndex?[...t]:[];if(m){const g=parseInt(s);let b=og(t,g);u&&(b=af(b,a,r)),r?.preserveIndex?y[g]=b:y.push(b)}else for(const g of t){const b=af(g,e,r);r?.preserveMissing?y.push(b??wf):(b!=null||r?.preserveIndex)&&y.push(b)}return y}const l=r?.preserveKeys?{...t}:{};let d=og(t,s);if(u&&(d=af(d,a,r)),d!==void 0)return l[s]=d,l}function ag(t){if(kt(t))for(let e=t.length-1;e>=0;e--)t[e]===wf?t.splice(e,1):ag(t[e]);else if(Pr(t))for(const e in t)rs(t,e)&&ag(t[e])}const db=/^\d+$/;function Ef(t,e,r,n){const s=e.split("."),a=s[0],u=s.slice(1).join(".");if(s.length===1)(Pr(t)||kt(t)&&db.test(a))&&r(t,a);else{n?.buildGraph&&ii(t[a])&&(t[a]={});const l=t[a];if(!l)return;const d=!!(s.length>1&&db.test(s[1]));kt(l)&&n?.descendArray&&!d?l.forEach(m=>Ef(m,u,r,n)):Ef(l,u,r,n)}}function E$(t,e,r){Ef(t,e,(n,s)=>{n[s]=ym(r)?r(n[s]):r},{buildGraph:!0})}function hb(t,e,r){Ef(t,e,(n,s)=>{if(kt(n)){if(/^\d+$/.test(s))n.splice(parseInt(s),1);else if(r&&r.descendArray)for(const a of n)Pr(a)&&delete a[s]}else Pr(n)&&delete n[s]},r)}const I$=/^\$[a-zA-Z0-9_]+$/;function xa(t){return I$.test(t)}function vI(t){if(fI(t))return Ro(t)?{$regex:t}:{$eq:t};if(hI(t)){if(!Object.keys(t).some(xa))return{$eq:t};if(rs(t,"$regex")){const e={...t};return e.$regex=new RegExp(t.$regex,t.$options),delete e.$options,e}}return t}var ug=(t=>(t[t.CLONE_OFF=0]="CLONE_OFF",t[t.CLONE_INPUT=1]="CLONE_INPUT",t[t.CLONE_OUTPUT=2]="CLONE_OUTPUT",t[t.CLONE_ALL=3]="CLONE_ALL",t))(ug||{});class Ru{#e;#r;#t;constructor(e,r,n){this.#e=e,this.update(r,n)}static init(e,r,n){return e instanceof Ru?new Ru(e.#e,e.root??r,{...e.#t,...n,variables:Object.assign({},e.#t?.variables,n?.variables)}):new Ru(e,r,n)}update(e,r){this.#r=e;const n=Object.assign({},this.#t?.variables,r?.variables);return Object.keys(n).length?this.#t={...r,variables:n}:this.#t=r??{},this}getOptions(){return Object.freeze({...this.#e,context:Oa.from(this.#e.context)})}get root(){return this.#r}get local(){return this.#t}get idKey(){return this.#e.idKey}get collation(){return this.#e?.collation}get processingMode(){return this.#e?.processingMode||0}get useStrictMode(){return this.#e?.useStrictMode}get scriptEnabled(){return this.#e?.scriptEnabled}get useGlobalContext(){return this.#e?.useGlobalContext}get hashFunction(){return this.#e?.hashFunction}get collectionResolver(){return this.#e?.collectionResolver}get jsonSchemaValidator(){return this.#e?.jsonSchemaValidator}get variables(){return this.#e?.variables}get context(){return this.#e?.context}}function gI(t){return t instanceof Ru?t.getOptions():Object.freeze({idKey:"_id",scriptEnabled:!0,useStrictMode:!0,useGlobalContext:!0,processingMode:0,...t,context:t?.context?Oa.from(t?.context):Oa.init()})}class Oa{#e=new Map;constructor(){}static init(){return new Oa}static from(e){const r=Oa.init();return ii(e)||e.#e.forEach((n,s)=>r.addOperators(s,n)),r}addOperators(e,r){this.#e.has(e)||this.#e.set(e,{});for(const[n,s]of Object.entries(r))this.getOperator(e,n)||(this.#e.get(e)[n]=s);return this}getOperator(e,r){return(this.#e.get(e)??{})[r]??null}addAccumulatorOps(e){return this.addOperators("accumulator",e)}addExpressionOps(e){return this.addOperators("expression",e)}addQueryOps(e){return this.addOperators("query",e)}addPipelineOps(e){return this.addOperators("pipeline",e)}addProjectionOps(e){return this.addOperators("projection",e)}addWindowOps(e){return this.addOperators("window",e)}}const bu=Oa.init();function pb(t,e){for(const[r,n]of Object.entries(e)){Xt(ym(n)&&xa(r),`'${r}' is not a valid operator`);const s=If(t,r,null);Xt(!s||n===s,`${r} already exists for '${t}' operators. Cannot change operator function once registered.`)}switch(t){case"accumulator":bu.addAccumulatorOps(e);break;case"expression":bu.addExpressionOps(e);break;case"pipeline":bu.addPipelineOps(e);break;case"projection":bu.addProjectionOps(e);break;case"query":bu.addQueryOps(e);break;case"window":bu.addWindowOps(e);break}}function If(t,e,r){const{context:n,useGlobalContext:s}=r||{},a=n?n.getOperator(t,e):null;return!a&&s?bu.getOperator(t,e):a}function Pi(t,e,r,n){const s=Ru.init(n,t);return r&&xa(r)?_I(t,e,r,s):Ep(t,e,s)}const O$=["$$ROOT","$$CURRENT","$$REMOVE","$$NOW"];function Ep(t,e,r){if(ts(e)&&e.length>0&&e[0]==="$"){if(k$.includes(e))return e;let n=r.root;const s=e.split(".");if(O$.includes(s[0])){switch(s[0]){case"$$ROOT":break;case"$$CURRENT":n=t;break;case"$$REMOVE":n=void 0;break;case"$$NOW":n=new Date;break}e=e.slice(s[0].length+1)}else if(s[0].slice(0,2)==="$$"){n=Object.assign({},r.variables,{this:t},r?.local?.variables);const a=s[0].slice(2);Xt(rs(n,a),`Use of undefined variable: ${a}`),e=e.slice(2)}else e=e.slice(1);return e===""?n:Ms(n,e)}if(kt(e))return e.map(n=>Ep(t,n,r));if(Pr(e)){const n={},s=Object.entries(e);for(const[a,u]of s){if(xa(a))return Xt(s.length==1,"expression must have single operator."),_I(t,u,a,r);n[a]=Ep(t,u,r)}return n}return e}function _I(t,e,r,n){const s=If("expression",r,n);if(s)return s(t,e,n);const a=If("accumulator",r,n);return Xt(!!a,`accumulator '${r}' is not registered.`),kt(t)||(t=Ep(t,e,n),e=null),Xt(kt(t),`arguments must resolve to array for ${r}.`),a(t,e,n)}const k$=["$$KEEP","$$PRUNE","$$DESCEND"];function Of(t){return t instanceof mb?t:new mb(t)}function P$(...t){let e=0;return Of(()=>{for(;e<t.length;){const r=t[e].next();if(!r.done)return r;e++}return{done:!0}})}function D$(t){return!!t&&typeof t=="object"&&t?.next instanceof Function}function R$(t,e){const r=t.slice(e+1);t.splice(e),Array.prototype.push.apply(t,r)}const cg=new Error;function C$(t,e,r){let n=!1,s=-1,a=0;return function(u){try{e:for(;!n;){let l=t();s++;let d=-1;const m=e.length;let y=!1;for(;++d<m;){const g=e[d];switch(g.action){case 0:l=g.func(l,s);break;case 1:if(!g.func(l,s))continue e;break;case 2:--g.count,g.count||(y=!0);break;case 3:--g.count,g.count||R$(e,d);continue e;default:break e}}if(n=y,u)r[a++]=l;else return{value:l,done:!1}}}catch(l){if(l!==cg)throw l}return n=!0,{done:n}}}let mb=class{constructor(e){this.#e=[],this.#r=[],this.isDone=!1;let r;if(e instanceof Function&&(e={next:e}),D$(e)){const n=e;r=()=>{const s=n.next();if(s.done)throw cg;return s.value}}else if(kt(e)){const n=e,s=n.length;let a=0;r=()=>{if(a<s)return n[a++];throw cg}}else if(!(e instanceof Function))throw new Mf("Lazy must be initialized with an array, generator, or function.");this.#t=C$(r,this.#e,this.#r)}#e;#r;#t;push(e,r){return typeof r=="function"?this.#e.push({action:e,func:r}):typeof r=="number"&&this.#e.push({action:e,count:r}),this}next(){return this.#t()}map(e){return this.push(0,e)}filter(e){return this.push(1,e)}take(e){return e>0?this.push(2,e):this}drop(e){return e>0?this.push(3,e):this}transform(e){const r=this;let n;return Of(()=>(n||(n=Of(e(r.value()))),n.next()))}value(){return this.isDone||(this.isDone=this.#t(!0).done),this.#r}each(e){for(;;){const r=this.next();if(r.done)break;if(e(r.value)===!1)return!1}return!0}reduce(e,r){let n=this.next();for(r===void 0&&!n.done&&(r=n.value,n=this.next());!n.done;)r=e(r,n.value),n=this.next();return r}size(){return this.reduce((e,r)=>++e,0)}[Symbol.iterator](){return this}};const $$=(t,e,r)=>t.take(e),wI=(t,e,r)=>r0(e)?t:(SI(e,r),t.map(bI(e,Ru.init(r))));function bI(t,e,r=!0){const n=e.idKey,s=Object.keys(t),a=new Array,u=new Array,l={};for(const S of s){const E=t[S];if(zr(E)||xc(E))E?u.push(S):a.push(S);else if(kt(E))l[S]=D=>E.map(O=>Pi(D,O,null,e.update(D))??null);else if(Pr(E)){const D=Object.keys(E),O=D.length==1?D[0]:"",$=If("projection",O,e);$?O==="$slice"&&!fl(E[O]).every(zr)?l[S]=C=>Pi(C,E,S,e.update(C)):l[S]=C=>$(C,E[O],S,e.update(C)):xa(O)?l[S]=P=>Pi(P,E[O],O,e):(SI(E,e),l[S]=P=>{if(!rs(P,S))return Pi(P,E,null,e);r&&e.update(P);const C=Ms(P,S),B=bI(E,e,!1);return kt(C)?C.map(B):Pr(C)?B(C):B(P)})}else l[S]=ts(E)&&E[0]==="$"?D=>Pi(D,E,S,e):D=>E}const d=Object.keys(l),m=a.includes(n);if(r&&m&&a.length===1&&!u.length&&!d.length)return S=>{const E={...S};return delete E[n],E};const g=r&&!m&&!u.includes(n),b={preserveMissing:!0};return S=>{const E={};if(a.length&&!u.length){sg(E,S);for(const D of a)hb(E,D,{descendArray:!0})}for(const D of u){const O=af(S,D,b)??{};sg(E,O)}u.length&&ag(E);for(const D of d){const O=l[D](S);O===void 0?hb(E,D,{descendArray:!0}):E$(E,D,O)}return g&&rs(S,n)&&(E[n]=Ms(S,n)),E}}function SI(t,e){let r=!1,n=!1;for(const[s,a]of Object.entries(t))Xt(!s.startsWith("$"),"Field names may not start with '$'."),Xt(!s.endsWith(".$"),"Positional projection operator '$' is not supported."),s!==e?.idKey&&(a===0||a===!1?r=!0:(a===1||a===!0)&&(n=!0),Xt(!(r&&n),"Projection cannot have a mix of inclusion and exclusion."))}const A$=(t,e,r)=>t.drop(e),EI=(t,e,r)=>{if(r0(e)||!Pr(e))return t;let n=Ri;const s=r.collation;return Pr(s)&&ts(s.locale)&&(n=T$(s)),t.transform(a=>{const u=Object.keys(e);for(const l of u.reverse()){const d=b$(a,g=>Ms(g,l),r.hashFunction),m=Array.from(d.keys()).sort(n);e[l]===-1&&m.reverse();let y=0;for(const g of m)for(const b of d.get(g))a[y++]=b;Xt(y==a.length,"bug: counter must match collection size.")}return a})},N$={1:"base",2:"accent",3:"variant"};function T$(t){const e={sensitivity:N$[t.strength||3],caseFirst:t.caseFirst==="off"?"false":t.caseFirst||"false",numeric:t.numericOrdering||!1,ignorePunctuation:t.alternate==="shifted"};(t.caseLevel||!1)===!0&&(e.sensitivity==="base"&&(e.sensitivity="case"),e.sensitivity==="accent"&&(e.sensitivity="variant"));const r=new Intl.Collator(t.locale,e);return(n,s)=>{if(!ts(n)||!ts(s))return Ri(n,s);const a=r.compare(n,s);return a<0?-1:a>0?1:0}}const x$={$sort:EI,$skip:A$,$limit:$$};class M${#e;#r;#t;#i;#o={};#n=null;#s=[];constructor(e,r,n,s){this.#e=e,this.#r=r,this.#t=n,this.#i=s}fetch(){if(this.#n)return this.#n;this.#n=Of(this.#e).filter(this.#r);const e=this.#i.processingMode;e&ug.CLONE_INPUT&&this.#n.map(Gc);for(const r of["$sort","$skip","$limit"])rs(this.#o,r)&&(this.#n=x$[r](this.#n,this.#o[r],this.#i));return Object.keys(this.#t).length&&(this.#n=wI(this.#n,this.#t,this.#i)),e&ug.CLONE_OUTPUT&&this.#n.map(Gc),this.#n}fetchAll(){const e=Of([...this.#s]);return this.#s=[],P$(e,this.fetch())}all(){return this.fetchAll().value()}count(){return this.all().length}skip(e){return this.#o.$skip=e,this}limit(e){return this.#o.$limit=e,this}sort(e){return this.#o.$sort=e,this}collation(e){return this.#i={...this.#i,collation:e},this}next(){if(this.#s.length>0)return this.#s.pop();const e=this.fetch().next();if(!e.done)return e.value}hasNext(){if(this.#s.length>0)return!0;const e=this.fetch().next();return e.done?!1:(this.#s.push(e.value),!0)}map(e){return this.all().map(e)}forEach(e){this.all().forEach(e)}[Symbol.iterator](){return this.fetchAll()}}const F$=new Set(Array.from(["$and","$or","$nor","$expr","$jsonSchema"]));class Ma{#e;#r;#t;constructor(e,r){this.#t=Gc(e),this.#r=gI(r),this.#e=[],this.compile()}compile(){Xt(Pr(this.#t),`query criteria must be an object: ${JSON.stringify(this.#t)}`);const e={};for(const[r,n]of Object.entries(this.#t)){if(r==="$where")Xt(this.#r.scriptEnabled,"$where operator requires 'scriptEnabled' option to be true."),Object.assign(e,{field:r,expr:n});else if(F$.has(r))this.processOperator(r,r,n);else{Xt(!xa(r),`unknown top level operator: ${r}`);for(const[s,a]of Object.entries(vI(n)))this.processOperator(r,s,a)}e.field&&this.processOperator(e.field,e.field,e.expr)}}processOperator(e,r,n){const s=If("query",r,this.#r);Xt(!!s,`unknown query operator ${r}`),this.#e.push(s(e,n,this.#r))}test(e){return this.#e.every(r=>r(e))}find(e,r){return new M$(e,n=>this.test(n),r||{},this.#r)}remove(e){return e.reduce((r,n)=>(this.test(n)||r.push(n),r),[])}}const B$=["monday","mon","tuesday","tue","wednesday","wed","thursday","thu","friday","fri","saturday","sat","sunday","sun"];new Set(B$);function _n(t){return(r,n,s)=>{const a={unwrapArray:!0},u=Math.max(1,r.split(".").length-1);return l=>{const d=Ms(l,r,a);return t(d,n,{...s,depth:u})}}}function dl(t){return(e,r,n)=>{const s=Pi(e,r,null,n);return t(...s)}}function n0(t,e,r){return Ji(t,e)||ii(t)&&ii(e)?!0:kt(t)?t.some(n=>Ji(n,e))||mI(t,r?.depth).some(n=>Ji(n,e)):!1}function II(t,e,r){return!n0(t,e,r)}function OI(t,e,r){return ii(t)?e.some(n=>n===null):pI([fl(t),e],r?.hashFunction).length>0}function L$(t,e,r){return!OI(t,e,r)}function kI(t,e,r){return vm(t,e,(n,s)=>Ri(n,s)<0)}function PI(t,e,r){return vm(t,e,(n,s)=>Ri(n,s)<=0)}function DI(t,e,r){return vm(t,e,(n,s)=>Ri(n,s)>0)}function RI(t,e,r){return vm(t,e,(n,s)=>Ri(n,s)>=0)}function j$(t,e,r){return fl(t).some(n=>e.length===2&&n%e[0]===e[1])}function U$(t,e,r){const n=fl(t),s=a=>ts(a)&&Yc(e.exec(a),r?.useStrictMode);return n.some(s)||mI(n,1).some(s)}function z$(t,e,r){if(!kt(t)||!kt(e)||!t.length||!e.length)return!1;let n=!0;for(const s of e){if(!n)break;Pr(s)&&Object.keys(s).includes("$elemMatch")?n=CI(t,s.$elemMatch,r):Ro(s)?n=t.some(a=>typeof a=="string"&&s.test(a)):n=t.some(a=>Ji(s,a))}return n}function q$(t,e,r){return Array.isArray(t)&&t.length===e}function V$(t){return xa(t)&&["$and","$or","$nor"].indexOf(t)===-1}function CI(t,e,r){if(kt(t)&&!r0(t)){let n=u=>u,s=e;Object.keys(e).every(V$)&&(s={temp:e},n=u=>({temp:u}));const a=new Ma(s,r);for(let u=0,l=t.length;u<l;u++)if(a.test(n(t[u])))return!0}return!1}const yb=t=>t===null,K$={array:kt,boolean:xc,bool:xc,date:Qc,number:zr,int:zr,long:zr,double:zr,decimal:zr,null:yb,object:Pr,regexp:Ro,regex:Ro,string:ts,undefined:ii,function:t=>{throw new Mf("unsupported type key `function`.")},1:zr,2:ts,3:Pr,4:kt,6:ii,8:xc,9:Qc,10:yb,11:Ro,16:zr,18:zr,19:zr};function vb(t,e,r){const n=K$[e];return n?n(t):!1}function W$(t,e,r){return kt(e)?e.findIndex(n=>vb(t,n))>=0:vb(t,e)}function vm(t,e,r){return fl(t).some(n=>Sf(n)===Sf(e)&&r(n,e))}const H$=(t,e,r)=>{const n=Pi(t,e,null,r);return Yc(n,r.useStrictMode)&&n.every(s=>Yc(s,r.useStrictMode))},Q$=(t,e,r)=>{const n=fl(e);return n.length==0?!1:(Xt(n.length==1,"Expression $not takes exactly 1 argument"),!Pi(t,n[0],null,r))},Y$=(t,e,r)=>{const n=Pi(t,e,null,r),s=r.useStrictMode;return Yc(n,s)&&n.some(a=>Yc(a,s))},G$=Object.freeze(Object.defineProperty({__proto__:null,$and:H$,$not:Q$,$or:Y$},Symbol.toStringTag,{value:"Module"})),J$=(t,e,r)=>{const n=Pi(t,e,null,r);return Xt(kt(n)&&n.length==2,"$cmp: expression must resolve to array of size 2."),Ri(n[0],n[1])},X$=dl(n0),Z$=dl(DI),eA=dl(RI),tA=dl(kI),rA=dl(PI),nA=dl(II),iA=Object.freeze(Object.defineProperty({__proto__:null,$cmp:J$,$eq:X$,$gt:Z$,$gte:eA,$lt:tA,$lte:rA,$ne:nA},Symbol.toStringTag,{value:"Module"})),gb=(t,e)=>{const r={};return t.split("").forEach((n,s)=>r[n]=e*(s+1)),r};({...gb("ABCDEFGHIKLM",1),...gb("NOPQRSTUVWXY",-1)});const _b={undefined:null,null:null,NaN:NaN,Infinity:new Error,"-Infinity":new Error};function ai(t,e=_b){const r=Object.assign({},_b,e),n=new Set(Object.keys(r));return(s,a,u)=>{const l=Pi(s,a,null,u);if(n.has(`${l}`)){const d=r[`${l}`];if(d instanceof Error)throw new Mf(`cannot apply $${t.name} to -inf, value must in (-inf,inf)`);return d}return t(l)}}ai(Math.acos,{Infinity:1/0,0:new Error});ai(Math.acosh,{Infinity:1/0,0:new Error});ai(Math.asin);ai(Math.asinh,{Infinity:1/0,"-Infinity":-1/0});ai(Math.atan);ai(Math.atanh,{1:1/0,"-1":-1/0});ai(Math.cos);ai(Math.cosh,{"-Infinity":1/0,Infinity:1/0});const sA=Math.PI/180;ai(t=>t*sA,{Infinity:1/0,"-Infinity":1/0});const oA=180/Math.PI;ai(t=>t*oA,{Infinity:1/0,"-Infinity":-1/0});ai(Math.sin);ai(Math.sinh,{"-Infinity":-1/0,Infinity:1/0});ai(Math.tan);const $I=(t,e,r)=>{Xt(kt(e),"Invalid expression: $and expects value to be an Array.");const n=e.map(s=>new Ma(s,r));return s=>n.every(a=>a.test(s))},i0=(t,e,r)=>{Xt(kt(e),"Invalid expression. $or expects value to be an Array");const n=e.map(s=>new Ma(s,r));return s=>n.some(a=>a.test(s))},AI=(t,e,r)=>{Xt(kt(e),"Invalid expression. $nor expects value to be an array.");const n=i0("$or",e,r);return s=>!n(s)},NI=(t,e,r)=>{const n={};n[t]=vI(e);const s=new Ma(n,r);return a=>!s.test(a)},TI=_n(n0),xI=_n(DI),MI=_n(RI),FI=_n(OI),BI=_n(kI),LI=_n(PI),jI=_n(II),UI=_n(L$);function aA(t,e,r){return n=>Pi(n,e,null,r)}function uA(t,e,r){if(!r?.jsonSchemaValidator)throw new Mf("Missing option 'jsonSchemaValidator'. Configure to use '$jsonSchema' operator.");const n=r?.jsonSchemaValidator(e);return s=>n(s)}const zI=_n(j$),qI=_n(U$);function cA(t,e,r){Xt(r.scriptEnabled,"$where operator requires 'scriptEnabled' option to be true");const n=e;return Xt(ym(n),"$where only accepts a Function object"),s=>Yc(n.call(s),r?.useStrictMode)}const lA=_n(z$),VI=_n(CI),KI=_n(q$),WI=(t,e,r)=>{const n=t.includes("."),s=!!e;return!n||t.match(/\.\d+$/)?a=>Ms(a,t)!==void 0===s:a=>{const u=af(a,t,{preserveIndex:!0}),l=Ms(u,t.substring(0,t.lastIndexOf(".")));return kt(l)?l.some(d=>d!==void 0)===s:l!==void 0===s}},HI=_n(W$);var wb=!1;function fA(t){return wb||(pb("pipeline",{$sort:EI,$project:wI}),pb("query",{$and:$I,$eq:TI,$elemMatch:VI,$exists:WI,$gt:xI,$gte:MI,$in:FI,$lt:BI,$lte:LI,$ne:jI,$nin:UI,$mod:zI,$nor:AI,$not:NI,$or:i0,$regex:qI,$size:KI,$type:HI}),wb=!0),new Ma(t)}function Mc(t,e){var r=on(t.primaryKey);e=Kt(e);var n=yn(e);if(typeof n.skip!="number"&&(n.skip=0),n.selector?(n.selector=n.selector,Object.entries(n.selector).forEach(([g,b])=>{(typeof b!="object"||b===null)&&(n.selector[g]={$eq:b})})):n.selector={},n.index){var s=qc(n.index);s.includes(r)||s.push(r),n.index=s}if(n.sort){var y=n.sort.find(g=>OR(g)===r);y||(n.sort=n.sort.slice(0),n.sort.push({[r]:"asc"}))}else if(n.index)n.sort=n.index.map(g=>({[g]:"asc"}));else{if(t.indexes){var a=new Set;Object.entries(n.selector).forEach(([g,b])=>{var S=!1;typeof b=="object"&&b!==null?S=!!Object.keys(b).find(E=>t0.has(E)):S=!0,S&&a.add(g)});var u=-1,l;t.indexes.forEach(g=>{var b=gp(g)?g:[g],S=b.findIndex(E=>!a.has(E));S>0&&S>u&&(u=S,l=b)}),l&&(n.sort=l.map(g=>({[g]:"asc"})))}if(!n.sort)if(t.indexes&&t.indexes.length>0){var d=t.indexes[0],m=gp(d)?d:[d];n.sort=m.map(g=>({[g]:"asc"}))}else n.sort=[{[r]:"asc"}]}return n}function s0(t,e){if(!e.sort)throw Ve("SNH",{query:e});var r=[];e.sort.forEach(s=>{var a=Object.keys(s)[0],u=Object.values(s)[0];r.push({key:a,direction:u,getValueFn:EE(a)})});var n=(s,a)=>{for(var u=0;u<r.length;++u){var l=r[u],d=l.getValueFn(s),m=l.getValueFn(a);if(d!==m){var y=l.direction==="asc"?Ri(d,m):Ri(m,d);return y}}};return n}function gm(t,e){if(!e.sort)throw Ve("SNH",{query:e});var r=fA(e.selector),n=s=>r.test(s);return n}async function kc(t,e){var r=await t.exec();if(!r)return null;if(Array.isArray(r))return Promise.all(r.map(s=>e(s)));if(r instanceof Map)return Promise.all([...r.values()].map(s=>e(s)));var n=await e(r);return n}function Bf(t,e){if(!e.sort)throw Ve("SNH",{query:e});var r=c$(t,e);return{query:e,queryPlan:r}}var dA="_rxdb_internal";async function hl(t,e){var r=await t.findDocumentsById([e],!1),n=r[0];if(n)return n}async function Jc(t,e,r){var n=await t.bulkWrite([e],r);if(n.error.length>0){var s=n.error[0];throw s}else{var a=on(t.schema.primaryKey),u=Ci(a,[e],n),l=u[0];return l}}function hA(t,e){var r=hl(t,e),n=t.changeStream().pipe(ur(s=>s.events.find(a=>a.documentId===e)),Gt(s=>!!s),ur(s=>Promise.resolve(Ze(s).documentData)),xf(r),_f(s=>s),Gt(s=>!!s));return n}function kf(t){return Object.assign({},...t.filter(e=>!!e))}function Ip(t,e,r,n){if(n)throw n.status===409?Ve("CONFLICT",{collection:t.name,id:e,writeError:n,data:r}):n.status===422?Ve("VD2",{collection:t.name,id:e,writeError:n,data:r}):n}function QI(t,e,r,n,s,a,u){for(var l=!!t.schema.attachments,d=[],m=[],y=[],g=al(10),b={id:g,events:[],checkpoint:null,context:s},S=b.events,E=[],D=[],O=[],$=r.size>0,P,C=n.length,B=function(){var x=n[k],U=x.document,ie=x.previous,Y=U[e],_e=U._deleted,le=ie&&ie._deleted,me=void 0;$&&(me=r.get(Y));var ke;if(me){var nt=me._rev;if(!ie||ie&&nt!==ie._rev){var et={isError:!0,status:409,documentId:Y,writeRow:x,documentInDb:me};return y.push(et),1}var Ee=l?fv(x):x;l&&(_e?ie&&Object.keys(ie._attachments).forEach(Q=>{D.push({documentId:Y,attachmentId:Q,digest:Ze(ie)._attachments[Q].digest})}):(Object.entries(U._attachments).find(([Q,M])=>{var A=ie?ie._attachments[Q]:void 0;return!A&&!M.data&&(ke={documentId:Y,documentInDb:me,isError:!0,status:510,writeRow:x,attachmentId:Q}),!0}),ke||Object.entries(U._attachments).forEach(([Q,M])=>{var A=ie?ie._attachments[Q]:void 0;if(!A)E.push({documentId:Y,attachmentId:Q,attachmentData:M,digest:M.digest});else{var q=Ee.document._attachments[Q].digest;M.data&&A.digest!==q&&O.push({documentId:Y,attachmentId:Q,attachmentData:M,digest:M.digest})}}))),ke?y.push(ke):(l?m.push(fv(Ee)):m.push(Ee),P=Ee);var je=null,F=null,j=null;if(le&&!_e)j="INSERT",je=l?$s(U):U;else if(ie&&!le&&!_e)j="UPDATE",je=l?$s(U):U,F=ie;else if(_e)j="DELETE",je=Ze(U),F=ie;else throw Ve("SNH",{args:{writeRow:x}});var ae={documentId:Y,documentData:je,previousDocumentData:F,operation:j};S.push(ae)}else{var Pe=!!_e;if(l&&Object.entries(U._attachments).forEach(([Q,M])=>{M.data?E.push({documentId:Y,attachmentId:Q,attachmentData:M,digest:M.digest}):(ke={documentId:Y,isError:!0,status:510,writeRow:x,attachmentId:Q},y.push(ke))}),ke||(l?d.push(fv(x)):d.push(x),P=x),!Pe){var We={documentId:Y,operation:"INSERT",documentData:l?$s(U):U,previousDocumentData:l&&ie?$s(ie):ie};S.push(We)}}},k=0;k<C;k++)B();return{bulkInsertDocs:d,bulkUpdateDocs:m,newestRow:P,errors:y,eventBulk:b,attachmentsAdd:E,attachmentsRemove:D,attachmentsUpdate:O}}function fv(t){return{previous:t.previous,document:$s(t.document)}}function pA(t){return atob(t).length}function mA(t){var e=t.data;if(!e)return t;var r={length:pA(e),digest:t.digest,type:t.type};return r}function $s(t){if(!t._attachments||Object.keys(t._attachments).length===0)return t;var e=Kt(t);return e._attachments={},Object.entries(t._attachments).forEach(([r,n])=>{e._attachments[r]=mA(n)}),e}function Lf(t){return Object.assign({},t,{_meta:Kt(t._meta)})}function o0(t,e,r){Jt.deepFreezeWhenDevMode(r);var n=on(e.schema.primaryKey),s={originalStorageInstance:e,schema:e.schema,internals:e.internals,collectionName:e.collectionName,databaseName:e.databaseName,options:e.options,async bulkWrite(a,u){for(var l=t.token,d=new Array(a.length),m=vn(),y=0;y<a.length;y++){var g=a[y],b=Lf(g.document);b._meta.lwt=m;var S=g.previous;b._rev=No(l,S),d[y]={document:b,previous:S}}Mn("preStorageWrite",{storageInstance:this.originalStorageInstance,rows:d});var E=await t.lockedRun(()=>e.bulkWrite(d,u)),D={error:[]};JI.set(D,d);var O=E.error.length===0?[]:E.error.filter(x=>x.status===409&&!x.writeRow.previous&&!x.writeRow.document._deleted&&Ze(x.documentInDb)._deleted?!0:(D.error.push(x),!1));if(O.length>0){var $=new Set,P=O.map(x=>($.add(x.documentId),{previous:x.documentInDb,document:Object.assign({},x.writeRow.document,{_rev:No(t.token,x.documentInDb)})})),C=await t.lockedRun(()=>e.bulkWrite(P,u));Au(D.error,C.error);var B=Ci(n,d,D,$),k=Ci(n,P,C);return Au(B,k),D}return D},query(a){return t.lockedRun(()=>e.query(a))},count(a){return t.lockedRun(()=>e.count(a))},findDocumentsById(a,u){return t.lockedRun(()=>e.findDocumentsById(a,u))},getAttachmentData(a,u,l){return t.lockedRun(()=>e.getAttachmentData(a,u,l))},getChangedDocumentsSince:e.getChangedDocumentsSince?(a,u)=>t.lockedRun(()=>e.getChangedDocumentsSince(Ze(a),u)):void 0,cleanup(a){return t.lockedRun(()=>e.cleanup(a))},remove(){return t.storageInstances.delete(s),t.lockedRun(()=>e.remove())},close(){return t.storageInstances.delete(s),t.lockedRun(()=>e.close())},changeStream(){return e.changeStream()}};return t.storageInstances.add(s),s}function YI(t){if(t.schema.keyCompression)throw Ve("UT5",{args:{params:t}});if(Op(t.schema))throw Ve("UT6",{args:{params:t}});if(t.schema.attachments&&t.schema.attachments.compression)throw Ve("UT7",{args:{params:t}})}function Op(t){return!!(t.encrypted&&t.encrypted.length>0||t.attachments&&t.attachments.encrypted)}function yA(t,e,r){var n=on(t.schema.primaryKey),s=r?r.lwt:qg,a=r?r.id:"";return Mc(t.schema,{selector:{$or:[{"_meta.lwt":{$gt:s}},{"_meta.lwt":{$eq:s},[n]:{$gt:r?a:""}}],"_meta.lwt":{$gte:s}},sort:[{"_meta.lwt":"asc"},{[n]:"asc"}],skip:0,limit:e})}async function GI(t,e,r){if(t.getChangedDocumentsSince)return t.getChangedDocumentsSince(e,r);var n=on(t.schema.primaryKey),s=Bf(t.schema,yA(t,e,r)),a=await t.query(s),u=a.documents,l=bR(u);return{documents:u,checkpoint:l?{id:l[n],lwt:l._meta.lwt}:r||{id:"",lwt:0}}}var JI=new WeakMap,vA=new WeakMap;function Ci(t,e,r,n){return nn(vA,r,()=>{var s=[],a=JI.get(r);if(a||(a=e),r.error.length>0||n){for(var u=n||new Set,l=0;l<r.error.length;l++){var d=r.error[l];u.add(d.documentId)}for(var m=0;m<a.length;m++){var y=a[m].document;u.has(y[t])||s.push($s(y))}}else{s.length=e.length-r.error.length;for(var g=0;g<a.length;g++){var b=a[g].document;s[g]=$s(b)}}return s})}var XI=(function(){function t(r,n,s,a){this.queueByDocId=new Map,this.isRunning=!1,this.storageInstance=r,this.primaryPath=n,this.preWrite=s,this.postWrite=a}var e=t.prototype;return e.addWrite=function(n,s){var a=n[this.primaryPath],u=nn(this.queueByDocId,a,()=>[]),l=new Promise((d,m)=>{var y={lastKnownDocumentState:n,modifier:s,resolve:d,reject:m};Ze(u).push(y),this.triggerRun()});return l},e.triggerRun=async function(){if(!(this.isRunning===!0||this.queueByDocId.size===0)){this.isRunning=!0;var n=[],s=this.queueByDocId;this.queueByDocId=new Map,await Promise.all(Array.from(s.entries()).map(async([u,l])=>{var d=gA(l.map(g=>g.lastKnownDocumentState)),m=d;for(var y of l)try{m=await y.modifier(yn(m))}catch(g){y.reject(g),y.reject=()=>{},y.resolve=()=>{}}try{await this.preWrite(m,d)}catch(g){l.forEach(b=>b.reject(g));return}n.push({previous:d,document:m})}));var a=n.length>0?await this.storageInstance.bulkWrite(n,"incremental-write"):{error:[]};return await Promise.all(Ci(this.primaryPath,n,a).map(u=>{var l=u[this.primaryPath];this.postWrite(u);var d=Wc(s,l);d.forEach(m=>m.resolve(u))})),a.error.forEach(u=>{var l=u.documentId,d=Wc(s,l),m=Vc(u);if(m){var y=nn(this.queueByDocId,l,()=>[]);d.reverse().forEach(b=>{b.lastKnownDocumentState=Ze(m.documentInDb),Ze(y).unshift(b)})}else{var g=PE(u);d.forEach(b=>b.reject(g))}}),this.isRunning=!1,this.triggerRun()}},t})();function bb(t){var e=async r=>{var n=kR(r);n._deleted=r._deleted;var s=await t(n),a=Object.assign({},s,{_meta:r._meta,_attachments:r._attachments,_rev:r._rev,_deleted:typeof s._deleted<"u"?s._deleted:r._deleted});return typeof a._deleted>"u"&&(a._deleted=!1),a};return e}function gA(t){var e=t[0],r=ba(e._rev);return t.forEach(n=>{var s=ba(n._rev);s>r&&(e=n,r=s)}),e}var _m={get primaryPath(){var t=this;if(t.isInstanceOfRxDocument)return t.collection.schema.primaryPath},get primary(){var t=this;if(t.isInstanceOfRxDocument)return t._data[t.primaryPath]},get revision(){var t=this;if(t.isInstanceOfRxDocument)return t._data._rev},get deleted$(){var t=this;if(t.isInstanceOfRxDocument)return t.$.pipe(ur(e=>e._data._deleted))},get deleted$$(){var t=this,e=t.collection.database.getReactivityFactory();return e.fromObservable(t.deleted$,t.getLatest().deleted,t.collection.database)},get deleted(){var t=this;if(t.isInstanceOfRxDocument)return t._data._deleted},getLatest(){var t=this.collection._docCache.getLatestDocumentData(this.primary);return this.collection._docCache.getCachedRxDocument(t)},get $(){var t=this,e=this.primary;return t.collection.eventBulks$.pipe(Gt(r=>!r.isLocal),ur(r=>r.events.find(n=>n.documentId===e)),Gt(r=>!!r),ur(r=>uI(Ze(r))),xf(t.collection._docCache.getLatestDocumentData(e)),Ia((r,n)=>r._rev===n._rev),ur(r=>this.collection._docCache.getCachedRxDocument(r)),ko(Oo))},get $$(){var t=this,e=t.collection.database.getReactivityFactory();return e.fromObservable(t.$,t.getLatest()._data,t.collection.database)},get$(t){if(Jt.isDevMode()){if(t.includes(".item."))throw Ve("DOC1",{path:t});if(t===this.primaryPath)throw Ve("DOC2");if(this.collection.schema.finalFields.includes(t))throw Ve("DOC3",{path:t});var e=To(this.collection.schema.jsonSchema,t);if(!e)throw Ve("DOC4",{path:t})}return this.$.pipe(ur(r=>Sa(r,t)),Ia())},get$$(t){var e=this.get$(t),r=this.collection.database.getReactivityFactory();return r.fromObservable(e,this.getLatest().get(t),this.collection.database)},populate(t){var e=To(this.collection.schema.jsonSchema,t),r=this.get(t);if(!r)return Wg;if(!e)throw Ve("DOC5",{path:t});if(!e.ref)throw Ve("DOC6",{path:t,schemaObj:e});var n=this.collection.database.collections[e.ref];if(!n)throw Ve("DOC7",{ref:e.ref,path:t,schemaObj:e});return e.type==="array"?n.findByIds(r).exec().then(s=>{var a=s.values();return Array.from(a)}):n.findOne(r).exec()},get(t){return tO(this,t)},toJSON(t=!1){if(t)return Jt.deepFreezeWhenDevMode(this._data);var e=Kt(this._data);return delete e._rev,delete e._attachments,delete e._deleted,delete e._meta,Jt.deepFreezeWhenDevMode(e)},toMutableJSON(t=!1){return yn(this.toJSON(t))},update(t){throw Yt("update")},incrementalUpdate(t){throw Yt("update")},updateCRDT(t){throw Yt("crdt")},putAttachment(){throw Yt("attachments")},putAttachmentBase64(){throw Yt("attachments")},getAttachment(){throw Yt("attachments")},allAttachments(){throw Yt("attachments")},get allAttachments$(){throw Yt("attachments")},async modify(t,e){var r=this._data,n=await bb(t)(r);return this._saveData(n,r)},incrementalModify(t,e){return this.collection.incrementalWriteQueue.addWrite(this._data,bb(t)).then(r=>this.collection._docCache.getCachedRxDocument(r))},patch(t){var e=this._data,r=yn(e);return Object.entries(t).forEach(([n,s])=>{r[n]=s}),this._saveData(r,e)},incrementalPatch(t){return this.incrementalModify(e=>(Object.entries(t).forEach(([r,n])=>{e[r]=n}),e))},async _saveData(t,e){if(t=Kt(t),this._data._deleted)throw Ve("DOC11",{id:this.primary,document:this});await eO(this.collection,t,e);var r=[{previous:e,document:t}],n=await this.collection.storageInstance.bulkWrite(r,"rx-document-save-data"),s=n.error[0];return Ip(this.collection,this.primary,t,s),await this.collection._runHooks("post","save",t,this),this.collection._docCache.getCachedRxDocument(Ci(this.collection.schema.primaryPath,r,n)[0])},async remove(){if(this.deleted)return Promise.reject(Ve("DOC13",{document:this,id:this.primary}));var t=await this.collection.bulkRemove([this]);if(t.error.length>0){var e=t.error[0];Ip(this.collection,this.primary,this._data,e)}return t.success[0]},incrementalRemove(){return this.incrementalModify(async t=>(await this.collection._runHooks("pre","remove",t,this),t._deleted=!0,t)).then(async t=>(await this.collection._runHooks("post","remove",t._data,t),t))},close(){throw Ve("DOC14")}};function ZI(t=_m){var e=function(n,s){this.collection=n,this._data=s,this._propertyCache=new Map,this.isInstanceOfRxDocument=!0};return e.prototype=t,e}function _A(t,e,r){var n=new t(e,r);return Mn("createRxDocument",n),n}function eO(t,e,r){return e._meta=Object.assign({},r._meta,e._meta),Jt.isDevMode()&&t.schema.validateChange(r,e),t._runHooks("pre","save",e,r)}function tO(t,e){return nn(t._propertyCache,e,()=>{var r=Sa(t._data,e);if(typeof r!="object"||r===null||Array.isArray(r))return Jt.deepFreezeWhenDevMode(r);var n=new Proxy(Kt(r),{get(s,a){if(typeof a!="string")return s[a];var u=a.charAt(a.length-1);if(u==="$")if(a.endsWith("$$")){var l=a.slice(0,-2);return t.get$$(nf(e+"."+l))}else{var d=a.slice(0,-1);return t.get$(nf(e+"."+d))}else if(u==="_"){var m=a.slice(0,-1);return t.populate(nf(e+"."+m))}else{var y=s[a];return typeof y=="number"||typeof y=="string"||typeof y=="boolean"?y:tO(t,nf(e+"."+a))}}});return n})}function a0(t){return t[t.length-1]}function wA(t){const e=typeof t;return t!==null&&(e==="object"||e==="function")}function Sb(t,e,r){if(Array.isArray(e)&&(e=e.join(".")),!wA(t)||typeof e!="string")return t;const n=e.split(".");if(n.length===0)return r;for(let s=0;s<n.length;s++){const a=n[s];if(bA(t,a)?t=s===n.length-1?void 0:null:t=t[a],t==null){if(s!==n.length-1)return r;break}}return t===void 0?r:t}function bA(t,e){if(typeof e!="number"&&Array.isArray(t)){const r=Number.parseInt(e,10);return Number.isInteger(r)&&t[r]===t[e]}return!1}const rO=t=>!!t.queryParams.limit,SA=t=>t.queryParams.limit===1,EA=t=>!!(t.queryParams.skip&&t.queryParams.skip>0),IA=t=>t.changeEvent.operation==="DELETE",OA=t=>t.changeEvent.operation==="INSERT",kA=t=>t.changeEvent.operation==="UPDATE",PA=t=>rO(t)&&t.previousResults.length>=t.queryParams.limit,DA=t=>{const e=t.queryParams.sortFields,r=t.changeEvent.previous,n=t.changeEvent.doc;if(!n)return!1;if(!r)return!0;for(let s=0;s<e.length;s++){const a=e[s],u=Sb(r,a),l=Sb(n,a);if(u!==l)return!0}return!1},RA=t=>{const e=t.changeEvent.id;if(t.keyDocumentMap)return t.keyDocumentMap.has(e);{const r=t.queryParams.primaryKey,n=t.previousResults;for(let s=0;s<n.length;s++)if(n[s][r]===e)return!0;return!1}},CA=t=>{const e=t.previousResults[0];return!!(e&&e[t.queryParams.primaryKey]===t.changeEvent.id)},$A=t=>{const e=a0(t.previousResults);return!!(e&&e[t.queryParams.primaryKey]===t.changeEvent.id)},AA=t=>{const e=t.changeEvent.previous;if(!e)return!1;const r=t.previousResults[0];return r?r[t.queryParams.primaryKey]===t.changeEvent.id?!0:t.queryParams.sortComparator(e,r)<0:!1},NA=t=>{const e=t.changeEvent.previous;if(!e)return!1;const r=a0(t.previousResults);return r?r[t.queryParams.primaryKey]===t.changeEvent.id?!0:t.queryParams.sortComparator(e,r)>0:!1},TA=t=>{const e=t.changeEvent.doc;if(!e)return!1;const r=t.previousResults[0];return r?r[t.queryParams.primaryKey]===t.changeEvent.id?!0:t.queryParams.sortComparator(e,r)<0:!1},xA=t=>{const e=t.changeEvent.doc;if(!e)return!1;const r=a0(t.previousResults);return r?r[t.queryParams.primaryKey]===t.changeEvent.id?!0:t.queryParams.sortComparator(e,r)>0:!1},MA=t=>{const e=t.changeEvent.previous;return e?t.queryParams.queryMatcher(e):!1},FA=t=>{const e=t.changeEvent.doc;return e?t.queryParams.queryMatcher(e):!1},BA=t=>t.previousResults.length===0,LA={0:OA,1:kA,2:IA,3:rO,4:SA,5:EA,6:BA,7:PA,8:CA,9:$A,10:DA,11:RA,12:AA,13:NA,14:TA,15:xA,16:MA,17:FA};function nO(t,e,r,n){var s=t.length,a=s-1,u=0;if(s===0)return t.push(e),0;for(var l;n<=a;)u=n+(a-n>>1),l=t[u],r(l,e)<=0?n=u+1:a=u-1;return r(l,e)<=0&&u++,t.splice(u,0,e),u}const jA=t=>{},u0=t=>{t.previousResults.unshift(t.changeEvent.doc),t.keyDocumentMap&&t.keyDocumentMap.set(t.changeEvent.id,t.changeEvent.doc)},c0=t=>{t.previousResults.push(t.changeEvent.doc),t.keyDocumentMap&&t.keyDocumentMap.set(t.changeEvent.id,t.changeEvent.doc)},l0=t=>{const e=t.previousResults.shift();t.keyDocumentMap&&e&&t.keyDocumentMap.delete(e[t.queryParams.primaryKey])},f0=t=>{const e=t.previousResults.pop();t.keyDocumentMap&&e&&t.keyDocumentMap.delete(e[t.queryParams.primaryKey])},UA=t=>{l0(t),c0(t)},zA=t=>{f0(t),u0(t)},qA=t=>{l0(t),u0(t)},VA=t=>{f0(t),c0(t)},iO=t=>{t.keyDocumentMap&&t.keyDocumentMap.delete(t.changeEvent.id);const e=t.queryParams.primaryKey,r=t.previousResults;for(let n=0;n<r.length;n++)if(r[n][e]===t.changeEvent.id){r.splice(n,1);break}},KA=t=>{const e=t.changeEvent.doc,r=t.queryParams.primaryKey,n=t.previousResults;for(let s=0;s<n.length;s++)if(n[s][r]===t.changeEvent.id){n[s]=e,t.keyDocumentMap&&t.keyDocumentMap.set(t.changeEvent.id,e);break}},WA=t=>{const e={_id:"wrongHuman"+new Date().getTime()};t.previousResults.length=0,t.previousResults.push(e),t.keyDocumentMap&&(t.keyDocumentMap.clear(),t.keyDocumentMap.set(e._id,e))},sO=t=>{const e=t.changeEvent.id,r=t.changeEvent.doc;if(t.keyDocumentMap){if(t.keyDocumentMap.has(e))return;t.keyDocumentMap.set(e,r)}else if(t.previousResults.find(s=>s[t.queryParams.primaryKey]===e))return;nO(t.previousResults,r,t.queryParams.sortComparator,0)},HA=t=>{iO(t),sO(t)},QA=t=>{throw new Error("Action runFullQueryAgain must be implemented by yourself")},YA=t=>{throw new Error("Action unknownAction should never be called")},GA=["doNothing","insertFirst","insertLast","removeFirstItem","removeLastItem","removeFirstInsertLast","removeLastInsertFirst","removeFirstInsertFirst","removeLastInsertLast","removeExisting","replaceExisting","alwaysWrong","insertAtSortPosition","removeExistingAndInsertAtSortPosition","runFullQueryAgain","unknownAction"],JA={doNothing:jA,insertFirst:u0,insertLast:c0,removeFirstItem:l0,removeLastItem:f0,removeFirstInsertLast:UA,removeLastInsertFirst:zA,removeFirstInsertFirst:qA,removeLastInsertLast:VA,removeExisting:iO,replaceExisting:KA,alwaysWrong:WA,insertAtSortPosition:sO,removeExistingAndInsertAtSortPosition:HA,runFullQueryAgain:QA,unknownAction:YA},XA=40;function dv(t){return t.charCodeAt(0)-XA}function ZA(t){return t?"1":"0"}function Eb(t,e){const r=[];for(let n=0,s=t.length;n<s;n+=e)r.push(t.substring(n,n+e));return r}function eN(t){const e=new Map,n=2+parseInt(t.charAt(0)+t.charAt(1),10)*2,s=t.substring(2,n),a=Eb(s,2);for(let D=0;D<a.length;D++){const O=a[D],$=O.charAt(0),P=dv(O.charAt(1));e.set($,P)}const u=t.substring(n,t.length-3),l=Eb(u,4);for(let D=0;D<l.length;D++){const O=l[D],$=O.charAt(0),P=O.charAt(1),C=O.charAt(2),B=dv(O.charAt(3));if(!e.has(P))throw new Error("missing node with id "+P);if(!e.has(C))throw new Error("missing node with id "+C);const k=e.get(P),x=e.get(C),U={l:B,0:k,1:x};e.set($,U)}const d=t.slice(-3),m=d.charAt(0),y=d.charAt(1),g=dv(d.charAt(2)),b=e.get(m),S=e.get(y);return{l:g,0:b,1:S}}function tN(t,e,r){let n=t,s=t.l;for(;;){const a=e[s](r),u=ZA(a);if(n=n[u],typeof n=="number"||typeof n=="string")return n;s=n.l}}const rN="14a1b,c+d2e5f0g/h.i4j*k-l)m(n6oeh6pnm6qen6ril6snh6tin6ubo9vce9wmh9xns9yne9zmi9{cm9|ad9}cp9~aq9ae9bf9bq9cg9ck9cn9nd9np9nq9nf9ng9nm9nk9mr9ms9mt9mj9mk9ml9mn9mc8{8}888mn88m8m4z4w4z44444m4v7yn77~777n777m77m7m7m5m5m55m555m55m5m552|2u2222x222|222222n2n222n2/an/bn/cn///////////,cn,,,,,,,ac0bc00000000000m-m-----------3333(((++++11*m*.";let hv;function nN(){return hv||(hv=eN(rN)),hv}const iN=t=>tN(nN(),LA,t);function sN(t){const e=iN(t);return GA[e]}function oN(t,e,r,n,s){const a=JA[t];return a({queryParams:e,changeEvent:r,previousResults:n,keyDocumentMap:s}),n}function aN(t,e){return!e.sort||e.sort.length===0?[t]:e.sort.map(r=>Object.keys(r)[0])}var uN=new WeakMap;function cN(t){return nn(uN,t,()=>{var e=t.collection,r=Mc(e.storageInstance.schema,yn(t.mangoQuery)),n=e.schema.primaryPath,s=s0(e.schema.jsonSchema,r),a=(m,y)=>{var g={docA:m,docB:y};return s(g.docA,g.docB)},u=gm(e.schema.jsonSchema,r),l=m=>{var y={doc:m};return u(y.doc)},d={primaryKey:t.collection.schema.primaryPath,skip:r.skip,limit:r.limit,sortFields:aN(n,r),sortComparator:a,queryMatcher:l};return d})}function lN(t,e){if(!t.collection.database.eventReduce)return{runFullQueryAgain:!0};for(var r=cN(t),n=Ze(t._result).docsData.slice(0),s=Ze(t._result).docsDataMap,a=!1,u=[],l=0;l<e.length;l++){var d=e[l],m=XC(d);m&&u.push(m)}var y=u.find(g=>{var b={queryParams:r,changeEvent:g,previousResults:n,keyDocumentMap:s},S=sN(b);if(S==="runFullQueryAgain")return!0;if(S!=="doNothing")return a=!0,oN(S,r,g,n,s),!1});return y?{runFullQueryAgain:!0}:{runFullQueryAgain:!1,changed:a,newResults:n}}var fN=(function(){function t(){this._map=new Map}var e=t.prototype;return e.getByQuery=function(n){var s=n.toString(),a=nn(this._map,s,()=>n);return a},t})();function dN(){return new fN}function Ib(t,e){e.uncached=!0;var r=e.toString();t._map.delete(r)}function hN(t){return t.refCount$.observers.length}var pN=100,mN=30*1e3,yN=(t,e)=>(r,n)=>{if(!(n._map.size<t)){var s=vn()-e,a=[],u=Array.from(n._map.values());for(var l of u)if(!(hN(l)>0)){if(l._lastEnsureEqual===0&&l._creationTime<s){Ib(n,l);continue}a.push(l)}var d=a.length-t;if(!(d<=0)){var m=a.sort((g,b)=>g._lastEnsureEqual-b._lastEnsureEqual),y=m.slice(0,d);y.forEach(g=>Ib(n,g))}}},oO=yN(pN,mN),pv=new WeakSet;function vN(t){pv.has(t)||(pv.add(t),MR().then(()=>BR(200)).then(()=>{t.closed||t.cacheReplacementPolicy(t,t._queryCache),pv.delete(t)}))}var aO=(function(){function t(r,n,s){this.cacheItemByDocId=new Map,this.tasks=new Set,this.registry=typeof FinalizationRegistry=="function"?new FinalizationRegistry(a=>{var u=a.docId,l=this.cacheItemByDocId.get(u);l&&(l[0].delete(a.revisionHeight+a.lwt+""),l[0].size===0&&this.cacheItemByDocId.delete(u))}):void 0,this.primaryPath=r,this.changes$=n,this.documentCreator=s,n.subscribe(a=>{this.tasks.add(()=>{for(var u=this.cacheItemByDocId,l=0;l<a.length;l++){var d=a[l],m=u.get(d.documentId);if(m){var y=d.documentData;y||(y=d.previousDocumentData),m[1]=y}}}),this.tasks.size<=1&&Tf().then(()=>{this.processTasks()})})}var e=t.prototype;return e.processTasks=function(){if(this.tasks.size!==0){var n=Array.from(this.tasks);n.forEach(s=>s()),this.tasks.clear()}},e.getLatestDocumentData=function(n){this.processTasks();var s=Wc(this.cacheItemByDocId,n);return s[1]},e.getLatestDocumentDataIfExists=function(n){this.processTasks();var s=this.cacheItemByDocId.get(n);if(s)return s[1]},Aa(t,[{key:"getCachedRxDocuments",get:function(){var r=Ob(this);return Po(this,"getCachedRxDocuments",r)}},{key:"getCachedRxDocument",get:function(){var r=Ob(this);return Po(this,"getCachedRxDocument",n=>r([n])[0])}}])})();function Ob(t){var e=t.primaryPath,r=t.cacheItemByDocId,n=t.registry,s=Jt.deepFreezeWhenDevMode,a=t.documentCreator,u=l=>{for(var d=new Array(l.length),m=[],y=0;y<l.length;y++){var g=l[y],b=g[e],S=ba(g._rev),E=void 0,D=void 0,O=r.get(b);O?(E=O[0],D=E.get(S+g._meta.lwt+"")):(E=new Map,O=[E,g],r.set(b,O));var $=D?D.deref():void 0;$||(g=s(g),$=a(g),E.set(S+g._meta.lwt+"",_N($)),n&&m.push($)),d[y]=$}return m.length>0&&n&&(t.tasks.add(()=>{for(var P=0;P<m.length;P++){var C=m[P];n.register(C,{docId:C.primary,revisionHeight:ba(C.revision),lwt:C._data._meta.lwt})}}),t.tasks.size<=1&&Tf().then(()=>{t.processTasks()})),d};return u}function lg(t,e){var r=t.getCachedRxDocuments;return r(e)}var gN=typeof WeakRef=="function",_N=gN?wN:bN;function wN(t){return new WeakRef(t)}function bN(t){return{deref(){return t}}}var kb=(function(){function t(r,n,s){this.time=vn(),this.query=r,this.count=s,this.documents=lg(this.query.collection._docCache,n)}var e=t.prototype;return e.getValue=function(n){var s=this.query.op;if(s==="count")return this.count;if(s==="findOne"){var a=this.documents.length===0?null:this.documents[0];if(!a&&n)throw Ve("QU10",{collection:this.query.collection.name,query:this.query.mangoQuery,op:s});return a}else return s==="findByIds"?this.docsMap:this.documents.slice(0)},Aa(t,[{key:"docsData",get:function(){return Po(this,"docsData",this.documents.map(r=>r._data))}},{key:"docsDataMap",get:function(){var r=new Map;return this.documents.forEach(n=>{r.set(n.primary,n._data)}),Po(this,"docsDataMap",r)}},{key:"docsMap",get:function(){for(var r=new Map,n=this.documents,s=0;s<n.length;s++){var a=n[s];r.set(a.primary,a)}return Po(this,"docsMap",r)}}])})(),SN=0,EN=function(){return++SN},uO=(function(){function t(r,n,s,a={}){this.id=EN(),this._execOverDatabaseCount=0,this._creationTime=vn(),this._lastEnsureEqual=0,this.uncached=!1,this.refCount$=new Ii(null),this._result=null,this._latestChangeEvent=-1,this._ensureEqualQueue=xs,this.op=r,this.mangoQuery=n,this.collection=s,this.other=a,n||(this.mangoQuery=uf()),this.isFindOneByIdQuery=PN(this.collection.schema.primaryPath,n)}var e=t.prototype;return e._setResultData=function(n){if(typeof n>"u")throw Ve("QU18",{database:this.collection.database.name,collection:this.collection.name});if(typeof n=="number"){this._result=new kb(this,[],n);return}else n instanceof Map&&(n=Array.from(n.values()));var s=new kb(this,n,n.length);this._result=s},e._execOverDatabase=async function(){if(this._execOverDatabaseCount=this._execOverDatabaseCount+1,this.op==="count"){var n=this.getPreparedQuery(),s=await this.collection.storageInstance.count(n);if(s.mode==="slow"&&!this.collection.database.allowSlowCount)throw Ve("QU14",{collection:this.collection,queryObj:this.mangoQuery});return{result:s.count,counter:this.collection._changeEventBuffer.getCounter()}}if(this.op==="findByIds"){var a=Ze(this.mangoQuery.selector)[this.collection.schema.primaryPath].$in,u=new Map,l=[];if(a.forEach(y=>{var g=this.collection._docCache.getLatestDocumentDataIfExists(y);if(g){if(!g._deleted){var b=this.collection._docCache.getCachedRxDocument(g);u.set(y,b)}}else l.push(y)}),l.length>0){var d=await this.collection.storageInstance.findDocumentsById(l,!1);d.forEach(y=>{var g=this.collection._docCache.getCachedRxDocument(y);u.set(g.primary,g)})}return{result:u,counter:this.collection._changeEventBuffer.getCounter()}}var m=await cO(this);return{result:m.docs,counter:m.counter}},e.exec=async function(n){if(n&&this.op!=="findOne")throw Ve("QU9",{collection:this.collection.name,query:this.mangoQuery,op:this.op});await Pb(this);var s=Ze(this._result);return s.getValue(n)},e.toString=function(){var n=_p({op:this.op,query:Mc(this.collection.schema.jsonSchema,this.mangoQuery),other:this.other},!0),s=JSON.stringify(n);return this.toString=()=>s,s},e.getPreparedQuery=function(){var n={rxQuery:this,mangoQuery:Mc(this.collection.schema.jsonSchema,this.mangoQuery)};n.mangoQuery.selector._deleted={$eq:!1},n.mangoQuery.index&&n.mangoQuery.index.unshift("_deleted"),Mn("prePrepareQuery",n);var s=Bf(this.collection.schema.jsonSchema,n.mangoQuery);return this.getPreparedQuery=()=>s,s},e.doesDocumentDataMatch=function(n){return n._deleted?!1:this.queryMatcher(n)},e.remove=async function(){var n=await this.exec();if(Array.isArray(n)){var s=await this.collection.bulkRemove(n);if(s.error.length>0)throw PE(s.error[0]);return s.success}else return n.remove()},e.incrementalRemove=function(){return kc(this.asRxQuery,n=>n.incrementalRemove())},e.update=function(n){throw Yt("update")},e.patch=function(n){return kc(this.asRxQuery,s=>s.patch(n))},e.incrementalPatch=function(n){return kc(this.asRxQuery,s=>s.incrementalPatch(n))},e.modify=function(n){return kc(this.asRxQuery,s=>s.modify(n))},e.incrementalModify=function(n){return kc(this.asRxQuery,s=>s.incrementalModify(n))},e.where=function(n){throw Yt("query-builder")},e.sort=function(n){throw Yt("query-builder")},e.skip=function(n){throw Yt("query-builder")},e.limit=function(n){throw Yt("query-builder")},Aa(t,[{key:"$",get:function(){if(!this._$){var r=this.collection.eventBulks$.pipe(Gt(n=>!n.isLocal),xf(null),es(()=>Pb(this)),ur(()=>this._result),ko(Oo),Ia((n,s)=>!!(n&&n.time===Ze(s).time)),Gt(n=>!!n),ur(n=>Ze(n).getValue()));this._$=u$(r,this.refCount$.pipe(Gt(()=>!1)))}return this._$}},{key:"$$",get:function(){var r=this.collection.database.getReactivityFactory();return r.fromObservable(this.$,void 0,this.collection.database)}},{key:"queryMatcher",get:function(){var r=this.collection.schema.jsonSchema,n=Mc(this.collection.schema.jsonSchema,this.mangoQuery);return Po(this,"queryMatcher",gm(r,n))}},{key:"asRxQuery",get:function(){return this}}])})();function uf(){return{selector:{}}}function IN(t){return t.collection._queryCache.getByQuery(t)}function Pc(t,e,r,n){Mn("preCreateRxQuery",{op:t,queryObj:e,collection:r,other:n});var s=new uO(t,e,r,n);return s=IN(s),vN(r),s}function ON(t){var e=t.asRxQuery.collection._changeEventBuffer.getCounter();return t._latestChangeEvent>=e}async function Pb(t){return t.collection.awaitBeforeReads.size>0&&await Promise.all(Array.from(t.collection.awaitBeforeReads).map(e=>e())),t._ensureEqualQueue=t._ensureEqualQueue.then(()=>kN(t)),t._ensureEqualQueue}function kN(t){if(t._lastEnsureEqual=vn(),t.collection.database.closed||ON(t))return xs;var e=!1,r=!1;if(t._latestChangeEvent===-1&&(r=!0),!r){var n=t.asRxQuery.collection._changeEventBuffer.getFrom(t._latestChangeEvent+1);if(n===null)r=!0;else{t._latestChangeEvent=t.asRxQuery.collection._changeEventBuffer.getCounter();var s=t.asRxQuery.collection._changeEventBuffer.reduceByLastOfDoc(n);if(t.op==="count"){var a=Ze(t._result).count,u=a;s.forEach(d=>{var m=d.previousDocumentData&&t.doesDocumentDataMatch(d.previousDocumentData),y=t.doesDocumentDataMatch(d.documentData);!m&&y&&u++,m&&!y&&u--}),u!==a&&(e=!0,t._setResultData(u))}else{var l=lN(t,s);l.runFullQueryAgain?r=!0:l.changed&&(e=!0,t._setResultData(l.newResults))}}}return r?t._execOverDatabase().then(d=>{var m=d.result;return t._latestChangeEvent=d.counter,typeof m=="number"?((!t._result||m!==t._result.count)&&(e=!0,t._setResultData(m)),e):((!t._result||!PR(t.collection.schema.primaryPath,m,t._result.docsData))&&(e=!0,t._setResultData(m)),e)}):Promise.resolve(e)}async function cO(t){var e=[],r=t.collection;if(t.isFindOneByIdQuery)if(Array.isArray(t.isFindOneByIdQuery)){var n=t.isFindOneByIdQuery;if(n=n.filter(y=>{var g=t.collection._docCache.getLatestDocumentDataIfExists(y);return g?(g._deleted||e.push(g),!1):!0}),n.length>0){var s=await r.storageInstance.findDocumentsById(n,!1);Au(e,s)}}else{var a=t.isFindOneByIdQuery,u=t.collection._docCache.getLatestDocumentDataIfExists(a);if(!u){var l=await r.storageInstance.findDocumentsById([a],!1);l[0]&&(u=l[0])}u&&!u._deleted&&e.push(u)}else{var d=t.getPreparedQuery(),m=await r.storageInstance.query(d);e=m.documents}return{docs:e,counter:r._changeEventBuffer.getCounter()}}function PN(t,e){if(!e.skip&&e.selector&&Object.keys(e.selector).length===1&&e.selector[t]){var r=e.selector[t];if(typeof r=="string")return r;if(Object.keys(r).length===1&&typeof r.$eq=="string"||Object.keys(r).length===1&&Array.isArray(r.$eq)&&!r.$eq.find(n=>typeof n!="string"))return r.$eq}return!1}var wa="collection",d0="storage-token",ap="rx-migration-status",DN="rx-pipeline-checkpoint",RN="RxInternalDocument",h0=mm({version:0,title:RN,primaryKey:{key:"id",fields:["context","key"],separator:"|"},type:"object",properties:{id:{type:"string",maxLength:200},key:{type:"string"},context:{type:"string",enum:[wa,d0,ap,DN,"OTHER"]},data:{type:"object",additionalProperties:!0}},indexes:[],required:["key","context","data"],additionalProperties:!1,sharding:{shards:1,mode:"collection"}});function Nu(t,e){return Na(h0,{key:t,context:e})}async function p0(t){var e=Bf(t.schema,{selector:{context:wa,_deleted:{$eq:!1}},sort:[{id:"asc"}],skip:0}),r=await t.query(e),n=r.documents;return n}var lO="storageToken",CN=Nu(lO,d0);async function $N(t){var e=al(10),r=t.password?await t.hashFunction(JSON.stringify(t.password)):void 0,n={id:CN,context:d0,key:lO,data:{rxdbVersion:t.rxdbVersion,token:e,instanceToken:t.token,passwordHash:r},_deleted:!1,_meta:ol(),_rev:Di(),_attachments:{}},s=[{document:n}],a=await t.internalStore.bulkWrite(s,"internal-add-storage-token");if(!a.error[0])return Ci("id",s,a)[0];var u=Ze(a.error[0]);if(u.isError&&Vc(u)){var l=u;if(!AN(l.documentInDb.data.rxdbVersion,t.rxdbVersion))throw Ve("DM5",{args:{database:t.name,databaseStateVersion:l.documentInDb.data.rxdbVersion,codeVersion:t.rxdbVersion}});if(r&&r!==l.documentInDb.data.passwordHash)throw Ve("DB1",{passwordHash:r,existingPasswordHash:l.documentInDb.data.passwordHash});var d=l.documentInDb;return Ze(d)}throw u}function AN(t,e){if(!t)return!1;var r=t.split(".")[0],n=e.split(".")[0];return r==="15"&&n==="16"?!0:r===n}async function fO(t,e,r){if(t.schema.version!==r.version)throw Ve("SNH",{schema:r,version:t.schema.version,name:t.name,collection:t,args:{storageCollectionName:e}});for(var n=kp(t.name,t.schema.jsonSchema),s=Nu(n,wa);;){var a=await hl(t.database.internalStore,s),u=yn(Ze(a)),l=u.data.connectedStorages.find(d=>d.collectionName===e&&d.schema.version===r.version);if(l)return;u.data.connectedStorages.push({collectionName:e,schema:r});try{await Jc(t.database.internalStore,{previous:Ze(a),document:u},"add-connected-storage-to-collection")}catch(d){if(!Vc(d))throw d}}}async function NN(t,e,r){if(t.schema.version!==r.version)throw Ve("SNH",{schema:r,version:t.schema.version,name:t.name,collection:t,args:{storageCollectionName:e}});for(var n=kp(t.name,t.schema.jsonSchema),s=Nu(n,wa);;){var a=await hl(t.database.internalStore,s),u=yn(Ze(a)),l=u.data.connectedStorages.find(d=>d.collectionName===e&&d.schema.version===r.version);if(!l)return;u.data.connectedStorages=u.data.connectedStorages.filter(d=>d.collectionName!==e);try{await Jc(t.database.internalStore,{previous:Ze(a),document:u},"remove-connected-storage-from-collection")}catch(d){if(!Vc(d))throw d}}}function kp(t,e){return t+"-"+e.version}function ch(t,e){return e=Kt(e),e=JR(t,e),typeof t.jsonSchema.primaryKey!="string"&&(e=KR(t.primaryPath,t.jsonSchema,e)),e._meta=ol(),Object.prototype.hasOwnProperty.call(e,"_deleted")||(e._deleted=!1),Object.prototype.hasOwnProperty.call(e,"_attachments")||(e._attachments={}),Object.prototype.hasOwnProperty.call(e,"_rev")||(e._rev=Di()),e}async function TN(t,e){e.multiInstance=t.multiInstance;var r=await t.storage.createStorageInstance(e);return r}async function dO(t,e,r,n,s,a,u,l){var d=await p0(e),m=d.filter(S=>S.data.name===s),y=[];m.forEach(S=>{y.push({collectionName:S.data.name,schema:S.data.schema,isCollection:!0}),S.data.connectedStorages.forEach(E=>y.push({collectionName:E.collectionName,isCollection:!1,schema:E.schema}))});var g=new Set;if(y=y.filter(S=>{var E=S.collectionName+"||"+S.schema.version;return g.has(E)?!1:(g.add(E),!0)}),await Promise.all(y.map(async S=>{var E=await t.createStorageInstance({collectionName:S.collectionName,databaseInstanceToken:r,databaseName:n,multiInstance:a,options:{},schema:S.schema,password:u,devMode:Jt.isDevMode()});await E.remove(),S.isCollection&&await Ea("postRemoveRxCollection",{storage:t,databaseName:n,collectionName:s})})),l){var b=m.map(S=>{var E=Lf(S);return E._deleted=!0,E._meta.lwt=vn(),E._rev=No(r,S),{previous:S,document:E}});await e.bulkWrite(b,"rx-database-remove-collection-all")}}function bi(t){if(t.closed)throw Ve("COL21",{collection:t.name,version:t.schema.version})}var xN=(function(){function t(r){this.subs=[],this.counter=0,this.eventCounterMap=new WeakMap,this.buffer=[],this.limit=100,this.tasks=new Set,this.collection=r,this.subs.push(this.collection.eventBulks$.pipe(Gt(n=>!n.isLocal)).subscribe(n=>{this.tasks.add(()=>this._handleChangeEvents(n.events)),this.tasks.size<=1&&Tf().then(()=>{this.processTasks()})}))}var e=t.prototype;return e.processTasks=function(){if(this.tasks.size!==0){var n=Array.from(this.tasks);n.forEach(s=>s()),this.tasks.clear()}},e._handleChangeEvents=function(n){var s=this.counter;this.counter=this.counter+n.length,n.length>this.limit?this.buffer=n.slice(n.length*-1):(Au(this.buffer,n),this.buffer=this.buffer.slice(this.limit*-1));for(var a=s+1,u=this.eventCounterMap,l=0;l<n.length;l++){var d=n[l];u.set(d,a+l)}},e.getCounter=function(){return this.processTasks(),this.counter},e.getBuffer=function(){return this.processTasks(),this.buffer},e.getArrayIndexByPointer=function(n){this.processTasks();var s=this.buffer[0],a=this.eventCounterMap.get(s);if(n<a)return null;var u=n-a;return u},e.getFrom=function(n){this.processTasks();var s=[],a=this.getArrayIndexByPointer(n);if(a===null)return null;for(;;){var u=this.buffer[a];if(a++,u)s.push(u);else return s}},e.runFrom=function(n,s){this.processTasks();var a=this.getFrom(n);if(a===null)throw new Error("out of bounds");a.forEach(u=>s(u))},e.reduceByLastOfDoc=function(n){return this.processTasks(),n.slice(0)},e.close=function(){this.tasks.clear(),this.subs.forEach(n=>n.unsubscribe())},t})();function MN(t){return new xN(t)}var FN=new WeakMap;function BN(t){var e=t.schema.getDocumentPrototype(),r=UN(t),n=_m,s={};return[e,r,n].forEach(a=>{var u=Object.getOwnPropertyNames(a);u.forEach(l=>{var d=Object.getOwnPropertyDescriptor(a,l),m=!0;(l.startsWith("_")||l.endsWith("_")||l.startsWith("$")||l.endsWith("$"))&&(m=!1),typeof d.value=="function"?Object.defineProperty(s,l,{get(){return d.value.bind(this)},enumerable:m,configurable:!1}):(d.enumerable=m,d.configurable=!1,d.writable&&(d.writable=!1),Object.defineProperty(s,l,d))})}),s}function LN(t){return nn(FN,t,()=>ZI(BN(t)))}function jN(t,e,r){var n=_A(e,t,Jt.deepFreezeWhenDevMode(r));return t._runHooksSync("post","create",r,n),Mn("postCreateRxDocument",n),n}function UN(t){var e={};return Object.entries(t.methods).forEach(([r,n])=>{e[r]=n}),e}var Pp={isEqual(t,e,r){t=Db(t),e=Db(e);var n=Kc($s(t),$s(e));return n},resolve(t){return t.realMasterState}};function Db(t){return t._attachments||(t=Kt(t),t._attachments={}),t}var hO=["pre","post"],pO=["insert","save","remove","create"],Rb=!1,Dc=new Set,mO=(function(){function t(r,n,s,a,u={},l={},d={},m={},y={},g=oO,b={},S=Pp){this.storageInstance={},this.timeouts=new Set,this.incrementalWriteQueue={},this.awaitBeforeReads=new Set,this._incrementalUpsertQueues=new Map,this.synced=!1,this.hooks={},this._subs=[],this._docCache={},this._queryCache=dN(),this.$={},this.checkpoint$={},this._changeEventBuffer={},this.eventBulks$={},this.onClose=[],this.closed=!1,this.onRemove=[],this.database=r,this.name=n,this.schema=s,this.internalStorageInstance=a,this.instanceCreationOptions=u,this.migrationStrategies=l,this.methods=d,this.attachments=m,this.options=y,this.cacheReplacementPolicy=g,this.statics=b,this.conflictHandler=S,zN(this.asRxCollection),r&&(this.eventBulks$=r.eventBulks$.pipe(Gt(E=>E.collectionName===this.name))),this.database&&Dc.add(this)}var e=t.prototype;return e.prepare=async function(){if(!await TE()){for(var n=0;n<10&&Dc.size>tb;)n++,await this.promiseWait(30);if(Dc.size>tb)throw Ve("COL23",{database:this.database.name,collection:this.name,args:{existing:Array.from(Dc.values()).map(d=>({db:d.database?d.database.name:"",c:d.name}))}})}this.storageInstance=o0(this.database,this.internalStorageInstance,this.schema.jsonSchema),this.incrementalWriteQueue=new XI(this.storageInstance,this.schema.primaryPath,(d,m)=>eO(this,d,m),d=>this._runHooks("post","save",d)),this.$=this.eventBulks$.pipe(es(d=>cI(d))),this.checkpoint$=this.eventBulks$.pipe(ur(d=>d.checkpoint)),this._changeEventBuffer=MN(this.asRxCollection);var s;this._docCache=new aO(this.schema.primaryPath,this.eventBulks$.pipe(Gt(d=>!d.isLocal),ur(d=>d.events)),d=>(s||(s=LN(this.asRxCollection)),jN(this.asRxCollection,s,d)));var a=this.database.internalStore.changeStream().pipe(Gt(d=>{var m=this.name+"-"+this.schema.version,y=d.events.find(g=>g.documentData.context==="collection"&&g.documentData.key===m&&g.operation==="DELETE");return!!y})).subscribe(async()=>{await this.close(),await Promise.all(this.onRemove.map(d=>d()))});this._subs.push(a);var u=await this.database.storageToken,l=this.storageInstance.changeStream().subscribe(d=>{var m={id:d.id,isLocal:!1,internal:!1,collectionName:this.name,storageToken:u,events:d.events,databaseToken:this.database.token,checkpoint:d.checkpoint,context:d.context};this.database.$emit(m)});return this._subs.push(l),Tn},e.cleanup=function(n){throw bi(this),Yt("cleanup")},e.migrationNeeded=function(){throw Yt("migration-schema")},e.getMigrationState=function(){throw Yt("migration-schema")},e.startMigration=function(n=10){return bi(this),this.getMigrationState().startMigration(n)},e.migratePromise=function(n=10){return this.getMigrationState().migratePromise(n)},e.insert=async function(n){bi(this);var s=await this.bulkInsert([n]),a=s.error[0];Ip(this,n[this.schema.primaryPath],n,a);var u=Ze(s.success[0]);return u},e.insertIfNotExists=async function(n){var s=await this.bulkInsert([n]);if(s.error.length>0){var a=s.error[0];if(a.status===409){var u=a.documentInDb;return lg(this._docCache,[u])[0]}else throw a}return s.success[0]},e.bulkInsert=async function(n){if(bi(this),n.length===0)return{success:[],error:[]};var s=this.schema.primaryPath,a=new Set,u;if(this.hasHooks("pre","insert"))u=await Promise.all(n.map(O=>{var $=ch(this.schema,O);return this._runHooks("pre","insert",$).then(()=>(a.add($[s]),{document:$}))}));else{u=new Array(n.length);for(var l=this.schema,d=0;d<n.length;d++){var m=n[d],y=ch(l,m);a.add(y[s]),u[d]={document:y}}}if(a.size!==n.length)throw Ve("COL22",{collection:this.name,args:{documents:n}});var g=await this.storageInstance.bulkWrite(u,"rx-collection-bulk-insert"),b,S=this,E={get success(){if(!b){var O=Ci(S.schema.primaryPath,u,g);b=lg(S._docCache,O)}return b},error:g.error};if(this.hasHooks("post","insert")){var D=new Map;u.forEach(O=>{var $=O.document;D.set($[s],$)}),await Promise.all(E.success.map(O=>this._runHooks("post","insert",D.get(O.primary),O)))}return E},e.bulkRemove=async function(n){bi(this);var s=this.schema.primaryPath;if(n.length===0)return{success:[],error:[]};var a;typeof n[0]=="string"?a=await this.findByIds(n).exec():(a=new Map,n.forEach(S=>a.set(S.primary,S)));var u=[],l=new Map;Array.from(a.values()).forEach(S=>{var E=S.toMutableJSON(!0);u.push(E),l.set(S.primary,E)}),await Promise.all(u.map(S=>{var E=S[this.schema.primaryPath];return this._runHooks("pre","remove",S,a.get(E))}));var d=u.map(S=>{var E=Kt(S);return E._deleted=!0,{previous:S,document:E}}),m=await this.storageInstance.bulkWrite(d,"rx-collection-bulk-remove"),y=Ci(this.schema.primaryPath,d,m),g=[],b=y.map(S=>{var E=S[s],D=this._docCache.getCachedRxDocument(S);return g.push(D),E});return await Promise.all(b.map(S=>this._runHooks("post","remove",l.get(S),a.get(S)))),{success:g,error:m.error}},e.bulkUpsert=async function(n){bi(this);var s=[],a=new Map;n.forEach(m=>{var y=ch(this.schema,m),g=y[this.schema.primaryPath];if(!g)throw Ve("COL3",{primaryPath:this.schema.primaryPath,data:y,schema:this.schema.jsonSchema});a.set(g,y),s.push(y)});var u=await this.bulkInsert(s),l=u.success.slice(0),d=[];return await Promise.all(u.error.map(async m=>{if(m.status!==409)d.push(m);else{var y=m.documentId,g=Wc(a,y),b=Ze(m.documentInDb),S=this._docCache.getCachedRxDocuments([b])[0],E=await S.incrementalModify(()=>g);l.push(E)}})),{error:d,success:l}},e.upsert=async function(n){bi(this);var s=await this.bulkUpsert([n]);return Ip(this.asRxCollection,n[this.schema.primaryPath],n,s.error[0]),s.success[0]},e.incrementalUpsert=function(n){bi(this);var s=ch(this.schema,n),a=s[this.schema.primaryPath];if(!a)throw Ve("COL4",{data:n});var u=this._incrementalUpsertQueues.get(a);return u||(u=Tn),u=u.then(()=>VN(this,a,s)).then(l=>l.inserted?l.doc:qN(l.doc,s)),this._incrementalUpsertQueues.set(a,u),u},e.find=function(n){bi(this),Mn("prePrepareRxQuery",{op:"find",queryObj:n,collection:this}),n||(n=uf());var s=Pc("find",n,this);return s},e.findOne=function(n){bi(this),Mn("prePrepareRxQuery",{op:"findOne",queryObj:n,collection:this});var s;if(typeof n=="string")s=Pc("findOne",{selector:{[this.schema.primaryPath]:n},limit:1},this);else{if(n||(n=uf()),n.limit)throw Ve("QU6");n=Kt(n),n.limit=1,s=Pc("findOne",n,this)}return s},e.count=function(n){bi(this),n||(n=uf());var s=Pc("count",n,this);return s},e.findByIds=function(n){bi(this);var s={selector:{[this.schema.primaryPath]:{$in:n.slice(0)}}},a=Pc("findByIds",s,this);return a},e.exportJSON=function(){throw Yt("json-dump")},e.importJSON=function(n){throw Yt("json-dump")},e.insertCRDT=function(n){throw Yt("crdt")},e.addPipeline=function(n){throw Yt("pipeline")},e.addHook=function(n,s,a,u=!1){if(typeof a!="function")throw bp("COL7",{key:s,when:n});if(!hO.includes(n))throw bp("COL8",{key:s,when:n});if(!pO.includes(s))throw Ve("COL9",{key:s});if(n==="post"&&s==="create"&&u===!0)throw Ve("COL10",{when:n,key:s,parallel:u});var l=a.bind(this),d=u?"parallel":"series";this.hooks[s]=this.hooks[s]||{},this.hooks[s][n]=this.hooks[s][n]||{series:[],parallel:[]},this.hooks[s][n][d].push(l)},e.getHooks=function(n,s){return!this.hooks[s]||!this.hooks[s][n]?{series:[],parallel:[]}:this.hooks[s][n]},e.hasHooks=function(n,s){if(!this.hooks[s]||!this.hooks[s][n])return!1;var a=this.getHooks(n,s);return a?a.series.length>0||a.parallel.length>0:!1},e._runHooks=function(n,s,a,u){var l=this.getHooks(n,s);if(!l)return Tn;var d=l.series.map(m=>()=>m(a,u));return jR(d).then(()=>Promise.all(l.parallel.map(m=>m(a,u))))},e._runHooksSync=function(n,s,a,u){if(this.hasHooks(n,s)){var l=this.getHooks(n,s);l&&l.series.forEach(d=>d(a,u))}},e.promiseWait=function(n){var s=new Promise(a=>{var u=setTimeout(()=>{this.timeouts.delete(u),a()},n);this.timeouts.add(u)});return s},e.close=async function(){return this.closed?xs:(Dc.delete(this),await Promise.all(this.onClose.map(n=>n())),this.closed=!0,Array.from(this.timeouts).forEach(n=>clearTimeout(n)),this._changeEventBuffer&&this._changeEventBuffer.close(),this.database.requestIdlePromise().then(()=>this.storageInstance.close()).then(()=>(this._subs.forEach(n=>n.unsubscribe()),delete this.database.collections[this.name],Ea("postCloseRxCollection",this).then(()=>!0))))},e.remove=async function(){await this.close(),await Promise.all(this.onRemove.map(n=>n())),await dO(this.database.storage,this.database.internalStore,this.database.token,this.database.name,this.name,this.database.multiInstance,this.database.password,this.database.hashFunction)},Aa(t,[{key:"insert$",get:function(){return this.$.pipe(Gt(r=>r.operation==="INSERT"))}},{key:"update$",get:function(){return this.$.pipe(Gt(r=>r.operation==="UPDATE"))}},{key:"remove$",get:function(){return this.$.pipe(Gt(r=>r.operation==="DELETE"))}},{key:"asRxCollection",get:function(){return this}}])})();function zN(t){if(!Rb){Rb=!0;var e=Object.getPrototypeOf(t);pO.forEach(r=>{hO.map(n=>{var s=n+CE(r);e[s]=function(a,u){return this.addHook(n,r,a,u)}})})}}function qN(t,e){return t.incrementalModify(r=>e)}function VN(t,e,r){var n=t._docCache.getLatestDocumentDataIfExists(e);return n?Promise.resolve({doc:t._docCache.getCachedRxDocuments([n])[0],inserted:!1}):t.findOne(e).exec().then(s=>s?{doc:s,inserted:!1}:t.insert(r).then(a=>({doc:a,inserted:!0})))}async function KN({database:t,name:e,schema:r,instanceCreationOptions:n={},migrationStrategies:s={},autoMigrate:a=!0,statics:u={},methods:l={},attachments:d={},options:m={},localDocuments:y=!1,cacheReplacementPolicy:g=oO,conflictHandler:b=Pp}){var S={databaseInstanceToken:t.token,databaseName:t.name,collectionName:e,schema:r.jsonSchema,options:n,multiInstance:t.multiInstance,password:t.password,devMode:Jt.isDevMode()};Mn("preCreateRxStorageInstance",S);var E=await TN(t,S),D=new mO(t,e,r,E,n,s,l,d,m,g,u,b);try{await D.prepare(),Object.entries(u).forEach(([O,$])=>{Object.defineProperty(D,O,{get:()=>$.bind(D)})}),Mn("createRxCollection",{collection:D,creator:{name:e,schema:r,storageInstance:E,instanceCreationOptions:n,migrationStrategies:s,methods:l,attachments:d,options:m,cacheReplacementPolicy:g,localDocuments:y,statics:u}}),a&&D.schema.version!==0&&await D.migratePromise()}catch(O){throw Dc.delete(D),await E.close(),O}return D}var yO=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this._parallels=e||1,this._qC=0,this._iC=new Set,this._lHN=0,this._hPM=new Map,this._pHM=new Map};yO.prototype={isIdle:function(){return this._qC<this._parallels},lock:function(){this._qC++},unlock:function(){this._qC--,fg(this)},wrapCall:function(e){var r=this;this._qC++;var n;try{n=e()}catch(s){throw this.unlock(),s}return!n.then||typeof n.then!="function"?(this.unlock(),n):n.then(function(s){return r.unlock(),s}).catch(function(s){throw r.unlock(),s})},requestIdlePromise:function(e){var r=this;e=e||{};var n,s=new Promise(function(l){return n=l}),a=function(){mv(r,s),n()};if(s._manRes=a,e.timeout){var u=setTimeout(function(){s._manRes()},e.timeout);s._timeoutObj=u}return this._iC.add(s),fg(this),s},cancelIdlePromise:function(e){mv(this,e)},requestIdleCallback:function(e,r){var n=this._lHN++,s=this.requestIdlePromise(r);return this._hPM.set(n,s),this._pHM.set(s,n),s.then(function(){return e()}),n},cancelIdleCallback:function(e){var r=this._hPM.get(e);this.cancelIdlePromise(r)},clear:function(){var e=this;this._iC.forEach(function(r){return mv(e,r)}),this._qC=0,this._iC.clear(),this._hPM=new Map,this._pHM=new Map}};function WN(t){if(t._iC.size!==0){var e=t._iC.values(),r=e.next().value;r._manRes(),setTimeout(function(){return fg(t)},0)}}function mv(t,e){if(e){if(e._timeoutObj&&clearTimeout(e._timeoutObj),t._pHM.has(e)){var r=t._pHM.get(e);t._hPM.delete(r),t._pHM.delete(e)}t._iC.delete(e)}}function fg(t){t._tryIR||t._iC.size===0||(t._tryIR=!0,setTimeout(function(){if(!t.isIdle()){t._tryIR=!1;return}setTimeout(function(){if(!t.isIdle()){t._tryIR=!1;return}WN(t),t._tryIR=!1},0)},0))}let HN=class{ttl;map=new Map;_to=!1;constructor(e){this.ttl=e}has(e){return this.map.has(e)}add(e){this.map.set(e,vO()),this._to||(this._to=!0,setTimeout(()=>{this._to=!1,QN(this)},0))}clear(){this.map.clear()}};function QN(t){const e=vO()-t.ttl,r=t.map[Symbol.iterator]();for(;;){const n=r.next().value;if(!n)return;const s=n[0];if(n[1]<e)t.map.delete(s);else return}}function vO(){return Date.now()}var dg=new Set,Cb=new Map,m0=(function(){function t(r,n,s,a,u,l,d=!1,m={},y,g,b,S,E,D){this.idleQueue=new yO,this.rxdbVersion=Hg,this.storageInstances=new Set,this._subs=[],this.startupErrors=[],this.onClose=[],this.closed=!1,this.collections={},this.states={},this.eventBulks$=new Hr,this.closePromise=null,this.observable$=this.eventBulks$.pipe(es(O=>cI(O))),this.storageToken=xs,this.storageTokenDocument=xs,this.emittedEventBulkIds=new HN(60*1e3),this.name=r,this.token=n,this.storage=s,this.instanceCreationOptions=a,this.password=u,this.multiInstance=l,this.eventReduce=d,this.options=m,this.internalStore=y,this.hashFunction=g,this.cleanupPolicy=b,this.allowSlowCount=S,this.reactivity=E,this.onClosed=D,this.name!=="pseudoInstance"&&(this.internalStore=o0(this.asRxDatabase,y,h0),this.storageTokenDocument=$N(this.asRxDatabase).catch(O=>this.startupErrors.push(O)),this.storageToken=this.storageTokenDocument.then(O=>O.data.token).catch(O=>this.startupErrors.push(O)))}var e=t.prototype;return e.getReactivityFactory=function(){if(!this.reactivity)throw Ve("DB14",{database:this.name});return this.reactivity},e.$emit=function(n){this.emittedEventBulkIds.has(n.id)||(this.emittedEventBulkIds.add(n.id),this.eventBulks$.next(n))},e.removeCollectionDoc=async function(n,s){var a=await hl(this.internalStore,Nu(kp(n,s),wa));if(!a)throw Ve("SNH",{name:n,schema:s});var u=Lf(a);u._deleted=!0,await this.internalStore.bulkWrite([{document:u,previous:a}],"rx-database-remove-collection")},e.addCollections=async function(n){var s={},a={},u=[],l={};await Promise.all(Object.entries(n).map(async([y,g])=>{var b=y,S=g.schema;s[b]=S;var E=eC(S,this.hashFunction);if(a[b]=E,this.collections[y])throw Ve("DB3",{name:y});var D=kp(y,S),O={id:Nu(D,wa),key:D,context:wa,data:{name:b,schemaHash:await E.hash,schema:E.jsonSchema,version:E.version,connectedStorages:[]},_deleted:!1,_meta:ol(),_rev:Di(),_attachments:{}};u.push({document:O});var $=Object.assign({},g,{name:b,schema:E,database:this}),P=Kt(g);P.database=this,P.name=y,Mn("preCreateRxCollection",P),$.conflictHandler=P.conflictHandler,l[b]=$}));var d=await this.internalStore.bulkWrite(u,"rx-database-add-collection");await XN(this),await Promise.all(d.error.map(async y=>{if(y.status!==409)throw Ve("DB12",{database:this.name,writeError:y});var g=Ze(y.documentInDb),b=g.data.name,S=a[b];if(g.data.schemaHash!==await S.hash)throw Ve("DB6",{database:this.name,collection:b,previousSchemaHash:g.data.schemaHash,schemaHash:await S.hash,previousSchema:g.data.schema,schema:Ze(s[b])})}));var m={};return await Promise.all(Object.keys(n).map(async y=>{var g=l[y],b=await KN(g);m[y]=b,this.collections[y]=b,this[y]||Object.defineProperty(this,y,{get:()=>this.collections[y]})})),m},e.lockedRun=function(n){return this.idleQueue.wrapCall(n)},e.requestIdlePromise=function(){return this.idleQueue.requestIdlePromise()},e.exportJSON=function(n){throw Yt("json-dump")},e.addState=function(n){throw Yt("state")},e.importJSON=function(n){throw Yt("json-dump")},e.backup=function(n){throw Yt("backup")},e.leaderElector=function(){throw Yt("leader-election")},e.isLeader=function(){throw Yt("leader-election")},e.waitForLeadership=function(){throw Yt("leader-election")},e.migrationStates=function(){throw Yt("migration-schema")},e.close=function(){if(this.closePromise)return this.closePromise;var{promise:n,resolve:s}=gO(),a=u=>{this.onClosed&&this.onClosed(),this.closed=!0,s(u)};return this.closePromise=n,(async()=>{if(await Ea("preCloseRxDatabase",this),this.eventBulks$.complete(),this._subs.map(u=>u.unsubscribe()),this.name==="pseudoInstance"){a(!1);return}return this.requestIdlePromise().then(()=>Promise.all(this.onClose.map(u=>u()))).then(()=>Promise.all(Object.keys(this.collections).map(u=>this.collections[u]).map(u=>u.close()))).then(()=>this.internalStore.close()).then(()=>a(!0))})(),n},e.remove=function(){return this.close().then(()=>bO(this.name,this.storage,this.multiInstance,this.password))},Aa(t,[{key:"$",get:function(){return this.observable$}},{key:"asRxDatabase",get:function(){return this}}])})();function YN(t,e){if(dg.has(_O(t,e)))throw Ve("DB8",{name:t,storage:e.name,link:"https://rxdb.info/rx-database.html#ignoreduplicate"})}function gO(){var t,e,r=new Promise((n,s)=>{t=n,e=s});return{promise:r,resolve:t,reject:e}}function _O(t,e){return e.name+"|"+t}async function wO(t,e,r,n,s,a){var u=await e.createStorageInstance({databaseInstanceToken:t,databaseName:r,collectionName:dA,schema:h0,options:n,multiInstance:s,password:a,devMode:Jt.isDevMode()});return u}function GN({storage:t,instanceCreationOptions:e,name:r,password:n,multiInstance:s=!0,eventReduce:a=!0,ignoreDuplicate:u=!1,options:l={},cleanupPolicy:d,closeDuplicates:m=!1,allowSlowCount:y=!1,localDocuments:g=!1,hashFunction:b=DE,reactivity:S}){Mn("preCreateRxDatabase",{storage:t,instanceCreationOptions:e,name:r,password:n,multiInstance:s,eventReduce:a,ignoreDuplicate:u,options:l,localDocuments:g});var E=_O(r,t),D=Cb.get(E)||new Set,O=gO(),$=Array.from(D),P=()=>{D.delete(O.promise),dg.delete(E)};return D.add(O.promise),Cb.set(E,D),(async()=>{if(m&&await Promise.all($.map(x=>x.catch(()=>null).then(U=>U&&U.close()))),u){if(!Jt.isDevMode())throw Ve("DB9",{database:r})}else YN(r,t);dg.add(E);var C=al(10),B=await wO(C,t,r,e,s,n),k=new m0(r,C,t,e,n,s,a,l,B,b,d,y,S,P);return await Ea("createRxDatabase",{database:k,creator:{storage:t,instanceCreationOptions:e,name:r,password:n,multiInstance:s,eventReduce:a,ignoreDuplicate:u,options:l,localDocuments:g}}),k})().then(C=>{O.resolve(C)}).catch(C=>{O.reject(C),P()}),O.promise}async function bO(t,e,r=!0,n){var s=al(10),a=await wO(s,e,t,{},r,n),u=await p0(a),l=new Set;u.forEach(m=>l.add(m.data.name));var d=Array.from(l);return await Promise.all(d.map(m=>dO(e,a,s,t,m,r,n))),await Ea("postRemoveRxDatabase",{databaseName:t,storage:e}),await a.remove(),d}function JN(t){return t instanceof m0}async function SO(t){var e=await t.storageTokenDocument;return e.data.instanceToken===t.token}async function XN(t){if(await t.storageToken,t.startupErrors[0])throw t.startupErrors[0]}var ZN={RxSchema:ME.prototype,RxDocument:_m,RxQuery:uO.prototype,RxCollection:mO.prototype,RxDatabase:m0.prototype},yv=new Set,$b=new Set;function vo(t){if(Mn("preAddRxPlugin",{plugin:t,plugins:yv}),!yv.has(t)){{if($b.has(t.name))throw Ve("PL3",{name:t.name,plugin:t});yv.add(t),$b.add(t.name)}if(!t.rxdb)throw bp("PL1",{plugin:t});t.init&&t.init(),t.prototypes&&Object.entries(t.prototypes).forEach(([e,r])=>r(ZN[e])),t.overwritable&&Object.assign(Jt,t.overwritable),t.hooks&&Object.entries(t.hooks).forEach(([e,r])=>{r.after&&gf[e].push(r.after),r.before&&gf[e].unshift(r.before)})}}async function Dp(t,e){var r=Na(t.input.metaInstance.schema,{isCheckpoint:"1",itemId:e}),n=await t.input.metaInstance.findDocumentsById([r],!1),s=n[0];if(t.lastCheckpointDoc[e]=s,s)return s.checkpointData}async function Rp(t,e,r){t.checkpointQueue=t.checkpointQueue.then(async()=>{var n=t.lastCheckpointDoc[e];if(r&&!t.events.canceled.getValue()&&(!n||JSON.stringify(n.checkpointData)!==JSON.stringify(r))){var s={id:"",isCheckpoint:"1",itemId:e,_deleted:!1,_attachments:{},checkpointData:r,_meta:ol(),_rev:Di()};for(s.id=Na(t.input.metaInstance.schema,s);!t.events.canceled.getValue();){if(n&&(s.checkpointData=kf([n.checkpointData,s.checkpointData])),s._meta.lwt=vn(),s._rev=No(await t.checkpointKey,n),t.events.canceled.getValue())return;var a=[{previous:n,document:s}],u=await t.input.metaInstance.bulkWrite(a,"replication-set-checkpoint"),l=Ci(t.primaryPath,a,u)[0];if(l){t.lastCheckpointDoc[e]=l;return}else{var d=u.error[0];if(d.status!==409)throw d;n=Ze(d.documentInDb),s._rev=No(await t.checkpointKey,n)}}}}),await t.checkpointQueue}async function eT(t){var e=await t.hashFunction([t.identifier,t.forkInstance.databaseName,t.forkInstance.collectionName].join("||"));return"rx_storage_replication_"+e}function Ab(t,e,r,n,s){var a=Object.assign({},n,{_attachments:e&&n._attachments?n._attachments:{},_meta:r?n._meta:Object.assign({},s?s._meta:{},{lwt:vn()}),_rev:r?n._rev:Di()});return a._rev||(a._rev=No(t,s)),a}function pa(t,e,r){var n=Kt(t);return e||delete n._attachments,r||(delete n._meta,delete n._rev),n}function hg(t,e){return t.hasAttachments?e.map(r=>{var n=yn(r.document);return n.docData=$s(n.docData),{document:n,previous:r.previous}}):e}function pg(t){for(;;)if(t.underlyingPersistentStorage)t=t.underlyingPersistentStorage;else return t}var up="RxReplicationProtocolMetaData";function mg(t,e){var r=WR(t),n={title:up,primaryKey:{key:"id",fields:["itemId","isCheckpoint"],separator:"|"},type:"object",version:t.version,additionalProperties:!1,properties:{id:{type:"string",minLength:1,maxLength:r+2},isCheckpoint:{type:"string",enum:["0","1"],minLength:1,maxLength:1},itemId:{type:"string",maxLength:r>4?r:4},checkpointData:{type:"object",additionalProperties:!0},docData:{type:"object",properties:t.properties},isResolvedConflict:{type:"string"}},keyCompression:t.keyCompression,required:["id","isCheckpoint","itemId"]};e&&(n.encrypted=["docData"]);var s=mm(n);return s}function EO(t,e){return t.input.metaInstance.findDocumentsById(e.map(r=>{var n=Na(t.input.metaInstance.schema,{itemId:r,isCheckpoint:"0"});return n}),!0).then(r=>{var n={};return Object.values(r).forEach(s=>{n[s.itemId]={docData:s.docData,metaDocument:s}}),n})}async function Cp(t,e,r,n){var s=e[t.primaryPath],a=r?Lf(r):{id:"",isCheckpoint:"0",itemId:s,docData:e,_attachments:{},_deleted:!1,_rev:Di(),_meta:{lwt:0}};a.docData=e,n&&(a.isResolvedConflict=n),a._meta.lwt=vn(),a.id=Na(t.input.metaInstance.schema,a),a._rev=No(await t.checkpointKey,r);var u={previous:r,document:a};return u}async function tT(t){if(t.input.initialCheckpoint&&t.input.initialCheckpoint.downstream){var e=await Dp(t,"down");e||await Rp(t,"down",t.input.initialCheckpoint.downstream)}var r=await t.input.hashFunction(t.input.identifier),n=t.input.replicationHandler,s=0,a=[];function u(E){t.stats.down.addNewTask=t.stats.down.addNewTask+1;var D={time:s++,task:E};a.push(D),t.streamQueue.down=t.streamQueue.down.then(()=>{for(var O=[];a.length>0;){t.events.active.down.next(!0);var $=Ze(a.shift());if(!($.time<d)){if($.task==="RESYNC")if(O.length===0){O.push($.task);break}else break;O.push($.task)}}if(O.length!==0)return O[0]==="RESYNC"?m():y(O)}).then(()=>{t.events.active.down.next(!1),!t.firstSyncDone.down.getValue()&&!t.events.canceled.getValue()&&t.firstSyncDone.down.next(!0)})}if(u("RESYNC"),!t.events.canceled.getValue()){var l=n.masterChangeStream$.pipe(es(async E=>(await Do(t.events.active.up.pipe(Gt(D=>!D))),E))).subscribe(E=>{t.stats.down.masterChangeStreamEmit=t.stats.down.masterChangeStreamEmit+1,u(E)});Do(t.events.canceled.pipe(Gt(E=>!!E))).then(()=>l.unsubscribe())}var d=-1;async function m(){if(t.stats.down.downstreamResyncOnce=t.stats.down.downstreamResyncOnce+1,!t.events.canceled.getValue()){t.checkpointQueue=t.checkpointQueue.then(()=>Dp(t,"down"));for(var E=await t.checkpointQueue,D=[];!t.events.canceled.getValue();){d=s++;var O=await n.masterChangesSince(E,t.input.pullBatchSize);if(O.documents.length===0||(E=kf([E,O.checkpoint]),D.push(S(O.documents,E)),O.documents.length<t.input.pullBatchSize))break}await Promise.all(D)}}function y(E){t.stats.down.downstreamProcessChanges=t.stats.down.downstreamProcessChanges+1;var D=[],O=null;return E.forEach($=>{if($==="RESYNC")throw new Error("SNH");Au(D,$.documents),O=kf([O,$.checkpoint])}),S(D,Ze(O))}var g=Tn,b={docs:{}};function S(E,D){var O=t.primaryPath;return t.stats.down.persistFromMaster=t.stats.down.persistFromMaster+1,E.forEach($=>{var P=$[O];b.docs[P]=$}),b.checkpoint=D,g=g.then(()=>{var $=b.docs;b.docs={};var P=b.checkpoint,C=Object.keys($);if(t.events.canceled.getValue()||C.length===0)return Tn;var B=[],k={},x={},U=[];return Promise.all([t.input.forkInstance.findDocumentsById(C,!0),EO(t,C)]).then(([ie,Y])=>{var _e=new Map;return ie.forEach(le=>_e.set(le[O],le)),Promise.all(C.map(async le=>{var me=_e.get(le),ke=me?pa(me,t.hasAttachments,!1):void 0,Pe=$[le],We=Y[le];We&&me&&We.metaDocument.isResolvedConflict===me._rev&&await t.streamQueue.up;var nt=!We||!ke?!1:t.input.conflictHandler.isEqual(We.docData,ke,"downstream-check-if-equal-0");if(!nt&&We&&We.docData._rev&&me&&me._meta[t.input.identifier]&&ba(me._rev)===me._meta[t.input.identifier]&&(nt=!0),me&&We&&nt===!1||me&&!We)return Tn;var et=ke?t.input.conflictHandler.isEqual(Pe,ke,"downstream-check-if-equal-1"):!1;if(ke&&et)return(!We||nt===!1)&&U.push(await Cp(t,ke,We?We.metaDocument:void 0)),Tn;var Ee=Object.assign({},Pe,me?{_meta:Kt(me._meta),_attachments:t.hasAttachments&&Pe._attachments?Pe._attachments:{},_rev:Di()}:{_meta:{lwt:vn()},_rev:Di(),_attachments:t.hasAttachments&&Pe._attachments?Pe._attachments:{}});if(Pe._rev){var je=me?ba(me._rev)+1:1;Ee._meta[t.input.identifier]=je,t.input.keepMeta&&(Ee._rev=Pe._rev)}t.input.keepMeta&&Pe._meta&&(Ee._meta=Pe._meta);var F={previous:me,document:Ee};F.document._rev=F.document._rev?F.document._rev:No(r,F.previous),B.push(F),k[le]=F,x[le]=await Cp(t,Pe,We?We.metaDocument:void 0)}))}).then(async()=>{if(B.length>0)return t.input.forkInstance.bulkWrite(B,await t.downstreamBulkWriteFlag).then(ie=>{var Y=Ci(t.primaryPath,B,ie);Y.forEach(le=>{var me=le[O];t.events.processed.down.next(k[me]),U.push(x[me])});var _e;if(ie.error.forEach(le=>{if(le.status!==409){var me=Ve("RC_PULL",{writeError:le});t.events.error.next(me),_e=me}}),_e)throw _e})}).then(()=>{if(U.length>0)return t.input.metaInstance.bulkWrite(hg(t,U),"replication-down-write-meta").then(ie=>{ie.error.forEach(Y=>{t.events.error.next(Ve("RC_PULL",{id:Y.documentId,writeError:Y}))})})}).then(()=>{Rp(t,"down",P)})}).catch($=>t.events.error.next($)),g}}async function rT(t,e,r){var n=t.input.conflictHandler,s=n.isEqual(e.realMasterState,e.newDocumentState,"replication-resolve-conflict");if(!s){var a=await n.resolve(e,"replication-resolve-conflict"),u=Object.assign({},a,{_meta:Kt(r._meta),_rev:Di(),_attachments:Kt(r._attachments)});return u._meta.lwt=vn(),u._rev=No(await t.checkpointKey,r),u}}async function yg(t,e,r,n){if(!r._attachments||n&&!n._attachments)throw new Error("_attachments missing");var s=r[t],a=new Set(n&&n._attachments?Object.keys(n._attachments):[]);return await Promise.all(Object.entries(r._attachments).map(async([u,l])=>{if((!a.has(u)||n&&Ze(n._attachments)[u].digest!==l.digest)&&!l.data){var d=await e.getAttachmentData(s,u,l.digest);l.data=d}})),r}async function nT(t){if(t.input.initialCheckpoint&&t.input.initialCheckpoint.upstream){var e=await Dp(t,"up");e||await Rp(t,"up",t.input.initialCheckpoint.upstream)}var r=t.input.replicationHandler;t.streamQueue.up=t.streamQueue.up.then(()=>y().then(()=>g()));var n=0,s=-1,a=[],u=xs,l={docs:{}},d=t.input.forkInstance.changeStream().subscribe(S=>{if(!t.events.paused.getValue())return t.stats.up.forkChangeStreamEmit=t.stats.up.forkChangeStreamEmit+1,a.push({task:S,time:n++}),t.events.active.up.getValue()||t.events.active.up.next(!0),t.input.waitBeforePersist?t.input.waitBeforePersist().then(()=>g()):g()}),m=r.masterChangeStream$.pipe(Gt(S=>S==="RESYNC")).subscribe(()=>{a.push({task:"RESYNC",time:n++}),g()});Do(t.events.canceled.pipe(Gt(S=>!!S))).then(()=>{d.unsubscribe(),m.unsubscribe()});async function y(){if(t.stats.up.upstreamInitialSync=t.stats.up.upstreamInitialSync+1,!t.events.canceled.getValue()){t.checkpointQueue=t.checkpointQueue.then(()=>Dp(t,"up"));for(var S=await t.checkpointQueue,E=new Set,D=async function(){s=n++,E.size>3&&await Promise.race(Array.from(E));var P=await GI(t.input.forkInstance,t.input.pushBatchSize,S);if(P.documents.length===0)return 1;S=kf([S,P.checkpoint]);var C=b(P.documents,Ze(S));E.add(C),C.catch().then(()=>E.delete(C))};!t.events.canceled.getValue()&&!await D(););var O=await Promise.all(E),$=O.find(P=>!!P);$?await y():!t.firstSyncDone.up.getValue()&&!t.events.canceled.getValue()&&t.firstSyncDone.up.next(!0)}}function g(){if(t.events.canceled.getValue()||a.length===0){t.events.active.up.next(!1);return}t.stats.up.processTasks=t.stats.up.processTasks+1,t.events.active.up.next(!0),t.streamQueue.up=t.streamQueue.up.then(async()=>{for(var S=[],E;a.length>0;){var D=Ze(a.shift());if(!(D.time<s)){if(D.task==="RESYNC"){t.events.active.up.next(!1),await y();return}D.task.context!==await t.downstreamBulkWriteFlag&&Au(S,D.task.events.map(O=>O.documentData)),E=kf([E,D.task.checkpoint])}}if(await b(S,E),a.length===0)t.events.active.up.next(!1);else return g()})}function b(S,E){return t.stats.up.persistToMaster=t.stats.up.persistToMaster+1,S.forEach(D=>{var O=D[t.primaryPath];l.docs[O]=D}),l.checkpoint=E,u=u.then(async()=>{if(t.events.canceled.getValue())return!1;var D=l.docs;l.docs={};var O=l.checkpoint,$=Object.keys(D);function P(){return Rp(t,"up",O)}if($.length===0)return P(),!1;var C=await EO(t,$),B={},k=[],x={},U={};if(await Promise.all($.map(async F=>{var j=D[F];U[F]=j;var ae=pa(j,t.hasAttachments,!!t.input.keepMeta),Q=C[F];Q&&Q.metaDocument.isResolvedConflict!==j._rev&&t.input.conflictHandler.isEqual(Q.docData,ae,"upstream-check-if-equal")||Q&&Q.docData._rev&&ba(j._rev)===j._meta[t.input.identifier]||(k.push(F),B[F]={assumedMasterState:Q?Q.docData:void 0,newDocumentState:ae},x[F]=await Cp(t,ae,Q?Q.metaDocument:void 0))})),k.length===0)return P(),!1;var ie=Object.values(B),Y=new Set,_e={},le=SR(ie,t.input.pushBatchSize);await Promise.all(le.map(async F=>{t.hasAttachments&&await Promise.all(F.map(async ae=>{ae.newDocumentState=await yg(t.primaryPath,t.input.forkInstance,yn(ae.newDocumentState),ae.assumedMasterState)}));var j=await r.masterWrite(F);j.forEach(ae=>{var Q=ae[t.primaryPath];Y.add(Q),_e[Q]=ae})}));var me=[];if(k.forEach(F=>{Y.has(F)||(t.events.processed.up.next(B[F]),me.push(x[F]))}),t.events.canceled.getValue())return!1;me.length>0&&await t.input.metaInstance.bulkWrite(hg(t,me),"replication-up-write-meta");var ke=!1;if(Y.size>0){t.stats.up.persistToMasterHadConflicts=t.stats.up.persistToMasterHadConflicts+1;var Pe=[],We={};if(await Promise.all(Object.entries(_e).map(([F,j])=>{var ae=B[F],Q={newDocumentState:ae.newDocumentState,assumedMasterState:ae.assumedMasterState,realMasterState:j};return rT(t,Q,U[F]).then(async M=>{if(M){t.events.resolvedConflicts.next({input:Q,output:M}),Pe.push({previous:U[F],document:M});var A=C[F];We[F]=await Cp(t,Ze(j),A?A.metaDocument:void 0,M._rev)}})})),Pe.length>0){ke=!0,t.stats.up.persistToMasterConflictWrites=t.stats.up.persistToMasterConflictWrites+1;var nt=await t.input.forkInstance.bulkWrite(Pe,"replication-up-write-conflict"),et;if(nt.error.forEach(F=>{if(F.status!==409){var j=Ve("RC_PUSH",{writeError:F});t.events.error.next(j),et=j}}),et)throw et;var Ee=[],je=Ci(t.primaryPath,Pe,nt);je.forEach(F=>{var j=F[t.primaryPath];Ee.push(We[j])}),Ee.length>0&&await t.input.metaInstance.bulkWrite(hg(t,Ee),"replication-up-write-conflict-meta")}}return P(),ke}).catch(D=>(t.events.error.next(D),!1)),u}}function IO(t){t=Kt(t),t.forkInstance=pg(t.forkInstance),t.metaInstance=pg(t.metaInstance);var e=eT(t),r={primaryPath:on(t.forkInstance.schema.primaryKey),hasAttachments:!!t.forkInstance.schema.attachments,input:t,checkpointKey:e,downstreamBulkWriteFlag:e.then(n=>"replication-downstream-"+n),events:{canceled:new Ii(!1),paused:new Ii(!1),active:{down:new Ii(!0),up:new Ii(!0)},processed:{down:new Hr,up:new Hr},resolvedConflicts:new Hr,error:new Hr},stats:{down:{addNewTask:0,downstreamProcessChanges:0,downstreamResyncOnce:0,masterChangeStreamEmit:0,persistFromMaster:0},up:{forkChangeStreamEmit:0,persistToMaster:0,persistToMasterConflictWrites:0,persistToMasterHadConflicts:0,processTasks:0,upstreamInitialSync:0}},firstSyncDone:{down:new Ii(!1),up:new Ii(!1)},streamQueue:{down:Tn,up:Tn},checkpointQueue:Tn,lastCheckpointDoc:{}};return tT(r),nT(r),r}function cp(t){return Do(nI([t.firstSyncDone.down.pipe(Gt(e=>!!e)),t.firstSyncDone.up.pipe(Gt(e=>!!e))])).then(()=>{})}function vg(t){return Promise.all([t.streamQueue.up,t.streamQueue.down,t.checkpointQueue])}function iT(t,e,r,n=!1){t=pg(t);var s=!!t.schema.attachments,a=on(t.schema.primaryKey),u={masterChangeStream$:t.changeStream().pipe(es(async l=>{var d={checkpoint:l.checkpoint,documents:await Promise.all(l.events.map(async m=>{var y=pa(m.documentData,s,n);return s&&(y=await yg(a,t,yn(y),void 0)),y}))};return d})),masterChangesSince(l,d){return GI(t,d,l).then(async m=>({checkpoint:m.documents.length>0?m.checkpoint:l,documents:await Promise.all(m.documents.map(async y=>{var g=pa(y,s,n);return s&&(g=await yg(a,t,yn(g),void 0)),g}))}))},async masterWrite(l){var d={};l.forEach(D=>{var O=D.newDocumentState[a];d[O]=D});var m=Object.keys(d),y=await t.findDocumentsById(m,!0),g=new Map;y.forEach(D=>g.set(D[a],D));var b=[],S=[];if(await Promise.all(Object.entries(d).map(([D,O])=>{var $=g.get(D);$?$&&!O.assumedMasterState?b.push(pa($,s,n)):e.isEqual(pa($,s,n),Ze(O.assumedMasterState),"rxStorageInstanceToReplicationHandler-masterWrite")===!0?S.push({previous:$,document:Ab(r,s,n,O.newDocumentState,$)}):b.push(pa($,s,n)):S.push({document:Ab(r,s,n,O.newDocumentState)})})),S.length>0){var E=await t.bulkWrite(S,"replication-master-write");E.error.forEach(D=>{if(D.status!==409)throw Ve("SNH",{name:"non conflict error",error:D});b.push(pa(Ze(D.documentInDb),s,n))})}return b}};return u}async function OO(t){t.events.canceled.next(!0),t.events.active.up.complete(),t.events.active.down.complete(),t.events.processed.up.complete(),t.events.processed.down.complete(),t.events.resolvedConflicts.complete(),t.events.canceled.complete(),await t.checkpointQueue}function sT(t){return t&&typeof t.then=="function"}Promise.resolve(!1);var oT=Promise.resolve(!0),Co=Promise.resolve();function Su(t,e){return t||(t=0),new Promise(function(r){return setTimeout(function(){return r(e)},t)})}function aT(t,e){return Math.floor(Math.random()*(e-t+1)+t)}function jf(){return Math.random().toString(36).substring(2)}var vv=0;function Uf(){var t=Date.now()*1e3;return t<=vv&&(t=vv+1),vv=t,t}function uT(){return typeof navigator<"u"&&typeof navigator.locks<"u"&&typeof navigator.locks.request=="function"}var cT=Uf,lT="native";function fT(t){var e={time:Uf(),messagesCallback:null,bc:new BroadcastChannel(t),subFns:[]};return e.bc.onmessage=function(r){e.messagesCallback&&e.messagesCallback(r.data)},e}function dT(t){t.bc.close(),t.subFns=[]}function hT(t,e){try{return t.bc.postMessage(e,!1),Co}catch(r){return Promise.reject(r)}}function pT(t,e){t.messagesCallback=e}function mT(){if(typeof globalThis<"u"&&globalThis.Deno&&globalThis.Deno.args)return!0;if((typeof window<"u"||typeof self<"u")&&typeof BroadcastChannel=="function"){if(BroadcastChannel._pubkey)throw new Error("BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill");return!0}else return!1}function yT(){return 150}var vT={create:fT,close:dT,onMessage:pT,postMessage:hT,canBeUsed:mT,type:lT,averageResponseTime:yT,microSeconds:cT};class kO{ttl;map=new Map;_to=!1;constructor(e){this.ttl=e}has(e){const r=this.map.get(e);return typeof r>"u"?!1:r<gg()-this.ttl?(this.map.delete(e),!1):!0}add(e){this.map.delete(e),this.map.set(e,gg()),this._to||(this._to=!0,setTimeout(()=>{this._to=!1,gT(this)},0))}clear(){this.map.clear()}}function gT(t){const e=gg()-t.ttl,r=t.map[Symbol.iterator]();for(;;){const n=r.next().value;if(!n)break;const s=n[0];if(n[1]<e)t.map.delete(s);else break}}function gg(){return Date.now()}function y0(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=JSON.parse(JSON.stringify(t));return typeof e.webWorkerSupport>"u"&&(e.webWorkerSupport=!0),e.idb||(e.idb={}),e.idb.ttl||(e.idb.ttl=1e3*45),e.idb.fallbackInterval||(e.idb.fallbackInterval=150),t.idb&&typeof t.idb.onclose=="function"&&(e.idb.onclose=t.idb.onclose),e.localstorage||(e.localstorage={}),e.localstorage.removeTimeout||(e.localstorage.removeTimeout=1e3*60),t.methods&&(e.methods=t.methods),e.node||(e.node={}),e.node.ttl||(e.node.ttl=1e3*60*2),e.node.maxParallelWrites||(e.node.maxParallelWrites=2048),typeof e.node.useFastPath>"u"&&(e.node.useFastPath=!0),e}var _T=Uf,wT="pubkey.broadcast-channel-0-",xo="messages",wm={durability:"relaxed"},bT="idb";function PO(){if(typeof indexedDB<"u")return indexedDB;if(typeof window<"u"){if(typeof window.mozIndexedDB<"u")return window.mozIndexedDB;if(typeof window.webkitIndexedDB<"u")return window.webkitIndexedDB;if(typeof window.msIndexedDB<"u")return window.msIndexedDB}return!1}function v0(t){t.commit&&t.commit()}function ST(t){var e=PO(),r=wT+t,n=e.open(r);return n.onupgradeneeded=function(s){var a=s.target.result;a.createObjectStore(xo,{keyPath:"id",autoIncrement:!0})},new Promise(function(s,a){n.onerror=function(u){return a(u)},n.onsuccess=function(){s(n.result)}})}function ET(t,e,r){var n=Date.now(),s={uuid:e,time:n,data:r},a=t.transaction([xo],"readwrite",wm);return new Promise(function(u,l){a.oncomplete=function(){return u()},a.onerror=function(m){return l(m)};var d=a.objectStore(xo);d.add(s),v0(a)})}function IT(t,e){var r=t.transaction(xo,"readonly",wm),n=r.objectStore(xo),s=[],a=IDBKeyRange.bound(e+1,1/0);if(n.getAll){var u=n.getAll(a);return new Promise(function(d,m){u.onerror=function(y){return m(y)},u.onsuccess=function(y){d(y.target.result)}})}function l(){try{return a=IDBKeyRange.bound(e+1,1/0),n.openCursor(a)}catch{return n.openCursor()}}return new Promise(function(d,m){var y=l();y.onerror=function(g){return m(g)},y.onsuccess=function(g){var b=g.target.result;b?b.value.id<e+1?b.continue(e+1):(s.push(b.value),b.continue()):(v0(r),d(s))}})}function OT(t,e){if(t.closed)return Promise.resolve([]);var r=t.db.transaction(xo,"readwrite",wm),n=r.objectStore(xo);return Promise.all(e.map(function(s){var a=n.delete(s);return new Promise(function(u){a.onsuccess=function(){return u()}})}))}function kT(t,e){var r=Date.now()-e,n=t.transaction(xo,"readonly",wm),s=n.objectStore(xo),a=[];return new Promise(function(u){s.openCursor().onsuccess=function(l){var d=l.target.result;if(d){var m=d.value;m.time<r?(a.push(m),d.continue()):(v0(n),u(a))}else u(a)}})}function PT(t){return kT(t.db,t.options.idb.ttl).then(function(e){return OT(t,e.map(function(r){return r.id}))})}function DT(t,e){return e=y0(e),ST(t).then(function(r){var n={closed:!1,lastCursorId:0,channelName:t,options:e,uuid:jf(),eMIs:new kO(e.idb.ttl*2),writeBlockPromise:Co,messagesCallback:null,readQueuePromises:[],db:r};return r.onclose=function(){n.closed=!0,e.idb.onclose&&e.idb.onclose()},DO(n),n})}function DO(t){t.closed||RO(t).then(function(){return Su(t.options.idb.fallbackInterval)}).then(function(){return DO(t)})}function RT(t,e){return!(t.uuid===e.uuid||e.eMIs.has(t.id)||t.data.time<e.messagesCallbackTime)}function RO(t){return t.closed||!t.messagesCallback?Co:IT(t.db,t.lastCursorId).then(function(e){var r=e.filter(function(n){return!!n}).map(function(n){return n.id>t.lastCursorId&&(t.lastCursorId=n.id),n}).filter(function(n){return RT(n,t)}).sort(function(n,s){return n.time-s.time});return r.forEach(function(n){t.messagesCallback&&(t.eMIs.add(n.id),t.messagesCallback(n.data))}),Co})}function CT(t){t.closed=!0,t.db.close()}function $T(t,e){return t.writeBlockPromise=t.writeBlockPromise.then(function(){return ET(t.db,t.uuid,e)}).then(function(){aT(0,10)===0&&PT(t)}),t.writeBlockPromise}function AT(t,e,r){t.messagesCallbackTime=r,t.messagesCallback=e,RO(t)}function NT(){return!!PO()}function TT(t){return t.idb.fallbackInterval*2}var xT={create:DT,close:CT,onMessage:AT,postMessage:$T,canBeUsed:NT,type:bT,averageResponseTime:TT,microSeconds:_T},MT=Uf,FT="pubkey.broadcastChannel-",BT="localstorage";function CO(){var t;if(typeof window>"u")return null;try{t=window.localStorage,t=window["ie8-eventlistener/storage"]||window.localStorage}catch{}return t}function $O(t){return FT+t}function LT(t,e){return new Promise(function(r){Su().then(function(){var n=$O(t.channelName),s={token:jf(),time:Date.now(),data:e,uuid:t.uuid},a=JSON.stringify(s);CO().setItem(n,a);var u=document.createEvent("Event");u.initEvent("storage",!0,!0),u.key=n,u.newValue=a,window.dispatchEvent(u),r()})})}function jT(t,e){var r=$O(t),n=function(a){a.key===r&&e(JSON.parse(a.newValue))};return window.addEventListener("storage",n),n}function UT(t){window.removeEventListener("storage",t)}function zT(t,e){if(e=y0(e),!AO())throw new Error("BroadcastChannel: localstorage cannot be used");var r=jf(),n=new kO(e.localstorage.removeTimeout),s={channelName:t,uuid:r,eMIs:n};return s.listener=jT(t,function(a){s.messagesCallback&&a.uuid!==r&&(!a.token||n.has(a.token)||a.data.time&&a.data.time<s.messagesCallbackTime||(n.add(a.token),s.messagesCallback(a.data)))}),s}function qT(t){UT(t.listener)}function VT(t,e,r){t.messagesCallbackTime=r,t.messagesCallback=e}function AO(){var t=CO();if(!t)return!1;try{var e="__broadcastchannel_check";t.setItem(e,"works"),t.removeItem(e)}catch{return!1}return!0}function KT(){var t=120,e=navigator.userAgent.toLowerCase();return e.includes("safari")&&!e.includes("chrome")?t*2:t}var WT={create:zT,close:qT,onMessage:VT,postMessage:LT,canBeUsed:AO,type:BT,averageResponseTime:KT,microSeconds:MT},NO=Uf,HT="simulate",g0=new Set;function QT(t){var e={time:NO(),name:t,messagesCallback:null};return g0.add(e),e}function YT(t){g0.delete(t)}var TO=5;function GT(t,e){return new Promise(function(r){return setTimeout(function(){var n=Array.from(g0);n.forEach(function(s){s.name===t.name&&s!==t&&s.messagesCallback&&s.time<e.time&&s.messagesCallback(e)}),r()},TO)})}function JT(t,e){t.messagesCallback=e}function XT(){return!0}function ZT(){return TO}var ex={create:QT,close:YT,onMessage:JT,postMessage:GT,canBeUsed:XT,type:HT,averageResponseTime:ZT,microSeconds:NO},Nb=[vT,xT,WT];function tx(t){var e=[].concat(t.methods,Nb).filter(Boolean);if(t.type){if(t.type==="simulate")return ex;var r=e.find(function(s){return s.type===t.type});if(r)return r;throw new Error("method-type "+t.type+" not found")}t.webWorkerSupport||(e=e.filter(function(s){return s.type!=="idb"}));var n=e.find(function(s){return s.canBeUsed()});if(n)return n;throw new Error("No usable method found in "+JSON.stringify(Nb.map(function(s){return s.type})))}var xO=new Set,rx=0,bm=function(e,r){this.id=rx++,xO.add(this),this.name=e,this.options=y0(r),this.method=tx(this.options),this._iL=!1,this._onML=null,this._addEL={message:[],internal:[]},this._uMP=new Set,this._befC=[],this._prepP=null,nx(this)};bm._pubkey=!0;bm.prototype={postMessage:function(e){if(this.closed)throw new Error("BroadcastChannel.postMessage(): Cannot post message after channel has closed "+JSON.stringify(e));return Tb(this,"message",e)},postInternal:function(e){return Tb(this,"internal",e)},set onmessage(t){var e=this.method.microSeconds(),r={time:e,fn:t};Mb(this,"message",this._onML),t&&typeof t=="function"?(this._onML=r,xb(this,"message",r)):this._onML=null},addEventListener:function(e,r){var n=this.method.microSeconds(),s={time:n,fn:r};xb(this,e,s)},removeEventListener:function(e,r){var n=this._addEL[e].find(function(s){return s.fn===r});Mb(this,e,n)},close:function(){var e=this;if(!this.closed){xO.delete(this),this.closed=!0;var r=this._prepP?this._prepP:Co;return this._onML=null,this._addEL.message=[],r.then(function(){return Promise.all(Array.from(e._uMP))}).then(function(){return Promise.all(e._befC.map(function(n){return n()}))}).then(function(){return e.method.close(e._state)})}},get type(){return this.method.type},get isClosed(){return this.closed}};function Tb(t,e,r){var n=t.method.microSeconds(),s={time:n,type:e,data:r},a=t._prepP?t._prepP:Co;return a.then(function(){var u=t.method.postMessage(t._state,s);return t._uMP.add(u),u.catch().then(function(){return t._uMP.delete(u)}),u})}function nx(t){var e=t.method.create(t.name,t.options);sT(e)?(t._prepP=e,e.then(function(r){t._state=r})):t._state=e}function MO(t){return t._addEL.message.length>0||t._addEL.internal.length>0}function xb(t,e,r){t._addEL[e].push(r),ix(t)}function Mb(t,e,r){t._addEL[e]=t._addEL[e].filter(function(n){return n!==r}),sx(t)}function ix(t){if(!t._iL&&MO(t)){var e=function(s){t._addEL[s.type].forEach(function(a){s.time>=a.time&&a.fn(s.data)})},r=t.method.microSeconds();t._prepP?t._prepP.then(function(){t._iL=!0,t.method.onMessage(t._state,e,r)}):(t._iL=!0,t.method.onMessage(t._state,e,r))}}function sx(t){if(t._iL&&!MO(t)){t._iL=!1;var e=t.method.microSeconds();t.method.onMessage(t._state,null,e)}}function ox(t){if(typeof WorkerGlobalScope=="function"&&self instanceof WorkerGlobalScope){var e=self.close.bind(self);self.close=function(){return t(),e()}}else{if(typeof window.addEventListener!="function")return;window.addEventListener("beforeunload",function(){t()},!0),window.addEventListener("unload",function(){t()},!0)}}function ax(t){process.on("exit",function(){return t()}),process.on("beforeExit",function(){return t().then(function(){return process.exit()})}),process.on("SIGINT",function(){return t().then(function(){return process.exit()})}),process.on("uncaughtException",function(e){return t().then(function(){console.trace(e),process.exit(101)})})}var ux=Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]",cx=ux?ax:ox,cf=new Set,Fb=!1;function lx(){Fb||(Fb=!0,cx(dx))}function fx(t){if(lx(),typeof t!="function")throw new Error("Listener is no function");cf.add(t);var e={remove:function(){return cf.delete(t)},run:function(){return cf.delete(t),t()}};return e}function dx(){var t=[];return cf.forEach(function(e){t.push(e()),cf.delete(e)}),Promise.all(t)}function Cu(t,e){var r={context:"leader",action:e,token:t.token};return t.broadcastChannel.postInternal(r)}function FO(t){t.isLeader=!0,t._hasLeader=!0;var e=fx(function(){return t.die()});t._unl.push(e);var r=function(s){s.context==="leader"&&s.action==="apply"&&Cu(t,"tell"),s.context==="leader"&&s.action==="tell"&&!t._dpLC&&(t._dpLC=!0,t._dpL(),Cu(t,"tell"))};return t.broadcastChannel.addEventListener("internal",r),t._lstns.push(r),Cu(t,"tell")}var BO=function(e,r){var n=this;this.broadcastChannel=e,e._befC.push(function(){return n.die()}),this._options=r,this.isLeader=!1,this.isDead=!1,this.token=jf(),this._lstns=[],this._unl=[],this._dpL=function(){},this._dpLC=!1,this._wKMC={},this.lN="pubkey-bc||"+e.method.type+"||"+e.name};BO.prototype={hasLeader:function(){var e=this;return navigator.locks.query().then(function(r){var n=r.held?r.held.filter(function(s){return s.name===e.lN}):[];return!!(n&&n.length>0)})},awaitLeadership:function(){var e=this;if(!this._wLMP){this._wKMC.c=new AbortController;var r=new Promise(function(n,s){e._wKMC.res=n,e._wKMC.rej=s});this._wLMP=new Promise(function(n,s){navigator.locks.request(e.lN,{signal:e._wKMC.c.signal},function(){return e._wKMC.c=void 0,FO(e),n(),r}).catch(function(a){e._wKMC.rej&&e._wKMC.rej(a),s(a)})})}return this._wLMP},set onduplicate(t){},die:function(){var e=this;return this._lstns.forEach(function(r){return e.broadcastChannel.removeEventListener("internal",r)}),this._lstns=[],this._unl.forEach(function(r){return r.remove()}),this._unl=[],this.isLeader&&(this.isLeader=!1),this.isDead=!0,this._wKMC.res&&this._wKMC.res(),this._wKMC.c&&this._wKMC.c.abort("LeaderElectionWebLock.die() called"),Cu(this,"death")}};var LO=function(e,r){var n=this;this.broadcastChannel=e,this._options=r,this.isLeader=!1,this._hasLeader=!1,this.isDead=!1,this.token=jf(),this._aplQ=Co,this._aplQC=0,this._unl=[],this._lstns=[],this._dpL=function(){},this._dpLC=!1;var s=function(u){u.context==="leader"&&(u.action==="death"&&(n._hasLeader=!1),u.action==="tell"&&(n._hasLeader=!0))};this.broadcastChannel.addEventListener("internal",s),this._lstns.push(s)};LO.prototype={hasLeader:function(){return Promise.resolve(this._hasLeader)},applyOnce:function(e){var r=this;if(this.isLeader)return Su(0,!0);if(this.isDead)return Su(0,!1);if(this._aplQC>1)return this._aplQ;var n=function(){if(r.isLeader)return oT;var a=!1,u,l=new Promise(function(y){u=function(){a=!0,y()}}),d=function(g){g.context==="leader"&&g.token!=r.token&&(g.action==="apply"&&g.token>r.token&&u(),g.action==="tell"&&(u(),r._hasLeader=!0))};r.broadcastChannel.addEventListener("internal",d);var m=e?r._options.responseTime*4:r._options.responseTime;return Cu(r,"apply").then(function(){return Promise.race([Su(m),l.then(function(){return Promise.reject(new Error)})])}).then(function(){return Cu(r,"apply")}).then(function(){return Promise.race([Su(m),l.then(function(){return Promise.reject(new Error)})])}).catch(function(){}).then(function(){return r.broadcastChannel.removeEventListener("internal",d),a?!1:FO(r).then(function(){return!0})})};return this._aplQC=this._aplQC+1,this._aplQ=this._aplQ.then(function(){return n()}).then(function(){r._aplQC=r._aplQC-1}),this._aplQ.then(function(){return r.isLeader})},awaitLeadership:function(){return this._aLP||(this._aLP=hx(this)),this._aLP},set onduplicate(t){this._dpL=t},die:function(){var e=this;return this._lstns.forEach(function(r){return e.broadcastChannel.removeEventListener("internal",r)}),this._lstns=[],this._unl.forEach(function(r){return r.remove()}),this._unl=[],this.isLeader&&(this._hasLeader=!1,this.isLeader=!1),this.isDead=!0,Cu(this,"death")}};function hx(t){return t.isLeader?Co:new Promise(function(e){var r=!1;function n(){r||(r=!0,t.broadcastChannel.removeEventListener("internal",a),e(!0))}t.applyOnce().then(function(){t.isLeader&&n()});var s=function(){return Su(t._options.fallbackInterval).then(function(){if(!(t.isDead||r))if(t.isLeader)n();else return t.applyOnce(!0).then(function(){t.isLeader?n():s()})})};s();var a=function(l){l.context==="leader"&&l.action==="death"&&(t._hasLeader=!1,t.applyOnce().then(function(){t.isLeader&&n()}))};t.broadcastChannel.addEventListener("internal",a),t._lstns.push(a)})}function px(t,e){return t||(t={}),t=JSON.parse(JSON.stringify(t)),t.fallbackInterval||(t.fallbackInterval=3e3),t.responseTime||(t.responseTime=e.method.averageResponseTime(e.options)),t}function mx(t,e){if(t._leaderElector)throw new Error("BroadcastChannel already has a leader-elector");e=px(e,t);var r=uT()?new BO(t,e):new LO(t,e);return t._befC.push(function(){return r.die()}),t._leaderElector=r,r}var $p=new Map;function yx(t,e,r,n){var s=$p.get(e);return s||(s={bc:new bm(["RxDB:",t,r].join("|")),refs:new Set},$p.set(e,s)),s.refs.add(n),s.bc}function Bb(t,e){var r=$p.get(t);if(r&&(r.refs.delete(e),r.refs.size===0))return $p.delete(t),r.bc.close()}function vx(t,e,r,n){if(e.multiInstance){var s=yx(t,e.databaseInstanceToken,r.databaseName,r),a=new Hr,u=b=>{b.storageName===t&&b.databaseName===e.databaseName&&b.collectionName===e.collectionName&&b.version===e.schema.version&&a.next(b.eventBulk)};s.addEventListener("message",u);var l=r.changeStream(),d=!1,m=l.subscribe(b=>{d||s.postMessage({storageName:t,databaseName:e.databaseName,collectionName:e.collectionName,version:e.schema.version,eventBulk:b})});r.changeStream=function(){return a.asObservable().pipe(QC(l))};var y=r.close.bind(r);r.close=async function(){return d=!0,m.unsubscribe(),s.removeEventListener("message",u),await Bb(e.databaseInstanceToken,r),y()};var g=r.remove.bind(r);r.remove=async function(){return d=!0,m.unsubscribe(),s.removeEventListener("message",u),await Bb(e.databaseInstanceToken,r),g()}}}function gx(t,e){var r=e.map(n=>{var s=To(t,n);if(!s)throw new Error("not in schema: "+n);var a=s.type,u;(a==="number"||a==="integer")&&(u=_0(s));var l=EE(n),d=s.maxLength?s.maxLength:0,m;a==="string"?m=g=>{var b=l(g);return b||(b=""),b.padEnd(d," ")}:a==="boolean"?m=g=>{var b=l(g);return b?"1":"0"}:m=g=>{var b=l(g);return Ap(u,b)};var y={fieldName:n,schemaPart:s,parsedLengths:u,getValue:l,getIndexStringPart:m};return y});return r}function _x(t,e){var r=gx(t,e),n=r.length,s=r.map(u=>u.getIndexStringPart),a=function(u){for(var l="",d=0;d<n;++d)l+=s[d](u);return l};return a}function _0(t){var e=Math.floor(t.minimum),r=Math.ceil(t.maximum),n=t.multipleOf,s=r-e,a=s.toString().length,u=n.toString().split("."),l=0;return u.length>1&&(l=u[1].length),{minimum:e,maximum:r,nonDecimals:a,decimals:l,roundedMinimum:e}}function Ap(t,e){typeof e>"u"&&(e=0),e<t.minimum&&(e=t.minimum),e>t.maximum&&(e=t.maximum);var r=(Math.floor(e)-t.roundedMinimum).toString(),n=r.padStart(t.nonDecimals,"0");if(t.decimals>0){var s=e.toString().split("."),a=s.length>1?s[1]:"0";n+=a.padEnd(t.decimals,"0")}return n}function Lb(t,e,r){var n="";return e.forEach((s,a)=>{var u=To(t,s),l=r[a],d=u.type;switch(d){case"string":var m=Ze(u.maxLength,"maxLength not set");typeof l=="string"?n+=l.padEnd(m," "):n+="".padEnd(m," ");break;case"boolean":if(l===null)n+="0";else if(l===Ns)n+="0";else if(l===Gi)n+="1";else{var y=l?"1":"0";n+=y}break;case"number":case"integer":var g=_0(u);if(l===null||l===Ns){var b="0";n+=b.repeat(g.nonDecimals+g.decimals)}else if(l===Gi)n+=Ap(g,g.maximum);else{var S=Ap(g,l);n+=S}break;default:throw new Error("unknown index type "+d)}}),n}function wx(t,e,r){var n="";return e.forEach((s,a)=>{var u=To(t,s),l=r[a],d=u.type;switch(d){case"string":var m=Ze(u.maxLength,"maxLength not set");typeof l=="string"&&l!==Gi?n+=l.padEnd(m," "):l===Ns?n+="".padEnd(m," "):n+="".padEnd(m,Gi);break;case"boolean":if(l===null)n+="1";else{var y=l?"1":"0";n+=y}break;case"number":case"integer":var g=_0(u);if(l===null||l===Gi){var b="9";n+=b.repeat(g.nonDecimals+g.decimals)}else if(l===Ns){var S="0";n+=S.repeat(g.nonDecimals+g.decimals)}else n+=Ap(g,l);break;default:throw new Error("unknown index type "+d)}}),n}var bx=new Map;function Sx(t,e){var r=nn(bx,e,()=>new Map);function n(s){return nn(r,JSON.stringify(s),()=>t(s))}return s=>Object.assign({},s.storage,{name:"validate-"+e+"-"+s.storage.name,async createStorageInstance(a){var u=await s.storage.createStorageInstance(a),l=on(a.schema.primaryKey),d;LR(()=>d=n(a.schema));var m=u.bulkWrite.bind(u);return u.bulkWrite=(y,g)=>{d||(d=n(a.schema));var b=[],S=[];y.forEach(D=>{var O=D.document[l],$=d(D.document);$.length>0?b.push({status:422,isError:!0,documentId:O,validationErrors:$,schema:u.schema,writeRow:D}):S.push(D)});var E=S.length>0?m(S,g):Promise.resolve({error:[],success:[]});return E.then(D=>(b.forEach(O=>{D.error.push(O)}),D))},u}})}var jb=t=>Promise.resolve(t);function Ub(t,e){if(t==="_deleted")return e;e=Kt(e);var r=!!e._deleted;return e[t]=r,delete e._deleted,e}function gv(t,e,r){return r.map(n=>{var s=Kt(n);if(e!=="_deleted"){var a=!!s[e];s._deleted=a,delete s[e]}else s._deleted=!!s._deleted;var u=t.schema.primaryPath;return s[u]=Na(t.schema.jsonSchema,s),s})}function zb(t,e){if(typeof window>"u"||typeof window!="object"||typeof window.addEventListener>"u"||navigator.onLine)return t.promiseWait(e);var r,n=new Promise(s=>{r=()=>{window.removeEventListener("online",r),s()},window.addEventListener("online",r)});return Promise.race([n,t.promiseWait(e)]).then(()=>{window.removeEventListener("online",r)})}function Ex(t){function e(){if(!(typeof document>"u"||typeof document.dispatchEvent!="function")){var n=new Event("mousemove");document.dispatchEvent(n)}}var r=setInterval(e,20*1e3);t.onCancel.push(()=>clearInterval(r))}var Np=new WeakMap,Ix=(function(){function t(r,n,s,a,u,l,d,m,y){this.subs=[],this.subjects={received:new Hr,sent:new Hr,error:new Hr,canceled:new Ii(!1),active:new Ii(!1)},this.received$=this.subjects.received.asObservable(),this.sent$=this.subjects.sent.asObservable(),this.error$=this.subjects.error.asObservable(),this.canceled$=this.subjects.canceled.asObservable(),this.active$=this.subjects.active.asObservable(),this.wasStarted=!1,this.startQueue=Tn,this.onCancel=[],this.callOnStart=void 0,this.remoteEvents$=new Hr,this.replicationIdentifier=r,this.collection=n,this.deletedField=s,this.pull=a,this.push=u,this.live=l,this.retryTime=d,this.autoStart=m,this.toggleOnDocumentVisible=y,this.metaInfoPromise=(async()=>{var S="rx-replication-meta-"+await n.database.hashFunction([this.collection.name,this.replicationIdentifier].join("-")),E=mg(this.collection.schema.jsonSchema,Op(this.collection.schema.jsonSchema));return{collectionName:S,schema:E}})();var g=nn(Np,n,()=>[]);g.push(this),this.collection.onClose.push(()=>this.cancel()),Object.keys(this.subjects).forEach(S=>{Object.defineProperty(this,S+"$",{get:function(){return this.subjects[S].asObservable()}})});var b=new Promise(S=>{this.callOnStart=S});this.startPromise=b}var e=t.prototype;return e.start=function(){return this.startQueue=this.startQueue.then(()=>this._start()),this.startQueue},e._start=async function(){if(!this.isStopped()){if(this.internalReplicationState&&this.internalReplicationState.events.paused.next(!1),this.wasStarted){this.reSync();return}this.wasStarted=!0,this.toggleOnDocumentVisible||Ex(this);var n=this.pull&&this.pull.modifier?this.pull.modifier:jb,s=this.push&&this.push.modifier?this.push.modifier:jb,a=this.collection.database,u=await this.metaInfoPromise,[l]=await Promise.all([this.collection.database.storage.createStorageInstance({databaseName:a.name,collectionName:u.collectionName,databaseInstanceToken:a.token,multiInstance:a.multiInstance,options:{},schema:u.schema,password:a.password,devMode:Jt.isDevMode()}),fO(this.collection,u.collectionName,u.schema)]);this.metaInstance=l,this.internalReplicationState=IO({pushBatchSize:this.push&&this.push.batchSize?this.push.batchSize:100,pullBatchSize:this.pull&&this.pull.batchSize?this.pull.batchSize:100,initialCheckpoint:{upstream:this.push?this.push.initialCheckpoint:void 0,downstream:this.pull?this.pull.initialCheckpoint:void 0},forkInstance:this.collection.storageInstance,metaInstance:this.metaInstance,hashFunction:a.hashFunction,identifier:"rxdbreplication"+this.replicationIdentifier,conflictHandler:this.collection.conflictHandler,replicationHandler:{masterChangeStream$:this.remoteEvents$.asObservable().pipe(Gt(d=>!!this.pull),es(async d=>{if(d==="RESYNC")return d;var m=Kt(d);return m.documents=gv(this.collection,this.deletedField,m.documents),m.documents=await Promise.all(m.documents.map(y=>n(y))),m})),masterChangesSince:async(d,m)=>{if(!this.pull)return{checkpoint:null,documents:[]};for(var y=!1,g={};!y&&!this.isStoppedOrPaused();)try{g=await this.pull.handler(d,m),y=!0}catch(E){var b=Ve("RC_PULL",{checkpoint:d,errors:qc(E).map(D=>eg(D)),direction:"pull"});this.subjects.error.next(b),await zb(this.collection,Ze(this.retryTime))}if(this.isStoppedOrPaused())return{checkpoint:null,documents:[]};var S=Kt(g);return S.documents=gv(this.collection,this.deletedField,S.documents),S.documents=await Promise.all(S.documents.map(E=>n(E))),S},masterWrite:async d=>{if(!this.push)return[];var m=!1;await Ea("preReplicationMasterWrite",{rows:d,collection:this.collection});var y=await Promise.all(d.map(async D=>(D.newDocumentState=await s(D.newDocumentState),D.newDocumentState===null?null:(D.assumedMasterState&&(D.assumedMasterState=await s(D.assumedMasterState)),this.deletedField!=="_deleted"&&(D.newDocumentState=Ub(this.deletedField,D.newDocumentState),D.assumedMasterState&&(D.assumedMasterState=Ub(this.deletedField,D.assumedMasterState))),D)))),g=y.filter(ER),b=null;for(g.length===0&&(m=!0,b=[]);!m&&!this.isStoppedOrPaused();)try{if(b=await this.push.handler(g),!Array.isArray(b))throw Ve("RC_PUSH_NO_AR",{pushRows:d,direction:"push",args:{result:b}});m=!0}catch(D){var S=D.rxdb?D:Ve("RC_PUSH",{pushRows:d,errors:qc(D).map(O=>eg(O)),direction:"push"});this.subjects.error.next(S),await zb(this.collection,Ze(this.retryTime))}if(this.isStoppedOrPaused())return[];await Ea("preReplicationMasterWriteDocumentsHandle",{result:b,collection:this.collection});var E=gv(this.collection,this.deletedField,Ze(b));return E}}}),this.subs.push(this.internalReplicationState.events.error.subscribe(d=>{this.subjects.error.next(d)}),this.internalReplicationState.events.processed.down.subscribe(d=>this.subjects.received.next(d.document)),this.internalReplicationState.events.processed.up.subscribe(d=>{this.subjects.sent.next(d.newDocumentState)}),nI([this.internalReplicationState.events.active.down,this.internalReplicationState.events.active.up]).subscribe(([d,m])=>{var y=d||m;this.subjects.active.next(y)})),this.pull&&this.pull.stream$&&this.live&&this.subs.push(this.pull.stream$.subscribe({next:d=>{this.isStoppedOrPaused()||this.remoteEvents$.next(d)},error:d=>{this.subjects.error.next(d)}})),this.live||(await cp(this.internalReplicationState),await vg(this.internalReplicationState),await this._cancel()),this.callOnStart()}},e.pause=function(){return this.startQueue=this.startQueue.then(()=>{this.internalReplicationState&&this.internalReplicationState.events.paused.next(!0)}),this.startQueue},e.isPaused=function(){return!!(this.internalReplicationState&&this.internalReplicationState.events.paused.getValue())},e.isStopped=function(){return!!this.subjects.canceled.getValue()},e.isStoppedOrPaused=function(){return this.isPaused()||this.isStopped()},e.awaitInitialReplication=async function(){return await this.startPromise,cp(Ze(this.internalReplicationState))},e.awaitInSync=async function(){await this.startPromise,await cp(Ze(this.internalReplicationState));for(var n=2;n>0;)n--,await this.collection.database.requestIdlePromise(),await vg(Ze(this.internalReplicationState));return!0},e.reSync=function(){this.remoteEvents$.next("RESYNC")},e.emitEvent=function(n){this.remoteEvents$.next(n)},e.cancel=async function(){this.startQueue=this.startQueue.catch(()=>{}).then(async()=>{await this._cancel()}),await this.startQueue},e._cancel=async function(n=!1){if(this.isStopped())return xs;var s=this.onCancel.map(a=>RE(a()));return this.internalReplicationState&&await OO(this.internalReplicationState),this.metaInstance&&!n&&s.push(Ze(this.internalReplicationState).checkpointQueue.then(()=>Ze(this.metaInstance).close())),this.subs.forEach(a=>a.unsubscribe()),this.subjects.canceled.next(!0),this.subjects.active.complete(),this.subjects.canceled.complete(),this.subjects.error.complete(),this.subjects.received.complete(),this.subjects.sent.complete(),Promise.all(s)},e.remove=async function(){return this.startQueue=this.startQueue.then(async()=>{var n=await this.metaInfoPromise;await this._cancel(!0),await Ze(this.internalReplicationState).checkpointQueue.then(()=>Ze(this.metaInstance).remove()),await NN(this.collection,n.collectionName,n.schema)}),this.startQueue},t})(),Fn;(function(t){function e(Y){return Array.isArray(Y)?Y.slice():t.isObject(Y)?{...Y}:Y}t.clone=e;function r(Y){let _e=n(Y);return Array.isArray(Y)&&(_e=_e.filter(le=>le!=="length")),_e}t.keys=r;function n(Y){return Y?Object.getOwnPropertyNames(Y):[]}t.keysOfNonArray=n;function s(Y,_e){return l(r(Y),le=>_e(Y[le],le)),Y}t.forOwn=s;function a(Y,_e){return l(n(Y),le=>_e(Y[le],le)),Y}t.forOwnOfNonArray=a;function u(Y,_e){return Array.isArray(Y)?l(Y,_e):a(Y,_e),Y}t.forEach=u;function l(Y,_e){for(let le=0,me=Y.length;le<me&&_e(Y[le],le)!==!1;++le);}t.forEachOfArray=l;function d(Y,..._e){for(const le of _e)u(le,(me,ke)=>{const Pe=Y[ke];Pe instanceof Object&&(me=d(e(Pe),me)),Y[ke]=me});return Y}t.merge=d;function m(Y){return Array.isArray(Y)||(Y=n(Y)),Y.length===0}t.isEmpty=m,t.isFunction=Y=>typeof Y=="function",t.isUndefined=Y=>Y===void 0||Y==="undefined";function y(Y){return Y==null||Y==="undefined"||Y==="null"}t.isNullOrUndefined=y,t.isObject=Y=>Object.prototype.toString.call(Y)==="[object Object]",t.isEmptyObject=Y=>y(Y)||t.isObject(Y)&&m(Y);function g(){return typeof ngDevMode>"u"||!!ngDevMode}t.isDevMode=g;function b(Y){return typeof Y=="number"&&!isNaN(Y)}t.isValidNumber=b;function S(){}t.noop=S;function E(Y){return Y}t.identity=E;function D(Y,_e){const le=[];for(let me=0;me<Y;++me)le[me]=_e(me);return le}t.times=D;function O(Y,_e,le){return t.isUndefined(_e)&&(_e=Y,Y=0),t.isUndefined(le)&&(le=_e<Y?-1:1),D(Math.abs((_e-Y)/(le||1)),me=>Y+le*me)}t.range=O;function $(Y){return t.isObject(Y)?Y._id:String(Y)}t.getMaybeId=$;function P(Y){return Y.filter(E)}t.compact=P;function C(Y){return m(Y)?Y:Array.isArray(Y)?P(Y):Object.entries(Y).filter(([,_e])=>!y(_e)&&!m(_e)).reduce((_e,[le,me])=>({..._e,[le]:me}),{})}t.compactObject=C;function B(){return localStorage.debug?.includes("@ngx-odm/rxdb")}t.isDevModeForced=B;function k(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}t.isTestEnvironment=k,t.logger={log:(function(){const Y="#8d2089";return k()||!g()||!B()?S:console.log.bind(console,"%c[DEBUG::@ngx-odm/rxdb]",`background:${Y};color:#fff;padding:2px;font-size:normal;`)})(),table:(function(){return k()||!g()||!B()?S:console.table.bind(console)})()};function x(Y="Event"){return function(le){return g()?le.pipe(rg({next(me){t.logger.log(`observable:${Y}:next:`,me)},error(me){t.logger.log(`observable:${Y}:error:`,me.message)},complete(){t.logger.log(`observable:${Y}:complete`)}})):le}}t.debug=x;function U(Y=3,_e=1e4){return le=>le.pipe(YC({count:Y,delay:(me,ke)=>{const Pe=Math.pow(2,ke-1)*_e;return t.logger.log("replication:kinto:longpoll:retry",ke,Pe),YE(Pe)}}))}t.retryWithBackoff=U,t.tapOnce=Y=>_e=>ng(()=>(Y(),_e)),t.deferUntil=Y=>_e=>ng(()=>Y.pipe(_f(()=>_e))),t.getDefaultQuery=()=>({selector:{_deleted:{$eq:!1}},skip:0,sort:[{id:"asc"}]});const ie={properties:{id:{type:"string"},_deleted:{type:"boolean"}},primaryKey:"id",indexes:[["_deleted","id"]]};t.getDefaultQuery(),t.getDefaultPreparedQuery=()=>Bf(ie,t.getDefaultQuery())})(Fn||(Fn={}));const jO=()=>typeof window=="object"&&"fetch"in window?window.fetch.bind(window):fetch;function qb(t){return t&&t instanceof Ix}function Vb(t=!1){return ur(e=>(Array.isArray(e)?e:[...e.values()]).map(r=>{const n=r._data?Fn.clone(r._data):Fn.clone(r);return t||(delete n._rev,delete n._attachments,delete n._deleted,delete n._meta),n}))}const{debug:Ox,isEmptyObject:kx,isFunction:Px}=Fn;function Dx(t){return!kx(t)&&Px(t.run)}function Xl(t){return Dx(t)?e=>new br(r=>e.subscribe(n=>t.run(()=>r.next(n)),n=>t.run(()=>r.error(n)),()=>t.run(()=>r.complete()))):e=>e}function zf(){return function(t,e,r){const n=r.value;return r.value=function(...s){return ng(()=>this.initialized$.pipe(_f(()=>n.apply(this,s)),Ox(`collection.${e}`)))},r}}function Sr(){return function(t,e,r){const n=r.value;return r.value=async function(...s){return await t$(this.initialized$).catch(()=>{throw new Error(`Collection "${this.config.name}" was not initialized. Please check RxDB errors.`)}),n.apply(this,s)},r}}var Kb,Wb,Hb,Qb,Yb,Gb;const{getMaybeId:Rx,logger:_v,debug:Cx,noop:$x}=Fn;class Wt{config;dbService;ngZone;currentUrl$;updateQueryParamsFn;_collection;_replicationState=null;_init$=new oI;get initialized$(){return this._init$.asObservable()}get collection(){return this._collection}get db(){return this.dbService.db}get dbOptions(){return this.dbService.dbOptions}get replicationState(){return this._replicationState}get queryParams$(){return this.config.options?.useQueryParams?this.initialized$.pipe(_f(()=>this.collection.queryParams.$)):cv({})}constructor(e,r,n={},s=cv(""),a=$x){this.config=e,this.dbService=r,this.ngZone=n,this.currentUrl$=s,this.updateQueryParamsFn=a,this.init(e).catch(u=>this._init$.error(u))}close(){this.collection?.close()}setQueryParams(e){this.collection.queryParams?.set(e)}patchQueryParams(e){this.collection.queryParams?.patch(e)}async sync(){if(qb(this.replicationState)){this.replicationState.reSync();return}if(typeof this.config.options?.replicationStateFactory=="function"){try{this._replicationState=this.config.options.replicationStateFactory(this.collection)}catch(e){_v.log("replicationState has error, ignore replication"),_v.log(e.message)}if(qb(this.replicationState))return this.replicationState.autoStart||this.replicationState.reSync(),ig(window,"online").pipe(Cx("online"),aI(()=>!this.replicationState.isStopped())).subscribe(()=>{this._replicationState.reSync()}),this.replicationState.startPromise}}async info(){return this.collection.getMetadata()}async import(e){const r=await this.collection.schema.hash,n={name:this.collection.name,schemaHash:r,docs:e};this.collection.importJSON(n)}async export(){return this.collection.exportJSON()}docs(e,r=!1){return(e$(e)?e:cv(e)).pipe(_f(n=>this.collection.find(n).$),Vb(r),Xl(this.ngZone),ko(Oo))}docsByIds(e,r=!1){return this.collection.findByIds(e).$.pipe(Vb(r),Xl(this.ngZone),ko(Oo))}count(e){return this.collection.count(e).$.pipe(Xl(this.ngZone),ko(Oo))}get(e,r=!1){return this.collection.findOne(e).$.pipe(ur(n=>n?n.toMutableJSON(r):null),Xl(this.ngZone),ko(Oo))}async insert(e){return this.collection.insert(e)}async insertBulk(e){return this.collection.bulkInsert(e)}async upsert(e){return this.collection.upsert(e)}async upsertBulk(e){return this.collection.bulkUpsert(e)}async set(e,r){return this.collection.findOne(e).update({$set:r})}async updateBulk(e,r){return this.collection.find(e).update({$set:r})}async remove(e){const r=Rx(e);return this.collection.findOne(r).remove()}async removeBulk(e){return Array.isArray(e)?this.collection.bulkRemove(e):{success:[...(await this.collection.find(e).remove().catch(()=>new Map)).values()],error:[]}}async clear(){return this.collection.remove()}async getAttachments(e){const r=await this.collection.findOne(e).exec();if(!r)return null;const n=r.allAttachments().map(s=>s.getData());return Promise.all(n)}async getAttachmentById(e,r){const n=await this.collection.findOne(e).exec();if(!n)return null;const s=n.getAttachment(r);return s?s.getData():null}async putAttachment(e,r){const n=await this.collection.findOne(e).exec();n&&await n.putAttachment(r)}async removeAttachment(e,r){const n=await this.collection.findOne(e).exec();if(!n)return;const s=n.getAttachment(r);s&&await s.remove()}async addHook(e,r,n=!1){this.collection[e](r,n)}async getLocal(e,r){const n=await this.collection.getLocal(e);return n?r?n?.get(r):n?.toJSON().data:null}getLocal$(e,r){return this.collection.getLocal$(e).pipe(ur(n=>n?r?n.get(r):n.toJSON().data:null),Ia(),Xl(this.ngZone))}async insertLocal(e,r){await this.collection.insertLocal(e,r)}async upsertLocal(e,r){await this.collection.upsertLocal(e,r)}async setLocal(e,r,n){const s=await this.collection.getLocal(e);await this.collection.upsertLocal(e,{...s?.toJSON?.()?.data||{},[r]:n})}async removeLocal(e){await(await this.collection.getLocal(e))?.remove()}async init(e){const{name:r,options:n}=e;try{await this.dbService.initCollections({[r]:e}),this._collection=this.db.collections[r],n?.useQueryParams&&this.collection.queryParamsInit(this.currentUrl$,this.updateQueryParamsFn),this._init$.next(!0),this._init$.complete()}catch(s){if(s.message.includes("DM5")||s.message.includes("DB6")&&s.parameters.previousSchema?.version===s.parameters.schema?.version)_v.log("Reload the page to fix the issue. The database is in a state where it can not be used."),await bO(this.db.name,this.db.storage),window?.location?.reload?.();else throw s}}}Zt([Sr(),Be("design:type",Function),Be("design:paramtypes",[]),Be("design:returntype",Promise)],Wt.prototype,"sync",null);Zt([Sr(),Be("design:type",Function),Be("design:paramtypes",[]),Be("design:returntype",Promise)],Wt.prototype,"info",null);Zt([Sr(),Be("design:type",Function),Be("design:paramtypes",[Array]),Be("design:returntype",Promise)],Wt.prototype,"import",null);Zt([Sr(),Be("design:type",Function),Be("design:paramtypes",[]),Be("design:returntype",Promise)],Wt.prototype,"export",null);Zt([zf(),Be("design:type",Function),Be("design:paramtypes",[Object,Object]),Be("design:returntype",br)],Wt.prototype,"docs",null);Zt([zf(),Be("design:type",Function),Be("design:paramtypes",[Array,Object]),Be("design:returntype",br)],Wt.prototype,"docsByIds",null);Zt([zf(),Be("design:type",Function),Be("design:paramtypes",[Object]),Be("design:returntype",br)],Wt.prototype,"count",null);Zt([zf(),Be("design:type",Function),Be("design:paramtypes",[String,Object]),Be("design:returntype",br)],Wt.prototype,"get",null);Zt([Sr(),Be("design:type",Function),Be("design:paramtypes",[Object]),Be("design:returntype",Promise)],Wt.prototype,"insert",null);Zt([Sr(),Be("design:type",Function),Be("design:paramtypes",[Array]),Be("design:returntype",Promise)],Wt.prototype,"insertBulk",null);Zt([Sr(),Be("design:type",Function),Be("design:paramtypes",[Object]),Be("design:returntype",Promise)],Wt.prototype,"upsert",null);Zt([Sr(),Be("design:type",Function),Be("design:paramtypes",[Array]),Be("design:returntype",Promise)],Wt.prototype,"upsertBulk",null);Zt([Sr(),Be("design:type",Function),Be("design:paramtypes",[String,Object]),Be("design:returntype",Promise)],Wt.prototype,"set",null);Zt([Sr(),Be("design:type",Function),Be("design:paramtypes",[Object,Object]),Be("design:returntype",Promise)],Wt.prototype,"updateBulk",null);Zt([Sr(),Be("design:type",Function),Be("design:paramtypes",[Object]),Be("design:returntype",Promise)],Wt.prototype,"remove",null);Zt([Sr(),Be("design:type",Function),Be("design:paramtypes",[Object]),Be("design:returntype",Promise)],Wt.prototype,"removeBulk",null);Zt([Sr(),Be("design:type",Function),Be("design:paramtypes",[]),Be("design:returntype",Promise)],Wt.prototype,"clear",null);Zt([Sr(),Be("design:type",Function),Be("design:paramtypes",[String]),Be("design:returntype",Promise)],Wt.prototype,"getAttachments",null);Zt([Sr(),Be("design:type",Function),Be("design:paramtypes",[String,String]),Be("design:returntype",Promise)],Wt.prototype,"getAttachmentById",null);Zt([Sr(),Be("design:type",Function),Be("design:paramtypes",[String,Object]),Be("design:returntype",Promise)],Wt.prototype,"putAttachment",null);Zt([Sr(),Be("design:type",Function),Be("design:paramtypes",[String,String]),Be("design:returntype",Promise)],Wt.prototype,"removeAttachment",null);Zt([Sr(),Be("design:type",Function),Be("design:paramtypes",[typeof(Kb=typeof Hook<"u"&&Hook)=="function"?Kb:Object,Object,Object]),Be("design:returntype",Promise)],Wt.prototype,"addHook",null);Zt([Sr(),Be("design:type",Function),Be("design:paramtypes",[String,typeof(Wb=typeof K<"u"&&K)=="function"?Wb:Object]),Be("design:returntype",Promise)],Wt.prototype,"getLocal",null);Zt([zf(),Be("design:type",Function),Be("design:paramtypes",[String,typeof(Hb=typeof K<"u"&&K)=="function"?Hb:Object]),Be("design:returntype",br)],Wt.prototype,"getLocal$",null);Zt([Sr(),Be("design:type",Function),Be("design:paramtypes",[String,typeof(Qb=typeof L<"u"&&L)=="function"?Qb:Object]),Be("design:returntype",Promise)],Wt.prototype,"insertLocal",null);Zt([Sr(),Be("design:type",Function),Be("design:paramtypes",[String,typeof(Yb=typeof L<"u"&&L)=="function"?Yb:Object]),Be("design:returntype",Promise)],Wt.prototype,"upsertLocal",null);Zt([Sr(),Be("design:type",Function),Be("design:paramtypes",[String,typeof(Gb=typeof K<"u"&&K)=="function"?Gb:Object,Object]),Be("design:returntype",Promise)],Wt.prototype,"setLocal",null);Zt([Sr(),Be("design:type",Function),Be("design:paramtypes",[String]),Be("design:returntype",Promise)],Wt.prototype,"removeLocal",null);var lp={exports:{}},Ax=lp.exports,Jb;function Nx(){return Jb||(Jb=1,(function(t,e){(function(r,n){t.exports=n()})(Ax,function(){var r=function(f,p){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,I){_.__proto__=I}||function(_,I){for(var R in I)Object.prototype.hasOwnProperty.call(I,R)&&(_[R]=I[R])})(f,p)},n=function(){return(n=Object.assign||function(f){for(var p,_=1,I=arguments.length;_<I;_++)for(var R in p=arguments[_])Object.prototype.hasOwnProperty.call(p,R)&&(f[R]=p[R]);return f}).apply(this,arguments)};function s(f,p,_){for(var I,R=0,T=p.length;R<T;R++)!I&&R in p||((I=I||Array.prototype.slice.call(p,0,R))[R]=p[R]);return f.concat(I||Array.prototype.slice.call(p))}var a=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:aR,u=Object.keys,l=Array.isArray;function d(f,p){return typeof p!="object"||u(p).forEach(function(_){f[_]=p[_]}),f}typeof Promise>"u"||a.Promise||(a.Promise=Promise);var m=Object.getPrototypeOf,y={}.hasOwnProperty;function g(f,p){return y.call(f,p)}function b(f,p){typeof p=="function"&&(p=p(m(f))),(typeof Reflect>"u"?u:Reflect.ownKeys)(p).forEach(function(_){E(f,_,p[_])})}var S=Object.defineProperty;function E(f,p,_,I){S(f,p,d(_&&g(_,"get")&&typeof _.get=="function"?{get:_.get,set:_.set,configurable:!0}:{value:_,configurable:!0,writable:!0},I))}function D(f){return{from:function(p){return f.prototype=Object.create(p.prototype),E(f.prototype,"constructor",f),{extend:b.bind(null,f.prototype)}}}}var O=Object.getOwnPropertyDescriptor,$=[].slice;function P(f,p,_){return $.call(f,p,_)}function C(f,p){return p(f)}function B(f){if(!f)throw new Error("Assertion Failed")}function k(f){a.setImmediate?setImmediate(f):setTimeout(f,0)}function x(f,p){if(typeof p=="string"&&g(f,p))return f[p];if(!p)return f;if(typeof p!="string"){for(var _=[],I=0,R=p.length;I<R;++I){var T=x(f,p[I]);_.push(T)}return _}var z=p.indexOf(".");if(z!==-1){var W=f[p.substr(0,z)];return W==null?void 0:x(W,p.substr(z+1))}}function U(f,p,_){if(f&&p!==void 0&&!("isFrozen"in Object&&Object.isFrozen(f)))if(typeof p!="string"&&"length"in p){B(typeof _!="string"&&"length"in _);for(var I=0,R=p.length;I<R;++I)U(f,p[I],_[I])}else{var T,z,W=p.indexOf(".");W!==-1?(T=p.substr(0,W),(z=p.substr(W+1))===""?_===void 0?l(f)&&!isNaN(parseInt(T))?f.splice(T,1):delete f[T]:f[T]=_:U(W=!(W=f[T])||!g(f,T)?f[T]={}:W,z,_)):_===void 0?l(f)&&!isNaN(parseInt(p))?f.splice(p,1):delete f[p]:f[p]=_}}function ie(f){var p,_={};for(p in f)g(f,p)&&(_[p]=f[p]);return _}var Y=[].concat;function _e(f){return Y.apply([],f)}var an="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(_e([8,16,32,64].map(function(f){return["Int","Uint","Float"].map(function(p){return p+f+"Array"})}))).filter(function(f){return a[f]}),le=new Set(an.map(function(f){return a[f]})),me=null;function ke(f){return me=new WeakMap,f=(function p(_){if(!_||typeof _!="object")return _;var I=me.get(_);if(I)return I;if(l(_)){I=[],me.set(_,I);for(var R=0,T=_.length;R<T;++R)I.push(p(_[R]))}else if(le.has(_.constructor))I=_;else{var z,W=m(_);for(z in I=W===Object.prototype?{}:Object.create(W),me.set(_,I),_)g(_,z)&&(I[z]=p(_[z]))}return I})(f),me=null,f}var Pe={}.toString;function We(f){return Pe.call(f).slice(8,-1)}var nt=typeof Symbol<"u"?Symbol.iterator:"@@iterator",et=typeof nt=="symbol"?function(f){var p;return f!=null&&(p=f[nt])&&p.apply(f)}:function(){return null};function Ee(f,p){return p=f.indexOf(p),0<=p&&f.splice(p,1),0<=p}var je={};function F(f){var p,_,I,R;if(arguments.length===1){if(l(f))return f.slice();if(this===je&&typeof f=="string")return[f];if(R=et(f)){for(_=[];!(I=R.next()).done;)_.push(I.value);return _}if(f==null)return[f];if(typeof(p=f.length)!="number")return[f];for(_=new Array(p);p--;)_[p]=f[p];return _}for(p=arguments.length,_=new Array(p);p--;)_[p]=arguments[p];return _}var j=typeof Symbol<"u"?function(f){return f[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},ci=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],En=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(ci),ae={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Q(f,p){this.name=f,this.message=p}function M(f,p){return f+". Errors: "+Object.keys(p).map(function(_){return p[_].toString()}).filter(function(_,I,R){return R.indexOf(_)===I}).join(`
`)}function A(f,p,_,I){this.failures=p,this.failedKeys=I,this.successCount=_,this.message=M(f,p)}function q(f,p){this.name="BulkError",this.failures=Object.keys(p).map(function(_){return p[_]}),this.failuresByPos=p,this.message=M(f,this.failures)}D(Q).from(Error).extend({toString:function(){return this.name+": "+this.message}}),D(A).from(Q),D(q).from(Q);var we=En.reduce(function(f,p){return f[p]=p+"Error",f},{}),Oe=Q,be=En.reduce(function(f,p){var _=p+"Error";function I(R,T){this.name=_,R?typeof R=="string"?(this.message="".concat(R).concat(T?`
 `+T:""),this.inner=T||null):typeof R=="object"&&(this.message="".concat(R.name," ").concat(R.message),this.inner=R):(this.message=ae[p]||_,this.inner=null)}return D(I).from(Oe),f[p]=I,f},{});be.Syntax=SyntaxError,be.Type=TypeError,be.Range=RangeError;var Xe=ci.reduce(function(f,p){return f[p+"Error"]=be[p],f},{}),ee=En.reduce(function(f,p){return["Syntax","Type","Range"].indexOf(p)===-1&&(f[p+"Error"]=be[p]),f},{});function J(){}function Se(f){return f}function Ce(f,p){return f==null||f===Se?p:function(_){return p(f(_))}}function Ke(f,p){return function(){f.apply(this,arguments),p.apply(this,arguments)}}function pt(f,p){return f===J?p:function(){var _=f.apply(this,arguments);_!==void 0&&(arguments[0]=_);var I=this.onsuccess,R=this.onerror;this.onsuccess=null,this.onerror=null;var T=p.apply(this,arguments);return I&&(this.onsuccess=this.onsuccess?Ke(I,this.onsuccess):I),R&&(this.onerror=this.onerror?Ke(R,this.onerror):R),T!==void 0?T:_}}function yr(f,p){return f===J?p:function(){f.apply(this,arguments);var _=this.onsuccess,I=this.onerror;this.onsuccess=this.onerror=null,p.apply(this,arguments),_&&(this.onsuccess=this.onsuccess?Ke(_,this.onsuccess):_),I&&(this.onerror=this.onerror?Ke(I,this.onerror):I)}}function Qr(f,p){return f===J?p:function(_){var I=f.apply(this,arguments);d(_,I);var R=this.onsuccess,T=this.onerror;return this.onsuccess=null,this.onerror=null,_=p.apply(this,arguments),R&&(this.onsuccess=this.onsuccess?Ke(R,this.onsuccess):R),T&&(this.onerror=this.onerror?Ke(T,this.onerror):T),I===void 0?_===void 0?void 0:_:d(I,_)}}function Dr(f,p){return f===J?p:function(){return p.apply(this,arguments)!==!1&&f.apply(this,arguments)}}function lr(f,p){return f===J?p:function(){var _=f.apply(this,arguments);if(_&&typeof _.then=="function"){for(var I=this,R=arguments.length,T=new Array(R);R--;)T[R]=arguments[R];return _.then(function(){return p.apply(I,T)})}return p.apply(this,arguments)}}ee.ModifyError=A,ee.DexieError=Q,ee.BulkError=q;var Pt=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function qn(f){Pt=f}var Ir={},Us=100,an=typeof Promise>"u"?[]:(function(){var f=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[f,m(f),f];var p=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[p,m(p),f]})(),ci=an[0],En=an[1],an=an[2],En=En&&En.then,Yr=ci&&ci.constructor,Ai=!!an,Vn=function(f,p){qs.push([f,p]),li&&(queueMicrotask(Xf),li=!1)},zs=!0,li=!0,Kn=[],Mu=[],Fu=Se,Ni={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:J,pgp:!1,env:{},finalize:J},Ge=Ni,qs=[],Ti=0,Lo=[];function Ue(f){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var p=this._PSD=Ge;if(typeof f!="function"){if(f!==Ir)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&ss(this,this._value))}this._state=null,this._value=null,++p.ref,(function _(I,R){try{R(function(T){if(I._state===null){if(T===I)throw new TypeError("A promise cannot be resolved with itself.");var z=I._lib&&Ks();T&&typeof T.then=="function"?_(I,function(W,X){T instanceof Ue?T._then(W,X):T.then(W,X)}):(I._state=!0,I._value=T,vl(I)),z&&os()}},ss.bind(null,I))}catch(T){ss(I,T)}})(this,f)}var Ua={get:function(){var f=Ge,p=Hs;function _(I,R){var T=this,z=!f.global&&(f!==Ge||p!==Hs),W=z&&!ls(),X=new Ue(function(te,oe){Bu(T,new Vs(_l(I,f,z,W),_l(R,f,z,W),te,oe,f))});return this._consoleTask&&(X._consoleTask=this._consoleTask),X}return _.prototype=Ir,_},set:function(f){E(this,"then",f&&f.prototype===Ir?Ua:{get:function(){return f},set:Ua.set})}};function Vs(f,p,_,I,R){this.onFulfilled=typeof f=="function"?f:null,this.onRejected=typeof p=="function"?p:null,this.resolve=_,this.reject=I,this.psd=R}function ss(f,p){var _,I;Mu.push(p),f._state===null&&(_=f._lib&&Ks(),p=Fu(p),f._state=!1,f._value=p,I=f,Kn.some(function(R){return R._value===I._value})||Kn.push(I),vl(f),_&&os())}function vl(f){var p=f._listeners;f._listeners=[];for(var _=0,I=p.length;_<I;++_)Bu(f,p[_]);var R=f._PSD;--R.ref||R.finalize(),Ti===0&&(++Ti,Vn(function(){--Ti==0&&Lu()},[]))}function Bu(f,p){if(f._state!==null){var _=f._state?p.onFulfilled:p.onRejected;if(_===null)return(f._state?p.resolve:p.reject)(f._value);++p.psd.ref,++Ti,Vn(Jf,[_,f,p])}else f._listeners.push(p)}function Jf(f,p,_){try{var I,R=p._value;!p._state&&Mu.length&&(Mu=[]),I=Pt&&p._consoleTask?p._consoleTask.run(function(){return f(R)}):f(R),p._state||Mu.indexOf(R)!==-1||(function(T){for(var z=Kn.length;z;)if(Kn[--z]._value===T._value)return Kn.splice(z,1)})(p),_.resolve(I)}catch(T){_.reject(T)}finally{--Ti==0&&Lu(),--_.psd.ref||_.psd.finalize()}}function Xf(){fs(Ni,function(){Ks()&&os()})}function Ks(){var f=zs;return li=zs=!1,f}function os(){var f,p,_;do for(;0<qs.length;)for(f=qs,qs=[],_=f.length,p=0;p<_;++p){var I=f[p];I[0].apply(null,I[1])}while(0<qs.length);li=zs=!0}function Lu(){var f=Kn;Kn=[],f.forEach(function(I){I._PSD.onunhandled.call(null,I._value,I)});for(var p=Lo.slice(0),_=p.length;_;)p[--_]()}function as(f){return new Ue(Ir,!1,f)}function Ht(f,p){var _=Ge;return function(){var I=Ks(),R=Ge;try{return xi(_,!0),f.apply(this,arguments)}catch(T){p&&p(T)}finally{xi(R,!1),I&&os()}}}b(Ue.prototype,{then:Ua,_then:function(f,p){Bu(this,new Vs(null,null,f,p,Ge))},catch:function(f){if(arguments.length===1)return this.then(null,f);var p=f,_=arguments[1];return typeof p=="function"?this.then(null,function(I){return(I instanceof p?_:as)(I)}):this.then(null,function(I){return(I&&I.name===p?_:as)(I)})},finally:function(f){return this.then(function(p){return Ue.resolve(f()).then(function(){return p})},function(p){return Ue.resolve(f()).then(function(){return as(p)})})},timeout:function(f,p){var _=this;return f<1/0?new Ue(function(I,R){var T=setTimeout(function(){return R(new be.Timeout(p))},f);_.then(I,R).finally(clearTimeout.bind(null,T))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&E(Ue.prototype,Symbol.toStringTag,"Dexie.Promise"),Ni.env=ed(),b(Ue,{all:function(){var f=F.apply(null,arguments).map(fi);return new Ue(function(p,_){f.length===0&&p([]);var I=f.length;f.forEach(function(R,T){return Ue.resolve(R).then(function(z){f[T]=z,--I||p(f)},_)})})},resolve:function(f){return f instanceof Ue?f:f&&typeof f.then=="function"?new Ue(function(p,_){f.then(p,_)}):new Ue(Ir,!0,f)},reject:as,race:function(){var f=F.apply(null,arguments).map(fi);return new Ue(function(p,_){f.map(function(I){return Ue.resolve(I).then(p,_)})})},PSD:{get:function(){return Ge},set:function(f){return Ge=f}},totalEchoes:{get:function(){return Hs}},newPSD:cs,usePSD:fs,scheduler:{get:function(){return Vn},set:function(f){Vn=f}},rejectionMapper:{get:function(){return Fu},set:function(f){Fu=f}},follow:function(f,p){return new Ue(function(_,I){return cs(function(R,T){var z=Ge;z.unhandleds=[],z.onunhandled=T,z.finalize=Ke(function(){var W,X=this;W=function(){X.unhandleds.length===0?R():T(X.unhandleds[0])},Lo.push(function te(){W(),Lo.splice(Lo.indexOf(te),1)}),++Ti,Vn(function(){--Ti==0&&Lu()},[])},z.finalize),f()},p,_,I)})}}),Yr&&(Yr.allSettled&&E(Ue,"allSettled",function(){var f=F.apply(null,arguments).map(fi);return new Ue(function(p){f.length===0&&p([]);var _=f.length,I=new Array(_);f.forEach(function(R,T){return Ue.resolve(R).then(function(z){return I[T]={status:"fulfilled",value:z}},function(z){return I[T]={status:"rejected",reason:z}}).then(function(){return--_||p(I)})})})}),Yr.any&&typeof AggregateError<"u"&&E(Ue,"any",function(){var f=F.apply(null,arguments).map(fi);return new Ue(function(p,_){f.length===0&&_(new AggregateError([]));var I=f.length,R=new Array(I);f.forEach(function(T,z){return Ue.resolve(T).then(function(W){return p(W)},function(W){R[z]=W,--I||_(new AggregateError(R))})})})}),Yr.withResolvers&&(Ue.withResolvers=Yr.withResolvers));var fr={awaits:0,echoes:0,id:0},$m=0,us=[],Ws=0,Hs=0,gl=0;function cs(f,p,_,I){var R=Ge,T=Object.create(R);return T.parent=R,T.ref=0,T.global=!1,T.id=++gl,Ni.env,T.env=Ai?{Promise:Ue,PromiseProp:{value:Ue,configurable:!0,writable:!0},all:Ue.all,race:Ue.race,allSettled:Ue.allSettled,any:Ue.any,resolve:Ue.resolve,reject:Ue.reject}:{},p&&d(T,p),++R.ref,T.finalize=function(){--this.parent.ref||this.parent.finalize()},I=fs(T,f,_,I),T.ref===0&&T.finalize(),I}function jo(){return fr.id||(fr.id=++$m),++fr.awaits,fr.echoes+=Us,fr.id}function ls(){return!!fr.awaits&&(--fr.awaits==0&&(fr.id=0),fr.echoes=fr.awaits*Us,!0)}function fi(f){return fr.echoes&&f&&f.constructor===Yr?(jo(),f.then(function(p){return ls(),p},function(p){return ls(),dr(p)})):f}function Zf(){var f=us[us.length-1];us.pop(),xi(f,!1)}function xi(f,p){var _,I=Ge;(p?!fr.echoes||Ws++&&f===Ge:!Ws||--Ws&&f===Ge)||queueMicrotask(p?(function(R){++Hs,fr.echoes&&--fr.echoes!=0||(fr.echoes=fr.awaits=fr.id=0),us.push(Ge),xi(R,!0)}).bind(null,f):Zf),f!==Ge&&(Ge=f,I===Ni&&(Ni.env=ed()),Ai&&(_=Ni.env.Promise,p=f.env,(I.global||f.global)&&(Object.defineProperty(a,"Promise",p.PromiseProp),_.all=p.all,_.race=p.race,_.resolve=p.resolve,_.reject=p.reject,p.allSettled&&(_.allSettled=p.allSettled),p.any&&(_.any=p.any))))}function ed(){var f=a.Promise;return Ai?{Promise:f,PromiseProp:Object.getOwnPropertyDescriptor(a,"Promise"),all:f.all,race:f.race,allSettled:f.allSettled,any:f.any,resolve:f.resolve,reject:f.reject}:{}}function fs(f,p,_,I,R){var T=Ge;try{return xi(f,!0),p(_,I,R)}finally{xi(T,!1)}}function _l(f,p,_,I){return typeof f!="function"?f:function(){var R=Ge;_&&jo(),xi(p,!0);try{return f.apply(this,arguments)}finally{xi(R,!1),I&&queueMicrotask(ls)}}}function ju(f){Promise===Yr&&fr.echoes===0?Ws===0?f():enqueueNativeMicroTask(f):setTimeout(f,0)}(""+En).indexOf("[native code]")===-1&&(jo=ls=J);var dr=Ue.reject,Qs="",Mi="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",hr="String expected.",Uo=[],zo="__dbnames",Uu="readonly",qo="readwrite";function Ys(f,p){return f?p?function(){return f.apply(this,arguments)&&p.apply(this,arguments)}:f:p}var wl={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Gs(f){return typeof f!="string"||/\./.test(f)?function(p){return p}:function(p){return p[f]===void 0&&f in p&&delete(p=ke(p))[f],p}}function Wn(){throw be.Type()}function It(f,p){try{var _=bn(f),I=bn(p);if(_!==I)return _==="Array"?1:I==="Array"?-1:_==="binary"?1:I==="binary"?-1:_==="string"?1:I==="string"?-1:_==="Date"?1:I!=="Date"?NaN:-1;switch(_){case"number":case"Date":case"string":return p<f?1:f<p?-1:0;case"binary":return(function(R,T){for(var z=R.length,W=T.length,X=z<W?z:W,te=0;te<X;++te)if(R[te]!==T[te])return R[te]<T[te]?-1:1;return z===W?0:z<W?-1:1})(td(f),td(p));case"Array":return(function(R,T){for(var z=R.length,W=T.length,X=z<W?z:W,te=0;te<X;++te){var oe=It(R[te],T[te]);if(oe!==0)return oe}return z===W?0:z<W?-1:1})(f,p)}}catch{}return NaN}function bn(f){var p=typeof f;return p!="object"?p:ArrayBuffer.isView(f)?"binary":(f=We(f),f==="ArrayBuffer"?"binary":f)}function td(f){return f instanceof Uint8Array?f:ArrayBuffer.isView(f)?new Uint8Array(f.buffer,f.byteOffset,f.byteLength):new Uint8Array(f)}var rd=(er.prototype._trans=function(f,p,_){var I=this._tx||Ge.trans,R=this.name,T=Pt&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(f==="readonly"?"read":"write"," ").concat(this.name));function z(te,oe,H){if(!H.schema[R])throw new be.NotFound("Table "+R+" not part of transaction");return p(H.idbtrans,H)}var W=Ks();try{var X=I&&I.db._novip===this.db._novip?I===Ge.trans?I._promise(f,z,_):cs(function(){return I._promise(f,z,_)},{trans:I,transless:Ge.transless||Ge}):(function te(oe,H,ue,Z){if(oe.idbdb&&(oe._state.openComplete||Ge.letThrough||oe._vip)){var se=oe._createTransaction(H,ue,oe._dbSchema);try{se.create(),oe._state.PR1398_maxLoop=3}catch(ce){return ce.name===we.InvalidState&&oe.isOpen()&&0<--oe._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),oe.close({disableAutoOpen:!1}),oe.open().then(function(){return te(oe,H,ue,Z)})):dr(ce)}return se._promise(H,function(ce,ne){return cs(function(){return Ge.trans=se,Z(ce,ne,se)})}).then(function(ce){if(H==="readwrite")try{se.idbtrans.commit()}catch{}return H==="readonly"?ce:se._completion.then(function(){return ce})})}if(oe._state.openComplete)return dr(new be.DatabaseClosed(oe._state.dbOpenError));if(!oe._state.isBeingOpened){if(!oe._state.autoOpen)return dr(new be.DatabaseClosed);oe.open().catch(J)}return oe._state.dbReadyPromise.then(function(){return te(oe,H,ue,Z)})})(this.db,f,[this.name],z);return T&&(X._consoleTask=T,X=X.catch(function(te){return console.trace(te),dr(te)})),X}finally{W&&os()}},er.prototype.get=function(f,p){var _=this;return f&&f.constructor===Object?this.where(f).first(p):f==null?dr(new be.Type("Invalid argument to Table.get()")):this._trans("readonly",function(I){return _.core.get({trans:I,key:f}).then(function(R){return _.hook.reading.fire(R)})}).then(p)},er.prototype.where=function(f){if(typeof f=="string")return new this.db.WhereClause(this,f);if(l(f))return new this.db.WhereClause(this,"[".concat(f.join("+"),"]"));var p=u(f);if(p.length===1)return this.where(p[0]).equals(f[p[0]]);var _=this.schema.indexes.concat(this.schema.primKey).filter(function(W){if(W.compound&&p.every(function(te){return 0<=W.keyPath.indexOf(te)})){for(var X=0;X<p.length;++X)if(p.indexOf(W.keyPath[X])===-1)return!1;return!0}return!1}).sort(function(W,X){return W.keyPath.length-X.keyPath.length})[0];if(_&&this.db._maxKey!==Qs){var T=_.keyPath.slice(0,p.length);return this.where(T).equals(T.map(function(X){return f[X]}))}!_&&Pt&&console.warn("The query ".concat(JSON.stringify(f)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(p.join("+"),"]"));var I=this.schema.idxByName;function R(W,X){return It(W,X)===0}var z=p.reduce(function(H,X){var te=H[0],oe=H[1],H=I[X],ue=f[X];return[te||H,te||!H?Ys(oe,H&&H.multi?function(Z){return Z=x(Z,X),l(Z)&&Z.some(function(se){return R(ue,se)})}:function(Z){return R(ue,x(Z,X))}):oe]},[null,null]),T=z[0],z=z[1];return T?this.where(T.name).equals(f[T.keyPath]).filter(z):_?this.filter(z):this.where(p).equals("")},er.prototype.filter=function(f){return this.toCollection().and(f)},er.prototype.count=function(f){return this.toCollection().count(f)},er.prototype.offset=function(f){return this.toCollection().offset(f)},er.prototype.limit=function(f){return this.toCollection().limit(f)},er.prototype.each=function(f){return this.toCollection().each(f)},er.prototype.toArray=function(f){return this.toCollection().toArray(f)},er.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},er.prototype.orderBy=function(f){return new this.db.Collection(new this.db.WhereClause(this,l(f)?"[".concat(f.join("+"),"]"):f))},er.prototype.reverse=function(){return this.toCollection().reverse()},er.prototype.mapToClass=function(f){var p,_=this.db,I=this.name;function R(){return p!==null&&p.apply(this,arguments)||this}(this.schema.mappedClass=f).prototype instanceof Wn&&((function(X,te){if(typeof te!="function"&&te!==null)throw new TypeError("Class extends value "+String(te)+" is not a constructor or null");function oe(){this.constructor=X}r(X,te),X.prototype=te===null?Object.create(te):(oe.prototype=te.prototype,new oe)})(R,p=f),Object.defineProperty(R.prototype,"db",{get:function(){return _},enumerable:!1,configurable:!0}),R.prototype.table=function(){return I},f=R);for(var T=new Set,z=f.prototype;z;z=m(z))Object.getOwnPropertyNames(z).forEach(function(X){return T.add(X)});function W(X){if(!X)return X;var te,oe=Object.create(f.prototype);for(te in X)if(!T.has(te))try{oe[te]=X[te]}catch{}return oe}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=W,this.hook("reading",W),f},er.prototype.defineClass=function(){return this.mapToClass(function(f){d(this,f)})},er.prototype.add=function(f,p){var _=this,I=this.schema.primKey,R=I.auto,T=I.keyPath,z=f;return T&&R&&(z=Gs(T)(f)),this._trans("readwrite",function(W){return _.core.mutate({trans:W,type:"add",keys:p!=null?[p]:null,values:[z]})}).then(function(W){return W.numFailures?Ue.reject(W.failures[0]):W.lastResult}).then(function(W){if(T)try{U(f,T,W)}catch{}return W})},er.prototype.update=function(f,p){return typeof f!="object"||l(f)?this.where(":id").equals(f).modify(p):(f=x(f,this.schema.primKey.keyPath),f===void 0?dr(new be.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(f).modify(p))},er.prototype.put=function(f,p){var _=this,I=this.schema.primKey,R=I.auto,T=I.keyPath,z=f;return T&&R&&(z=Gs(T)(f)),this._trans("readwrite",function(W){return _.core.mutate({trans:W,type:"put",values:[z],keys:p!=null?[p]:null})}).then(function(W){return W.numFailures?Ue.reject(W.failures[0]):W.lastResult}).then(function(W){if(T)try{U(f,T,W)}catch{}return W})},er.prototype.delete=function(f){var p=this;return this._trans("readwrite",function(_){return p.core.mutate({trans:_,type:"delete",keys:[f]})}).then(function(_){return _.numFailures?Ue.reject(_.failures[0]):void 0})},er.prototype.clear=function(){var f=this;return this._trans("readwrite",function(p){return f.core.mutate({trans:p,type:"deleteRange",range:wl})}).then(function(p){return p.numFailures?Ue.reject(p.failures[0]):void 0})},er.prototype.bulkGet=function(f){var p=this;return this._trans("readonly",function(_){return p.core.getMany({keys:f,trans:_}).then(function(I){return I.map(function(R){return p.hook.reading.fire(R)})})})},er.prototype.bulkAdd=function(f,p,_){var I=this,R=Array.isArray(p)?p:void 0,T=(_=_||(R?void 0:p))?_.allKeys:void 0;return this._trans("readwrite",function(z){var te=I.schema.primKey,W=te.auto,te=te.keyPath;if(te&&R)throw new be.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(R&&R.length!==f.length)throw new be.InvalidArgument("Arguments objects and keys must have the same length");var X=f.length,te=te&&W?f.map(Gs(te)):f;return I.core.mutate({trans:z,type:"add",keys:R,values:te,wantResults:T}).then(function(se){var H=se.numFailures,ue=se.results,Z=se.lastResult,se=se.failures;if(H===0)return T?ue:Z;throw new q("".concat(I.name,".bulkAdd(): ").concat(H," of ").concat(X," operations failed"),se)})})},er.prototype.bulkPut=function(f,p,_){var I=this,R=Array.isArray(p)?p:void 0,T=(_=_||(R?void 0:p))?_.allKeys:void 0;return this._trans("readwrite",function(z){var te=I.schema.primKey,W=te.auto,te=te.keyPath;if(te&&R)throw new be.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(R&&R.length!==f.length)throw new be.InvalidArgument("Arguments objects and keys must have the same length");var X=f.length,te=te&&W?f.map(Gs(te)):f;return I.core.mutate({trans:z,type:"put",keys:R,values:te,wantResults:T}).then(function(se){var H=se.numFailures,ue=se.results,Z=se.lastResult,se=se.failures;if(H===0)return T?ue:Z;throw new q("".concat(I.name,".bulkPut(): ").concat(H," of ").concat(X," operations failed"),se)})})},er.prototype.bulkUpdate=function(f){var p=this,_=this.core,I=f.map(function(z){return z.key}),R=f.map(function(z){return z.changes}),T=[];return this._trans("readwrite",function(z){return _.getMany({trans:z,keys:I,cache:"clone"}).then(function(W){var X=[],te=[];f.forEach(function(H,ue){var Z=H.key,se=H.changes,ce=W[ue];if(ce){for(var ne=0,he=Object.keys(se);ne<he.length;ne++){var ve=he[ne],ge=se[ve];if(ve===p.schema.primKey.keyPath){if(It(ge,Z)!==0)throw new be.Constraint("Cannot update primary key in bulkUpdate()")}else U(ce,ve,ge)}T.push(ue),X.push(Z),te.push(ce)}});var oe=X.length;return _.mutate({trans:z,type:"put",keys:X,values:te,updates:{keys:I,changeSpecs:R}}).then(function(H){var ue=H.numFailures,Z=H.failures;if(ue===0)return oe;for(var se=0,ce=Object.keys(Z);se<ce.length;se++){var ne,he=ce[se],ve=T[Number(he)];ve!=null&&(ne=Z[he],delete Z[he],Z[ve]=ne)}throw new q("".concat(p.name,".bulkUpdate(): ").concat(ue," of ").concat(oe," operations failed"),Z)})})})},er.prototype.bulkDelete=function(f){var p=this,_=f.length;return this._trans("readwrite",function(I){return p.core.mutate({trans:I,type:"delete",keys:f})}).then(function(z){var R=z.numFailures,T=z.lastResult,z=z.failures;if(R===0)return T;throw new q("".concat(p.name,".bulkDelete(): ").concat(R," of ").concat(_," operations failed"),z)})},er);function er(){}function ds(f){function p(z,W){if(W){for(var X=arguments.length,te=new Array(X-1);--X;)te[X-1]=arguments[X];return _[z].subscribe.apply(null,te),f}if(typeof z=="string")return _[z]}var _={};p.addEventType=T;for(var I=1,R=arguments.length;I<R;++I)T(arguments[I]);return p;function T(z,W,X){if(typeof z!="object"){var te;W=W||Dr;var oe={subscribers:[],fire:X=X||J,subscribe:function(H){oe.subscribers.indexOf(H)===-1&&(oe.subscribers.push(H),oe.fire=W(oe.fire,H))},unsubscribe:function(H){oe.subscribers=oe.subscribers.filter(function(ue){return ue!==H}),oe.fire=oe.subscribers.reduce(W,X)}};return _[z]=p[z]=oe}u(te=z).forEach(function(H){var ue=te[H];if(l(ue))T(H,te[H][0],te[H][1]);else{if(ue!=="asap")throw new be.InvalidArgument("Invalid event config");var Z=T(H,Se,function(){for(var se=arguments.length,ce=new Array(se);se--;)ce[se]=arguments[se];Z.subscribers.forEach(function(ne){k(function(){ne.apply(null,ce)})})})}})}}function hs(f,p){return D(p).from({prototype:f}),p}function di(f,p){return!(f.filter||f.algorithm||f.or)&&(p?f.justLimit:!f.replayFilter)}function Vo(f,p){f.filter=Ys(f.filter,p)}function bl(f,p,_){var I=f.replayFilter;f.replayFilter=I?function(){return Ys(I(),p())}:p,f.justLimit=_&&!I}function zu(f,p){if(f.isPrimKey)return p.primaryKey;var _=p.getIndexByKeyPath(f.index);if(!_)throw new be.Schema("KeyPath "+f.index+" on object store "+p.name+" is not indexed");return _}function qu(f,p,_){var I=zu(f,p.schema);return p.openCursor({trans:_,values:!f.keysOnly,reverse:f.dir==="prev",unique:!!f.unique,query:{index:I,range:f.range}})}function za(f,p,_,I){var R=f.replayFilter?Ys(f.filter,f.replayFilter()):f.filter;if(f.or){var T={},z=function(W,X,te){var oe,H;R&&!R(X,te,function(ue){return X.stop(ue)},function(ue){return X.fail(ue)})||((H=""+(oe=X.primaryKey))=="[object ArrayBuffer]"&&(H=""+new Uint8Array(oe)),g(T,H)||(T[H]=!0,p(W,X,te)))};return Promise.all([f.or._iterate(z,_),Vu(qu(f,I,_),f.algorithm,z,!f.keysOnly&&f.valueMapper)])}return Vu(qu(f,I,_),Ys(f.algorithm,R),p,!f.keysOnly&&f.valueMapper)}function Vu(f,p,_,I){var R=Ht(I?function(T,z,W){return _(I(T),z,W)}:_);return f.then(function(T){if(T)return T.start(function(){var z=function(){return T.continue()};p&&!p(T,function(W){return z=W},function(W){T.stop(W),z=J},function(W){T.fail(W),z=J})||R(T.value,T,function(W){return z=W}),z()})})}var an=Symbol(),qa=(Ku.prototype.execute=function(f){if(this.add!==void 0){var p=this.add;if(l(p))return s(s([],l(f)?f:[],!0),p).sort();if(typeof p=="number")return(Number(f)||0)+p;if(typeof p=="bigint")try{return BigInt(f)+p}catch{return BigInt(0)+p}throw new TypeError("Invalid term ".concat(p))}if(this.remove!==void 0){var _=this.remove;if(l(_))return l(f)?f.filter(function(I){return!_.includes(I)}).sort():[];if(typeof _=="number")return Number(f)-_;if(typeof _=="bigint")try{return BigInt(f)-_}catch{return BigInt(0)-_}throw new TypeError("Invalid subtrahend ".concat(_))}return p=(p=this.replacePrefix)===null||p===void 0?void 0:p[0],p&&typeof f=="string"&&f.startsWith(p)?this.replacePrefix[1]+f.substring(p.length):f},Ku);function Ku(f){Object.assign(this,f)}var Tt=(Dt.prototype._read=function(f,p){var _=this._ctx;return _.error?_.table._trans(null,dr.bind(null,_.error)):_.table._trans("readonly",f).then(p)},Dt.prototype._write=function(f){var p=this._ctx;return p.error?p.table._trans(null,dr.bind(null,p.error)):p.table._trans("readwrite",f,"locked")},Dt.prototype._addAlgorithm=function(f){var p=this._ctx;p.algorithm=Ys(p.algorithm,f)},Dt.prototype._iterate=function(f,p){return za(this._ctx,f,p,this._ctx.table.core)},Dt.prototype.clone=function(f){var p=Object.create(this.constructor.prototype),_=Object.create(this._ctx);return f&&d(_,f),p._ctx=_,p},Dt.prototype.raw=function(){return this._ctx.valueMapper=null,this},Dt.prototype.each=function(f){var p=this._ctx;return this._read(function(_){return za(p,f,_,p.table.core)})},Dt.prototype.count=function(f){var p=this;return this._read(function(_){var I=p._ctx,R=I.table.core;if(di(I,!0))return R.count({trans:_,query:{index:zu(I,R.schema),range:I.range}}).then(function(z){return Math.min(z,I.limit)});var T=0;return za(I,function(){return++T,!1},_,R).then(function(){return T})}).then(f)},Dt.prototype.sortBy=function(f,p){var _=f.split(".").reverse(),I=_[0],R=_.length-1;function T(X,te){return te?T(X[_[te]],te-1):X[I]}var z=this._ctx.dir==="next"?1:-1;function W(X,te){return It(T(X,R),T(te,R))*z}return this.toArray(function(X){return X.sort(W)}).then(p)},Dt.prototype.toArray=function(f){var p=this;return this._read(function(_){var I=p._ctx;if(I.dir==="next"&&di(I,!0)&&0<I.limit){var R=I.valueMapper,T=zu(I,I.table.core.schema);return I.table.core.query({trans:_,limit:I.limit,values:!0,query:{index:T,range:I.range}}).then(function(W){return W=W.result,R?W.map(R):W})}var z=[];return za(I,function(W){return z.push(W)},_,I.table.core).then(function(){return z})},f)},Dt.prototype.offset=function(f){var p=this._ctx;return f<=0||(p.offset+=f,di(p)?bl(p,function(){var _=f;return function(I,R){return _===0||(_===1?--_:R(function(){I.advance(_),_=0}),!1)}}):bl(p,function(){var _=f;return function(){return--_<0}})),this},Dt.prototype.limit=function(f){return this._ctx.limit=Math.min(this._ctx.limit,f),bl(this._ctx,function(){var p=f;return function(_,I,R){return--p<=0&&I(R),0<=p}},!0),this},Dt.prototype.until=function(f,p){return Vo(this._ctx,function(_,I,R){return!f(_.value)||(I(R),p)}),this},Dt.prototype.first=function(f){return this.limit(1).toArray(function(p){return p[0]}).then(f)},Dt.prototype.last=function(f){return this.reverse().first(f)},Dt.prototype.filter=function(f){var p;return Vo(this._ctx,function(_){return f(_.value)}),(p=this._ctx).isMatch=Ys(p.isMatch,f),this},Dt.prototype.and=function(f){return this.filter(f)},Dt.prototype.or=function(f){return new this.db.WhereClause(this._ctx.table,f,this)},Dt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Dt.prototype.desc=function(){return this.reverse()},Dt.prototype.eachKey=function(f){var p=this._ctx;return p.keysOnly=!p.isMatch,this.each(function(_,I){f(I.key,I)})},Dt.prototype.eachUniqueKey=function(f){return this._ctx.unique="unique",this.eachKey(f)},Dt.prototype.eachPrimaryKey=function(f){var p=this._ctx;return p.keysOnly=!p.isMatch,this.each(function(_,I){f(I.primaryKey,I)})},Dt.prototype.keys=function(f){var p=this._ctx;p.keysOnly=!p.isMatch;var _=[];return this.each(function(I,R){_.push(R.key)}).then(function(){return _}).then(f)},Dt.prototype.primaryKeys=function(f){var p=this._ctx;if(p.dir==="next"&&di(p,!0)&&0<p.limit)return this._read(function(I){var R=zu(p,p.table.core.schema);return p.table.core.query({trans:I,values:!1,limit:p.limit,query:{index:R,range:p.range}})}).then(function(I){return I.result}).then(f);p.keysOnly=!p.isMatch;var _=[];return this.each(function(I,R){_.push(R.primaryKey)}).then(function(){return _}).then(f)},Dt.prototype.uniqueKeys=function(f){return this._ctx.unique="unique",this.keys(f)},Dt.prototype.firstKey=function(f){return this.limit(1).keys(function(p){return p[0]}).then(f)},Dt.prototype.lastKey=function(f){return this.reverse().firstKey(f)},Dt.prototype.distinct=function(){var f=this._ctx,f=f.index&&f.table.schema.idxByName[f.index];if(!f||!f.multi)return this;var p={};return Vo(this._ctx,function(R){var I=R.primaryKey.toString(),R=g(p,I);return p[I]=!0,!R}),this},Dt.prototype.modify=function(f){var p=this,_=this._ctx;return this._write(function(I){var R,T,z;z=typeof f=="function"?f:(R=u(f),T=R.length,function(ne){for(var he=!1,ve=0;ve<T;++ve){var ge=R[ve],Ie=f[ge],Ae=x(ne,ge);Ie instanceof qa?(U(ne,ge,Ie.execute(Ae)),he=!0):Ae!==Ie&&(U(ne,ge,Ie),he=!0)}return he});var W=_.table.core,H=W.schema.primaryKey,X=H.outbound,te=H.extractKey,oe=200,H=p.db._options.modifyChunkSize;H&&(oe=typeof H=="object"?H[W.name]||H["*"]||200:H);function ue(ne,ge){var ve=ge.failures,ge=ge.numFailures;se+=ne-ge;for(var Ie=0,Ae=u(ve);Ie<Ae.length;Ie++){var Fe=Ae[Ie];Z.push(ve[Fe])}}var Z=[],se=0,ce=[];return p.clone().primaryKeys().then(function(ne){function he(ge){var Ie=Math.min(oe,ne.length-ge);return W.getMany({trans:I,keys:ne.slice(ge,ge+Ie),cache:"immutable"}).then(function(Ae){for(var Fe=[],Ne=[],Te=X?[]:null,Le=[],xe=0;xe<Ie;++xe){var ze=Ae[xe],at={value:ke(ze),primKey:ne[ge+xe]};z.call(at,at.value,at)!==!1&&(at.value==null?Le.push(ne[ge+xe]):X||It(te(ze),te(at.value))===0?(Ne.push(at.value),X&&Te.push(ne[ge+xe])):(Le.push(ne[ge+xe]),Fe.push(at.value)))}return Promise.resolve(0<Fe.length&&W.mutate({trans:I,type:"add",values:Fe}).then(function(mt){for(var wt in mt.failures)Le.splice(parseInt(wt),1);ue(Fe.length,mt)})).then(function(){return(0<Ne.length||ve&&typeof f=="object")&&W.mutate({trans:I,type:"put",keys:Te,values:Ne,criteria:ve,changeSpec:typeof f!="function"&&f,isAdditionalChunk:0<ge}).then(function(mt){return ue(Ne.length,mt)})}).then(function(){return(0<Le.length||ve&&f===Wu)&&W.mutate({trans:I,type:"delete",keys:Le,criteria:ve,isAdditionalChunk:0<ge}).then(function(mt){return ue(Le.length,mt)})}).then(function(){return ne.length>ge+Ie&&he(ge+oe)})})}var ve=di(_)&&_.limit===1/0&&(typeof f!="function"||f===Wu)&&{index:_.index,range:_.range};return he(0).then(function(){if(0<Z.length)throw new A("Error modifying one or more objects",Z,se,ce);return ne.length})})})},Dt.prototype.delete=function(){var f=this._ctx,p=f.range;return di(f)&&(f.isPrimKey||p.type===3)?this._write(function(_){var I=f.table.core.schema.primaryKey,R=p;return f.table.core.count({trans:_,query:{index:I,range:R}}).then(function(T){return f.table.core.mutate({trans:_,type:"deleteRange",range:R}).then(function(z){var W=z.failures;if(z.lastResult,z.results,z=z.numFailures,z)throw new A("Could not delete some values",Object.keys(W).map(function(X){return W[X]}),T-z);return T-z})})}):this.modify(Wu)},Dt);function Dt(){}var Wu=function(f,p){return p.value=null};function Sl(f,p){return f<p?-1:f===p?0:1}function nd(f,p){return p<f?-1:f===p?0:1}function Gr(f,p,_){return f=f instanceof Bi?new f.Collection(f):f,f._ctx.error=new(_||TypeError)(p),f}function Js(f){return new f.Collection(f,function(){return Fi("")}).limit(0)}function Ko(f,p,_,I){var R,T,z,W,X,te,oe,H=_.length;if(!_.every(function(se){return typeof se=="string"}))return Gr(f,hr);function ue(se){R=se==="next"?function(ne){return ne.toUpperCase()}:function(ne){return ne.toLowerCase()},T=se==="next"?function(ne){return ne.toLowerCase()}:function(ne){return ne.toUpperCase()},z=se==="next"?Sl:nd;var ce=_.map(function(ne){return{lower:T(ne),upper:R(ne)}}).sort(function(ne,he){return z(ne.lower,he.lower)});W=ce.map(function(ne){return ne.upper}),X=ce.map(function(ne){return ne.lower}),oe=(te=se)==="next"?"":I}ue("next"),f=new f.Collection(f,function(){return Hn(W[0],X[H-1]+I)}),f._ondirectionchange=function(se){ue(se)};var Z=0;return f._addAlgorithm(function(se,ce,ne){var he=se.key;if(typeof he!="string")return!1;var ve=T(he);if(p(ve,X,Z))return!0;for(var ge=null,Ie=Z;Ie<H;++Ie){var Ae=(function(Fe,Ne,Te,Le,xe,ze){for(var at=Math.min(Fe.length,Le.length),mt=-1,wt=0;wt<at;++wt){var Xr=Ne[wt];if(Xr!==Le[wt])return xe(Fe[wt],Te[wt])<0?Fe.substr(0,wt)+Te[wt]+Te.substr(wt+1):xe(Fe[wt],Le[wt])<0?Fe.substr(0,wt)+Le[wt]+Te.substr(wt+1):0<=mt?Fe.substr(0,mt)+Ne[mt]+Te.substr(mt+1):null;xe(Fe[wt],Xr)<0&&(mt=wt)}return at<Le.length&&ze==="next"?Fe+Te.substr(Fe.length):at<Fe.length&&ze==="prev"?Fe.substr(0,Te.length):mt<0?null:Fe.substr(0,mt)+Le[mt]+Te.substr(mt+1)})(he,ve,W[Ie],X[Ie],z,te);Ae===null&&ge===null?Z=Ie+1:(ge===null||0<z(ge,Ae))&&(ge=Ae)}return ce(ge!==null?function(){se.continue(ge+oe)}:ne),!1}),f}function Hn(f,p,_,I){return{type:2,lower:f,upper:p,lowerOpen:_,upperOpen:I}}function Fi(f){return{type:1,lower:f,upper:f}}var Bi=(Object.defineProperty(tr.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),tr.prototype.between=function(f,p,_,I){_=_!==!1,I=I===!0;try{return 0<this._cmp(f,p)||this._cmp(f,p)===0&&(_||I)&&(!_||!I)?Js(this):new this.Collection(this,function(){return Hn(f,p,!_,!I)})}catch{return Gr(this,Mi)}},tr.prototype.equals=function(f){return f==null?Gr(this,Mi):new this.Collection(this,function(){return Fi(f)})},tr.prototype.above=function(f){return f==null?Gr(this,Mi):new this.Collection(this,function(){return Hn(f,void 0,!0)})},tr.prototype.aboveOrEqual=function(f){return f==null?Gr(this,Mi):new this.Collection(this,function(){return Hn(f,void 0,!1)})},tr.prototype.below=function(f){return f==null?Gr(this,Mi):new this.Collection(this,function(){return Hn(void 0,f,!1,!0)})},tr.prototype.belowOrEqual=function(f){return f==null?Gr(this,Mi):new this.Collection(this,function(){return Hn(void 0,f)})},tr.prototype.startsWith=function(f){return typeof f!="string"?Gr(this,hr):this.between(f,f+Qs,!0,!0)},tr.prototype.startsWithIgnoreCase=function(f){return f===""?this.startsWith(f):Ko(this,function(p,_){return p.indexOf(_[0])===0},[f],Qs)},tr.prototype.equalsIgnoreCase=function(f){return Ko(this,function(p,_){return p===_[0]},[f],"")},tr.prototype.anyOfIgnoreCase=function(){var f=F.apply(je,arguments);return f.length===0?Js(this):Ko(this,function(p,_){return _.indexOf(p)!==-1},f,"")},tr.prototype.startsWithAnyOfIgnoreCase=function(){var f=F.apply(je,arguments);return f.length===0?Js(this):Ko(this,function(p,_){return _.some(function(I){return p.indexOf(I)===0})},f,Qs)},tr.prototype.anyOf=function(){var f=this,p=F.apply(je,arguments),_=this._cmp;try{p.sort(_)}catch{return Gr(this,Mi)}if(p.length===0)return Js(this);var I=new this.Collection(this,function(){return Hn(p[0],p[p.length-1])});I._ondirectionchange=function(T){_=T==="next"?f._ascending:f._descending,p.sort(_)};var R=0;return I._addAlgorithm(function(T,z,W){for(var X=T.key;0<_(X,p[R]);)if(++R===p.length)return z(W),!1;return _(X,p[R])===0||(z(function(){T.continue(p[R])}),!1)}),I},tr.prototype.notEqual=function(f){return this.inAnyRange([[-1/0,f],[f,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},tr.prototype.noneOf=function(){var f=F.apply(je,arguments);if(f.length===0)return new this.Collection(this);try{f.sort(this._ascending)}catch{return Gr(this,Mi)}var p=f.reduce(function(_,I){return _?_.concat([[_[_.length-1][1],I]]):[[-1/0,I]]},null);return p.push([f[f.length-1],this.db._maxKey]),this.inAnyRange(p,{includeLowers:!1,includeUppers:!1})},tr.prototype.inAnyRange=function(he,p){var _=this,I=this._cmp,R=this._ascending,T=this._descending,z=this._min,W=this._max;if(he.length===0)return Js(this);if(!he.every(function(ve){return ve[0]!==void 0&&ve[1]!==void 0&&R(ve[0],ve[1])<=0}))return Gr(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",be.InvalidArgument);var X=!p||p.includeLowers!==!1,te=p&&p.includeUppers===!0,oe,H=R;function ue(ve,ge){return H(ve[0],ge[0])}try{(oe=he.reduce(function(ve,ge){for(var Ie=0,Ae=ve.length;Ie<Ae;++Ie){var Fe=ve[Ie];if(I(ge[0],Fe[1])<0&&0<I(ge[1],Fe[0])){Fe[0]=z(Fe[0],ge[0]),Fe[1]=W(Fe[1],ge[1]);break}}return Ie===Ae&&ve.push(ge),ve},[])).sort(ue)}catch{return Gr(this,Mi)}var Z=0,se=te?function(ve){return 0<R(ve,oe[Z][1])}:function(ve){return 0<=R(ve,oe[Z][1])},ce=X?function(ve){return 0<T(ve,oe[Z][0])}:function(ve){return 0<=T(ve,oe[Z][0])},ne=se,he=new this.Collection(this,function(){return Hn(oe[0][0],oe[oe.length-1][1],!X,!te)});return he._ondirectionchange=function(ve){H=ve==="next"?(ne=se,R):(ne=ce,T),oe.sort(ue)},he._addAlgorithm(function(ve,ge,Ie){for(var Ae,Fe=ve.key;ne(Fe);)if(++Z===oe.length)return ge(Ie),!1;return!se(Ae=Fe)&&!ce(Ae)||(_._cmp(Fe,oe[Z][1])===0||_._cmp(Fe,oe[Z][0])===0||ge(function(){H===R?ve.continue(oe[Z][0]):ve.continue(oe[Z][1])}),!1)}),he},tr.prototype.startsWithAnyOf=function(){var f=F.apply(je,arguments);return f.every(function(p){return typeof p=="string"})?f.length===0?Js(this):this.inAnyRange(f.map(function(p){return[p,p+Qs]})):Gr(this,"startsWithAnyOf() only works with strings")},tr);function tr(){}function Jr(f){return Ht(function(p){return Li(p),f(p.target.error),!1})}function Li(f){f.stopPropagation&&f.stopPropagation(),f.preventDefault&&f.preventDefault()}var Sn="storagemutated",El="x-storagemutated-1",ji=ds(null,Sn),Va=(hi.prototype._lock=function(){return B(!Ge.global),++this._reculock,this._reculock!==1||Ge.global||(Ge.lockOwnerFor=this),this},hi.prototype._unlock=function(){if(B(!Ge.global),--this._reculock==0)for(Ge.global||(Ge.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var f=this._blockedFuncs.shift();try{fs(f[1],f[0])}catch{}}return this},hi.prototype._locked=function(){return this._reculock&&Ge.lockOwnerFor!==this},hi.prototype.create=function(f){var p=this;if(!this.mode)return this;var _=this.db.idbdb,I=this.db._state.dbOpenError;if(B(!this.idbtrans),!f&&!_)switch(I&&I.name){case"DatabaseClosedError":throw new be.DatabaseClosed(I);case"MissingAPIError":throw new be.MissingAPI(I.message,I);default:throw new be.OpenFailed(I)}if(!this.active)throw new be.TransactionInactive;return B(this._completion._state===null),(f=this.idbtrans=f||(this.db.core||_).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Ht(function(R){Li(R),p._reject(f.error)}),f.onabort=Ht(function(R){Li(R),p.active&&p._reject(new be.Abort(f.error)),p.active=!1,p.on("abort").fire(R)}),f.oncomplete=Ht(function(){p.active=!1,p._resolve(),"mutatedParts"in f&&ji.storagemutated.fire(f.mutatedParts)}),this},hi.prototype._promise=function(f,p,_){var I=this;if(f==="readwrite"&&this.mode!=="readwrite")return dr(new be.ReadOnly("Transaction is readonly"));if(!this.active)return dr(new be.TransactionInactive);if(this._locked())return new Ue(function(T,z){I._blockedFuncs.push([function(){I._promise(f,p,_).then(T,z)},Ge])});if(_)return cs(function(){var T=new Ue(function(z,W){I._lock();var X=p(z,W,I);X&&X.then&&X.then(z,W)});return T.finally(function(){return I._unlock()}),T._lib=!0,T});var R=new Ue(function(T,z){var W=p(T,z,I);W&&W.then&&W.then(T,z)});return R._lib=!0,R},hi.prototype._root=function(){return this.parent?this.parent._root():this},hi.prototype.waitFor=function(f){var p,_=this._root(),I=Ue.resolve(f);_._waitingFor?_._waitingFor=_._waitingFor.then(function(){return I}):(_._waitingFor=I,_._waitingQueue=[],p=_.idbtrans.objectStore(_.storeNames[0]),(function T(){for(++_._spinCount;_._waitingQueue.length;)_._waitingQueue.shift()();_._waitingFor&&(p.get(-1/0).onsuccess=T)})());var R=_._waitingFor;return new Ue(function(T,z){I.then(function(W){return _._waitingQueue.push(Ht(T.bind(null,W)))},function(W){return _._waitingQueue.push(Ht(z.bind(null,W)))}).finally(function(){_._waitingFor===R&&(_._waitingFor=null)})})},hi.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new be.Abort))},hi.prototype.table=function(f){var p=this._memoizedTables||(this._memoizedTables={});if(g(p,f))return p[f];var _=this.schema[f];if(!_)throw new be.NotFound("Table "+f+" not part of transaction");return _=new this.db.Table(f,_,this),_.core=this.db.core.table(f),p[f]=_},hi);function hi(){}function Hu(f,p,_,I,R,T,z){return{name:f,keyPath:p,unique:_,multi:I,auto:R,compound:T,src:(_&&!z?"&":"")+(I?"*":"")+(R?"++":"")+Ka(p)}}function Ka(f){return typeof f=="string"?f:f?"["+[].join.call(f,"+")+"]":""}function Qu(f,p,_){return{name:f,primKey:p,indexes:_,mappedClass:null,idxByName:(I=function(R){return[R.name,R]},_.reduce(function(R,T,z){return z=I(T,z),z&&(R[z[0]]=z[1]),R},{}))};var I}var Wa=function(f){try{return f.only([[]]),Wa=function(){return[[]]},[[]]}catch{return Wa=function(){return Qs},Qs}};function Xs(f){return f==null?function(){}:typeof f=="string"?(p=f).split(".").length===1?function(_){return _[p]}:function(_){return x(_,p)}:function(_){return x(_,f)};var p}function Wo(f){return[].slice.call(f)}var Ho=0;function ps(f){return f==null?":id":typeof f=="string"?f:"[".concat(f.join("+"),"]")}function Am(f,p,X){function I(ne){if(ne.type===3)return null;if(ne.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var Z=ne.lower,se=ne.upper,ce=ne.lowerOpen,ne=ne.upperOpen;return Z===void 0?se===void 0?null:p.upperBound(se,!!ne):se===void 0?p.lowerBound(Z,!!ce):p.bound(Z,se,!!ce,!!ne)}function R(ue){var Z,se=ue.name;return{name:se,schema:ue,mutate:function(ce){var ne=ce.trans,he=ce.type,ve=ce.keys,ge=ce.values,Ie=ce.range;return new Promise(function(Ae,Fe){Ae=Ht(Ae);var Ne=ne.objectStore(se),Te=Ne.keyPath==null,Le=he==="put"||he==="add";if(!Le&&he!=="delete"&&he!=="deleteRange")throw new Error("Invalid operation type: "+he);var xe,ze=(ve||ge||{length:1}).length;if(ve&&ge&&ve.length!==ge.length)throw new Error("Given keys array must have same length as given values array.");if(ze===0)return Ae({numFailures:0,failures:{},results:[],lastResult:void 0});function at(pr){++Xr,Li(pr)}var mt=[],wt=[],Xr=0;if(he==="deleteRange"){if(Ie.type===4)return Ae({numFailures:Xr,failures:wt,results:[],lastResult:void 0});Ie.type===3?mt.push(xe=Ne.clear()):mt.push(xe=Ne.delete(I(Ie)))}else{var Te=Le?Te?[ge,ve]:[ge,null]:[ve,null],ot=Te[0],Ar=Te[1];if(Le)for(var Nr=0;Nr<ze;++Nr)mt.push(xe=Ar&&Ar[Nr]!==void 0?Ne[he](ot[Nr],Ar[Nr]):Ne[he](ot[Nr])),xe.onerror=at;else for(Nr=0;Nr<ze;++Nr)mt.push(xe=Ne[he](ot[Nr])),xe.onerror=at}function ru(pr){pr=pr.target.result,mt.forEach(function(Ui,nu){return Ui.error!=null&&(wt[nu]=Ui.error)}),Ae({numFailures:Xr,failures:wt,results:he==="delete"?ve:mt.map(function(Ui){return Ui.result}),lastResult:pr})}xe.onerror=function(pr){at(pr),ru(pr)},xe.onsuccess=ru})},getMany:function(ce){var ne=ce.trans,he=ce.keys;return new Promise(function(ve,ge){ve=Ht(ve);for(var Ie,Ae=ne.objectStore(se),Fe=he.length,Ne=new Array(Fe),Te=0,Le=0,xe=function(mt){mt=mt.target,Ne[mt._pos]=mt.result,++Le===Te&&ve(Ne)},ze=Jr(ge),at=0;at<Fe;++at)he[at]!=null&&((Ie=Ae.get(he[at]))._pos=at,Ie.onsuccess=xe,Ie.onerror=ze,++Te);Te===0&&ve(Ne)})},get:function(ce){var ne=ce.trans,he=ce.key;return new Promise(function(ve,ge){ve=Ht(ve);var Ie=ne.objectStore(se).get(he);Ie.onsuccess=function(Ae){return ve(Ae.target.result)},Ie.onerror=Jr(ge)})},query:(Z=te,function(ce){return new Promise(function(ne,he){ne=Ht(ne);var ve,ge,Ie,Te=ce.trans,Ae=ce.values,Fe=ce.limit,xe=ce.query,Ne=Fe===1/0?void 0:Fe,Le=xe.index,xe=xe.range,Te=Te.objectStore(se),Le=Le.isPrimaryKey?Te:Te.index(Le.name),xe=I(xe);if(Fe===0)return ne({result:[]});Z?((Ne=Ae?Le.getAll(xe,Ne):Le.getAllKeys(xe,Ne)).onsuccess=function(ze){return ne({result:ze.target.result})},Ne.onerror=Jr(he)):(ve=0,ge=!Ae&&"openKeyCursor"in Le?Le.openKeyCursor(xe):Le.openCursor(xe),Ie=[],ge.onsuccess=function(ze){var at=ge.result;return at?(Ie.push(Ae?at.value:at.primaryKey),++ve===Fe?ne({result:Ie}):void at.continue()):ne({result:Ie})},ge.onerror=Jr(he))})}),openCursor:function(ce){var ne=ce.trans,he=ce.values,ve=ce.query,ge=ce.reverse,Ie=ce.unique;return new Promise(function(Ae,Fe){Ae=Ht(Ae);var Le=ve.index,Ne=ve.range,Te=ne.objectStore(se),Te=Le.isPrimaryKey?Te:Te.index(Le.name),Le=ge?Ie?"prevunique":"prev":Ie?"nextunique":"next",xe=!he&&"openKeyCursor"in Te?Te.openKeyCursor(I(Ne),Le):Te.openCursor(I(Ne),Le);xe.onerror=Jr(Fe),xe.onsuccess=Ht(function(ze){var at,mt,wt,Xr,ot=xe.result;ot?(ot.___id=++Ho,ot.done=!1,at=ot.continue.bind(ot),mt=(mt=ot.continuePrimaryKey)&&mt.bind(ot),wt=ot.advance.bind(ot),Xr=function(){throw new Error("Cursor not stopped")},ot.trans=ne,ot.stop=ot.continue=ot.continuePrimaryKey=ot.advance=function(){throw new Error("Cursor not started")},ot.fail=Ht(Fe),ot.next=function(){var Ar=this,Nr=1;return this.start(function(){return Nr--?Ar.continue():Ar.stop()}).then(function(){return Ar})},ot.start=function(Ar){function Nr(){if(xe.result)try{Ar()}catch(pr){ot.fail(pr)}else ot.done=!0,ot.start=function(){throw new Error("Cursor behind last entry")},ot.stop()}var ru=new Promise(function(pr,Ui){pr=Ht(pr),xe.onerror=Jr(Ui),ot.fail=Ui,ot.stop=function(nu){ot.stop=ot.continue=ot.continuePrimaryKey=ot.advance=Xr,pr(nu)}});return xe.onsuccess=Ht(function(pr){xe.onsuccess=Nr,Nr()}),ot.continue=at,ot.continuePrimaryKey=mt,ot.advance=wt,Nr(),ru},Ae(ot)):Ae(null)},Fe)})},count:function(ce){var ne=ce.query,he=ce.trans,ve=ne.index,ge=ne.range;return new Promise(function(Ie,Ae){var Fe=he.objectStore(se),Ne=ve.isPrimaryKey?Fe:Fe.index(ve.name),Fe=I(ge),Ne=Fe?Ne.count(Fe):Ne.count();Ne.onsuccess=Ht(function(Te){return Ie(Te.target.result)}),Ne.onerror=Jr(Ae)})}}}var T,z,W,oe=(z=X,W=Wo((T=f).objectStoreNames),{schema:{name:T.name,tables:W.map(function(ue){return z.objectStore(ue)}).map(function(ue){var Z=ue.keyPath,ne=ue.autoIncrement,se=l(Z),ce={},ne={name:ue.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:Z==null,compound:se,keyPath:Z,autoIncrement:ne,unique:!0,extractKey:Xs(Z)},indexes:Wo(ue.indexNames).map(function(he){return ue.index(he)}).map(function(Ie){var ve=Ie.name,ge=Ie.unique,Ae=Ie.multiEntry,Ie=Ie.keyPath,Ae={name:ve,compound:l(Ie),keyPath:Ie,unique:ge,multiEntry:Ae,extractKey:Xs(Ie)};return ce[ps(Ie)]=Ae}),getIndexByKeyPath:function(he){return ce[ps(he)]}};return ce[":id"]=ne.primaryKey,Z!=null&&(ce[ps(Z)]=ne.primaryKey),ne})},hasGetAll:0<W.length&&"getAll"in z.objectStore(W[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),X=oe.schema,te=oe.hasGetAll,oe=X.tables.map(R),H={};return oe.forEach(function(ue){return H[ue.name]=ue}),{stack:"dbcore",transaction:f.transaction.bind(f),table:function(ue){if(!H[ue])throw new Error("Table '".concat(ue,"' not found"));return H[ue]},MIN_KEY:-1/0,MAX_KEY:Wa(p),schema:X}}function Nm(f,p,_,I){var R=_.IDBKeyRange;return _.indexedDB,{dbcore:(I=Am(p,R,I),f.dbcore.reduce(function(T,z){return z=z.create,n(n({},T),z(T))},I))}}function Qo(f,I){var _=I.db,I=Nm(f._middlewares,_,f._deps,I);f.core=I.dbcore,f.tables.forEach(function(R){var T=R.name;f.core.schema.tables.some(function(z){return z.name===T})&&(R.core=f.core.table(T),f[T]instanceof f.Table&&(f[T].core=R.core))})}function Zs(f,p,_,I){_.forEach(function(R){var T=I[R];p.forEach(function(z){var W=(function X(te,oe){return O(te,oe)||(te=m(te))&&X(te,oe)})(z,R);(!W||"value"in W&&W.value===void 0)&&(z===f.Transaction.prototype||z instanceof f.Transaction?E(z,R,{get:function(){return this.table(R)},set:function(X){S(this,R,{value:X,writable:!0,configurable:!0,enumerable:!0})}}):z[R]=new f.Table(R,T))})})}function Ha(f,p){p.forEach(function(_){for(var I in _)_[I]instanceof f.Table&&delete _[I]})}function id(f,p){return f._cfg.version-p._cfg.version}function ms(f,p,_,I){var R=f._dbSchema;_.objectStoreNames.contains("$meta")&&!R.$meta&&(R.$meta=Qu("$meta",to("")[0],[]),f._storeNames.push("$meta"));var T=f._createTransaction("readwrite",f._storeNames,R);T.create(_),T._completion.catch(I);var z=T._reject.bind(T),W=Ge.transless||Ge;cs(function(){return Ge.trans=T,Ge.transless=W,p!==0?(Qo(f,_),te=p,((X=T).storeNames.includes("$meta")?X.table("$meta").get("version").then(function(oe){return oe??te}):Ue.resolve(te)).then(function(oe){return ue=oe,Z=T,se=_,ce=[],oe=(H=f)._versions,ne=H._dbSchema=Ya(0,H.idbdb,se),(oe=oe.filter(function(he){return he._cfg.version>=ue})).length!==0?(oe.forEach(function(he){ce.push(function(){var ve=ne,ge=he._cfg.dbschema;Br(H,ve,se),Br(H,ge,se),ne=H._dbSchema=ge;var Ie=Yo(ve,ge);Ie.add.forEach(function(Le){Yu(se,Le[0],Le[1].primKey,Le[1].indexes)}),Ie.change.forEach(function(Le){if(Le.recreate)throw new be.Upgrade("Not yet support for changing primary key");var xe=se.objectStore(Le.name);Le.add.forEach(function(ze){return eo(xe,ze)}),Le.change.forEach(function(ze){xe.deleteIndex(ze.name),eo(xe,ze)}),Le.del.forEach(function(ze){return xe.deleteIndex(ze)})});var Ae=he._cfg.contentUpgrade;if(Ae&&he._cfg.version>ue){Qo(H,se),Z._memoizedTables={};var Fe=ie(ge);Ie.del.forEach(function(Le){Fe[Le]=ve[Le]}),Ha(H,[H.Transaction.prototype]),Zs(H,[H.Transaction.prototype],u(Fe),Fe),Z.schema=Fe;var Ne,Te=j(Ae);return Te&&jo(),Ie=Ue.follow(function(){var Le;(Ne=Ae(Z))&&Te&&(Le=ls.bind(null,null),Ne.then(Le,Le))}),Ne&&typeof Ne.then=="function"?Ue.resolve(Ne):Ie.then(function(){return Ne})}}),ce.push(function(ve){var ge,Ie,Ae=he._cfg.dbschema;ge=Ae,Ie=ve,[].slice.call(Ie.db.objectStoreNames).forEach(function(Fe){return ge[Fe]==null&&Ie.db.deleteObjectStore(Fe)}),Ha(H,[H.Transaction.prototype]),Zs(H,[H.Transaction.prototype],H._storeNames,H._dbSchema),Z.schema=H._dbSchema}),ce.push(function(ve){H.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(H.idbdb.version/10)===he._cfg.version?(H.idbdb.deleteObjectStore("$meta"),delete H._dbSchema.$meta,H._storeNames=H._storeNames.filter(function(ge){return ge!=="$meta"})):ve.objectStore("$meta").put(he._cfg.version,"version"))})}),(function he(){return ce.length?Ue.resolve(ce.shift()(Z.idbtrans)).then(he):Ue.resolve()})().then(function(){Qa(ne,se)})):Ue.resolve();var H,ue,Z,se,ce,ne}).catch(z)):(u(R).forEach(function(oe){Yu(_,oe,R[oe].primKey,R[oe].indexes)}),Qo(f,_),void Ue.follow(function(){return f.on.populate.fire(T)}).catch(z));var X,te})}function Il(f,p){Qa(f._dbSchema,p),p.db.version%10!=0||p.objectStoreNames.contains("$meta")||p.db.createObjectStore("$meta").add(Math.ceil(p.db.version/10-1),"version");var _=Ya(0,f.idbdb,p);Br(f,f._dbSchema,p);for(var I=0,R=Yo(_,f._dbSchema).change;I<R.length;I++){var T=(function(z){if(z.change.length||z.recreate)return console.warn("Unable to patch indexes of table ".concat(z.name," because it has changes on the type of index or primary key.")),{value:void 0};var W=p.objectStore(z.name);z.add.forEach(function(X){Pt&&console.debug("Dexie upgrade patch: Creating missing index ".concat(z.name,".").concat(X.src)),eo(W,X)})})(R[I]);if(typeof T=="object")return T.value}}function Yo(f,p){var _,I={del:[],add:[],change:[]};for(_ in f)p[_]||I.del.push(_);for(_ in p){var R=f[_],T=p[_];if(R){var z={name:_,def:T,recreate:!1,del:[],add:[],change:[]};if(""+(R.primKey.keyPath||"")!=""+(T.primKey.keyPath||"")||R.primKey.auto!==T.primKey.auto)z.recreate=!0,I.change.push(z);else{var W=R.idxByName,X=T.idxByName,te=void 0;for(te in W)X[te]||z.del.push(te);for(te in X){var oe=W[te],H=X[te];oe?oe.src!==H.src&&z.change.push(H):z.add.push(H)}(0<z.del.length||0<z.add.length||0<z.change.length)&&I.change.push(z)}}else I.add.push([_,T])}return I}function Yu(f,p,_,I){var R=f.db.createObjectStore(p,_.keyPath?{keyPath:_.keyPath,autoIncrement:_.auto}:{autoIncrement:_.auto});return I.forEach(function(T){return eo(R,T)}),R}function Qa(f,p){u(f).forEach(function(_){p.db.objectStoreNames.contains(_)||(Pt&&console.debug("Dexie: Creating missing table",_),Yu(p,_,f[_].primKey,f[_].indexes))})}function eo(f,p){f.createIndex(p.name,p.keyPath,{unique:p.unique,multiEntry:p.multi})}function Ya(f,p,_){var I={};return P(p.objectStoreNames,0).forEach(function(R){for(var T=_.objectStore(R),z=Hu(Ka(te=T.keyPath),te||"",!0,!1,!!T.autoIncrement,te&&typeof te!="string",!0),W=[],X=0;X<T.indexNames.length;++X){var oe=T.index(T.indexNames[X]),te=oe.keyPath,oe=Hu(oe.name,te,!!oe.unique,!!oe.multiEntry,!1,te&&typeof te!="string",!1);W.push(oe)}I[R]=Qu(R,z,W)}),I}function Br(f,p,_){for(var I=_.db.objectStoreNames,R=0;R<I.length;++R){var T=I[R],z=_.objectStore(T);f._hasGetAll="getAll"in z;for(var W=0;W<z.indexNames.length;++W){var X=z.indexNames[W],te=z.index(X).keyPath,oe=typeof te=="string"?te:"["+P(te).join("+")+"]";!p[T]||(te=p[T].idxByName[oe])&&(te.name=X,delete p[T].idxByName[oe],p[T].idxByName[X]=te)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&a.WorkerGlobalScope&&a instanceof a.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(f._hasGetAll=!1)}function to(f){return f.split(",").map(function(p,_){var I=(p=p.trim()).replace(/([&*]|\+\+)/g,""),R=/^\[/.test(I)?I.match(/^\[(.*)\]$/)[1].split("+"):I;return Hu(I,R||null,/\&/.test(p),/\*/.test(p),/\+\+/.test(p),l(R),_===0)})}var Ol=(ys.prototype._parseStoresSpec=function(f,p){u(f).forEach(function(_){if(f[_]!==null){var I=to(f[_]),R=I.shift();if(R.unique=!0,R.multi)throw new be.Schema("Primary key cannot be multi-valued");I.forEach(function(T){if(T.auto)throw new be.Schema("Only primary key can be marked as autoIncrement (++)");if(!T.keyPath)throw new be.Schema("Index must have a name and cannot be an empty string")}),p[_]=Qu(_,R,I)}})},ys.prototype.stores=function(_){var p=this.db;this._cfg.storesSource=this._cfg.storesSource?d(this._cfg.storesSource,_):_;var _=p._versions,I={},R={};return _.forEach(function(T){d(I,T._cfg.storesSource),R=T._cfg.dbschema={},T._parseStoresSpec(I,R)}),p._dbSchema=R,Ha(p,[p._allTables,p,p.Transaction.prototype]),Zs(p,[p._allTables,p,p.Transaction.prototype,this._cfg.tables],u(R),R),p._storeNames=u(R),this},ys.prototype.upgrade=function(f){return this._cfg.contentUpgrade=lr(this._cfg.contentUpgrade||J,f),this},ys);function ys(){}function kl(f,p){var _=f._dbNamesDB;return _||(_=f._dbNamesDB=new pi(zo,{addons:[],indexedDB:f,IDBKeyRange:p})).version(1).stores({dbnames:"name"}),_.table("dbnames")}function Ga(f){return f&&typeof f.databases=="function"}function Ja(f){return cs(function(){return Ge.letThrough=!0,f()})}function ro(f){return!("from"in f)}var Or=function(f,p){if(!this){var _=new Or;return f&&"d"in f&&d(_,f),_}d(this,arguments.length?{d:1,from:f,to:1<arguments.length?p:f}:{d:0})};function Go(f,p,_){var I=It(p,_);if(!isNaN(I)){if(0<I)throw RangeError();if(ro(f))return d(f,{from:p,to:_,d:1});var R=f.l,I=f.r;if(It(_,f.from)<0)return R?Go(R,p,_):f.l={from:p,to:_,d:1,l:null,r:null},Ju(f);if(0<It(p,f.to))return I?Go(I,p,_):f.r={from:p,to:_,d:1,l:null,r:null},Ju(f);It(p,f.from)<0&&(f.from=p,f.l=null,f.d=I?I.d+1:1),0<It(_,f.to)&&(f.to=_,f.r=null,f.d=f.l?f.l.d+1:1),_=!f.r,R&&!f.l&&Xa(f,R),I&&_&&Xa(f,I)}}function Xa(f,p){ro(p)||(function _(I,X){var T=X.from,z=X.to,W=X.l,X=X.r;Go(I,T,z),W&&_(I,W),X&&_(I,X)})(f,p)}function sd(f,p){var _=Gu(p),I=_.next();if(I.done)return!1;for(var R=I.value,T=Gu(f),z=T.next(R.from),W=z.value;!I.done&&!z.done;){if(It(W.from,R.to)<=0&&0<=It(W.to,R.from))return!0;It(R.from,W.from)<0?R=(I=_.next(W.from)).value:W=(z=T.next(R.from)).value}return!1}function Gu(f){var p=ro(f)?null:{s:0,n:f};return{next:function(_){for(var I=0<arguments.length;p;)switch(p.s){case 0:if(p.s=1,I)for(;p.n.l&&It(_,p.n.from)<0;)p={up:p,n:p.n.l,s:1};else for(;p.n.l;)p={up:p,n:p.n.l,s:1};case 1:if(p.s=2,!I||It(_,p.n.to)<=0)return{value:p.n,done:!1};case 2:if(p.n.r){p.s=3,p={up:p,n:p.n.r,s:0};continue}case 3:p=p.up}return{done:!0}}}}function Ju(f){var p,_,I=(((p=f.r)===null||p===void 0?void 0:p.d)||0)-(((_=f.l)===null||_===void 0?void 0:_.d)||0),R=1<I?"r":I<-1?"l":"";R&&(p=R=="r"?"l":"r",_=n({},f),I=f[R],f.from=I.from,f.to=I.to,f[R]=I[R],_[R]=I[p],(f[p]=_).d=od(_)),f.d=od(f)}function od(_){var p=_.r,_=_.l;return(p?_?Math.max(p.d,_.d):p.d:_?_.d:0)+1}function Xu(f,p){return u(p).forEach(function(_){f[_]?Xa(f[_],p[_]):f[_]=(function I(R){var T,z,W={};for(T in R)g(R,T)&&(z=R[T],W[T]=!z||typeof z!="object"||le.has(z.constructor)?z:I(z));return W})(p[_])}),f}function Pl(f,p){return f.all||p.all||Object.keys(f).some(function(_){return p[_]&&sd(p[_],f[_])})}b(Or.prototype,((En={add:function(f){return Xa(this,f),this},addKey:function(f){return Go(this,f,f),this},addKeys:function(f){var p=this;return f.forEach(function(_){return Go(p,_,_)}),this},hasKey:function(f){var p=Gu(this).next(f).value;return p&&It(p.from,f)<=0&&0<=It(p.to,f)}})[nt]=function(){return Gu(this)},En));var no={},Dl={},Zu=!1;function ec(f){Xu(Dl,f),Zu||(Zu=!0,setTimeout(function(){Zu=!1,Rl(Dl,!(Dl={}))},0))}function Rl(f,p){p===void 0&&(p=!1);var _=new Set;if(f.all)for(var I=0,R=Object.values(no);I<R.length;I++)ad(z=R[I],f,_,p);else for(var T in f){var z,W=/^idb\:\/\/(.*)\/(.*)\//.exec(T);W&&(T=W[1],W=W[2],(z=no["idb://".concat(T,"/").concat(W)])&&ad(z,f,_,p))}_.forEach(function(X){return X()})}function ad(f,p,_,I){for(var R=[],T=0,z=Object.entries(f.queries.query);T<z.length;T++){for(var W=z[T],X=W[0],te=[],oe=0,H=W[1];oe<H.length;oe++){var ue=H[oe];Pl(p,ue.obsSet)?ue.subscribers.forEach(function(ne){return _.add(ne)}):I&&te.push(ue)}I&&R.push([X,te])}if(I)for(var Z=0,se=R;Z<se.length;Z++){var ce=se[Z],X=ce[0],te=ce[1];f.queries.query[X]=te}}function Tm(f){var p=f._state,_=f._deps.indexedDB;if(p.isBeingOpened||f.idbdb)return p.dbReadyPromise.then(function(){return p.dbOpenError?dr(p.dbOpenError):f});p.isBeingOpened=!0,p.dbOpenError=null,p.openComplete=!1;var I=p.openCanceller,R=Math.round(10*f.verno),T=!1;function z(){if(p.openCanceller!==I)throw new be.DatabaseClosed("db.open() was cancelled")}function W(){return new Ue(function(ue,Z){if(z(),!_)throw new be.MissingAPI;var se=f.name,ce=p.autoSchema||!R?_.open(se):_.open(se,R);if(!ce)throw new be.MissingAPI;ce.onerror=Jr(Z),ce.onblocked=Ht(f._fireOnBlocked),ce.onupgradeneeded=Ht(function(ne){var he;oe=ce.transaction,p.autoSchema&&!f._options.allowEmptyDB?(ce.onerror=Li,oe.abort(),ce.result.close(),(he=_.deleteDatabase(se)).onsuccess=he.onerror=Ht(function(){Z(new be.NoSuchDatabase("Database ".concat(se," doesnt exist")))})):(oe.onerror=Jr(Z),ne=ne.oldVersion>Math.pow(2,62)?0:ne.oldVersion,H=ne<1,f.idbdb=ce.result,T&&Il(f,oe),ms(f,ne/10,oe,Z))},Z),ce.onsuccess=Ht(function(){oe=null;var ne,he,ve,ge,Ie,Ae=f.idbdb=ce.result,Fe=P(Ae.objectStoreNames);if(0<Fe.length)try{var Ne=Ae.transaction((ge=Fe).length===1?ge[0]:ge,"readonly");if(p.autoSchema)he=Ae,ve=Ne,(ne=f).verno=he.version/10,ve=ne._dbSchema=Ya(0,he,ve),ne._storeNames=P(he.objectStoreNames,0),Zs(ne,[ne._allTables],u(ve),ve);else if(Br(f,f._dbSchema,Ne),((Ie=Yo(Ya(0,(Ie=f).idbdb,Ne),Ie._dbSchema)).add.length||Ie.change.some(function(Te){return Te.add.length||Te.change.length}))&&!T)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Ae.close(),R=Ae.version+1,T=!0,ue(W());Qo(f,Ne)}catch{}Uo.push(f),Ae.onversionchange=Ht(function(Te){p.vcFired=!0,f.on("versionchange").fire(Te)}),Ae.onclose=Ht(function(Te){f.on("close").fire(Te)}),H&&(Ie=f._deps,Ne=se,Ae=Ie.indexedDB,Ie=Ie.IDBKeyRange,Ga(Ae)||Ne===zo||kl(Ae,Ie).put({name:Ne}).catch(J)),ue()},Z)}).catch(function(ue){switch(ue?.name){case"UnknownError":if(0<p.PR1398_maxLoop)return p.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),W();break;case"VersionError":if(0<R)return R=0,W()}return Ue.reject(ue)})}var X,te=p.dbReadyResolve,oe=null,H=!1;return Ue.race([I,(typeof navigator>"u"?Ue.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(ue){function Z(){return indexedDB.databases().finally(ue)}X=setInterval(Z,100),Z()}).finally(function(){return clearInterval(X)}):Promise.resolve()).then(W)]).then(function(){return z(),p.onReadyBeingFired=[],Ue.resolve(Ja(function(){return f.on.ready.fire(f.vip)})).then(function ue(){if(0<p.onReadyBeingFired.length){var Z=p.onReadyBeingFired.reduce(lr,J);return p.onReadyBeingFired=[],Ue.resolve(Ja(function(){return Z(f.vip)})).then(ue)}})}).finally(function(){p.openCanceller===I&&(p.onReadyBeingFired=null,p.isBeingOpened=!1)}).catch(function(ue){p.dbOpenError=ue;try{oe&&oe.abort()}catch{}return I===p.openCanceller&&f._close(),dr(ue)}).finally(function(){p.openComplete=!0,te()}).then(function(){var ue;return H&&(ue={},f.tables.forEach(function(Z){Z.schema.indexes.forEach(function(se){se.name&&(ue["idb://".concat(f.name,"/").concat(Z.name,"/").concat(se.name)]=new Or(-1/0,[[[]]]))}),ue["idb://".concat(f.name,"/").concat(Z.name,"/")]=ue["idb://".concat(f.name,"/").concat(Z.name,"/:dels")]=new Or(-1/0,[[[]]])}),ji(Sn).fire(ue),Rl(ue,!0)),f})}function Za(f){function p(T){return f.next(T)}var _=R(p),I=R(function(T){return f.throw(T)});function R(T){return function(X){var W=T(X),X=W.value;return W.done?X:X&&typeof X.then=="function"?X.then(_,I):l(X)?Promise.all(X).then(_,I):_(X)}}return R(p)()}function tc(f,p,_){for(var I=l(f)?f.slice():[f],R=0;R<_;++R)I.push(p);return I}var xm={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(f){return n(n({},f),{table:function(p){var _=f.table(p),I=_.schema,R={},T=[];function z(H,ue,Z){var se=ps(H),ce=R[se]=R[se]||[],ne=H==null?0:typeof H=="string"?1:H.length,he=0<ue,he=n(n({},Z),{name:he?"".concat(se,"(virtual-from:").concat(Z.name,")"):Z.name,lowLevelIndex:Z,isVirtual:he,keyTail:ue,keyLength:ne,extractKey:Xs(H),unique:!he&&Z.unique});return ce.push(he),he.isPrimaryKey||T.push(he),1<ne&&z(ne===2?H[0]:H.slice(0,ne-1),ue+1,Z),ce.sort(function(ve,ge){return ve.keyTail-ge.keyTail}),he}p=z(I.primaryKey.keyPath,0,I.primaryKey),R[":id"]=[p];for(var W=0,X=I.indexes;W<X.length;W++){var te=X[W];z(te.keyPath,0,te)}function oe(H){var ue,Z=H.query.index;return Z.isVirtual?n(n({},H),{query:{index:Z.lowLevelIndex,range:(ue=H.query.range,Z=Z.keyTail,{type:ue.type===1?2:ue.type,lower:tc(ue.lower,ue.lowerOpen?f.MAX_KEY:f.MIN_KEY,Z),lowerOpen:!0,upper:tc(ue.upper,ue.upperOpen?f.MIN_KEY:f.MAX_KEY,Z),upperOpen:!0})}}):H}return n(n({},_),{schema:n(n({},I),{primaryKey:p,indexes:T,getIndexByKeyPath:function(H){return(H=R[ps(H)])&&H[0]}}),count:function(H){return _.count(oe(H))},query:function(H){return _.query(oe(H))},openCursor:function(H){var ue=H.query.index,Z=ue.keyTail,se=ue.isVirtual,ce=ue.keyLength;return se?_.openCursor(oe(H)).then(function(he){return he&&ne(he)}):_.openCursor(H);function ne(he){return Object.create(he,{continue:{value:function(ve){ve!=null?he.continue(tc(ve,H.reverse?f.MAX_KEY:f.MIN_KEY,Z)):H.unique?he.continue(he.key.slice(0,ce).concat(H.reverse?f.MIN_KEY:f.MAX_KEY,Z)):he.continue()}},continuePrimaryKey:{value:function(ve,ge){he.continuePrimaryKey(tc(ve,f.MAX_KEY,Z),ge)}},primaryKey:{get:function(){return he.primaryKey}},key:{get:function(){var ve=he.key;return ce===1?ve[0]:ve.slice(0,ce)}},value:{get:function(){return he.value}}})}}})}})}};function Cl(f,p,_,I){return _=_||{},I=I||"",u(f).forEach(function(R){var T,z,W;g(p,R)?(T=f[R],z=p[R],typeof T=="object"&&typeof z=="object"&&T&&z?(W=We(T))!==We(z)?_[I+R]=p[R]:W==="Object"?Cl(T,z,_,I+R+"."):T!==z&&(_[I+R]=p[R]):T!==z&&(_[I+R]=p[R])):_[I+R]=void 0}),u(p).forEach(function(R){g(f,R)||(_[I+R]=p[R])}),_}function rc(f,p){return p.type==="delete"?p.keys:p.keys||p.values.map(f.extractKey)}var Mm={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(f){return n(n({},f),{table:function(p){var _=f.table(p),I=_.schema.primaryKey;return n(n({},_),{mutate:function(R){var T=Ge.trans,z=T.table(p).hook,W=z.deleting,X=z.creating,te=z.updating;switch(R.type){case"add":if(X.fire===J)break;return T._promise("readwrite",function(){return oe(R)},!0);case"put":if(X.fire===J&&te.fire===J)break;return T._promise("readwrite",function(){return oe(R)},!0);case"delete":if(W.fire===J)break;return T._promise("readwrite",function(){return oe(R)},!0);case"deleteRange":if(W.fire===J)break;return T._promise("readwrite",function(){return(function H(ue,Z,se){return _.query({trans:ue,values:!1,query:{index:I,range:Z},limit:se}).then(function(ce){var ne=ce.result;return oe({type:"delete",keys:ne,trans:ue}).then(function(he){return 0<he.numFailures?Promise.reject(he.failures[0]):ne.length<se?{failures:[],numFailures:0,lastResult:void 0}:H(ue,n(n({},Z),{lower:ne[ne.length-1],lowerOpen:!0}),se)})})})(R.trans,R.range,1e4)},!0)}return _.mutate(R);function oe(H){var ue,Z,se,ce=Ge.trans,ne=H.keys||rc(I,H);if(!ne)throw new Error("Keys missing");return(H=H.type==="add"||H.type==="put"?n(n({},H),{keys:ne}):n({},H)).type!=="delete"&&(H.values=s([],H.values)),H.keys&&(H.keys=s([],H.keys)),ue=_,se=ne,((Z=H).type==="add"?Promise.resolve([]):ue.getMany({trans:Z.trans,keys:se,cache:"immutable"})).then(function(he){var ve=ne.map(function(ge,Ie){var Ae,Fe,Ne,Te=he[Ie],Le={onerror:null,onsuccess:null};return H.type==="delete"?W.fire.call(Le,ge,Te,ce):H.type==="add"||Te===void 0?(Ae=X.fire.call(Le,ge,H.values[Ie],ce),ge==null&&Ae!=null&&(H.keys[Ie]=ge=Ae,I.outbound||U(H.values[Ie],I.keyPath,ge))):(Ae=Cl(Te,H.values[Ie]),(Fe=te.fire.call(Le,Ae,ge,Te,ce))&&(Ne=H.values[Ie],Object.keys(Fe).forEach(function(xe){g(Ne,xe)?Ne[xe]=Fe[xe]:U(Ne,xe,Fe[xe])}))),Le});return _.mutate(H).then(function(ge){for(var Ie=ge.failures,Ae=ge.results,Fe=ge.numFailures,ge=ge.lastResult,Ne=0;Ne<ne.length;++Ne){var Te=(Ae||ne)[Ne],Le=ve[Ne];Te==null?Le.onerror&&Le.onerror(Ie[Ne]):Le.onsuccess&&Le.onsuccess(H.type==="put"&&he[Ne]?H.values[Ne]:Te)}return{failures:Ie,results:Ae,numFailures:Fe,lastResult:ge}}).catch(function(ge){return ve.forEach(function(Ie){return Ie.onerror&&Ie.onerror(ge)}),Promise.reject(ge)})})}}})}})}};function ud(f,p,_){try{if(!p||p.keys.length<f.length)return null;for(var I=[],R=0,T=0;R<p.keys.length&&T<f.length;++R)It(p.keys[R],f[T])===0&&(I.push(_?ke(p.values[R]):p.values[R]),++T);return I.length===f.length?I:null}catch{return null}}var Fm={stack:"dbcore",level:-1,create:function(f){return{table:function(p){var _=f.table(p);return n(n({},_),{getMany:function(I){if(!I.cache)return _.getMany(I);var R=ud(I.keys,I.trans._cache,I.cache==="clone");return R?Ue.resolve(R):_.getMany(I).then(function(T){return I.trans._cache={keys:I.keys,values:I.cache==="clone"?ke(T):T},T})},mutate:function(I){return I.type!=="add"&&(I.trans._cache=null),_.mutate(I)}})}}}};function cd(f,p){return f.trans.mode==="readonly"&&!!f.subscr&&!f.trans.explicit&&f.trans.db._options.cache!=="disabled"&&!p.schema.primaryKey.outbound}function ld(f,p){switch(f){case"query":return p.values&&!p.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Bm={stack:"dbcore",level:0,name:"Observability",create:function(f){var p=f.schema.name,_=new Or(f.MIN_KEY,f.MAX_KEY);return n(n({},f),{transaction:function(I,R,T){if(Ge.subscr&&R!=="readonly")throw new be.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Ge.querier));return f.transaction(I,R,T)},table:function(I){var R=f.table(I),T=R.schema,z=T.primaryKey,H=T.indexes,W=z.extractKey,X=z.outbound,te=z.autoIncrement&&H.filter(function(Z){return Z.compound&&Z.keyPath.includes(z.keyPath)}),oe=n(n({},R),{mutate:function(Z){function se(xe){return xe="idb://".concat(p,"/").concat(I,"/").concat(xe),ge[xe]||(ge[xe]=new Or)}var ce,ne,he,ve=Z.trans,ge=Z.mutatedParts||(Z.mutatedParts={}),Ie=se(""),Ae=se(":dels"),Fe=Z.type,Le=Z.type==="deleteRange"?[Z.range]:Z.type==="delete"?[Z.keys]:Z.values.length<50?[rc(z,Z).filter(function(xe){return xe}),Z.values]:[],Ne=Le[0],Te=Le[1],Le=Z.trans._cache;return l(Ne)?(Ie.addKeys(Ne),(Le=Fe==="delete"||Ne.length===Te.length?ud(Ne,Le):null)||Ae.addKeys(Ne),(Le||Te)&&(ce=se,ne=Le,he=Te,T.indexes.forEach(function(xe){var ze=ce(xe.name||"");function at(wt){return wt!=null?xe.extractKey(wt):null}function mt(wt){return xe.multiEntry&&l(wt)?wt.forEach(function(Xr){return ze.addKey(Xr)}):ze.addKey(wt)}(ne||he).forEach(function(wt,Ar){var ot=ne&&at(ne[Ar]),Ar=he&&at(he[Ar]);It(ot,Ar)!==0&&(ot!=null&&mt(ot),Ar!=null&&mt(Ar))})}))):Ne?(Te={from:(Te=Ne.lower)!==null&&Te!==void 0?Te:f.MIN_KEY,to:(Te=Ne.upper)!==null&&Te!==void 0?Te:f.MAX_KEY},Ae.add(Te),Ie.add(Te)):(Ie.add(_),Ae.add(_),T.indexes.forEach(function(xe){return se(xe.name).add(_)})),R.mutate(Z).then(function(xe){return!Ne||Z.type!=="add"&&Z.type!=="put"||(Ie.addKeys(xe.results),te&&te.forEach(function(ze){for(var at=Z.values.map(function(ot){return ze.extractKey(ot)}),mt=ze.keyPath.findIndex(function(ot){return ot===z.keyPath}),wt=0,Xr=xe.results.length;wt<Xr;++wt)at[wt][mt]=xe.results[wt];se(ze.name).addKeys(at)})),ve.mutatedParts=Xu(ve.mutatedParts||{},ge),xe})}}),H=function(se){var ce=se.query,se=ce.index,ce=ce.range;return[se,new Or((se=ce.lower)!==null&&se!==void 0?se:f.MIN_KEY,(ce=ce.upper)!==null&&ce!==void 0?ce:f.MAX_KEY)]},ue={get:function(Z){return[z,new Or(Z.key)]},getMany:function(Z){return[z,new Or().addKeys(Z.keys)]},count:H,query:H,openCursor:H};return u(ue).forEach(function(Z){oe[Z]=function(se){var ce=Ge.subscr,ne=!!ce,he=cd(Ge,R)&&ld(Z,se)?se.obsSet={}:ce;if(ne){var ve=function(Te){return Te="idb://".concat(p,"/").concat(I,"/").concat(Te),he[Te]||(he[Te]=new Or)},ge=ve(""),Ie=ve(":dels"),ce=ue[Z](se),ne=ce[0],ce=ce[1];if((Z==="query"&&ne.isPrimaryKey&&!se.values?Ie:ve(ne.name||"")).add(ce),!ne.isPrimaryKey){if(Z!=="count"){var Ae=Z==="query"&&X&&se.values&&R.query(n(n({},se),{values:!1}));return R[Z].apply(this,arguments).then(function(Te){if(Z==="query"){if(X&&se.values)return Ae.then(function(at){return at=at.result,ge.addKeys(at),Te});var Le=se.values?Te.result.map(W):Te.result;(se.values?ge:Ie).addKeys(Le)}else if(Z==="openCursor"){var xe=Te,ze=se.values;return xe&&Object.create(xe,{key:{get:function(){return Ie.addKey(xe.primaryKey),xe.key}},primaryKey:{get:function(){var at=xe.primaryKey;return Ie.addKey(at),at}},value:{get:function(){return ze&&ge.addKey(xe.primaryKey),xe.value}}})}return Te})}Ie.add(_)}}return R[Z].apply(this,arguments)}}),oe}})}};function fd(f,p,_){if(_.numFailures===0)return p;if(p.type==="deleteRange")return null;var I=p.keys?p.keys.length:"values"in p&&p.values?p.values.length:1;return _.numFailures===I?null:(p=n({},p),l(p.keys)&&(p.keys=p.keys.filter(function(R,T){return!(T in _.failures)})),"values"in p&&l(p.values)&&(p.values=p.values.filter(function(R,T){return!(T in _.failures)})),p)}function eu(f,p){return _=f,((I=p).lower===void 0||(I.lowerOpen?0<It(_,I.lower):0<=It(_,I.lower)))&&(f=f,(p=p).upper===void 0||(p.upperOpen?It(f,p.upper)<0:It(f,p.upper)<=0));var _,I}function Jo(f,p,ue,I,R,T){if(!ue||ue.length===0)return f;var z=p.query.index,W=z.multiEntry,X=p.query.range,te=I.schema.primaryKey.extractKey,oe=z.extractKey,H=(z.lowLevelIndex||z).extractKey,ue=ue.reduce(function(Z,se){var ce=Z,ne=[];if(se.type==="add"||se.type==="put")for(var he=new Or,ve=se.values.length-1;0<=ve;--ve){var ge,Ie=se.values[ve],Ae=te(Ie);he.hasKey(Ae)||(ge=oe(Ie),(W&&l(ge)?ge.some(function(xe){return eu(xe,X)}):eu(ge,X))&&(he.addKey(Ae),ne.push(Ie)))}switch(se.type){case"add":var Fe=new Or().addKeys(p.values?Z.map(function(ze){return te(ze)}):Z),ce=Z.concat(p.values?ne.filter(function(ze){return ze=te(ze),!Fe.hasKey(ze)&&(Fe.addKey(ze),!0)}):ne.map(function(ze){return te(ze)}).filter(function(ze){return!Fe.hasKey(ze)&&(Fe.addKey(ze),!0)}));break;case"put":var Ne=new Or().addKeys(se.values.map(function(ze){return te(ze)}));ce=Z.filter(function(ze){return!Ne.hasKey(p.values?te(ze):ze)}).concat(p.values?ne:ne.map(function(ze){return te(ze)}));break;case"delete":var Te=new Or().addKeys(se.keys);ce=Z.filter(function(ze){return!Te.hasKey(p.values?te(ze):ze)});break;case"deleteRange":var Le=se.range;ce=Z.filter(function(ze){return!eu(te(ze),Le)})}return ce},f);return ue===f?f:(ue.sort(function(Z,se){return It(H(Z),H(se))||It(te(Z),te(se))}),p.limit&&p.limit<1/0&&(ue.length>p.limit?ue.length=p.limit:f.length===p.limit&&ue.length<p.limit&&(R.dirty=!0)),T?Object.freeze(ue):ue)}function dd(f,p){return It(f.lower,p.lower)===0&&It(f.upper,p.upper)===0&&!!f.lowerOpen==!!p.lowerOpen&&!!f.upperOpen==!!p.upperOpen}function hd(f,p){return(function(_,I,R,T){if(_===void 0)return I!==void 0?-1:0;if(I===void 0)return 1;if((I=It(_,I))===0){if(R&&T)return 0;if(R)return 1;if(T)return-1}return I})(f.lower,p.lower,f.lowerOpen,p.lowerOpen)<=0&&0<=(function(_,I,R,T){if(_===void 0)return I!==void 0?1:0;if(I===void 0)return-1;if((I=It(_,I))===0){if(R&&T)return 0;if(R)return-1;if(T)return 1}return I})(f.upper,p.upper,f.upperOpen,p.upperOpen)}function pd(f,p,_,I){f.subscribers.add(_),I.addEventListener("abort",function(){var R,T;f.subscribers.delete(_),f.subscribers.size===0&&(R=f,T=p,setTimeout(function(){R.subscribers.size===0&&Ee(T,R)},3e3))})}var md={stack:"dbcore",level:0,name:"Cache",create:function(f){var p=f.schema.name;return n(n({},f),{transaction:function(_,I,R){var T,z,W=f.transaction(_,I,R);return I==="readwrite"&&(z=(T=new AbortController).signal,R=function(X){return function(){if(T.abort(),I==="readwrite"){for(var te=new Set,oe=0,H=_;oe<H.length;oe++){var ue=H[oe],Z=no["idb://".concat(p,"/").concat(ue)];if(Z){var se=f.table(ue),ce=Z.optimisticOps.filter(function(ze){return ze.trans===W});if(W._explicit&&X&&W.mutatedParts)for(var ne=0,he=Object.values(Z.queries.query);ne<he.length;ne++)for(var ve=0,ge=(Fe=he[ne]).slice();ve<ge.length;ve++)Pl((Ne=ge[ve]).obsSet,W.mutatedParts)&&(Ee(Fe,Ne),Ne.subscribers.forEach(function(ze){return te.add(ze)}));else if(0<ce.length){Z.optimisticOps=Z.optimisticOps.filter(function(ze){return ze.trans!==W});for(var Ie=0,Ae=Object.values(Z.queries.query);Ie<Ae.length;Ie++)for(var Fe,Ne,Te,Le=0,xe=(Fe=Ae[Ie]).slice();Le<xe.length;Le++)(Ne=xe[Le]).res!=null&&W.mutatedParts&&(X&&!Ne.dirty?(Te=Object.isFrozen(Ne.res),Te=Jo(Ne.res,Ne.req,ce,se,Ne,Te),Ne.dirty?(Ee(Fe,Ne),Ne.subscribers.forEach(function(ze){return te.add(ze)})):Te!==Ne.res&&(Ne.res=Te,Ne.promise=Ue.resolve({result:Te}))):(Ne.dirty&&Ee(Fe,Ne),Ne.subscribers.forEach(function(ze){return te.add(ze)})))}}}te.forEach(function(ze){return ze()})}}},W.addEventListener("abort",R(!1),{signal:z}),W.addEventListener("error",R(!1),{signal:z}),W.addEventListener("complete",R(!0),{signal:z})),W},table:function(_){var I=f.table(_),R=I.schema.primaryKey;return n(n({},I),{mutate:function(T){var z=Ge.trans;if(R.outbound||z.db._options.cache==="disabled"||z.explicit||z.idbtrans.mode!=="readwrite")return I.mutate(T);var W=no["idb://".concat(p,"/").concat(_)];return W?(z=I.mutate(T),T.type!=="add"&&T.type!=="put"||!(50<=T.values.length||rc(R,T).some(function(X){return X==null}))?(W.optimisticOps.push(T),T.mutatedParts&&ec(T.mutatedParts),z.then(function(X){0<X.numFailures&&(Ee(W.optimisticOps,T),(X=fd(0,T,X))&&W.optimisticOps.push(X),T.mutatedParts&&ec(T.mutatedParts))}),z.catch(function(){Ee(W.optimisticOps,T),T.mutatedParts&&ec(T.mutatedParts)})):z.then(function(X){var te=fd(0,n(n({},T),{values:T.values.map(function(oe,H){var ue;return X.failures[H]?oe:(oe=(ue=R.keyPath)!==null&&ue!==void 0&&ue.includes(".")?ke(oe):n({},oe),U(oe,R.keyPath,X.results[H]),oe)})}),X);W.optimisticOps.push(te),queueMicrotask(function(){return T.mutatedParts&&ec(T.mutatedParts)})}),z):I.mutate(T)},query:function(T){if(!cd(Ge,I)||!ld("query",T))return I.query(T);var z=((te=Ge.trans)===null||te===void 0?void 0:te.db._options.cache)==="immutable",H=Ge,W=H.requery,X=H.signal,te=(function(se,ce,ne,he){var ve=no["idb://".concat(se,"/").concat(ce)];if(!ve)return[];if(!(ce=ve.queries[ne]))return[null,!1,ve,null];var ge=ce[(he.query?he.query.index.name:null)||""];if(!ge)return[null,!1,ve,null];switch(ne){case"query":var Ie=ge.find(function(Ae){return Ae.req.limit===he.limit&&Ae.req.values===he.values&&dd(Ae.req.query.range,he.query.range)});return Ie?[Ie,!0,ve,ge]:[ge.find(function(Ae){return("limit"in Ae.req?Ae.req.limit:1/0)>=he.limit&&(!he.values||Ae.req.values)&&hd(Ae.req.query.range,he.query.range)}),!1,ve,ge];case"count":return Ie=ge.find(function(Ae){return dd(Ae.req.query.range,he.query.range)}),[Ie,!!Ie,ve,ge]}})(p,_,"query",T),oe=te[0],H=te[1],ue=te[2],Z=te[3];return oe&&H?oe.obsSet=T.obsSet:(H=I.query(T).then(function(se){var ce=se.result;if(oe&&(oe.res=ce),z){for(var ne=0,he=ce.length;ne<he;++ne)Object.freeze(ce[ne]);Object.freeze(ce)}else se.result=ke(ce);return se}).catch(function(se){return Z&&oe&&Ee(Z,oe),Promise.reject(se)}),oe={obsSet:T.obsSet,promise:H,subscribers:new Set,type:"query",req:T,dirty:!1},Z?Z.push(oe):(Z=[oe],(ue=ue||(no["idb://".concat(p,"/").concat(_)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[T.query.index.name||""]=Z)),pd(oe,Z,W,X),oe.promise.then(function(se){return{result:Jo(se.result,T,ue?.optimisticOps,I,oe,z)}})}})}})}};function tu(f,p){return new Proxy(f,{get:function(_,I,R){return I==="db"?p:Reflect.get(_,I,R)}})}var pi=(Qt.prototype.version=function(f){if(isNaN(f)||f<.1)throw new be.Type("Given version is not a positive number");if(f=Math.round(10*f)/10,this.idbdb||this._state.isBeingOpened)throw new be.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,f);var p=this._versions,_=p.filter(function(I){return I._cfg.version===f})[0];return _||(_=new this.Version(f),p.push(_),p.sort(id),_.stores({}),this._state.autoSchema=!1,_)},Qt.prototype._whenReady=function(f){var p=this;return this.idbdb&&(this._state.openComplete||Ge.letThrough||this._vip)?f():new Ue(function(_,I){if(p._state.openComplete)return I(new be.DatabaseClosed(p._state.dbOpenError));if(!p._state.isBeingOpened){if(!p._state.autoOpen)return void I(new be.DatabaseClosed);p.open().catch(J)}p._state.dbReadyPromise.then(_,I)}).then(f)},Qt.prototype.use=function(f){var p=f.stack,_=f.create,I=f.level,R=f.name;return R&&this.unuse({stack:p,name:R}),f=this._middlewares[p]||(this._middlewares[p]=[]),f.push({stack:p,create:_,level:I??10,name:R}),f.sort(function(T,z){return T.level-z.level}),this},Qt.prototype.unuse=function(f){var p=f.stack,_=f.name,I=f.create;return p&&this._middlewares[p]&&(this._middlewares[p]=this._middlewares[p].filter(function(R){return I?R.create!==I:!!_&&R.name!==_})),this},Qt.prototype.open=function(){var f=this;return fs(Ni,function(){return Tm(f)})},Qt.prototype._close=function(){var f=this._state,p=Uo.indexOf(this);if(0<=p&&Uo.splice(p,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}f.isBeingOpened||(f.dbReadyPromise=new Ue(function(_){f.dbReadyResolve=_}),f.openCanceller=new Ue(function(_,I){f.cancelOpen=I}))},Qt.prototype.close=function(_){var p=(_===void 0?{disableAutoOpen:!0}:_).disableAutoOpen,_=this._state;p?(_.isBeingOpened&&_.cancelOpen(new be.DatabaseClosed),this._close(),_.autoOpen=!1,_.dbOpenError=new be.DatabaseClosed):(this._close(),_.autoOpen=this._options.autoOpen||_.isBeingOpened,_.openComplete=!1,_.dbOpenError=null)},Qt.prototype.delete=function(f){var p=this;f===void 0&&(f={disableAutoOpen:!0});var _=0<arguments.length&&typeof arguments[0]!="object",I=this._state;return new Ue(function(R,T){function z(){p.close(f);var W=p._deps.indexedDB.deleteDatabase(p.name);W.onsuccess=Ht(function(){var X,te,oe;X=p._deps,te=p.name,oe=X.indexedDB,X=X.IDBKeyRange,Ga(oe)||te===zo||kl(oe,X).delete(te).catch(J),R()}),W.onerror=Jr(T),W.onblocked=p._fireOnBlocked}if(_)throw new be.InvalidArgument("Invalid closeOptions argument to db.delete()");I.isBeingOpened?I.dbReadyPromise.then(z):z()})},Qt.prototype.backendDB=function(){return this.idbdb},Qt.prototype.isOpen=function(){return this.idbdb!==null},Qt.prototype.hasBeenClosed=function(){var f=this._state.dbOpenError;return f&&f.name==="DatabaseClosed"},Qt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Qt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Qt.prototype,"tables",{get:function(){var f=this;return u(this._allTables).map(function(p){return f._allTables[p]})},enumerable:!1,configurable:!0}),Qt.prototype.transaction=function(){var f=(function(p,_,I){var R=arguments.length;if(R<2)throw new be.InvalidArgument("Too few arguments");for(var T=new Array(R-1);--R;)T[R-1]=arguments[R];return I=T.pop(),[p,_e(T),I]}).apply(this,arguments);return this._transaction.apply(this,f)},Qt.prototype._transaction=function(f,p,_){var I=this,R=Ge.trans;R&&R.db===this&&f.indexOf("!")===-1||(R=null);var T,z,W=f.indexOf("?")!==-1;f=f.replace("!","").replace("?","");try{if(z=p.map(function(te){if(te=te instanceof I.Table?te.name:te,typeof te!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return te}),f=="r"||f===Uu)T=Uu;else{if(f!="rw"&&f!=qo)throw new be.InvalidArgument("Invalid transaction mode: "+f);T=qo}if(R){if(R.mode===Uu&&T===qo){if(!W)throw new be.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");R=null}R&&z.forEach(function(te){if(R&&R.storeNames.indexOf(te)===-1){if(!W)throw new be.SubTransaction("Table "+te+" not included in parent transaction.");R=null}}),W&&R&&!R.active&&(R=null)}}catch(te){return R?R._promise(null,function(oe,H){H(te)}):dr(te)}var X=(function te(oe,H,ue,Z,se){return Ue.resolve().then(function(){var ce=Ge.transless||Ge,ne=oe._createTransaction(H,ue,oe._dbSchema,Z);if(ne.explicit=!0,ce={trans:ne,transless:ce},Z)ne.idbtrans=Z.idbtrans;else try{ne.create(),ne.idbtrans._explicit=!0,oe._state.PR1398_maxLoop=3}catch(ge){return ge.name===we.InvalidState&&oe.isOpen()&&0<--oe._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),oe.close({disableAutoOpen:!1}),oe.open().then(function(){return te(oe,H,ue,null,se)})):dr(ge)}var he,ve=j(se);return ve&&jo(),ce=Ue.follow(function(){var ge;(he=se.call(ne,ne))&&(ve?(ge=ls.bind(null,null),he.then(ge,ge)):typeof he.next=="function"&&typeof he.throw=="function"&&(he=Za(he)))},ce),(he&&typeof he.then=="function"?Ue.resolve(he).then(function(ge){return ne.active?ge:dr(new be.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):ce.then(function(){return he})).then(function(ge){return Z&&ne._resolve(),ne._completion.then(function(){return ge})}).catch(function(ge){return ne._reject(ge),dr(ge)})})}).bind(null,this,T,z,R,_);return R?R._promise(T,X,"lock"):Ge.trans?fs(Ge.transless,function(){return I._whenReady(X)}):this._whenReady(X)},Qt.prototype.table=function(f){if(!g(this._allTables,f))throw new be.InvalidTable("Table ".concat(f," does not exist"));return this._allTables[f]},Qt);function Qt(f,p){var _=this;this._middlewares={},this.verno=0;var I=Qt.dependencies;this._options=p=n({addons:Qt.addons,autoOpen:!0,indexedDB:I.indexedDB,IDBKeyRange:I.IDBKeyRange,cache:"cloned"},p),this._deps={indexedDB:p.indexedDB,IDBKeyRange:p.IDBKeyRange},I=p.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var R,T,z,W,X,te={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:J,dbReadyPromise:null,cancelOpen:J,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:p.autoOpen};te.dbReadyPromise=new Ue(function(H){te.dbReadyResolve=H}),te.openCanceller=new Ue(function(H,ue){te.cancelOpen=ue}),this._state=te,this.name=f,this.on=ds(this,"populate","blocked","versionchange","close",{ready:[lr,J]}),this.on.ready.subscribe=C(this.on.ready.subscribe,function(H){return function(ue,Z){Qt.vip(function(){var se,ce=_._state;ce.openComplete?(ce.dbOpenError||Ue.resolve().then(ue),Z&&H(ue)):ce.onReadyBeingFired?(ce.onReadyBeingFired.push(ue),Z&&H(ue)):(H(ue),se=_,Z||H(function ne(){se.on.ready.unsubscribe(ue),se.on.ready.unsubscribe(ne)}))})}}),this.Collection=(R=this,hs(Tt.prototype,function(he,ne){this.db=R;var Z=wl,se=null;if(ne)try{Z=ne()}catch(ve){se=ve}var ce=he._ctx,ne=ce.table,he=ne.hook.reading.fire;this._ctx={table:ne,index:ce.index,isPrimKey:!ce.index||ne.schema.primKey.keyPath&&ce.index===ne.schema.primKey.name,range:Z,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:se,or:ce.or,valueMapper:he!==Se?he:null}})),this.Table=(T=this,hs(rd.prototype,function(H,ue,Z){this.db=T,this._tx=Z,this.name=H,this.schema=ue,this.hook=T._allTables[H]?T._allTables[H].hook:ds(null,{creating:[pt,J],reading:[Ce,Se],updating:[Qr,J],deleting:[yr,J]})})),this.Transaction=(z=this,hs(Va.prototype,function(H,ue,Z,se,ce){var ne=this;this.db=z,this.mode=H,this.storeNames=ue,this.schema=Z,this.chromeTransactionDurability=se,this.idbtrans=null,this.on=ds(this,"complete","error","abort"),this.parent=ce||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Ue(function(he,ve){ne._resolve=he,ne._reject=ve}),this._completion.then(function(){ne.active=!1,ne.on.complete.fire()},function(he){var ve=ne.active;return ne.active=!1,ne.on.error.fire(he),ne.parent?ne.parent._reject(he):ve&&ne.idbtrans&&ne.idbtrans.abort(),dr(he)})})),this.Version=(W=this,hs(Ol.prototype,function(H){this.db=W,this._cfg={version:H,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(X=this,hs(Bi.prototype,function(H,ue,Z){if(this.db=X,this._ctx={table:H,index:ue===":id"?null:ue,or:Z},this._cmp=this._ascending=It,this._descending=function(se,ce){return It(ce,se)},this._max=function(se,ce){return 0<It(se,ce)?se:ce},this._min=function(se,ce){return It(se,ce)<0?se:ce},this._IDBKeyRange=X._deps.IDBKeyRange,!this._IDBKeyRange)throw new be.MissingAPI})),this.on("versionchange",function(H){0<H.newVersion?console.warn("Another connection wants to upgrade database '".concat(_.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(_.name,"'. Closing db now to resume the delete request.")),_.close({disableAutoOpen:!1})}),this.on("blocked",function(H){!H.newVersion||H.newVersion<H.oldVersion?console.warn("Dexie.delete('".concat(_.name,"') was blocked")):console.warn("Upgrade '".concat(_.name,"' blocked by other connection holding version ").concat(H.oldVersion/10))}),this._maxKey=Wa(p.IDBKeyRange),this._createTransaction=function(H,ue,Z,se){return new _.Transaction(H,ue,Z,_._options.chromeTransactionDurability,se)},this._fireOnBlocked=function(H){_.on("blocked").fire(H),Uo.filter(function(ue){return ue.name===_.name&&ue!==_&&!ue._state.vcFired}).map(function(ue){return ue.on("versionchange").fire(H)})},this.use(Fm),this.use(md),this.use(Bm),this.use(xm),this.use(Mm);var oe=new Proxy(this,{get:function(H,ue,Z){if(ue==="_vip")return!0;if(ue==="table")return function(ce){return tu(_.table(ce),oe)};var se=Reflect.get(H,ue,Z);return se instanceof rd?tu(se,oe):ue==="tables"?se.map(function(ce){return tu(ce,oe)}):ue==="_createTransaction"?function(){return tu(se.apply(this,arguments),oe)}:se}});this.vip=oe,I.forEach(function(H){return H(_)})}var nc,En=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Lm=(ic.prototype.subscribe=function(f,p,_){return this._subscribe(f&&typeof f!="function"?f:{next:f,error:p,complete:_})},ic.prototype[En]=function(){return this},ic);function ic(f){this._subscribe=f}try{nc={indexedDB:a.indexedDB||a.mozIndexedDB||a.webkitIndexedDB||a.msIndexedDB,IDBKeyRange:a.IDBKeyRange||a.webkitIDBKeyRange}}catch{nc={indexedDB:null,IDBKeyRange:null}}function $l(f){var p,_=!1,I=new Lm(function(R){var T=j(f),z,W=!1,X={},te={},oe={get closed(){return W},unsubscribe:function(){W||(W=!0,z&&z.abort(),H&&ji.storagemutated.unsubscribe(Z))}};R.start&&R.start(oe);var H=!1,ue=function(){return ju(se)},Z=function(ce){Xu(X,ce),Pl(te,X)&&ue()},se=function(){var ce,ne,he;!W&&nc.indexedDB&&(X={},ce={},z&&z.abort(),z=new AbortController,he=(function(ve){var ge=Ks();try{T&&jo();var Ie=cs(f,ve);return Ie=T?Ie.finally(ls):Ie}finally{ge&&os()}})(ne={subscr:ce,signal:z.signal,requery:ue,querier:f,trans:null}),Promise.resolve(he).then(function(ve){_=!0,p=ve,W||ne.signal.aborted||(X={},(function(ge){for(var Ie in ge)if(g(ge,Ie))return;return 1})(te=ce)||H||(ji(Sn,Z),H=!0),ju(function(){return!W&&R.next&&R.next(ve)}))},function(ve){_=!1,["DatabaseClosedError","AbortError"].includes(ve?.name)||W||ju(function(){W||R.error&&R.error(ve)})}))};return setTimeout(ue,0),oe});return I.hasValue=function(){return _},I.getValue=function(){return p},I}var Qn=pi;function io(f){var p=Yn;try{Yn=!0,ji.storagemutated.fire(f),Rl(f,!0)}finally{Yn=p}}b(Qn,n(n({},ee),{delete:function(f){return new Qn(f,{addons:[]}).delete()},exists:function(f){return new Qn(f,{addons:[]}).open().then(function(p){return p.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(f){try{return p=Qn.dependencies,_=p.indexedDB,p=p.IDBKeyRange,(Ga(_)?Promise.resolve(_.databases()).then(function(I){return I.map(function(R){return R.name}).filter(function(R){return R!==zo})}):kl(_,p).toCollection().primaryKeys()).then(f)}catch{return dr(new be.MissingAPI)}var p,_},defineClass:function(){return function(f){d(this,f)}},ignoreTransaction:function(f){return Ge.trans?fs(Ge.transless,f):f()},vip:Ja,async:function(f){return function(){try{var p=Za(f.apply(this,arguments));return p&&typeof p.then=="function"?p:Ue.resolve(p)}catch(_){return dr(_)}}},spawn:function(f,p,_){try{var I=Za(f.apply(_,p||[]));return I&&typeof I.then=="function"?I:Ue.resolve(I)}catch(R){return dr(R)}},currentTransaction:{get:function(){return Ge.trans||null}},waitFor:function(f,p){return p=Ue.resolve(typeof f=="function"?Qn.ignoreTransaction(f):f).timeout(p||6e4),Ge.trans?Ge.trans.waitFor(p):p},Promise:Ue,debug:{get:function(){return Pt},set:function(f){qn(f)}},derive:D,extend:d,props:b,override:C,Events:ds,on:ji,liveQuery:$l,extendObservabilitySet:Xu,getByKeyPath:x,setByKeyPath:U,delByKeyPath:function(f,p){typeof p=="string"?U(f,p,void 0):"length"in p&&[].map.call(p,function(_){U(f,_,void 0)})},shallowClone:ie,deepClone:ke,getObjectDiff:Cl,cmp:It,asap:k,minKey:-1/0,addons:[],connections:Uo,errnames:we,dependencies:nc,cache:no,semVer:"4.0.10",version:"4.0.10".split(".").map(function(f){return parseInt(f)}).reduce(function(f,p,_){return f+p/Math.pow(10,2*_)})})),Qn.maxKey=Wa(Qn.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(ji(Sn,function(f){Yn||(f=new CustomEvent(El,{detail:f}),Yn=!0,dispatchEvent(f),Yn=!1)}),addEventListener(El,function(f){f=f.detail,Yn||io(f)}));var Xo,Yn=!1,yd=function(){};return typeof BroadcastChannel<"u"&&((yd=function(){(Xo=new BroadcastChannel(El)).onmessage=function(f){return f.data&&io(f.data)}})(),typeof Xo.unref=="function"&&Xo.unref(),ji(Sn,function(f){Yn||Xo.postMessage(f)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(f){if(!pi.disableBfCache&&f.persisted){Pt&&console.debug("Dexie: handling persisted pagehide"),Xo?.close();for(var p=0,_=Uo;p<_.length;p++)_[p].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(f){!pi.disableBfCache&&f.persisted&&(Pt&&console.debug("Dexie: handling persisted pageshow"),yd(),io({all:new Or(-1/0,[[]])}))})),Ue.rejectionMapper=function(f,p){return!f||f instanceof Q||f instanceof TypeError||f instanceof SyntaxError||!f.name||!Xe[f.name]?f:(p=new Xe[f.name](p||f.message,f),"stack"in f&&E(p,"stack",{get:function(){return this.inner.stack}}),p)},qn(Pt),n(pi,Object.freeze({__proto__:null,Dexie:pi,liveQuery:$l,Entity:Wn,cmp:It,PropModSymbol:an,PropModification:qa,replacePrefix:function(f,p){return new qa({replacePrefix:[f,p]})},add:function(f){return new qa({add:f})},remove:function(f){return new qa({remove:f})},default:pi,RangeSet:Or,mergeRanges:Xa,rangesOverlap:sd}),{default:pi}),pi})})(lp)),lp.exports}var Tx=Nx();const _g=sl(Tx),Xb=Symbol.for("Dexie"),Tp=globalThis[Xb]||(globalThis[Xb]=_g);if(_g.semVer!==Tp.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${_g.semVer} and ${Tp.semVer}`);const{liveQuery:t3,mergeRanges:r3,rangesOverlap:n3,RangeSet:i3,cmp:s3,Entity:o3,PropModSymbol:a3,PropModification:u3,replacePrefix:c3,add:l3,remove:f3}=Tp;var xp="docs",xx="changes",Zb="attachments",UO="dexie",eS=new Map,fp=new Map;function Mx(t,e,r,n){var s="rxdb-dexie-"+t+"--"+n.version+"--"+e,a=nn(eS,s,()=>{var u=(async()=>{var l=Kt(r);l.autoOpen=!1;var d=new Tp(s,l);r.onCreate&&await r.onCreate(d,s);var m={[xp]:Lx(n),[xx]:"++sequence, id",[Zb]:"id"};return d.version(1).stores(m),await d.open(),{dexieDb:d,dexieTable:d[xp],dexieAttachmentsTable:d[Zb],booleanIndexes:jx(n)}})();return eS.set(s,a),fp.set(a,0),u});return a}async function Fx(t){var e=await t,r=fp.get(t),n=r-1;n===0?(e.dexieDb.close(),fp.delete(t)):fp.set(t,n)}var wg="__";function pl(t){var e=t.split(".");if(e.length>1)return e.map(n=>pl(n)).join(".");if(t.startsWith("|")){var r=t.substring(1);return wg+r}else return t}function zO(t){var e=t.split(".");if(e.length>1)return e.map(n=>zO(n)).join(".");if(t.startsWith(wg)){var r=t.substring(wg.length);return"|"+r}else return t}function Bx(t,e){if(!e)return e;var r=Kt(e);return r=bg(r),t.forEach(n=>{var s=Sa(e,n),a=s?"1":"0",u=pl(n);NE(r,u,a)}),r}function qO(t,e){return e&&(e=Kt(e),e=Sg(e),t.forEach(r=>{var n=Sa(e,r),s=n==="1";NE(e,r,s)}),e)}function bg(t){if(!t||typeof t=="string"||typeof t=="number"||typeof t=="boolean")return t;if(Array.isArray(t))return t.map(r=>bg(r));if(typeof t=="object"){var e={};return Object.entries(t).forEach(([r,n])=>{typeof n=="object"&&(n=bg(n)),e[pl(r)]=n}),e}}function Sg(t){if(!t||typeof t=="string"||typeof t=="number"||typeof t=="boolean")return t;if(Array.isArray(t))return t.map(r=>Sg(r));if(typeof t=="object"){var e={};return Object.entries(t).forEach(([r,n])=>{(typeof n=="object"||Array.isArray(t))&&(n=Sg(n)),e[zO(r)]=n}),e}}function Lx(t){var e=[],r=on(t.primaryKey);e.push([r]),e.push(["_deleted",r]),t.indexes&&t.indexes.forEach(a=>{var u=qc(a);e.push(u)}),e.push(["_meta.lwt",r]),e.push(["_meta.lwt"]),e=e.map(a=>a.map(u=>pl(u)));var n=e.map(a=>a.length===1?a[0]:"["+a.join("+")+"]");n=n.filter((a,u,l)=>l.indexOf(a)===u);var s=n.join(", ");return s}async function tS(t,e){var r=await t,n=await r.dexieTable.bulkGet(e);return n.map(s=>qO(r.booleanIndexes,s))}function lh(t,e){return t+"||"+e}function jx(t){var e=new Set,r=[];return t.indexes?(t.indexes.forEach(n=>{var s=qc(n);s.forEach(a=>{if(!e.has(a)){e.add(a);var u=To(t,a);u.type==="boolean"&&r.push(a)}})}),r.push("_deleted"),IR(r)):r}function rS(t){return t===Ns?-1/0:t}function nS(t,e,r){if(t.includes(e)){var n=r===Gi||r===!0?"1":"0";return n}else return r}function VO(t,e,r){if(!r){if(typeof window>"u")throw new Error("IDBKeyRange missing");r=window.IDBKeyRange}var n=e.startKeys.map((u,l)=>{var d=e.index[l];return nS(t,d,u)}).map(rS),s=e.endKeys.map((u,l)=>{var d=e.index[l];return nS(t,d,u)}).map(rS),a=r.bound(n,s,!e.inclusiveStart,!e.inclusiveEnd);return a}async function iS(t,e){var r=await t.internals,n=e.query,s=n.skip?n.skip:0,a=n.limit?n.limit:1/0,u=s+a,l=e.queryPlan,d=!1;l.selectorSatisfiedByIndex||(d=gm(t.schema,e.query));var m=VO(r.booleanIndexes,l,r.dexieDb._options.IDBKeyRange),y=l.index,g=[];if(await r.dexieDb.transaction("r",r.dexieTable,async S=>{var E=S.idbtrans,D=E.objectStore(xp),O,$;$="["+y.map(C=>pl(C)).join("+")+"]",O=D.index($);var P=O.openCursor(m);await new Promise(C=>{P.onsuccess=function(B){var k=B.target.result;if(k){var x=qO(r.booleanIndexes,k.value);(!d||d(x))&&g.push(x),l.sortSatisfiedByIndex&&g.length===u?C():k.continue()}else C()}})}),!l.sortSatisfiedByIndex){var b=s0(t.schema,e.query);g=g.sort(b)}return g=g.slice(s,u),{documents:g}}async function Ux(t,e){var r=await t.internals,n=e.queryPlan,s=n.index,a=VO(r.booleanIndexes,n,r.dexieDb._options.IDBKeyRange),u=-1;return await r.dexieDb.transaction("r",r.dexieTable,async l=>{var d=l.idbtrans,m=d.objectStore(xp),y,g;g="["+s.map(S=>pl(S)).join("+")+"]",y=m.index(g);var b=y.count(a);u=await new Promise((S,E)=>{b.onsuccess=function(){S(b.result)},b.onerror=D=>E(D)})}),u}var zx=vn(),wv=!1,qx=(function(){function t(r,n,s,a,u,l,d,m){this.changes$=new Hr,this.instanceId=zx++,this.storage=r,this.databaseName=n,this.collectionName=s,this.schema=a,this.internals=u,this.options=l,this.settings=d,this.devMode=m,this.primaryPath=on(this.schema.primaryKey)}var e=t.prototype;return e.bulkWrite=async function(n,s){yu(this),!wv&&!await TE()&&console.warn(["-------------- RxDB Open Core RxStorage -------------------------------","You are using the free Dexie.js based RxStorage implementation from RxDB https://rxdb.info/rx-storage-dexie.html?console=dexie ","While this is a great option, we want to let you know that there are faster storage solutions available in our premium plugins.","For professional users and production environments, we highly recommend considering these premium options to enhance performance and reliability."," https://rxdb.info/premium/?console=dexie ","If you already purchased premium access you can disable this log by calling the setPremiumFlag() function from rxdb-premium/plugins/shared.","---------------------------------------------------------------------"].join(`
`)),wv=!0,n.forEach(y=>{if(!y.document._rev||y.previous&&!y.previous._rev)throw Ve("SNH",{args:{row:y}})});var a=await this.internals,u={error:[]};this.devMode&&(n=n.map(y=>{var g=Lf(y.document);return{previous:y.previous,document:g}}));var l=n.map(y=>y.document[this.primaryPath]),d;if(await a.dexieDb.transaction("rw",a.dexieTable,a.dexieAttachmentsTable,async()=>{var y=new Map,g=await tS(this.internals,l);g.forEach(E=>{var D=E;return D&&y.set(D[this.primaryPath],D),D}),d=QI(this,this.primaryPath,y,n,s),u.error=d.errors;var b=[];d.bulkInsertDocs.forEach(E=>{b.push(E.document)}),d.bulkUpdateDocs.forEach(E=>{b.push(E.document)}),b=b.map(E=>Bx(a.booleanIndexes,E)),b.length>0&&await a.dexieTable.bulkPut(b);var S=[];d.attachmentsAdd.forEach(E=>{S.push({id:lh(E.documentId,E.attachmentId),data:E.attachmentData.data})}),d.attachmentsUpdate.forEach(E=>{S.push({id:lh(E.documentId,E.attachmentId),data:E.attachmentData.data})}),await a.dexieAttachmentsTable.bulkPut(S),await a.dexieAttachmentsTable.bulkDelete(d.attachmentsRemove.map(E=>lh(E.documentId,E.attachmentId)))}),d=Ze(d),d.eventBulk.events.length>0){var m=Ze(d.newestRow).document;d.eventBulk.checkpoint={id:m[this.primaryPath],lwt:m._meta.lwt},this.changes$.next(d.eventBulk)}return u},e.findDocumentsById=async function(n,s){yu(this);var a=await this.internals,u=[];return await a.dexieDb.transaction("r",a.dexieTable,async()=>{var l=await tS(this.internals,n);l.forEach(d=>{d&&(!d._deleted||s)&&u.push(d)})}),u},e.query=function(n){return yu(this),iS(this,n)},e.count=async function(n){if(n.queryPlan.selectorSatisfiedByIndex){var s=await Ux(this,n);return{count:s,mode:"fast"}}else{var a=await iS(this,n);return{count:a.documents.length,mode:"slow"}}},e.changeStream=function(){return yu(this),this.changes$.asObservable()},e.cleanup=async function(n){yu(this);var s=await this.internals;return await s.dexieDb.transaction("rw",s.dexieTable,async()=>{var a=vn()-n,u=await s.dexieTable.where("_meta.lwt").below(a).toArray(),l=[];u.forEach(d=>{d._deleted==="1"&&l.push(d[this.primaryPath])}),await s.dexieTable.bulkDelete(l)}),!0},e.getAttachmentData=async function(n,s,a){yu(this);var u=await this.internals,l=lh(n,s);return await u.dexieDb.transaction("r",u.dexieAttachmentsTable,async()=>{var d=await u.dexieAttachmentsTable.get(l);if(d)return d.data;throw new Error("attachment missing documentId: "+n+" attachmentId: "+s)})},e.remove=async function(){yu(this);var n=await this.internals;return await n.dexieTable.clear(),this.close()},e.close=function(){return this.closed?this.closed:(this.closed=(async()=>{this.changes$.complete(),await Fx(this.internals)})(),this.closed)},t})();async function Vx(t,e,r){var n=Mx(e.databaseName,e.collectionName,r,e.schema),s=new qx(t,e.databaseName,e.collectionName,e.schema,n,e.options,r,e.devMode);return await vx(UO,e,s),Promise.resolve(s)}function yu(t){if(t.closed)throw new Error("RxStorageInstanceDexie is closed "+t.databaseName+"-"+t.collectionName)}var Kx=(function(){function t(r){this.name=UO,this.rxdbVersion=Hg,this.settings=r}var e=t.prototype;return e.createStorageInstance=function(n){if(YI(n),n.schema.indexes){var s=n.schema.indexes.flat();s.filter(a=>!a.includes(".")).forEach(a=>{if(!n.schema.required||!n.schema.required.includes(a))throw Ve("DXE1",{field:a,schema:n.schema})})}return Vx(this,n,this.settings)},t})();function Wx(t={}){var e=new Kx(t);return e}function Hx(t,e,r,n,s){for(var a=s+1;n<=s;){var u=n+s>>>1,l=t[u],d=r!==void 0?r(l,e):l-e;d>=0?(a=u,s=u-1):n=u+1}return a}function Qx(t,e,r,n,s){for(var a=s+1;n<=s;){var u=n+s>>>1,l=t[u],d=r!==void 0?r(l,e):l-e;d>0?(a=u,s=u-1):n=u+1}return a}function Yx(t,e,r,n,s){for(var a=n-1;n<=s;){var u=n+s>>>1,l=t[u],d=r!==void 0?r(l,e):l-e;d<0?(a=u,n=u+1):s=u-1}return a}function Gx(t,e,r,n,s){for(var a=n-1;n<=s;){var u=n+s>>>1,l=t[u],d=r!==void 0?r(l,e):l-e;d<=0?(a=u,n=u+1):s=u-1}return a}function Jx(t,e,r,n,s){for(;n<=s;){var a=n+s>>>1,u=t[a],l=r!==void 0?r(u,e):u-e;if(l===0)return a;l<=0?n=a+1:s=a-1}return-1}function qf(t,e,r,n,s,a){return a(t,e,r,n===void 0?0:n|0,s===void 0?t.length-1:s|0)}function Xx(t,e,r,n,s){return qf(t,e,r,n,s,Hx)}function sS(t,e,r,n,s){return qf(t,e,r,n,s,Qx)}function Zx(t,e,r,n,s){return qf(t,e,r,n,s,Yx)}function eM(t,e,r,n,s){return qf(t,e,r,n,s,Gx)}function KO(t,e,r,n,s){return qf(t,e,r,n,s,Jx)}function WO(t,e,r){return[t,e,r].join("--memory--")}function fh(t){if(t.internals.removed)throw new Error("removed already "+t.databaseName+" - "+t.collectionName+" - "+t.schema.version)}function dh(t,e){return t+"||"+e}function tM(t,e){return t[0]<e[0]?-1:1}function oS(t,e,r,n,s){e.documents.set(t,n);for(var a=0;a<r.length;++a){var u=r[a],l=u.docsWithIndex,d=u.getIndexableString,m=d(n),y=nO(l,[m,n,t],tM,0);if(s){var g=d(s);if(g===m){var b=l[y-1];if(b&&b[2]===t)l.splice(y-1,1);else{var S=l[y+1];if(S[2]===t)l.splice(y+1,1);else throw Ve("SNH",{document:n,args:{byIndex:u}})}}else{var E=KO(l,[g],lf);l.splice(E,1)}}}}function rM(t,e,r,n){var s=n[t];r.documents.delete(s),Object.values(r.byIndex).forEach(a=>{var u=a.docsWithIndex,l=a.getIndexableString(n),d=KO(u,[l],lf);u.splice(d,1)})}function lf(t,e){var r=t[0],n=e[0];return r<n?-1:r===n?0:1}function nM(t,e){var r=on(e.primaryKey),n=e.indexes?e.indexes.map(s=>qc(s)):[];n.push(["_deleted","_meta.lwt",r]),n.forEach(s=>{t.byIndex[Eg(s)]={index:s,docsWithIndex:[],getIndexableString:_x(e,s)}})}function Eg(t){return t.join(",")}var aS=new Set,iM=(function(){function t(r,n,s,a,u,l,d,m){this.closed=!1,this.categorizedByWriteInput=new WeakMap,this.storage=r,this.databaseName=n,this.collectionName=s,this.schema=a,this.internals=u,this.options=l,this.settings=d,this.devMode=m,aS.add(this),this.primaryPath=on(this.schema.primaryKey)}var e=t.prototype;return e.bulkWrite=function(n,s){this.ensurePersistence(),fh(this);var a=this.internals,u=this.internals.documents,l=this.primaryPath,d=QI(this,l,u,n,s),m=d.errors,y=Promise.resolve({error:m});if(this.categorizedByWriteInput.set(n,d),this.internals.ensurePersistenceTask=d,this.internals.ensurePersistenceIdlePromise||(this.internals.ensurePersistenceIdlePromise=Tf().then(()=>{this.internals.ensurePersistenceIdlePromise=void 0,this.ensurePersistence()})),d.eventBulk.events.length>0){var g=Ze(d.newestRow).document;d.eventBulk.checkpoint={id:g[l],lwt:g._meta.lwt},a.changes$.next(d.eventBulk)}return y},e.ensurePersistence=function(){if(this.internals.ensurePersistenceTask){var n=this.internals,s=this.internals.documents,a=this.primaryPath,u=this.internals.ensurePersistenceTask;this.internals.ensurePersistenceTask=void 0;for(var l=Object.values(this.internals.byIndex),d=u.bulkInsertDocs,m=0;m<d.length;++m){var y=d[m],g=y.document,b=g[a];oS(b,n,l,g,void 0)}for(var S=u.bulkUpdateDocs,E=0;E<S.length;++E){var D=S[E],O=D.document,$=O[a];oS($,n,l,O,s.get($))}if(this.schema.attachments){var P=n.attachments;u.attachmentsAdd.forEach(C=>{P.set(dh(C.documentId,C.attachmentId),{writeData:C.attachmentData,digest:C.digest})}),this.schema.attachments&&(u.attachmentsUpdate.forEach(C=>{P.set(dh(C.documentId,C.attachmentId),{writeData:C.attachmentData,digest:C.digest})}),u.attachmentsRemove.forEach(C=>{P.delete(dh(C.documentId,C.attachmentId))}))}}},e.findDocumentsById=function(n,s){this.ensurePersistence();var a=this.internals.documents,u=[];if(a.size===0)return Promise.resolve(u);for(var l=0;l<n.length;++l){var d=n[l],m=a.get(d);m&&(!m._deleted||s)&&u.push(m)}return Promise.resolve(u)},e.query=function(n){this.ensurePersistence();var s=n.queryPlan,a=n.query,u=a.skip?a.skip:0,l=a.limit?a.limit:1/0,d=u+l,m=!1;s.selectorSatisfiedByIndex||(m=gm(this.schema,n.query));var y=s.index,g=!s.sortSatisfiedByIndex,b=y,S=s.startKeys,E=Lb(this.schema,b,S),D=s.endKeys;D=D;var O=wx(this.schema,b,D),$=Eg(b);if(!this.internals.byIndex[$])throw new Error("index does not exist "+$);for(var P=this.internals.byIndex[$].docsWithIndex,C=(s.inclusiveStart?Xx:sS)(P,[E],lf),B=(s.inclusiveEnd?eM:Zx)(P,[O],lf),k=[],x=!1;!x;){var U=P[C];if(!U||C>B)break;var ie=U[1];(!m||m(ie))&&k.push(ie),k.length>=d&&!g&&(x=!0),C++}if(g){var Y=s0(this.schema,n.query);k=k.sort(Y)}return k=k.slice(u,d),Promise.resolve({documents:k})},e.count=async function(n){this.ensurePersistence();var s=await this.query(n);return{count:s.documents.length,mode:"fast"}},e.cleanup=function(n){this.ensurePersistence();for(var s=vn()-n,a=["_deleted","_meta.lwt",this.primaryPath],u=Eg(a),l=this.internals.byIndex[u].docsWithIndex,d=Lb(this.schema,a,[!0,0,""]),m=sS(l,[d],lf),y=!1;!y;){var g=l[m];!g||g[1]._meta.lwt>s?y=!0:(rM(this.primaryPath,this.schema,this.internals,g[1]),m++)}return pm},e.getAttachmentData=function(n,s,a){this.ensurePersistence(),fh(this);var u=dh(n,s),l=this.internals.attachments.get(u);if(!a||!l||l.digest!==a)throw new Error("attachment does not exist: "+u);return Promise.resolve(l.writeData.data)},e.changeStream=function(){return fh(this),this.internals.changes$.asObservable()},e.remove=async function(){if(this.closed)throw new Error("closed");this.ensurePersistence(),fh(this),this.internals.removed=!0,this.storage.collectionStates.delete(WO(this.databaseName,this.collectionName,this.schema.version)),await this.close()},e.close=function(){return aS.delete(this),this.ensurePersistence(),this.closed||(this.closed=!0,this.internals.refCount=this.internals.refCount-1),Tn},t})();function sM(t,e,r){var n=WO(e.databaseName,e.collectionName,e.schema.version),s=t.collectionStates.get(n);if(!s)s={id:al(5),schema:e.schema,removed:!1,refCount:1,documents:new Map,attachments:e.schema.attachments?new Map:void 0,byIndex:{},changes$:new Hr},nM(s,e.schema),t.collectionStates.set(n,s);else{if(e.devMode&&!Kc(s.schema,e.schema))throw new Error("storage was already created with a different schema");s.refCount=s.refCount+1}var a=new iM(t,e.databaseName,e.collectionName,e.schema,s,e.options,r,e.devMode);return Promise.resolve(a)}var oM=new Map;function uS(t={}){var e={name:"memory",rxdbVersion:Hg,collectionStates:oM,createStorageInstance(r){YI(r);var n=Object.assign({},t,r.options);return sM(this,r,n)}};return e}var hh={exports:{}},bv={},po={},vu={},Sv={},Ev={},Iv={},cS;function Mp(){return cS||(cS=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.regexpCode=t.getEsmExportName=t.getProperty=t.safeStringify=t.stringify=t.strConcat=t.addCodeArg=t.str=t._=t.nil=t._Code=t.Name=t.IDENTIFIER=t._CodeOrName=void 0;class e{}t._CodeOrName=e,t.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class r extends e{constructor(P){if(super(),!t.IDENTIFIER.test(P))throw new Error("CodeGen: name must be a valid identifier");this.str=P}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}t.Name=r;class n extends e{constructor(P){super(),this._items=typeof P=="string"?[P]:P}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const P=this._items[0];return P===""||P==='""'}get str(){var P;return(P=this._str)!==null&&P!==void 0?P:this._str=this._items.reduce((C,B)=>`${C}${B}`,"")}get names(){var P;return(P=this._names)!==null&&P!==void 0?P:this._names=this._items.reduce((C,B)=>(B instanceof r&&(C[B.str]=(C[B.str]||0)+1),C),{})}}t._Code=n,t.nil=new n("");function s($,...P){const C=[$[0]];let B=0;for(;B<P.length;)l(C,P[B]),C.push($[++B]);return new n(C)}t._=s;const a=new n("+");function u($,...P){const C=[S($[0])];let B=0;for(;B<P.length;)C.push(a),l(C,P[B]),C.push(a,S($[++B]));return d(C),new n(C)}t.str=u;function l($,P){P instanceof n?$.push(...P._items):P instanceof r?$.push(P):$.push(g(P))}t.addCodeArg=l;function d($){let P=1;for(;P<$.length-1;){if($[P]===a){const C=m($[P-1],$[P+1]);if(C!==void 0){$.splice(P-1,3,C);continue}$[P++]="+"}P++}}function m($,P){if(P==='""')return $;if($==='""')return P;if(typeof $=="string")return P instanceof r||$[$.length-1]!=='"'?void 0:typeof P!="string"?`${$.slice(0,-1)}${P}"`:P[0]==='"'?$.slice(0,-1)+P.slice(1):void 0;if(typeof P=="string"&&P[0]==='"'&&!($ instanceof r))return`"${$}${P.slice(1)}`}function y($,P){return P.emptyStr()?$:$.emptyStr()?P:u`${$}${P}`}t.strConcat=y;function g($){return typeof $=="number"||typeof $=="boolean"||$===null?$:S(Array.isArray($)?$.join(","):$)}function b($){return new n(S($))}t.stringify=b;function S($){return JSON.stringify($).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}t.safeStringify=S;function E($){return typeof $=="string"&&t.IDENTIFIER.test($)?new n(`.${$}`):s`[${$}]`}t.getProperty=E;function D($){if(typeof $=="string"&&t.IDENTIFIER.test($))return new n(`${$}`);throw new Error(`CodeGen: invalid export name: ${$}, use explicit $id name mapping`)}t.getEsmExportName=D;function O($){return new n($.toString())}t.regexpCode=O})(Iv)),Iv}var Ov={},lS;function fS(){return lS||(lS=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ValueScope=t.ValueScopeName=t.Scope=t.varKinds=t.UsedValueState=void 0;const e=Mp();class r extends Error{constructor(m){super(`CodeGen: "code" for ${m} not defined`),this.value=m.value}}var n;(function(d){d[d.Started=0]="Started",d[d.Completed=1]="Completed"})(n||(t.UsedValueState=n={})),t.varKinds={const:new e.Name("const"),let:new e.Name("let"),var:new e.Name("var")};class s{constructor({prefixes:m,parent:y}={}){this._names={},this._prefixes=m,this._parent=y}toName(m){return m instanceof e.Name?m:this.name(m)}name(m){return new e.Name(this._newName(m))}_newName(m){const y=this._names[m]||this._nameGroup(m);return`${m}${y.index++}`}_nameGroup(m){var y,g;if(!((g=(y=this._parent)===null||y===void 0?void 0:y._prefixes)===null||g===void 0)&&g.has(m)||this._prefixes&&!this._prefixes.has(m))throw new Error(`CodeGen: prefix "${m}" is not allowed in this scope`);return this._names[m]={prefix:m,index:0}}}t.Scope=s;class a extends e.Name{constructor(m,y){super(y),this.prefix=m}setValue(m,{property:y,itemIndex:g}){this.value=m,this.scopePath=(0,e._)`.${new e.Name(y)}[${g}]`}}t.ValueScopeName=a;const u=(0,e._)`\n`;class l extends s{constructor(m){super(m),this._values={},this._scope=m.scope,this.opts={...m,_n:m.lines?u:e.nil}}get(){return this._scope}name(m){return new a(m,this._newName(m))}value(m,y){var g;if(y.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const b=this.toName(m),{prefix:S}=b,E=(g=y.key)!==null&&g!==void 0?g:y.ref;let D=this._values[S];if(D){const P=D.get(E);if(P)return P}else D=this._values[S]=new Map;D.set(E,b);const O=this._scope[S]||(this._scope[S]=[]),$=O.length;return O[$]=y.ref,b.setValue(y,{property:S,itemIndex:$}),b}getValue(m,y){const g=this._values[m];if(g)return g.get(y)}scopeRefs(m,y=this._values){return this._reduceValues(y,g=>{if(g.scopePath===void 0)throw new Error(`CodeGen: name "${g}" has no value`);return(0,e._)`${m}${g.scopePath}`})}scopeCode(m=this._values,y,g){return this._reduceValues(m,b=>{if(b.value===void 0)throw new Error(`CodeGen: name "${b}" has no value`);return b.value.code},y,g)}_reduceValues(m,y,g={},b){let S=e.nil;for(const E in m){const D=m[E];if(!D)continue;const O=g[E]=g[E]||new Map;D.forEach($=>{if(O.has($))return;O.set($,n.Started);let P=y($);if(P){const C=this.opts.es5?t.varKinds.var:t.varKinds.const;S=(0,e._)`${S}${C} ${$} = ${P};${this.opts._n}`}else if(P=b?.($))S=(0,e._)`${S}${P}${this.opts._n}`;else throw new r($);O.set($,n.Completed)})}return S}}t.ValueScope=l})(Ov)),Ov}var dS;function Et(){return dS||(dS=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.or=t.and=t.not=t.CodeGen=t.operators=t.varKinds=t.ValueScopeName=t.ValueScope=t.Scope=t.Name=t.regexpCode=t.stringify=t.getProperty=t.nil=t.strConcat=t.str=t._=void 0;const e=Mp(),r=fS();var n=Mp();Object.defineProperty(t,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(t,"strConcat",{enumerable:!0,get:function(){return n.strConcat}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(t,"getProperty",{enumerable:!0,get:function(){return n.getProperty}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(t,"regexpCode",{enumerable:!0,get:function(){return n.regexpCode}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return n.Name}});var s=fS();Object.defineProperty(t,"Scope",{enumerable:!0,get:function(){return s.Scope}}),Object.defineProperty(t,"ValueScope",{enumerable:!0,get:function(){return s.ValueScope}}),Object.defineProperty(t,"ValueScopeName",{enumerable:!0,get:function(){return s.ValueScopeName}}),Object.defineProperty(t,"varKinds",{enumerable:!0,get:function(){return s.varKinds}}),t.operators={GT:new e._Code(">"),GTE:new e._Code(">="),LT:new e._Code("<"),LTE:new e._Code("<="),EQ:new e._Code("==="),NEQ:new e._Code("!=="),NOT:new e._Code("!"),OR:new e._Code("||"),AND:new e._Code("&&"),ADD:new e._Code("+")};class a{optimizeNodes(){return this}optimizeNames(M,A){return this}}class u extends a{constructor(M,A,q){super(),this.varKind=M,this.name=A,this.rhs=q}render({es5:M,_n:A}){const q=M?r.varKinds.var:this.varKind,we=this.rhs===void 0?"":` = ${this.rhs}`;return`${q} ${this.name}${we};`+A}optimizeNames(M,A){if(M[this.name.str])return this.rhs&&(this.rhs=Pe(this.rhs,M,A)),this}get names(){return this.rhs instanceof e._CodeOrName?this.rhs.names:{}}}class l extends a{constructor(M,A,q){super(),this.lhs=M,this.rhs=A,this.sideEffects=q}render({_n:M}){return`${this.lhs} = ${this.rhs};`+M}optimizeNames(M,A){if(!(this.lhs instanceof e.Name&&!M[this.lhs.str]&&!this.sideEffects))return this.rhs=Pe(this.rhs,M,A),this}get names(){const M=this.lhs instanceof e.Name?{}:{...this.lhs.names};return ke(M,this.rhs)}}class d extends l{constructor(M,A,q,we){super(M,q,we),this.op=A}render({_n:M}){return`${this.lhs} ${this.op}= ${this.rhs};`+M}}class m extends a{constructor(M){super(),this.label=M,this.names={}}render({_n:M}){return`${this.label}:`+M}}class y extends a{constructor(M){super(),this.label=M,this.names={}}render({_n:M}){return`break${this.label?` ${this.label}`:""};`+M}}class g extends a{constructor(M){super(),this.error=M}render({_n:M}){return`throw ${this.error};`+M}get names(){return this.error.names}}class b extends a{constructor(M){super(),this.code=M}render({_n:M}){return`${this.code};`+M}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(M,A){return this.code=Pe(this.code,M,A),this}get names(){return this.code instanceof e._CodeOrName?this.code.names:{}}}class S extends a{constructor(M=[]){super(),this.nodes=M}render(M){return this.nodes.reduce((A,q)=>A+q.render(M),"")}optimizeNodes(){const{nodes:M}=this;let A=M.length;for(;A--;){const q=M[A].optimizeNodes();Array.isArray(q)?M.splice(A,1,...q):q?M[A]=q:M.splice(A,1)}return M.length>0?this:void 0}optimizeNames(M,A){const{nodes:q}=this;let we=q.length;for(;we--;){const Oe=q[we];Oe.optimizeNames(M,A)||(We(M,Oe.names),q.splice(we,1))}return q.length>0?this:void 0}get names(){return this.nodes.reduce((M,A)=>me(M,A.names),{})}}class E extends S{render(M){return"{"+M._n+super.render(M)+"}"+M._n}}class D extends S{}class O extends E{}O.kind="else";class $ extends E{constructor(M,A){super(A),this.condition=M}render(M){let A=`if(${this.condition})`+super.render(M);return this.else&&(A+="else "+this.else.render(M)),A}optimizeNodes(){super.optimizeNodes();const M=this.condition;if(M===!0)return this.nodes;let A=this.else;if(A){const q=A.optimizeNodes();A=this.else=Array.isArray(q)?new O(q):q}if(A)return M===!1?A instanceof $?A:A.nodes:this.nodes.length?this:new $(nt(M),A instanceof $?[A]:A.nodes);if(!(M===!1||!this.nodes.length))return this}optimizeNames(M,A){var q;if(this.else=(q=this.else)===null||q===void 0?void 0:q.optimizeNames(M,A),!!(super.optimizeNames(M,A)||this.else))return this.condition=Pe(this.condition,M,A),this}get names(){const M=super.names;return ke(M,this.condition),this.else&&me(M,this.else.names),M}}$.kind="if";class P extends E{}P.kind="for";class C extends P{constructor(M){super(),this.iteration=M}render(M){return`for(${this.iteration})`+super.render(M)}optimizeNames(M,A){if(super.optimizeNames(M,A))return this.iteration=Pe(this.iteration,M,A),this}get names(){return me(super.names,this.iteration.names)}}class B extends P{constructor(M,A,q,we){super(),this.varKind=M,this.name=A,this.from=q,this.to=we}render(M){const A=M.es5?r.varKinds.var:this.varKind,{name:q,from:we,to:Oe}=this;return`for(${A} ${q}=${we}; ${q}<${Oe}; ${q}++)`+super.render(M)}get names(){const M=ke(super.names,this.from);return ke(M,this.to)}}class k extends P{constructor(M,A,q,we){super(),this.loop=M,this.varKind=A,this.name=q,this.iterable=we}render(M){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(M)}optimizeNames(M,A){if(super.optimizeNames(M,A))return this.iterable=Pe(this.iterable,M,A),this}get names(){return me(super.names,this.iterable.names)}}class x extends E{constructor(M,A,q){super(),this.name=M,this.args=A,this.async=q}render(M){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(M)}}x.kind="func";class U extends S{render(M){return"return "+super.render(M)}}U.kind="return";class ie extends E{render(M){let A="try"+super.render(M);return this.catch&&(A+=this.catch.render(M)),this.finally&&(A+=this.finally.render(M)),A}optimizeNodes(){var M,A;return super.optimizeNodes(),(M=this.catch)===null||M===void 0||M.optimizeNodes(),(A=this.finally)===null||A===void 0||A.optimizeNodes(),this}optimizeNames(M,A){var q,we;return super.optimizeNames(M,A),(q=this.catch)===null||q===void 0||q.optimizeNames(M,A),(we=this.finally)===null||we===void 0||we.optimizeNames(M,A),this}get names(){const M=super.names;return this.catch&&me(M,this.catch.names),this.finally&&me(M,this.finally.names),M}}class Y extends E{constructor(M){super(),this.error=M}render(M){return`catch(${this.error})`+super.render(M)}}Y.kind="catch";class _e extends E{render(M){return"finally"+super.render(M)}}_e.kind="finally";class le{constructor(M,A={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...A,_n:A.lines?`
`:""},this._extScope=M,this._scope=new r.Scope({parent:M}),this._nodes=[new D]}toString(){return this._root.render(this.opts)}name(M){return this._scope.name(M)}scopeName(M){return this._extScope.name(M)}scopeValue(M,A){const q=this._extScope.value(M,A);return(this._values[q.prefix]||(this._values[q.prefix]=new Set)).add(q),q}getScopeValue(M,A){return this._extScope.getValue(M,A)}scopeRefs(M){return this._extScope.scopeRefs(M,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(M,A,q,we){const Oe=this._scope.toName(A);return q!==void 0&&we&&(this._constants[Oe.str]=q),this._leafNode(new u(M,Oe,q)),Oe}const(M,A,q){return this._def(r.varKinds.const,M,A,q)}let(M,A,q){return this._def(r.varKinds.let,M,A,q)}var(M,A,q){return this._def(r.varKinds.var,M,A,q)}assign(M,A,q){return this._leafNode(new l(M,A,q))}add(M,A){return this._leafNode(new d(M,t.operators.ADD,A))}code(M){return typeof M=="function"?M():M!==e.nil&&this._leafNode(new b(M)),this}object(...M){const A=["{"];for(const[q,we]of M)A.length>1&&A.push(","),A.push(q),(q!==we||this.opts.es5)&&(A.push(":"),(0,e.addCodeArg)(A,we));return A.push("}"),new e._Code(A)}if(M,A,q){if(this._blockNode(new $(M)),A&&q)this.code(A).else().code(q).endIf();else if(A)this.code(A).endIf();else if(q)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(M){return this._elseNode(new $(M))}else(){return this._elseNode(new O)}endIf(){return this._endBlockNode($,O)}_for(M,A){return this._blockNode(M),A&&this.code(A).endFor(),this}for(M,A){return this._for(new C(M),A)}forRange(M,A,q,we,Oe=this.opts.es5?r.varKinds.var:r.varKinds.let){const be=this._scope.toName(M);return this._for(new B(Oe,be,A,q),()=>we(be))}forOf(M,A,q,we=r.varKinds.const){const Oe=this._scope.toName(M);if(this.opts.es5){const be=A instanceof e.Name?A:this.var("_arr",A);return this.forRange("_i",0,(0,e._)`${be}.length`,Xe=>{this.var(Oe,(0,e._)`${be}[${Xe}]`),q(Oe)})}return this._for(new k("of",we,Oe,A),()=>q(Oe))}forIn(M,A,q,we=this.opts.es5?r.varKinds.var:r.varKinds.const){if(this.opts.ownProperties)return this.forOf(M,(0,e._)`Object.keys(${A})`,q);const Oe=this._scope.toName(M);return this._for(new k("in",we,Oe,A),()=>q(Oe))}endFor(){return this._endBlockNode(P)}label(M){return this._leafNode(new m(M))}break(M){return this._leafNode(new y(M))}return(M){const A=new U;if(this._blockNode(A),this.code(M),A.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(U)}try(M,A,q){if(!A&&!q)throw new Error('CodeGen: "try" without "catch" and "finally"');const we=new ie;if(this._blockNode(we),this.code(M),A){const Oe=this.name("e");this._currNode=we.catch=new Y(Oe),A(Oe)}return q&&(this._currNode=we.finally=new _e,this.code(q)),this._endBlockNode(Y,_e)}throw(M){return this._leafNode(new g(M))}block(M,A){return this._blockStarts.push(this._nodes.length),M&&this.code(M).endBlock(A),this}endBlock(M){const A=this._blockStarts.pop();if(A===void 0)throw new Error("CodeGen: not in self-balancing block");const q=this._nodes.length-A;if(q<0||M!==void 0&&q!==M)throw new Error(`CodeGen: wrong number of nodes: ${q} vs ${M} expected`);return this._nodes.length=A,this}func(M,A=e.nil,q,we){return this._blockNode(new x(M,A,q)),we&&this.code(we).endFunc(),this}endFunc(){return this._endBlockNode(x)}optimize(M=1){for(;M-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(M){return this._currNode.nodes.push(M),this}_blockNode(M){this._currNode.nodes.push(M),this._nodes.push(M)}_endBlockNode(M,A){const q=this._currNode;if(q instanceof M||A&&q instanceof A)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${A?`${M.kind}/${A.kind}`:M.kind}"`)}_elseNode(M){const A=this._currNode;if(!(A instanceof $))throw new Error('CodeGen: "else" without "if"');return this._currNode=A.else=M,this}get _root(){return this._nodes[0]}get _currNode(){const M=this._nodes;return M[M.length-1]}set _currNode(M){const A=this._nodes;A[A.length-1]=M}}t.CodeGen=le;function me(Q,M){for(const A in M)Q[A]=(Q[A]||0)+(M[A]||0);return Q}function ke(Q,M){return M instanceof e._CodeOrName?me(Q,M.names):Q}function Pe(Q,M,A){if(Q instanceof e.Name)return q(Q);if(!we(Q))return Q;return new e._Code(Q._items.reduce((Oe,be)=>(be instanceof e.Name&&(be=q(be)),be instanceof e._Code?Oe.push(...be._items):Oe.push(be),Oe),[]));function q(Oe){const be=A[Oe.str];return be===void 0||M[Oe.str]!==1?Oe:(delete M[Oe.str],be)}function we(Oe){return Oe instanceof e._Code&&Oe._items.some(be=>be instanceof e.Name&&M[be.str]===1&&A[be.str]!==void 0)}}function We(Q,M){for(const A in M)Q[A]=(Q[A]||0)-(M[A]||0)}function nt(Q){return typeof Q=="boolean"||typeof Q=="number"||Q===null?!Q:(0,e._)`!${ae(Q)}`}t.not=nt;const et=j(t.operators.AND);function Ee(...Q){return Q.reduce(et)}t.and=Ee;const je=j(t.operators.OR);function F(...Q){return Q.reduce(je)}t.or=F;function j(Q){return(M,A)=>M===e.nil?A:A===e.nil?M:(0,e._)`${ae(M)} ${Q} ${ae(A)}`}function ae(Q){return Q instanceof e.Name?Q:(0,e._)`(${Q})`}})(Ev)),Ev}var St={},hS;function Nt(){if(hS)return St;hS=1,Object.defineProperty(St,"__esModule",{value:!0}),St.checkStrictMode=St.getErrorPath=St.Type=St.useFunc=St.setEvaluated=St.evaluatedPropsToName=St.mergeEvaluated=St.eachItem=St.unescapeJsonPointer=St.escapeJsonPointer=St.escapeFragment=St.unescapeFragment=St.schemaRefOrVal=St.schemaHasRulesButRef=St.schemaHasRules=St.checkUnknownRules=St.alwaysValidSchema=St.toHash=void 0;const t=Et(),e=Mp();function r(k){const x={};for(const U of k)x[U]=!0;return x}St.toHash=r;function n(k,x){return typeof x=="boolean"?x:Object.keys(x).length===0?!0:(s(k,x),!a(x,k.self.RULES.all))}St.alwaysValidSchema=n;function s(k,x=k.schema){const{opts:U,self:ie}=k;if(!U.strictSchema||typeof x=="boolean")return;const Y=ie.RULES.keywords;for(const _e in x)Y[_e]||B(k,`unknown keyword: "${_e}"`)}St.checkUnknownRules=s;function a(k,x){if(typeof k=="boolean")return!k;for(const U in k)if(x[U])return!0;return!1}St.schemaHasRules=a;function u(k,x){if(typeof k=="boolean")return!k;for(const U in k)if(U!=="$ref"&&x.all[U])return!0;return!1}St.schemaHasRulesButRef=u;function l({topSchemaRef:k,schemaPath:x},U,ie,Y){if(!Y){if(typeof U=="number"||typeof U=="boolean")return U;if(typeof U=="string")return(0,t._)`${U}`}return(0,t._)`${k}${x}${(0,t.getProperty)(ie)}`}St.schemaRefOrVal=l;function d(k){return g(decodeURIComponent(k))}St.unescapeFragment=d;function m(k){return encodeURIComponent(y(k))}St.escapeFragment=m;function y(k){return typeof k=="number"?`${k}`:k.replace(/~/g,"~0").replace(/\//g,"~1")}St.escapeJsonPointer=y;function g(k){return k.replace(/~1/g,"/").replace(/~0/g,"~")}St.unescapeJsonPointer=g;function b(k,x){if(Array.isArray(k))for(const U of k)x(U);else x(k)}St.eachItem=b;function S({mergeNames:k,mergeToName:x,mergeValues:U,resultToName:ie}){return(Y,_e,le,me)=>{const ke=le===void 0?_e:le instanceof t.Name?(_e instanceof t.Name?k(Y,_e,le):x(Y,_e,le),le):_e instanceof t.Name?(x(Y,le,_e),_e):U(_e,le);return me===t.Name&&!(ke instanceof t.Name)?ie(Y,ke):ke}}St.mergeEvaluated={props:S({mergeNames:(k,x,U)=>k.if((0,t._)`${U} !== true && ${x} !== undefined`,()=>{k.if((0,t._)`${x} === true`,()=>k.assign(U,!0),()=>k.assign(U,(0,t._)`${U} || {}`).code((0,t._)`Object.assign(${U}, ${x})`))}),mergeToName:(k,x,U)=>k.if((0,t._)`${U} !== true`,()=>{x===!0?k.assign(U,!0):(k.assign(U,(0,t._)`${U} || {}`),D(k,U,x))}),mergeValues:(k,x)=>k===!0?!0:{...k,...x},resultToName:E}),items:S({mergeNames:(k,x,U)=>k.if((0,t._)`${U} !== true && ${x} !== undefined`,()=>k.assign(U,(0,t._)`${x} === true ? true : ${U} > ${x} ? ${U} : ${x}`)),mergeToName:(k,x,U)=>k.if((0,t._)`${U} !== true`,()=>k.assign(U,x===!0?!0:(0,t._)`${U} > ${x} ? ${U} : ${x}`)),mergeValues:(k,x)=>k===!0?!0:Math.max(k,x),resultToName:(k,x)=>k.var("items",x)})};function E(k,x){if(x===!0)return k.var("props",!0);const U=k.var("props",(0,t._)`{}`);return x!==void 0&&D(k,U,x),U}St.evaluatedPropsToName=E;function D(k,x,U){Object.keys(U).forEach(ie=>k.assign((0,t._)`${x}${(0,t.getProperty)(ie)}`,!0))}St.setEvaluated=D;const O={};function $(k,x){return k.scopeValue("func",{ref:x,code:O[x.code]||(O[x.code]=new e._Code(x.code))})}St.useFunc=$;var P;(function(k){k[k.Num=0]="Num",k[k.Str=1]="Str"})(P||(St.Type=P={}));function C(k,x,U){if(k instanceof t.Name){const ie=x===P.Num;return U?ie?(0,t._)`"[" + ${k} + "]"`:(0,t._)`"['" + ${k} + "']"`:ie?(0,t._)`"/" + ${k}`:(0,t._)`"/" + ${k}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return U?(0,t.getProperty)(k).toString():"/"+y(k)}St.getErrorPath=C;function B(k,x,U=k.opts.strictSchema){if(U){if(x=`strict mode: ${x}`,U===!0)throw new Error(x);k.self.logger.warn(x)}}return St.checkStrictMode=B,St}var ph={},pS;function Fa(){if(pS)return ph;pS=1,Object.defineProperty(ph,"__esModule",{value:!0});const t=Et(),e={data:new t.Name("data"),valCxt:new t.Name("valCxt"),instancePath:new t.Name("instancePath"),parentData:new t.Name("parentData"),parentDataProperty:new t.Name("parentDataProperty"),rootData:new t.Name("rootData"),dynamicAnchors:new t.Name("dynamicAnchors"),vErrors:new t.Name("vErrors"),errors:new t.Name("errors"),this:new t.Name("this"),self:new t.Name("self"),scope:new t.Name("scope"),json:new t.Name("json"),jsonPos:new t.Name("jsonPos"),jsonLen:new t.Name("jsonLen"),jsonPart:new t.Name("jsonPart")};return ph.default=e,ph}var mS;function Sm(){return mS||(mS=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.extendErrors=t.resetErrorsCount=t.reportExtraError=t.reportError=t.keyword$DataError=t.keywordError=void 0;const e=Et(),r=Nt(),n=Fa();t.keywordError={message:({keyword:O})=>(0,e.str)`must pass "${O}" keyword validation`},t.keyword$DataError={message:({keyword:O,schemaType:$})=>$?(0,e.str)`"${O}" keyword must be ${$} ($data)`:(0,e.str)`"${O}" keyword is invalid ($data)`};function s(O,$=t.keywordError,P,C){const{it:B}=O,{gen:k,compositeRule:x,allErrors:U}=B,ie=g(O,$,P);C??(x||U)?d(k,ie):m(B,(0,e._)`[${ie}]`)}t.reportError=s;function a(O,$=t.keywordError,P){const{it:C}=O,{gen:B,compositeRule:k,allErrors:x}=C,U=g(O,$,P);d(B,U),k||x||m(C,n.default.vErrors)}t.reportExtraError=a;function u(O,$){O.assign(n.default.errors,$),O.if((0,e._)`${n.default.vErrors} !== null`,()=>O.if($,()=>O.assign((0,e._)`${n.default.vErrors}.length`,$),()=>O.assign(n.default.vErrors,null)))}t.resetErrorsCount=u;function l({gen:O,keyword:$,schemaValue:P,data:C,errsCount:B,it:k}){if(B===void 0)throw new Error("ajv implementation error");const x=O.name("err");O.forRange("i",B,n.default.errors,U=>{O.const(x,(0,e._)`${n.default.vErrors}[${U}]`),O.if((0,e._)`${x}.instancePath === undefined`,()=>O.assign((0,e._)`${x}.instancePath`,(0,e.strConcat)(n.default.instancePath,k.errorPath))),O.assign((0,e._)`${x}.schemaPath`,(0,e.str)`${k.errSchemaPath}/${$}`),k.opts.verbose&&(O.assign((0,e._)`${x}.schema`,P),O.assign((0,e._)`${x}.data`,C))})}t.extendErrors=l;function d(O,$){const P=O.const("err",$);O.if((0,e._)`${n.default.vErrors} === null`,()=>O.assign(n.default.vErrors,(0,e._)`[${P}]`),(0,e._)`${n.default.vErrors}.push(${P})`),O.code((0,e._)`${n.default.errors}++`)}function m(O,$){const{gen:P,validateName:C,schemaEnv:B}=O;B.$async?P.throw((0,e._)`new ${O.ValidationError}(${$})`):(P.assign((0,e._)`${C}.errors`,$),P.return(!1))}const y={keyword:new e.Name("keyword"),schemaPath:new e.Name("schemaPath"),params:new e.Name("params"),propertyName:new e.Name("propertyName"),message:new e.Name("message"),schema:new e.Name("schema"),parentSchema:new e.Name("parentSchema")};function g(O,$,P){const{createErrors:C}=O.it;return C===!1?(0,e._)`{}`:b(O,$,P)}function b(O,$,P={}){const{gen:C,it:B}=O,k=[S(B,P),E(O,P)];return D(O,$,k),C.object(...k)}function S({errorPath:O},{instancePath:$}){const P=$?(0,e.str)`${O}${(0,r.getErrorPath)($,r.Type.Str)}`:O;return[n.default.instancePath,(0,e.strConcat)(n.default.instancePath,P)]}function E({keyword:O,it:{errSchemaPath:$}},{schemaPath:P,parentSchema:C}){let B=C?$:(0,e.str)`${$}/${O}`;return P&&(B=(0,e.str)`${B}${(0,r.getErrorPath)(P,r.Type.Str)}`),[y.schemaPath,B]}function D(O,{params:$,message:P},C){const{keyword:B,data:k,schemaValue:x,it:U}=O,{opts:ie,propertyName:Y,topSchemaRef:_e,schemaPath:le}=U;C.push([y.keyword,B],[y.params,typeof $=="function"?$(O):$||(0,e._)`{}`]),ie.messages&&C.push([y.message,typeof P=="function"?P(O):P]),ie.verbose&&C.push([y.schema,x],[y.parentSchema,(0,e._)`${_e}${le}`],[n.default.data,k]),Y&&C.push([y.propertyName,Y])}})(Sv)),Sv}var yS;function aM(){if(yS)return vu;yS=1,Object.defineProperty(vu,"__esModule",{value:!0}),vu.boolOrEmptySchema=vu.topBoolOrEmptySchema=void 0;const t=Sm(),e=Et(),r=Fa(),n={message:"boolean schema is false"};function s(l){const{gen:d,schema:m,validateName:y}=l;m===!1?u(l,!1):typeof m=="object"&&m.$async===!0?d.return(r.default.data):(d.assign((0,e._)`${y}.errors`,null),d.return(!0))}vu.topBoolOrEmptySchema=s;function a(l,d){const{gen:m,schema:y}=l;y===!1?(m.var(d,!1),u(l)):m.var(d,!0)}vu.boolOrEmptySchema=a;function u(l,d){const{gen:m,data:y}=l,g={gen:m,keyword:"false schema",data:y,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:l};(0,t.reportError)(g,n,void 0,d)}return vu}var Kr={},gu={},vS;function HO(){if(vS)return gu;vS=1,Object.defineProperty(gu,"__esModule",{value:!0}),gu.getRules=gu.isJSONType=void 0;const t=["string","number","integer","boolean","null","object","array"],e=new Set(t);function r(s){return typeof s=="string"&&e.has(s)}gu.isJSONType=r;function n(){const s={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...s,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},s.number,s.string,s.array,s.object],post:{rules:[]},all:{},keywords:{}}}return gu.getRules=n,gu}var mo={},gS;function QO(){if(gS)return mo;gS=1,Object.defineProperty(mo,"__esModule",{value:!0}),mo.shouldUseRule=mo.shouldUseGroup=mo.schemaHasRulesForType=void 0;function t({schema:n,self:s},a){const u=s.RULES.types[a];return u&&u!==!0&&e(n,u)}mo.schemaHasRulesForType=t;function e(n,s){return s.rules.some(a=>r(n,a))}mo.shouldUseGroup=e;function r(n,s){var a;return n[s.keyword]!==void 0||((a=s.definition.implements)===null||a===void 0?void 0:a.some(u=>n[u]!==void 0))}return mo.shouldUseRule=r,mo}var _S;function Fp(){if(_S)return Kr;_S=1,Object.defineProperty(Kr,"__esModule",{value:!0}),Kr.reportTypeError=Kr.checkDataTypes=Kr.checkDataType=Kr.coerceAndCheckDataType=Kr.getJSONTypes=Kr.getSchemaTypes=Kr.DataType=void 0;const t=HO(),e=QO(),r=Sm(),n=Et(),s=Nt();var a;(function(P){P[P.Correct=0]="Correct",P[P.Wrong=1]="Wrong"})(a||(Kr.DataType=a={}));function u(P){const C=l(P.type);if(C.includes("null")){if(P.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!C.length&&P.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');P.nullable===!0&&C.push("null")}return C}Kr.getSchemaTypes=u;function l(P){const C=Array.isArray(P)?P:P?[P]:[];if(C.every(t.isJSONType))return C;throw new Error("type must be JSONType or JSONType[]: "+C.join(","))}Kr.getJSONTypes=l;function d(P,C){const{gen:B,data:k,opts:x}=P,U=y(C,x.coerceTypes),ie=C.length>0&&!(U.length===0&&C.length===1&&(0,e.schemaHasRulesForType)(P,C[0]));if(ie){const Y=E(C,k,x.strictNumbers,a.Wrong);B.if(Y,()=>{U.length?g(P,C,U):O(P)})}return ie}Kr.coerceAndCheckDataType=d;const m=new Set(["string","number","integer","boolean","null"]);function y(P,C){return C?P.filter(B=>m.has(B)||C==="array"&&B==="array"):[]}function g(P,C,B){const{gen:k,data:x,opts:U}=P,ie=k.let("dataType",(0,n._)`typeof ${x}`),Y=k.let("coerced",(0,n._)`undefined`);U.coerceTypes==="array"&&k.if((0,n._)`${ie} == 'object' && Array.isArray(${x}) && ${x}.length == 1`,()=>k.assign(x,(0,n._)`${x}[0]`).assign(ie,(0,n._)`typeof ${x}`).if(E(C,x,U.strictNumbers),()=>k.assign(Y,x))),k.if((0,n._)`${Y} !== undefined`);for(const le of B)(m.has(le)||le==="array"&&U.coerceTypes==="array")&&_e(le);k.else(),O(P),k.endIf(),k.if((0,n._)`${Y} !== undefined`,()=>{k.assign(x,Y),b(P,Y)});function _e(le){switch(le){case"string":k.elseIf((0,n._)`${ie} == "number" || ${ie} == "boolean"`).assign(Y,(0,n._)`"" + ${x}`).elseIf((0,n._)`${x} === null`).assign(Y,(0,n._)`""`);return;case"number":k.elseIf((0,n._)`${ie} == "boolean" || ${x} === null
              || (${ie} == "string" && ${x} && ${x} == +${x})`).assign(Y,(0,n._)`+${x}`);return;case"integer":k.elseIf((0,n._)`${ie} === "boolean" || ${x} === null
              || (${ie} === "string" && ${x} && ${x} == +${x} && !(${x} % 1))`).assign(Y,(0,n._)`+${x}`);return;case"boolean":k.elseIf((0,n._)`${x} === "false" || ${x} === 0 || ${x} === null`).assign(Y,!1).elseIf((0,n._)`${x} === "true" || ${x} === 1`).assign(Y,!0);return;case"null":k.elseIf((0,n._)`${x} === "" || ${x} === 0 || ${x} === false`),k.assign(Y,null);return;case"array":k.elseIf((0,n._)`${ie} === "string" || ${ie} === "number"
              || ${ie} === "boolean" || ${x} === null`).assign(Y,(0,n._)`[${x}]`)}}}function b({gen:P,parentData:C,parentDataProperty:B},k){P.if((0,n._)`${C} !== undefined`,()=>P.assign((0,n._)`${C}[${B}]`,k))}function S(P,C,B,k=a.Correct){const x=k===a.Correct?n.operators.EQ:n.operators.NEQ;let U;switch(P){case"null":return(0,n._)`${C} ${x} null`;case"array":U=(0,n._)`Array.isArray(${C})`;break;case"object":U=(0,n._)`${C} && typeof ${C} == "object" && !Array.isArray(${C})`;break;case"integer":U=ie((0,n._)`!(${C} % 1) && !isNaN(${C})`);break;case"number":U=ie();break;default:return(0,n._)`typeof ${C} ${x} ${P}`}return k===a.Correct?U:(0,n.not)(U);function ie(Y=n.nil){return(0,n.and)((0,n._)`typeof ${C} == "number"`,Y,B?(0,n._)`isFinite(${C})`:n.nil)}}Kr.checkDataType=S;function E(P,C,B,k){if(P.length===1)return S(P[0],C,B,k);let x;const U=(0,s.toHash)(P);if(U.array&&U.object){const ie=(0,n._)`typeof ${C} != "object"`;x=U.null?ie:(0,n._)`!${C} || ${ie}`,delete U.null,delete U.array,delete U.object}else x=n.nil;U.number&&delete U.integer;for(const ie in U)x=(0,n.and)(x,S(ie,C,B,k));return x}Kr.checkDataTypes=E;const D={message:({schema:P})=>`must be ${P}`,params:({schema:P,schemaValue:C})=>typeof P=="string"?(0,n._)`{type: ${P}}`:(0,n._)`{type: ${C}}`};function O(P){const C=$(P);(0,r.reportError)(C,D)}Kr.reportTypeError=O;function $(P){const{gen:C,data:B,schema:k}=P,x=(0,s.schemaRefOrVal)(P,k,"type");return{gen:C,keyword:"type",data:B,schema:k.type,schemaCode:x,schemaValue:x,parentSchema:k,params:{},it:P}}return Kr}var Zl={},wS;function uM(){if(wS)return Zl;wS=1,Object.defineProperty(Zl,"__esModule",{value:!0}),Zl.assignDefaults=void 0;const t=Et(),e=Nt();function r(s,a){const{properties:u,items:l}=s.schema;if(a==="object"&&u)for(const d in u)n(s,d,u[d].default);else a==="array"&&Array.isArray(l)&&l.forEach((d,m)=>n(s,m,d.default))}Zl.assignDefaults=r;function n(s,a,u){const{gen:l,compositeRule:d,data:m,opts:y}=s;if(u===void 0)return;const g=(0,t._)`${m}${(0,t.getProperty)(a)}`;if(d){(0,e.checkStrictMode)(s,`default is ignored for: ${g}`);return}let b=(0,t._)`${g} === undefined`;y.useDefaults==="empty"&&(b=(0,t._)`${b} || ${g} === null || ${g} === ""`),l.if(b,(0,t._)`${g} = ${(0,t.stringify)(u)}`)}return Zl}var Hi={},qt={},bS;function ns(){if(bS)return qt;bS=1,Object.defineProperty(qt,"__esModule",{value:!0}),qt.validateUnion=qt.validateArray=qt.usePattern=qt.callValidateCode=qt.schemaProperties=qt.allSchemaProperties=qt.noPropertyInData=qt.propertyInData=qt.isOwnProperty=qt.hasPropFunc=qt.reportMissingProp=qt.checkMissingProp=qt.checkReportMissingProp=void 0;const t=Et(),e=Nt(),r=Fa(),n=Nt();function s(P,C){const{gen:B,data:k,it:x}=P;B.if(y(B,k,C,x.opts.ownProperties),()=>{P.setParams({missingProperty:(0,t._)`${C}`},!0),P.error()})}qt.checkReportMissingProp=s;function a({gen:P,data:C,it:{opts:B}},k,x){return(0,t.or)(...k.map(U=>(0,t.and)(y(P,C,U,B.ownProperties),(0,t._)`${x} = ${U}`)))}qt.checkMissingProp=a;function u(P,C){P.setParams({missingProperty:C},!0),P.error()}qt.reportMissingProp=u;function l(P){return P.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,t._)`Object.prototype.hasOwnProperty`})}qt.hasPropFunc=l;function d(P,C,B){return(0,t._)`${l(P)}.call(${C}, ${B})`}qt.isOwnProperty=d;function m(P,C,B,k){const x=(0,t._)`${C}${(0,t.getProperty)(B)} !== undefined`;return k?(0,t._)`${x} && ${d(P,C,B)}`:x}qt.propertyInData=m;function y(P,C,B,k){const x=(0,t._)`${C}${(0,t.getProperty)(B)} === undefined`;return k?(0,t.or)(x,(0,t.not)(d(P,C,B))):x}qt.noPropertyInData=y;function g(P){return P?Object.keys(P).filter(C=>C!=="__proto__"):[]}qt.allSchemaProperties=g;function b(P,C){return g(C).filter(B=>!(0,e.alwaysValidSchema)(P,C[B]))}qt.schemaProperties=b;function S({schemaCode:P,data:C,it:{gen:B,topSchemaRef:k,schemaPath:x,errorPath:U},it:ie},Y,_e,le){const me=le?(0,t._)`${P}, ${C}, ${k}${x}`:C,ke=[[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,U)],[r.default.parentData,ie.parentData],[r.default.parentDataProperty,ie.parentDataProperty],[r.default.rootData,r.default.rootData]];ie.opts.dynamicRef&&ke.push([r.default.dynamicAnchors,r.default.dynamicAnchors]);const Pe=(0,t._)`${me}, ${B.object(...ke)}`;return _e!==t.nil?(0,t._)`${Y}.call(${_e}, ${Pe})`:(0,t._)`${Y}(${Pe})`}qt.callValidateCode=S;const E=(0,t._)`new RegExp`;function D({gen:P,it:{opts:C}},B){const k=C.unicodeRegExp?"u":"",{regExp:x}=C.code,U=x(B,k);return P.scopeValue("pattern",{key:U.toString(),ref:U,code:(0,t._)`${x.code==="new RegExp"?E:(0,n.useFunc)(P,x)}(${B}, ${k})`})}qt.usePattern=D;function O(P){const{gen:C,data:B,keyword:k,it:x}=P,U=C.name("valid");if(x.allErrors){const Y=C.let("valid",!0);return ie(()=>C.assign(Y,!1)),Y}return C.var(U,!0),ie(()=>C.break()),U;function ie(Y){const _e=C.const("len",(0,t._)`${B}.length`);C.forRange("i",0,_e,le=>{P.subschema({keyword:k,dataProp:le,dataPropType:e.Type.Num},U),C.if((0,t.not)(U),Y)})}}qt.validateArray=O;function $(P){const{gen:C,schema:B,keyword:k,it:x}=P;if(!Array.isArray(B))throw new Error("ajv implementation error");if(B.some(_e=>(0,e.alwaysValidSchema)(x,_e))&&!x.opts.unevaluated)return;const ie=C.let("valid",!1),Y=C.name("_valid");C.block(()=>B.forEach((_e,le)=>{const me=P.subschema({keyword:k,schemaProp:le,compositeRule:!0},Y);C.assign(ie,(0,t._)`${ie} || ${Y}`),P.mergeValidEvaluated(me,Y)||C.if((0,t.not)(ie))})),P.result(ie,()=>P.reset(),()=>P.error(!0))}return qt.validateUnion=$,qt}var SS;function cM(){if(SS)return Hi;SS=1,Object.defineProperty(Hi,"__esModule",{value:!0}),Hi.validateKeywordUsage=Hi.validSchemaType=Hi.funcKeywordCode=Hi.macroKeywordCode=void 0;const t=Et(),e=Fa(),r=ns(),n=Sm();function s(b,S){const{gen:E,keyword:D,schema:O,parentSchema:$,it:P}=b,C=S.macro.call(P.self,O,$,P),B=m(E,D,C);P.opts.validateSchema!==!1&&P.self.validateSchema(C,!0);const k=E.name("valid");b.subschema({schema:C,schemaPath:t.nil,errSchemaPath:`${P.errSchemaPath}/${D}`,topSchemaRef:B,compositeRule:!0},k),b.pass(k,()=>b.error(!0))}Hi.macroKeywordCode=s;function a(b,S){var E;const{gen:D,keyword:O,schema:$,parentSchema:P,$data:C,it:B}=b;d(B,S);const k=!C&&S.compile?S.compile.call(B.self,$,P,B):S.validate,x=m(D,O,k),U=D.let("valid");b.block$data(U,ie),b.ok((E=S.valid)!==null&&E!==void 0?E:U);function ie(){if(S.errors===!1)le(),S.modifying&&u(b),me(()=>b.error());else{const ke=S.async?Y():_e();S.modifying&&u(b),me(()=>l(b,ke))}}function Y(){const ke=D.let("ruleErrs",null);return D.try(()=>le((0,t._)`await `),Pe=>D.assign(U,!1).if((0,t._)`${Pe} instanceof ${B.ValidationError}`,()=>D.assign(ke,(0,t._)`${Pe}.errors`),()=>D.throw(Pe))),ke}function _e(){const ke=(0,t._)`${x}.errors`;return D.assign(ke,null),le(t.nil),ke}function le(ke=S.async?(0,t._)`await `:t.nil){const Pe=B.opts.passContext?e.default.this:e.default.self,We=!("compile"in S&&!C||S.schema===!1);D.assign(U,(0,t._)`${ke}${(0,r.callValidateCode)(b,x,Pe,We)}`,S.modifying)}function me(ke){var Pe;D.if((0,t.not)((Pe=S.valid)!==null&&Pe!==void 0?Pe:U),ke)}}Hi.funcKeywordCode=a;function u(b){const{gen:S,data:E,it:D}=b;S.if(D.parentData,()=>S.assign(E,(0,t._)`${D.parentData}[${D.parentDataProperty}]`))}function l(b,S){const{gen:E}=b;E.if((0,t._)`Array.isArray(${S})`,()=>{E.assign(e.default.vErrors,(0,t._)`${e.default.vErrors} === null ? ${S} : ${e.default.vErrors}.concat(${S})`).assign(e.default.errors,(0,t._)`${e.default.vErrors}.length`),(0,n.extendErrors)(b)},()=>b.error())}function d({schemaEnv:b},S){if(S.async&&!b.$async)throw new Error("async keyword in sync schema")}function m(b,S,E){if(E===void 0)throw new Error(`keyword "${S}" failed to compile`);return b.scopeValue("keyword",typeof E=="function"?{ref:E}:{ref:E,code:(0,t.stringify)(E)})}function y(b,S,E=!1){return!S.length||S.some(D=>D==="array"?Array.isArray(b):D==="object"?b&&typeof b=="object"&&!Array.isArray(b):typeof b==D||E&&typeof b>"u")}Hi.validSchemaType=y;function g({schema:b,opts:S,self:E,errSchemaPath:D},O,$){if(Array.isArray(O.keyword)?!O.keyword.includes($):O.keyword!==$)throw new Error("ajv implementation error");const P=O.dependencies;if(P?.some(C=>!Object.prototype.hasOwnProperty.call(b,C)))throw new Error(`parent schema must have dependencies of ${$}: ${P.join(",")}`);if(O.validateSchema&&!O.validateSchema(b[$])){const B=`keyword "${$}" value is invalid at path "${D}": `+E.errorsText(O.validateSchema.errors);if(S.validateSchema==="log")E.logger.error(B);else throw new Error(B)}}return Hi.validateKeywordUsage=g,Hi}var yo={},ES;function lM(){if(ES)return yo;ES=1,Object.defineProperty(yo,"__esModule",{value:!0}),yo.extendSubschemaMode=yo.extendSubschemaData=yo.getSubschema=void 0;const t=Et(),e=Nt();function r(a,{keyword:u,schemaProp:l,schema:d,schemaPath:m,errSchemaPath:y,topSchemaRef:g}){if(u!==void 0&&d!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(u!==void 0){const b=a.schema[u];return l===void 0?{schema:b,schemaPath:(0,t._)`${a.schemaPath}${(0,t.getProperty)(u)}`,errSchemaPath:`${a.errSchemaPath}/${u}`}:{schema:b[l],schemaPath:(0,t._)`${a.schemaPath}${(0,t.getProperty)(u)}${(0,t.getProperty)(l)}`,errSchemaPath:`${a.errSchemaPath}/${u}/${(0,e.escapeFragment)(l)}`}}if(d!==void 0){if(m===void 0||y===void 0||g===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:d,schemaPath:m,topSchemaRef:g,errSchemaPath:y}}throw new Error('either "keyword" or "schema" must be passed')}yo.getSubschema=r;function n(a,u,{dataProp:l,dataPropType:d,data:m,dataTypes:y,propertyName:g}){if(m!==void 0&&l!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:b}=u;if(l!==void 0){const{errorPath:E,dataPathArr:D,opts:O}=u,$=b.let("data",(0,t._)`${u.data}${(0,t.getProperty)(l)}`,!0);S($),a.errorPath=(0,t.str)`${E}${(0,e.getErrorPath)(l,d,O.jsPropertySyntax)}`,a.parentDataProperty=(0,t._)`${l}`,a.dataPathArr=[...D,a.parentDataProperty]}if(m!==void 0){const E=m instanceof t.Name?m:b.let("data",m,!0);S(E),g!==void 0&&(a.propertyName=g)}y&&(a.dataTypes=y);function S(E){a.data=E,a.dataLevel=u.dataLevel+1,a.dataTypes=[],u.definedProperties=new Set,a.parentData=u.data,a.dataNames=[...u.dataNames,E]}}yo.extendSubschemaData=n;function s(a,{jtdDiscriminator:u,jtdMetadata:l,compositeRule:d,createErrors:m,allErrors:y}){d!==void 0&&(a.compositeRule=d),m!==void 0&&(a.createErrors=m),y!==void 0&&(a.allErrors=y),a.jtdDiscriminator=u,a.jtdMetadata=l}return yo.extendSubschemaMode=s,yo}var ln={},kv,IS;function w0(){return IS||(IS=1,kv=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,s,a;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(s=n;s--!==0;)if(!t(e[s],r[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(a=Object.keys(e),n=a.length,n!==Object.keys(r).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(r,a[s]))return!1;for(s=n;s--!==0;){var u=a[s];if(!t(e[u],r[u]))return!1}return!0}return e!==e&&r!==r}),kv}var Pv={exports:{}},OS;function fM(){if(OS)return Pv.exports;OS=1;var t=Pv.exports=function(n,s,a){typeof s=="function"&&(a=s,s={}),a=s.cb||a;var u=typeof a=="function"?a:a.pre||function(){},l=a.post||function(){};e(s,u,l,n,"",n)};t.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},t.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},t.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},t.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function e(n,s,a,u,l,d,m,y,g,b){if(u&&typeof u=="object"&&!Array.isArray(u)){s(u,l,d,m,y,g,b);for(var S in u){var E=u[S];if(Array.isArray(E)){if(S in t.arrayKeywords)for(var D=0;D<E.length;D++)e(n,s,a,E[D],l+"/"+S+"/"+D,d,l,S,u,D)}else if(S in t.propsKeywords){if(E&&typeof E=="object")for(var O in E)e(n,s,a,E[O],l+"/"+S+"/"+r(O),d,l,S,u,O)}else(S in t.keywords||n.allKeys&&!(S in t.skipKeywords))&&e(n,s,a,E,l+"/"+S,d,l,S,u)}a(u,l,d,m,y,g,b)}}function r(n){return n.replace(/~/g,"~0").replace(/\//g,"~1")}return Pv.exports}var kS;function Em(){if(kS)return ln;kS=1,Object.defineProperty(ln,"__esModule",{value:!0}),ln.getSchemaRefs=ln.resolveUrl=ln.normalizeId=ln._getFullPath=ln.getFullPath=ln.inlineRef=void 0;const t=Nt(),e=w0(),r=fM(),n=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function s(D,O=!0){return typeof D=="boolean"?!0:O===!0?!u(D):O?l(D)<=O:!1}ln.inlineRef=s;const a=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function u(D){for(const O in D){if(a.has(O))return!0;const $=D[O];if(Array.isArray($)&&$.some(u)||typeof $=="object"&&u($))return!0}return!1}function l(D){let O=0;for(const $ in D){if($==="$ref")return 1/0;if(O++,!n.has($)&&(typeof D[$]=="object"&&(0,t.eachItem)(D[$],P=>O+=l(P)),O===1/0))return 1/0}return O}function d(D,O="",$){$!==!1&&(O=g(O));const P=D.parse(O);return m(D,P)}ln.getFullPath=d;function m(D,O){return D.serialize(O).split("#")[0]+"#"}ln._getFullPath=m;const y=/#\/?$/;function g(D){return D?D.replace(y,""):""}ln.normalizeId=g;function b(D,O,$){return $=g($),D.resolve(O,$)}ln.resolveUrl=b;const S=/^[a-z_][-a-z0-9._]*$/i;function E(D,O){if(typeof D=="boolean")return{};const{schemaId:$,uriResolver:P}=this.opts,C=g(D[$]||O),B={"":C},k=d(P,C,!1),x={},U=new Set;return r(D,{allKeys:!0},(_e,le,me,ke)=>{if(ke===void 0)return;const Pe=k+le;let We=B[ke];typeof _e[$]=="string"&&(We=nt.call(this,_e[$])),et.call(this,_e.$anchor),et.call(this,_e.$dynamicAnchor),B[le]=We;function nt(Ee){const je=this.opts.uriResolver.resolve;if(Ee=g(We?je(We,Ee):Ee),U.has(Ee))throw Y(Ee);U.add(Ee);let F=this.refs[Ee];return typeof F=="string"&&(F=this.refs[F]),typeof F=="object"?ie(_e,F.schema,Ee):Ee!==g(Pe)&&(Ee[0]==="#"?(ie(_e,x[Ee],Ee),x[Ee]=_e):this.refs[Ee]=Pe),Ee}function et(Ee){if(typeof Ee=="string"){if(!S.test(Ee))throw new Error(`invalid anchor "${Ee}"`);nt.call(this,`#${Ee}`)}}}),x;function ie(_e,le,me){if(le!==void 0&&!e(_e,le))throw Y(me)}function Y(_e){return new Error(`reference "${_e}" resolves to more than one schema`)}}return ln.getSchemaRefs=E,ln}var PS;function Im(){if(PS)return po;PS=1,Object.defineProperty(po,"__esModule",{value:!0}),po.getData=po.KeywordCxt=po.validateFunctionCode=void 0;const t=aM(),e=Fp(),r=QO(),n=Fp(),s=uM(),a=cM(),u=lM(),l=Et(),d=Fa(),m=Em(),y=Nt(),g=Sm();function b(ee){if(k(ee)&&(U(ee),B(ee))){O(ee);return}S(ee,()=>(0,t.topBoolOrEmptySchema)(ee))}po.validateFunctionCode=b;function S({gen:ee,validateName:J,schema:Se,schemaEnv:Ce,opts:Ke},pt){Ke.code.es5?ee.func(J,(0,l._)`${d.default.data}, ${d.default.valCxt}`,Ce.$async,()=>{ee.code((0,l._)`"use strict"; ${P(Se,Ke)}`),D(ee,Ke),ee.code(pt)}):ee.func(J,(0,l._)`${d.default.data}, ${E(Ke)}`,Ce.$async,()=>ee.code(P(Se,Ke)).code(pt))}function E(ee){return(0,l._)`{${d.default.instancePath}="", ${d.default.parentData}, ${d.default.parentDataProperty}, ${d.default.rootData}=${d.default.data}${ee.dynamicRef?(0,l._)`, ${d.default.dynamicAnchors}={}`:l.nil}}={}`}function D(ee,J){ee.if(d.default.valCxt,()=>{ee.var(d.default.instancePath,(0,l._)`${d.default.valCxt}.${d.default.instancePath}`),ee.var(d.default.parentData,(0,l._)`${d.default.valCxt}.${d.default.parentData}`),ee.var(d.default.parentDataProperty,(0,l._)`${d.default.valCxt}.${d.default.parentDataProperty}`),ee.var(d.default.rootData,(0,l._)`${d.default.valCxt}.${d.default.rootData}`),J.dynamicRef&&ee.var(d.default.dynamicAnchors,(0,l._)`${d.default.valCxt}.${d.default.dynamicAnchors}`)},()=>{ee.var(d.default.instancePath,(0,l._)`""`),ee.var(d.default.parentData,(0,l._)`undefined`),ee.var(d.default.parentDataProperty,(0,l._)`undefined`),ee.var(d.default.rootData,d.default.data),J.dynamicRef&&ee.var(d.default.dynamicAnchors,(0,l._)`{}`)})}function O(ee){const{schema:J,opts:Se,gen:Ce}=ee;S(ee,()=>{Se.$comment&&J.$comment&&ke(ee),_e(ee),Ce.let(d.default.vErrors,null),Ce.let(d.default.errors,0),Se.unevaluated&&$(ee),ie(ee),Pe(ee)})}function $(ee){const{gen:J,validateName:Se}=ee;ee.evaluated=J.const("evaluated",(0,l._)`${Se}.evaluated`),J.if((0,l._)`${ee.evaluated}.dynamicProps`,()=>J.assign((0,l._)`${ee.evaluated}.props`,(0,l._)`undefined`)),J.if((0,l._)`${ee.evaluated}.dynamicItems`,()=>J.assign((0,l._)`${ee.evaluated}.items`,(0,l._)`undefined`))}function P(ee,J){const Se=typeof ee=="object"&&ee[J.schemaId];return Se&&(J.code.source||J.code.process)?(0,l._)`/*# sourceURL=${Se} */`:l.nil}function C(ee,J){if(k(ee)&&(U(ee),B(ee))){x(ee,J);return}(0,t.boolOrEmptySchema)(ee,J)}function B({schema:ee,self:J}){if(typeof ee=="boolean")return!ee;for(const Se in ee)if(J.RULES.all[Se])return!0;return!1}function k(ee){return typeof ee.schema!="boolean"}function x(ee,J){const{schema:Se,gen:Ce,opts:Ke}=ee;Ke.$comment&&Se.$comment&&ke(ee),le(ee),me(ee);const pt=Ce.const("_errs",d.default.errors);ie(ee,pt),Ce.var(J,(0,l._)`${pt} === ${d.default.errors}`)}function U(ee){(0,y.checkUnknownRules)(ee),Y(ee)}function ie(ee,J){if(ee.opts.jtd)return nt(ee,[],!1,J);const Se=(0,e.getSchemaTypes)(ee.schema),Ce=(0,e.coerceAndCheckDataType)(ee,Se);nt(ee,Se,!Ce,J)}function Y(ee){const{schema:J,errSchemaPath:Se,opts:Ce,self:Ke}=ee;J.$ref&&Ce.ignoreKeywordsWithRef&&(0,y.schemaHasRulesButRef)(J,Ke.RULES)&&Ke.logger.warn(`$ref: keywords ignored in schema at path "${Se}"`)}function _e(ee){const{schema:J,opts:Se}=ee;J.default!==void 0&&Se.useDefaults&&Se.strictSchema&&(0,y.checkStrictMode)(ee,"default is ignored in the schema root")}function le(ee){const J=ee.schema[ee.opts.schemaId];J&&(ee.baseId=(0,m.resolveUrl)(ee.opts.uriResolver,ee.baseId,J))}function me(ee){if(ee.schema.$async&&!ee.schemaEnv.$async)throw new Error("async schema in sync schema")}function ke({gen:ee,schemaEnv:J,schema:Se,errSchemaPath:Ce,opts:Ke}){const pt=Se.$comment;if(Ke.$comment===!0)ee.code((0,l._)`${d.default.self}.logger.log(${pt})`);else if(typeof Ke.$comment=="function"){const yr=(0,l.str)`${Ce}/$comment`,Qr=ee.scopeValue("root",{ref:J.root});ee.code((0,l._)`${d.default.self}.opts.$comment(${pt}, ${yr}, ${Qr}.schema)`)}}function Pe(ee){const{gen:J,schemaEnv:Se,validateName:Ce,ValidationError:Ke,opts:pt}=ee;Se.$async?J.if((0,l._)`${d.default.errors} === 0`,()=>J.return(d.default.data),()=>J.throw((0,l._)`new ${Ke}(${d.default.vErrors})`)):(J.assign((0,l._)`${Ce}.errors`,d.default.vErrors),pt.unevaluated&&We(ee),J.return((0,l._)`${d.default.errors} === 0`))}function We({gen:ee,evaluated:J,props:Se,items:Ce}){Se instanceof l.Name&&ee.assign((0,l._)`${J}.props`,Se),Ce instanceof l.Name&&ee.assign((0,l._)`${J}.items`,Ce)}function nt(ee,J,Se,Ce){const{gen:Ke,schema:pt,data:yr,allErrors:Qr,opts:Dr,self:lr}=ee,{RULES:Pt}=lr;if(pt.$ref&&(Dr.ignoreKeywordsWithRef||!(0,y.schemaHasRulesButRef)(pt,Pt))){Ke.block(()=>we(ee,"$ref",Pt.all.$ref.definition));return}Dr.jtd||Ee(ee,J),Ke.block(()=>{for(const Ir of Pt.rules)qn(Ir);qn(Pt.post)});function qn(Ir){(0,r.shouldUseGroup)(pt,Ir)&&(Ir.type?(Ke.if((0,n.checkDataType)(Ir.type,yr,Dr.strictNumbers)),et(ee,Ir),J.length===1&&J[0]===Ir.type&&Se&&(Ke.else(),(0,n.reportTypeError)(ee)),Ke.endIf()):et(ee,Ir),Qr||Ke.if((0,l._)`${d.default.errors} === ${Ce||0}`))}}function et(ee,J){const{gen:Se,schema:Ce,opts:{useDefaults:Ke}}=ee;Ke&&(0,s.assignDefaults)(ee,J.type),Se.block(()=>{for(const pt of J.rules)(0,r.shouldUseRule)(Ce,pt)&&we(ee,pt.keyword,pt.definition,J.type)})}function Ee(ee,J){ee.schemaEnv.meta||!ee.opts.strictTypes||(je(ee,J),ee.opts.allowUnionTypes||F(ee,J),j(ee,ee.dataTypes))}function je(ee,J){if(J.length){if(!ee.dataTypes.length){ee.dataTypes=J;return}J.forEach(Se=>{Q(ee.dataTypes,Se)||A(ee,`type "${Se}" not allowed by context "${ee.dataTypes.join(",")}"`)}),M(ee,J)}}function F(ee,J){J.length>1&&!(J.length===2&&J.includes("null"))&&A(ee,"use allowUnionTypes to allow union type keyword")}function j(ee,J){const Se=ee.self.RULES.all;for(const Ce in Se){const Ke=Se[Ce];if(typeof Ke=="object"&&(0,r.shouldUseRule)(ee.schema,Ke)){const{type:pt}=Ke.definition;pt.length&&!pt.some(yr=>ae(J,yr))&&A(ee,`missing type "${pt.join(",")}" for keyword "${Ce}"`)}}}function ae(ee,J){return ee.includes(J)||J==="number"&&ee.includes("integer")}function Q(ee,J){return ee.includes(J)||J==="integer"&&ee.includes("number")}function M(ee,J){const Se=[];for(const Ce of ee.dataTypes)Q(J,Ce)?Se.push(Ce):J.includes("integer")&&Ce==="number"&&Se.push("integer");ee.dataTypes=Se}function A(ee,J){const Se=ee.schemaEnv.baseId+ee.errSchemaPath;J+=` at "${Se}" (strictTypes)`,(0,y.checkStrictMode)(ee,J,ee.opts.strictTypes)}class q{constructor(J,Se,Ce){if((0,a.validateKeywordUsage)(J,Se,Ce),this.gen=J.gen,this.allErrors=J.allErrors,this.keyword=Ce,this.data=J.data,this.schema=J.schema[Ce],this.$data=Se.$data&&J.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,y.schemaRefOrVal)(J,this.schema,Ce,this.$data),this.schemaType=Se.schemaType,this.parentSchema=J.schema,this.params={},this.it=J,this.def=Se,this.$data)this.schemaCode=J.gen.const("vSchema",Xe(this.$data,J));else if(this.schemaCode=this.schemaValue,!(0,a.validSchemaType)(this.schema,Se.schemaType,Se.allowUndefined))throw new Error(`${Ce} value must be ${JSON.stringify(Se.schemaType)}`);("code"in Se?Se.trackErrors:Se.errors!==!1)&&(this.errsCount=J.gen.const("_errs",d.default.errors))}result(J,Se,Ce){this.failResult((0,l.not)(J),Se,Ce)}failResult(J,Se,Ce){this.gen.if(J),Ce?Ce():this.error(),Se?(this.gen.else(),Se(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(J,Se){this.failResult((0,l.not)(J),void 0,Se)}fail(J){if(J===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(J),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(J){if(!this.$data)return this.fail(J);const{schemaCode:Se}=this;this.fail((0,l._)`${Se} !== undefined && (${(0,l.or)(this.invalid$data(),J)})`)}error(J,Se,Ce){if(Se){this.setParams(Se),this._error(J,Ce),this.setParams({});return}this._error(J,Ce)}_error(J,Se){(J?g.reportExtraError:g.reportError)(this,this.def.error,Se)}$dataError(){(0,g.reportError)(this,this.def.$dataError||g.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,g.resetErrorsCount)(this.gen,this.errsCount)}ok(J){this.allErrors||this.gen.if(J)}setParams(J,Se){Se?Object.assign(this.params,J):this.params=J}block$data(J,Se,Ce=l.nil){this.gen.block(()=>{this.check$data(J,Ce),Se()})}check$data(J=l.nil,Se=l.nil){if(!this.$data)return;const{gen:Ce,schemaCode:Ke,schemaType:pt,def:yr}=this;Ce.if((0,l.or)((0,l._)`${Ke} === undefined`,Se)),J!==l.nil&&Ce.assign(J,!0),(pt.length||yr.validateSchema)&&(Ce.elseIf(this.invalid$data()),this.$dataError(),J!==l.nil&&Ce.assign(J,!1)),Ce.else()}invalid$data(){const{gen:J,schemaCode:Se,schemaType:Ce,def:Ke,it:pt}=this;return(0,l.or)(yr(),Qr());function yr(){if(Ce.length){if(!(Se instanceof l.Name))throw new Error("ajv implementation error");const Dr=Array.isArray(Ce)?Ce:[Ce];return(0,l._)`${(0,n.checkDataTypes)(Dr,Se,pt.opts.strictNumbers,n.DataType.Wrong)}`}return l.nil}function Qr(){if(Ke.validateSchema){const Dr=J.scopeValue("validate$data",{ref:Ke.validateSchema});return(0,l._)`!${Dr}(${Se})`}return l.nil}}subschema(J,Se){const Ce=(0,u.getSubschema)(this.it,J);(0,u.extendSubschemaData)(Ce,this.it,J),(0,u.extendSubschemaMode)(Ce,J);const Ke={...this.it,...Ce,items:void 0,props:void 0};return C(Ke,Se),Ke}mergeEvaluated(J,Se){const{it:Ce,gen:Ke}=this;Ce.opts.unevaluated&&(Ce.props!==!0&&J.props!==void 0&&(Ce.props=y.mergeEvaluated.props(Ke,J.props,Ce.props,Se)),Ce.items!==!0&&J.items!==void 0&&(Ce.items=y.mergeEvaluated.items(Ke,J.items,Ce.items,Se)))}mergeValidEvaluated(J,Se){const{it:Ce,gen:Ke}=this;if(Ce.opts.unevaluated&&(Ce.props!==!0||Ce.items!==!0))return Ke.if(Se,()=>this.mergeEvaluated(J,l.Name)),!0}}po.KeywordCxt=q;function we(ee,J,Se,Ce){const Ke=new q(ee,Se,J);"code"in Se?Se.code(Ke,Ce):Ke.$data&&Se.validate?(0,a.funcKeywordCode)(Ke,Se):"macro"in Se?(0,a.macroKeywordCode)(Ke,Se):(Se.compile||Se.validate)&&(0,a.funcKeywordCode)(Ke,Se)}const Oe=/^\/(?:[^~]|~0|~1)*$/,be=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Xe(ee,{dataLevel:J,dataNames:Se,dataPathArr:Ce}){let Ke,pt;if(ee==="")return d.default.rootData;if(ee[0]==="/"){if(!Oe.test(ee))throw new Error(`Invalid JSON-pointer: ${ee}`);Ke=ee,pt=d.default.rootData}else{const lr=be.exec(ee);if(!lr)throw new Error(`Invalid JSON-pointer: ${ee}`);const Pt=+lr[1];if(Ke=lr[2],Ke==="#"){if(Pt>=J)throw new Error(Dr("property/index",Pt));return Ce[J-Pt]}if(Pt>J)throw new Error(Dr("data",Pt));if(pt=Se[J-Pt],!Ke)return pt}let yr=pt;const Qr=Ke.split("/");for(const lr of Qr)lr&&(pt=(0,l._)`${pt}${(0,l.getProperty)((0,y.unescapeJsonPointer)(lr))}`,yr=(0,l._)`${yr} && ${pt}`);return yr;function Dr(lr,Pt){return`Cannot access ${lr} ${Pt} levels up, current level is ${J}`}}return po.getData=Xe,po}var mh={},DS;function b0(){if(DS)return mh;DS=1,Object.defineProperty(mh,"__esModule",{value:!0});class t extends Error{constructor(r){super("validation failed"),this.errors=r,this.ajv=this.validation=!0}}return mh.default=t,mh}var yh={},RS;function Om(){if(RS)return yh;RS=1,Object.defineProperty(yh,"__esModule",{value:!0});const t=Em();class e extends Error{constructor(n,s,a,u){super(u||`can't resolve reference ${a} from id ${s}`),this.missingRef=(0,t.resolveUrl)(n,s,a),this.missingSchema=(0,t.normalizeId)((0,t.getFullPath)(n,this.missingRef))}}return yh.default=e,yh}var Zn={},CS;function S0(){if(CS)return Zn;CS=1,Object.defineProperty(Zn,"__esModule",{value:!0}),Zn.resolveSchema=Zn.getCompilingSchema=Zn.resolveRef=Zn.compileSchema=Zn.SchemaEnv=void 0;const t=Et(),e=b0(),r=Fa(),n=Em(),s=Nt(),a=Im();class u{constructor($){var P;this.refs={},this.dynamicAnchors={};let C;typeof $.schema=="object"&&(C=$.schema),this.schema=$.schema,this.schemaId=$.schemaId,this.root=$.root||this,this.baseId=(P=$.baseId)!==null&&P!==void 0?P:(0,n.normalizeId)(C?.[$.schemaId||"$id"]),this.schemaPath=$.schemaPath,this.localRefs=$.localRefs,this.meta=$.meta,this.$async=C?.$async,this.refs={}}}Zn.SchemaEnv=u;function l(O){const $=y.call(this,O);if($)return $;const P=(0,n.getFullPath)(this.opts.uriResolver,O.root.baseId),{es5:C,lines:B}=this.opts.code,{ownProperties:k}=this.opts,x=new t.CodeGen(this.scope,{es5:C,lines:B,ownProperties:k});let U;O.$async&&(U=x.scopeValue("Error",{ref:e.default,code:(0,t._)`require("ajv/dist/runtime/validation_error").default`}));const ie=x.scopeName("validate");O.validateName=ie;const Y={gen:x,allErrors:this.opts.allErrors,data:r.default.data,parentData:r.default.parentData,parentDataProperty:r.default.parentDataProperty,dataNames:[r.default.data],dataPathArr:[t.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:x.scopeValue("schema",this.opts.code.source===!0?{ref:O.schema,code:(0,t.stringify)(O.schema)}:{ref:O.schema}),validateName:ie,ValidationError:U,schema:O.schema,schemaEnv:O,rootId:P,baseId:O.baseId||P,schemaPath:t.nil,errSchemaPath:O.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,t._)`""`,opts:this.opts,self:this};let _e;try{this._compilations.add(O),(0,a.validateFunctionCode)(Y),x.optimize(this.opts.code.optimize);const le=x.toString();_e=`${x.scopeRefs(r.default.scope)}return ${le}`,this.opts.code.process&&(_e=this.opts.code.process(_e,O));const ke=new Function(`${r.default.self}`,`${r.default.scope}`,_e)(this,this.scope.get());if(this.scope.value(ie,{ref:ke}),ke.errors=null,ke.schema=O.schema,ke.schemaEnv=O,O.$async&&(ke.$async=!0),this.opts.code.source===!0&&(ke.source={validateName:ie,validateCode:le,scopeValues:x._values}),this.opts.unevaluated){const{props:Pe,items:We}=Y;ke.evaluated={props:Pe instanceof t.Name?void 0:Pe,items:We instanceof t.Name?void 0:We,dynamicProps:Pe instanceof t.Name,dynamicItems:We instanceof t.Name},ke.source&&(ke.source.evaluated=(0,t.stringify)(ke.evaluated))}return O.validate=ke,O}catch(le){throw delete O.validate,delete O.validateName,_e&&this.logger.error("Error compiling schema, function code:",_e),le}finally{this._compilations.delete(O)}}Zn.compileSchema=l;function d(O,$,P){var C;P=(0,n.resolveUrl)(this.opts.uriResolver,$,P);const B=O.refs[P];if(B)return B;let k=b.call(this,O,P);if(k===void 0){const x=(C=O.localRefs)===null||C===void 0?void 0:C[P],{schemaId:U}=this.opts;x&&(k=new u({schema:x,schemaId:U,root:O,baseId:$}))}if(k!==void 0)return O.refs[P]=m.call(this,k)}Zn.resolveRef=d;function m(O){return(0,n.inlineRef)(O.schema,this.opts.inlineRefs)?O.schema:O.validate?O:l.call(this,O)}function y(O){for(const $ of this._compilations)if(g($,O))return $}Zn.getCompilingSchema=y;function g(O,$){return O.schema===$.schema&&O.root===$.root&&O.baseId===$.baseId}function b(O,$){let P;for(;typeof(P=this.refs[$])=="string";)$=P;return P||this.schemas[$]||S.call(this,O,$)}function S(O,$){const P=this.opts.uriResolver.parse($),C=(0,n._getFullPath)(this.opts.uriResolver,P);let B=(0,n.getFullPath)(this.opts.uriResolver,O.baseId,void 0);if(Object.keys(O.schema).length>0&&C===B)return D.call(this,P,O);const k=(0,n.normalizeId)(C),x=this.refs[k]||this.schemas[k];if(typeof x=="string"){const U=S.call(this,O,x);return typeof U?.schema!="object"?void 0:D.call(this,P,U)}if(typeof x?.schema=="object"){if(x.validate||l.call(this,x),k===(0,n.normalizeId)($)){const{schema:U}=x,{schemaId:ie}=this.opts,Y=U[ie];return Y&&(B=(0,n.resolveUrl)(this.opts.uriResolver,B,Y)),new u({schema:U,schemaId:ie,root:O,baseId:B})}return D.call(this,P,x)}}Zn.resolveSchema=S;const E=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function D(O,{baseId:$,schema:P,root:C}){var B;if(((B=O.fragment)===null||B===void 0?void 0:B[0])!=="/")return;for(const U of O.fragment.slice(1).split("/")){if(typeof P=="boolean")return;const ie=P[(0,s.unescapeFragment)(U)];if(ie===void 0)return;P=ie;const Y=typeof P=="object"&&P[this.opts.schemaId];!E.has(U)&&Y&&($=(0,n.resolveUrl)(this.opts.uriResolver,$,Y))}let k;if(typeof P!="boolean"&&P.$ref&&!(0,s.schemaHasRulesButRef)(P,this.RULES)){const U=(0,n.resolveUrl)(this.opts.uriResolver,$,P.$ref);k=S.call(this,C,U)}const{schemaId:x}=this.opts;if(k=k||new u({schema:P,schemaId:x,root:C,baseId:$}),k.schema!==k.root.schema)return k}return Zn}const dM="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",hM="Meta-schema for $data reference (JSON AnySchema extension proposal)",pM="object",mM=["$data"],yM={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},vM=!1,gM={$id:dM,description:hM,type:pM,required:mM,properties:yM,additionalProperties:vM};var vh={},ef={exports:{}},Dv,$S;function YO(){if($S)return Dv;$S=1;const t=RegExp.prototype.test.bind(/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu),e=RegExp.prototype.test.bind(/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u);function r(b){let S="",E=0,D=0;for(D=0;D<b.length;D++)if(E=b[D].charCodeAt(0),E!==48){if(!(E>=48&&E<=57||E>=65&&E<=70||E>=97&&E<=102))return"";S+=b[D];break}for(D+=1;D<b.length;D++){if(E=b[D].charCodeAt(0),!(E>=48&&E<=57||E>=65&&E<=70||E>=97&&E<=102))return"";S+=b[D]}return S}const n=RegExp.prototype.test.bind(/[^!"$&'()*+,\-.;=_`a-z{}~]/u);function s(b){return b.length=0,!0}function a(b,S,E){if(b.length){const D=r(b);if(D!=="")S.push(D);else return E.error=!0,!1;b.length=0}return!0}function u(b){let S=0;const E={error:!1,address:"",zone:""},D=[],O=[];let $=!1,P=!1,C=a;for(let B=0;B<b.length;B++){const k=b[B];if(!(k==="["||k==="]"))if(k===":"){if($===!0&&(P=!0),!C(O,D,E))break;if(++S>7){E.error=!0;break}B>0&&b[B-1]===":"&&($=!0),D.push(":");continue}else if(k==="%"){if(!C(O,D,E))break;C=s}else{O.push(k);continue}}return O.length&&(C===s?E.zone=O.join(""):P?D.push(O.join("")):D.push(r(O))),E.address=D.join(""),E}function l(b){if(d(b,":")<2)return{host:b,isIPV6:!1};const S=u(b);if(S.error)return{host:b,isIPV6:!1};{let E=S.address,D=S.address;return S.zone&&(E+="%"+S.zone,D+="%25"+S.zone),{host:E,isIPV6:!0,escapedHost:D}}}function d(b,S){let E=0;for(let D=0;D<b.length;D++)b[D]===S&&E++;return E}function m(b){let S=b;const E=[];let D=-1,O=0;for(;O=S.length;){if(O===1){if(S===".")break;if(S==="/"){E.push("/");break}else{E.push(S);break}}else if(O===2){if(S[0]==="."){if(S[1]===".")break;if(S[1]==="/"){S=S.slice(2);continue}}else if(S[0]==="/"&&(S[1]==="."||S[1]==="/")){E.push("/");break}}else if(O===3&&S==="/.."){E.length!==0&&E.pop(),E.push("/");break}if(S[0]==="."){if(S[1]==="."){if(S[2]==="/"){S=S.slice(3);continue}}else if(S[1]==="/"){S=S.slice(2);continue}}else if(S[0]==="/"&&S[1]==="."){if(S[2]==="/"){S=S.slice(2);continue}else if(S[2]==="."&&S[3]==="/"){S=S.slice(3),E.length!==0&&E.pop();continue}}if((D=S.indexOf("/",1))===-1){E.push(S);break}else E.push(S.slice(0,D)),S=S.slice(D)}return E.join("")}function y(b,S){const E=S!==!0?escape:unescape;return b.scheme!==void 0&&(b.scheme=E(b.scheme)),b.userinfo!==void 0&&(b.userinfo=E(b.userinfo)),b.host!==void 0&&(b.host=E(b.host)),b.path!==void 0&&(b.path=E(b.path)),b.query!==void 0&&(b.query=E(b.query)),b.fragment!==void 0&&(b.fragment=E(b.fragment)),b}function g(b){const S=[];if(b.userinfo!==void 0&&(S.push(b.userinfo),S.push("@")),b.host!==void 0){let E=unescape(b.host);if(!e(E)){const D=l(E);D.isIPV6===!0?E=`[${D.escapedHost}]`:E=b.host}S.push(E)}return(typeof b.port=="number"||typeof b.port=="string")&&(S.push(":"),S.push(String(b.port))),S.length?S.join(""):void 0}return Dv={nonSimpleDomain:n,recomposeAuthority:g,normalizeComponentEncoding:y,removeDotSegments:m,isIPv4:e,isUUID:t,normalizeIPv6:l,stringArrayToHexStripped:r},Dv}var Rv,AS;function _M(){if(AS)return Rv;AS=1;const{isUUID:t}=YO(),e=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu,r=["http","https","ws","wss","urn","urn:uuid"];function n(k){return r.indexOf(k)!==-1}function s(k){return k.secure===!0?!0:k.secure===!1?!1:k.scheme?k.scheme.length===3&&(k.scheme[0]==="w"||k.scheme[0]==="W")&&(k.scheme[1]==="s"||k.scheme[1]==="S")&&(k.scheme[2]==="s"||k.scheme[2]==="S"):!1}function a(k){return k.host||(k.error=k.error||"HTTP URIs must have a host."),k}function u(k){const x=String(k.scheme).toLowerCase()==="https";return(k.port===(x?443:80)||k.port==="")&&(k.port=void 0),k.path||(k.path="/"),k}function l(k){return k.secure=s(k),k.resourceName=(k.path||"/")+(k.query?"?"+k.query:""),k.path=void 0,k.query=void 0,k}function d(k){if((k.port===(s(k)?443:80)||k.port==="")&&(k.port=void 0),typeof k.secure=="boolean"&&(k.scheme=k.secure?"wss":"ws",k.secure=void 0),k.resourceName){const[x,U]=k.resourceName.split("?");k.path=x&&x!=="/"?x:void 0,k.query=U,k.resourceName=void 0}return k.fragment=void 0,k}function m(k,x){if(!k.path)return k.error="URN can not be parsed",k;const U=k.path.match(e);if(U){const ie=x.scheme||k.scheme||"urn";k.nid=U[1].toLowerCase(),k.nss=U[2];const Y=`${ie}:${x.nid||k.nid}`,_e=B(Y);k.path=void 0,_e&&(k=_e.parse(k,x))}else k.error=k.error||"URN can not be parsed.";return k}function y(k,x){if(k.nid===void 0)throw new Error("URN without nid cannot be serialized");const U=x.scheme||k.scheme||"urn",ie=k.nid.toLowerCase(),Y=`${U}:${x.nid||ie}`,_e=B(Y);_e&&(k=_e.serialize(k,x));const le=k,me=k.nss;return le.path=`${ie||x.nid}:${me}`,x.skipEscape=!0,le}function g(k,x){const U=k;return U.uuid=U.nss,U.nss=void 0,!x.tolerant&&(!U.uuid||!t(U.uuid))&&(U.error=U.error||"UUID is not valid."),U}function b(k){const x=k;return x.nss=(k.uuid||"").toLowerCase(),x}const S={scheme:"http",domainHost:!0,parse:a,serialize:u},E={scheme:"https",domainHost:S.domainHost,parse:a,serialize:u},D={scheme:"ws",domainHost:!0,parse:l,serialize:d},O={scheme:"wss",domainHost:D.domainHost,parse:D.parse,serialize:D.serialize},C={http:S,https:E,ws:D,wss:O,urn:{scheme:"urn",parse:m,serialize:y,skipNormalize:!0},"urn:uuid":{scheme:"urn:uuid",parse:g,serialize:b,skipNormalize:!0}};Object.setPrototypeOf(C,null);function B(k){return k&&(C[k]||C[k.toLowerCase()])||void 0}return Rv={wsIsSecure:s,SCHEMES:C,isValidSchemeName:n,getSchemeHandler:B},Rv}var NS;function wM(){if(NS)return ef.exports;NS=1;const{normalizeIPv6:t,removeDotSegments:e,recomposeAuthority:r,normalizeComponentEncoding:n,isIPv4:s,nonSimpleDomain:a}=YO(),{SCHEMES:u,getSchemeHandler:l}=_M();function d(O,$){return typeof O=="string"?O=b(E(O,$),$):typeof O=="object"&&(O=E(b(O,$),$)),O}function m(O,$,P){const C=P?Object.assign({scheme:"null"},P):{scheme:"null"},B=y(E(O,C),E($,C),C,!0);return C.skipEscape=!0,b(B,C)}function y(O,$,P,C){const B={};return C||(O=E(b(O,P),P),$=E(b($,P),P)),P=P||{},!P.tolerant&&$.scheme?(B.scheme=$.scheme,B.userinfo=$.userinfo,B.host=$.host,B.port=$.port,B.path=e($.path||""),B.query=$.query):($.userinfo!==void 0||$.host!==void 0||$.port!==void 0?(B.userinfo=$.userinfo,B.host=$.host,B.port=$.port,B.path=e($.path||""),B.query=$.query):($.path?($.path[0]==="/"?B.path=e($.path):((O.userinfo!==void 0||O.host!==void 0||O.port!==void 0)&&!O.path?B.path="/"+$.path:O.path?B.path=O.path.slice(0,O.path.lastIndexOf("/")+1)+$.path:B.path=$.path,B.path=e(B.path)),B.query=$.query):(B.path=O.path,$.query!==void 0?B.query=$.query:B.query=O.query),B.userinfo=O.userinfo,B.host=O.host,B.port=O.port),B.scheme=O.scheme),B.fragment=$.fragment,B}function g(O,$,P){return typeof O=="string"?(O=unescape(O),O=b(n(E(O,P),!0),{...P,skipEscape:!0})):typeof O=="object"&&(O=b(n(O,!0),{...P,skipEscape:!0})),typeof $=="string"?($=unescape($),$=b(n(E($,P),!0),{...P,skipEscape:!0})):typeof $=="object"&&($=b(n($,!0),{...P,skipEscape:!0})),O.toLowerCase()===$.toLowerCase()}function b(O,$){const P={host:O.host,scheme:O.scheme,userinfo:O.userinfo,port:O.port,path:O.path,query:O.query,nid:O.nid,nss:O.nss,uuid:O.uuid,fragment:O.fragment,reference:O.reference,resourceName:O.resourceName,secure:O.secure,error:""},C=Object.assign({},$),B=[],k=l(C.scheme||P.scheme);k&&k.serialize&&k.serialize(P,C),P.path!==void 0&&(C.skipEscape?P.path=unescape(P.path):(P.path=escape(P.path),P.scheme!==void 0&&(P.path=P.path.split("%3A").join(":")))),C.reference!=="suffix"&&P.scheme&&B.push(P.scheme,":");const x=r(P);if(x!==void 0&&(C.reference!=="suffix"&&B.push("//"),B.push(x),P.path&&P.path[0]!=="/"&&B.push("/")),P.path!==void 0){let U=P.path;!C.absolutePath&&(!k||!k.absolutePath)&&(U=e(U)),x===void 0&&U[0]==="/"&&U[1]==="/"&&(U="/%2F"+U.slice(2)),B.push(U)}return P.query!==void 0&&B.push("?",P.query),P.fragment!==void 0&&B.push("#",P.fragment),B.join("")}const S=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function E(O,$){const P=Object.assign({},$),C={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0};let B=!1;P.reference==="suffix"&&(P.scheme?O=P.scheme+":"+O:O="//"+O);const k=O.match(S);if(k){if(C.scheme=k[1],C.userinfo=k[3],C.host=k[4],C.port=parseInt(k[5],10),C.path=k[6]||"",C.query=k[7],C.fragment=k[8],isNaN(C.port)&&(C.port=k[5]),C.host)if(s(C.host)===!1){const ie=t(C.host);C.host=ie.host.toLowerCase(),B=ie.isIPV6}else B=!0;C.scheme===void 0&&C.userinfo===void 0&&C.host===void 0&&C.port===void 0&&C.query===void 0&&!C.path?C.reference="same-document":C.scheme===void 0?C.reference="relative":C.fragment===void 0?C.reference="absolute":C.reference="uri",P.reference&&P.reference!=="suffix"&&P.reference!==C.reference&&(C.error=C.error||"URI is not a "+P.reference+" reference.");const x=l(P.scheme||C.scheme);if(!P.unicodeSupport&&(!x||!x.unicodeSupport)&&C.host&&(P.domainHost||x&&x.domainHost)&&B===!1&&a(C.host))try{C.host=URL.domainToASCII(C.host.toLowerCase())}catch(U){C.error=C.error||"Host's domain name can not be converted to ASCII: "+U}(!x||x&&!x.skipNormalize)&&(O.indexOf("%")!==-1&&(C.scheme!==void 0&&(C.scheme=unescape(C.scheme)),C.host!==void 0&&(C.host=unescape(C.host))),C.path&&(C.path=escape(unescape(C.path))),C.fragment&&(C.fragment=encodeURI(decodeURIComponent(C.fragment)))),x&&x.parse&&x.parse(C,P)}else C.error=C.error||"URI can not be parsed.";return C}const D={SCHEMES:u,normalize:d,resolve:m,resolveComponent:y,equal:g,serialize:b,parse:E};return ef.exports=D,ef.exports.default=D,ef.exports.fastUri=D,ef.exports}var TS;function bM(){if(TS)return vh;TS=1,Object.defineProperty(vh,"__esModule",{value:!0});const t=wM();return t.code='require("ajv/dist/runtime/uri").default',vh.default=t,vh}var xS;function SM(){return xS||(xS=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;var e=Im();Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return e.KeywordCxt}});var r=Et();Object.defineProperty(t,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return r.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return r.CodeGen}});const n=b0(),s=Om(),a=HO(),u=S0(),l=Et(),d=Em(),m=Fp(),y=Nt(),g=gM,b=bM(),S=(F,j)=>new RegExp(F,j);S.code="new RegExp";const E=["removeAdditional","useDefaults","coerceTypes"],D=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),O={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},$={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},P=200;function C(F){var j,ae,Q,M,A,q,we,Oe,be,Xe,ee,J,Se,Ce,Ke,pt,yr,Qr,Dr,lr,Pt,qn,Ir,Us,ci;const Yr=F.strict,Ai=(j=F.code)===null||j===void 0?void 0:j.optimize,Vn=Ai===!0||Ai===void 0?1:Ai||0,zs=(Q=(ae=F.code)===null||ae===void 0?void 0:ae.regExp)!==null&&Q!==void 0?Q:S,li=(M=F.uriResolver)!==null&&M!==void 0?M:b.default;return{strictSchema:(q=(A=F.strictSchema)!==null&&A!==void 0?A:Yr)!==null&&q!==void 0?q:!0,strictNumbers:(Oe=(we=F.strictNumbers)!==null&&we!==void 0?we:Yr)!==null&&Oe!==void 0?Oe:!0,strictTypes:(Xe=(be=F.strictTypes)!==null&&be!==void 0?be:Yr)!==null&&Xe!==void 0?Xe:"log",strictTuples:(J=(ee=F.strictTuples)!==null&&ee!==void 0?ee:Yr)!==null&&J!==void 0?J:"log",strictRequired:(Ce=(Se=F.strictRequired)!==null&&Se!==void 0?Se:Yr)!==null&&Ce!==void 0?Ce:!1,code:F.code?{...F.code,optimize:Vn,regExp:zs}:{optimize:Vn,regExp:zs},loopRequired:(Ke=F.loopRequired)!==null&&Ke!==void 0?Ke:P,loopEnum:(pt=F.loopEnum)!==null&&pt!==void 0?pt:P,meta:(yr=F.meta)!==null&&yr!==void 0?yr:!0,messages:(Qr=F.messages)!==null&&Qr!==void 0?Qr:!0,inlineRefs:(Dr=F.inlineRefs)!==null&&Dr!==void 0?Dr:!0,schemaId:(lr=F.schemaId)!==null&&lr!==void 0?lr:"$id",addUsedSchema:(Pt=F.addUsedSchema)!==null&&Pt!==void 0?Pt:!0,validateSchema:(qn=F.validateSchema)!==null&&qn!==void 0?qn:!0,validateFormats:(Ir=F.validateFormats)!==null&&Ir!==void 0?Ir:!0,unicodeRegExp:(Us=F.unicodeRegExp)!==null&&Us!==void 0?Us:!0,int32range:(ci=F.int32range)!==null&&ci!==void 0?ci:!0,uriResolver:li}}class B{constructor(j={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,j=this.opts={...j,...C(j)};const{es5:ae,lines:Q}=this.opts.code;this.scope=new l.ValueScope({scope:{},prefixes:D,es5:ae,lines:Q}),this.logger=me(j.logger);const M=j.validateFormats;j.validateFormats=!1,this.RULES=(0,a.getRules)(),k.call(this,O,j,"NOT SUPPORTED"),k.call(this,$,j,"DEPRECATED","warn"),this._metaOpts=_e.call(this),j.formats&&ie.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),j.keywords&&Y.call(this,j.keywords),typeof j.meta=="object"&&this.addMetaSchema(j.meta),U.call(this),j.validateFormats=M}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:j,meta:ae,schemaId:Q}=this.opts;let M=g;Q==="id"&&(M={...g},M.id=M.$id,delete M.$id),ae&&j&&this.addMetaSchema(M,M[Q],!1)}defaultMeta(){const{meta:j,schemaId:ae}=this.opts;return this.opts.defaultMeta=typeof j=="object"?j[ae]||j:void 0}validate(j,ae){let Q;if(typeof j=="string"){if(Q=this.getSchema(j),!Q)throw new Error(`no schema with key or ref "${j}"`)}else Q=this.compile(j);const M=Q(ae);return"$async"in Q||(this.errors=Q.errors),M}compile(j,ae){const Q=this._addSchema(j,ae);return Q.validate||this._compileSchemaEnv(Q)}compileAsync(j,ae){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:Q}=this.opts;return M.call(this,j,ae);async function M(Xe,ee){await A.call(this,Xe.$schema);const J=this._addSchema(Xe,ee);return J.validate||q.call(this,J)}async function A(Xe){Xe&&!this.getSchema(Xe)&&await M.call(this,{$ref:Xe},!0)}async function q(Xe){try{return this._compileSchemaEnv(Xe)}catch(ee){if(!(ee instanceof s.default))throw ee;return we.call(this,ee),await Oe.call(this,ee.missingSchema),q.call(this,Xe)}}function we({missingSchema:Xe,missingRef:ee}){if(this.refs[Xe])throw new Error(`AnySchema ${Xe} is loaded but ${ee} cannot be resolved`)}async function Oe(Xe){const ee=await be.call(this,Xe);this.refs[Xe]||await A.call(this,ee.$schema),this.refs[Xe]||this.addSchema(ee,Xe,ae)}async function be(Xe){const ee=this._loading[Xe];if(ee)return ee;try{return await(this._loading[Xe]=Q(Xe))}finally{delete this._loading[Xe]}}}addSchema(j,ae,Q,M=this.opts.validateSchema){if(Array.isArray(j)){for(const q of j)this.addSchema(q,void 0,Q,M);return this}let A;if(typeof j=="object"){const{schemaId:q}=this.opts;if(A=j[q],A!==void 0&&typeof A!="string")throw new Error(`schema ${q} must be string`)}return ae=(0,d.normalizeId)(ae||A),this._checkUnique(ae),this.schemas[ae]=this._addSchema(j,Q,ae,M,!0),this}addMetaSchema(j,ae,Q=this.opts.validateSchema){return this.addSchema(j,ae,!0,Q),this}validateSchema(j,ae){if(typeof j=="boolean")return!0;let Q;if(Q=j.$schema,Q!==void 0&&typeof Q!="string")throw new Error("$schema must be a string");if(Q=Q||this.opts.defaultMeta||this.defaultMeta(),!Q)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const M=this.validate(Q,j);if(!M&&ae){const A="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(A);else throw new Error(A)}return M}getSchema(j){let ae;for(;typeof(ae=x.call(this,j))=="string";)j=ae;if(ae===void 0){const{schemaId:Q}=this.opts,M=new u.SchemaEnv({schema:{},schemaId:Q});if(ae=u.resolveSchema.call(this,M,j),!ae)return;this.refs[j]=ae}return ae.validate||this._compileSchemaEnv(ae)}removeSchema(j){if(j instanceof RegExp)return this._removeAllSchemas(this.schemas,j),this._removeAllSchemas(this.refs,j),this;switch(typeof j){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const ae=x.call(this,j);return typeof ae=="object"&&this._cache.delete(ae.schema),delete this.schemas[j],delete this.refs[j],this}case"object":{const ae=j;this._cache.delete(ae);let Q=j[this.opts.schemaId];return Q&&(Q=(0,d.normalizeId)(Q),delete this.schemas[Q],delete this.refs[Q]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(j){for(const ae of j)this.addKeyword(ae);return this}addKeyword(j,ae){let Q;if(typeof j=="string")Q=j,typeof ae=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),ae.keyword=Q);else if(typeof j=="object"&&ae===void 0){if(ae=j,Q=ae.keyword,Array.isArray(Q)&&!Q.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(Pe.call(this,Q,ae),!ae)return(0,y.eachItem)(Q,A=>We.call(this,A)),this;et.call(this,ae);const M={...ae,type:(0,m.getJSONTypes)(ae.type),schemaType:(0,m.getJSONTypes)(ae.schemaType)};return(0,y.eachItem)(Q,M.type.length===0?A=>We.call(this,A,M):A=>M.type.forEach(q=>We.call(this,A,M,q))),this}getKeyword(j){const ae=this.RULES.all[j];return typeof ae=="object"?ae.definition:!!ae}removeKeyword(j){const{RULES:ae}=this;delete ae.keywords[j],delete ae.all[j];for(const Q of ae.rules){const M=Q.rules.findIndex(A=>A.keyword===j);M>=0&&Q.rules.splice(M,1)}return this}addFormat(j,ae){return typeof ae=="string"&&(ae=new RegExp(ae)),this.formats[j]=ae,this}errorsText(j=this.errors,{separator:ae=", ",dataVar:Q="data"}={}){return!j||j.length===0?"No errors":j.map(M=>`${Q}${M.instancePath} ${M.message}`).reduce((M,A)=>M+ae+A)}$dataMetaSchema(j,ae){const Q=this.RULES.all;j=JSON.parse(JSON.stringify(j));for(const M of ae){const A=M.split("/").slice(1);let q=j;for(const we of A)q=q[we];for(const we in Q){const Oe=Q[we];if(typeof Oe!="object")continue;const{$data:be}=Oe.definition,Xe=q[we];be&&Xe&&(q[we]=je(Xe))}}return j}_removeAllSchemas(j,ae){for(const Q in j){const M=j[Q];(!ae||ae.test(Q))&&(typeof M=="string"?delete j[Q]:M&&!M.meta&&(this._cache.delete(M.schema),delete j[Q]))}}_addSchema(j,ae,Q,M=this.opts.validateSchema,A=this.opts.addUsedSchema){let q;const{schemaId:we}=this.opts;if(typeof j=="object")q=j[we];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof j!="boolean")throw new Error("schema must be object or boolean")}let Oe=this._cache.get(j);if(Oe!==void 0)return Oe;Q=(0,d.normalizeId)(q||Q);const be=d.getSchemaRefs.call(this,j,Q);return Oe=new u.SchemaEnv({schema:j,schemaId:we,meta:ae,baseId:Q,localRefs:be}),this._cache.set(Oe.schema,Oe),A&&!Q.startsWith("#")&&(Q&&this._checkUnique(Q),this.refs[Q]=Oe),M&&this.validateSchema(j,!0),Oe}_checkUnique(j){if(this.schemas[j]||this.refs[j])throw new Error(`schema with key or id "${j}" already exists`)}_compileSchemaEnv(j){if(j.meta?this._compileMetaSchema(j):u.compileSchema.call(this,j),!j.validate)throw new Error("ajv implementation error");return j.validate}_compileMetaSchema(j){const ae=this.opts;this.opts=this._metaOpts;try{u.compileSchema.call(this,j)}finally{this.opts=ae}}}B.ValidationError=n.default,B.MissingRefError=s.default,t.default=B;function k(F,j,ae,Q="error"){for(const M in F){const A=M;A in j&&this.logger[Q](`${ae}: option ${M}. ${F[A]}`)}}function x(F){return F=(0,d.normalizeId)(F),this.schemas[F]||this.refs[F]}function U(){const F=this.opts.schemas;if(F)if(Array.isArray(F))this.addSchema(F);else for(const j in F)this.addSchema(F[j],j)}function ie(){for(const F in this.opts.formats){const j=this.opts.formats[F];j&&this.addFormat(F,j)}}function Y(F){if(Array.isArray(F)){this.addVocabulary(F);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const j in F){const ae=F[j];ae.keyword||(ae.keyword=j),this.addKeyword(ae)}}function _e(){const F={...this.opts};for(const j of E)delete F[j];return F}const le={log(){},warn(){},error(){}};function me(F){if(F===!1)return le;if(F===void 0)return console;if(F.log&&F.warn&&F.error)return F;throw new Error("logger must implement log, warn and error methods")}const ke=/^[a-z_$][a-z0-9_$:-]*$/i;function Pe(F,j){const{RULES:ae}=this;if((0,y.eachItem)(F,Q=>{if(ae.keywords[Q])throw new Error(`Keyword ${Q} is already defined`);if(!ke.test(Q))throw new Error(`Keyword ${Q} has invalid name`)}),!!j&&j.$data&&!("code"in j||"validate"in j))throw new Error('$data keyword must have "code" or "validate" function')}function We(F,j,ae){var Q;const M=j?.post;if(ae&&M)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:A}=this;let q=M?A.post:A.rules.find(({type:Oe})=>Oe===ae);if(q||(q={type:ae,rules:[]},A.rules.push(q)),A.keywords[F]=!0,!j)return;const we={keyword:F,definition:{...j,type:(0,m.getJSONTypes)(j.type),schemaType:(0,m.getJSONTypes)(j.schemaType)}};j.before?nt.call(this,q,we,j.before):q.rules.push(we),A.all[F]=we,(Q=j.implements)===null||Q===void 0||Q.forEach(Oe=>this.addKeyword(Oe))}function nt(F,j,ae){const Q=F.rules.findIndex(M=>M.keyword===ae);Q>=0?F.rules.splice(Q,0,j):(F.rules.push(j),this.logger.warn(`rule ${ae} is not defined`))}function et(F){let{metaSchema:j}=F;j!==void 0&&(F.$data&&this.opts.$data&&(j=je(j)),F.validateSchema=this.compile(j,!0))}const Ee={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function je(F){return{anyOf:[F,Ee]}}})(bv)),bv}var gh={},_h={},wh={},MS;function EM(){if(MS)return wh;MS=1,Object.defineProperty(wh,"__esModule",{value:!0});const t={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};return wh.default=t,wh}var da={},FS;function IM(){if(FS)return da;FS=1,Object.defineProperty(da,"__esModule",{value:!0}),da.callRef=da.getValidate=void 0;const t=Om(),e=ns(),r=Et(),n=Fa(),s=S0(),a=Nt(),u={keyword:"$ref",schemaType:"string",code(m){const{gen:y,schema:g,it:b}=m,{baseId:S,schemaEnv:E,validateName:D,opts:O,self:$}=b,{root:P}=E;if((g==="#"||g==="#/")&&S===P.baseId)return B();const C=s.resolveRef.call($,P,S,g);if(C===void 0)throw new t.default(b.opts.uriResolver,S,g);if(C instanceof s.SchemaEnv)return k(C);return x(C);function B(){if(E===P)return d(m,D,E,E.$async);const U=y.scopeValue("root",{ref:P});return d(m,(0,r._)`${U}.validate`,P,P.$async)}function k(U){const ie=l(m,U);d(m,ie,U,U.$async)}function x(U){const ie=y.scopeValue("schema",O.code.source===!0?{ref:U,code:(0,r.stringify)(U)}:{ref:U}),Y=y.name("valid"),_e=m.subschema({schema:U,dataTypes:[],schemaPath:r.nil,topSchemaRef:ie,errSchemaPath:g},Y);m.mergeEvaluated(_e),m.ok(Y)}}};function l(m,y){const{gen:g}=m;return y.validate?g.scopeValue("validate",{ref:y.validate}):(0,r._)`${g.scopeValue("wrapper",{ref:y})}.validate`}da.getValidate=l;function d(m,y,g,b){const{gen:S,it:E}=m,{allErrors:D,schemaEnv:O,opts:$}=E,P=$.passContext?n.default.this:r.nil;b?C():B();function C(){if(!O.$async)throw new Error("async schema referenced by sync schema");const U=S.let("valid");S.try(()=>{S.code((0,r._)`await ${(0,e.callValidateCode)(m,y,P)}`),x(y),D||S.assign(U,!0)},ie=>{S.if((0,r._)`!(${ie} instanceof ${E.ValidationError})`,()=>S.throw(ie)),k(ie),D||S.assign(U,!1)}),m.ok(U)}function B(){m.result((0,e.callValidateCode)(m,y,P),()=>x(y),()=>k(y))}function k(U){const ie=(0,r._)`${U}.errors`;S.assign(n.default.vErrors,(0,r._)`${n.default.vErrors} === null ? ${ie} : ${n.default.vErrors}.concat(${ie})`),S.assign(n.default.errors,(0,r._)`${n.default.vErrors}.length`)}function x(U){var ie;if(!E.opts.unevaluated)return;const Y=(ie=g?.validate)===null||ie===void 0?void 0:ie.evaluated;if(E.props!==!0)if(Y&&!Y.dynamicProps)Y.props!==void 0&&(E.props=a.mergeEvaluated.props(S,Y.props,E.props));else{const _e=S.var("props",(0,r._)`${U}.evaluated.props`);E.props=a.mergeEvaluated.props(S,_e,E.props,r.Name)}if(E.items!==!0)if(Y&&!Y.dynamicItems)Y.items!==void 0&&(E.items=a.mergeEvaluated.items(S,Y.items,E.items));else{const _e=S.var("items",(0,r._)`${U}.evaluated.items`);E.items=a.mergeEvaluated.items(S,_e,E.items,r.Name)}}}return da.callRef=d,da.default=u,da}var BS;function OM(){if(BS)return _h;BS=1,Object.defineProperty(_h,"__esModule",{value:!0});const t=EM(),e=IM(),r=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",t.default,e.default];return _h.default=r,_h}var bh={},Sh={},LS;function kM(){if(LS)return Sh;LS=1,Object.defineProperty(Sh,"__esModule",{value:!0});const t=Et(),e=t.operators,r={maximum:{okStr:"<=",ok:e.LTE,fail:e.GT},minimum:{okStr:">=",ok:e.GTE,fail:e.LT},exclusiveMaximum:{okStr:"<",ok:e.LT,fail:e.GTE},exclusiveMinimum:{okStr:">",ok:e.GT,fail:e.LTE}},n={message:({keyword:a,schemaCode:u})=>(0,t.str)`must be ${r[a].okStr} ${u}`,params:({keyword:a,schemaCode:u})=>(0,t._)`{comparison: ${r[a].okStr}, limit: ${u}}`},s={keyword:Object.keys(r),type:"number",schemaType:"number",$data:!0,error:n,code(a){const{keyword:u,data:l,schemaCode:d}=a;a.fail$data((0,t._)`${l} ${r[u].fail} ${d} || isNaN(${l})`)}};return Sh.default=s,Sh}var Eh={},jS;function PM(){if(jS)return Eh;jS=1,Object.defineProperty(Eh,"__esModule",{value:!0});const t=Et(),r={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:n})=>(0,t.str)`must be multiple of ${n}`,params:({schemaCode:n})=>(0,t._)`{multipleOf: ${n}}`},code(n){const{gen:s,data:a,schemaCode:u,it:l}=n,d=l.opts.multipleOfPrecision,m=s.let("res"),y=d?(0,t._)`Math.abs(Math.round(${m}) - ${m}) > 1e-${d}`:(0,t._)`${m} !== parseInt(${m})`;n.fail$data((0,t._)`(${u} === 0 || (${m} = ${a}/${u}, ${y}))`)}};return Eh.default=r,Eh}var Ih={},Oh={},US;function DM(){if(US)return Oh;US=1,Object.defineProperty(Oh,"__esModule",{value:!0});function t(e){const r=e.length;let n=0,s=0,a;for(;s<r;)n++,a=e.charCodeAt(s++),a>=55296&&a<=56319&&s<r&&(a=e.charCodeAt(s),(a&64512)===56320&&s++);return n}return Oh.default=t,t.code='require("ajv/dist/runtime/ucs2length").default',Oh}var zS;function RM(){if(zS)return Ih;zS=1,Object.defineProperty(Ih,"__esModule",{value:!0});const t=Et(),e=Nt(),r=DM(),s={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:a,schemaCode:u}){const l=a==="maxLength"?"more":"fewer";return(0,t.str)`must NOT have ${l} than ${u} characters`},params:({schemaCode:a})=>(0,t._)`{limit: ${a}}`},code(a){const{keyword:u,data:l,schemaCode:d,it:m}=a,y=u==="maxLength"?t.operators.GT:t.operators.LT,g=m.opts.unicode===!1?(0,t._)`${l}.length`:(0,t._)`${(0,e.useFunc)(a.gen,r.default)}(${l})`;a.fail$data((0,t._)`${g} ${y} ${d}`)}};return Ih.default=s,Ih}var kh={},qS;function CM(){if(qS)return kh;qS=1,Object.defineProperty(kh,"__esModule",{value:!0});const t=ns(),e=Et(),n={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:s})=>(0,e.str)`must match pattern "${s}"`,params:({schemaCode:s})=>(0,e._)`{pattern: ${s}}`},code(s){const{data:a,$data:u,schema:l,schemaCode:d,it:m}=s,y=m.opts.unicodeRegExp?"u":"",g=u?(0,e._)`(new RegExp(${d}, ${y}))`:(0,t.usePattern)(s,l);s.fail$data((0,e._)`!${g}.test(${a})`)}};return kh.default=n,kh}var Ph={},VS;function $M(){if(VS)return Ph;VS=1,Object.defineProperty(Ph,"__esModule",{value:!0});const t=Et(),r={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:n,schemaCode:s}){const a=n==="maxProperties"?"more":"fewer";return(0,t.str)`must NOT have ${a} than ${s} properties`},params:({schemaCode:n})=>(0,t._)`{limit: ${n}}`},code(n){const{keyword:s,data:a,schemaCode:u}=n,l=s==="maxProperties"?t.operators.GT:t.operators.LT;n.fail$data((0,t._)`Object.keys(${a}).length ${l} ${u}`)}};return Ph.default=r,Ph}var Dh={},KS;function AM(){if(KS)return Dh;KS=1,Object.defineProperty(Dh,"__esModule",{value:!0});const t=ns(),e=Et(),r=Nt(),s={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:a}})=>(0,e.str)`must have required property '${a}'`,params:({params:{missingProperty:a}})=>(0,e._)`{missingProperty: ${a}}`},code(a){const{gen:u,schema:l,schemaCode:d,data:m,$data:y,it:g}=a,{opts:b}=g;if(!y&&l.length===0)return;const S=l.length>=b.loopRequired;if(g.allErrors?E():D(),b.strictRequired){const P=a.parentSchema.properties,{definedProperties:C}=a.it;for(const B of l)if(P?.[B]===void 0&&!C.has(B)){const k=g.schemaEnv.baseId+g.errSchemaPath,x=`required property "${B}" is not defined at "${k}" (strictRequired)`;(0,r.checkStrictMode)(g,x,g.opts.strictRequired)}}function E(){if(S||y)a.block$data(e.nil,O);else for(const P of l)(0,t.checkReportMissingProp)(a,P)}function D(){const P=u.let("missing");if(S||y){const C=u.let("valid",!0);a.block$data(C,()=>$(P,C)),a.ok(C)}else u.if((0,t.checkMissingProp)(a,l,P)),(0,t.reportMissingProp)(a,P),u.else()}function O(){u.forOf("prop",d,P=>{a.setParams({missingProperty:P}),u.if((0,t.noPropertyInData)(u,m,P,b.ownProperties),()=>a.error())})}function $(P,C){a.setParams({missingProperty:P}),u.forOf(P,d,()=>{u.assign(C,(0,t.propertyInData)(u,m,P,b.ownProperties)),u.if((0,e.not)(C),()=>{a.error(),u.break()})},e.nil)}}};return Dh.default=s,Dh}var Rh={},WS;function NM(){if(WS)return Rh;WS=1,Object.defineProperty(Rh,"__esModule",{value:!0});const t=Et(),r={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:n,schemaCode:s}){const a=n==="maxItems"?"more":"fewer";return(0,t.str)`must NOT have ${a} than ${s} items`},params:({schemaCode:n})=>(0,t._)`{limit: ${n}}`},code(n){const{keyword:s,data:a,schemaCode:u}=n,l=s==="maxItems"?t.operators.GT:t.operators.LT;n.fail$data((0,t._)`${a}.length ${l} ${u}`)}};return Rh.default=r,Rh}var Ch={},$h={},HS;function E0(){if(HS)return $h;HS=1,Object.defineProperty($h,"__esModule",{value:!0});const t=w0();return t.code='require("ajv/dist/runtime/equal").default',$h.default=t,$h}var QS;function TM(){if(QS)return Ch;QS=1,Object.defineProperty(Ch,"__esModule",{value:!0});const t=Fp(),e=Et(),r=Nt(),n=E0(),a={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:u,j:l}})=>(0,e.str)`must NOT have duplicate items (items ## ${l} and ${u} are identical)`,params:({params:{i:u,j:l}})=>(0,e._)`{i: ${u}, j: ${l}}`},code(u){const{gen:l,data:d,$data:m,schema:y,parentSchema:g,schemaCode:b,it:S}=u;if(!m&&!y)return;const E=l.let("valid"),D=g.items?(0,t.getSchemaTypes)(g.items):[];u.block$data(E,O,(0,e._)`${b} === false`),u.ok(E);function O(){const B=l.let("i",(0,e._)`${d}.length`),k=l.let("j");u.setParams({i:B,j:k}),l.assign(E,!0),l.if((0,e._)`${B} > 1`,()=>($()?P:C)(B,k))}function $(){return D.length>0&&!D.some(B=>B==="object"||B==="array")}function P(B,k){const x=l.name("item"),U=(0,t.checkDataTypes)(D,x,S.opts.strictNumbers,t.DataType.Wrong),ie=l.const("indices",(0,e._)`{}`);l.for((0,e._)`;${B}--;`,()=>{l.let(x,(0,e._)`${d}[${B}]`),l.if(U,(0,e._)`continue`),D.length>1&&l.if((0,e._)`typeof ${x} == "string"`,(0,e._)`${x} += "_"`),l.if((0,e._)`typeof ${ie}[${x}] == "number"`,()=>{l.assign(k,(0,e._)`${ie}[${x}]`),u.error(),l.assign(E,!1).break()}).code((0,e._)`${ie}[${x}] = ${B}`)})}function C(B,k){const x=(0,r.useFunc)(l,n.default),U=l.name("outer");l.label(U).for((0,e._)`;${B}--;`,()=>l.for((0,e._)`${k} = ${B}; ${k}--;`,()=>l.if((0,e._)`${x}(${d}[${B}], ${d}[${k}])`,()=>{u.error(),l.assign(E,!1).break(U)})))}}};return Ch.default=a,Ch}var Ah={},YS;function xM(){if(YS)return Ah;YS=1,Object.defineProperty(Ah,"__esModule",{value:!0});const t=Et(),e=Nt(),r=E0(),s={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:a})=>(0,t._)`{allowedValue: ${a}}`},code(a){const{gen:u,data:l,$data:d,schemaCode:m,schema:y}=a;d||y&&typeof y=="object"?a.fail$data((0,t._)`!${(0,e.useFunc)(u,r.default)}(${l}, ${m})`):a.fail((0,t._)`${y} !== ${l}`)}};return Ah.default=s,Ah}var Nh={},GS;function MM(){if(GS)return Nh;GS=1,Object.defineProperty(Nh,"__esModule",{value:!0});const t=Et(),e=Nt(),r=E0(),s={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:a})=>(0,t._)`{allowedValues: ${a}}`},code(a){const{gen:u,data:l,$data:d,schema:m,schemaCode:y,it:g}=a;if(!d&&m.length===0)throw new Error("enum must have non-empty array");const b=m.length>=g.opts.loopEnum;let S;const E=()=>S??(S=(0,e.useFunc)(u,r.default));let D;if(b||d)D=u.let("valid"),a.block$data(D,O);else{if(!Array.isArray(m))throw new Error("ajv implementation error");const P=u.const("vSchema",y);D=(0,t.or)(...m.map((C,B)=>$(P,B)))}a.pass(D);function O(){u.assign(D,!1),u.forOf("v",y,P=>u.if((0,t._)`${E()}(${l}, ${P})`,()=>u.assign(D,!0).break()))}function $(P,C){const B=m[C];return typeof B=="object"&&B!==null?(0,t._)`${E()}(${l}, ${P}[${C}])`:(0,t._)`${l} === ${B}`}}};return Nh.default=s,Nh}var JS;function FM(){if(JS)return bh;JS=1,Object.defineProperty(bh,"__esModule",{value:!0});const t=kM(),e=PM(),r=RM(),n=CM(),s=$M(),a=AM(),u=NM(),l=TM(),d=xM(),m=MM(),y=[t.default,e.default,r.default,n.default,s.default,a.default,u.default,l.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},d.default,m.default];return bh.default=y,bh}var Th={},Sc={},XS;function GO(){if(XS)return Sc;XS=1,Object.defineProperty(Sc,"__esModule",{value:!0}),Sc.validateAdditionalItems=void 0;const t=Et(),e=Nt(),n={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:a}})=>(0,t.str)`must NOT have more than ${a} items`,params:({params:{len:a}})=>(0,t._)`{limit: ${a}}`},code(a){const{parentSchema:u,it:l}=a,{items:d}=u;if(!Array.isArray(d)){(0,e.checkStrictMode)(l,'"additionalItems" is ignored when "items" is not an array of schemas');return}s(a,d)}};function s(a,u){const{gen:l,schema:d,data:m,keyword:y,it:g}=a;g.items=!0;const b=l.const("len",(0,t._)`${m}.length`);if(d===!1)a.setParams({len:u.length}),a.pass((0,t._)`${b} <= ${u.length}`);else if(typeof d=="object"&&!(0,e.alwaysValidSchema)(g,d)){const E=l.var("valid",(0,t._)`${b} <= ${u.length}`);l.if((0,t.not)(E),()=>S(E)),a.ok(E)}function S(E){l.forRange("i",u.length,b,D=>{a.subschema({keyword:y,dataProp:D,dataPropType:e.Type.Num},E),g.allErrors||l.if((0,t.not)(E),()=>l.break())})}}return Sc.validateAdditionalItems=s,Sc.default=n,Sc}var xh={},Ec={},ZS;function JO(){if(ZS)return Ec;ZS=1,Object.defineProperty(Ec,"__esModule",{value:!0}),Ec.validateTuple=void 0;const t=Et(),e=Nt(),r=ns(),n={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(a){const{schema:u,it:l}=a;if(Array.isArray(u))return s(a,"additionalItems",u);l.items=!0,!(0,e.alwaysValidSchema)(l,u)&&a.ok((0,r.validateArray)(a))}};function s(a,u,l=a.schema){const{gen:d,parentSchema:m,data:y,keyword:g,it:b}=a;D(m),b.opts.unevaluated&&l.length&&b.items!==!0&&(b.items=e.mergeEvaluated.items(d,l.length,b.items));const S=d.name("valid"),E=d.const("len",(0,t._)`${y}.length`);l.forEach((O,$)=>{(0,e.alwaysValidSchema)(b,O)||(d.if((0,t._)`${E} > ${$}`,()=>a.subschema({keyword:g,schemaProp:$,dataProp:$},S)),a.ok(S))});function D(O){const{opts:$,errSchemaPath:P}=b,C=l.length,B=C===O.minItems&&(C===O.maxItems||O[u]===!1);if($.strictTuples&&!B){const k=`"${g}" is ${C}-tuple, but minItems or maxItems/${u} are not specified or different at path "${P}"`;(0,e.checkStrictMode)(b,k,$.strictTuples)}}}return Ec.validateTuple=s,Ec.default=n,Ec}var e1;function BM(){if(e1)return xh;e1=1,Object.defineProperty(xh,"__esModule",{value:!0});const t=JO(),e={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:r=>(0,t.validateTuple)(r,"items")};return xh.default=e,xh}var Mh={},t1;function LM(){if(t1)return Mh;t1=1,Object.defineProperty(Mh,"__esModule",{value:!0});const t=Et(),e=Nt(),r=ns(),n=GO(),a={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:u}})=>(0,t.str)`must NOT have more than ${u} items`,params:({params:{len:u}})=>(0,t._)`{limit: ${u}}`},code(u){const{schema:l,parentSchema:d,it:m}=u,{prefixItems:y}=d;m.items=!0,!(0,e.alwaysValidSchema)(m,l)&&(y?(0,n.validateAdditionalItems)(u,y):u.ok((0,r.validateArray)(u)))}};return Mh.default=a,Mh}var Fh={},r1;function jM(){if(r1)return Fh;r1=1,Object.defineProperty(Fh,"__esModule",{value:!0});const t=Et(),e=Nt(),n={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:s,max:a}})=>a===void 0?(0,t.str)`must contain at least ${s} valid item(s)`:(0,t.str)`must contain at least ${s} and no more than ${a} valid item(s)`,params:({params:{min:s,max:a}})=>a===void 0?(0,t._)`{minContains: ${s}}`:(0,t._)`{minContains: ${s}, maxContains: ${a}}`},code(s){const{gen:a,schema:u,parentSchema:l,data:d,it:m}=s;let y,g;const{minContains:b,maxContains:S}=l;m.opts.next?(y=b===void 0?1:b,g=S):y=1;const E=a.const("len",(0,t._)`${d}.length`);if(s.setParams({min:y,max:g}),g===void 0&&y===0){(0,e.checkStrictMode)(m,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(g!==void 0&&y>g){(0,e.checkStrictMode)(m,'"minContains" > "maxContains" is always invalid'),s.fail();return}if((0,e.alwaysValidSchema)(m,u)){let C=(0,t._)`${E} >= ${y}`;g!==void 0&&(C=(0,t._)`${C} && ${E} <= ${g}`),s.pass(C);return}m.items=!0;const D=a.name("valid");g===void 0&&y===1?$(D,()=>a.if(D,()=>a.break())):y===0?(a.let(D,!0),g!==void 0&&a.if((0,t._)`${d}.length > 0`,O)):(a.let(D,!1),O()),s.result(D,()=>s.reset());function O(){const C=a.name("_valid"),B=a.let("count",0);$(C,()=>a.if(C,()=>P(B)))}function $(C,B){a.forRange("i",0,E,k=>{s.subschema({keyword:"contains",dataProp:k,dataPropType:e.Type.Num,compositeRule:!0},C),B()})}function P(C){a.code((0,t._)`${C}++`),g===void 0?a.if((0,t._)`${C} >= ${y}`,()=>a.assign(D,!0).break()):(a.if((0,t._)`${C} > ${g}`,()=>a.assign(D,!1).break()),y===1?a.assign(D,!0):a.if((0,t._)`${C} >= ${y}`,()=>a.assign(D,!0)))}}};return Fh.default=n,Fh}var Cv={},n1;function UM(){return n1||(n1=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.validateSchemaDeps=t.validatePropertyDeps=t.error=void 0;const e=Et(),r=Nt(),n=ns();t.error={message:({params:{property:d,depsCount:m,deps:y}})=>{const g=m===1?"property":"properties";return(0,e.str)`must have ${g} ${y} when property ${d} is present`},params:({params:{property:d,depsCount:m,deps:y,missingProperty:g}})=>(0,e._)`{property: ${d},
    missingProperty: ${g},
    depsCount: ${m},
    deps: ${y}}`};const s={keyword:"dependencies",type:"object",schemaType:"object",error:t.error,code(d){const[m,y]=a(d);u(d,m),l(d,y)}};function a({schema:d}){const m={},y={};for(const g in d){if(g==="__proto__")continue;const b=Array.isArray(d[g])?m:y;b[g]=d[g]}return[m,y]}function u(d,m=d.schema){const{gen:y,data:g,it:b}=d;if(Object.keys(m).length===0)return;const S=y.let("missing");for(const E in m){const D=m[E];if(D.length===0)continue;const O=(0,n.propertyInData)(y,g,E,b.opts.ownProperties);d.setParams({property:E,depsCount:D.length,deps:D.join(", ")}),b.allErrors?y.if(O,()=>{for(const $ of D)(0,n.checkReportMissingProp)(d,$)}):(y.if((0,e._)`${O} && (${(0,n.checkMissingProp)(d,D,S)})`),(0,n.reportMissingProp)(d,S),y.else())}}t.validatePropertyDeps=u;function l(d,m=d.schema){const{gen:y,data:g,keyword:b,it:S}=d,E=y.name("valid");for(const D in m)(0,r.alwaysValidSchema)(S,m[D])||(y.if((0,n.propertyInData)(y,g,D,S.opts.ownProperties),()=>{const O=d.subschema({keyword:b,schemaProp:D},E);d.mergeValidEvaluated(O,E)},()=>y.var(E,!0)),d.ok(E))}t.validateSchemaDeps=l,t.default=s})(Cv)),Cv}var Bh={},i1;function zM(){if(i1)return Bh;i1=1,Object.defineProperty(Bh,"__esModule",{value:!0});const t=Et(),e=Nt(),n={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:s})=>(0,t._)`{propertyName: ${s.propertyName}}`},code(s){const{gen:a,schema:u,data:l,it:d}=s;if((0,e.alwaysValidSchema)(d,u))return;const m=a.name("valid");a.forIn("key",l,y=>{s.setParams({propertyName:y}),s.subschema({keyword:"propertyNames",data:y,dataTypes:["string"],propertyName:y,compositeRule:!0},m),a.if((0,t.not)(m),()=>{s.error(!0),d.allErrors||a.break()})}),s.ok(m)}};return Bh.default=n,Bh}var Lh={},s1;function XO(){if(s1)return Lh;s1=1,Object.defineProperty(Lh,"__esModule",{value:!0});const t=ns(),e=Et(),r=Fa(),n=Nt(),a={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:u})=>(0,e._)`{additionalProperty: ${u.additionalProperty}}`},code(u){const{gen:l,schema:d,parentSchema:m,data:y,errsCount:g,it:b}=u;if(!g)throw new Error("ajv implementation error");const{allErrors:S,opts:E}=b;if(b.props=!0,E.removeAdditional!=="all"&&(0,n.alwaysValidSchema)(b,d))return;const D=(0,t.allSchemaProperties)(m.properties),O=(0,t.allSchemaProperties)(m.patternProperties);$(),u.ok((0,e._)`${g} === ${r.default.errors}`);function $(){l.forIn("key",y,x=>{!D.length&&!O.length?B(x):l.if(P(x),()=>B(x))})}function P(x){let U;if(D.length>8){const ie=(0,n.schemaRefOrVal)(b,m.properties,"properties");U=(0,t.isOwnProperty)(l,ie,x)}else D.length?U=(0,e.or)(...D.map(ie=>(0,e._)`${x} === ${ie}`)):U=e.nil;return O.length&&(U=(0,e.or)(U,...O.map(ie=>(0,e._)`${(0,t.usePattern)(u,ie)}.test(${x})`))),(0,e.not)(U)}function C(x){l.code((0,e._)`delete ${y}[${x}]`)}function B(x){if(E.removeAdditional==="all"||E.removeAdditional&&d===!1){C(x);return}if(d===!1){u.setParams({additionalProperty:x}),u.error(),S||l.break();return}if(typeof d=="object"&&!(0,n.alwaysValidSchema)(b,d)){const U=l.name("valid");E.removeAdditional==="failing"?(k(x,U,!1),l.if((0,e.not)(U),()=>{u.reset(),C(x)})):(k(x,U),S||l.if((0,e.not)(U),()=>l.break()))}}function k(x,U,ie){const Y={keyword:"additionalProperties",dataProp:x,dataPropType:n.Type.Str};ie===!1&&Object.assign(Y,{compositeRule:!0,createErrors:!1,allErrors:!1}),u.subschema(Y,U)}}};return Lh.default=a,Lh}var jh={},o1;function qM(){if(o1)return jh;o1=1,Object.defineProperty(jh,"__esModule",{value:!0});const t=Im(),e=ns(),r=Nt(),n=XO(),s={keyword:"properties",type:"object",schemaType:"object",code(a){const{gen:u,schema:l,parentSchema:d,data:m,it:y}=a;y.opts.removeAdditional==="all"&&d.additionalProperties===void 0&&n.default.code(new t.KeywordCxt(y,n.default,"additionalProperties"));const g=(0,e.allSchemaProperties)(l);for(const O of g)y.definedProperties.add(O);y.opts.unevaluated&&g.length&&y.props!==!0&&(y.props=r.mergeEvaluated.props(u,(0,r.toHash)(g),y.props));const b=g.filter(O=>!(0,r.alwaysValidSchema)(y,l[O]));if(b.length===0)return;const S=u.name("valid");for(const O of b)E(O)?D(O):(u.if((0,e.propertyInData)(u,m,O,y.opts.ownProperties)),D(O),y.allErrors||u.else().var(S,!0),u.endIf()),a.it.definedProperties.add(O),a.ok(S);function E(O){return y.opts.useDefaults&&!y.compositeRule&&l[O].default!==void 0}function D(O){a.subschema({keyword:"properties",schemaProp:O,dataProp:O},S)}}};return jh.default=s,jh}var Uh={},a1;function VM(){if(a1)return Uh;a1=1,Object.defineProperty(Uh,"__esModule",{value:!0});const t=ns(),e=Et(),r=Nt(),n=Nt(),s={keyword:"patternProperties",type:"object",schemaType:"object",code(a){const{gen:u,schema:l,data:d,parentSchema:m,it:y}=a,{opts:g}=y,b=(0,t.allSchemaProperties)(l),S=b.filter(B=>(0,r.alwaysValidSchema)(y,l[B]));if(b.length===0||S.length===b.length&&(!y.opts.unevaluated||y.props===!0))return;const E=g.strictSchema&&!g.allowMatchingProperties&&m.properties,D=u.name("valid");y.props!==!0&&!(y.props instanceof e.Name)&&(y.props=(0,n.evaluatedPropsToName)(u,y.props));const{props:O}=y;$();function $(){for(const B of b)E&&P(B),y.allErrors?C(B):(u.var(D,!0),C(B),u.if(D))}function P(B){for(const k in E)new RegExp(B).test(k)&&(0,r.checkStrictMode)(y,`property ${k} matches pattern ${B} (use allowMatchingProperties)`)}function C(B){u.forIn("key",d,k=>{u.if((0,e._)`${(0,t.usePattern)(a,B)}.test(${k})`,()=>{const x=S.includes(B);x||a.subschema({keyword:"patternProperties",schemaProp:B,dataProp:k,dataPropType:n.Type.Str},D),y.opts.unevaluated&&O!==!0?u.assign((0,e._)`${O}[${k}]`,!0):!x&&!y.allErrors&&u.if((0,e.not)(D),()=>u.break())})})}}};return Uh.default=s,Uh}var zh={},u1;function KM(){if(u1)return zh;u1=1,Object.defineProperty(zh,"__esModule",{value:!0});const t=Nt(),e={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(r){const{gen:n,schema:s,it:a}=r;if((0,t.alwaysValidSchema)(a,s)){r.fail();return}const u=n.name("valid");r.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},u),r.failResult(u,()=>r.reset(),()=>r.error())},error:{message:"must NOT be valid"}};return zh.default=e,zh}var qh={},c1;function WM(){if(c1)return qh;c1=1,Object.defineProperty(qh,"__esModule",{value:!0});const e={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:ns().validateUnion,error:{message:"must match a schema in anyOf"}};return qh.default=e,qh}var Vh={},l1;function HM(){if(l1)return Vh;l1=1,Object.defineProperty(Vh,"__esModule",{value:!0});const t=Et(),e=Nt(),n={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:s})=>(0,t._)`{passingSchemas: ${s.passing}}`},code(s){const{gen:a,schema:u,parentSchema:l,it:d}=s;if(!Array.isArray(u))throw new Error("ajv implementation error");if(d.opts.discriminator&&l.discriminator)return;const m=u,y=a.let("valid",!1),g=a.let("passing",null),b=a.name("_valid");s.setParams({passing:g}),a.block(S),s.result(y,()=>s.reset(),()=>s.error(!0));function S(){m.forEach((E,D)=>{let O;(0,e.alwaysValidSchema)(d,E)?a.var(b,!0):O=s.subschema({keyword:"oneOf",schemaProp:D,compositeRule:!0},b),D>0&&a.if((0,t._)`${b} && ${y}`).assign(y,!1).assign(g,(0,t._)`[${g}, ${D}]`).else(),a.if(b,()=>{a.assign(y,!0),a.assign(g,D),O&&s.mergeEvaluated(O,t.Name)})})}}};return Vh.default=n,Vh}var Kh={},f1;function QM(){if(f1)return Kh;f1=1,Object.defineProperty(Kh,"__esModule",{value:!0});const t=Nt(),e={keyword:"allOf",schemaType:"array",code(r){const{gen:n,schema:s,it:a}=r;if(!Array.isArray(s))throw new Error("ajv implementation error");const u=n.name("valid");s.forEach((l,d)=>{if((0,t.alwaysValidSchema)(a,l))return;const m=r.subschema({keyword:"allOf",schemaProp:d},u);r.ok(u),r.mergeEvaluated(m)})}};return Kh.default=e,Kh}var Wh={},d1;function YM(){if(d1)return Wh;d1=1,Object.defineProperty(Wh,"__esModule",{value:!0});const t=Et(),e=Nt(),n={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:a})=>(0,t.str)`must match "${a.ifClause}" schema`,params:({params:a})=>(0,t._)`{failingKeyword: ${a.ifClause}}`},code(a){const{gen:u,parentSchema:l,it:d}=a;l.then===void 0&&l.else===void 0&&(0,e.checkStrictMode)(d,'"if" without "then" and "else" is ignored');const m=s(d,"then"),y=s(d,"else");if(!m&&!y)return;const g=u.let("valid",!0),b=u.name("_valid");if(S(),a.reset(),m&&y){const D=u.let("ifClause");a.setParams({ifClause:D}),u.if(b,E("then",D),E("else",D))}else m?u.if(b,E("then")):u.if((0,t.not)(b),E("else"));a.pass(g,()=>a.error(!0));function S(){const D=a.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},b);a.mergeEvaluated(D)}function E(D,O){return()=>{const $=a.subschema({keyword:D},b);u.assign(g,b),a.mergeValidEvaluated($,g),O?u.assign(O,(0,t._)`${D}`):a.setParams({ifClause:D})}}}};function s(a,u){const l=a.schema[u];return l!==void 0&&!(0,e.alwaysValidSchema)(a,l)}return Wh.default=n,Wh}var Hh={},h1;function GM(){if(h1)return Hh;h1=1,Object.defineProperty(Hh,"__esModule",{value:!0});const t=Nt(),e={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:r,parentSchema:n,it:s}){n.if===void 0&&(0,t.checkStrictMode)(s,`"${r}" without "if" is ignored`)}};return Hh.default=e,Hh}var p1;function JM(){if(p1)return Th;p1=1,Object.defineProperty(Th,"__esModule",{value:!0});const t=GO(),e=BM(),r=JO(),n=LM(),s=jM(),a=UM(),u=zM(),l=XO(),d=qM(),m=VM(),y=KM(),g=WM(),b=HM(),S=QM(),E=YM(),D=GM();function O($=!1){const P=[y.default,g.default,b.default,S.default,E.default,D.default,u.default,l.default,a.default,d.default,m.default];return $?P.push(e.default,n.default):P.push(t.default,r.default),P.push(s.default),P}return Th.default=O,Th}var Qh={},Yh={},m1;function XM(){if(m1)return Yh;m1=1,Object.defineProperty(Yh,"__esModule",{value:!0});const t=Et(),r={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:n})=>(0,t.str)`must match format "${n}"`,params:({schemaCode:n})=>(0,t._)`{format: ${n}}`},code(n,s){const{gen:a,data:u,$data:l,schema:d,schemaCode:m,it:y}=n,{opts:g,errSchemaPath:b,schemaEnv:S,self:E}=y;if(!g.validateFormats)return;l?D():O();function D(){const $=a.scopeValue("formats",{ref:E.formats,code:g.code.formats}),P=a.const("fDef",(0,t._)`${$}[${m}]`),C=a.let("fType"),B=a.let("format");a.if((0,t._)`typeof ${P} == "object" && !(${P} instanceof RegExp)`,()=>a.assign(C,(0,t._)`${P}.type || "string"`).assign(B,(0,t._)`${P}.validate`),()=>a.assign(C,(0,t._)`"string"`).assign(B,P)),n.fail$data((0,t.or)(k(),x()));function k(){return g.strictSchema===!1?t.nil:(0,t._)`${m} && !${B}`}function x(){const U=S.$async?(0,t._)`(${P}.async ? await ${B}(${u}) : ${B}(${u}))`:(0,t._)`${B}(${u})`,ie=(0,t._)`(typeof ${B} == "function" ? ${U} : ${B}.test(${u}))`;return(0,t._)`${B} && ${B} !== true && ${C} === ${s} && !${ie}`}}function O(){const $=E.formats[d];if(!$){k();return}if($===!0)return;const[P,C,B]=x($);P===s&&n.pass(U());function k(){if(g.strictSchema===!1){E.logger.warn(ie());return}throw new Error(ie());function ie(){return`unknown format "${d}" ignored in schema at path "${b}"`}}function x(ie){const Y=ie instanceof RegExp?(0,t.regexpCode)(ie):g.code.formats?(0,t._)`${g.code.formats}${(0,t.getProperty)(d)}`:void 0,_e=a.scopeValue("formats",{key:d,ref:ie,code:Y});return typeof ie=="object"&&!(ie instanceof RegExp)?[ie.type||"string",ie.validate,(0,t._)`${_e}.validate`]:["string",ie,_e]}function U(){if(typeof $=="object"&&!($ instanceof RegExp)&&$.async){if(!S.$async)throw new Error("async format in sync schema");return(0,t._)`await ${B}(${u})`}return typeof C=="function"?(0,t._)`${B}(${u})`:(0,t._)`${B}.test(${u})`}}}};return Yh.default=r,Yh}var y1;function ZM(){if(y1)return Qh;y1=1,Object.defineProperty(Qh,"__esModule",{value:!0});const e=[XM().default];return Qh.default=e,Qh}var _u={},v1;function eF(){return v1||(v1=1,Object.defineProperty(_u,"__esModule",{value:!0}),_u.contentVocabulary=_u.metadataVocabulary=void 0,_u.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],_u.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]),_u}var g1;function tF(){if(g1)return gh;g1=1,Object.defineProperty(gh,"__esModule",{value:!0});const t=OM(),e=FM(),r=JM(),n=ZM(),s=eF(),a=[t.default,e.default,(0,r.default)(),n.default,s.metadataVocabulary,s.contentVocabulary];return gh.default=a,gh}var Gh={},tf={},_1;function rF(){if(_1)return tf;_1=1,Object.defineProperty(tf,"__esModule",{value:!0}),tf.DiscrError=void 0;var t;return(function(e){e.Tag="tag",e.Mapping="mapping"})(t||(tf.DiscrError=t={})),tf}var w1;function nF(){if(w1)return Gh;w1=1,Object.defineProperty(Gh,"__esModule",{value:!0});const t=Et(),e=rF(),r=S0(),n=Om(),s=Nt(),u={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:l,tagName:d}})=>l===e.DiscrError.Tag?`tag "${d}" must be string`:`value of tag "${d}" must be in oneOf`,params:({params:{discrError:l,tag:d,tagName:m}})=>(0,t._)`{error: ${l}, tag: ${m}, tagValue: ${d}}`},code(l){const{gen:d,data:m,schema:y,parentSchema:g,it:b}=l,{oneOf:S}=g;if(!b.opts.discriminator)throw new Error("discriminator: requires discriminator option");const E=y.propertyName;if(typeof E!="string")throw new Error("discriminator: requires propertyName");if(y.mapping)throw new Error("discriminator: mapping is not supported");if(!S)throw new Error("discriminator: requires oneOf keyword");const D=d.let("valid",!1),O=d.const("tag",(0,t._)`${m}${(0,t.getProperty)(E)}`);d.if((0,t._)`typeof ${O} == "string"`,()=>$(),()=>l.error(!1,{discrError:e.DiscrError.Tag,tag:O,tagName:E})),l.ok(D);function $(){const B=C();d.if(!1);for(const k in B)d.elseIf((0,t._)`${O} === ${k}`),d.assign(D,P(B[k]));d.else(),l.error(!1,{discrError:e.DiscrError.Mapping,tag:O,tagName:E}),d.endIf()}function P(B){const k=d.name("valid"),x=l.subschema({keyword:"oneOf",schemaProp:B},k);return l.mergeEvaluated(x,t.Name),k}function C(){var B;const k={},x=ie(g);let U=!0;for(let le=0;le<S.length;le++){let me=S[le];if(me?.$ref&&!(0,s.schemaHasRulesButRef)(me,b.self.RULES)){const Pe=me.$ref;if(me=r.resolveRef.call(b.self,b.schemaEnv.root,b.baseId,Pe),me instanceof r.SchemaEnv&&(me=me.schema),me===void 0)throw new n.default(b.opts.uriResolver,b.baseId,Pe)}const ke=(B=me?.properties)===null||B===void 0?void 0:B[E];if(typeof ke!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${E}"`);U=U&&(x||ie(me)),Y(ke,le)}if(!U)throw new Error(`discriminator: "${E}" must be required`);return k;function ie({required:le}){return Array.isArray(le)&&le.includes(E)}function Y(le,me){if(le.const)_e(le.const,me);else if(le.enum)for(const ke of le.enum)_e(ke,me);else throw new Error(`discriminator: "properties/${E}" must have "const" or "enum"`)}function _e(le,me){if(typeof le!="string"||le in k)throw new Error(`discriminator: "${E}" values must be unique strings`);k[le]=me}}}};return Gh.default=u,Gh}const iF="http://json-schema.org/draft-07/schema#",sF="http://json-schema.org/draft-07/schema#",oF="Core schema meta-schema",aF={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},uF=["object","boolean"],cF={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},lF={$schema:iF,$id:sF,title:oF,definitions:aF,type:uF,properties:cF,default:!0};var b1;function ZO(){return b1||(b1=1,(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.MissingRefError=e.ValidationError=e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=e.Ajv=void 0;const r=SM(),n=tF(),s=nF(),a=lF,u=["/properties"],l="http://json-schema.org/draft-07/schema";class d extends r.default{_addVocabularies(){super._addVocabularies(),n.default.forEach(E=>this.addVocabulary(E)),this.opts.discriminator&&this.addKeyword(s.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const E=this.opts.$data?this.$dataMetaSchema(a,u):a;this.addMetaSchema(E,l,!1),this.refs["http://json-schema.org/schema"]=l}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(l)?l:void 0)}}e.Ajv=d,t.exports=e=d,t.exports.Ajv=d,Object.defineProperty(e,"__esModule",{value:!0}),e.default=d;var m=Im();Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return m.KeywordCxt}});var y=Et();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return y._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return y.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return y.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return y.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return y.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return y.CodeGen}});var g=b0();Object.defineProperty(e,"ValidationError",{enumerable:!0,get:function(){return g.default}});var b=Om();Object.defineProperty(e,"MissingRefError",{enumerable:!0,get:function(){return b.default}})})(hh,hh.exports)),hh.exports}var fF=ZO();const dF=sl(fF);var Jh={exports:{}},$v={},S1;function hF(){return S1||(S1=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.formatNames=t.fastFormats=t.fullFormats=void 0;function e(le,me){return{validate:le,compare:me}}t.fullFormats={date:e(a,u),time:e(d(!0),m),"date-time":e(b(!0),S),"iso-time":e(d(),y),"iso-date-time":e(b(),E),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:$,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:_e,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:C,int32:{type:"number",validate:x},int64:{type:"number",validate:U},float:{type:"number",validate:ie},double:{type:"number",validate:ie},password:!0,binary:!0},t.fastFormats={...t.fullFormats,date:e(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,u),time:e(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,m),"date-time":e(/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,S),"iso-time":e(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,y),"iso-date-time":e(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,E),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i},t.formatNames=Object.keys(t.fullFormats);function r(le){return le%4===0&&(le%100!==0||le%400===0)}const n=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,s=[0,31,28,31,30,31,30,31,31,30,31,30,31];function a(le){const me=n.exec(le);if(!me)return!1;const ke=+me[1],Pe=+me[2],We=+me[3];return Pe>=1&&Pe<=12&&We>=1&&We<=(Pe===2&&r(ke)?29:s[Pe])}function u(le,me){if(le&&me)return le>me?1:le<me?-1:0}const l=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function d(le){return function(ke){const Pe=l.exec(ke);if(!Pe)return!1;const We=+Pe[1],nt=+Pe[2],et=+Pe[3],Ee=Pe[4],je=Pe[5]==="-"?-1:1,F=+(Pe[6]||0),j=+(Pe[7]||0);if(F>23||j>59||le&&!Ee)return!1;if(We<=23&&nt<=59&&et<60)return!0;const ae=nt-j*je,Q=We-F*je-(ae<0?1:0);return(Q===23||Q===-1)&&(ae===59||ae===-1)&&et<61}}function m(le,me){if(!(le&&me))return;const ke=new Date("2020-01-01T"+le).valueOf(),Pe=new Date("2020-01-01T"+me).valueOf();if(ke&&Pe)return ke-Pe}function y(le,me){if(!(le&&me))return;const ke=l.exec(le),Pe=l.exec(me);if(ke&&Pe)return le=ke[1]+ke[2]+ke[3],me=Pe[1]+Pe[2]+Pe[3],le>me?1:le<me?-1:0}const g=/t|\s/i;function b(le){const me=d(le);return function(Pe){const We=Pe.split(g);return We.length===2&&a(We[0])&&me(We[1])}}function S(le,me){if(!(le&&me))return;const ke=new Date(le).valueOf(),Pe=new Date(me).valueOf();if(ke&&Pe)return ke-Pe}function E(le,me){if(!(le&&me))return;const[ke,Pe]=le.split(g),[We,nt]=me.split(g),et=u(ke,We);if(et!==void 0)return et||m(Pe,nt)}const D=/\/|:/,O=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function $(le){return D.test(le)&&O.test(le)}const P=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function C(le){return P.lastIndex=0,P.test(le)}const B=-2147483648,k=2**31-1;function x(le){return Number.isInteger(le)&&le<=k&&le>=B}function U(le){return Number.isInteger(le)}function ie(){return!0}const Y=/[^\\]\\Z/;function _e(le){if(Y.test(le))return!1;try{return new RegExp(le),!0}catch{return!1}}})($v)),$v}var Av={},E1;function pF(){return E1||(E1=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.formatLimitDefinition=void 0;const e=ZO(),r=Et(),n=r.operators,s={formatMaximum:{okStr:"<=",ok:n.LTE,fail:n.GT},formatMinimum:{okStr:">=",ok:n.GTE,fail:n.LT},formatExclusiveMaximum:{okStr:"<",ok:n.LT,fail:n.GTE},formatExclusiveMinimum:{okStr:">",ok:n.GT,fail:n.LTE}},a={message:({keyword:l,schemaCode:d})=>(0,r.str)`should be ${s[l].okStr} ${d}`,params:({keyword:l,schemaCode:d})=>(0,r._)`{comparison: ${s[l].okStr}, limit: ${d}}`};t.formatLimitDefinition={keyword:Object.keys(s),type:"string",schemaType:"string",$data:!0,error:a,code(l){const{gen:d,data:m,schemaCode:y,keyword:g,it:b}=l,{opts:S,self:E}=b;if(!S.validateFormats)return;const D=new e.KeywordCxt(b,E.RULES.all.format.definition,"format");D.$data?O():$();function O(){const C=d.scopeValue("formats",{ref:E.formats,code:S.code.formats}),B=d.const("fmt",(0,r._)`${C}[${D.schemaCode}]`);l.fail$data((0,r.or)((0,r._)`typeof ${B} != "object"`,(0,r._)`${B} instanceof RegExp`,(0,r._)`typeof ${B}.compare != "function"`,P(B)))}function $(){const C=D.schema,B=E.formats[C];if(!B||B===!0)return;if(typeof B!="object"||B instanceof RegExp||typeof B.compare!="function")throw new Error(`"${g}": format "${C}" does not define "compare" function`);const k=d.scopeValue("formats",{key:C,ref:B,code:S.code.formats?(0,r._)`${S.code.formats}${(0,r.getProperty)(C)}`:void 0});l.fail$data(P(k))}function P(C){return(0,r._)`${C}.compare(${m}, ${y}) ${s[g].fail} 0`}},dependencies:["format"]};const u=l=>(l.addKeyword(t.formatLimitDefinition),l);t.default=u})(Av)),Av}var I1;function mF(){return I1||(I1=1,(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});const r=hF(),n=pF(),s=Et(),a=new s.Name("fullFormats"),u=new s.Name("fastFormats"),l=(m,y={keywords:!0})=>{if(Array.isArray(y))return d(m,y,r.fullFormats,a),m;const[g,b]=y.mode==="fast"?[r.fastFormats,u]:[r.fullFormats,a],S=y.formats||r.formatNames;return d(m,S,g,b),y.keywords&&(0,n.default)(m),m};l.get=(m,y="full")=>{const b=(y==="fast"?r.fastFormats:r.fullFormats)[m];if(!b)throw new Error(`Unknown format "${m}"`);return b};function d(m,y,g,b){var S,E;(S=(E=m.opts.code).formats)!==null&&S!==void 0||(E.formats=(0,s._)`require("ajv-formats/dist/formats").${b}`);for(const D of y)m.addFormat(D,g[D])}t.exports=e=l,Object.defineProperty(e,"__esModule",{value:!0}),e.default=l})(Jh,Jh.exports)),Jh.exports}var yF=mF();const vF=sl(yF);var fn;function gF(){return fn||(fn=new dF({strict:!0}),fn.addKeyword("version"),fn.addKeyword("keyCompression"),fn.addKeyword("primaryKey"),fn.addKeyword("indexes"),fn.addKeyword("encrypted"),fn.addKeyword("final"),fn.addKeyword("sharding"),fn.addKeyword("internalIndexes"),fn.addKeyword("attachments"),fn.addKeyword("ref"),fn.addKeyword("crdt"),vF(fn)),fn}function _F(t){var e=gF().compile(t);return r=>{var n=e(r);return n?[]:e.errors}}var wF=Sx(_F,"ajv");function bF(t){let{name:e,options:r,storage:n,...s}=t;if(!n)switch(r.storageType){case"dexie":n=Wx(r.storageOptions);break;case"memory":n=uS(r.storageOptions);break;default:n=uS(r.storageOptions);break}return Fn.isDevMode()&&(n=wF({storage:n})),{name:e,storage:n,options:r,...s}}const SF=/^[v^~<>=]*?(\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+))?(?:-([\da-z\-]+(?:\.[\da-z\-]+)*))?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i,O1=t=>{if(typeof t!="string")throw new TypeError("Invalid argument expected string");const e=t.match(SF);if(!e)throw new Error(`Invalid argument not valid semver ('${t}' received)`);return e.shift(),e},k1=t=>t==="*"||t==="x"||t==="X",P1=t=>{const e=parseInt(t,10);return isNaN(e)?t:e},EF=(t,e)=>typeof t!=typeof e?[String(t),String(e)]:[t,e],IF=(t,e)=>{if(k1(t)||k1(e))return 0;const[r,n]=EF(P1(t),P1(e));return r>n?1:r<n?-1:0},D1=(t,e)=>{for(let r=0;r<Math.max(t.length,e.length);r++){const n=IF(t[r]||"0",e[r]||"0");if(n!==0)return n}return 0},OF=(t,e)=>{const r=O1(t),n=O1(e),s=r.pop(),a=n.pop(),u=D1(r,n);return u!==0?u:s&&a?D1(s.split("."),a.split(".")):s||a?s?-1:1:0},kF=(t,e,r)=>{PF(r);const n=OF(t,e);return ek[r].includes(n)},ek={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1],"!=":[-1,1]},R1=Object.keys(ek),PF=t=>{if(R1.indexOf(t)===-1)throw new Error(`Invalid operator, expected one of ${R1.join("|")}`)},{logger:Is,getDefaultPreparedQuery:DF}=Fn,C1="storage-token|storageToken",I0=async t=>{let e;try{const n=await jO()(t);if(n.ok)e=await n.json();else throw new Error(`Failed to fetch schema from "${t}", status: ${n.status}`)}catch{throw new Error(`Failed to fetch schema from "${t}"`)}return e},RF=async t=>{try{const e={};for(const r in t){const n=t[r];!n.schema&&n.options?.schemaUrl&&(n.schema=await I0(n.options.schemaUrl)),e[n.name]=n}return e}catch(e){throw new Error(e.message)}},CF=async(t,e)=>{let r;const s=await jO()(t);if(s.ok)r=await s.json();else throw new Error(`Failed to fetch db dump from "${t}", status: ${s.status}`);if(!e||!Object.keys(e).length)throw new Error("collections must be initialized before importing");for(const a of r.collections){const u=e[a.name];if(u)a.schemaHash=await u.schema.hash;else throw new Error("no such collection as provided in dump")}return r},$F=async(t,e,r)=>{let n={};if(t.name!=="dexie")return;const s=(await e.internals)?.dexieTable;if(n=(await s.get(C1))?.data,!n?.rxdbVersion||kF(r,n.rxdbVersion,">"))try{await s.update(C1,{data:{...n,rxdbVersion:r}}),Is.log("prepare-plugin: migrated internal storage to",r)}catch{throw new Error("prepare-plugin: unable to migrate internal storage")}},AF=async({database:t,creator:e})=>{const r=await SO(t);Is.log("prepare-plugin: hook:createRxDatabase:after");const{storage:n,internalStore:s,rxdbVersion:a}=t;if(await $F(n,s,a),!(!e.options?.dumpPath||!r))try{const u=await CF(e.options.dumpPath,t.collections);await t.importJSON(u),Is.log(`prepare-plugin: imported dump for db "${t.name}"`)}catch(u){Is.log("prepare-plugin: imported dump error",u)}},NF=async t=>{if(typeof t=="string"){const e=await I0(t);if(!e)throw new Error(`Failed to fetch schema from "${t}"`);t=e}},TF=async({collection:t,creator:e})=>{Is.log("prepare-plugin: hook:createRxCollection:before");const r=await t.getMetadata();Is.log("prepare-plugin: hook:createRxCollection:before",r);const n=e.options?.initialDocs||[],s=await l();if(!n.length)return;if(s||!r.isFirstTimeInstantiated){if(!e.options?.recreate||e.options?.replication)return;Is.log(`prepare-plugin: collection "${t.name}" already has ${s} docs (including _deleted), but recreate option is set`)}const a=await t.schema.hash,u={name:t.name,schemaHash:a,docs:n};try{const{success:d,error:m}=await t.importJSON(u),y=await l();Is.log(`prepare-plugin: imported ${d.length} docs for collection "${t.name}", errors count ${m.length}, current docs count ${y}`),Is.table(d)}catch(d){Is.log("prepare-plugin: imported dump error",d)}return;async function l(){const{count:d}=await t.storageInstance.count(DF()).catch(()=>({count:0}));return d}},xF={name:"prepare-plugin",rxdb:!0,prototypes:{RxDatabase:t=>{Object.assign(t,{fetchSchema:I0})},RxCollection:t=>{Object.assign(t,{getMetadata:async function(){const r=await SO(this.database),n=await p0(this.database.internalStore),{id:s,data:a,_meta:u,_rev:l}=n.filter(d=>d.data.name===this.name).at(0)||{};return{id:s||this.name,databaseName:this.database.name,collectionName:a?.name||this.name,storageName:this.storageInstance.originalStorageInstance.storage.name,last_modified:u?.lwt?Math.floor(u?.lwt):Date.now(),rev:l?Number(l?.at(0)):1,isFirstTimeInstantiated:r}}})}},hooks:{createRxDatabase:{after:AF},preCreateRxSchema:{before:NF},createRxCollection:{after:TF}}};function tk(t,e){const r={};if(Array.isArray(e))for(const n of e){const s=Object.getOwnPropertyDescriptor(t,n);s?.enumerable&&Object.defineProperty(r,n,s)}else for(const n of Reflect.ownKeys(t)){const s=Object.getOwnPropertyDescriptor(t,n);if(s.enumerable){const a=t[n];e(n,a,t)&&Object.defineProperty(r,n,s)}}return r}const rk="%[a-f0-9]{2}",$1=new RegExp("("+rk+")|([^%]+?)","gi"),A1=new RegExp("("+rk+")+","gi");function Ig(t,e){try{return[decodeURIComponent(t.join(""))]}catch{}if(t.length===1)return t;e=e||1;const r=t.slice(0,e),n=t.slice(e);return Array.prototype.concat.call([],Ig(r),Ig(n))}function MF(t){try{return decodeURIComponent(t)}catch{let e=t.match($1)||[];for(let r=1;r<e.length;r++)t=Ig(e,r).join(""),e=t.match($1)||[];return t}}function FF(t){const e={"%FE%FF":"","%FF%FE":""};let r=A1.exec(t);for(;r;){try{e[r[0]]=decodeURIComponent(r[0])}catch{const s=MF(r[0]);s!==r[0]&&(e[r[0]]=s)}r=A1.exec(t)}e["%C2"]="";const n=Object.keys(e);for(const s of n)t=t.replace(new RegExp(s,"g"),e[s]);return t}function BF(t){if(typeof t!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return decodeURIComponent(t)}catch{return FF(t)}}function nk(t,e){if(!(typeof t=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(t===""||e==="")return[];const r=t.indexOf(e);return r===-1?[]:[t.slice(0,r),t.slice(r+e.length)]}const LF=t=>t==null,jF=t=>encodeURIComponent(t).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),Og=Symbol("encodeFragmentIdentifier");function UF(t){switch(t.arrayFormat){case"index":return e=>(r,n)=>{const s=r.length;return n===void 0||t.skipNull&&n===null||t.skipEmptyString&&n===""?r:n===null?[...r,[Cr(e,t),"[",s,"]"].join("")]:[...r,[Cr(e,t),"[",Cr(s,t),"]=",Cr(n,t)].join("")]};case"bracket":return e=>(r,n)=>n===void 0||t.skipNull&&n===null||t.skipEmptyString&&n===""?r:n===null?[...r,[Cr(e,t),"[]"].join("")]:[...r,[Cr(e,t),"[]=",Cr(n,t)].join("")];case"colon-list-separator":return e=>(r,n)=>n===void 0||t.skipNull&&n===null||t.skipEmptyString&&n===""?r:n===null?[...r,[Cr(e,t),":list="].join("")]:[...r,[Cr(e,t),":list=",Cr(n,t)].join("")];case"comma":case"separator":case"bracket-separator":{const e=t.arrayFormat==="bracket-separator"?"[]=":"=";return r=>(n,s)=>s===void 0||t.skipNull&&s===null||t.skipEmptyString&&s===""?n:(s=s===null?"":s,n.length===0?[[Cr(r,t),e,Cr(s,t)].join("")]:[[n,Cr(s,t)].join(t.arrayFormatSeparator)])}default:return e=>(r,n)=>n===void 0||t.skipNull&&n===null||t.skipEmptyString&&n===""?r:n===null?[...r,Cr(e,t)]:[...r,[Cr(e,t),"=",Cr(n,t)].join("")]}}function zF(t){let e;switch(t.arrayFormat){case"index":return(r,n,s)=>{if(e=/\[(\d*)]$/.exec(r),r=r.replace(/\[\d*]$/,""),!e){s[r]=n;return}s[r]===void 0&&(s[r]={}),s[r][e[1]]=n};case"bracket":return(r,n,s)=>{if(e=/(\[])$/.exec(r),r=r.replace(/\[]$/,""),!e){s[r]=n;return}if(s[r]===void 0){s[r]=[n];return}s[r]=[...s[r],n]};case"colon-list-separator":return(r,n,s)=>{if(e=/(:list)$/.exec(r),r=r.replace(/:list$/,""),!e){s[r]=n;return}if(s[r]===void 0){s[r]=[n];return}s[r]=[...s[r],n]};case"comma":case"separator":return(r,n,s)=>{const a=typeof n=="string"&&n.includes(t.arrayFormatSeparator),u=typeof n=="string"&&!a&&So(n,t).includes(t.arrayFormatSeparator);n=u?So(n,t):n;const l=a||u?n.split(t.arrayFormatSeparator).map(d=>So(d,t)):n===null?n:So(n,t);s[r]=l};case"bracket-separator":return(r,n,s)=>{const a=/(\[])$/.test(r);if(r=r.replace(/\[]$/,""),!a){s[r]=n&&So(n,t);return}const u=n===null?[]:n.split(t.arrayFormatSeparator).map(l=>So(l,t));if(s[r]===void 0){s[r]=u;return}s[r]=[...s[r],...u]};default:return(r,n,s)=>{if(s[r]===void 0){s[r]=n;return}s[r]=[...[s[r]].flat(),n]}}}function ik(t){if(typeof t!="string"||t.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function Cr(t,e){return e.encode?e.strict?jF(t):encodeURIComponent(t):t}function So(t,e){return e.decode?BF(t):t}function sk(t){return Array.isArray(t)?t.sort():typeof t=="object"?sk(Object.keys(t)).sort((e,r)=>Number(e)-Number(r)).map(e=>t[e]):t}function ok(t){const e=t.indexOf("#");return e!==-1&&(t=t.slice(0,e)),t}function qF(t){let e="";const r=t.indexOf("#");return r!==-1&&(e=t.slice(r)),e}function N1(t,e){return e.parseNumbers&&!Number.isNaN(Number(t))&&typeof t=="string"&&t.trim()!==""?t=Number(t):e.parseBooleans&&t!==null&&(t.toLowerCase()==="true"||t.toLowerCase()==="false")&&(t=t.toLowerCase()==="true"),t}function O0(t){t=ok(t);const e=t.indexOf("?");return e===-1?"":t.slice(e+1)}function k0(t,e){e={decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1,...e},ik(e.arrayFormatSeparator);const r=zF(e),n=Object.create(null);if(typeof t!="string"||(t=t.trim().replace(/^[?#&]/,""),!t))return n;for(const s of t.split("&")){if(s==="")continue;const a=e.decode?s.replace(/\+/g," "):s;let[u,l]=nk(a,"=");u===void 0&&(u=a),l=l===void 0?null:["comma","separator","bracket-separator"].includes(e.arrayFormat)?l:So(l,e),r(So(u,e),l,n)}for(const[s,a]of Object.entries(n))if(typeof a=="object"&&a!==null)for(const[u,l]of Object.entries(a))a[u]=N1(l,e);else n[s]=N1(a,e);return e.sort===!1?n:(e.sort===!0?Object.keys(n).sort():Object.keys(n).sort(e.sort)).reduce((s,a)=>{const u=n[a];return s[a]=u&&typeof u=="object"&&!Array.isArray(u)?sk(u):u,s},Object.create(null))}function ak(t,e){if(!t)return"";e={encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:",",...e},ik(e.arrayFormatSeparator);const r=u=>e.skipNull&&LF(t[u])||e.skipEmptyString&&t[u]==="",n=UF(e),s={};for(const[u,l]of Object.entries(t))r(u)||(s[u]=l);const a=Object.keys(s);return e.sort!==!1&&a.sort(e.sort),a.map(u=>{const l=t[u];return l===void 0?"":l===null?Cr(u,e):Array.isArray(l)?l.length===0&&e.arrayFormat==="bracket-separator"?Cr(u,e)+"[]":l.reduce(n(u),[]).join("&"):Cr(u,e)+"="+Cr(l,e)}).filter(u=>u.length>0).join("&")}function uk(t,e){e={decode:!0,...e};let[r,n]=nk(t,"#");return r===void 0&&(r=t),{url:r?.split("?")?.[0]??"",query:k0(O0(t),e),...e&&e.parseFragmentIdentifier&&n?{fragmentIdentifier:So(n,e)}:{}}}function ck(t,e){e={encode:!0,strict:!0,[Og]:!0,...e};const r=ok(t.url).split("?")[0]||"",n=O0(t.url),s={...k0(n,{sort:!1}),...t.query};let a=ak(s,e);a&&(a=`?${a}`);let u=qF(t.url);if(t.fragmentIdentifier){const l=new URL(r);l.hash=t.fragmentIdentifier,u=e[Og]?l.hash:`#${t.fragmentIdentifier}`}return`${r}${a}${u}`}function lk(t,e,r){r={parseFragmentIdentifier:!0,[Og]:!1,...r};const{url:n,query:s,fragmentIdentifier:a}=uk(t,r);return ck({url:n,query:tk(s,e),fragmentIdentifier:a},r)}function VF(t,e,r){const n=Array.isArray(e)?s=>!e.includes(s):(s,a)=>!e(s,a);return lk(t,n,r)}const Nv=Object.freeze(Object.defineProperty({__proto__:null,exclude:VF,extract:O0,parse:k0,parseUrl:uk,pick:lk,stringify:ak,stringifyUrl:ck},Symbol.toStringTag,{value:"Module"})),{keys:T1,isEmpty:x1,isNullOrUndefined:kg}=Fn,KF=({selector:t,sort:e,limit:r,skip:n},s)=>{const a=T1(s.jsonSchema.properties);return x1(t)||(t=tk(t,u=>!u.startsWith("$")&&!u.includes(".")&&a.includes(u))),x1(e)||(e=e?.filter(u=>a.includes(T1(u)[0]))),(kg(r)||isNaN(r))&&(r=void 0),(kg(n)||isNaN(n))&&(n=void 0),{selector:t,sort:e,limit:r,skip:n}},M1=(t,e)=>{t=Nv.extract(t);const r=Nv.pick(t,["selector","sort","limit","skip"]),n=Nv.parse(r,{parseNumbers:!0,parseBooleans:!0}),{selector:s,sort:a,limit:u,skip:l}=n,d=s?JSON.parse(s):void 0,m=a?JSON.parse(a):void 0;return KF({selector:d,sort:m,limit:u,skip:l},e)},Xh=t=>kg(t)?"":JSON.stringify(t),{logger:F1,compactObject:WF}=Fn,HF={name:"query-params-plugin",rxdb:!0,prototypes:{RxCollection:t=>{const e=new Ii({});let r=!1,n,s=!1,a="",u=()=>Promise.resolve(!1);function l(y=iI,g){r=!!this.options?.useQueryParams,n=this.schema,!(!r||s)&&(u=g,y.pipe(Ia(),rg(b=>{a=b}),ur(b=>M1(b,n)),XE(b=>(F1.log("Error in parsing url to mango query",b),e)),rg(b=>{F1.log("queryParams",b)}),aI(()=>!this.closed)).subscribe(e),s=!0)}function d(y){if(!r)return;const{selector:g,sort:b,limit:S,skip:E}=y,D={limit:S,skip:E};g&&(D.selector=Xh(y.selector)),b&&(D.sort=Xh(y.sort)),u(D)}function m(y){if(!r)return;const g=M1(a,n),b={selector:Xh(y.selector||g.selector),sort:Xh(y.sort||g.sort),limit:y.limit||g.limit,skip:y.skip||g.skip};u(WF(b))}Object.assign(t,{queryParams:{$:e.asObservable(),get:()=>e.getValue(),set:d,patch:m}},{queryParamsInit:l})}},hooks:{createRxCollection:{}}};var P0={minimumDeletedTime:1e3*60*60*24*31,minimumCollectionAge:1e3*60,runEach:1e3*60*5,awaitReplicationsInSync:!0,waitForLeadership:!0},Tv=pm;async function QF(t){var e=t.database,r=Object.assign({},P0,e.cleanupPolicy?e.cleanupPolicy:{});await fk(t,r),!t.closed&&(await D0(t,r),await YF(t,r))}async function fk(t,e){await t.promiseWait(e.minimumCollectionAge),!t.closed&&t.database.multiInstance&&e.waitForLeadership&&await t.database.waitForLeadership()}async function D0(t,e){for(var r=t.database,n=t.storageInstance,s=!1;!s&&!t.closed;){if(e.awaitReplicationsInSync){var a=nn(Np,t,()=>[]);await Promise.all(a.map(u=>{if(!u.isStopped())return u.awaitInSync()}))}if(t.closed)return;Tv=Tv.then(async()=>{if(t.closed)return!0;await r.requestIdlePromise();var u=[];u.push(n.cleanup(e.minimumDeletedTime));var l=nn(Np,t,()=>[]);for(var d of l){var m=d.metaInstance;m&&u.push(m.cleanup(e.minimumDeletedTime))}var y=(await Promise.all(u)).find(g=>!g);return!y}),s=await Tv}await Ea("postCleanup",{collectionName:t.name,databaseName:r.name})}async function YF(t,e){for(;!t.closed;){if(await Do(t.eventBulks$).catch(()=>{}),await t.promiseWait(e.runEach),t.closed)return;await D0(t,e)}}var xv=pm;async function GF(t){var e=t.collection,r=e.database,n=Object.assign({},P0,r.cleanupPolicy?r.cleanupPolicy:{});await fk(e,n),!e.closed&&(await dk(t,n),await JF(t,n))}async function dk(t,e){for(var r=t.collection,n=r.database,s=!1;!s&&!r.closed;){if(e.awaitReplicationsInSync){var a=Np.get(r);a&&await Promise.all(a.map(u=>{if(!u.isStopped())return u.awaitInSync()}))}if(r.closed)return;xv=xv.then(async()=>r.closed?!0:(await n.requestIdlePromise(),t._cleanup())),s=await xv}}async function JF(t,e){for(var r=t.collection;!r.closed;){if(await Do(r.eventBulks$).catch(()=>{}),await r.promiseWait(e.runEach),r.closed)return;await dk(t,e)}}var XF={name:"cleanup",rxdb:!0,prototypes:{RxCollection:t=>{t.cleanup=async function(e){var r=Object.assign({},P0,this.database.cleanupPolicy?this.database.cleanupPolicy:{});typeof e>"u"&&(e=r.minimumDeletedTime),await D0(this,r)}}},hooks:{createRxCollection:{after:t=>{QF(t.collection)}},createRxState:{after:t=>{GF(t.state)}}}};function ZF(t){var e={name:this.name,instanceToken:this.token,collections:[]},r=Object.keys(this.collections).filter(n=>!t||t.includes(n)).filter(n=>n.charAt(0)!=="_").map(n=>this.collections[n]);return Promise.all(r.map(n=>n.exportJSON())).then(n=>(e.collections=n,e))}var e2=function(t){var e=t.collections.filter(r=>!this.collections[r.name]).map(r=>r.name);if(e.length>0)throw Ve("JD1",{missingCollections:e});return Promise.all(t.collections.map(r=>this.collections[r.name].importJSON(r)))},t2=async function(){var t={name:this.name,schemaHash:await this.schema.hash,docs:[]},e=Pc("find",uf(),this);return cO(e).then(r=>(t.docs=r.docs.map(n=>(n=Kt(n),delete n._rev,delete n._attachments,n)),t))};async function r2(t){if(t.schemaHash!==await this.schema.hash)throw Ve("JD2",{schemaHash:t.schemaHash,own:this.schema.hash});var e=t.docs;return this.storageInstance.bulkWrite(e.map(r=>{var n=Object.assign({},r,{_meta:{lwt:vn()},_rev:Di(),_attachments:{},_deleted:!1});return{document:n}}),"json-dump-import")}var n2={name:"json-dump",rxdb:!0,prototypes:{RxDatabase:t=>{t.exportJSON=ZF,t.importJSON=e2},RxCollection:t=>{t.exportJSON=t2,t.importJSON=r2}},overwritable:{}},Bp=new WeakMap,Pg=new WeakMap;function ff(t){var e=Bp.get(t);if(!e){var r=t.database?t.database:t,n=t.database?t.name:"";throw Ve("LD8",{database:r.name,collection:n})}return e}function hk(t,e,r,n,s,a){return e.createStorageInstance({databaseInstanceToken:t,databaseName:r,collectionName:i2(n),schema:pk,options:s,multiInstance:a,devMode:Jt.isDevMode()})}function B1(t){var e=Bp.get(t);if(e)return Bp.delete(t),e.then(r=>r.storageInstance.close())}async function L1(t,e,r){var n=al(10),s=await hk(n,t,e,r,{},!1);await s.remove()}function i2(t){return"plugin-local-documents-"+t}var pk=mm({title:"RxLocalDocument",version:0,primaryKey:"id",type:"object",properties:{id:{type:"string",maxLength:128},data:{type:"object",additionalProperties:!0}},required:["id","data"]});async function j1(t,e){var r=await ff(this),n={id:t,data:e,_deleted:!1,_meta:ol(),_rev:Di(),_attachments:{}};return Jc(r.storageInstance,{document:n},"local-document-insert").then(s=>r.docCache.getCachedRxDocument(s))}function U1(t,e){return this.getLocal(t).then(r=>{if(r)return r.incrementalModify(()=>e);var n=this.insertLocal(t,e);return n})}async function z1(t){var e=await ff(this),r=e.docCache,n=r.getLatestDocumentDataIfExists(t);return n?Promise.resolve(r.getCachedRxDocument(n)):hl(e.storageInstance,t).then(s=>s?e.docCache.getCachedRxDocument(s):null)}function q1(t){return this.$.pipe(xf(null),es(async e=>{if(e)return{changeEvent:e};var r=await this.getLocal(t);return{doc:r}}),es(async e=>{if(e.changeEvent){var r=e.changeEvent;if(!r.isLocal||r.documentId!==t)return{use:!1};var n=await this.getLocal(t);return{use:!0,doc:n}}else return{use:!0,doc:e.doc}}),Gt(e=>e.use),ur(e=>e.doc))}var s2=ZI(),o2=(function(t){function e(r,n,s){var a;return a=t.call(this,null,n)||this,a.id=r,a.parent=s,a}return Vg(e,t),e})(s2),df={get isLocal(){return!0},get allAttachments$(){throw Ve("LD1",{document:this})},get primaryPath(){return"id"},get primary(){return this.id},get $(){var t=this,e=Wc(Pg,this.parent),r=this.primary;return t.parent.eventBulks$.pipe(Gt(n=>!!n.isLocal),ur(n=>n.events.find(s=>s.documentId===r)),Gt(n=>!!n),ur(n=>uI(Ze(n))),xf(e.docCache.getLatestDocumentData(this.primary)),Ia((n,s)=>n._rev===s._rev),ur(n=>e.docCache.getCachedRxDocument(n)),ko(Oo))},get $$(){var t=this,e=Mv(t),r=e.getReactivityFactory();return r.fromObservable(t.$,t.getLatest()._data,e)},get deleted$$(){var t=this,e=Mv(t),r=e.getReactivityFactory();return r.fromObservable(t.deleted$,t.getLatest().deleted,e)},getLatest(){var t=Wc(Pg,this.parent),e=t.docCache.getLatestDocumentData(this.primary);return t.docCache.getCachedRxDocument(e)},get(t){if(t="data."+t,!!this._data){if(typeof t!="string")throw bp("LD2",{objPath:t});var e=Sa(this._data,t);return e=Jt.deepFreezeWhenDevMode(e),e}},get$(t){if(t="data."+t,Jt.isDevMode()){if(t.includes(".item."))throw Ve("LD3",{objPath:t});if(t===this.primaryPath)throw Ve("LD4")}return this.$.pipe(ur(e=>e._data),ur(e=>Sa(e,t)),Ia())},get$$(t){var e=Mv(this),r=e.getReactivityFactory();return r.fromObservable(this.get$(t),this.getLatest().get(t),e)},async incrementalModify(t){var e=await ff(this.parent);return e.incrementalWriteQueue.addWrite(this._data,async r=>(r.data=await t(r.data,this),r)).then(r=>e.docCache.getCachedRxDocument(r))},incrementalPatch(t){return this.incrementalModify(e=>(Object.entries(t).forEach(([r,n])=>{e[r]=n}),e))},async _saveData(t){var e=await ff(this.parent),r=this._data;t.id=this.id;var n=[{previous:r,document:t}];return e.storageInstance.bulkWrite(n,"local-document-save-data").then(s=>{if(s.error[0])throw s.error[0];var a=Ci(this.collection.schema.primaryPath,n,s)[0];t=Kt(t),t._rev=a._rev})},async remove(){var t=await ff(this.parent),e=Kt(this._data);return e._deleted=!0,Jc(t.storageInstance,{previous:this._data,document:e},"local-document-remove").then(r=>t.docCache.getCachedRxDocument(r))}},V1=!1,a2=()=>{if(!V1){V1=!0;var t=_m,e=Object.getOwnPropertyNames(t);e.forEach(n=>{var s=Object.getOwnPropertyDescriptor(df,n);if(!s){var a=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(df,n,a)}});var r=n=>()=>{throw Ve("LD6",{functionName:n})};["populate","update","putAttachment","putAttachmentBase64","getAttachment","allAttachments"].forEach(n=>df[n]=r(n))}};function u2(t,e){a2();var r=new o2(t.id,t,e);return Object.setPrototypeOf(r,df),r.prototype=df,r}function Mv(t){var e=t.parent;return JN(e)?e:e.database}function K1(t){var e=t.database?t.database:t,r=t.database?t.name:"",n=(async()=>{var s=await hk(e.token,e.storage,e.name,r,e.instanceCreationOptions,e.multiInstance);s=o0(e,s,pk);var a=new aO("id",e.eventBulks$.pipe(Gt(y=>{var g=!1;return(r===""&&!y.collectionName||r!==""&&y.collectionName===r)&&(g=!0),g&&y.isLocal}),ur(y=>y.events)),y=>u2(y,t)),u=new XI(s,"id",()=>{},()=>{}),l=await e.storageToken,d=s.changeStream().subscribe(y=>{for(var g=new Array(y.events.length),b=y.events,S=t.database?t.name:void 0,E=0;E<b.length;E++){var D=b[E];g[E]={documentId:D.documentId,collectionName:S,isLocal:!0,operation:D.operation,documentData:Jt.deepFreezeWhenDevMode(D.documentData),previousDocumentData:Jt.deepFreezeWhenDevMode(D.previousDocumentData)}}var O={id:y.id,isLocal:!0,internal:!1,collectionName:t.database?t.name:void 0,storageToken:l,events:g,databaseToken:e.token,checkpoint:y.checkpoint,context:y.context};e.$emit(O)});t._subs.push(d);var m={database:e,parent:t,storageInstance:s,docCache:a,incrementalWriteQueue:u};return Pg.set(t,m),m})();Bp.set(t,n)}var mk={name:"local-documents",rxdb:!0,prototypes:{RxCollection:t=>{t.insertLocal=j1,t.upsertLocal=U1,t.getLocal=z1,t.getLocal$=q1},RxDatabase:t=>{t.insertLocal=j1,t.upsertLocal=U1,t.getLocal=z1,t.getLocal$=q1}},hooks:{createRxDatabase:{before:t=>{t.creator.localDocuments&&K1(t.database)}},createRxCollection:{before:t=>{t.creator.localDocuments&&K1(t.collection)}},preCloseRxDatabase:{after:t=>B1(t)},postCloseRxCollection:{after:t=>B1(t)},postRemoveRxDatabase:{after:t=>L1(t.storage,t.databaseName,"")},postRemoveRxCollection:{after:t=>L1(t.storage,t.databaseName,t.collectionName)}},overwritable:{}};async function yk(t){var e=ZR(t.collection.schema.jsonSchema).map(a=>t.collection.name+"-"+a),r=await t.database.internalStore.findDocumentsById(e.map(a=>Nu(a,wa)),!1),n={};r.forEach(a=>n[a.key]=a);var s=e.find(a=>n[a]);return s?n[s]:void 0}function c2(t,e,r){var n=Kt(r._attachments),s=yn(r),a=s._meta;delete s._meta,s._attachments=n;for(var u=e+1,l=Promise.resolve(s),d=function(){var m=u;l=l.then(y=>l2(t,m,y)),u++};u<=t.schema.version;)d();return l.then(m=>m===null?Wg:(a&&(m._meta=a),m))}function l2(t,e,r){if(r===null)return Wg;var n=t.migrationStrategies[e](r,t),s=RE(n);return s}async function vk(t){if(t.collection.schema.version===0)return xs;var e=await yk(t);return!!e}var f2=200,gk=new WeakMap;function d2(t){var e=_k(t.database),r=e.getValue().slice(0);r.push(t),e.next(r)}function _k(t){return nn(gk,t,()=>new Ii([]))}function h2(t){var e=gk.get(t);e&&e.complete()}var p2=(function(){function t(r,n,s=[r.name,"v",r.schema.version].join("-")){this.started=!1,this.canceled=!1,this.updateStatusHandlers=[],this.updateStatusQueue=pm,this.collection=r,this.migrationStrategies=n,this.statusDocKey=s,this.database=r.database,this.oldCollectionMeta=yk(this),this.mustMigrate=vk(this),this.statusDocId=Nu(this.statusDocKey,ap),d2(this),this.$=hA(this.database.internalStore,this.statusDocId).pipe(Gt(a=>!!a),ur(a=>Ze(a).data),ko(Oo))}var e=t.prototype;return e.getStatus=function(){return Do(this.$)},e.startMigration=async function(n=f2){var s=await this.mustMigrate;if(s){if(this.started)throw Ve("DM1");if(this.started=!0,this.database.multiInstance){this.broadcastChannel=new bm(["rx-migration-state",this.database.name,this.collection.name,this.collection.schema.version].join("|"));var a=mx(this.broadcastChannel);await a.awaitLeadership()}var u=await this.oldCollectionMeta,l=await this.database.storage.createStorageInstance({databaseName:this.database.name,collectionName:this.collection.name,databaseInstanceToken:this.database.token,multiInstance:this.database.multiInstance,options:{},schema:Ze(u).data.schema,password:this.database.password,devMode:Jt.isDevMode()}),d=await this.getConnectedStorageInstances(),m=await this.countAllDocuments([l].concat(d.map(g=>g.oldStorage)));await this.updateStatus(g=>(g.count.total=m,g));try{await Promise.all(d.map(async g=>{await fO(this.collection,g.newStorage.collectionName,g.newStorage.schema),await this.migrateStorage(g.oldStorage,g.newStorage,n),await g.newStorage.close()})),await this.migrateStorage(l,this.collection.storageInstance.originalStorageInstance,n)}catch(g){await l.close(),await this.updateStatus(b=>(b.status="ERROR",b.error=eg(g),b));return}try{await Jc(this.database.internalStore,{previous:u,document:Object.assign({},u,{_deleted:!0})},"rx-migration-remove-collection-meta")}catch(g){var y=Vc(g);if(!(y&&y.documentInDb._deleted))throw g}await this.updateStatus(g=>(g.status="DONE",g)),this.broadcastChannel&&await this.broadcastChannel.close()}},e.updateStatus=function(n){return this.updateStatusHandlers.push(n),this.updateStatusQueue=this.updateStatusQueue.then(async()=>{if(this.updateStatusHandlers.length!==0){var s=this.updateStatusHandlers;for(this.updateStatusHandlers=[];;){var a=await hl(this.database.internalStore,this.statusDocId),u=yn(a);a||(u={id:this.statusDocId,key:this.statusDocKey,context:ap,data:{collectionName:this.collection.name,status:"RUNNING",count:{total:0,handled:0,percent:0}},_deleted:!1,_meta:ol(),_rev:Di(),_attachments:{}});var l=Ze(u).data;for(var d of s)l=d(l);if(l.count.percent=Math.round(l.count.handled/l.count.total*100),u&&a&&Kc(u.data,a.data))break;try{await Jc(this.database.internalStore,{previous:a,document:Ze(u)},ap);break}catch(m){if(!Vc(m))throw m}}}}),this.updateStatusQueue},e.migrateStorage=async function(n,s,a){this.collection.onClose.push(()=>this.cancel()),this.database.onClose.push(()=>this.cancel());var u=await this.database.storage.createStorageInstance({databaseName:this.database.name,collectionName:"rx-migration-state-meta-"+n.collectionName+"-"+n.schema.version,databaseInstanceToken:this.database.token,multiInstance:this.database.multiInstance,options:{},schema:mg(n.schema,Op(n.schema)),password:this.database.password,devMode:Jt.isDevMode()}),l=iT(s,Pp,this.database.token,!0),d=IO({keepMeta:!0,identifier:["rx-migration-state",n.collectionName,n.schema.version,this.collection.schema.version].join("-"),replicationHandler:{masterChangesSince(){return Promise.resolve({checkpoint:null,documents:[]})},masterWrite:async y=>{var g=await Promise.all(y.map(async S=>{var E=S.newDocumentState;if(s.schema.title===up&&(E=S.newDocumentState.docData,S.newDocumentState.isCheckpoint==="1"))return{assumedMasterState:void 0,newDocumentState:S.newDocumentState};var D=await c2(this.collection,n.schema.version,E);if(D===null)return null;var O={assumedMasterState:void 0,newDocumentState:s.schema.title===up?Object.assign({},S.newDocumentState,{docData:D}):D};return O}));g=g.filter(S=>!!S&&!!S.newDocumentState);var b=await l.masterWrite(g);return b},masterChangeStream$:new Hr().asObservable()},forkInstance:n,metaInstance:u,pushBatchSize:a,pullBatchSize:0,conflictHandler:Pp,hashFunction:this.database.hashFunction}),m=!1;if(d.events.error.subscribe(y=>m=y),d.events.processed.up.subscribe(()=>{this.updateStatus(y=>(y.count.handled=y.count.handled+1,y))}),await cp(d),await vg(d),await this.updateStatusQueue,m)throw await u.close(),m;await Promise.all([n.remove(),u.remove()]),await this.cancel()},e.cancel=async function(){this.canceled=!0,this.replicationState&&await OO(this.replicationState),this.broadcastChannel&&await this.broadcastChannel.close()},e.countAllDocuments=async function(n){var s=0;return await Promise.all(n.map(async a=>{var u=Bf(a.schema,Mc(a.schema,{selector:{}})),l=await a.count(u);s+=l.count})),s},e.getConnectedStorageInstances=async function(){var n=Ze(await this.oldCollectionMeta),s=[];return await Promise.all(await Promise.all(n.data.connectedStorages.map(async a=>{if(a.schema.title!==up)throw new Error("unknown migration handling for schema");var u=mg(yn(this.collection.schema.jsonSchema),Op(a.schema));u.version=this.collection.schema.version;var[l,d]=await Promise.all([this.database.storage.createStorageInstance({databaseInstanceToken:this.database.token,databaseName:this.database.name,devMode:Jt.isDevMode(),multiInstance:this.database.multiInstance,options:{},schema:a.schema,password:this.database.password,collectionName:a.collectionName}),this.database.storage.createStorageInstance({databaseInstanceToken:this.database.token,databaseName:this.database.name,devMode:Jt.isDevMode(),multiInstance:this.database.multiInstance,options:{},schema:u,password:this.database.password,collectionName:a.collectionName})]);s.push({oldStorage:l,newStorage:d})}))),s},e.migratePromise=async function(n){this.startMigration(n);var s=await this.mustMigrate;if(!s)return{status:"DONE",collectionName:this.collection.name,count:{handled:0,percent:0,total:0}};var a=await Promise.race([Do(this.$.pipe(Gt(u=>u.status==="DONE"))),Do(this.$.pipe(Gt(u=>u.status==="ERROR")))]);if(a.status==="ERROR")throw Ve("DM4",{collection:this.collection.name,error:a.error});return a},t})(),m2=new WeakMap,y2={name:"migration-schema",rxdb:!0,init(){vo(mk)},hooks:{preCloseRxDatabase:{after:h2}},prototypes:{RxDatabase:t=>{t.migrationStates=function(){return _k(this).pipe(ko(Oo))}},RxCollection:t=>{t.getMigrationState=function(){return nn(m2,this,()=>new p2(this.asRxCollection,this.migrationStrategies))},t.migrationNeeded=function(){return this.schema.version===0?xs:vk(this.getMigrationState())}}}};const km=t=>_n((e,r,n)=>{let s=0;if(kt(r))for(const a of r)s=s|1<<a;else s=r;return t(e&s,s)}),v2=km((t,e)=>t==0),g2=km((t,e)=>t==e),_2=km((t,e)=>t<e),w2=km((t,e)=>t>0),b2=Object.freeze(Object.defineProperty({__proto__:null,$all:lA,$and:$I,$bitsAllClear:v2,$bitsAllSet:g2,$bitsAnyClear:_2,$bitsAnySet:w2,$elemMatch:VI,$eq:TI,$exists:WI,$expr:aA,$gt:xI,$gte:MI,$in:FI,$jsonSchema:uA,$lt:BI,$lte:LI,$mod:zI,$ne:jI,$nin:UI,$nor:AI,$not:NI,$or:i0,$regex:qI,$size:KI,$type:HI,$where:cA},Symbol.toStringTag,{value:"Module"})),wn={cloneMode:"copy",queryOptions:gI({context:Oa.init().addQueryOps(b2).addExpressionOps(G$).addExpressionOps(iA)})},R0=(t,e)=>{switch(t){case"deep":return Gc(e);case"copy":return Qc(e)?new Date(e):kt(e)?[...e]:Pr(e)?{...e}:Ro(e)?new RegExp(e):e;default:return e}},S2=/^[a-z]+[a-zA-Z0-9]*$/;function wk(t){if(!t.includes(".$"))return[{parent:t,selector:t},[]];const e=t.indexOf(".$"),r=t.indexOf("]"),n=t.substring(0,e),s=t.substring(e+3,r);Xt(s===""||S2.test(s),"The filter <identifier> must begin with a lowercase letter and contain only alphanumeric characters.");const a=t.substring(r+2),[u,l]=a?wk(a):[];return[{selector:t,parent:n,child:s||"$",next:u},[s,...l||[]].filter(Boolean)]}const Un=(t,e,r,n,s)=>{const{parent:a,child:u,next:l}=e;if(!u){let m=!1;return Ef(t,a,(g,b)=>m=!!n(g,b)||m,s),m}const d=Ms(t,a);return kt(d)?d.map((m,y)=>r[u]&&!r[u].test({[u]:m})?!1:l?Un(m,l,r,n,s):n(d,y)).some(Boolean):!1};function ui(t,e,r,n){const s=[];for(const[a,u]of Object.entries(t)){const[l,d]=wk(a);if(!d.length)n(u,l,{})&&s.push(l.parent);else{const m={};e.forEach(g=>{Object.keys(g).forEach(b=>{d.forEach(S=>{(b===S||b.startsWith(S+"."))&&(m[S]=m[S]||{},Object.assign(m[S],{[b]:g[b]}))})})});const y={};for(const[g,b]of Object.entries(m))y[g]=new Ma(b,r.queryOptions);n(u,l,y)&&s.push(l.parent)}}return s}const E2=(t,e,r=[],n=wn)=>ui(e,r,n,(s,a,u)=>{const l={$each:[s]};return Pr(s)&&rs(s,"$each")&&Object.assign(l,s),Un(t,a,u,(d,m)=>{const y=d[m]||=[];return pI([y,l.$each]).length===l.$each.length?!1:(d[m]=R0(n.cloneMode,_$(y.concat(l.$each))),!0)},{buildGraph:!0})}),I2=new Set(["and","or","xor"]),O2=(t,e,r=[],n=wn)=>ui(e,r,n,(s,a,u)=>{const l=Object.keys(s);return Xt(l.length===1&&I2.has(l[0]),`Invalid bit operator '${l[0]}'. Must be one of 'and', 'or', or 'xor'.`),Un(t,a,u,(d,m)=>{let y=d[m];const g=s[l[0]];if(y!==void 0&&!(zr(y)&&zr(g)))return!1;switch(y=y||0,l[0]){case"and":d[m]=y&g;break;case"or":d[m]=y|g;break;case"xor":d[m]=y^g;break}return d[m]!==y},{buildGraph:!0})}),k2=(t,e,r=[],n=wn)=>{const s=Date.now();return ui(e,r,n,(a,u,l)=>Un(t,u,l,(d,m)=>(d[m]=s,!0),{buildGraph:!0}))},P2=(t,e,r=[],n=wn)=>ui(e,r,n,(s,a,u)=>{if(!a.child){const l=Ms(t,a.parent);Xt(l===void 0||zr(l),"cannot apply $inc to a value of non-numeric type")}return Un(t,a,u,(l,d)=>(l[d]=(l[d]||=0)+s,!0),{buildGraph:!0})}),D2=(t,e,r=[],n=wn)=>ui(e,r,n,(s,a,u)=>Un(t,a,u,(l,d)=>l[d]!==void 0&&Ri(l[d],s)>-1?!1:(l[d]=s,!0),{buildGraph:!0})),R2=(t,e,r=[],n=wn)=>ui(e,r,n,(s,a,u)=>Un(t,a,u,(l,d)=>l[d]!==void 0&&Ri(l[d],s)<1?!1:(l[d]=s,!0),{buildGraph:!0})),C2=(t,e,r=[],n=wn)=>ui(e,r,n,(s,a,u)=>Un(t,a,u,(l,d)=>{const m=l[d];return l[d]=l[d]===void 0?0:l[d]*s,l[d]!==m},{buildGraph:!0})),$2=(t,e,r=[],n=wn)=>ui(e,r,n,(s,a,u)=>Un(t,a,u,(l,d)=>{const m=l[d];return Xt(kt(m),`path '${a.selector}' contains an element of non-array type.`),m.length?(s===-1?m.splice(0,1):m.pop(),!0):!1})),bk=(t,e,r=[],n=wn)=>ui(e,r,n,(s,a,u)=>{const l=!Pr(s)||Object.keys(s).some(xa),d=new Ma(l?{k:s}:s,n.queryOptions),m=l?y=>d.test({k:y}):y=>d.test(y);return Un(t,a,u,(y,g)=>{const b=y[g],S=new Array;return b.map(D=>{const O=m(D);return O||S.push(D),O}).some(Boolean)?(y[g]=S,!0):!1})}),A2=(t,e,r=[],n=wn)=>{const s={};return Object.entries(e).forEach(([a,u])=>{s[a]={$in:u}}),bk(t,s,r,n)},N2=Object.freeze(["$each","$slice","$sort","$position"]),T2=(t,e,r=[],n=wn)=>ui(e,r,n,(s,a,u)=>{const l={$each:[s]};return Pr(s)&&N2.some(d=>rs(s,d))&&Object.assign(l,s),Un(t,a,u,(d,m)=>{const y=d[m]||=[],g=y.slice(0,l.$slice||y.length),b=y.length,S=zr(l.$position)?l.$position:y.length;if(y.splice(S,0,...R0(n.cloneMode,l.$each)),l.$sort){const E=Pr(l.$sort)?Object.keys(l.$sort||{}).pop():"",D=E?l.$sort[E]:l.$sort,O=E?$=>Ms($,E):$=>$;y.sort(($,P)=>D*Ri(O($),O(P)))}return zr(l.$slice)&&(l.$slice<0?y.splice(0,y.length+l.$slice):y.splice(l.$slice)),b!=y.length||!Ji(g,y)},{descendArray:!0,buildGraph:!0})}),Sk=(t,e,r=[],n=wn)=>ui(e,r,n,(s,a,u)=>Un(t,a,u,(l,d)=>Ji(l[d],s)?!1:(l[d]=R0(n.cloneMode,s),!0),{buildGraph:!0})),x2=(t,e,r=[],n=wn)=>{const s=[],a=ui(e,r,n,(u,l,d)=>Un(t,l,d,(m,y)=>rs(m,y)?(s.push(...Sk(t,{[u]:m[y]},r,n)),delete m[y],!0):!1));return Array.from(new Set(a.concat(s)))},M2=(t,e,r=[],n=wn)=>ui(e,r,n,(s,a,u)=>Un(t,a,u,(l,d)=>rs(l,d)?(kt(l)?l[d]=null:delete l[d],!0):!1)),W1=Object.freeze(Object.defineProperty({__proto__:null,$addToSet:E2,$bit:O2,$currentDate:k2,$inc:P2,$max:D2,$min:R2,$mul:C2,$pop:$2,$pull:bk,$pullAll:A2,$push:T2,$rename:x2,$set:Sk,$unset:M2},Symbol.toStringTag,{value:"Module"}));function Ek(t){return t=t??wn,(e,r,n=[],s={},a=t)=>{const u=Object.entries(r);Xt(u.length===1,"Update expression must contain only one operator.");const[l,d]=u[0];Xt(rs(W1,l),`Update operator '${l}' is not supported.`);const m=W1[l];return Object.keys(s).length&&!new Ma(s,a.queryOptions).test(e)?[]:m(e,d,n,a)}}Ek();var Fv;function Ik(t,e){if(!Fv){var r=Ek({cloneMode:"none"});Fv=(n,s)=>{var a=yn(n);return r(a,s),a}}return Fv(t,e)}function F2(t){return this.incrementalModify(e=>{var r=Ik(e,t);return r})}function B2(t){var e=this._data,r=Ik(e,t);return this._saveData(r,e)}async function L2(t){return kc(this.asRxQuery,e=>e.update(t))}var j2={name:"update",rxdb:!0,prototypes:{RxDocument:t=>{t.update=B2,t.incrementalUpdate=F2},RxQuery:t=>{t.update=L2}}};const{logger:U2}=Fn;async function z2(t=[]){try{vo(mk),vo(n2),vo(y2),vo(j2),vo(XF),vo(xF),vo(HF);for(const e of t)vo(e);U2.log("rxdb plugins loaded")}catch(e){throw new Error(e.message??e)}}const{logger:Ic}=Fn;class q2{dbInstance;options;get db(){return this.dbInstance}get dbOptions(){return this.options}get collections(){return this.db.collections}async destroyDb(){if(this.dbInstance)try{await this.dbInstance.remove(),await this.dbInstance.close()}catch(e){Ic.log("database destroy error",e)}finally{this.dbInstance=null,Ic.log("database instance destroyed")}}async initDb(e){if(!this.dbInstance)try{if(await z2(e.options?.plugins),this.dbInstance=await GN(e),this.options=e,Ic.log(`created database "${this.db.name}" with config "${JSON.stringify(e)}"`),e?.options?.schemas){const r=await this.initCollections(e.options.schemas);Ic.log(`created ${Object.keys(r).length} collections bulk: ${Object.keys(r)}`)}}catch(r){throw Ic.log("Error initializing the database:",r),r}}async initCollections(e){try{const r=await RF(e);return await this.db.addCollections(r)}catch(r){throw Ic.log("Error initializing collection(s)",r),r}}}var V2=w0();const Ok=sl(V2);var ti=zg(),Bv={exports:{}},Ft={};var H1;function K2(){if(H1)return Ft;H1=1;var t=typeof Symbol=="function"&&Symbol.for,e=t?Symbol.for("react.element"):60103,r=t?Symbol.for("react.portal"):60106,n=t?Symbol.for("react.fragment"):60107,s=t?Symbol.for("react.strict_mode"):60108,a=t?Symbol.for("react.profiler"):60114,u=t?Symbol.for("react.provider"):60109,l=t?Symbol.for("react.context"):60110,d=t?Symbol.for("react.async_mode"):60111,m=t?Symbol.for("react.concurrent_mode"):60111,y=t?Symbol.for("react.forward_ref"):60112,g=t?Symbol.for("react.suspense"):60113,b=t?Symbol.for("react.suspense_list"):60120,S=t?Symbol.for("react.memo"):60115,E=t?Symbol.for("react.lazy"):60116,D=t?Symbol.for("react.block"):60121,O=t?Symbol.for("react.fundamental"):60117,$=t?Symbol.for("react.responder"):60118,P=t?Symbol.for("react.scope"):60119;function C(k){if(typeof k=="object"&&k!==null){var x=k.$$typeof;switch(x){case e:switch(k=k.type,k){case d:case m:case n:case a:case s:case g:return k;default:switch(k=k&&k.$$typeof,k){case l:case y:case E:case S:case u:return k;default:return x}}case r:return x}}}function B(k){return C(k)===m}return Ft.AsyncMode=d,Ft.ConcurrentMode=m,Ft.ContextConsumer=l,Ft.ContextProvider=u,Ft.Element=e,Ft.ForwardRef=y,Ft.Fragment=n,Ft.Lazy=E,Ft.Memo=S,Ft.Portal=r,Ft.Profiler=a,Ft.StrictMode=s,Ft.Suspense=g,Ft.isAsyncMode=function(k){return B(k)||C(k)===d},Ft.isConcurrentMode=B,Ft.isContextConsumer=function(k){return C(k)===l},Ft.isContextProvider=function(k){return C(k)===u},Ft.isElement=function(k){return typeof k=="object"&&k!==null&&k.$$typeof===e},Ft.isForwardRef=function(k){return C(k)===y},Ft.isFragment=function(k){return C(k)===n},Ft.isLazy=function(k){return C(k)===E},Ft.isMemo=function(k){return C(k)===S},Ft.isPortal=function(k){return C(k)===r},Ft.isProfiler=function(k){return C(k)===a},Ft.isStrictMode=function(k){return C(k)===s},Ft.isSuspense=function(k){return C(k)===g},Ft.isValidElementType=function(k){return typeof k=="string"||typeof k=="function"||k===n||k===m||k===a||k===s||k===g||k===b||typeof k=="object"&&k!==null&&(k.$$typeof===E||k.$$typeof===S||k.$$typeof===u||k.$$typeof===l||k.$$typeof===y||k.$$typeof===O||k.$$typeof===$||k.$$typeof===P||k.$$typeof===D)},Ft.typeOf=C,Ft}var Q1;function W2(){return Q1||(Q1=1,Bv.exports=K2()),Bv.exports}var Lv,Y1;function H2(){if(Y1)return Lv;Y1=1;var t=W2(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},n={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};a[t.ForwardRef]=n,a[t.Memo]=s;function u(E){return t.isMemo(E)?s:a[E.$$typeof]||e}var l=Object.defineProperty,d=Object.getOwnPropertyNames,m=Object.getOwnPropertySymbols,y=Object.getOwnPropertyDescriptor,g=Object.getPrototypeOf,b=Object.prototype;function S(E,D,O){if(typeof D!="string"){if(b){var $=g(D);$&&$!==b&&S(E,$,O)}var P=d(D);m&&(P=P.concat(m(D)));for(var C=u(E),B=u(D),k=0;k<P.length;++k){var x=P[k];if(!r[x]&&!(O&&O[x])&&!(B&&B[x])&&!(C&&C[x])){var U=y(D,x);try{l(E,x,U)}catch{}}}}return E}return Lv=S,Lv}var Q2=H2();const Y2=sl(Q2);var jv={exports:{}},Bt={};var Uv,G1;function G2(){if(G1)return Uv;G1=1;var t=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function n(a){if(a==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(a)}function s(){try{if(!Object.assign)return!1;var a=new String("abc");if(a[5]="de",Object.getOwnPropertyNames(a)[0]==="5")return!1;for(var u={},l=0;l<10;l++)u["_"+String.fromCharCode(l)]=l;var d=Object.getOwnPropertyNames(u).map(function(y){return u[y]});if(d.join("")!=="0123456789")return!1;var m={};return"abcdefghijklmnopqrst".split("").forEach(function(y){m[y]=y}),Object.keys(Object.assign({},m)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}return Uv=s()?Object.assign:function(a,u){for(var l,d=n(a),m,y=1;y<arguments.length;y++){l=Object(arguments[y]);for(var g in l)e.call(l,g)&&(d[g]=l[g]);if(t){m=t(l);for(var b=0;b<m.length;b++)r.call(l,m[b])&&(d[m[b]]=l[m[b]])}}return d},Uv}var J1;function J2(){if(J1)return Bt;J1=1;var t=G2(),e=typeof Symbol=="function"&&Symbol.for,r=e?Symbol.for("react.element"):60103,n=e?Symbol.for("react.portal"):60106,s=e?Symbol.for("react.fragment"):60107,a=e?Symbol.for("react.strict_mode"):60108,u=e?Symbol.for("react.profiler"):60114,l=e?Symbol.for("react.provider"):60109,d=e?Symbol.for("react.context"):60110,m=e?Symbol.for("react.forward_ref"):60112,y=e?Symbol.for("react.suspense"):60113,g=e?Symbol.for("react.memo"):60115,b=e?Symbol.for("react.lazy"):60116,S=typeof Symbol=="function"&&Symbol.iterator;function E(A){for(var q="https://reactjs.org/docs/error-decoder.html?invariant="+A,we=1;we<arguments.length;we++)q+="&args[]="+encodeURIComponent(arguments[we]);return"Minified React error #"+A+"; visit "+q+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O={};function $(A,q,we){this.props=A,this.context=q,this.refs=O,this.updater=we||D}$.prototype.isReactComponent={},$.prototype.setState=function(A,q){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error(E(85));this.updater.enqueueSetState(this,A,q,"setState")},$.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function P(){}P.prototype=$.prototype;function C(A,q,we){this.props=A,this.context=q,this.refs=O,this.updater=we||D}var B=C.prototype=new P;B.constructor=C,t(B,$.prototype),B.isPureReactComponent=!0;var k={current:null},x=Object.prototype.hasOwnProperty,U={key:!0,ref:!0,__self:!0,__source:!0};function ie(A,q,we){var Oe,be={},Xe=null,ee=null;if(q!=null)for(Oe in q.ref!==void 0&&(ee=q.ref),q.key!==void 0&&(Xe=""+q.key),q)x.call(q,Oe)&&!U.hasOwnProperty(Oe)&&(be[Oe]=q[Oe]);var J=arguments.length-2;if(J===1)be.children=we;else if(1<J){for(var Se=Array(J),Ce=0;Ce<J;Ce++)Se[Ce]=arguments[Ce+2];be.children=Se}if(A&&A.defaultProps)for(Oe in J=A.defaultProps,J)be[Oe]===void 0&&(be[Oe]=J[Oe]);return{$$typeof:r,type:A,key:Xe,ref:ee,props:be,_owner:k.current}}function Y(A,q){return{$$typeof:r,type:A.type,key:q,ref:A.ref,props:A.props,_owner:A._owner}}function _e(A){return typeof A=="object"&&A!==null&&A.$$typeof===r}function le(A){var q={"=":"=0",":":"=2"};return"$"+(""+A).replace(/[=:]/g,function(we){return q[we]})}var me=/\/+/g,ke=[];function Pe(A,q,we,Oe){if(ke.length){var be=ke.pop();return be.result=A,be.keyPrefix=q,be.func=we,be.context=Oe,be.count=0,be}return{result:A,keyPrefix:q,func:we,context:Oe,count:0}}function We(A){A.result=null,A.keyPrefix=null,A.func=null,A.context=null,A.count=0,10>ke.length&&ke.push(A)}function nt(A,q,we,Oe){var be=typeof A;(be==="undefined"||be==="boolean")&&(A=null);var Xe=!1;if(A===null)Xe=!0;else switch(be){case"string":case"number":Xe=!0;break;case"object":switch(A.$$typeof){case r:case n:Xe=!0}}if(Xe)return we(Oe,A,q===""?"."+Ee(A,0):q),1;if(Xe=0,q=q===""?".":q+":",Array.isArray(A))for(var ee=0;ee<A.length;ee++){be=A[ee];var J=q+Ee(be,ee);Xe+=nt(be,J,we,Oe)}else if(A===null||typeof A!="object"?J=null:(J=S&&A[S]||A["@@iterator"],J=typeof J=="function"?J:null),typeof J=="function")for(A=J.call(A),ee=0;!(be=A.next()).done;)be=be.value,J=q+Ee(be,ee++),Xe+=nt(be,J,we,Oe);else if(be==="object")throw we=""+A,Error(E(31,we==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":we,""));return Xe}function et(A,q,we){return A==null?0:nt(A,"",q,we)}function Ee(A,q){return typeof A=="object"&&A!==null&&A.key!=null?le(A.key):q.toString(36)}function je(A,q){A.func.call(A.context,q,A.count++)}function F(A,q,we){var Oe=A.result,be=A.keyPrefix;A=A.func.call(A.context,q,A.count++),Array.isArray(A)?j(A,Oe,we,function(Xe){return Xe}):A!=null&&(_e(A)&&(A=Y(A,be+(!A.key||q&&q.key===A.key?"":(""+A.key).replace(me,"$&/")+"/")+we)),Oe.push(A))}function j(A,q,we,Oe,be){var Xe="";we!=null&&(Xe=(""+we).replace(me,"$&/")+"/"),q=Pe(q,Xe,Oe,be),et(A,F,q),We(q)}var ae={current:null};function Q(){var A=ae.current;if(A===null)throw Error(E(321));return A}var M={ReactCurrentDispatcher:ae,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:k,IsSomeRendererActing:{current:!1},assign:t};return Bt.Children={map:function(A,q,we){if(A==null)return A;var Oe=[];return j(A,Oe,null,q,we),Oe},forEach:function(A,q,we){if(A==null)return A;q=Pe(null,null,q,we),et(A,je,q),We(q)},count:function(A){return et(A,function(){return null},null)},toArray:function(A){var q=[];return j(A,q,null,function(we){return we}),q},only:function(A){if(!_e(A))throw Error(E(143));return A}},Bt.Component=$,Bt.Fragment=s,Bt.Profiler=u,Bt.PureComponent=C,Bt.StrictMode=a,Bt.Suspense=y,Bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M,Bt.cloneElement=function(A,q,we){if(A==null)throw Error(E(267,A));var Oe=t({},A.props),be=A.key,Xe=A.ref,ee=A._owner;if(q!=null){if(q.ref!==void 0&&(Xe=q.ref,ee=k.current),q.key!==void 0&&(be=""+q.key),A.type&&A.type.defaultProps)var J=A.type.defaultProps;for(Se in q)x.call(q,Se)&&!U.hasOwnProperty(Se)&&(Oe[Se]=q[Se]===void 0&&J!==void 0?J[Se]:q[Se])}var Se=arguments.length-2;if(Se===1)Oe.children=we;else if(1<Se){J=Array(Se);for(var Ce=0;Ce<Se;Ce++)J[Ce]=arguments[Ce+2];Oe.children=J}return{$$typeof:r,type:A.type,key:be,ref:Xe,props:Oe,_owner:ee}},Bt.createContext=function(A,q){return q===void 0&&(q=null),A={$$typeof:d,_calculateChangedBits:q,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null},A.Provider={$$typeof:l,_context:A},A.Consumer=A},Bt.createElement=ie,Bt.createFactory=function(A){var q=ie.bind(null,A);return q.type=A,q},Bt.createRef=function(){return{current:null}},Bt.forwardRef=function(A){return{$$typeof:m,render:A}},Bt.isValidElement=_e,Bt.lazy=function(A){return{$$typeof:b,_ctor:A,_status:-1,_result:null}},Bt.memo=function(A,q){return{$$typeof:g,type:A,compare:q===void 0?null:q}},Bt.useCallback=function(A,q){return Q().useCallback(A,q)},Bt.useContext=function(A,q){return Q().useContext(A,q)},Bt.useDebugValue=function(){},Bt.useEffect=function(A,q){return Q().useEffect(A,q)},Bt.useImperativeHandle=function(A,q,we){return Q().useImperativeHandle(A,q,we)},Bt.useLayoutEffect=function(A,q){return Q().useLayoutEffect(A,q)},Bt.useMemo=function(A,q){return Q().useMemo(A,q)},Bt.useReducer=function(A,q,we){return Q().useReducer(A,q,we)},Bt.useRef=function(A){return Q().useRef(A)},Bt.useState=function(A){return Q().useState(A)},Bt.version="16.14.0",Bt}var X1;function X2(){return X1||(X1=1,jv.exports=J2()),jv.exports}var Z2=X2();const Rc=sl(Z2),eB=new TextDecoder("utf-8"),Dg=t=>eB.decode(t),tB=new TextEncoder,C0=t=>tB.encode(t),[d3,rB]=(()=>{const t=()=>{throw new Error("BigInt is not available in this environment")};function e(){throw t()}return e.asIntN=()=>{throw t()},e.asUintN=()=>{throw t()},typeof BigInt<"u"?[BigInt,!0]:[e,!1]})(),[Vf]=(()=>{const t=()=>{throw new Error("BigInt64Array is not available in this environment")};class e{static get BYTES_PER_ELEMENT(){return 8}static of(){throw t()}static from(){throw t()}constructor(){throw t()}}return typeof BigInt64Array<"u"?[BigInt64Array,!0]:[e,!1]})(),[Kf]=(()=>{const t=()=>{throw new Error("BigUint64Array is not available in this environment")};class e{static get BYTES_PER_ELEMENT(){return 8}static of(){throw t()}static from(){throw t()}constructor(){throw t()}}return typeof BigUint64Array<"u"?[BigUint64Array,!0]:[e,!1]})(),nB=t=>typeof t=="number",kk=t=>typeof t=="boolean",Mr=t=>typeof t=="function",Bn=t=>t!=null&&Object(t)===t,ka=t=>Bn(t)&&Mr(t.then),Wf=t=>Bn(t)&&Mr(t[Symbol.iterator]),ml=t=>Bn(t)&&Mr(t[Symbol.asyncIterator]),Rg=t=>Bn(t)&&Bn(t.schema),Pk=t=>Bn(t)&&"done"in t&&"value"in t,Dk=t=>Bn(t)&&Mr(t.stat)&&nB(t.fd),Rk=t=>Bn(t)&&$0(t.body),Pm=t=>"_getDOMStream"in t&&"_getNodeStream"in t,iB=t=>Bn(t)&&Mr(t.abort)&&Mr(t.getWriter)&&!Pm(t),$0=t=>Bn(t)&&Mr(t.cancel)&&Mr(t.getReader)&&!Pm(t),sB=t=>Bn(t)&&Mr(t.end)&&Mr(t.write)&&kk(t.writable)&&!Pm(t),Ck=t=>Bn(t)&&Mr(t.read)&&Mr(t.pipe)&&kk(t.readable)&&!Pm(t),oB=t=>Bn(t)&&Mr(t.clear)&&Mr(t.bytes)&&Mr(t.position)&&Mr(t.setPosition)&&Mr(t.capacity)&&Mr(t.getBufferIdentifier)&&Mr(t.createLong),A0=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function aB(t){const e=t[0]?[t[0]]:[];let r,n,s,a;for(let u,l,d=0,m=0,y=t.length;++d<y;){if(u=e[m],l=t[d],!u||!l||u.buffer!==l.buffer||l.byteOffset<u.byteOffset){l&&(e[++m]=l);continue}if({byteOffset:r,byteLength:s}=u,{byteOffset:n,byteLength:a}=l,r+s<n||n+a<r){l&&(e[++m]=l);continue}e[m]=new Uint8Array(u.buffer,r,n-r+a)}return e}function Z1(t,e,r=0,n=e.byteLength){const s=t.byteLength,a=new Uint8Array(t.buffer,t.byteOffset,s),u=new Uint8Array(e.buffer,e.byteOffset,Math.min(n,s));return a.set(u,r),t}function Fs(t,e){const r=aB(t),n=r.reduce((y,g)=>y+g.byteLength,0);let s,a,u,l=0,d=-1;const m=Math.min(e||Number.POSITIVE_INFINITY,n);for(const y=r.length;++d<y;){if(s=r[d],a=s.subarray(0,Math.min(s.length,m-l)),m<=l+a.length){a.length<s.length?r[d]=s.subarray(a.length):a.length===s.length&&d++,u?Z1(u,a,l):u=a;break}Z1(u||(u=new Uint8Array(m)),a,l),l+=a.length}return[u||new Uint8Array(0),r.slice(d),n-(u?u.byteLength:0)]}function rr(t,e){let r=Pk(e)?e.value:e;return r instanceof t?t===Uint8Array?new t(r.buffer,r.byteOffset,r.byteLength):r:r?(typeof r=="string"&&(r=C0(r)),r instanceof ArrayBuffer?new t(r):r instanceof A0?new t(r):oB(r)?rr(t,r.bytes()):ArrayBuffer.isView(r)?r.byteLength<=0?new t(0):new t(r.buffer,r.byteOffset,r.byteLength/t.BYTES_PER_ELEMENT):t.from(r)):new t(0)}const rf=t=>rr(Int32Array,t),xt=t=>rr(Uint8Array,t),Cg=t=>(t.next(),t);function*uB(t,e){const r=function*(s){yield s},n=typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof A0?r(e):Wf(e)?e:r(e);return yield*Cg((function*(s){let a=null;do a=s.next(yield rr(t,a));while(!a.done)})(n[Symbol.iterator]())),new t}const cB=t=>uB(Uint8Array,t);function $k(t,e){return Yi(this,arguments,function*(){if(ka(e))return yield ut(yield ut(yield*ip(ga($k(t,yield ut(e))))));const n=function(u){return Yi(this,arguments,function*(){yield yield ut(yield ut(u))})},s=function(u){return Yi(this,arguments,function*(){yield ut(yield*ip(ga(Cg((function*(l){let d=null;do d=l.next(yield d?.value);while(!d.done)})(u[Symbol.iterator]())))))})},a=typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof A0?n(e):Wf(e)?s(e):ml(e)?e:n(e);return yield ut(yield*ip(ga(Cg((function(u){return Yi(this,arguments,function*(){let l=null;do l=yield ut(u.next(yield yield ut(rr(t,l))));while(!l.done)})})(a[Symbol.asyncIterator]()))))),yield ut(new t)})}const lB=t=>$k(Uint8Array,t);function N0(t,e,r){if(t!==0){r=r.slice(0,e+1);for(let n=-1;++n<=e;)r[n]+=t}return r}function fB(t,e){let r=0;const n=t.length;if(n!==e.length)return!1;if(n>0)do if(t[r]!==e[r])return!1;while(++r<n);return!0}const Ei={fromIterable(t){return Zh(dB(t))},fromAsyncIterable(t){return Zh(hB(t))},fromDOMStream(t){return Zh(pB(t))},fromNodeStream(t){return Zh(yB(t))},toDOMStream(t,e){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(t,e){throw new Error('"toNodeStream" not available in this environment')}},Zh=t=>(t.next(),t);function*dB(t){let e,r=!1,n=[],s,a,u,l=0;function d(){return a==="peek"?Fs(n,u)[0]:([s,n,l]=Fs(n,u),s)}({cmd:a,size:u}=yield null);const m=cB(t)[Symbol.iterator]();try{do if({done:e,value:s}=Number.isNaN(u-l)?m.next():m.next(u-l),!e&&s.byteLength>0&&(n.push(s),l+=s.byteLength),e||u<=l)do({cmd:a,size:u}=yield d());while(u<l);while(!e)}catch(y){(r=!0)&&typeof m.throw=="function"&&m.throw(y)}finally{r===!1&&typeof m.return=="function"&&m.return(null)}return null}function hB(t){return Yi(this,arguments,function*(){let r,n=!1,s=[],a,u,l,d=0;function m(){return u==="peek"?Fs(s,l)[0]:([a,s,d]=Fs(s,l),a)}({cmd:u,size:l}=yield yield ut(null));const y=lB(t)[Symbol.asyncIterator]();try{do if({done:r,value:a}=Number.isNaN(l-d)?yield ut(y.next()):yield ut(y.next(l-d)),!r&&a.byteLength>0&&(s.push(a),d+=a.byteLength),r||l<=d)do({cmd:u,size:l}=yield yield ut(m()));while(l<d);while(!r)}catch(g){(n=!0)&&typeof y.throw=="function"&&(yield ut(y.throw(g)))}finally{n===!1&&typeof y.return=="function"&&(yield ut(y.return(new Uint8Array(0))))}return yield ut(null)})}function pB(t){return Yi(this,arguments,function*(){let r=!1,n=!1,s=[],a,u,l,d=0;function m(){return u==="peek"?Fs(s,l)[0]:([a,s,d]=Fs(s,l),a)}({cmd:u,size:l}=yield yield ut(null));const y=new mB(t);try{do if({done:r,value:a}=Number.isNaN(l-d)?yield ut(y.read()):yield ut(y.read(l-d)),!r&&a.byteLength>0&&(s.push(xt(a)),d+=a.byteLength),r||l<=d)do({cmd:u,size:l}=yield yield ut(m()));while(l<d);while(!r)}catch(g){(n=!0)&&(yield ut(y.cancel(g)))}finally{n===!1?yield ut(y.cancel()):t.locked&&y.releaseLock()}return yield ut(null)})}class mB{constructor(e){this.source=e,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(e){return st(this,void 0,void 0,function*(){const{reader:r,source:n}=this;r&&(yield r.cancel(e).catch(()=>{})),n&&n.locked&&this.releaseLock()})}read(e){return st(this,void 0,void 0,function*(){if(e===0)return{done:this.reader==null,value:new Uint8Array(0)};const r=yield this.reader.read();return!r.done&&(r.value=xt(r)),r})}}const zv=(t,e)=>{const r=s=>n([e,s]);let n;return[e,r,new Promise(s=>(n=s)&&t.once(e,r))]};function yB(t){return Yi(this,arguments,function*(){const r=[];let n="error",s=!1,a=null,u,l,d=0,m=[],y;function g(){return u==="peek"?Fs(m,l)[0]:([y,m,d]=Fs(m,l),y)}if({cmd:u,size:l}=yield yield ut(null),t.isTTY)return yield yield ut(new Uint8Array(0)),yield ut(null);try{r[0]=zv(t,"end"),r[1]=zv(t,"error");do{if(r[2]=zv(t,"readable"),[n,a]=yield ut(Promise.race(r.map(S=>S[2]))),n==="error")break;if((s=n==="end")||(Number.isFinite(l-d)?(y=xt(t.read(l-d)),y.byteLength<l-d&&(y=xt(t.read()))):y=xt(t.read()),y.byteLength>0&&(m.push(y),d+=y.byteLength)),s||l<=d)do({cmd:u,size:l}=yield yield ut(g()));while(l<d)}while(!s)}finally{yield ut(b(r,n==="error"?a:null))}return yield ut(null);function b(S,E){return y=m=null,new Promise((D,O)=>{for(const[$,P]of S)t.off($,P);try{const $=t.destroy;$&&$.call(t,E),E=void 0}catch($){E=$||E}finally{E!=null?O(E):D()}})}})}var ni;(function(t){t[t.V1=0]="V1",t[t.V2=1]="V2",t[t.V3=2]="V3",t[t.V4=3]="V4",t[t.V5=4]="V5"})(ni||(ni={}));var si;(function(t){t[t.Sparse=0]="Sparse",t[t.Dense=1]="Dense"})(si||(si={}));var xn;(function(t){t[t.HALF=0]="HALF",t[t.SINGLE=1]="SINGLE",t[t.DOUBLE=2]="DOUBLE"})(xn||(xn={}));var Mo;(function(t){t[t.DAY=0]="DAY",t[t.MILLISECOND=1]="MILLISECOND"})(Mo||(Mo={}));var Mt;(function(t){t[t.SECOND=0]="SECOND",t[t.MILLISECOND=1]="MILLISECOND",t[t.MICROSECOND=2]="MICROSECOND",t[t.NANOSECOND=3]="NANOSECOND"})(Mt||(Mt={}));var Pa;(function(t){t[t.YEAR_MONTH=0]="YEAR_MONTH",t[t.DAY_TIME=1]="DAY_TIME",t[t.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(Pa||(Pa={}));var Lt;(function(t){t[t.NONE=0]="NONE",t[t.Schema=1]="Schema",t[t.DictionaryBatch=2]="DictionaryBatch",t[t.RecordBatch=3]="RecordBatch",t[t.Tensor=4]="Tensor",t[t.SparseTensor=5]="SparseTensor"})(Lt||(Lt={}));var fe;(function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.Float=3]="Float",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct=13]="Struct",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Dictionary=-1]="Dictionary",t[t.Int8=-2]="Int8",t[t.Int16=-3]="Int16",t[t.Int32=-4]="Int32",t[t.Int64=-5]="Int64",t[t.Uint8=-6]="Uint8",t[t.Uint16=-7]="Uint16",t[t.Uint32=-8]="Uint32",t[t.Uint64=-9]="Uint64",t[t.Float16=-10]="Float16",t[t.Float32=-11]="Float32",t[t.Float64=-12]="Float64",t[t.DateDay=-13]="DateDay",t[t.DateMillisecond=-14]="DateMillisecond",t[t.TimestampSecond=-15]="TimestampSecond",t[t.TimestampMillisecond=-16]="TimestampMillisecond",t[t.TimestampMicrosecond=-17]="TimestampMicrosecond",t[t.TimestampNanosecond=-18]="TimestampNanosecond",t[t.TimeSecond=-19]="TimeSecond",t[t.TimeMillisecond=-20]="TimeMillisecond",t[t.TimeMicrosecond=-21]="TimeMicrosecond",t[t.TimeNanosecond=-22]="TimeNanosecond",t[t.DenseUnion=-23]="DenseUnion",t[t.SparseUnion=-24]="SparseUnion",t[t.IntervalDayTime=-25]="IntervalDayTime",t[t.IntervalYearMonth=-26]="IntervalYearMonth"})(fe||(fe={}));var _o;(function(t){t[t.OFFSET=0]="OFFSET",t[t.DATA=1]="DATA",t[t.VALIDITY=2]="VALIDITY",t[t.TYPE=3]="TYPE"})(_o||(_o={}));const vB=void 0;function Pf(t){if(t===null)return"null";if(t===vB)return"undefined";switch(typeof t){case"number":return`${t}`;case"bigint":return`${t}`;case"string":return`"${t}"`}return typeof t[Symbol.toPrimitive]=="function"?t[Symbol.toPrimitive]("string"):ArrayBuffer.isView(t)?t instanceof Vf||t instanceof Kf?`[${[...t].map(e=>Pf(e))}]`:`[${t}]`:ArrayBuffer.isView(t)?`[${t}]`:JSON.stringify(t,(e,r)=>typeof r=="bigint"?`${r}`:r)}const gB=Symbol.for("isArrowBigNum");function is(t,...e){return e.length===0?Object.setPrototypeOf(rr(this.TypedArray,t),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(t,...e),this.constructor.prototype)}is.prototype[gB]=!0;is.prototype.toJSON=function(){return`"${$u(this)}"`};is.prototype.valueOf=function(){return Ak(this)};is.prototype.toString=function(){return $u(this)};is.prototype[Symbol.toPrimitive]=function(t="default"){switch(t){case"number":return Ak(this);case"string":return $u(this);case"default":return $g(this)}return $u(this)};function Fc(...t){return is.apply(this,t)}function Bc(...t){return is.apply(this,t)}function Df(...t){return is.apply(this,t)}Object.setPrototypeOf(Fc.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(Bc.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(Df.prototype,Object.create(Uint32Array.prototype));Object.assign(Fc.prototype,is.prototype,{constructor:Fc,signed:!0,TypedArray:Int32Array,BigIntArray:Vf});Object.assign(Bc.prototype,is.prototype,{constructor:Bc,signed:!1,TypedArray:Uint32Array,BigIntArray:Kf});Object.assign(Df.prototype,is.prototype,{constructor:Df,signed:!0,TypedArray:Uint32Array,BigIntArray:Kf});function Ak(t){const{buffer:e,byteOffset:r,length:n,signed:s}=t,a=new Kf(e,r,n),u=s&&a[a.length-1]&BigInt(1)<<BigInt(63);let l=BigInt(u?1:0),d=BigInt(0);if(u){for(const m of a)l+=~m*(BigInt(1)<<BigInt(32)*d++);l*=BigInt(-1)}else for(const m of a)l+=m*(BigInt(1)<<BigInt(32)*d++);return l}let $u,$g;rB?($g=(t=>t.byteLength===8?new t.BigIntArray(t.buffer,t.byteOffset,1)[0]:qv(t)),$u=(t=>t.byteLength===8?`${new t.BigIntArray(t.buffer,t.byteOffset,1)[0]}`:qv(t))):($u=qv,$g=$u);function qv(t){let e="";const r=new Uint32Array(2);let n=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2);const s=new Uint32Array((n=new Uint16Array(n).reverse()).buffer);let a=-1;const u=n.length-1;do{for(r[0]=n[a=0];a<u;)n[a++]=r[1]=r[0]/10,r[0]=(r[0]-r[1]*10<<16)+n[a];n[a]=r[1]=r[0]/10,r[0]=r[0]-r[1]*10,e=`${r[0]}${e}`}while(s[0]||s[1]||s[2]||s[3]);return e??"0"}class T0{static new(e,r){switch(r){case!0:return new Fc(e);case!1:return new Bc(e)}switch(e.constructor){case Int8Array:case Int16Array:case Int32Array:case Vf:return new Fc(e)}return e.byteLength===16?new Df(e):new Bc(e)}static signed(e){return new Fc(e)}static unsigned(e){return new Bc(e)}static decimal(e){return new Df(e)}constructor(e,r){return T0.new(e,r)}}var Nk,Tk,xk,Mk,Fk,Bk,Lk,jk,Uk,zk,qk,Vk,Kk,Wk,Hk,Qk,Yk,Gk,Jk;class ct{static isNull(e){return e?.typeId===fe.Null}static isInt(e){return e?.typeId===fe.Int}static isFloat(e){return e?.typeId===fe.Float}static isBinary(e){return e?.typeId===fe.Binary}static isUtf8(e){return e?.typeId===fe.Utf8}static isBool(e){return e?.typeId===fe.Bool}static isDecimal(e){return e?.typeId===fe.Decimal}static isDate(e){return e?.typeId===fe.Date}static isTime(e){return e?.typeId===fe.Time}static isTimestamp(e){return e?.typeId===fe.Timestamp}static isInterval(e){return e?.typeId===fe.Interval}static isList(e){return e?.typeId===fe.List}static isStruct(e){return e?.typeId===fe.Struct}static isUnion(e){return e?.typeId===fe.Union}static isFixedSizeBinary(e){return e?.typeId===fe.FixedSizeBinary}static isFixedSizeList(e){return e?.typeId===fe.FixedSizeList}static isMap(e){return e?.typeId===fe.Map}static isDictionary(e){return e?.typeId===fe.Dictionary}static isDenseUnion(e){return ct.isUnion(e)&&e.mode===si.Dense}static isSparseUnion(e){return ct.isUnion(e)&&e.mode===si.Sparse}get typeId(){return fe.NONE}}Nk=Symbol.toStringTag;ct[Nk]=(t=>(t.children=null,t.ArrayType=Array,t[Symbol.toStringTag]="DataType"))(ct.prototype);let Da=class extends ct{toString(){return"Null"}get typeId(){return fe.Null}};Tk=Symbol.toStringTag;Da[Tk]=(t=>t[Symbol.toStringTag]="Null")(Da.prototype);class Ra extends ct{constructor(e,r){super(),this.isSigned=e,this.bitWidth=r}get typeId(){return fe.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?Vf:Kf}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}xk=Symbol.toStringTag;Ra[xk]=(t=>(t.isSigned=null,t.bitWidth=null,t[Symbol.toStringTag]="Int"))(Ra.prototype);class Rf extends Ra{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}Object.defineProperty(Rf.prototype,"ArrayType",{value:Int32Array});class Cf extends ct{constructor(e){super(),this.precision=e}get typeId(){return fe.Float}get ArrayType(){switch(this.precision){case xn.HALF:return Uint16Array;case xn.SINGLE:return Float32Array;case xn.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}Mk=Symbol.toStringTag;Cf[Mk]=(t=>(t.precision=null,t[Symbol.toStringTag]="Float"))(Cf.prototype);let Lp=class extends ct{constructor(){super()}get typeId(){return fe.Binary}toString(){return"Binary"}};Fk=Symbol.toStringTag;Lp[Fk]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Binary"))(Lp.prototype);let jp=class extends ct{constructor(){super()}get typeId(){return fe.Utf8}toString(){return"Utf8"}};Bk=Symbol.toStringTag;jp[Bk]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Utf8"))(jp.prototype);let Up=class extends ct{constructor(){super()}get typeId(){return fe.Bool}toString(){return"Bool"}};Lk=Symbol.toStringTag;Up[Lk]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Bool"))(Up.prototype);let zp=class extends ct{constructor(e,r,n=128){super(),this.scale=e,this.precision=r,this.bitWidth=n}get typeId(){return fe.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};jk=Symbol.toStringTag;zp[jk]=(t=>(t.scale=null,t.precision=null,t.ArrayType=Uint32Array,t[Symbol.toStringTag]="Decimal"))(zp.prototype);class qp extends ct{constructor(e){super(),this.unit=e}get typeId(){return fe.Date}toString(){return`Date${(this.unit+1)*32}<${Mo[this.unit]}>`}}Uk=Symbol.toStringTag;qp[Uk]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Date"))(qp.prototype);class $f extends ct{constructor(e,r){super(),this.unit=e,this.bitWidth=r}get typeId(){return fe.Time}toString(){return`Time${this.bitWidth}<${Mt[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return Vf}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}zk=Symbol.toStringTag;$f[zk]=(t=>(t.unit=null,t.bitWidth=null,t[Symbol.toStringTag]="Time"))($f.prototype);class Vp extends ct{constructor(e,r){super(),this.unit=e,this.timezone=r}get typeId(){return fe.Timestamp}toString(){return`Timestamp<${Mt[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}qk=Symbol.toStringTag;Vp[qk]=(t=>(t.unit=null,t.timezone=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Timestamp"))(Vp.prototype);class Kp extends ct{constructor(e){super(),this.unit=e}get typeId(){return fe.Interval}toString(){return`Interval<${Pa[this.unit]}>`}}Vk=Symbol.toStringTag;Kp[Vk]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Interval"))(Kp.prototype);let Wp=class extends ct{constructor(e){super(),this.children=[e]}get typeId(){return fe.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};Kk=Symbol.toStringTag;Wp[Kk]=(t=>(t.children=null,t[Symbol.toStringTag]="List"))(Wp.prototype);class pn extends ct{constructor(e){super(),this.children=e}get typeId(){return fe.Struct}toString(){return`Struct<{${this.children.map(e=>`${e.name}:${e.type}`).join(", ")}}>`}}Wk=Symbol.toStringTag;pn[Wk]=(t=>(t.children=null,t[Symbol.toStringTag]="Struct"))(pn.prototype);class Hp extends ct{constructor(e,r,n){super(),this.mode=e,this.children=n,this.typeIds=r=Int32Array.from(r),this.typeIdToChildIndex=r.reduce((s,a,u)=>(s[a]=u)&&s||s,Object.create(null))}get typeId(){return fe.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(e=>`${e.type}`).join(" | ")}>`}}Hk=Symbol.toStringTag;Hp[Hk]=(t=>(t.mode=null,t.typeIds=null,t.children=null,t.typeIdToChildIndex=null,t.ArrayType=Int8Array,t[Symbol.toStringTag]="Union"))(Hp.prototype);let Qp=class extends ct{constructor(e){super(),this.byteWidth=e}get typeId(){return fe.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};Qk=Symbol.toStringTag;Qp[Qk]=(t=>(t.byteWidth=null,t.ArrayType=Uint8Array,t[Symbol.toStringTag]="FixedSizeBinary"))(Qp.prototype);let Yp=class extends ct{constructor(e,r){super(),this.listSize=e,this.children=[r]}get typeId(){return fe.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};Yk=Symbol.toStringTag;Yp[Yk]=(t=>(t.children=null,t.listSize=null,t[Symbol.toStringTag]="FixedSizeList"))(Yp.prototype);class Gp extends ct{constructor(e,r=!1){super(),this.children=[e],this.keysSorted=r}get typeId(){return fe.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(e=>`${e.name}:${e.type}`).join(", ")}}>`}}Gk=Symbol.toStringTag;Gp[Gk]=(t=>(t.children=null,t.keysSorted=null,t[Symbol.toStringTag]="Map_"))(Gp.prototype);const _B=(t=>()=>++t)(-1);class Xc extends ct{constructor(e,r,n,s){super(),this.indices=r,this.dictionary=e,this.isOrdered=s||!1,this.id=n==null?_B():typeof n=="number"?n:n.low}get typeId(){return fe.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}Jk=Symbol.toStringTag;Xc[Jk]=(t=>(t.id=null,t.indices=null,t.isOrdered=null,t.dictionary=null,t[Symbol.toStringTag]="Dictionary"))(Xc.prototype);function wo(t){const e=t;switch(t.typeId){case fe.Decimal:return t.bitWidth/32;case fe.Timestamp:return 2;case fe.Date:return 1+e.unit;case fe.Interval:return 1+e.unit;case fe.FixedSizeList:return e.listSize;case fe.FixedSizeBinary:return e.byteWidth;default:return 1}}class Ct{visitMany(e,...r){return e.map((n,s)=>this.visit(n,...r.map(a=>a[s])))}visit(...e){return this.getVisitFn(e[0],!1).apply(this,e)}getVisitFn(e,r=!0){return wB(this,e,r)}getVisitFnByTypeId(e,r=!0){return Cc(this,e,r)}visitNull(e,...r){return null}visitBool(e,...r){return null}visitInt(e,...r){return null}visitFloat(e,...r){return null}visitUtf8(e,...r){return null}visitBinary(e,...r){return null}visitFixedSizeBinary(e,...r){return null}visitDate(e,...r){return null}visitTimestamp(e,...r){return null}visitTime(e,...r){return null}visitDecimal(e,...r){return null}visitList(e,...r){return null}visitStruct(e,...r){return null}visitUnion(e,...r){return null}visitDictionary(e,...r){return null}visitInterval(e,...r){return null}visitFixedSizeList(e,...r){return null}visitMap(e,...r){return null}}function wB(t,e,r=!0){return typeof e=="number"?Cc(t,e,r):typeof e=="string"&&e in fe?Cc(t,fe[e],r):e&&e instanceof ct?Cc(t,eE(e),r):e?.type&&e.type instanceof ct?Cc(t,eE(e.type),r):Cc(t,fe.NONE,r)}function Cc(t,e,r=!0){let n=null;switch(e){case fe.Null:n=t.visitNull;break;case fe.Bool:n=t.visitBool;break;case fe.Int:n=t.visitInt;break;case fe.Int8:n=t.visitInt8||t.visitInt;break;case fe.Int16:n=t.visitInt16||t.visitInt;break;case fe.Int32:n=t.visitInt32||t.visitInt;break;case fe.Int64:n=t.visitInt64||t.visitInt;break;case fe.Uint8:n=t.visitUint8||t.visitInt;break;case fe.Uint16:n=t.visitUint16||t.visitInt;break;case fe.Uint32:n=t.visitUint32||t.visitInt;break;case fe.Uint64:n=t.visitUint64||t.visitInt;break;case fe.Float:n=t.visitFloat;break;case fe.Float16:n=t.visitFloat16||t.visitFloat;break;case fe.Float32:n=t.visitFloat32||t.visitFloat;break;case fe.Float64:n=t.visitFloat64||t.visitFloat;break;case fe.Utf8:n=t.visitUtf8;break;case fe.Binary:n=t.visitBinary;break;case fe.FixedSizeBinary:n=t.visitFixedSizeBinary;break;case fe.Date:n=t.visitDate;break;case fe.DateDay:n=t.visitDateDay||t.visitDate;break;case fe.DateMillisecond:n=t.visitDateMillisecond||t.visitDate;break;case fe.Timestamp:n=t.visitTimestamp;break;case fe.TimestampSecond:n=t.visitTimestampSecond||t.visitTimestamp;break;case fe.TimestampMillisecond:n=t.visitTimestampMillisecond||t.visitTimestamp;break;case fe.TimestampMicrosecond:n=t.visitTimestampMicrosecond||t.visitTimestamp;break;case fe.TimestampNanosecond:n=t.visitTimestampNanosecond||t.visitTimestamp;break;case fe.Time:n=t.visitTime;break;case fe.TimeSecond:n=t.visitTimeSecond||t.visitTime;break;case fe.TimeMillisecond:n=t.visitTimeMillisecond||t.visitTime;break;case fe.TimeMicrosecond:n=t.visitTimeMicrosecond||t.visitTime;break;case fe.TimeNanosecond:n=t.visitTimeNanosecond||t.visitTime;break;case fe.Decimal:n=t.visitDecimal;break;case fe.List:n=t.visitList;break;case fe.Struct:n=t.visitStruct;break;case fe.Union:n=t.visitUnion;break;case fe.DenseUnion:n=t.visitDenseUnion||t.visitUnion;break;case fe.SparseUnion:n=t.visitSparseUnion||t.visitUnion;break;case fe.Dictionary:n=t.visitDictionary;break;case fe.Interval:n=t.visitInterval;break;case fe.IntervalDayTime:n=t.visitIntervalDayTime||t.visitInterval;break;case fe.IntervalYearMonth:n=t.visitIntervalYearMonth||t.visitInterval;break;case fe.FixedSizeList:n=t.visitFixedSizeList;break;case fe.Map:n=t.visitMap;break}if(typeof n=="function")return n;if(!r)return()=>null;throw new Error(`Unrecognized type '${fe[e]}'`)}function eE(t){switch(t.typeId){case fe.Null:return fe.Null;case fe.Int:{const{bitWidth:e,isSigned:r}=t;switch(e){case 8:return r?fe.Int8:fe.Uint8;case 16:return r?fe.Int16:fe.Uint16;case 32:return r?fe.Int32:fe.Uint32;case 64:return r?fe.Int64:fe.Uint64}return fe.Int}case fe.Float:switch(t.precision){case xn.HALF:return fe.Float16;case xn.SINGLE:return fe.Float32;case xn.DOUBLE:return fe.Float64}return fe.Float;case fe.Binary:return fe.Binary;case fe.Utf8:return fe.Utf8;case fe.Bool:return fe.Bool;case fe.Decimal:return fe.Decimal;case fe.Time:switch(t.unit){case Mt.SECOND:return fe.TimeSecond;case Mt.MILLISECOND:return fe.TimeMillisecond;case Mt.MICROSECOND:return fe.TimeMicrosecond;case Mt.NANOSECOND:return fe.TimeNanosecond}return fe.Time;case fe.Timestamp:switch(t.unit){case Mt.SECOND:return fe.TimestampSecond;case Mt.MILLISECOND:return fe.TimestampMillisecond;case Mt.MICROSECOND:return fe.TimestampMicrosecond;case Mt.NANOSECOND:return fe.TimestampNanosecond}return fe.Timestamp;case fe.Date:switch(t.unit){case Mo.DAY:return fe.DateDay;case Mo.MILLISECOND:return fe.DateMillisecond}return fe.Date;case fe.Interval:switch(t.unit){case Pa.DAY_TIME:return fe.IntervalDayTime;case Pa.YEAR_MONTH:return fe.IntervalYearMonth}return fe.Interval;case fe.Map:return fe.Map;case fe.List:return fe.List;case fe.Struct:return fe.Struct;case fe.Union:switch(t.mode){case si.Dense:return fe.DenseUnion;case si.Sparse:return fe.SparseUnion}return fe.Union;case fe.FixedSizeBinary:return fe.FixedSizeBinary;case fe.FixedSizeList:return fe.FixedSizeList;case fe.Dictionary:return fe.Dictionary}throw new Error(`Unrecognized type '${fe[t.typeId]}'`)}Ct.prototype.visitInt8=null;Ct.prototype.visitInt16=null;Ct.prototype.visitInt32=null;Ct.prototype.visitInt64=null;Ct.prototype.visitUint8=null;Ct.prototype.visitUint16=null;Ct.prototype.visitUint32=null;Ct.prototype.visitUint64=null;Ct.prototype.visitFloat16=null;Ct.prototype.visitFloat32=null;Ct.prototype.visitFloat64=null;Ct.prototype.visitDateDay=null;Ct.prototype.visitDateMillisecond=null;Ct.prototype.visitTimestampSecond=null;Ct.prototype.visitTimestampMillisecond=null;Ct.prototype.visitTimestampMicrosecond=null;Ct.prototype.visitTimestampNanosecond=null;Ct.prototype.visitTimeSecond=null;Ct.prototype.visitTimeMillisecond=null;Ct.prototype.visitTimeMicrosecond=null;Ct.prototype.visitTimeNanosecond=null;Ct.prototype.visitDenseUnion=null;Ct.prototype.visitSparseUnion=null;Ct.prototype.visitIntervalDayTime=null;Ct.prototype.visitIntervalYearMonth=null;const Xk=new Float64Array(1),Oc=new Uint32Array(Xk.buffer);function Zk(t){const e=(t&31744)>>10,r=(t&1023)/1024,n=Math.pow(-1,(t&32768)>>15);switch(e){case 31:return n*(r?Number.NaN:1/0);case 0:return n*(r?6103515625e-14*r:0)}return n*Math.pow(2,e-15)*(1+r)}function bB(t){if(t!==t)return 32256;Xk[0]=t;const e=(Oc[1]&2147483648)>>16&65535;let r=Oc[1]&2146435072,n=0;return r>=1089470464?Oc[0]>0?r=31744:(r=(r&2080374784)>>16,n=(Oc[1]&1048575)>>10):r<=1056964608?(n=1048576+(Oc[1]&1048575),n=1048576+(n<<(r>>20)-998)>>21,r=0):(r=r-1056964608>>10,n=(Oc[1]&1048575)+512>>10),e|r|n&65535}class yt extends Ct{}function _t(t){return(e,r,n)=>{if(e.setValid(r,n!=null))return t(e,r,n)}}const SB=(t,e,r)=>{t[e]=Math.trunc(r/864e5)},x0=(t,e,r)=>{t[e]=Math.trunc(r%4294967296),t[e+1]=Math.trunc(r/4294967296)},EB=(t,e,r)=>{t[e]=Math.trunc(r*1e3%4294967296),t[e+1]=Math.trunc(r*1e3/4294967296)},IB=(t,e,r)=>{t[e]=Math.trunc(r*1e6%4294967296),t[e+1]=Math.trunc(r*1e6/4294967296)},eP=(t,e,r,n)=>{if(r+1<e.length){const{[r]:s,[r+1]:a}=e;t.set(n.subarray(0,a-s),s)}},OB=({offset:t,values:e},r,n)=>{const s=t+r;n?e[s>>3]|=1<<s%8:e[s>>3]&=~(1<<s%8)},Fo=({values:t},e,r)=>{t[e]=r},M0=({values:t},e,r)=>{t[e]=r},tP=({values:t},e,r)=>{t[e]=bB(r)},kB=(t,e,r)=>{switch(t.type.precision){case xn.HALF:return tP(t,e,r);case xn.SINGLE:case xn.DOUBLE:return M0(t,e,r)}},rP=({values:t},e,r)=>{SB(t,e,r.valueOf())},nP=({values:t},e,r)=>{x0(t,e*2,r.valueOf())},PB=({stride:t,values:e},r,n)=>{e.set(n.subarray(0,t),t*r)},DB=({values:t,valueOffsets:e},r,n)=>eP(t,e,r,n),RB=({values:t,valueOffsets:e},r,n)=>{eP(t,e,r,C0(n))},CB=(t,e,r)=>{t.type.unit===Mo.DAY?rP(t,e,r):nP(t,e,r)},iP=({values:t},e,r)=>x0(t,e*2,r/1e3),sP=({values:t},e,r)=>x0(t,e*2,r),oP=({values:t},e,r)=>EB(t,e*2,r),aP=({values:t},e,r)=>IB(t,e*2,r),$B=(t,e,r)=>{switch(t.type.unit){case Mt.SECOND:return iP(t,e,r);case Mt.MILLISECOND:return sP(t,e,r);case Mt.MICROSECOND:return oP(t,e,r);case Mt.NANOSECOND:return aP(t,e,r)}},uP=({values:t},e,r)=>{t[e]=r},cP=({values:t},e,r)=>{t[e]=r},lP=({values:t},e,r)=>{t[e]=r},fP=({values:t},e,r)=>{t[e]=r},AB=(t,e,r)=>{switch(t.type.unit){case Mt.SECOND:return uP(t,e,r);case Mt.MILLISECOND:return cP(t,e,r);case Mt.MICROSECOND:return lP(t,e,r);case Mt.NANOSECOND:return fP(t,e,r)}},NB=({values:t,stride:e},r,n)=>{t.set(n.subarray(0,e),e*r)},TB=(t,e,r)=>{const n=t.children[0],s=t.valueOffsets,a=$i.getVisitFn(n);if(Array.isArray(r))for(let u=-1,l=s[e],d=s[e+1];l<d;)a(n,l++,r[++u]);else for(let u=-1,l=s[e],d=s[e+1];l<d;)a(n,l++,r.get(++u))},xB=(t,e,r)=>{const n=t.children[0],{valueOffsets:s}=t,a=$i.getVisitFn(n);let{[e]:u,[e+1]:l}=s;const d=r instanceof Map?r.entries():Object.entries(r);for(const m of d)if(a(n,u,m),++u>=l)break},MB=(t,e)=>(r,n,s,a)=>n&&r(n,t,e[a]),FB=(t,e)=>(r,n,s,a)=>n&&r(n,t,e.get(a)),BB=(t,e)=>(r,n,s,a)=>n&&r(n,t,e.get(s.name)),LB=(t,e)=>(r,n,s,a)=>n&&r(n,t,e[s.name]),jB=(t,e,r)=>{const n=t.type.children.map(a=>$i.getVisitFn(a.type)),s=r instanceof Map?BB(e,r):r instanceof jt?FB(e,r):Array.isArray(r)?MB(e,r):LB(e,r);t.type.children.forEach((a,u)=>s(n[u],t.children[u],a,u))},UB=(t,e,r)=>{t.type.mode===si.Dense?dP(t,e,r):hP(t,e,r)},dP=(t,e,r)=>{const n=t.type.typeIdToChildIndex[t.typeIds[e]],s=t.children[n];$i.visit(s,t.valueOffsets[e],r)},hP=(t,e,r)=>{const n=t.type.typeIdToChildIndex[t.typeIds[e]],s=t.children[n];$i.visit(s,e,r)},zB=(t,e,r)=>{var n;(n=t.dictionary)===null||n===void 0||n.set(t.values[e],r)},qB=(t,e,r)=>{t.type.unit===Pa.DAY_TIME?pP(t,e,r):mP(t,e,r)},pP=({values:t},e,r)=>{t.set(r.subarray(0,2),2*e)},mP=({values:t},e,r)=>{t[e]=r[0]*12+r[1]%12},VB=(t,e,r)=>{const{stride:n}=t,s=t.children[0],a=$i.getVisitFn(s);if(Array.isArray(r))for(let u=-1,l=e*n;++u<n;)a(s,l+u,r[u]);else for(let u=-1,l=e*n;++u<n;)a(s,l+u,r.get(u))};yt.prototype.visitBool=_t(OB);yt.prototype.visitInt=_t(Fo);yt.prototype.visitInt8=_t(Fo);yt.prototype.visitInt16=_t(Fo);yt.prototype.visitInt32=_t(Fo);yt.prototype.visitInt64=_t(Fo);yt.prototype.visitUint8=_t(Fo);yt.prototype.visitUint16=_t(Fo);yt.prototype.visitUint32=_t(Fo);yt.prototype.visitUint64=_t(Fo);yt.prototype.visitFloat=_t(kB);yt.prototype.visitFloat16=_t(tP);yt.prototype.visitFloat32=_t(M0);yt.prototype.visitFloat64=_t(M0);yt.prototype.visitUtf8=_t(RB);yt.prototype.visitBinary=_t(DB);yt.prototype.visitFixedSizeBinary=_t(PB);yt.prototype.visitDate=_t(CB);yt.prototype.visitDateDay=_t(rP);yt.prototype.visitDateMillisecond=_t(nP);yt.prototype.visitTimestamp=_t($B);yt.prototype.visitTimestampSecond=_t(iP);yt.prototype.visitTimestampMillisecond=_t(sP);yt.prototype.visitTimestampMicrosecond=_t(oP);yt.prototype.visitTimestampNanosecond=_t(aP);yt.prototype.visitTime=_t(AB);yt.prototype.visitTimeSecond=_t(uP);yt.prototype.visitTimeMillisecond=_t(cP);yt.prototype.visitTimeMicrosecond=_t(lP);yt.prototype.visitTimeNanosecond=_t(fP);yt.prototype.visitDecimal=_t(NB);yt.prototype.visitList=_t(TB);yt.prototype.visitStruct=_t(jB);yt.prototype.visitUnion=_t(UB);yt.prototype.visitDenseUnion=_t(dP);yt.prototype.visitSparseUnion=_t(hP);yt.prototype.visitDictionary=_t(zB);yt.prototype.visitInterval=_t(qB);yt.prototype.visitIntervalDayTime=_t(pP);yt.prototype.visitIntervalYearMonth=_t(mP);yt.prototype.visitFixedSizeList=_t(VB);yt.prototype.visitMap=_t(xB);const $i=new yt,Qi=Symbol.for("parent"),Lc=Symbol.for("rowIndex");class F0{constructor(e,r){return this[Qi]=e,this[Lc]=r,new Proxy(this,new WB)}toArray(){return Object.values(this.toJSON())}toJSON(){const e=this[Lc],r=this[Qi],n=r.type.children,s={};for(let a=-1,u=n.length;++a<u;)s[n[a].name]=Ln.visit(r.children[a],e);return s}toString(){return`{${[...this].map(([e,r])=>`${Pf(e)}: ${Pf(r)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new KB(this[Qi],this[Lc])}}class KB{constructor(e,r){this.childIndex=0,this.children=e.children,this.rowIndex=r,this.childFields=e.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const e=this.childIndex;return e<this.numChildren?(this.childIndex=e+1,{done:!1,value:[this.childFields[e].name,Ln.visit(this.children[e],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(F0.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Qi]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Lc]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class WB{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(e){return e[Qi].type.children.map(r=>r.name)}has(e,r){return e[Qi].type.children.findIndex(n=>n.name===r)!==-1}getOwnPropertyDescriptor(e,r){if(e[Qi].type.children.findIndex(n=>n.name===r)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(e,r){if(Reflect.has(e,r))return e[r];const n=e[Qi].type.children.findIndex(s=>s.name===r);if(n!==-1){const s=Ln.visit(e[Qi].children[n],e[Lc]);return Reflect.set(e,r,s),s}}set(e,r,n){const s=e[Qi].type.children.findIndex(a=>a.name===r);return s!==-1?($i.visit(e[Qi].children[s],e[Lc],n),Reflect.set(e,r,n)):Reflect.has(e,r)||typeof r=="symbol"?Reflect.set(e,r,n):!1}}class lt extends Ct{}function vt(t){return(e,r)=>e.getValid(r)?t(e,r):null}const HB=(t,e)=>864e5*t[e],B0=(t,e)=>4294967296*t[e+1]+(t[e]>>>0),QB=(t,e)=>4294967296*(t[e+1]/1e3)+(t[e]>>>0)/1e3,YB=(t,e)=>4294967296*(t[e+1]/1e6)+(t[e]>>>0)/1e6,yP=t=>new Date(t),GB=(t,e)=>yP(HB(t,e)),JB=(t,e)=>yP(B0(t,e)),XB=(t,e)=>null,vP=(t,e,r)=>{if(r+1>=e.length)return null;const n=e[r],s=e[r+1];return t.subarray(n,s)},ZB=({offset:t,values:e},r)=>{const n=t+r;return(e[n>>3]&1<<n%8)!==0},gP=({values:t},e)=>GB(t,e),_P=({values:t},e)=>JB(t,e*2),Ba=({stride:t,values:e},r)=>e[t*r],eL=({stride:t,values:e},r)=>Zk(e[t*r]),wP=({values:t},e)=>t[e],tL=({stride:t,values:e},r)=>e.subarray(t*r,t*(r+1)),rL=({values:t,valueOffsets:e},r)=>vP(t,e,r),nL=({values:t,valueOffsets:e},r)=>{const n=vP(t,e,r);return n!==null?Dg(n):null},iL=({values:t},e)=>t[e],sL=({type:t,values:e},r)=>t.precision!==xn.HALF?e[r]:Zk(e[r]),oL=(t,e)=>t.type.unit===Mo.DAY?gP(t,e):_P(t,e),bP=({values:t},e)=>1e3*B0(t,e*2),SP=({values:t},e)=>B0(t,e*2),EP=({values:t},e)=>QB(t,e*2),IP=({values:t},e)=>YB(t,e*2),aL=(t,e)=>{switch(t.type.unit){case Mt.SECOND:return bP(t,e);case Mt.MILLISECOND:return SP(t,e);case Mt.MICROSECOND:return EP(t,e);case Mt.NANOSECOND:return IP(t,e)}},OP=({values:t},e)=>t[e],kP=({values:t},e)=>t[e],PP=({values:t},e)=>t[e],DP=({values:t},e)=>t[e],uL=(t,e)=>{switch(t.type.unit){case Mt.SECOND:return OP(t,e);case Mt.MILLISECOND:return kP(t,e);case Mt.MICROSECOND:return PP(t,e);case Mt.NANOSECOND:return DP(t,e)}},cL=({values:t,stride:e},r)=>T0.decimal(t.subarray(e*r,e*(r+1))),lL=(t,e)=>{const{valueOffsets:r,stride:n,children:s}=t,{[e*n]:a,[e*n+1]:u}=r,d=s[0].slice(a,u-a);return new jt([d])},fL=(t,e)=>{const{valueOffsets:r,children:n}=t,{[e]:s,[e+1]:a}=r,u=n[0];return new L0(u.slice(s,a-s))},dL=(t,e)=>new F0(t,e),hL=(t,e)=>t.type.mode===si.Dense?RP(t,e):CP(t,e),RP=(t,e)=>{const r=t.type.typeIdToChildIndex[t.typeIds[e]],n=t.children[r];return Ln.visit(n,t.valueOffsets[e])},CP=(t,e)=>{const r=t.type.typeIdToChildIndex[t.typeIds[e]],n=t.children[r];return Ln.visit(n,e)},pL=(t,e)=>{var r;return(r=t.dictionary)===null||r===void 0?void 0:r.get(t.values[e])},mL=(t,e)=>t.type.unit===Pa.DAY_TIME?$P(t,e):AP(t,e),$P=({values:t},e)=>t.subarray(2*e,2*(e+1)),AP=({values:t},e)=>{const r=t[e],n=new Int32Array(2);return n[0]=Math.trunc(r/12),n[1]=Math.trunc(r%12),n},yL=(t,e)=>{const{stride:r,children:n}=t,a=n[0].slice(e*r,r);return new jt([a])};lt.prototype.visitNull=vt(XB);lt.prototype.visitBool=vt(ZB);lt.prototype.visitInt=vt(iL);lt.prototype.visitInt8=vt(Ba);lt.prototype.visitInt16=vt(Ba);lt.prototype.visitInt32=vt(Ba);lt.prototype.visitInt64=vt(wP);lt.prototype.visitUint8=vt(Ba);lt.prototype.visitUint16=vt(Ba);lt.prototype.visitUint32=vt(Ba);lt.prototype.visitUint64=vt(wP);lt.prototype.visitFloat=vt(sL);lt.prototype.visitFloat16=vt(eL);lt.prototype.visitFloat32=vt(Ba);lt.prototype.visitFloat64=vt(Ba);lt.prototype.visitUtf8=vt(nL);lt.prototype.visitBinary=vt(rL);lt.prototype.visitFixedSizeBinary=vt(tL);lt.prototype.visitDate=vt(oL);lt.prototype.visitDateDay=vt(gP);lt.prototype.visitDateMillisecond=vt(_P);lt.prototype.visitTimestamp=vt(aL);lt.prototype.visitTimestampSecond=vt(bP);lt.prototype.visitTimestampMillisecond=vt(SP);lt.prototype.visitTimestampMicrosecond=vt(EP);lt.prototype.visitTimestampNanosecond=vt(IP);lt.prototype.visitTime=vt(uL);lt.prototype.visitTimeSecond=vt(OP);lt.prototype.visitTimeMillisecond=vt(kP);lt.prototype.visitTimeMicrosecond=vt(PP);lt.prototype.visitTimeNanosecond=vt(DP);lt.prototype.visitDecimal=vt(cL);lt.prototype.visitList=vt(lL);lt.prototype.visitStruct=vt(dL);lt.prototype.visitUnion=vt(hL);lt.prototype.visitDenseUnion=vt(RP);lt.prototype.visitSparseUnion=vt(CP);lt.prototype.visitDictionary=vt(pL);lt.prototype.visitInterval=vt(mL);lt.prototype.visitIntervalDayTime=vt($P);lt.prototype.visitIntervalYearMonth=vt(AP);lt.prototype.visitFixedSizeList=vt(yL);lt.prototype.visitMap=vt(fL);const Ln=new lt,Os=Symbol.for("keys"),jc=Symbol.for("vals");class L0{constructor(e){return this[Os]=new jt([e.children[0]]).memoize(),this[jc]=e.children[1],new Proxy(this,new gL)}[Symbol.iterator](){return new vL(this[Os],this[jc])}get size(){return this[Os].length}toArray(){return Object.values(this.toJSON())}toJSON(){const e=this[Os],r=this[jc],n={};for(let s=-1,a=e.length;++s<a;)n[e.get(s)]=Ln.visit(r,s);return n}toString(){return`{${[...this].map(([e,r])=>`${Pf(e)}: ${Pf(r)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class vL{constructor(e,r){this.keys=e,this.vals=r,this.keyIndex=0,this.numKeys=e.length}[Symbol.iterator](){return this}next(){const e=this.keyIndex;return e===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(e),Ln.visit(this.vals,e)]})}}class gL{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(e){return e[Os].toArray().map(String)}has(e,r){return e[Os].includes(r)}getOwnPropertyDescriptor(e,r){if(e[Os].indexOf(r)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(e,r){if(Reflect.has(e,r))return e[r];const n=e[Os].indexOf(r);if(n!==-1){const s=Ln.visit(Reflect.get(e,jc),n);return Reflect.set(e,r,s),s}}set(e,r,n){const s=e[Os].indexOf(r);return s!==-1?($i.visit(Reflect.get(e,jc),s,n),Reflect.set(e,r,n)):Reflect.has(e,r)?Reflect.set(e,r,n):!1}}Object.defineProperties(L0.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Os]:{writable:!0,enumerable:!1,configurable:!1,value:null},[jc]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let tE;function NP(t,e,r,n){const{length:s=0}=t;let a=typeof e!="number"?0:e,u=typeof r!="number"?s:r;return a<0&&(a=(a%s+s)%s),u<0&&(u=(u%s+s)%s),u<a&&(tE=a,a=u,u=tE),u>s&&(u=s),n?n(t,a,u):[a,u]}const rE=t=>t!==t;function yl(t){if(typeof t!=="object"||t===null)return rE(t)?rE:r=>r===t;if(t instanceof Date){const r=t.valueOf();return n=>n instanceof Date?n.valueOf()===r:!1}return ArrayBuffer.isView(t)?r=>r?fB(t,r):!1:t instanceof Map?wL(t):Array.isArray(t)?_L(t):t instanceof jt?bL(t):SL(t,!0)}function _L(t){const e=[];for(let r=-1,n=t.length;++r<n;)e[r]=yl(t[r]);return Dm(e)}function wL(t){let e=-1;const r=[];for(const n of t.values())r[++e]=yl(n);return Dm(r)}function bL(t){const e=[];for(let r=-1,n=t.length;++r<n;)e[r]=yl(t.get(r));return Dm(e)}function SL(t,e=!1){const r=Object.keys(t);if(!e&&r.length===0)return()=>!1;const n=[];for(let s=-1,a=r.length;++s<a;)n[s]=yl(t[r[s]]);return Dm(n,r)}function Dm(t,e){return r=>{if(!r||typeof r!="object")return!1;switch(r.constructor){case Array:return EL(t,r);case Map:return nE(t,r,r.keys());case L0:case F0:case Object:case void 0:return nE(t,r,e||Object.keys(r))}return r instanceof jt?IL(t,r):!1}}function EL(t,e){const r=t.length;if(e.length!==r)return!1;for(let n=-1;++n<r;)if(!t[n](e[n]))return!1;return!0}function IL(t,e){const r=t.length;if(e.length!==r)return!1;for(let n=-1;++n<r;)if(!t[n](e.get(n)))return!1;return!0}function nE(t,e,r){const n=r[Symbol.iterator](),s=e instanceof Map?e.keys():Object.keys(e)[Symbol.iterator](),a=e instanceof Map?e.values():Object.values(e)[Symbol.iterator]();let u=0;const l=t.length;let d=a.next(),m=n.next(),y=s.next();for(;u<l&&!m.done&&!y.done&&!d.done&&!(m.value!==y.value||!t[u](d.value));++u,m=n.next(),y=s.next(),d=a.next());return u===l&&m.done&&y.done&&d.done?!0:(n.return&&n.return(),s.return&&s.return(),a.return&&a.return(),!1)}function TP(t,e,r,n){return(r&1<<n)!==0}function OL(t,e,r,n){return(r&1<<n)>>n}function j0(t,e,r){const n=r.byteLength+7&-8;if(t>0||r.byteLength<n){const s=new Uint8Array(n);return s.set(t%8===0?r.subarray(t>>3):Jp(new U0(r,t,e,null,TP)).subarray(0,n)),s}return r}function Jp(t){const e=[];let r=0,n=0,s=0;for(const u of t)u&&(s|=1<<n),++n===8&&(e[r++]=s,s=n=0);(r===0||n>0)&&(e[r++]=s);const a=new Uint8Array(e.length+7&-8);return a.set(e),a}class U0{constructor(e,r,n,s,a){this.bytes=e,this.length=n,this.context=s,this.get=a,this.bit=r%8,this.byteIndex=r>>3,this.byte=e[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function Ag(t,e,r){if(r-e<=0)return 0;if(r-e<8){let a=0;for(const u of new U0(t,e,r-e,t,OL))a+=u;return a}const n=r>>3<<3,s=e+(e%8===0?0:8-e%8);return Ag(t,e,s)+Ag(t,n,r)+kL(t,s>>3,n-s>>3)}function kL(t,e,r){let n=0,s=Math.trunc(e);const a=new DataView(t.buffer,t.byteOffset,t.byteLength),u=r===void 0?t.byteLength:s+r;for(;u-s>=4;)n+=Vv(a.getUint32(s)),s+=4;for(;u-s>=2;)n+=Vv(a.getUint16(s)),s+=2;for(;u-s>=1;)n+=Vv(a.getUint8(s)),s+=1;return n}function Vv(t){let e=Math.trunc(t);return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),(e+(e>>>4)&252645135)*16843009>>>24}const PL=-1;class sr{constructor(e,r,n,s,a,u=[],l){this.type=e,this.children=u,this.dictionary=l,this.offset=Math.floor(Math.max(r||0,0)),this.length=Math.floor(Math.max(n||0,0)),this._nullCount=Math.floor(Math.max(s||0,-1));let d;a instanceof sr?(this.stride=a.stride,this.values=a.values,this.typeIds=a.typeIds,this.nullBitmap=a.nullBitmap,this.valueOffsets=a.valueOffsets):(this.stride=wo(e),a&&((d=a[0])&&(this.valueOffsets=d),(d=a[1])&&(this.values=d),(d=a[2])&&(this.nullBitmap=d),(d=a[3])&&(this.typeIds=d))),this.nullable=this._nullCount!==0&&this.nullBitmap&&this.nullBitmap.byteLength>0}get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get byteLength(){let e=0;const{valueOffsets:r,values:n,nullBitmap:s,typeIds:a}=this;return r&&(e+=r.byteLength),n&&(e+=n.byteLength),s&&(e+=s.byteLength),a&&(e+=a.byteLength),this.children.reduce((u,l)=>u+l.byteLength,e)}get nullCount(){let e=this._nullCount,r;return e<=PL&&(r=this.nullBitmap)&&(this._nullCount=e=this.length-Ag(r,this.offset,this.offset+this.length)),e}getValid(e){if(this.nullable&&this.nullCount>0){const r=this.offset+e;return(this.nullBitmap[r>>3]&1<<r%8)!==0}return!0}setValid(e,r){if(!this.nullable)return r;if(!this.nullBitmap||this.nullBitmap.byteLength<=e>>3){const{nullBitmap:d}=this._changeLengthAndBackfillNullBitmap(this.length);Object.assign(this,{nullBitmap:d,_nullCount:0})}const{nullBitmap:n,offset:s}=this,a=s+e>>3,u=(s+e)%8,l=n[a]>>u&1;return r?l===0&&(n[a]|=1<<u,this._nullCount=this.nullCount+1):l===1&&(n[a]&=~(1<<u),this._nullCount=this.nullCount-1),r}clone(e=this.type,r=this.offset,n=this.length,s=this._nullCount,a=this,u=this.children){return new sr(e,r,n,s,a,u,this.dictionary)}slice(e,r){const{stride:n,typeId:s,children:a}=this,u=+(this._nullCount===0)-1,l=s===16?n:1,d=this._sliceBuffers(e,r,n,s);return this.clone(this.type,this.offset+e,r,u,d,a.length===0||this.valueOffsets?a:this._sliceChildren(a,l*e,l*r))}_changeLengthAndBackfillNullBitmap(e){if(this.typeId===fe.Null)return this.clone(this.type,0,e,0);const{length:r,nullCount:n}=this,s=new Uint8Array((e+63&-64)>>3).fill(255,0,r>>3);s[r>>3]=(1<<r-(r&-8))-1,n>0&&s.set(j0(this.offset,r,this.nullBitmap),0);const a=this.buffers;return a[_o.VALIDITY]=s,this.clone(this.type,0,e,n+(e-r),a)}_sliceBuffers(e,r,n,s){let a;const{buffers:u}=this;return(a=u[_o.TYPE])&&(u[_o.TYPE]=a.subarray(e,e+r)),(a=u[_o.OFFSET])&&(u[_o.OFFSET]=a.subarray(e,e+r+1))||(a=u[_o.DATA])&&(u[_o.DATA]=s===6?a:a.subarray(n*e,n*(e+r))),u}_sliceChildren(e,r,n){return e.map(s=>s.slice(r,n))}}sr.prototype.children=Object.freeze([]);class hf extends Ct{visit(e){return this.getVisitFn(e.type).call(this,e)}visitNull(e){const{["type"]:r,["offset"]:n=0,["length"]:s=0}=e;return new sr(r,n,s,0)}visitBool(e){const{["type"]:r,["offset"]:n=0}=e,s=xt(e.nullBitmap),a=rr(r.ArrayType,e.data),{["length"]:u=a.length>>3,["nullCount"]:l=e.nullBitmap?-1:0}=e;return new sr(r,n,u,l,[void 0,a,s])}visitInt(e){const{["type"]:r,["offset"]:n=0}=e,s=xt(e.nullBitmap),a=rr(r.ArrayType,e.data),{["length"]:u=a.length,["nullCount"]:l=e.nullBitmap?-1:0}=e;return new sr(r,n,u,l,[void 0,a,s])}visitFloat(e){const{["type"]:r,["offset"]:n=0}=e,s=xt(e.nullBitmap),a=rr(r.ArrayType,e.data),{["length"]:u=a.length,["nullCount"]:l=e.nullBitmap?-1:0}=e;return new sr(r,n,u,l,[void 0,a,s])}visitUtf8(e){const{["type"]:r,["offset"]:n=0}=e,s=xt(e.data),a=xt(e.nullBitmap),u=rf(e.valueOffsets),{["length"]:l=u.length-1,["nullCount"]:d=e.nullBitmap?-1:0}=e;return new sr(r,n,l,d,[u,s,a])}visitBinary(e){const{["type"]:r,["offset"]:n=0}=e,s=xt(e.data),a=xt(e.nullBitmap),u=rf(e.valueOffsets),{["length"]:l=u.length-1,["nullCount"]:d=e.nullBitmap?-1:0}=e;return new sr(r,n,l,d,[u,s,a])}visitFixedSizeBinary(e){const{["type"]:r,["offset"]:n=0}=e,s=xt(e.nullBitmap),a=rr(r.ArrayType,e.data),{["length"]:u=a.length/wo(r),["nullCount"]:l=e.nullBitmap?-1:0}=e;return new sr(r,n,u,l,[void 0,a,s])}visitDate(e){const{["type"]:r,["offset"]:n=0}=e,s=xt(e.nullBitmap),a=rr(r.ArrayType,e.data),{["length"]:u=a.length/wo(r),["nullCount"]:l=e.nullBitmap?-1:0}=e;return new sr(r,n,u,l,[void 0,a,s])}visitTimestamp(e){const{["type"]:r,["offset"]:n=0}=e,s=xt(e.nullBitmap),a=rr(r.ArrayType,e.data),{["length"]:u=a.length/wo(r),["nullCount"]:l=e.nullBitmap?-1:0}=e;return new sr(r,n,u,l,[void 0,a,s])}visitTime(e){const{["type"]:r,["offset"]:n=0}=e,s=xt(e.nullBitmap),a=rr(r.ArrayType,e.data),{["length"]:u=a.length/wo(r),["nullCount"]:l=e.nullBitmap?-1:0}=e;return new sr(r,n,u,l,[void 0,a,s])}visitDecimal(e){const{["type"]:r,["offset"]:n=0}=e,s=xt(e.nullBitmap),a=rr(r.ArrayType,e.data),{["length"]:u=a.length/wo(r),["nullCount"]:l=e.nullBitmap?-1:0}=e;return new sr(r,n,u,l,[void 0,a,s])}visitList(e){const{["type"]:r,["offset"]:n=0,["child"]:s}=e,a=xt(e.nullBitmap),u=rf(e.valueOffsets),{["length"]:l=u.length-1,["nullCount"]:d=e.nullBitmap?-1:0}=e;return new sr(r,n,l,d,[u,void 0,a],[s])}visitStruct(e){const{["type"]:r,["offset"]:n=0,["children"]:s=[]}=e,a=xt(e.nullBitmap),{length:u=s.reduce((d,{length:m})=>Math.max(d,m),0),nullCount:l=e.nullBitmap?-1:0}=e;return new sr(r,n,u,l,[void 0,void 0,a],s)}visitUnion(e){const{["type"]:r,["offset"]:n=0,["children"]:s=[]}=e,a=xt(e.nullBitmap),u=rr(r.ArrayType,e.typeIds),{["length"]:l=u.length,["nullCount"]:d=e.nullBitmap?-1:0}=e;if(ct.isSparseUnion(r))return new sr(r,n,l,d,[void 0,void 0,a,u],s);const m=rf(e.valueOffsets);return new sr(r,n,l,d,[m,void 0,a,u],s)}visitDictionary(e){const{["type"]:r,["offset"]:n=0}=e,s=xt(e.nullBitmap),a=rr(r.indices.ArrayType,e.data),{["dictionary"]:u=new jt([new hf().visit({type:r.dictionary})])}=e,{["length"]:l=a.length,["nullCount"]:d=e.nullBitmap?-1:0}=e;return new sr(r,n,l,d,[void 0,a,s],[],u)}visitInterval(e){const{["type"]:r,["offset"]:n=0}=e,s=xt(e.nullBitmap),a=rr(r.ArrayType,e.data),{["length"]:u=a.length/wo(r),["nullCount"]:l=e.nullBitmap?-1:0}=e;return new sr(r,n,u,l,[void 0,a,s])}visitFixedSizeList(e){const{["type"]:r,["offset"]:n=0,["child"]:s=new hf().visit({type:r.valueType})}=e,a=xt(e.nullBitmap),{["length"]:u=s.length/wo(r),["nullCount"]:l=e.nullBitmap?-1:0}=e;return new sr(r,n,u,l,[void 0,void 0,a],[s])}visitMap(e){const{["type"]:r,["offset"]:n=0,["child"]:s=new hf().visit({type:r.childType})}=e,a=xt(e.nullBitmap),u=rf(e.valueOffsets),{["length"]:l=u.length-1,["nullCount"]:d=e.nullBitmap?-1:0}=e;return new sr(r,n,l,d,[u,void 0,a],[s])}}function Rt(t){return new hf().visit(t)}class iE{constructor(e=0,r){this.numChunks=e,this.getChunkIterator=r,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const e=this.chunkIterator.next();if(!e.done)return e;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function xP(t){return t.reduce((e,r)=>e+r.nullCount,0)}function MP(t){return t.reduce((e,r,n)=>(e[n+1]=e[n]+r.length,e),new Uint32Array(t.length+1))}function FP(t,e,r,n){const s=[];for(let a=-1,u=t.length;++a<u;){const l=t[a],d=e[a],{length:m}=l;if(d>=n)break;if(r>=d+m)continue;if(d>=r&&d+m<=n){s.push(l);continue}const y=Math.max(0,r-d),g=Math.min(n-d,m);s.push(l.slice(y,g-y))}return s.length===0&&s.push(t[0].slice(0,0)),s}function z0(t,e,r,n){let s=0,a=0,u=e.length-1;do{if(s>=u-1)return r<e[u]?n(t,s,r-e[s]):null;a=s+Math.trunc((u-s)*.5),r<e[a]?u=a:s=a}while(s<u)}function q0(t,e){return t.getValid(e)}function Uc(t){function e(r,n,s){return t(r[n],s)}return function(r){const n=this.data;return z0(n,this._offsets,r,e)}}function BP(t){let e;function r(n,s,a){return t(n[s],a,e)}return function(n,s){const a=this.data;e=s;const u=z0(a,this._offsets,n,r);return e=void 0,u}}function LP(t){let e;function r(n,s,a){let u=a,l=0,d=0;for(let m=s-1,y=n.length;++m<y;){const g=n[m];if(~(l=t(g,e,u)))return d+l;u=0,d+=g.length}return-1}return function(n,s){e=n;const a=this.data,u=typeof s!="number"?r(a,0,0):z0(a,this._offsets,s,r);return e=void 0,u}}class ft extends Ct{}function DL(t,e){return e===null&&t.length>0?0:-1}function RL(t,e){const{nullBitmap:r}=t;if(!r||t.nullCount<=0)return-1;let n=0;for(const s of new U0(r,t.offset+(e||0),t.length,r,TP)){if(!s)return n;++n}return-1}function bt(t,e,r){if(e===void 0)return-1;if(e===null)return RL(t,r);const n=Ln.getVisitFn(t),s=yl(e);for(let a=(r||0)-1,u=t.length;++a<u;)if(s(n(t,a)))return a;return-1}function jP(t,e,r){const n=Ln.getVisitFn(t),s=yl(e);for(let a=(r||0)-1,u=t.length;++a<u;)if(s(n(t,a)))return a;return-1}ft.prototype.visitNull=DL;ft.prototype.visitBool=bt;ft.prototype.visitInt=bt;ft.prototype.visitInt8=bt;ft.prototype.visitInt16=bt;ft.prototype.visitInt32=bt;ft.prototype.visitInt64=bt;ft.prototype.visitUint8=bt;ft.prototype.visitUint16=bt;ft.prototype.visitUint32=bt;ft.prototype.visitUint64=bt;ft.prototype.visitFloat=bt;ft.prototype.visitFloat16=bt;ft.prototype.visitFloat32=bt;ft.prototype.visitFloat64=bt;ft.prototype.visitUtf8=bt;ft.prototype.visitBinary=bt;ft.prototype.visitFixedSizeBinary=bt;ft.prototype.visitDate=bt;ft.prototype.visitDateDay=bt;ft.prototype.visitDateMillisecond=bt;ft.prototype.visitTimestamp=bt;ft.prototype.visitTimestampSecond=bt;ft.prototype.visitTimestampMillisecond=bt;ft.prototype.visitTimestampMicrosecond=bt;ft.prototype.visitTimestampNanosecond=bt;ft.prototype.visitTime=bt;ft.prototype.visitTimeSecond=bt;ft.prototype.visitTimeMillisecond=bt;ft.prototype.visitTimeMicrosecond=bt;ft.prototype.visitTimeNanosecond=bt;ft.prototype.visitDecimal=bt;ft.prototype.visitList=bt;ft.prototype.visitStruct=bt;ft.prototype.visitUnion=bt;ft.prototype.visitDenseUnion=jP;ft.prototype.visitSparseUnion=jP;ft.prototype.visitDictionary=bt;ft.prototype.visitInterval=bt;ft.prototype.visitIntervalDayTime=bt;ft.prototype.visitIntervalYearMonth=bt;ft.prototype.visitFixedSizeList=bt;ft.prototype.visitMap=bt;const Xp=new ft;class dt extends Ct{}function gt(t){const{type:e}=t;if(t.nullCount===0&&t.stride===1&&(e.typeId===fe.Timestamp||e instanceof Ra&&e.bitWidth!==64||e instanceof $f&&e.bitWidth!==64||e instanceof Cf&&e.precision!==xn.HALF))return new iE(t.data.length,n=>{const s=t.data[n];return s.values.subarray(0,s.length)[Symbol.iterator]()});let r=0;return new iE(t.data.length,n=>{const a=t.data[n].length,u=t.slice(r,r+a);return r+=a,new CL(u)})}class CL{constructor(e){this.vector=e,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}dt.prototype.visitNull=gt;dt.prototype.visitBool=gt;dt.prototype.visitInt=gt;dt.prototype.visitInt8=gt;dt.prototype.visitInt16=gt;dt.prototype.visitInt32=gt;dt.prototype.visitInt64=gt;dt.prototype.visitUint8=gt;dt.prototype.visitUint16=gt;dt.prototype.visitUint32=gt;dt.prototype.visitUint64=gt;dt.prototype.visitFloat=gt;dt.prototype.visitFloat16=gt;dt.prototype.visitFloat32=gt;dt.prototype.visitFloat64=gt;dt.prototype.visitUtf8=gt;dt.prototype.visitBinary=gt;dt.prototype.visitFixedSizeBinary=gt;dt.prototype.visitDate=gt;dt.prototype.visitDateDay=gt;dt.prototype.visitDateMillisecond=gt;dt.prototype.visitTimestamp=gt;dt.prototype.visitTimestampSecond=gt;dt.prototype.visitTimestampMillisecond=gt;dt.prototype.visitTimestampMicrosecond=gt;dt.prototype.visitTimestampNanosecond=gt;dt.prototype.visitTime=gt;dt.prototype.visitTimeSecond=gt;dt.prototype.visitTimeMillisecond=gt;dt.prototype.visitTimeMicrosecond=gt;dt.prototype.visitTimeNanosecond=gt;dt.prototype.visitDecimal=gt;dt.prototype.visitList=gt;dt.prototype.visitStruct=gt;dt.prototype.visitUnion=gt;dt.prototype.visitDenseUnion=gt;dt.prototype.visitSparseUnion=gt;dt.prototype.visitDictionary=gt;dt.prototype.visitInterval=gt;dt.prototype.visitIntervalDayTime=gt;dt.prototype.visitIntervalYearMonth=gt;dt.prototype.visitFixedSizeList=gt;dt.prototype.visitMap=gt;const V0=new dt,$L=(t,e)=>t+e;class La extends Ct{visitNull(e,r){return 0}visitInt(e,r){return e.type.bitWidth/8}visitFloat(e,r){return e.type.ArrayType.BYTES_PER_ELEMENT}visitBool(e,r){return 1/8}visitDecimal(e,r){return e.type.bitWidth/8}visitDate(e,r){return(e.type.unit+1)*4}visitTime(e,r){return e.type.bitWidth/8}visitTimestamp(e,r){return e.type.unit===Mt.SECOND?4:8}visitInterval(e,r){return(e.type.unit+1)*4}visitStruct(e,r){return e.children.reduce((n,s)=>n+Bs.visit(s,r),0)}visitFixedSizeBinary(e,r){return e.type.byteWidth}visitMap(e,r){return 8+e.children.reduce((n,s)=>n+Bs.visit(s,r),0)}visitDictionary(e,r){var n;return e.type.indices.bitWidth/8+(((n=e.dictionary)===null||n===void 0?void 0:n.getByteLength(e.values[r]))||0)}}const AL=({valueOffsets:t},e)=>8+(t[e+1]-t[e]),NL=({valueOffsets:t},e)=>8+(t[e+1]-t[e]),TL=({valueOffsets:t,stride:e,children:r},n)=>{const s=r[0],{[n*e]:a}=t,{[n*e+1]:u}=t,l=Bs.getVisitFn(s.type),d=s.slice(a,u-a);let m=8;for(let y=-1,g=u-a;++y<g;)m+=l(d,y);return m},xL=({stride:t,children:e},r)=>{const n=e[0],s=n.slice(r*t,t),a=Bs.getVisitFn(n.type);let u=0;for(let l=-1,d=s.length;++l<d;)u+=a(s,l);return u},ML=(t,e)=>t.type.mode===si.Dense?UP(t,e):zP(t,e),UP=({type:t,children:e,typeIds:r,valueOffsets:n},s)=>{const a=t.typeIdToChildIndex[r[s]];return 8+Bs.visit(e[a],n[s])},zP=({children:t},e)=>4+Bs.visitMany(t,t.map(()=>e)).reduce($L,0);La.prototype.visitUtf8=AL;La.prototype.visitBinary=NL;La.prototype.visitList=TL;La.prototype.visitFixedSizeList=xL;La.prototype.visitUnion=ML;La.prototype.visitDenseUnion=UP;La.prototype.visitSparseUnion=zP;const Bs=new La;var qP;const VP={},KP={};class jt{constructor(e){var r,n,s;const a=e[0]instanceof jt?e.flatMap(l=>l.data):e;if(a.length===0||a.some(l=>!(l instanceof sr)))throw new TypeError("Vector constructor expects an Array of Data instances.");const u=(r=a[0])===null||r===void 0?void 0:r.type;switch(a.length){case 0:this._offsets=[0];break;case 1:{const{get:l,set:d,indexOf:m,byteLength:y}=VP[u.typeId],g=a[0];this.isValid=b=>q0(g,b),this.get=b=>l(g,b),this.set=(b,S)=>d(g,b,S),this.indexOf=b=>m(g,b),this.getByteLength=b=>y(g,b),this._offsets=[0,g.length];break}default:Object.setPrototypeOf(this,KP[u.typeId]),this._offsets=MP(a);break}this.data=a,this.type=u,this.stride=wo(u),this.numChildren=(s=(n=u.children)===null||n===void 0?void 0:n.length)!==null&&s!==void 0?s:0,this.length=this._offsets[this._offsets.length-1]}get byteLength(){return this._byteLength===-1&&(this._byteLength=this.data.reduce((e,r)=>e+r.byteLength,0)),this._byteLength}get nullCount(){return this._nullCount===-1&&(this._nullCount=xP(this.data)),this._nullCount}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${fe[this.type.typeId]}Vector`}isValid(e){return!1}get(e){return null}set(e,r){}indexOf(e,r){return-1}includes(e,r){return this.indexOf(e,r)>0}getByteLength(e){return 0}[Symbol.iterator](){return V0.visit(this)}concat(...e){return new jt(this.data.concat(e.flatMap(r=>r.data).flat(Number.POSITIVE_INFINITY)))}slice(e,r){return new jt(NP(this,e,r,({data:n,_offsets:s},a,u)=>FP(n,s,a,u)))}toJSON(){return[...this]}toArray(){const{type:e,data:r,length:n,stride:s,ArrayType:a}=this;switch(e.typeId){case fe.Int:case fe.Float:case fe.Decimal:case fe.Time:case fe.Timestamp:switch(r.length){case 0:return new a;case 1:return r[0].values.subarray(0,n*s);default:return r.reduce((u,{values:l,length:d})=>(u.array.set(l.subarray(0,d*s),u.offset),u.offset+=d*s,u),{array:new a(n*s),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(e){var r;return this.getChildAt((r=this.type.children)===null||r===void 0?void 0:r.findIndex(n=>n.name===e))}getChildAt(e){return e>-1&&e<this.numChildren?new jt(this.data.map(({children:r})=>r[e])):null}get isMemoized(){return ct.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(ct.isDictionary(this.type)){const e=new Zp(this.data[0].dictionary),r=this.data.map(n=>{const s=n.clone();return s.dictionary=e,s});return new jt(r)}return new Zp(this)}unmemoize(){if(ct.isDictionary(this.type)&&this.isMemoized){const e=this.data[0].dictionary.unmemoize(),r=this.data.map(n=>{const s=n.clone();return s.dictionary=e,s});return new jt(r)}return this}}qP=Symbol.toStringTag;jt[qP]=(t=>{t.type=ct.prototype,t.data=[],t.length=0,t.stride=1,t.numChildren=0,t._nullCount=-1,t._byteLength=-1,t._offsets=new Uint32Array([0]),t[Symbol.isConcatSpreadable]=!0;const e=Object.keys(fe).map(r=>fe[r]).filter(r=>typeof r=="number"&&r!==fe.NONE);for(const r of e){const n=Ln.getVisitFnByTypeId(r),s=$i.getVisitFnByTypeId(r),a=Xp.getVisitFnByTypeId(r),u=Bs.getVisitFnByTypeId(r);VP[r]={get:n,set:s,indexOf:a,byteLength:u},KP[r]=Object.create(t,{isValid:{value:Uc(q0)},get:{value:Uc(Ln.getVisitFnByTypeId(r))},set:{value:BP($i.getVisitFnByTypeId(r))},indexOf:{value:LP(Xp.getVisitFnByTypeId(r))},getByteLength:{value:Uc(Bs.getVisitFnByTypeId(r))}})}return"Vector"})(jt.prototype);class Zp extends jt{constructor(e){super(e.data);const r=this.get,n=this.set,s=this.slice,a=new Array(this.length);Object.defineProperty(this,"get",{value(u){const l=a[u];if(l!==void 0)return l;const d=r.call(this,u);return a[u]=d,d}}),Object.defineProperty(this,"set",{value(u,l){n.call(this,u,l),a[u]=l}}),Object.defineProperty(this,"slice",{value:(u,l)=>new Zp(s.call(this,u,l))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new jt(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}class Ng{constructor(){this.bb=null,this.bb_pos=0}__init(e,r){return this.bb_pos=e,this.bb=r,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(e,r,n,s){return e.prep(8,24),e.writeInt64(s),e.pad(4),e.writeInt32(n),e.writeInt64(r),e.offset()}}const Kv=2,ks=4,Eo=4,nr=4,ma=new Int32Array(2),sE=new Float32Array(ma.buffer),oE=new Float64Array(ma.buffer),ep=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;let $o=class Tg{constructor(e,r){this.low=e|0,this.high=r|0}static create(e,r){return e==0&&r==0?Tg.ZERO:new Tg(e,r)}toFloat64(){return(this.low>>>0)+this.high*4294967296}equals(e){return this.low==e.low&&this.high==e.high}};$o.ZERO=new $o(0,0);var xg;(function(t){t[t.UTF8_BYTES=1]="UTF8_BYTES",t[t.UTF16_STRING=2]="UTF16_STRING"})(xg||(xg={}));let Zc=class WP{constructor(e){this.bytes_=e,this.position_=0}static allocate(e){return new WP(new Uint8Array(e))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(e){this.position_=e}capacity(){return this.bytes_.length}readInt8(e){return this.readUint8(e)<<24>>24}readUint8(e){return this.bytes_[e]}readInt16(e){return this.readUint16(e)<<16>>16}readUint16(e){return this.bytes_[e]|this.bytes_[e+1]<<8}readInt32(e){return this.bytes_[e]|this.bytes_[e+1]<<8|this.bytes_[e+2]<<16|this.bytes_[e+3]<<24}readUint32(e){return this.readInt32(e)>>>0}readInt64(e){return new $o(this.readInt32(e),this.readInt32(e+4))}readUint64(e){return new $o(this.readUint32(e),this.readUint32(e+4))}readFloat32(e){return ma[0]=this.readInt32(e),sE[0]}readFloat64(e){return ma[ep?0:1]=this.readInt32(e),ma[ep?1:0]=this.readInt32(e+4),oE[0]}writeInt8(e,r){this.bytes_[e]=r}writeUint8(e,r){this.bytes_[e]=r}writeInt16(e,r){this.bytes_[e]=r,this.bytes_[e+1]=r>>8}writeUint16(e,r){this.bytes_[e]=r,this.bytes_[e+1]=r>>8}writeInt32(e,r){this.bytes_[e]=r,this.bytes_[e+1]=r>>8,this.bytes_[e+2]=r>>16,this.bytes_[e+3]=r>>24}writeUint32(e,r){this.bytes_[e]=r,this.bytes_[e+1]=r>>8,this.bytes_[e+2]=r>>16,this.bytes_[e+3]=r>>24}writeInt64(e,r){this.writeInt32(e,r.low),this.writeInt32(e+4,r.high)}writeUint64(e,r){this.writeUint32(e,r.low),this.writeUint32(e+4,r.high)}writeFloat32(e,r){sE[0]=r,this.writeInt32(e,ma[0])}writeFloat64(e,r){oE[0]=r,this.writeInt32(e,ma[ep?0:1]),this.writeInt32(e+4,ma[ep?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+ks+Eo)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let e="";for(let r=0;r<Eo;r++)e+=String.fromCharCode(this.readInt8(this.position_+ks+r));return e}__offset(e,r){const n=e-this.readInt32(e);return r<this.readInt16(n)?this.readInt16(n+r):0}__union(e,r){return e.bb_pos=r+this.readInt32(r),e.bb=this,e}__string(e,r){e+=this.readInt32(e);const n=this.readInt32(e);let s="",a=0;if(e+=ks,r===xg.UTF8_BYTES)return this.bytes_.subarray(e,e+n);for(;a<n;){let u;const l=this.readUint8(e+a++);if(l<192)u=l;else{const d=this.readUint8(e+a++);if(l<224)u=(l&31)<<6|d&63;else{const m=this.readUint8(e+a++);if(l<240)u=(l&15)<<12|(d&63)<<6|m&63;else{const y=this.readUint8(e+a++);u=(l&7)<<18|(d&63)<<12|(m&63)<<6|y&63}}}u<65536?s+=String.fromCharCode(u):(u-=65536,s+=String.fromCharCode((u>>10)+55296,(u&1023)+56320))}return s}__union_with_string(e,r){return typeof e=="string"?this.__string(r):this.__union(e,r)}__indirect(e){return e+this.readInt32(e)}__vector(e){return e+this.readInt32(e)+ks}__vector_len(e){return this.readInt32(e+this.readInt32(e))}__has_identifier(e){if(e.length!=Eo)throw new Error("FlatBuffers: file identifier must be length "+Eo);for(let r=0;r<Eo;r++)if(e.charCodeAt(r)!=this.readInt8(this.position()+ks+r))return!1;return!0}createLong(e,r){return $o.create(e,r)}createScalarList(e,r){const n=[];for(let s=0;s<r;++s)e(s)!==null&&n.push(e(s));return n}createObjList(e,r){const n=[];for(let s=0;s<r;++s){const a=e(s);a!==null&&n.push(a.unpack())}return n}},HP=class QP{constructor(e){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null;let r;e?r=e:r=1024,this.bb=Zc.allocate(r),this.space=r}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(e){this.force_defaults=e}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(e,r){e>this.minalign&&(this.minalign=e);const n=~(this.bb.capacity()-this.space+r)+1&e-1;for(;this.space<n+e+r;){const s=this.bb.capacity();this.bb=QP.growByteBuffer(this.bb),this.space+=this.bb.capacity()-s}this.pad(n)}pad(e){for(let r=0;r<e;r++)this.bb.writeInt8(--this.space,0)}writeInt8(e){this.bb.writeInt8(this.space-=1,e)}writeInt16(e){this.bb.writeInt16(this.space-=2,e)}writeInt32(e){this.bb.writeInt32(this.space-=4,e)}writeInt64(e){this.bb.writeInt64(this.space-=8,e)}writeFloat32(e){this.bb.writeFloat32(this.space-=4,e)}writeFloat64(e){this.bb.writeFloat64(this.space-=8,e)}addInt8(e){this.prep(1,0),this.writeInt8(e)}addInt16(e){this.prep(2,0),this.writeInt16(e)}addInt32(e){this.prep(4,0),this.writeInt32(e)}addInt64(e){this.prep(8,0),this.writeInt64(e)}addFloat32(e){this.prep(4,0),this.writeFloat32(e)}addFloat64(e){this.prep(8,0),this.writeFloat64(e)}addFieldInt8(e,r,n){(this.force_defaults||r!=n)&&(this.addInt8(r),this.slot(e))}addFieldInt16(e,r,n){(this.force_defaults||r!=n)&&(this.addInt16(r),this.slot(e))}addFieldInt32(e,r,n){(this.force_defaults||r!=n)&&(this.addInt32(r),this.slot(e))}addFieldInt64(e,r,n){(this.force_defaults||!r.equals(n))&&(this.addInt64(r),this.slot(e))}addFieldFloat32(e,r,n){(this.force_defaults||r!=n)&&(this.addFloat32(r),this.slot(e))}addFieldFloat64(e,r,n){(this.force_defaults||r!=n)&&(this.addFloat64(r),this.slot(e))}addFieldOffset(e,r,n){(this.force_defaults||r!=n)&&(this.addOffset(r),this.slot(e))}addFieldStruct(e,r,n){r!=n&&(this.nested(r),this.slot(e))}nested(e){if(e!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")}slot(e){this.vtable!==null&&(this.vtable[e]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(e){const r=e.capacity();if(r&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const n=r<<1,s=Zc.allocate(n);return s.setPosition(n-r),s.bytes().set(e.bytes(),n-r),s}addOffset(e){this.prep(ks,0),this.writeInt32(this.offset()-e+ks)}startObject(e){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=e;for(let r=0;r<e;r++)this.vtable[r]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const e=this.offset();let r=this.vtable_in_use-1;for(;r>=0&&this.vtable[r]==0;r--);const n=r+1;for(;r>=0;r--)this.addInt16(this.vtable[r]!=0?e-this.vtable[r]:0);const s=2;this.addInt16(e-this.object_start);const a=(n+s)*Kv;this.addInt16(a);let u=0;const l=this.space;e:for(r=0;r<this.vtables.length;r++){const d=this.bb.capacity()-this.vtables[r];if(a==this.bb.readInt16(d)){for(let m=Kv;m<a;m+=Kv)if(this.bb.readInt16(l+m)!=this.bb.readInt16(d+m))continue e;u=this.vtables[r];break}}return u?(this.space=this.bb.capacity()-e,this.bb.writeInt32(this.space,u-e)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-e,this.offset()-e)),this.isNested=!1,e}finish(e,r,n){const s=n?nr:0;if(r){const a=r;if(this.prep(this.minalign,ks+Eo+s),a.length!=Eo)throw new Error("FlatBuffers: file identifier must be length "+Eo);for(let u=Eo-1;u>=0;u--)this.writeInt8(a.charCodeAt(u))}this.prep(this.minalign,ks+s),this.addOffset(e),s&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(e,r){this.finish(e,r,!0)}requiredField(e,r){const n=this.bb.capacity()-e,s=n-this.bb.readInt32(n);if(!(this.bb.readInt16(s+r)!=0))throw new Error("FlatBuffers: field "+r+" must be set")}startVector(e,r,n){this.notNested(),this.vector_num_elems=r,this.prep(ks,e*r),this.prep(n,e*r)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(e){if(!e)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(e))return this.string_maps.get(e);const r=this.createString(e);return this.string_maps.set(e,r),r}createString(e){if(!e)return 0;let r;if(e instanceof Uint8Array)r=e;else{r=[];let n=0;for(;n<e.length;){let s;const a=e.charCodeAt(n++);if(a<55296||a>=56320)s=a;else{const u=e.charCodeAt(n++);s=(a<<10)+u+-56613888}s<128?r.push(s):(s<2048?r.push(s>>6&31|192):(s<65536?r.push(s>>12&15|224):r.push(s>>18&7|240,s>>12&63|128),r.push(s>>6&63|128)),r.push(s&63|128))}}this.addInt8(0),this.startVector(1,r.length,1),this.bb.setPosition(this.space-=r.length);for(let n=0,s=this.space,a=this.bb.bytes();n<r.length;n++)a[s++]=r[n];return this.endVector()}createLong(e,r){return $o.create(e,r)}createObjectOffset(e){return e===null?0:typeof e=="string"?this.createString(e):e.pack(this)}createObjectOffsetList(e){const r=[];for(let n=0;n<e.length;++n){const s=e[n];if(s!==null)r.push(this.createObjectOffset(s));else throw new Error("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return r}createStructOffsetList(e,r){return r(this,e.length),this.createObjectOffsetList(e),this.endVector()}};class Fr{constructor(){this.bb=null,this.bb_pos=0}__init(e,r){return this.bb_pos=e,this.bb=r,this}static getRootAsKeyValue(e,r){return(r||new Fr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsKeyValue(e,r){return e.setPosition(e.position()+nr),(r||new Fr).__init(e.readInt32(e.position())+e.position(),e)}key(e){const r=this.bb.__offset(this.bb_pos,4);return r?this.bb.__string(this.bb_pos+r,e):null}value(e){const r=this.bb.__offset(this.bb_pos,6);return r?this.bb.__string(this.bb_pos+r,e):null}static startKeyValue(e){e.startObject(2)}static addKey(e,r){e.addFieldOffset(0,r,0)}static addValue(e,r){e.addFieldOffset(1,r,0)}static endKeyValue(e){return e.endObject()}static createKeyValue(e,r,n){return Fr.startKeyValue(e),Fr.addKey(e,r),Fr.addValue(e,n),Fr.endKeyValue(e)}}var el;(function(t){t[t.V1=0]="V1",t[t.V2=1]="V2",t[t.V3=2]="V3",t[t.V4=3]="V4",t[t.V5=4]="V5"})(el||(el={}));var tl;(function(t){t[t.Little=0]="Little",t[t.Big=1]="Big"})(tl||(tl={}));var em;(function(t){t[t.DenseArray=0]="DenseArray"})(em||(em={}));class ri{constructor(){this.bb=null,this.bb_pos=0}__init(e,r){return this.bb_pos=e,this.bb=r,this}static getRootAsInt(e,r){return(r||new ri).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsInt(e,r){return e.setPosition(e.position()+nr),(r||new ri).__init(e.readInt32(e.position())+e.position(),e)}bitWidth(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}isSigned(){const e=this.bb.__offset(this.bb_pos,6);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startInt(e){e.startObject(2)}static addBitWidth(e,r){e.addFieldInt32(0,r,0)}static addIsSigned(e,r){e.addFieldInt8(1,+r,0)}static endInt(e){return e.endObject()}static createInt(e,r,n){return ri.startInt(e),ri.addBitWidth(e,r),ri.addIsSigned(e,n),ri.endInt(e)}}class Io{constructor(){this.bb=null,this.bb_pos=0}__init(e,r){return this.bb_pos=e,this.bb=r,this}static getRootAsDictionaryEncoding(e,r){return(r||new Io).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDictionaryEncoding(e,r){return e.setPosition(e.position()+nr),(r||new Io).__init(e.readInt32(e.position())+e.position(),e)}id(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}indexType(e){const r=this.bb.__offset(this.bb_pos,6);return r?(e||new ri).__init(this.bb.__indirect(this.bb_pos+r),this.bb):null}isOrdered(){const e=this.bb.__offset(this.bb_pos,8);return e?!!this.bb.readInt8(this.bb_pos+e):!1}dictionaryKind(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt16(this.bb_pos+e):em.DenseArray}static startDictionaryEncoding(e){e.startObject(4)}static addId(e,r){e.addFieldInt64(0,r,e.createLong(0,0))}static addIndexType(e,r){e.addFieldOffset(1,r,0)}static addIsOrdered(e,r){e.addFieldInt8(2,+r,0)}static addDictionaryKind(e,r){e.addFieldInt16(3,r,em.DenseArray)}static endDictionaryEncoding(e){return e.endObject()}}class Eu{constructor(){this.bb=null,this.bb_pos=0}__init(e,r){return this.bb_pos=e,this.bb=r,this}static getRootAsBinary(e,r){return(r||new Eu).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBinary(e,r){return e.setPosition(e.position()+nr),(r||new Eu).__init(e.readInt32(e.position())+e.position(),e)}static startBinary(e){e.startObject(0)}static endBinary(e){return e.endObject()}static createBinary(e){return Eu.startBinary(e),Eu.endBinary(e)}}class Iu{constructor(){this.bb=null,this.bb_pos=0}__init(e,r){return this.bb_pos=e,this.bb=r,this}static getRootAsBool(e,r){return(r||new Iu).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBool(e,r){return e.setPosition(e.position()+nr),(r||new Iu).__init(e.readInt32(e.position())+e.position(),e)}static startBool(e){e.startObject(0)}static endBool(e){return e.endObject()}static createBool(e){return Iu.startBool(e),Iu.endBool(e)}}var tm;(function(t){t[t.DAY=0]="DAY",t[t.MILLISECOND=1]="MILLISECOND"})(tm||(tm={}));let dp=class $c{constructor(){this.bb=null,this.bb_pos=0}__init(e,r){return this.bb_pos=e,this.bb=r,this}static getRootAsDate(e,r){return(r||new $c).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDate(e,r){return e.setPosition(e.position()+nr),(r||new $c).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):tm.MILLISECOND}static startDate(e){e.startObject(1)}static addUnit(e,r){e.addFieldInt16(0,r,tm.MILLISECOND)}static endDate(e){return e.endObject()}static createDate(e,r){return $c.startDate(e),$c.addUnit(e,r),$c.endDate(e)}};class $n{constructor(){this.bb=null,this.bb_pos=0}__init(e,r){return this.bb_pos=e,this.bb=r,this}static getRootAsDecimal(e,r){return(r||new $n).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDecimal(e,r){return e.setPosition(e.position()+nr),(r||new $n).__init(e.readInt32(e.position())+e.position(),e)}precision(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}scale(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):0}bitWidth(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt32(this.bb_pos+e):128}static startDecimal(e){e.startObject(3)}static addPrecision(e,r){e.addFieldInt32(0,r,0)}static addScale(e,r){e.addFieldInt32(1,r,0)}static addBitWidth(e,r){e.addFieldInt32(2,r,128)}static endDecimal(e){return e.endObject()}static createDecimal(e,r,n,s){return $n.startDecimal(e),$n.addPrecision(e,r),$n.addScale(e,n),$n.addBitWidth(e,s),$n.endDecimal(e)}}var rl;(function(t){t[t.SECOND=0]="SECOND",t[t.MILLISECOND=1]="MILLISECOND",t[t.MICROSECOND=2]="MICROSECOND",t[t.NANOSECOND=3]="NANOSECOND"})(rl||(rl={}));class Ps{constructor(){this.bb=null,this.bb_pos=0}__init(e,r){return this.bb_pos=e,this.bb=r,this}static getRootAsFixedSizeBinary(e,r){return(r||new Ps).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFixedSizeBinary(e,r){return e.setPosition(e.position()+nr),(r||new Ps).__init(e.readInt32(e.position())+e.position(),e)}byteWidth(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}static startFixedSizeBinary(e){e.startObject(1)}static addByteWidth(e,r){e.addFieldInt32(0,r,0)}static endFixedSizeBinary(e){return e.endObject()}static createFixedSizeBinary(e,r){return Ps.startFixedSizeBinary(e),Ps.addByteWidth(e,r),Ps.endFixedSizeBinary(e)}}class Ds{constructor(){this.bb=null,this.bb_pos=0}__init(e,r){return this.bb_pos=e,this.bb=r,this}static getRootAsFixedSizeList(e,r){return(r||new Ds).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFixedSizeList(e,r){return e.setPosition(e.position()+nr),(r||new Ds).__init(e.readInt32(e.position())+e.position(),e)}listSize(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}static startFixedSizeList(e){e.startObject(1)}static addListSize(e,r){e.addFieldInt32(0,r,0)}static endFixedSizeList(e){return e.endObject()}static createFixedSizeList(e,r){return Ds.startFixedSizeList(e),Ds.addListSize(e,r),Ds.endFixedSizeList(e)}}var rm;(function(t){t[t.HALF=0]="HALF",t[t.SINGLE=1]="SINGLE",t[t.DOUBLE=2]="DOUBLE"})(rm||(rm={}));class Rs{constructor(){this.bb=null,this.bb_pos=0}__init(e,r){return this.bb_pos=e,this.bb=r,this}static getRootAsFloatingPoint(e,r){return(r||new Rs).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFloatingPoint(e,r){return e.setPosition(e.position()+nr),(r||new Rs).__init(e.readInt32(e.position())+e.position(),e)}precision(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):rm.HALF}static startFloatingPoint(e){e.startObject(1)}static addPrecision(e,r){e.addFieldInt16(0,r,rm.HALF)}static endFloatingPoint(e){return e.endObject()}static createFloatingPoint(e,r){return Rs.startFloatingPoint(e),Rs.addPrecision(e,r),Rs.endFloatingPoint(e)}}var nm;(function(t){t[t.YEAR_MONTH=0]="YEAR_MONTH",t[t.DAY_TIME=1]="DAY_TIME",t[t.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(nm||(nm={}));class Cs{constructor(){this.bb=null,this.bb_pos=0}__init(e,r){return this.bb_pos=e,this.bb=r,this}static getRootAsInterval(e,r){return(r||new Cs).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsInterval(e,r){return e.setPosition(e.position()+nr),(r||new Cs).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):nm.YEAR_MONTH}static startInterval(e){e.startObject(1)}static addUnit(e,r){e.addFieldInt16(0,r,nm.YEAR_MONTH)}static endInterval(e){return e.endObject()}static createInterval(e,r){return Cs.startInterval(e),Cs.addUnit(e,r),Cs.endInterval(e)}}class Ou{constructor(){this.bb=null,this.bb_pos=0}__init(e,r){return this.bb_pos=e,this.bb=r,this}static getRootAsList(e,r){return(r||new Ou).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsList(e,r){return e.setPosition(e.position()+nr),(r||new Ou).__init(e.readInt32(e.position())+e.position(),e)}static startList(e){e.startObject(0)}static endList(e){return e.endObject()}static createList(e){return Ou.startList(e),Ou.endList(e)}}let hp=class Ac{constructor(){this.bb=null,this.bb_pos=0}__init(e,r){return this.bb_pos=e,this.bb=r,this}static getRootAsMap(e,r){return(r||new Ac).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMap(e,r){return e.setPosition(e.position()+nr),(r||new Ac).__init(e.readInt32(e.position())+e.position(),e)}keysSorted(){const e=this.bb.__offset(this.bb_pos,4);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startMap(e){e.startObject(1)}static addKeysSorted(e,r){e.addFieldInt8(0,+r,0)}static endMap(e){return e.endObject()}static createMap(e,r){return Ac.startMap(e),Ac.addKeysSorted(e,r),Ac.endMap(e)}};class ku{constructor(){this.bb=null,this.bb_pos=0}__init(e,r){return this.bb_pos=e,this.bb=r,this}static getRootAsNull(e,r){return(r||new ku).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsNull(e,r){return e.setPosition(e.position()+nr),(r||new ku).__init(e.readInt32(e.position())+e.position(),e)}static startNull(e){e.startObject(0)}static endNull(e){return e.endObject()}static createNull(e){return ku.startNull(e),ku.endNull(e)}}class Pu{constructor(){this.bb=null,this.bb_pos=0}__init(e,r){return this.bb_pos=e,this.bb=r,this}static getRootAsStruct_(e,r){return(r||new Pu).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsStruct_(e,r){return e.setPosition(e.position()+nr),(r||new Pu).__init(e.readInt32(e.position())+e.position(),e)}static startStruct_(e){e.startObject(0)}static endStruct_(e){return e.endObject()}static createStruct_(e){return Pu.startStruct_(e),Pu.endStruct_(e)}}class Oi{constructor(){this.bb=null,this.bb_pos=0}__init(e,r){return this.bb_pos=e,this.bb=r,this}static getRootAsTime(e,r){return(r||new Oi).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTime(e,r){return e.setPosition(e.position()+nr),(r||new Oi).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):rl.MILLISECOND}bitWidth(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):32}static startTime(e){e.startObject(2)}static addUnit(e,r){e.addFieldInt16(0,r,rl.MILLISECOND)}static addBitWidth(e,r){e.addFieldInt32(1,r,32)}static endTime(e){return e.endObject()}static createTime(e,r,n){return Oi.startTime(e),Oi.addUnit(e,r),Oi.addBitWidth(e,n),Oi.endTime(e)}}class ki{constructor(){this.bb=null,this.bb_pos=0}__init(e,r){return this.bb_pos=e,this.bb=r,this}static getRootAsTimestamp(e,r){return(r||new ki).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTimestamp(e,r){return e.setPosition(e.position()+nr),(r||new ki).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):rl.SECOND}timezone(e){const r=this.bb.__offset(this.bb_pos,6);return r?this.bb.__string(this.bb_pos+r,e):null}static startTimestamp(e){e.startObject(2)}static addUnit(e,r){e.addFieldInt16(0,r,rl.SECOND)}static addTimezone(e,r){e.addFieldOffset(1,r,0)}static endTimestamp(e){return e.endObject()}static createTimestamp(e,r,n){return ki.startTimestamp(e),ki.addUnit(e,r),ki.addTimezone(e,n),ki.endTimestamp(e)}}var im;(function(t){t[t.Sparse=0]="Sparse",t[t.Dense=1]="Dense"})(im||(im={}));class An{constructor(){this.bb=null,this.bb_pos=0}__init(e,r){return this.bb_pos=e,this.bb=r,this}static getRootAsUnion(e,r){return(r||new An).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsUnion(e,r){return e.setPosition(e.position()+nr),(r||new An).__init(e.readInt32(e.position())+e.position(),e)}mode(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):im.Sparse}typeIds(e){const r=this.bb.__offset(this.bb_pos,6);return r?this.bb.readInt32(this.bb.__vector(this.bb_pos+r)+e*4):0}typeIdsLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}typeIdsArray(){const e=this.bb.__offset(this.bb_pos,6);return e?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}static startUnion(e){e.startObject(2)}static addMode(e,r){e.addFieldInt16(0,r,im.Sparse)}static addTypeIds(e,r){e.addFieldOffset(1,r,0)}static createTypeIdsVector(e,r){e.startVector(4,r.length,4);for(let n=r.length-1;n>=0;n--)e.addInt32(r[n]);return e.endVector()}static startTypeIdsVector(e,r){e.startVector(4,r,4)}static endUnion(e){return e.endObject()}static createUnion(e,r,n){return An.startUnion(e),An.addMode(e,r),An.addTypeIds(e,n),An.endUnion(e)}}class Du{constructor(){this.bb=null,this.bb_pos=0}__init(e,r){return this.bb_pos=e,this.bb=r,this}static getRootAsUtf8(e,r){return(r||new Du).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsUtf8(e,r){return e.setPosition(e.position()+nr),(r||new Du).__init(e.readInt32(e.position())+e.position(),e)}static startUtf8(e){e.startObject(0)}static endUtf8(e){return e.endObject()}static createUtf8(e){return Du.startUtf8(e),Du.endUtf8(e)}}var _r;(function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.FloatingPoint=3]="FloatingPoint",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct_=13]="Struct_",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Duration=18]="Duration",t[t.LargeBinary=19]="LargeBinary",t[t.LargeUtf8=20]="LargeUtf8",t[t.LargeList=21]="LargeList"})(_r||(_r={}));let Si=class pp{constructor(){this.bb=null,this.bb_pos=0}__init(e,r){return this.bb_pos=e,this.bb=r,this}static getRootAsField(e,r){return(r||new pp).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsField(e,r){return e.setPosition(e.position()+nr),(r||new pp).__init(e.readInt32(e.position())+e.position(),e)}name(e){const r=this.bb.__offset(this.bb_pos,4);return r?this.bb.__string(this.bb_pos+r,e):null}nullable(){const e=this.bb.__offset(this.bb_pos,6);return e?!!this.bb.readInt8(this.bb_pos+e):!1}typeType(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint8(this.bb_pos+e):_r.NONE}type(e){const r=this.bb.__offset(this.bb_pos,10);return r?this.bb.__union(e,this.bb_pos+r):null}dictionary(e){const r=this.bb.__offset(this.bb_pos,12);return r?(e||new Io).__init(this.bb.__indirect(this.bb_pos+r),this.bb):null}children(e,r){const n=this.bb.__offset(this.bb_pos,14);return n?(r||new pp).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+e*4),this.bb):null}childrenLength(){const e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,r){const n=this.bb.__offset(this.bb_pos,16);return n?(r||new Fr).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,16);return e?this.bb.__vector_len(this.bb_pos+e):0}static startField(e){e.startObject(7)}static addName(e,r){e.addFieldOffset(0,r,0)}static addNullable(e,r){e.addFieldInt8(1,+r,0)}static addTypeType(e,r){e.addFieldInt8(2,r,_r.NONE)}static addType(e,r){e.addFieldOffset(3,r,0)}static addDictionary(e,r){e.addFieldOffset(4,r,0)}static addChildren(e,r){e.addFieldOffset(5,r,0)}static createChildrenVector(e,r){e.startVector(4,r.length,4);for(let n=r.length-1;n>=0;n--)e.addOffset(r[n]);return e.endVector()}static startChildrenVector(e,r){e.startVector(4,r,4)}static addCustomMetadata(e,r){e.addFieldOffset(6,r,0)}static createCustomMetadataVector(e,r){e.startVector(4,r.length,4);for(let n=r.length-1;n>=0;n--)e.addOffset(r[n]);return e.endVector()}static startCustomMetadataVector(e,r){e.startVector(4,r,4)}static endField(e){return e.endObject()}},Ss=class go{constructor(){this.bb=null,this.bb_pos=0}__init(e,r){return this.bb_pos=e,this.bb=r,this}static getRootAsSchema(e,r){return(r||new go).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsSchema(e,r){return e.setPosition(e.position()+nr),(r||new go).__init(e.readInt32(e.position())+e.position(),e)}endianness(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):tl.Little}fields(e,r){const n=this.bb.__offset(this.bb_pos,6);return n?(r||new Si).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+e*4),this.bb):null}fieldsLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,r){const n=this.bb.__offset(this.bb_pos,8);return n?(r||new Fr).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}features(e){const r=this.bb.__offset(this.bb_pos,10);return r?this.bb.readInt64(this.bb.__vector(this.bb_pos+r)+e*8):this.bb.createLong(0,0)}featuresLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}static startSchema(e){e.startObject(4)}static addEndianness(e,r){e.addFieldInt16(0,r,tl.Little)}static addFields(e,r){e.addFieldOffset(1,r,0)}static createFieldsVector(e,r){e.startVector(4,r.length,4);for(let n=r.length-1;n>=0;n--)e.addOffset(r[n]);return e.endVector()}static startFieldsVector(e,r){e.startVector(4,r,4)}static addCustomMetadata(e,r){e.addFieldOffset(2,r,0)}static createCustomMetadataVector(e,r){e.startVector(4,r.length,4);for(let n=r.length-1;n>=0;n--)e.addOffset(r[n]);return e.endVector()}static startCustomMetadataVector(e,r){e.startVector(4,r,4)}static addFeatures(e,r){e.addFieldOffset(3,r,0)}static createFeaturesVector(e,r){e.startVector(8,r.length,8);for(let n=r.length-1;n>=0;n--)e.addInt64(r[n]);return e.endVector()}static startFeaturesVector(e,r){e.startVector(8,r,8)}static endSchema(e){return e.endObject()}static finishSchemaBuffer(e,r){e.finish(r)}static finishSizePrefixedSchemaBuffer(e,r){e.finish(r,void 0,!0)}static createSchema(e,r,n,s,a){return go.startSchema(e),go.addEndianness(e,r),go.addFields(e,n),go.addCustomMetadata(e,s),go.addFeatures(e,a),go.endSchema(e)}};class ei{constructor(){this.bb=null,this.bb_pos=0}__init(e,r){return this.bb_pos=e,this.bb=r,this}static getRootAsFooter(e,r){return(r||new ei).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFooter(e,r){return e.setPosition(e.position()+nr),(r||new ei).__init(e.readInt32(e.position())+e.position(),e)}version(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):el.V1}schema(e){const r=this.bb.__offset(this.bb_pos,6);return r?(e||new Ss).__init(this.bb.__indirect(this.bb_pos+r),this.bb):null}dictionaries(e,r){const n=this.bb.__offset(this.bb_pos,8);return n?(r||new Ng).__init(this.bb.__vector(this.bb_pos+n)+e*24,this.bb):null}dictionariesLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}recordBatches(e,r){const n=this.bb.__offset(this.bb_pos,10);return n?(r||new Ng).__init(this.bb.__vector(this.bb_pos+n)+e*24,this.bb):null}recordBatchesLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,r){const n=this.bb.__offset(this.bb_pos,12);return n?(r||new Fr).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static startFooter(e){e.startObject(5)}static addVersion(e,r){e.addFieldInt16(0,r,el.V1)}static addSchema(e,r){e.addFieldOffset(1,r,0)}static addDictionaries(e,r){e.addFieldOffset(2,r,0)}static startDictionariesVector(e,r){e.startVector(24,r,8)}static addRecordBatches(e,r){e.addFieldOffset(3,r,0)}static startRecordBatchesVector(e,r){e.startVector(24,r,8)}static addCustomMetadata(e,r){e.addFieldOffset(4,r,0)}static createCustomMetadataVector(e,r){e.startVector(4,r.length,4);for(let n=r.length-1;n>=0;n--)e.addOffset(r[n]);return e.endVector()}static startCustomMetadataVector(e,r){e.startVector(4,r,4)}static endFooter(e){return e.endObject()}static finishFooterBuffer(e,r){e.finish(r)}static finishSizePrefixedFooterBuffer(e,r){e.finish(r,void 0,!0)}}class Ut{constructor(e=[],r,n){this.fields=e||[],this.metadata=r||new Map,n||(n=Mg(e)),this.dictionaries=n}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(e=>e.name)}toString(){return`Schema<{ ${this.fields.map((e,r)=>`${r}: ${e}`).join(", ")} }>`}select(e){const r=new Set(e),n=this.fields.filter(s=>r.has(s.name));return new Ut(n,this.metadata)}selectAt(e){const r=e.map(n=>this.fields[n]).filter(Boolean);return new Ut(r,this.metadata)}assign(...e){const r=e[0]instanceof Ut?e[0]:Array.isArray(e[0])?new Ut(e[0]):new Ut(e),n=[...this.fields],s=tp(tp(new Map,this.metadata),r.metadata),a=r.fields.filter(l=>{const d=n.findIndex(m=>m.name===l.name);return~d?(n[d]=l.clone({metadata:tp(tp(new Map,n[d].metadata),l.metadata)}))&&!1:!0}),u=Mg(a,new Map);return new Ut([...n,...a],s,new Map([...this.dictionaries,...u]))}}Ut.prototype.fields=null;Ut.prototype.metadata=null;Ut.prototype.dictionaries=null;class cr{constructor(e,r,n=!1,s){this.name=e,this.type=r,this.nullable=n,this.metadata=s||new Map}static new(...e){let[r,n,s,a]=e;return e[0]&&typeof e[0]=="object"&&({name:r}=e[0],n===void 0&&(n=e[0].type),s===void 0&&(s=e[0].nullable),a===void 0&&(a=e[0].metadata)),new cr(`${r}`,n,s,a)}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...e){let[r,n,s,a]=e;return!e[0]||typeof e[0]!="object"?[r=this.name,n=this.type,s=this.nullable,a=this.metadata]=e:{name:r=this.name,type:n=this.type,nullable:s=this.nullable,metadata:a=this.metadata}=e[0],cr.new(r,n,s,a)}}cr.prototype.type=null;cr.prototype.name=null;cr.prototype.nullable=null;cr.prototype.metadata=null;function tp(t,e){return new Map([...t||new Map,...e||new Map])}function Mg(t,e=new Map){for(let r=-1,n=t.length;++r<n;){const a=t[r].type;if(ct.isDictionary(a)){if(!e.has(a.id))e.set(a.id,a.dictionary);else if(e.get(a.id)!==a.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}a.children&&a.children.length>0&&Mg(a.children,e)}return e}var aE=$o,FL=HP,BL=Zc;class Af{constructor(e,r=ni.V4,n,s){this.schema=e,this.version=r,n&&(this._recordBatches=n),s&&(this._dictionaryBatches=s)}static decode(e){e=new BL(xt(e));const r=ei.getRootAsFooter(e),n=Ut.decode(r.schema());return new LL(n,r)}static encode(e){const r=new FL,n=Ut.encode(r,e.schema);ei.startRecordBatchesVector(r,e.numRecordBatches);for(const u of[...e.recordBatches()].slice().reverse())Ca.encode(r,u);const s=r.endVector();ei.startDictionariesVector(r,e.numDictionaries);for(const u of[...e.dictionaryBatches()].slice().reverse())Ca.encode(r,u);const a=r.endVector();return ei.startFooter(r),ei.addSchema(r,n),ei.addVersion(r,ni.V4),ei.addRecordBatches(r,s),ei.addDictionaries(r,a),ei.finishFooterBuffer(r,ei.endFooter(r)),r.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}*recordBatches(){for(let e,r=-1,n=this.numRecordBatches;++r<n;)(e=this.getRecordBatch(r))&&(yield e)}*dictionaryBatches(){for(let e,r=-1,n=this.numDictionaries;++r<n;)(e=this.getDictionaryBatch(r))&&(yield e)}getRecordBatch(e){return e>=0&&e<this.numRecordBatches&&this._recordBatches[e]||null}getDictionaryBatch(e){return e>=0&&e<this.numDictionaries&&this._dictionaryBatches[e]||null}}class LL extends Af{constructor(e,r){super(e,r.version()),this._footer=r}get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}getRecordBatch(e){if(e>=0&&e<this.numRecordBatches){const r=this._footer.recordBatches(e);if(r)return Ca.decode(r)}return null}getDictionaryBatch(e){if(e>=0&&e<this.numDictionaries){const r=this._footer.dictionaries(e);if(r)return Ca.decode(r)}return null}}class Ca{constructor(e,r,n){this.metaDataLength=e,this.offset=typeof n=="number"?n:n.low,this.bodyLength=typeof r=="number"?r:r.low}static decode(e){return new Ca(e.metaDataLength(),e.bodyLength(),e.offset())}static encode(e,r){const{metaDataLength:n}=r,s=new aE(r.offset,0),a=new aE(r.bodyLength,0);return Ng.createBlock(e,s,n,a)}}const wr=Object.freeze({done:!0,value:void 0});class uE{constructor(e){this._json=e}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}class K0{tee(){return this._getDOMStream().tee()}pipe(e,r){return this._getNodeStream().pipe(e,r)}pipeTo(e,r){return this._getDOMStream().pipeTo(e,r)}pipeThrough(e,r){return this._getDOMStream().pipeThrough(e,r)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class jL extends K0{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(e=>this._closedPromiseResolve=e)}get closed(){return this._closedPromise}cancel(e){return st(this,void 0,void 0,function*(){yield this.return(e)})}write(e){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(e):this.resolvers.shift().resolve({done:!1,value:e}))}abort(e){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:e}:this.resolvers.shift().reject({done:!0,value:e}))}close(){if(this._closedPromiseResolve){const{resolvers:e}=this;for(;e.length>0;)e.shift().resolve(wr);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(e){return Ei.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,e)}toNodeStream(e){return Ei.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,e)}throw(e){return st(this,void 0,void 0,function*(){return yield this.abort(e),wr})}return(e){return st(this,void 0,void 0,function*(){return yield this.close(),wr})}read(e){return st(this,void 0,void 0,function*(){return(yield this.next(e,"read")).value})}peek(e){return st(this,void 0,void 0,function*(){return(yield this.next(e,"peek")).value})}next(...e){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((r,n)=>{this.resolvers.push({resolve:r,reject:n})}):Promise.resolve(wr)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class mp extends jL{write(e){if((e=xt(e)).byteLength>0)return super.write(e)}toString(e=!1){return e?Dg(this.toUint8Array(!0)):this.toUint8Array(!1).then(Dg)}toUint8Array(e=!1){return e?Fs(this._values)[0]:st(this,void 0,void 0,function*(){var r,n;const s=[];let a=0;try{for(var u=ga(this),l;l=yield u.next(),!l.done;){const d=l.value;s.push(d),a+=d.byteLength}}catch(d){r={error:d}}finally{try{l&&!l.done&&(n=u.return)&&(yield n.call(u))}finally{if(r)throw r.error}}return Fs(s,a)[0]})}}class sm{constructor(e){e&&(this.source=new UL(Ei.fromIterable(e)))}[Symbol.iterator](){return this}next(e){return this.source.next(e)}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}peek(e){return this.source.peek(e)}read(e){return this.source.read(e)}}class nl{constructor(e){e instanceof nl?this.source=e.source:e instanceof mp?this.source=new wu(Ei.fromAsyncIterable(e)):Ck(e)?this.source=new wu(Ei.fromNodeStream(e)):$0(e)?this.source=new wu(Ei.fromDOMStream(e)):Rk(e)?this.source=new wu(Ei.fromDOMStream(e.body)):Wf(e)?this.source=new wu(Ei.fromIterable(e)):ka(e)?this.source=new wu(Ei.fromAsyncIterable(e)):ml(e)&&(this.source=new wu(Ei.fromAsyncIterable(e)))}[Symbol.asyncIterator](){return this}next(e){return this.source.next(e)}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}get closed(){return this.source.closed}cancel(e){return this.source.cancel(e)}peek(e){return this.source.peek(e)}read(e){return this.source.read(e)}}class UL{constructor(e){this.source=e}cancel(e){this.return(e)}peek(e){return this.next(e,"peek").value}read(e){return this.next(e,"read").value}next(e,r="read"){return this.source.next({cmd:r,size:e})}throw(e){return Object.create(this.source.throw&&this.source.throw(e)||wr)}return(e){return Object.create(this.source.return&&this.source.return(e)||wr)}}class wu{constructor(e){this.source=e,this._closedPromise=new Promise(r=>this._closedPromiseResolve=r)}cancel(e){return st(this,void 0,void 0,function*(){yield this.return(e)})}get closed(){return this._closedPromise}read(e){return st(this,void 0,void 0,function*(){return(yield this.next(e,"read")).value})}peek(e){return st(this,void 0,void 0,function*(){return(yield this.next(e,"peek")).value})}next(e,r="read"){return st(this,void 0,void 0,function*(){return yield this.source.next({cmd:r,size:e})})}throw(e){return st(this,void 0,void 0,function*(){const r=this.source.throw&&(yield this.source.throw(e))||wr;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(r)})}return(e){return st(this,void 0,void 0,function*(){const r=this.source.return&&(yield this.source.return(e))||wr;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(r)})}}class cE extends sm{constructor(e,r){super(),this.position=0,this.buffer=xt(e),this.size=typeof r>"u"?this.buffer.byteLength:r}readInt32(e){const{buffer:r,byteOffset:n}=this.readAt(e,4);return new DataView(r,n).getInt32(0,!0)}seek(e){return this.position=Math.min(e,this.size),e<this.size}read(e){const{buffer:r,size:n,position:s}=this;return r&&s<n?(typeof e!="number"&&(e=Number.POSITIVE_INFINITY),this.position=Math.min(n,s+Math.min(n-s,e)),r.subarray(s,this.position)):null}readAt(e,r){const n=this.buffer,s=Math.min(this.size,e+r);return n?n.subarray(e,s):new Uint8Array(r)}close(){this.buffer&&(this.buffer=null)}throw(e){return this.close(),{done:!0,value:e}}return(e){return this.close(),{done:!0,value:e}}}class om extends nl{constructor(e,r){super(),this.position=0,this._handle=e,typeof r=="number"?this.size=r:this._pending=st(this,void 0,void 0,function*(){this.size=(yield e.stat()).size,delete this._pending})}readInt32(e){return st(this,void 0,void 0,function*(){const{buffer:r,byteOffset:n}=yield this.readAt(e,4);return new DataView(r,n).getInt32(0,!0)})}seek(e){return st(this,void 0,void 0,function*(){return this._pending&&(yield this._pending),this.position=Math.min(e,this.size),e<this.size})}read(e){return st(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:r,size:n,position:s}=this;if(r&&s<n){typeof e!="number"&&(e=Number.POSITIVE_INFINITY);let a=s,u=0,l=0;const d=Math.min(n,a+Math.min(n-a,e)),m=new Uint8Array(Math.max(0,(this.position=d)-a));for(;(a+=l)<d&&(u+=l)<m.byteLength;)({bytesRead:l}=yield r.read(m,u,m.byteLength-u,a));return m}return null})}readAt(e,r){return st(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:n,size:s}=this;if(n&&e+r<s){const a=Math.min(s,e+r),u=new Uint8Array(a-e);return(yield n.read(u,0,r,e)).buffer}return new Uint8Array(r)})}close(){return st(this,void 0,void 0,function*(){const e=this._handle;this._handle=null,e&&(yield e.close())})}throw(e){return st(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:e}})}return(e){return st(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:e}})}}const zL=65536;function Tc(t){return t<0&&(t=4294967295+t+1),`0x${t.toString(16)}`}const il=8,W0=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class YP{constructor(e){this.buffer=e}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(e){const r=new Uint32Array([this.buffer[1]>>>16,this.buffer[1]&65535,this.buffer[0]>>>16,this.buffer[0]&65535]),n=new Uint32Array([e.buffer[1]>>>16,e.buffer[1]&65535,e.buffer[0]>>>16,e.buffer[0]&65535]);let s=r[3]*n[3];this.buffer[0]=s&65535;let a=s>>>16;return s=r[2]*n[3],a+=s,s=r[3]*n[2]>>>0,a+=s,this.buffer[0]+=a<<16,this.buffer[1]=a>>>0<s?zL:0,this.buffer[1]+=a>>>16,this.buffer[1]+=r[1]*n[3]+r[2]*n[2]+r[3]*n[1],this.buffer[1]+=r[0]*n[3]+r[1]*n[2]+r[2]*n[1]+r[3]*n[0]<<16,this}_plus(e){const r=this.buffer[0]+e.buffer[0]>>>0;this.buffer[1]+=e.buffer[1],r<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=r}lessThan(e){return this.buffer[1]<e.buffer[1]||this.buffer[1]===e.buffer[1]&&this.buffer[0]<e.buffer[0]}equals(e){return this.buffer[1]===e.buffer[1]&&this.buffer[0]==e.buffer[0]}greaterThan(e){return e.lessThan(this)}hex(){return`${Tc(this.buffer[1])} ${Tc(this.buffer[0])}`}}class Vt extends YP{times(e){return this._times(e),this}plus(e){return this._plus(e),this}static from(e,r=new Uint32Array(2)){return Vt.fromString(typeof e=="string"?e:e.toString(),r)}static fromNumber(e,r=new Uint32Array(2)){return Vt.fromString(e.toString(),r)}static fromString(e,r=new Uint32Array(2)){const n=e.length,s=new Vt(r);for(let a=0;a<n;){const u=il<n-a?il:n-a,l=new Vt(new Uint32Array([Number.parseInt(e.slice(a,a+u),10),0])),d=new Vt(new Uint32Array([W0[u],0]));s.times(d),s.plus(l),a+=u}return s}static convertArray(e){const r=new Uint32Array(e.length*2);for(let n=-1,s=e.length;++n<s;)Vt.from(e[n],new Uint32Array(r.buffer,r.byteOffset+2*n*4,2));return r}static multiply(e,r){return new Vt(new Uint32Array(e.buffer)).times(r)}static add(e,r){return new Vt(new Uint32Array(e.buffer)).plus(r)}}class Cn extends YP{negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[0]==0&&++this.buffer[1],this}times(e){return this._times(e),this}plus(e){return this._plus(e),this}lessThan(e){const r=this.buffer[1]<<0,n=e.buffer[1]<<0;return r<n||r===n&&this.buffer[0]<e.buffer[0]}static from(e,r=new Uint32Array(2)){return Cn.fromString(typeof e=="string"?e:e.toString(),r)}static fromNumber(e,r=new Uint32Array(2)){return Cn.fromString(e.toString(),r)}static fromString(e,r=new Uint32Array(2)){const n=e.startsWith("-"),s=e.length,a=new Cn(r);for(let u=n?1:0;u<s;){const l=il<s-u?il:s-u,d=new Cn(new Uint32Array([Number.parseInt(e.slice(u,u+l),10),0])),m=new Cn(new Uint32Array([W0[l],0]));a.times(m),a.plus(d),u+=l}return n?a.negate():a}static convertArray(e){const r=new Uint32Array(e.length*2);for(let n=-1,s=e.length;++n<s;)Cn.from(e[n],new Uint32Array(r.buffer,r.byteOffset+2*n*4,2));return r}static multiply(e,r){return new Cn(new Uint32Array(e.buffer)).times(r)}static add(e,r){return new Cn(new Uint32Array(e.buffer)).plus(r)}}class Es{constructor(e){this.buffer=e}high(){return new Cn(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new Cn(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],this.buffer[0]==0&&++this.buffer[1],this.buffer[1]==0&&++this.buffer[2],this.buffer[2]==0&&++this.buffer[3],this}times(e){const r=new Vt(new Uint32Array([this.buffer[3],0])),n=new Vt(new Uint32Array([this.buffer[2],0])),s=new Vt(new Uint32Array([this.buffer[1],0])),a=new Vt(new Uint32Array([this.buffer[0],0])),u=new Vt(new Uint32Array([e.buffer[3],0])),l=new Vt(new Uint32Array([e.buffer[2],0])),d=new Vt(new Uint32Array([e.buffer[1],0])),m=new Vt(new Uint32Array([e.buffer[0],0]));let y=Vt.multiply(a,m);this.buffer[0]=y.low();const g=new Vt(new Uint32Array([y.high(),0]));return y=Vt.multiply(s,m),g.plus(y),y=Vt.multiply(a,d),g.plus(y),this.buffer[1]=g.low(),this.buffer[3]=g.lessThan(y)?1:0,this.buffer[2]=g.high(),new Vt(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(Vt.multiply(n,m)).plus(Vt.multiply(s,d)).plus(Vt.multiply(a,l)),this.buffer[3]+=Vt.multiply(r,m).plus(Vt.multiply(n,d)).plus(Vt.multiply(s,l)).plus(Vt.multiply(a,u)).low(),this}plus(e){const r=new Uint32Array(4);return r[3]=this.buffer[3]+e.buffer[3]>>>0,r[2]=this.buffer[2]+e.buffer[2]>>>0,r[1]=this.buffer[1]+e.buffer[1]>>>0,r[0]=this.buffer[0]+e.buffer[0]>>>0,r[0]<this.buffer[0]>>>0&&++r[1],r[1]<this.buffer[1]>>>0&&++r[2],r[2]<this.buffer[2]>>>0&&++r[3],this.buffer[3]=r[3],this.buffer[2]=r[2],this.buffer[1]=r[1],this.buffer[0]=r[0],this}hex(){return`${Tc(this.buffer[3])} ${Tc(this.buffer[2])} ${Tc(this.buffer[1])} ${Tc(this.buffer[0])}`}static multiply(e,r){return new Es(new Uint32Array(e.buffer)).times(r)}static add(e,r){return new Es(new Uint32Array(e.buffer)).plus(r)}static from(e,r=new Uint32Array(4)){return Es.fromString(typeof e=="string"?e:e.toString(),r)}static fromNumber(e,r=new Uint32Array(4)){return Es.fromString(e.toString(),r)}static fromString(e,r=new Uint32Array(4)){const n=e.startsWith("-"),s=e.length,a=new Es(r);for(let u=n?1:0;u<s;){const l=il<s-u?il:s-u,d=new Es(new Uint32Array([Number.parseInt(e.slice(u,u+l),10),0,0,0])),m=new Es(new Uint32Array([W0[l],0,0,0]));a.times(m),a.plus(d),u+=l}return n?a.negate():a}static convertArray(e){const r=new Uint32Array(e.length*4);for(let n=-1,s=e.length;++n<s;)Es.from(e[n],new Uint32Array(r.buffer,r.byteOffset+16*n,4));return r}}class GP extends Ct{constructor(e,r,n,s){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=e,this.nodes=r,this.buffers=n,this.dictionaries=s}visit(e){return super.visit(e instanceof cr?e.type:e)}visitNull(e,{length:r}=this.nextFieldNode()){return Rt({type:e,length:r})}visitBool(e,{length:r,nullCount:n}=this.nextFieldNode()){return Rt({type:e,length:r,nullCount:n,nullBitmap:this.readNullBitmap(e,n),data:this.readData(e)})}visitInt(e,{length:r,nullCount:n}=this.nextFieldNode()){return Rt({type:e,length:r,nullCount:n,nullBitmap:this.readNullBitmap(e,n),data:this.readData(e)})}visitFloat(e,{length:r,nullCount:n}=this.nextFieldNode()){return Rt({type:e,length:r,nullCount:n,nullBitmap:this.readNullBitmap(e,n),data:this.readData(e)})}visitUtf8(e,{length:r,nullCount:n}=this.nextFieldNode()){return Rt({type:e,length:r,nullCount:n,nullBitmap:this.readNullBitmap(e,n),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitBinary(e,{length:r,nullCount:n}=this.nextFieldNode()){return Rt({type:e,length:r,nullCount:n,nullBitmap:this.readNullBitmap(e,n),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitFixedSizeBinary(e,{length:r,nullCount:n}=this.nextFieldNode()){return Rt({type:e,length:r,nullCount:n,nullBitmap:this.readNullBitmap(e,n),data:this.readData(e)})}visitDate(e,{length:r,nullCount:n}=this.nextFieldNode()){return Rt({type:e,length:r,nullCount:n,nullBitmap:this.readNullBitmap(e,n),data:this.readData(e)})}visitTimestamp(e,{length:r,nullCount:n}=this.nextFieldNode()){return Rt({type:e,length:r,nullCount:n,nullBitmap:this.readNullBitmap(e,n),data:this.readData(e)})}visitTime(e,{length:r,nullCount:n}=this.nextFieldNode()){return Rt({type:e,length:r,nullCount:n,nullBitmap:this.readNullBitmap(e,n),data:this.readData(e)})}visitDecimal(e,{length:r,nullCount:n}=this.nextFieldNode()){return Rt({type:e,length:r,nullCount:n,nullBitmap:this.readNullBitmap(e,n),data:this.readData(e)})}visitList(e,{length:r,nullCount:n}=this.nextFieldNode()){return Rt({type:e,length:r,nullCount:n,nullBitmap:this.readNullBitmap(e,n),valueOffsets:this.readOffsets(e),child:this.visit(e.children[0])})}visitStruct(e,{length:r,nullCount:n}=this.nextFieldNode()){return Rt({type:e,length:r,nullCount:n,nullBitmap:this.readNullBitmap(e,n),children:this.visitMany(e.children)})}visitUnion(e){return e.mode===si.Sparse?this.visitSparseUnion(e):this.visitDenseUnion(e)}visitDenseUnion(e,{length:r,nullCount:n}=this.nextFieldNode()){return Rt({type:e,length:r,nullCount:n,nullBitmap:this.readNullBitmap(e,n),typeIds:this.readTypeIds(e),valueOffsets:this.readOffsets(e),children:this.visitMany(e.children)})}visitSparseUnion(e,{length:r,nullCount:n}=this.nextFieldNode()){return Rt({type:e,length:r,nullCount:n,nullBitmap:this.readNullBitmap(e,n),typeIds:this.readTypeIds(e),children:this.visitMany(e.children)})}visitDictionary(e,{length:r,nullCount:n}=this.nextFieldNode()){return Rt({type:e,length:r,nullCount:n,nullBitmap:this.readNullBitmap(e,n),data:this.readData(e.indices),dictionary:this.readDictionary(e)})}visitInterval(e,{length:r,nullCount:n}=this.nextFieldNode()){return Rt({type:e,length:r,nullCount:n,nullBitmap:this.readNullBitmap(e,n),data:this.readData(e)})}visitFixedSizeList(e,{length:r,nullCount:n}=this.nextFieldNode()){return Rt({type:e,length:r,nullCount:n,nullBitmap:this.readNullBitmap(e,n),child:this.visit(e.children[0])})}visitMap(e,{length:r,nullCount:n}=this.nextFieldNode()){return Rt({type:e,length:r,nullCount:n,nullBitmap:this.readNullBitmap(e,n),valueOffsets:this.readOffsets(e),child:this.visit(e.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(e,r,n=this.nextBufferRange()){return r>0&&this.readData(e,n)||new Uint8Array(0)}readOffsets(e,r){return this.readData(e,r)}readTypeIds(e,r){return this.readData(e,r)}readData(e,{length:r,offset:n}=this.nextBufferRange()){return this.bytes.subarray(n,n+r)}readDictionary(e){return this.dictionaries.get(e.id)}}class qL extends GP{constructor(e,r,n,s){super(new Uint8Array(0),r,n,s),this.sources=e}readNullBitmap(e,r,{offset:n}=this.nextBufferRange()){return r<=0?new Uint8Array(0):Jp(this.sources[n])}readOffsets(e,{offset:r}=this.nextBufferRange()){return rr(Uint8Array,rr(Int32Array,this.sources[r]))}readTypeIds(e,{offset:r}=this.nextBufferRange()){return rr(Uint8Array,rr(e.ArrayType,this.sources[r]))}readData(e,{offset:r}=this.nextBufferRange()){const{sources:n}=this;return ct.isTimestamp(e)||(ct.isInt(e)||ct.isTime(e))&&e.bitWidth===64||ct.isDate(e)&&e.unit===Mo.MILLISECOND?rr(Uint8Array,Cn.convertArray(n[r])):ct.isDecimal(e)?rr(Uint8Array,Es.convertArray(n[r])):ct.isBinary(e)||ct.isFixedSizeBinary(e)?VL(n[r]):ct.isBool(e)?Jp(n[r]):ct.isUtf8(e)?C0(n[r].join("")):rr(Uint8Array,rr(e.ArrayType,n[r].map(s=>+s)))}}function VL(t){const e=t.join(""),r=new Uint8Array(e.length/2);for(let n=0;n<e.length;n+=2)r[n>>1]=Number.parseInt(e.slice(n,n+2),16);return r}class ht extends Ct{compareSchemas(e,r){return e===r||r instanceof e.constructor&&this.compareManyFields(e.fields,r.fields)}compareManyFields(e,r){return e===r||Array.isArray(e)&&Array.isArray(r)&&e.length===r.length&&e.every((n,s)=>this.compareFields(n,r[s]))}compareFields(e,r){return e===r||r instanceof e.constructor&&e.name===r.name&&e.nullable===r.nullable&&this.visit(e.type,r.type)}}function zn(t,e){return e instanceof t.constructor}function Hf(t,e){return t===e||zn(t,e)}function Bo(t,e){return t===e||zn(t,e)&&t.bitWidth===e.bitWidth&&t.isSigned===e.isSigned}function Rm(t,e){return t===e||zn(t,e)&&t.precision===e.precision}function KL(t,e){return t===e||zn(t,e)&&t.byteWidth===e.byteWidth}function H0(t,e){return t===e||zn(t,e)&&t.unit===e.unit}function Qf(t,e){return t===e||zn(t,e)&&t.unit===e.unit&&t.timezone===e.timezone}function Yf(t,e){return t===e||zn(t,e)&&t.unit===e.unit&&t.bitWidth===e.bitWidth}function WL(t,e){return t===e||zn(t,e)&&t.children.length===e.children.length&&$a.compareManyFields(t.children,e.children)}function HL(t,e){return t===e||zn(t,e)&&t.children.length===e.children.length&&$a.compareManyFields(t.children,e.children)}function Q0(t,e){return t===e||zn(t,e)&&t.mode===e.mode&&t.typeIds.every((r,n)=>r===e.typeIds[n])&&$a.compareManyFields(t.children,e.children)}function QL(t,e){return t===e||zn(t,e)&&t.id===e.id&&t.isOrdered===e.isOrdered&&$a.visit(t.indices,e.indices)&&$a.visit(t.dictionary,e.dictionary)}function Y0(t,e){return t===e||zn(t,e)&&t.unit===e.unit}function YL(t,e){return t===e||zn(t,e)&&t.listSize===e.listSize&&t.children.length===e.children.length&&$a.compareManyFields(t.children,e.children)}function GL(t,e){return t===e||zn(t,e)&&t.keysSorted===e.keysSorted&&t.children.length===e.children.length&&$a.compareManyFields(t.children,e.children)}ht.prototype.visitNull=Hf;ht.prototype.visitBool=Hf;ht.prototype.visitInt=Bo;ht.prototype.visitInt8=Bo;ht.prototype.visitInt16=Bo;ht.prototype.visitInt32=Bo;ht.prototype.visitInt64=Bo;ht.prototype.visitUint8=Bo;ht.prototype.visitUint16=Bo;ht.prototype.visitUint32=Bo;ht.prototype.visitUint64=Bo;ht.prototype.visitFloat=Rm;ht.prototype.visitFloat16=Rm;ht.prototype.visitFloat32=Rm;ht.prototype.visitFloat64=Rm;ht.prototype.visitUtf8=Hf;ht.prototype.visitBinary=Hf;ht.prototype.visitFixedSizeBinary=KL;ht.prototype.visitDate=H0;ht.prototype.visitDateDay=H0;ht.prototype.visitDateMillisecond=H0;ht.prototype.visitTimestamp=Qf;ht.prototype.visitTimestampSecond=Qf;ht.prototype.visitTimestampMillisecond=Qf;ht.prototype.visitTimestampMicrosecond=Qf;ht.prototype.visitTimestampNanosecond=Qf;ht.prototype.visitTime=Yf;ht.prototype.visitTimeSecond=Yf;ht.prototype.visitTimeMillisecond=Yf;ht.prototype.visitTimeMicrosecond=Yf;ht.prototype.visitTimeNanosecond=Yf;ht.prototype.visitDecimal=Hf;ht.prototype.visitList=WL;ht.prototype.visitStruct=HL;ht.prototype.visitUnion=Q0;ht.prototype.visitDenseUnion=Q0;ht.prototype.visitSparseUnion=Q0;ht.prototype.visitDictionary=QL;ht.prototype.visitInterval=Y0;ht.prototype.visitIntervalDayTime=Y0;ht.prototype.visitIntervalYearMonth=Y0;ht.prototype.visitFixedSizeList=YL;ht.prototype.visitMap=GL;const $a=new ht;function Fg(t,e){return $a.compareSchemas(t,e)}function Wv(t,e){return JL(t,e.map(r=>r.data.concat()))}function JL(t,e){const r=[...t.fields],n=[],s={numBatches:e.reduce((g,b)=>Math.max(g,b.length),0)};let a=0,u=0,l=-1;const d=e.length;let m,y=[];for(;s.numBatches-- >0;){for(u=Number.POSITIVE_INFINITY,l=-1;++l<d;)y[l]=m=e[l].shift(),u=Math.min(u,m?m.length:u);Number.isFinite(u)&&(y=XL(r,u,y,e,s),u>0&&(n[a++]=Rt({type:new pn(r),length:u,nullCount:0,children:y.slice()})))}return[t=t.assign(r),n.map(g=>new Nn(t,g))]}function XL(t,e,r,n,s){var a;const u=(e+63&-64)>>3;for(let l=-1,d=n.length;++l<d;){const m=r[l],y=m?.length;if(y>=e)y===e?r[l]=m:(r[l]=m.slice(0,e),s.numBatches=Math.max(s.numBatches,n[l].unshift(m.slice(e,y-e))));else{const g=t[l];t[l]=g.clone({nullable:!0}),r[l]=(a=m?._changeLengthAndBackfillNullBitmap(e))!==null&&a!==void 0?a:Rt({type:g.type,length:e,nullCount:e,nullBitmap:new Uint8Array(u)})}}return r}var JP;class dn{constructor(...e){var r,n;if(e.length===0)return this.batches=[],this.schema=new Ut([]),this._offsets=[0],this;let s,a;e[0]instanceof Ut&&(s=e.shift()),e[e.length-1]instanceof Uint32Array&&(a=e.pop());const u=d=>{if(d){if(d instanceof Nn)return[d];if(d instanceof dn)return d.batches;if(d instanceof sr){if(d.type instanceof pn)return[new Nn(new Ut(d.type.children),d)]}else{if(Array.isArray(d))return d.flatMap(m=>u(m));if(typeof d[Symbol.iterator]=="function")return[...d].flatMap(m=>u(m));if(typeof d=="object"){const m=Object.keys(d),y=m.map(S=>new jt([d[S]])),g=new Ut(m.map((S,E)=>new cr(String(S),y[E].type))),[,b]=Wv(g,y);return b.length===0?[new Nn(d)]:b}}}return[]},l=e.flatMap(d=>u(d));if(s=(n=s??((r=l[0])===null||r===void 0?void 0:r.schema))!==null&&n!==void 0?n:new Ut([]),!(s instanceof Ut))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const d of l){if(!(d instanceof Nn))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!Fg(s,d.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=s,this.batches=l,this._offsets=a??MP(this.data)}get data(){return this.batches.map(({data:e})=>e)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((e,r)=>e+r.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=xP(this.data)),this._nullCount}isValid(e){return!1}get(e){return null}set(e,r){}indexOf(e,r){return-1}getByteLength(e){return 0}[Symbol.iterator](){return this.batches.length>0?V0.visit(new jt(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...e){const r=this.schema,n=this.data.concat(e.flatMap(({data:s})=>s));return new dn(r,n.map(s=>new Nn(r,s)))}slice(e,r){const n=this.schema;[e,r]=NP({length:this.numRows},e,r);const s=FP(this.data,this._offsets,e,r);return new dn(n,s.map(a=>new Nn(n,a)))}getChild(e){return this.getChildAt(this.schema.fields.findIndex(r=>r.name===e))}getChildAt(e){if(e>-1&&e<this.schema.fields.length){const r=this.data.map(n=>n.children[e]);if(r.length===0){const{type:n}=this.schema.fields[e],s=Rt({type:n,length:0,nullCount:0});r.push(s._changeLengthAndBackfillNullBitmap(this.numRows))}return new jt(r)}return null}setChild(e,r){var n;return this.setChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(s=>s.name===e),r)}setChildAt(e,r){let n=this.schema,s=[...this.batches];if(e>-1&&e<this.numCols){r||(r=new jt([Rt({type:new Da,length:this.numRows})]));const a=n.fields.slice(),u=a[e].clone({type:r.type}),l=this.schema.fields.map((d,m)=>this.getChildAt(m));[a[e],l[e]]=[u,r],[n,s]=Wv(n,l)}return new dn(n,s)}select(e){const r=this.schema.fields.reduce((n,s,a)=>n.set(s.name,a),new Map);return this.selectAt(e.map(n=>r.get(n)).filter(n=>n>-1))}selectAt(e){const r=this.schema.selectAt(e),n=this.batches.map(s=>s.selectAt(e));return new dn(r,n)}assign(e){const r=this.schema.fields,[n,s]=e.schema.fields.reduce((l,d,m)=>{const[y,g]=l,b=r.findIndex(S=>S.name===d.name);return~b?g[b]=m:y.push(m),l},[[],[]]),a=this.schema.assign(e.schema),u=[...r.map((l,d)=>[d,s[d]]).map(([l,d])=>d===void 0?this.getChildAt(l):e.getChildAt(d)),...n.map(l=>e.getChildAt(l))].filter(Boolean);return new dn(...Wv(a,u))}}JP=Symbol.toStringTag;dn[JP]=(t=>(t.schema=null,t.batches=[],t._offsets=new Uint32Array([0]),t._nullCount=-1,t[Symbol.isConcatSpreadable]=!0,t.isValid=Uc(q0),t.get=Uc(Ln.getVisitFn(fe.Struct)),t.set=BP($i.getVisitFn(fe.Struct)),t.indexOf=LP(Xp.getVisitFn(fe.Struct)),t.getByteLength=Uc(Bs.getVisitFn(fe.Struct)),"Table"))(dn.prototype);var XP;let Nn=class sf{constructor(...e){switch(e.length){case 2:{if([this.schema]=e,!(this.schema instanceof Ut))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=Rt({nullCount:0,type:new pn(this.schema.fields),children:this.schema.fields.map(r=>Rt({type:r.type,nullCount:0}))})]=e,!(this.data instanceof sr))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=lE(this.schema,this.data.children);break}case 1:{const[r]=e,{fields:n,children:s,length:a}=Object.keys(r).reduce((d,m,y)=>(d.children[y]=r[m],d.length=Math.max(d.length,r[m].length),d.fields[y]=cr.new({name:m,type:r[m].type,nullable:!0}),d),{length:0,fields:new Array,children:new Array}),u=new Ut(n),l=Rt({type:new pn(n),length:a,children:s,nullCount:0});[this.schema,this.data]=lE(u,l.children,a);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=ZP(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(e){return this.data.getValid(e)}get(e){return Ln.visit(this.data,e)}set(e,r){return $i.visit(this.data,e,r)}indexOf(e,r){return Xp.visit(this.data,e,r)}getByteLength(e){return Bs.visit(this.data,e)}[Symbol.iterator](){return V0.visit(new jt([this.data]))}toArray(){return[...this]}concat(...e){return new dn(this.schema,[this,...e])}slice(e,r){const[n]=new jt([this.data]).slice(e,r).data;return new sf(this.schema,n)}getChild(e){var r;return this.getChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(n=>n.name===e))}getChildAt(e){return e>-1&&e<this.schema.fields.length?new jt([this.data.children[e]]):null}setChild(e,r){var n;return this.setChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(s=>s.name===e),r)}setChildAt(e,r){let n=this.schema,s=this.data;if(e>-1&&e<this.numCols){r||(r=new jt([Rt({type:new Da,length:this.numRows})]));const a=n.fields.slice(),u=s.children.slice(),l=a[e].clone({type:r.type});[a[e],u[e]]=[l,r.data[0]],n=new Ut(a,new Map(this.schema.metadata)),s=Rt({type:new pn(a),children:u})}return new sf(n,s)}select(e){const r=this.schema.select(e),n=new pn(r.fields),s=[];for(const a of e){const u=this.schema.fields.findIndex(l=>l.name===a);~u&&(s[u]=this.data.children[u])}return new sf(r,Rt({type:n,length:this.numRows,children:s}))}selectAt(e){const r=this.schema.selectAt(e),n=e.map(a=>this.data.children[a]).filter(Boolean),s=Rt({type:new pn(r.fields),length:this.numRows,children:n});return new sf(r,s)}};XP=Symbol.toStringTag;Nn[XP]=(t=>(t._nullCount=-1,t[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(Nn.prototype);function lE(t,e,r=e.reduce((n,s)=>Math.max(n,s.length),0)){var n;const s=[...t.fields],a=[...e],u=(r+63&-64)>>3;for(const[l,d]of t.fields.entries()){const m=e[l];(!m||m.length!==r)&&(s[l]=d.clone({nullable:!0}),a[l]=(n=m?._changeLengthAndBackfillNullBitmap(r))!==null&&n!==void 0?n:Rt({type:d.type,length:r,nullCount:r,nullBitmap:new Uint8Array(u)}))}return[t.assign(s),Rt({type:new pn(s),length:r,children:a})]}function ZP(t,e,r=new Map){for(let n=-1,s=t.length;++n<s;){const u=t[n].type,l=e[n];if(ct.isDictionary(u)){if(!r.has(u.id))l.dictionary&&r.set(u.id,l.dictionary);else if(r.get(u.id)!==l.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}u.children&&u.children.length>0&&ZP(u.children,l.children,r)}return r}class G0 extends Nn{constructor(e){const r=e.fields.map(s=>Rt({type:s.type})),n=Rt({type:new pn(e.fields),nullCount:0,children:r});super(e,n)}}var am;(function(t){t[t.BUFFER=0]="BUFFER"})(am||(am={}));var um;(function(t){t[t.LZ4_FRAME=0]="LZ4_FRAME",t[t.ZSTD=1]="ZSTD"})(um||(um={}));class ya{constructor(){this.bb=null,this.bb_pos=0}__init(e,r){return this.bb_pos=e,this.bb=r,this}static getRootAsBodyCompression(e,r){return(r||new ya).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBodyCompression(e,r){return e.setPosition(e.position()+nr),(r||new ya).__init(e.readInt32(e.position())+e.position(),e)}codec(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt8(this.bb_pos+e):um.LZ4_FRAME}method(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt8(this.bb_pos+e):am.BUFFER}static startBodyCompression(e){e.startObject(2)}static addCodec(e,r){e.addFieldInt8(0,r,um.LZ4_FRAME)}static addMethod(e,r){e.addFieldInt8(1,r,am.BUFFER)}static endBodyCompression(e){return e.endObject()}static createBodyCompression(e,r,n){return ya.startBodyCompression(e),ya.addCodec(e,r),ya.addMethod(e,n),ya.endBodyCompression(e)}}class eD{constructor(){this.bb=null,this.bb_pos=0}__init(e,r){return this.bb_pos=e,this.bb=r,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(e,r,n){return e.prep(8,16),e.writeInt64(n),e.writeInt64(r),e.offset()}}let tD=class{constructor(){this.bb=null,this.bb_pos=0}__init(e,r){return this.bb_pos=e,this.bb=r,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(e,r,n){return e.prep(8,16),e.writeInt64(n),e.writeInt64(r),e.offset()}},bo=class Bg{constructor(){this.bb=null,this.bb_pos=0}__init(e,r){return this.bb_pos=e,this.bb=r,this}static getRootAsRecordBatch(e,r){return(r||new Bg).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsRecordBatch(e,r){return e.setPosition(e.position()+nr),(r||new Bg).__init(e.readInt32(e.position())+e.position(),e)}length(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}nodes(e,r){const n=this.bb.__offset(this.bb_pos,6);return n?(r||new tD).__init(this.bb.__vector(this.bb_pos+n)+e*16,this.bb):null}nodesLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}buffers(e,r){const n=this.bb.__offset(this.bb_pos,8);return n?(r||new eD).__init(this.bb.__vector(this.bb_pos+n)+e*16,this.bb):null}buffersLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}compression(e){const r=this.bb.__offset(this.bb_pos,10);return r?(e||new ya).__init(this.bb.__indirect(this.bb_pos+r),this.bb):null}static startRecordBatch(e){e.startObject(4)}static addLength(e,r){e.addFieldInt64(0,r,e.createLong(0,0))}static addNodes(e,r){e.addFieldOffset(1,r,0)}static startNodesVector(e,r){e.startVector(16,r,8)}static addBuffers(e,r){e.addFieldOffset(2,r,0)}static startBuffersVector(e,r){e.startVector(16,r,8)}static addCompression(e,r){e.addFieldOffset(3,r,0)}static endRecordBatch(e){return e.endObject()}},Nc=class Lg{constructor(){this.bb=null,this.bb_pos=0}__init(e,r){return this.bb_pos=e,this.bb=r,this}static getRootAsDictionaryBatch(e,r){return(r||new Lg).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDictionaryBatch(e,r){return e.setPosition(e.position()+nr),(r||new Lg).__init(e.readInt32(e.position())+e.position(),e)}id(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}data(e){const r=this.bb.__offset(this.bb_pos,6);return r?(e||new bo).__init(this.bb.__indirect(this.bb_pos+r),this.bb):null}isDelta(){const e=this.bb.__offset(this.bb_pos,8);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startDictionaryBatch(e){e.startObject(3)}static addId(e,r){e.addFieldInt64(0,r,e.createLong(0,0))}static addData(e,r){e.addFieldOffset(1,r,0)}static addIsDelta(e,r){e.addFieldInt8(2,+r,0)}static endDictionaryBatch(e){return e.endObject()}};var cm;(function(t){t[t.NONE=0]="NONE",t[t.Schema=1]="Schema",t[t.DictionaryBatch=2]="DictionaryBatch",t[t.RecordBatch=3]="RecordBatch",t[t.Tensor=4]="Tensor",t[t.SparseTensor=5]="SparseTensor"})(cm||(cm={}));let ha=class bs{constructor(){this.bb=null,this.bb_pos=0}__init(e,r){return this.bb_pos=e,this.bb=r,this}static getRootAsMessage(e,r){return(r||new bs).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMessage(e,r){return e.setPosition(e.position()+nr),(r||new bs).__init(e.readInt32(e.position())+e.position(),e)}version(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):el.V1}headerType(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):cm.NONE}header(e){const r=this.bb.__offset(this.bb_pos,8);return r?this.bb.__union(e,this.bb_pos+r):null}bodyLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}customMetadata(e,r){const n=this.bb.__offset(this.bb_pos,12);return n?(r||new Fr).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static startMessage(e){e.startObject(5)}static addVersion(e,r){e.addFieldInt16(0,r,el.V1)}static addHeaderType(e,r){e.addFieldInt8(1,r,cm.NONE)}static addHeader(e,r){e.addFieldOffset(2,r,0)}static addBodyLength(e,r){e.addFieldInt64(3,r,e.createLong(0,0))}static addCustomMetadata(e,r){e.addFieldOffset(4,r,0)}static createCustomMetadataVector(e,r){e.startVector(4,r.length,4);for(let n=r.length-1;n>=0;n--)e.addOffset(r[n]);return e.endVector()}static startCustomMetadataVector(e,r){e.startVector(4,r,4)}static endMessage(e){return e.endObject()}static finishMessageBuffer(e,r){e.finish(r)}static finishSizePrefixedMessageBuffer(e,r){e.finish(r,void 0,!0)}static createMessage(e,r,n,s,a,u){return bs.startMessage(e),bs.addVersion(e,r),bs.addHeaderType(e,n),bs.addHeader(e,s),bs.addBodyLength(e,a),bs.addCustomMetadata(e,u),bs.endMessage(e)}};var ZL=$o;class ej extends Ct{visit(e,r){return e==null||r==null?void 0:super.visit(e,r)}visitNull(e,r){return ku.startNull(r),ku.endNull(r)}visitInt(e,r){return ri.startInt(r),ri.addBitWidth(r,e.bitWidth),ri.addIsSigned(r,e.isSigned),ri.endInt(r)}visitFloat(e,r){return Rs.startFloatingPoint(r),Rs.addPrecision(r,e.precision),Rs.endFloatingPoint(r)}visitBinary(e,r){return Eu.startBinary(r),Eu.endBinary(r)}visitBool(e,r){return Iu.startBool(r),Iu.endBool(r)}visitUtf8(e,r){return Du.startUtf8(r),Du.endUtf8(r)}visitDecimal(e,r){return $n.startDecimal(r),$n.addScale(r,e.scale),$n.addPrecision(r,e.precision),$n.addBitWidth(r,e.bitWidth),$n.endDecimal(r)}visitDate(e,r){return dp.startDate(r),dp.addUnit(r,e.unit),dp.endDate(r)}visitTime(e,r){return Oi.startTime(r),Oi.addUnit(r,e.unit),Oi.addBitWidth(r,e.bitWidth),Oi.endTime(r)}visitTimestamp(e,r){const n=e.timezone&&r.createString(e.timezone)||void 0;return ki.startTimestamp(r),ki.addUnit(r,e.unit),n!==void 0&&ki.addTimezone(r,n),ki.endTimestamp(r)}visitInterval(e,r){return Cs.startInterval(r),Cs.addUnit(r,e.unit),Cs.endInterval(r)}visitList(e,r){return Ou.startList(r),Ou.endList(r)}visitStruct(e,r){return Pu.startStruct_(r),Pu.endStruct_(r)}visitUnion(e,r){An.startTypeIdsVector(r,e.typeIds.length);const n=An.createTypeIdsVector(r,e.typeIds);return An.startUnion(r),An.addMode(r,e.mode),An.addTypeIds(r,n),An.endUnion(r)}visitDictionary(e,r){const n=this.visit(e.indices,r);return Io.startDictionaryEncoding(r),Io.addId(r,new ZL(e.id,0)),Io.addIsOrdered(r,e.isOrdered),n!==void 0&&Io.addIndexType(r,n),Io.endDictionaryEncoding(r)}visitFixedSizeBinary(e,r){return Ps.startFixedSizeBinary(r),Ps.addByteWidth(r,e.byteWidth),Ps.endFixedSizeBinary(r)}visitFixedSizeList(e,r){return Ds.startFixedSizeList(r),Ds.addListSize(r,e.listSize),Ds.endFixedSizeList(r)}visitMap(e,r){return hp.startMap(r),hp.addKeysSorted(r,e.keysSorted),hp.endMap(r)}}const Hv=new ej;function tj(t,e=new Map){return new Ut(nj(t,e),yp(t.customMetadata),e)}function rD(t){return new oi(t.count,nD(t.columns),iD(t.columns))}function rj(t){return new Ls(rD(t.data),t.id,t.isDelta)}function nj(t,e){return(t.fields||[]).filter(Boolean).map(r=>cr.fromJSON(r,e))}function fE(t,e){return(t.children||[]).filter(Boolean).map(r=>cr.fromJSON(r,e))}function nD(t){return(t||[]).reduce((e,r)=>[...e,new xu(r.count,ij(r.VALIDITY)),...nD(r.children)],[])}function iD(t,e=[]){for(let r=-1,n=(t||[]).length;++r<n;){const s=t[r];s.VALIDITY&&e.push(new As(e.length,s.VALIDITY.length)),s.TYPE&&e.push(new As(e.length,s.TYPE.length)),s.OFFSET&&e.push(new As(e.length,s.OFFSET.length)),s.DATA&&e.push(new As(e.length,s.DATA.length)),e=iD(s.children,e)}return e}function ij(t){return(t||[]).reduce((e,r)=>e+ +(r===0),0)}function sj(t,e){let r,n,s,a,u,l;return!e||!(a=t.dictionary)?(u=hE(t,fE(t,e)),s=new cr(t.name,u,t.nullable,yp(t.customMetadata))):e.has(r=a.id)?(n=(n=a.indexType)?dE(n):new Rf,l=new Xc(e.get(r),n,r,a.isOrdered),s=new cr(t.name,l,t.nullable,yp(t.customMetadata))):(n=(n=a.indexType)?dE(n):new Rf,e.set(r,u=hE(t,fE(t,e))),l=new Xc(u,n,r,a.isOrdered),s=new cr(t.name,l,t.nullable,yp(t.customMetadata))),s||null}function yp(t){return new Map(Object.entries(t||{}))}function dE(t){return new Ra(t.isSigned,t.bitWidth)}function hE(t,e){const r=t.type.name;switch(r){case"NONE":return new Da;case"null":return new Da;case"binary":return new Lp;case"utf8":return new jp;case"bool":return new Up;case"list":return new Wp((e||[])[0]);case"struct":return new pn(e||[]);case"struct_":return new pn(e||[])}switch(r){case"int":{const n=t.type;return new Ra(n.isSigned,n.bitWidth)}case"floatingpoint":{const n=t.type;return new Cf(xn[n.precision])}case"decimal":{const n=t.type;return new zp(n.scale,n.precision,n.bitWidth)}case"date":{const n=t.type;return new qp(Mo[n.unit])}case"time":{const n=t.type;return new $f(Mt[n.unit],n.bitWidth)}case"timestamp":{const n=t.type;return new Vp(Mt[n.unit],n.timezone)}case"interval":{const n=t.type;return new Kp(Pa[n.unit])}case"union":{const n=t.type;return new Hp(si[n.mode],n.typeIds||[],e||[])}case"fixedsizebinary":{const n=t.type;return new Qp(n.byteWidth)}case"fixedsizelist":{const n=t.type;return new Yp(n.listSize,(e||[])[0])}case"map":{const n=t.type;return new Gp((e||[])[0],n.keysSorted)}}throw new Error(`Unrecognized type: "${r}"`)}var Tu=$o,oj=HP,aj=Zc;class mn{constructor(e,r,n,s){this._version=r,this._headerType=n,this.body=new Uint8Array(0),s&&(this._createHeader=()=>s),this._bodyLength=typeof e=="number"?e:e.low}static fromJSON(e,r){const n=new mn(0,ni.V4,r);return n._createHeader=uj(e,r),n}static decode(e){e=new aj(xt(e));const r=ha.getRootAsMessage(e),n=r.bodyLength(),s=r.version(),a=r.headerType(),u=new mn(n,s,a);return u._createHeader=cj(r,a),u}static encode(e){const r=new oj;let n=-1;return e.isSchema()?n=Ut.encode(r,e.header()):e.isRecordBatch()?n=oi.encode(r,e.header()):e.isDictionaryBatch()&&(n=Ls.encode(r,e.header())),ha.startMessage(r),ha.addVersion(r,ni.V4),ha.addHeader(r,n),ha.addHeaderType(r,e.headerType),ha.addBodyLength(r,new Tu(e.bodyLength,0)),ha.finishMessageBuffer(r,ha.endMessage(r)),r.asUint8Array()}static from(e,r=0){if(e instanceof Ut)return new mn(0,ni.V4,Lt.Schema,e);if(e instanceof oi)return new mn(r,ni.V4,Lt.RecordBatch,e);if(e instanceof Ls)return new mn(r,ni.V4,Lt.DictionaryBatch,e);throw new Error(`Unrecognized Message header: ${e}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===Lt.Schema}isRecordBatch(){return this.headerType===Lt.RecordBatch}isDictionaryBatch(){return this.headerType===Lt.DictionaryBatch}}class oi{constructor(e,r,n){this._nodes=r,this._buffers=n,this._length=typeof e=="number"?e:e.low}get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}}class Ls{constructor(e,r,n=!1){this._data=e,this._isDelta=n,this._id=typeof r=="number"?r:r.low}get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}}class As{constructor(e,r){this.offset=typeof e=="number"?e:e.low,this.length=typeof r=="number"?r:r.low}}class xu{constructor(e,r){this.length=typeof e=="number"?e:e.low,this.nullCount=typeof r=="number"?r:r.low}}function uj(t,e){return(()=>{switch(e){case Lt.Schema:return Ut.fromJSON(t);case Lt.RecordBatch:return oi.fromJSON(t);case Lt.DictionaryBatch:return Ls.fromJSON(t)}throw new Error(`Unrecognized Message type: { name: ${Lt[e]}, type: ${e} }`)})}function cj(t,e){return(()=>{switch(e){case Lt.Schema:return Ut.decode(t.header(new Ss));case Lt.RecordBatch:return oi.decode(t.header(new bo),t.version());case Lt.DictionaryBatch:return Ls.decode(t.header(new Nc),t.version())}throw new Error(`Unrecognized Message type: { name: ${Lt[e]}, type: ${e} }`)})}cr.encode=wj;cr.decode=gj;cr.fromJSON=sj;Ut.encode=_j;Ut.decode=lj;Ut.fromJSON=tj;oi.encode=bj;oi.decode=fj;oi.fromJSON=rD;Ls.encode=Sj;Ls.decode=dj;Ls.fromJSON=rj;xu.encode=Ej;xu.decode=pj;As.encode=Ij;As.decode=hj;function lj(t,e=new Map){const r=vj(t,e);return new Ut(r,vp(t),e)}function fj(t,e=ni.V4){if(t.compression()!==null)throw new Error("Record batch compression not implemented");return new oi(t.length(),mj(t),yj(t,e))}function dj(t,e=ni.V4){return new Ls(oi.decode(t.data(),e),t.id(),t.isDelta())}function hj(t){return new As(t.offset(),t.length())}function pj(t){return new xu(t.length(),t.nullCount())}function mj(t){const e=[];for(let r,n=-1,s=-1,a=t.nodesLength();++n<a;)(r=t.nodes(n))&&(e[++s]=xu.decode(r));return e}function yj(t,e){const r=[];for(let n,s=-1,a=-1,u=t.buffersLength();++s<u;)(n=t.buffers(s))&&(e<ni.V4&&(n.bb_pos+=8*(s+1)),r[++a]=As.decode(n));return r}function vj(t,e){const r=[];for(let n,s=-1,a=-1,u=t.fieldsLength();++s<u;)(n=t.fields(s))&&(r[++a]=cr.decode(n,e));return r}function pE(t,e){const r=[];for(let n,s=-1,a=-1,u=t.childrenLength();++s<u;)(n=t.children(s))&&(r[++a]=cr.decode(n,e));return r}function gj(t,e){let r,n,s,a,u,l;return!e||!(l=t.dictionary())?(s=yE(t,pE(t,e)),n=new cr(t.name(),s,t.nullable(),vp(t))):e.has(r=l.id().low)?(a=(a=l.indexType())?mE(a):new Rf,u=new Xc(e.get(r),a,r,l.isOrdered()),n=new cr(t.name(),u,t.nullable(),vp(t))):(a=(a=l.indexType())?mE(a):new Rf,e.set(r,s=yE(t,pE(t,e))),u=new Xc(s,a,r,l.isOrdered()),n=new cr(t.name(),u,t.nullable(),vp(t))),n||null}function vp(t){const e=new Map;if(t)for(let r,n,s=-1,a=Math.trunc(t.customMetadataLength());++s<a;)(r=t.customMetadata(s))&&(n=r.key())!=null&&e.set(n,r.value());return e}function mE(t){return new Ra(t.isSigned(),t.bitWidth())}function yE(t,e){const r=t.typeType();switch(r){case _r.NONE:return new Da;case _r.Null:return new Da;case _r.Binary:return new Lp;case _r.Utf8:return new jp;case _r.Bool:return new Up;case _r.List:return new Wp((e||[])[0]);case _r.Struct_:return new pn(e||[])}switch(r){case _r.Int:{const n=t.type(new ri);return new Ra(n.isSigned(),n.bitWidth())}case _r.FloatingPoint:{const n=t.type(new Rs);return new Cf(n.precision())}case _r.Decimal:{const n=t.type(new $n);return new zp(n.scale(),n.precision(),n.bitWidth())}case _r.Date:{const n=t.type(new dp);return new qp(n.unit())}case _r.Time:{const n=t.type(new Oi);return new $f(n.unit(),n.bitWidth())}case _r.Timestamp:{const n=t.type(new ki);return new Vp(n.unit(),n.timezone())}case _r.Interval:{const n=t.type(new Cs);return new Kp(n.unit())}case _r.Union:{const n=t.type(new An);return new Hp(n.mode(),n.typeIdsArray()||[],e||[])}case _r.FixedSizeBinary:{const n=t.type(new Ps);return new Qp(n.byteWidth())}case _r.FixedSizeList:{const n=t.type(new Ds);return new Yp(n.listSize(),(e||[])[0])}case _r.Map:{const n=t.type(new hp);return new Gp((e||[])[0],n.keysSorted())}}throw new Error(`Unrecognized type: "${_r[r]}" (${r})`)}function _j(t,e){const r=e.fields.map(a=>cr.encode(t,a));Ss.startFieldsVector(t,r.length);const n=Ss.createFieldsVector(t,r),s=e.metadata&&e.metadata.size>0?Ss.createCustomMetadataVector(t,[...e.metadata].map(([a,u])=>{const l=t.createString(`${a}`),d=t.createString(`${u}`);return Fr.startKeyValue(t),Fr.addKey(t,l),Fr.addValue(t,d),Fr.endKeyValue(t)})):-1;return Ss.startSchema(t),Ss.addFields(t,n),Ss.addEndianness(t,Oj?tl.Little:tl.Big),s!==-1&&Ss.addCustomMetadata(t,s),Ss.endSchema(t)}function wj(t,e){let r=-1,n=-1,s=-1;const a=e.type;let u=e.typeId;ct.isDictionary(a)?(u=a.dictionary.typeId,s=Hv.visit(a,t),n=Hv.visit(a.dictionary,t)):n=Hv.visit(a,t);const l=(a.children||[]).map(y=>cr.encode(t,y)),d=Si.createChildrenVector(t,l),m=e.metadata&&e.metadata.size>0?Si.createCustomMetadataVector(t,[...e.metadata].map(([y,g])=>{const b=t.createString(`${y}`),S=t.createString(`${g}`);return Fr.startKeyValue(t),Fr.addKey(t,b),Fr.addValue(t,S),Fr.endKeyValue(t)})):-1;return e.name&&(r=t.createString(e.name)),Si.startField(t),Si.addType(t,n),Si.addTypeType(t,u),Si.addChildren(t,d),Si.addNullable(t,!!e.nullable),r!==-1&&Si.addName(t,r),s!==-1&&Si.addDictionary(t,s),m!==-1&&Si.addCustomMetadata(t,m),Si.endField(t)}function bj(t,e){const r=e.nodes||[],n=e.buffers||[];bo.startNodesVector(t,r.length);for(const u of r.slice().reverse())xu.encode(t,u);const s=t.endVector();bo.startBuffersVector(t,n.length);for(const u of n.slice().reverse())As.encode(t,u);const a=t.endVector();return bo.startRecordBatch(t),bo.addLength(t,new Tu(e.length,0)),bo.addNodes(t,s),bo.addBuffers(t,a),bo.endRecordBatch(t)}function Sj(t,e){const r=oi.encode(t,e.data);return Nc.startDictionaryBatch(t),Nc.addId(t,new Tu(e.id,0)),Nc.addIsDelta(t,e.isDelta),Nc.addData(t,r),Nc.endDictionaryBatch(t)}function Ej(t,e){return tD.createFieldNode(t,new Tu(e.length,0),new Tu(e.nullCount,0))}function Ij(t,e){return eD.createBuffer(t,new Tu(e.offset,0),new Tu(e.length,0))}const Oj=(()=>{const t=new ArrayBuffer(2);return new DataView(t).setInt16(0,256,!0),new Int16Array(t)[0]===256})(),J0=t=>`Expected ${Lt[t]} Message in stream, but was null or length 0.`,X0=t=>`Header pointer of flatbuffer-encoded ${Lt[t]} Message is null or length 0.`,sD=(t,e)=>`Expected to read ${t} metadata bytes, but only read ${e}.`,oD=(t,e)=>`Expected to read ${t} bytes for message body, but only read ${e}.`;class aD{constructor(e){this.source=e instanceof sm?e:new sm(e)}[Symbol.iterator](){return this}next(){let e;return(e=this.readMetadataLength()).done||e.value===-1&&(e=this.readMetadataLength()).done||(e=this.readMetadata(e.value)).done?wr:e}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}readMessage(e){let r;if((r=this.next()).done)return null;if(e!=null&&r.value.headerType!==e)throw new Error(J0(e));return r.value}readMessageBody(e){if(e<=0)return new Uint8Array(0);const r=xt(this.source.read(e));if(r.byteLength<e)throw new Error(oD(e,r.byteLength));return r.byteOffset%8===0&&r.byteOffset+r.byteLength<=r.buffer.byteLength?r:r.slice()}readSchema(e=!1){const r=Lt.Schema,n=this.readMessage(r),s=n?.header();if(e&&!s)throw new Error(X0(r));return s}readMetadataLength(){const e=this.source.read(Cm),r=e&&new Zc(e),n=r?.readInt32(0)||0;return{done:n===0,value:n}}readMetadata(e){const r=this.source.read(e);if(!r)return wr;if(r.byteLength<e)throw new Error(sD(e,r.byteLength));return{done:!1,value:mn.decode(r)}}}class kj{constructor(e,r){this.source=e instanceof nl?e:Dk(e)?new om(e,r):new nl(e)}[Symbol.asyncIterator](){return this}next(){return st(this,void 0,void 0,function*(){let e;return(e=yield this.readMetadataLength()).done||e.value===-1&&(e=yield this.readMetadataLength()).done||(e=yield this.readMetadata(e.value)).done?wr:e})}throw(e){return st(this,void 0,void 0,function*(){return yield this.source.throw(e)})}return(e){return st(this,void 0,void 0,function*(){return yield this.source.return(e)})}readMessage(e){return st(this,void 0,void 0,function*(){let r;if((r=yield this.next()).done)return null;if(e!=null&&r.value.headerType!==e)throw new Error(J0(e));return r.value})}readMessageBody(e){return st(this,void 0,void 0,function*(){if(e<=0)return new Uint8Array(0);const r=xt(yield this.source.read(e));if(r.byteLength<e)throw new Error(oD(e,r.byteLength));return r.byteOffset%8===0&&r.byteOffset+r.byteLength<=r.buffer.byteLength?r:r.slice()})}readSchema(e=!1){return st(this,void 0,void 0,function*(){const r=Lt.Schema,n=yield this.readMessage(r),s=n?.header();if(e&&!s)throw new Error(X0(r));return s})}readMetadataLength(){return st(this,void 0,void 0,function*(){const e=yield this.source.read(Cm),r=e&&new Zc(e),n=r?.readInt32(0)||0;return{done:n===0,value:n}})}readMetadata(e){return st(this,void 0,void 0,function*(){const r=yield this.source.read(e);if(!r)return wr;if(r.byteLength<e)throw new Error(sD(e,r.byteLength));return{done:!1,value:mn.decode(r)}})}}class Pj extends aD{constructor(e){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=e instanceof uE?e:new uE(e)}next(){const{_json:e}=this;if(!this._schema)return this._schema=!0,{done:!1,value:mn.fromJSON(e.schema,Lt.Schema)};if(this._dictionaryIndex<e.dictionaries.length){const r=e.dictionaries[this._dictionaryIndex++];return this._body=r.data.columns,{done:!1,value:mn.fromJSON(r,Lt.DictionaryBatch)}}if(this._batchIndex<e.batches.length){const r=e.batches[this._batchIndex++];return this._body=r.columns,{done:!1,value:mn.fromJSON(r,Lt.RecordBatch)}}return this._body=[],wr}readMessageBody(e){return r(this._body);function r(n){return(n||[]).reduce((s,a)=>[...s,...a.VALIDITY&&[a.VALIDITY]||[],...a.TYPE&&[a.TYPE]||[],...a.OFFSET&&[a.OFFSET]||[],...a.DATA&&[a.DATA]||[],...r(a.children)],[])}}readMessage(e){let r;if((r=this.next()).done)return null;if(e!=null&&r.value.headerType!==e)throw new Error(J0(e));return r.value}readSchema(){const e=Lt.Schema,r=this.readMessage(e),n=r?.header();if(!r||!n)throw new Error(X0(e));return n}}const Cm=4,jg="ARROW1",Nf=new Uint8Array(jg.length);for(let t=0;t<jg.length;t+=1)Nf[t]=jg.codePointAt(t);function Z0(t,e=0){for(let r=-1,n=Nf.length;++r<n;)if(Nf[r]!==t[e+r])return!1;return!0}const Gf=Nf.length,uD=Gf+Cm,Dj=Gf*2+Cm;class Ao extends K0{constructor(e){super(),this._impl=e}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(e){return this._impl.throw(e)}return(e){return this._impl.return(e)}cancel(){return this._impl.cancel()}reset(e){return this._impl.reset(e),this._DOMStream=void 0,this._nodeStream=void 0,this}open(e){const r=this._impl.open(e);return ka(r)?r.then(()=>this):this}readRecordBatch(e){return this._impl.isFile()?this._impl.readRecordBatch(e):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return Ei.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return Ei.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(e){throw new Error('"throughNode" not available in this environment')}static throughDOM(e,r){throw new Error('"throughDOM" not available in this environment')}static from(e){return e instanceof Ao?e:Rg(e)?Aj(e):Dk(e)?xj(e):ka(e)?st(this,void 0,void 0,function*(){return yield Ao.from(yield e)}):Rk(e)||$0(e)||Ck(e)||ml(e)?Tj(new nl(e)):Nj(new sm(e))}static readAll(e){return e instanceof Ao?e.isSync()?vE(e):gE(e):Rg(e)||ArrayBuffer.isView(e)||Wf(e)||Pk(e)?vE(e):gE(e)}}class lm extends Ao{constructor(e){super(e),this._impl=e}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return Yi(this,arguments,function*(){yield ut(yield*ip(ga(this[Symbol.iterator]())))})}}class fm extends Ao{constructor(e){super(e),this._impl=e}readAll(){var e,r;return st(this,void 0,void 0,function*(){const n=new Array;try{for(var s=ga(this),a;a=yield s.next(),!a.done;){const u=a.value;n.push(u)}}catch(u){e={error:u}}finally{try{a&&!a.done&&(r=s.return)&&(yield r.call(s))}finally{if(e)throw e.error}}return n})}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}class cD extends lm{constructor(e){super(e),this._impl=e}}class Rj extends fm{constructor(e){super(e),this._impl=e}}class lD{constructor(e=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=e}get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(e){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=e,this.dictionaries=new Map,this}_loadRecordBatch(e,r){const n=this._loadVectors(e,r,this.schema.fields),s=Rt({type:new pn(this.schema.fields),length:e.length,children:n});return new Nn(this.schema,s)}_loadDictionaryBatch(e,r){const{id:n,isDelta:s}=e,{dictionaries:a,schema:u}=this,l=a.get(n);if(s||!l){const d=u.dictionaries.get(n),m=this._loadVectors(e.data,r,[d]);return(l&&s?l.concat(new jt(m)):new jt(m)).memoize()}return l.memoize()}_loadVectors(e,r,n){return new GP(r,e.nodes,e.buffers,this.dictionaries).visitMany(n)}}class dm extends lD{constructor(e,r){super(r),this._reader=Rg(e)?new Pj(this._handle=e):new aD(this._handle=e)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(e){return this.closed||(this.autoDestroy=dD(this,e),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(e){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(e):wr}return(e){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(e):wr}next(){if(this.closed)return wr;let e;const{_reader:r}=this;for(;e=this._readNextMessageAndValidate();)if(e.isSchema())this.reset(e.header());else if(e.isRecordBatch()){this._recordBatchIndex++;const n=e.header(),s=r.readMessageBody(e.bodyLength);return{done:!1,value:this._loadRecordBatch(n,s)}}else if(e.isDictionaryBatch()){this._dictionaryIndex++;const n=e.header(),s=r.readMessageBody(e.bodyLength),a=this._loadDictionaryBatch(n,s);this.dictionaries.set(n.id,a)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new G0(this.schema)}):this.return()}_readNextMessageAndValidate(e){return this._reader.readMessage(e)}}class hm extends lD{constructor(e,r){super(r),this._reader=new kj(this._handle=e)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return st(this,void 0,void 0,function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)})}open(e){return st(this,void 0,void 0,function*(){return this.closed||(this.autoDestroy=dD(this,e),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this})}throw(e){return st(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(e):wr})}return(e){return st(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(e):wr})}next(){return st(this,void 0,void 0,function*(){if(this.closed)return wr;let e;const{_reader:r}=this;for(;e=yield this._readNextMessageAndValidate();)if(e.isSchema())yield this.reset(e.header());else if(e.isRecordBatch()){this._recordBatchIndex++;const n=e.header(),s=yield r.readMessageBody(e.bodyLength);return{done:!1,value:this._loadRecordBatch(n,s)}}else if(e.isDictionaryBatch()){this._dictionaryIndex++;const n=e.header(),s=yield r.readMessageBody(e.bodyLength),a=this._loadDictionaryBatch(n,s);this.dictionaries.set(n.id,a)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new G0(this.schema)}):yield this.return()})}_readNextMessageAndValidate(e){return st(this,void 0,void 0,function*(){return yield this._reader.readMessage(e)})}}class fD extends dm{constructor(e,r){super(e instanceof cE?e:new cE(e),r)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isSync(){return!0}isFile(){return!0}open(e){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const r of this._footer.dictionaryBatches())r&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(e)}readRecordBatch(e){var r;if(this.closed)return null;this._footer||this.open();const n=(r=this._footer)===null||r===void 0?void 0:r.getRecordBatch(e);if(n&&this._handle.seek(n.offset)){const s=this._reader.readMessage(Lt.RecordBatch);if(s?.isRecordBatch()){const a=s.header(),u=this._reader.readMessageBody(s.bodyLength);return this._loadRecordBatch(a,u)}}return null}_readDictionaryBatch(e){var r;const n=(r=this._footer)===null||r===void 0?void 0:r.getDictionaryBatch(e);if(n&&this._handle.seek(n.offset)){const s=this._reader.readMessage(Lt.DictionaryBatch);if(s?.isDictionaryBatch()){const a=s.header(),u=this._reader.readMessageBody(s.bodyLength),l=this._loadDictionaryBatch(a,u);this.dictionaries.set(a.id,l)}}}_readFooter(){const{_handle:e}=this,r=e.size-uD,n=e.readInt32(r),s=e.readAt(r-n,n);return Af.decode(s)}_readNextMessageAndValidate(e){var r;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const n=(r=this._footer)===null||r===void 0?void 0:r.getRecordBatch(this._recordBatchIndex);if(n&&this._handle.seek(n.offset))return this._reader.readMessage(e)}return null}}class Cj extends hm{constructor(e,...r){const n=typeof r[0]!="number"?r.shift():void 0,s=r[0]instanceof Map?r.shift():void 0;super(e instanceof om?e:new om(e,n),s)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isFile(){return!0}isAsync(){return!0}open(e){const r=Object.create(null,{open:{get:()=>super.open}});return st(this,void 0,void 0,function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const n of this._footer.dictionaryBatches())n&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield r.open.call(this,e)})}readRecordBatch(e){var r;return st(this,void 0,void 0,function*(){if(this.closed)return null;this._footer||(yield this.open());const n=(r=this._footer)===null||r===void 0?void 0:r.getRecordBatch(e);if(n&&(yield this._handle.seek(n.offset))){const s=yield this._reader.readMessage(Lt.RecordBatch);if(s?.isRecordBatch()){const a=s.header(),u=yield this._reader.readMessageBody(s.bodyLength);return this._loadRecordBatch(a,u)}}return null})}_readDictionaryBatch(e){var r;return st(this,void 0,void 0,function*(){const n=(r=this._footer)===null||r===void 0?void 0:r.getDictionaryBatch(e);if(n&&(yield this._handle.seek(n.offset))){const s=yield this._reader.readMessage(Lt.DictionaryBatch);if(s?.isDictionaryBatch()){const a=s.header(),u=yield this._reader.readMessageBody(s.bodyLength),l=this._loadDictionaryBatch(a,u);this.dictionaries.set(a.id,l)}}})}_readFooter(){return st(this,void 0,void 0,function*(){const{_handle:e}=this;e._pending&&(yield e._pending);const r=e.size-uD,n=yield e.readInt32(r),s=yield e.readAt(r-n,n);return Af.decode(s)})}_readNextMessageAndValidate(e){return st(this,void 0,void 0,function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const r=this._footer.getRecordBatch(this._recordBatchIndex);if(r&&(yield this._handle.seek(r.offset)))return yield this._reader.readMessage(e)}return null})}}class $j extends dm{constructor(e,r){super(e,r)}_loadVectors(e,r,n){return new qL(r,e.nodes,e.buffers,this.dictionaries).visitMany(n)}}function dD(t,e){return e&&typeof e.autoDestroy=="boolean"?e.autoDestroy:t.autoDestroy}function*vE(t){const e=Ao.from(t);try{if(!e.open({autoDestroy:!1}).closed)do yield e;while(!e.reset().open().closed)}finally{e.cancel()}}function gE(t){return Yi(this,arguments,function*(){const r=yield ut(Ao.from(t));try{if(!(yield ut(r.open({autoDestroy:!1}))).closed)do yield yield ut(r);while(!(yield ut(r.reset().open())).closed)}finally{yield ut(r.cancel())}})}function Aj(t){return new lm(new $j(t))}function Nj(t){const e=t.peek(Gf+7&-8);return e&&e.byteLength>=4?Z0(e)?new cD(new fD(t.read())):new lm(new dm(t)):new lm(new dm((function*(){})()))}function Tj(t){return st(this,void 0,void 0,function*(){const e=yield t.peek(Gf+7&-8);return e&&e.byteLength>=4?Z0(e)?new cD(new fD(yield t.read())):new fm(new hm(t)):new fm(new hm((function(){return Yi(this,arguments,function*(){})})()))})}function xj(t){return st(this,void 0,void 0,function*(){const{size:e}=yield t.stat(),r=new om(t,e);return e>=Dj&&Z0(yield r.readAt(0,Gf+7&-8))?new Rj(new Cj(r)):new fm(new hm(r))})}class $r extends Ct{constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}static assemble(...e){const r=s=>s.flatMap(a=>Array.isArray(a)?r(a):a instanceof Nn?a.data.children:a.data),n=new $r;return n.visitMany(r(e)),n}visit(e){if(e instanceof jt)return this.visitMany(e.data),this;const{type:r}=e;if(!ct.isDictionary(r)){const{length:n,nullCount:s}=e;if(n>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");ct.isNull(r)||Xi.call(this,s<=0?new Uint8Array(0):j0(e.offset,n,e.nullBitmap)),this.nodes.push(new xu(n,s))}return super.visit(e)}visitNull(e){return this}visitDictionary(e){return this.visit(e.clone(e.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function Xi(t){const e=t.byteLength+7&-8;return this.buffers.push(t),this.bufferRegions.push(new As(this._byteLength,e)),this._byteLength+=e,this}function Mj(t){const{type:e,length:r,typeIds:n,valueOffsets:s}=t;if(Xi.call(this,n),e.mode===si.Sparse)return Ug.call(this,t);if(e.mode===si.Dense){if(t.offset<=0)return Xi.call(this,s),Ug.call(this,t);{const a=n.reduce((y,g)=>Math.max(y,g),n[0]),u=new Int32Array(a+1),l=new Int32Array(a+1).fill(-1),d=new Int32Array(r),m=N0(-s[0],r,s);for(let y,g,b=-1;++b<r;)(g=l[y=n[b]])===-1&&(g=l[y]=m[y]),d[b]=m[b]-g,++u[y];Xi.call(this,d);for(let y,g=-1,b=e.children.length;++g<b;)if(y=t.children[g]){const S=e.typeIds[g],E=Math.min(r,u[S]);this.visit(y.slice(l[S],E))}}}return this}function Fj(t){let e;return t.nullCount>=t.length?Xi.call(this,new Uint8Array(0)):(e=t.values)instanceof Uint8Array?Xi.call(this,j0(t.offset,t.length,e)):Xi.call(this,Jp(t.values))}function ja(t){return Xi.call(this,t.values.subarray(0,t.length*t.stride))}function hD(t){const{length:e,values:r,valueOffsets:n}=t,s=n[0],a=n[e],u=Math.min(a-s,r.byteLength-s);return Xi.call(this,N0(-n[0],e,n)),Xi.call(this,r.subarray(s,s+u)),this}function e_(t){const{length:e,valueOffsets:r}=t;return r&&Xi.call(this,N0(r[0],e,r)),this.visit(t.children[0])}function Ug(t){return this.visitMany(t.type.children.map((e,r)=>t.children[r]).filter(Boolean))[0]}$r.prototype.visitBool=Fj;$r.prototype.visitInt=ja;$r.prototype.visitFloat=ja;$r.prototype.visitUtf8=hD;$r.prototype.visitBinary=hD;$r.prototype.visitFixedSizeBinary=ja;$r.prototype.visitDate=ja;$r.prototype.visitTimestamp=ja;$r.prototype.visitTime=ja;$r.prototype.visitDecimal=ja;$r.prototype.visitList=e_;$r.prototype.visitStruct=Ug;$r.prototype.visitUnion=Mj;$r.prototype.visitInterval=ja;$r.prototype.visitFixedSizeList=e_;$r.prototype.visitMap=e_;class pD extends K0{constructor(e){super(),this._position=0,this._started=!1,this._sink=new mp,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,Bn(e)||(e={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof e.autoDestroy=="boolean"?e.autoDestroy:!0,this._writeLegacyIpcFormat=typeof e.writeLegacyIpcFormat=="boolean"?e.writeLegacyIpcFormat:!1}static throughNode(e){throw new Error('"throughNode" not available in this environment')}static throughDOM(e,r){throw new Error('"throughDOM" not available in this environment')}toString(e=!1){return this._sink.toString(e)}toUint8Array(e=!1){return this._sink.toUint8Array(e)}writeAll(e){return ka(e)?e.then(r=>this.writeAll(r)):ml(e)?i_(this,e):n_(this,e)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(e){return this._sink.toDOMStream(e)}toNodeStream(e){return this._sink.toNodeStream(e)}close(){return this.reset()._sink.close()}abort(e){return this.reset()._sink.abort(e)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(e=this._sink,r=null){return e===this._sink||e instanceof mp?this._sink=e:(this._sink=new mp,e&&iB(e)?this.toDOMStream({type:"bytes"}).pipeTo(e):e&&sB(e)&&this.toNodeStream({objectMode:!1}).pipe(e)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!r||!Fg(r,this._schema))&&(r==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=r,this._writeSchema(r))),this}write(e){let r=null;if(this._sink){if(e==null)return this.finish()&&void 0;if(e instanceof dn&&!(r=e.schema))return this.finish()&&void 0;if(e instanceof Nn&&!(r=e.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(r&&!Fg(r,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,r)}e instanceof Nn?e instanceof G0||this._writeRecordBatch(e):e instanceof dn?this.writeAll(e.batches):Wf(e)&&this.writeAll(e)}_writeMessage(e,r=8){const n=r-1,s=mn.encode(e),a=s.byteLength,u=this._writeLegacyIpcFormat?4:8,l=a+u+n&~n,d=l-a-u;return e.headerType===Lt.RecordBatch?this._recordBatchBlocks.push(new Ca(l,e.bodyLength,this._position)):e.headerType===Lt.DictionaryBatch&&this._dictionaryBlocks.push(new Ca(l,e.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(l-u)),a>0&&this._write(s),this._writePadding(d)}_write(e){if(this._started){const r=xt(e);r&&r.byteLength>0&&(this._sink.write(r),this._position+=r.byteLength)}return this}_writeSchema(e){return this._writeMessage(mn.from(e))}_writeFooter(e){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(Nf)}_writePadding(e){return e>0?this._write(new Uint8Array(e)):this}_writeRecordBatch(e){const{byteLength:r,nodes:n,bufferRegions:s,buffers:a}=$r.assemble(e),u=new oi(e.numRows,n,s),l=mn.from(u,r);return this._writeDictionaries(e)._writeMessage(l)._writeBodyBuffers(a)}_writeDictionaryBatch(e,r,n=!1){this._dictionaryDeltaOffsets.set(r,e.length+(this._dictionaryDeltaOffsets.get(r)||0));const{byteLength:s,nodes:a,bufferRegions:u,buffers:l}=$r.assemble(new jt([e])),d=new oi(e.length,a,u),m=new Ls(d,r,n),y=mn.from(m,s);return this._writeMessage(y)._writeBodyBuffers(l)}_writeBodyBuffers(e){let r,n,s;for(let a=-1,u=e.length;++a<u;)(r=e[a])&&(n=r.byteLength)>0&&(this._write(r),(s=(n+7&-8)-n)>0&&this._writePadding(s));return this}_writeDictionaries(e){for(let[r,n]of e.dictionaries){let s=this._dictionaryDeltaOffsets.get(r)||0;if(s===0||(n=n?.slice(s)).length>0)for(const a of n.data)this._writeDictionaryBatch(a,r,s>0),s+=a.length}return this}}class t_ extends pD{static writeAll(e,r){const n=new t_(r);return ka(e)?e.then(s=>n.writeAll(s)):ml(e)?i_(n,e):n_(n,e)}}class r_ extends pD{static writeAll(e){const r=new r_;return ka(e)?e.then(n=>r.writeAll(n)):ml(e)?i_(r,e):n_(r,e)}constructor(){super(),this._autoDestroy=!0}_writeSchema(e){return this._writeMagic()._writePadding(2)}_writeFooter(e){const r=Af.encode(new Af(e,ni.V4,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(e)._write(r)._write(Int32Array.of(r.byteLength))._writeMagic()}}function n_(t,e){let r=e;e instanceof dn&&(r=e.batches,t.reset(void 0,e.schema));for(const n of r)t.write(n);return t.finish()}function i_(t,e){var r,n,s,a;return st(this,void 0,void 0,function*(){try{for(r=ga(e);n=yield r.next(),!n.done;){const u=n.value;t.write(u)}}catch(u){s={error:u}}finally{try{n&&!n.done&&(a=r.return)&&(yield a.call(r))}finally{if(s)throw s.error}}return t.finish()})}function of(t){const e=Ao.from(t);return ka(e)?e.then(r=>of(r)):e.isAsync()?e.readAll().then(r=>new dn(r)):new dn(e.readAll())}function Qv(t,e="stream"){return(e==="stream"?t_:r_).writeAll(t).toUint8Array(!0)}var _E=(function(){function t(e,r,n,s){var a=this;this.getCell=function(u,l){var d=u<a.headerRows&&l<a.headerColumns,m=u>=a.headerRows&&l<a.headerColumns,y=u<a.headerRows&&l>=a.headerColumns;if(d){var g=["blank"];return l>0&&g.push("level"+u),{type:"blank",classNames:g.join(" "),content:""}}else if(y){var b=l-a.headerColumns,g=["col_heading","level"+u,"col"+b];return{type:"columns",classNames:g.join(" "),content:a.getContent(a.columnsTable,b,u)}}else if(m){var S=u-a.headerRows,g=["row_heading","level"+l,"row"+S];return{type:"index",id:"T_".concat(a.uuid,"level").concat(l,"_row").concat(S),classNames:g.join(" "),content:a.getContent(a.indexTable,S,l)}}else{var S=u-a.headerRows,b=l-a.headerColumns,g=["data","row"+S,"col"+b],E=a.styler?a.getContent(a.styler.displayValuesTable,S,b):a.getContent(a.dataTable,S,b);return{type:"data",id:"T_".concat(a.uuid,"row").concat(S,"_col").concat(b),classNames:g.join(" "),content:E}}},this.getContent=function(u,l,d){var m=u.getChildAt(d);if(m===null)return"";var y=a.getColumnTypeId(u,d);return y===fe.Timestamp?a.nanosToDate(m.get(l)):m.get(l)},this.dataTable=of(e),this.indexTable=of(r),this.columnsTable=of(n),this.styler=s?{caption:s.caption,displayValuesTable:of(s.displayValues),styles:s.styles,uuid:s.uuid}:void 0}return Object.defineProperty(t.prototype,"rows",{get:function(){return this.indexTable.numRows+this.columnsTable.numCols},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"columns",{get:function(){return this.indexTable.numCols+this.columnsTable.numRows},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"headerRows",{get:function(){return this.rows-this.dataRows},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"headerColumns",{get:function(){return this.columns-this.dataColumns},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataRows",{get:function(){return this.dataTable.numRows},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataColumns",{get:function(){return this.dataTable.numCols},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uuid",{get:function(){return this.styler&&this.styler.uuid},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"caption",{get:function(){return this.styler&&this.styler.caption},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"styles",{get:function(){return this.styler&&this.styler.styles},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"table",{get:function(){return this.dataTable},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"index",{get:function(){return this.indexTable},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"columnTable",{get:function(){return this.columnsTable},enumerable:!1,configurable:!0}),t.prototype.serialize=function(){return{data:Qv(this.dataTable),index:Qv(this.indexTable),columns:Qv(this.columnsTable)}},t.prototype.getColumnTypeId=function(e,r){return e.schema.fields[r].type.typeId},t.prototype.nanosToDate=function(e){return new Date(e/1e6)},t})(),pf=function(){return pf=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},pf.apply(this,arguments)},mf;(function(t){t.COMPONENT_READY="streamlit:componentReady",t.SET_COMPONENT_VALUE="streamlit:setComponentValue",t.SET_FRAME_HEIGHT="streamlit:setFrameHeight"})(mf||(mf={}));var hn=(function(){function t(){}return t.API_VERSION=1,t.RENDER_EVENT="streamlit:render",t.events=new EventTarget,t.registeredMessageListener=!1,t.setComponentReady=function(){t.registeredMessageListener||(window.addEventListener("message",t.onMessageEvent),t.registeredMessageListener=!0),t.sendBackMsg(mf.COMPONENT_READY,{apiVersion:t.API_VERSION})},t.setFrameHeight=function(e){e===void 0&&(e=document.body.scrollHeight),e!==t.lastFrameHeight&&(t.lastFrameHeight=e,t.sendBackMsg(mf.SET_FRAME_HEIGHT,{height:e}))},t.setComponentValue=function(e){var r;e instanceof _E?(r="dataframe",e=e.serialize()):Lj(e)?(r="bytes",e=new Uint8Array(e.buffer)):e instanceof ArrayBuffer?(r="bytes",e=new Uint8Array(e)):r="json",t.sendBackMsg(mf.SET_COMPONENT_VALUE,{value:e,dataType:r})},t.onMessageEvent=function(e){var r=e.data.type;r===t.RENDER_EVENT&&t.onRenderMessage(e.data)},t.onRenderMessage=function(e){var r=e.args;r==null&&(console.error("Got null args in onRenderMessage. This should never happen"),r={});var n=e.dfs&&e.dfs.length>0?t.argsDataframeToObject(e.dfs):{};r=pf(pf({},r),n);var s=!!e.disabled,a=e.theme;a&&Bj(a);var u={disabled:s,args:r,theme:a},l=new CustomEvent(t.RENDER_EVENT,{detail:u});t.events.dispatchEvent(l)},t.argsDataframeToObject=function(e){var r=e.map(function(n){var s=n.key,a=n.value;return[s,t.toArrowTable(a)]});return Object.fromEntries(r)},t.toArrowTable=function(e){var r,n=(r=e.data,r.data),s=r.index,a=r.columns,u=r.styler;return new _E(n,s,a,u)},t.sendBackMsg=function(e,r){window.parent.postMessage(pf({isStreamlitMessage:!0,type:e},r),"*")},t})(),Bj=function(t){var e=document.createElement("style");document.head.appendChild(e),e.innerHTML=`
    :root {
      --primary-color: `.concat(t.primaryColor,`;
      --background-color: `).concat(t.backgroundColor,`;
      --secondary-background-color: `).concat(t.secondaryBackgroundColor,`;
      --text-color: `).concat(t.textColor,`;
      --font: `).concat(t.font,`;
    }

    body {
      background-color: var(--background-color);
      color: var(--text-color);
    }
  `)};function Lj(t){var e=!1;try{e=t instanceof BigInt64Array||t instanceof BigUint64Array}catch{}return t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array||e}var mD=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(n[a]=s[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})();(function(t){mD(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.componentDidMount=function(){hn.setFrameHeight()},e.prototype.componentDidUpdate=function(){hn.setFrameHeight()},e})(Rc.PureComponent);function jj(t){var e=(function(r){mD(n,r);function n(s){var a=r.call(this,s)||this;return a.componentDidMount=function(){hn.events.addEventListener(hn.RENDER_EVENT,a.onRenderEvent),hn.setComponentReady()},a.componentDidUpdate=function(){a.state.componentError!=null&&hn.setFrameHeight()},a.componentWillUnmount=function(){hn.events.removeEventListener(hn.RENDER_EVENT,a.onRenderEvent)},a.onRenderEvent=function(u){a.setState({renderData:u.detail})},a.state={renderData:void 0,componentError:void 0},a}return n.prototype.render=function(){return this.state.componentError!=null?Rc.createElement("div",null,Rc.createElement("h1",null,"Component Error"),Rc.createElement("span",null,this.state.componentError.message)):this.state.renderData==null?null:Rc.createElement(t,{width:window.innerWidth,disabled:this.state.renderData.disabled,args:this.state.renderData.args,theme:this.state.renderData.theme})},n.getDerivedStateFromError=function(s){return{componentError:s}},n})(Rc.PureComponent);return Y2(e,t)}let rp;const Uj=new Uint8Array(16);function zj(){if(!rp&&(rp=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!rp))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return rp(Uj)}const Wr=[];for(let t=0;t<256;++t)Wr.push((t+256).toString(16).slice(1));function qj(t,e=0){return Wr[t[e+0]]+Wr[t[e+1]]+Wr[t[e+2]]+Wr[t[e+3]]+"-"+Wr[t[e+4]]+Wr[t[e+5]]+"-"+Wr[t[e+6]]+Wr[t[e+7]]+"-"+Wr[t[e+8]]+Wr[t[e+9]]+"-"+Wr[t[e+10]]+Wr[t[e+11]]+Wr[t[e+12]]+Wr[t[e+13]]+Wr[t[e+14]]+Wr[t[e+15]]}const Vj=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),wE={randomUUID:Vj};function Kj(t,e,r){if(wE.randomUUID&&!t)return wE.randomUUID();t=t||{};const n=t.random||(t.rng||zj)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,qj(n)}const{logger:Yv,isEmpty:np}=Fn,Wj=(t,e)=>{const[r,n]=ti.useState(),s=ti.useRef(t);return ti.useEffect(()=>{if(!r||np(t)||Ok(t,s.current))return;s.current=t;const{added_rows:a,edited_rows:u,deleted_rows:l}=t;if(!np(a)){const d=a.map(m=>({...m,id:Kj(),createdAt:new Date().toISOString(),last_modified:Date.now()}));if(!d.length)return;e.upsertBulk(d).catch(m=>Yv.log("upsertBulk",m))}if(!np(l)){const d=[];if(l.forEach(m=>{const y=r.at(m);y&&d.push(y.id)}),!d.length)return;e.removeBulk(d).catch(m=>Yv.log("removeBulk",m))}if(!np(u)){const d=Object.entries(u).map(([m,y])=>({...r.at(+m),...y,last_modified:Date.now()}));if(!d.length)return;e.upsertBulk(d).catch(m=>Yv.log("upsertBulk",m))}},[t,r,e]),[r,n]},Hj=t=>{const[e,r]=ti.useState();return ti.useEffect(()=>{const n=a=>{r(a.detail)};return hn.events.addEventListener(hn.RENDER_EVENT,n),hn.setComponentReady(),()=>{hn.events.removeEventListener(hn.RENDER_EVENT,n),t.unsubscribe()}},[]),e},{logger:bE,isEmptyObject:Qj,tapOnce:Yj}=Fn,Gj=t=>{const[e,r]=ti.useState(),n=ti.useRef(),s=ti.useRef();s.current||(s.current=new ul),n.current||(n.current=new Ii({}));const a=Hj(s.current),{editing_state:u,collection_config:l,db_config:d,query:m,with_rev:y}=a?.args||{},g=ti.useRef(),b=ti.useRef();g.current||(g.current=new q2);const S=()=>b.current,[,E]=Wj(u,S()),D=ti.useCallback($=>{const P=bF($);return g.current.initDb(P)},[]),O=ti.useCallback(async $=>{b.current||(b.current=new Wt($,g.current));const P=n.current.pipe(Ia(Ok)),C=S().docs(P,y).pipe(Yj(()=>r(!0)),JC(S().info())).subscribe(([B,k])=>{B&&(E(B),hn.setComponentValue({docs:B,info:k,query:n.current.value}),hn.setFrameHeight())});s.current.add(C),bE.log("Collection & docs subscription initialized, with",m,y)},[]);return ti.useEffect(()=>{e&&m&&n.current.next(m)},[e,m]),Qj(a)?null:(e||D(d).then(()=>O(l)).catch(bE.log),t.args.element)},Jj=jj(Gj),Xj=vR.createRoot(document.getElementById("root"));Xj.render(fR.jsx(Jj,{}));
//# sourceMappingURL=index.js.map
