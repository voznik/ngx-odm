var Xx=Object.defineProperty;var Zx=(t,e,n)=>e in t?Xx(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var jc=(t,e,n)=>(Zx(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var vw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function rh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var B1={exports:{}},ih={},F1={exports:{}},Me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zl=Symbol.for("react.element"),eC=Symbol.for("react.portal"),tC=Symbol.for("react.fragment"),nC=Symbol.for("react.strict_mode"),rC=Symbol.for("react.profiler"),iC=Symbol.for("react.provider"),sC=Symbol.for("react.context"),oC=Symbol.for("react.forward_ref"),aC=Symbol.for("react.suspense"),uC=Symbol.for("react.memo"),lC=Symbol.for("react.lazy"),gw=Symbol.iterator;function cC(t){return t===null||typeof t!="object"?null:(t=gw&&t[gw]||t["@@iterator"],typeof t=="function"?t:null)}var L1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$1=Object.assign,j1={};function nu(t,e,n){this.props=t,this.context=e,this.refs=j1,this.updater=n||L1}nu.prototype.isReactComponent={};nu.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};nu.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function U1(){}U1.prototype=nu.prototype;function _v(t,e,n){this.props=t,this.context=e,this.refs=j1,this.updater=n||L1}var bv=_v.prototype=new U1;bv.constructor=_v;$1(bv,nu.prototype);bv.isPureReactComponent=!0;var ww=Array.isArray,z1=Object.prototype.hasOwnProperty,Sv={current:null},V1={key:!0,ref:!0,__self:!0,__source:!0};function K1(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)z1.call(e,r)&&!V1.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),f=0;f<a;f++)l[f]=arguments[f+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:zl,type:t,key:s,ref:o,props:i,_owner:Sv.current}}function fC(t,e){return{$$typeof:zl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Iv(t){return typeof t=="object"&&t!==null&&t.$$typeof===zl}function dC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var _w=/\/+/g;function kp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?dC(""+t.key):e.toString(36)}function mf(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case zl:case eC:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+kp(o,0):r,ww(i)?(n="",t!=null&&(n=t.replace(_w,"$&/")+"/"),mf(i,e,n,"",function(f){return f})):i!=null&&(Iv(i)&&(i=fC(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(_w,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",ww(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+kp(s,a);o+=mf(s,e,n,l,i)}else if(l=cC(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+kp(s,a++),o+=mf(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Uc(t,e,n){if(t==null)return t;var r=[],i=0;return mf(t,r,"","",function(s){return e.call(n,s,i++)}),r}function hC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var vn={current:null},yf={transition:null},pC={ReactCurrentDispatcher:vn,ReactCurrentBatchConfig:yf,ReactCurrentOwner:Sv};Me.Children={map:Uc,forEach:function(t,e,n){Uc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Uc(t,function(){e++}),e},toArray:function(t){return Uc(t,function(e){return e})||[]},only:function(t){if(!Iv(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Me.Component=nu;Me.Fragment=tC;Me.Profiler=rC;Me.PureComponent=_v;Me.StrictMode=nC;Me.Suspense=aC;Me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pC;Me.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=$1({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Sv.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)z1.call(e,l)&&!V1.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var f=0;f<l;f++)a[f]=arguments[f+2];r.children=a}return{$$typeof:zl,type:t.type,key:i,ref:s,props:r,_owner:o}};Me.createContext=function(t){return t={$$typeof:sC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:iC,_context:t},t.Consumer=t};Me.createElement=K1;Me.createFactory=function(t){var e=K1.bind(null,t);return e.type=t,e};Me.createRef=function(){return{current:null}};Me.forwardRef=function(t){return{$$typeof:oC,render:t}};Me.isValidElement=Iv;Me.lazy=function(t){return{$$typeof:lC,_payload:{_status:-1,_result:t},_init:hC}};Me.memo=function(t,e){return{$$typeof:uC,type:t,compare:e===void 0?null:e}};Me.startTransition=function(t){var e=yf.transition;yf.transition={};try{t()}finally{yf.transition=e}};Me.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Me.useCallback=function(t,e){return vn.current.useCallback(t,e)};Me.useContext=function(t){return vn.current.useContext(t)};Me.useDebugValue=function(){};Me.useDeferredValue=function(t){return vn.current.useDeferredValue(t)};Me.useEffect=function(t,e){return vn.current.useEffect(t,e)};Me.useId=function(){return vn.current.useId()};Me.useImperativeHandle=function(t,e,n){return vn.current.useImperativeHandle(t,e,n)};Me.useInsertionEffect=function(t,e){return vn.current.useInsertionEffect(t,e)};Me.useLayoutEffect=function(t,e){return vn.current.useLayoutEffect(t,e)};Me.useMemo=function(t,e){return vn.current.useMemo(t,e)};Me.useReducer=function(t,e,n){return vn.current.useReducer(t,e,n)};Me.useRef=function(t){return vn.current.useRef(t)};Me.useState=function(t){return vn.current.useState(t)};Me.useSyncExternalStore=function(t,e,n){return vn.current.useSyncExternalStore(t,e,n)};Me.useTransition=function(){return vn.current.useTransition()};Me.version="18.2.0";F1.exports=Me;var qn=F1.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mC=qn,yC=Symbol.for("react.element"),vC=Symbol.for("react.fragment"),gC=Object.prototype.hasOwnProperty,wC=mC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_C={key:!0,ref:!0,__self:!0,__source:!0};function W1(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)gC.call(e,r)&&!_C.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:yC,type:t,key:s,ref:o,props:i,_owner:wC.current}}ih.Fragment=vC;ih.jsx=W1;ih.jsxs=W1;B1.exports=ih;var bC=B1.exports,q1={exports:{}},rr={},H1={exports:{}},Q1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(G,oe){var ue=G.length;G.push(oe);e:for(;0<ue;){var Re=ue-1>>>1,xt=G[Re];if(0<i(xt,oe))G[Re]=oe,G[ue]=xt,ue=Re;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var oe=G[0],ue=G.pop();if(ue!==oe){G[0]=ue;e:for(var Re=0,xt=G.length,ft=xt>>>1;Re<ft;){var Ct=2*(Re+1)-1,Un=G[Ct],tn=Ct+1,Xi=G[tn];if(0>i(Un,ue))tn<xt&&0>i(Xi,Un)?(G[Re]=Xi,G[tn]=ue,Re=tn):(G[Re]=Un,G[Ct]=ue,Re=Ct);else if(tn<xt&&0>i(Xi,ue))G[Re]=Xi,G[tn]=ue,Re=tn;else break e}}return oe}function i(G,oe){var ue=G.sortIndex-oe.sortIndex;return ue!==0?ue:G.id-oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],f=[],h=1,m=null,y=3,w=!1,I=!1,E=!1,$=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function O(G){for(var oe=n(f);oe!==null;){if(oe.callback===null)r(f);else if(oe.startTime<=G)r(f),oe.sortIndex=oe.expirationTime,e(l,oe);else break;oe=n(f)}}function z(G){if(E=!1,O(G),!I)if(n(l)!==null)I=!0,Te(W);else{var oe=n(f);oe!==null&&Dt(z,oe.startTime-G)}}function W(G,oe){I=!1,E&&(E=!1,S(X),X=-1),w=!0;var ue=y;try{for(O(oe),m=n(l);m!==null&&(!(m.expirationTime>oe)||G&&!ce());){var Re=m.callback;if(typeof Re=="function"){m.callback=null,y=m.priorityLevel;var xt=Re(m.expirationTime<=oe);oe=t.unstable_now(),typeof xt=="function"?m.callback=xt:m===n(l)&&r(l),O(oe)}else r(l);m=n(l)}if(m!==null)var ft=!0;else{var Ct=n(f);Ct!==null&&Dt(z,Ct.startTime-oe),ft=!1}return ft}finally{m=null,y=ue,w=!1}}var Q=!1,H=null,X=-1,U=5,ee=-1;function ce(){return!(t.unstable_now()-ee<U)}function de(){if(H!==null){var G=t.unstable_now();ee=G;var oe=!0;try{oe=H(!0,G)}finally{oe?Pe():(Q=!1,H=null)}}else Q=!1}var Pe;if(typeof _=="function")Pe=function(){_(de)};else if(typeof MessageChannel<"u"){var ot=new MessageChannel,ct=ot.port2;ot.port1.onmessage=de,Pe=function(){ct.postMessage(null)}}else Pe=function(){$(de,0)};function Te(G){H=G,Q||(Q=!0,Pe())}function Dt(G,oe){X=$(function(){G(t.unstable_now())},oe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){I||w||(I=!0,Te(W))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(G){switch(y){case 1:case 2:case 3:var oe=3;break;default:oe=y}var ue=y;y=oe;try{return G()}finally{y=ue}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,oe){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var ue=y;y=G;try{return oe()}finally{y=ue}},t.unstable_scheduleCallback=function(G,oe,ue){var Re=t.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?Re+ue:Re):ue=Re,G){case 1:var xt=-1;break;case 2:xt=250;break;case 5:xt=1073741823;break;case 4:xt=1e4;break;default:xt=5e3}return xt=ue+xt,G={id:h++,callback:oe,priorityLevel:G,startTime:ue,expirationTime:xt,sortIndex:-1},ue>Re?(G.sortIndex=ue,e(f,G),n(l)===null&&G===n(f)&&(E?(S(X),X=-1):E=!0,Dt(z,ue-Re))):(G.sortIndex=xt,e(l,G),I||w||(I=!0,Te(W))),G},t.unstable_shouldYield=ce,t.unstable_wrapCallback=function(G){var oe=y;return function(){var ue=y;y=oe;try{return G.apply(this,arguments)}finally{y=ue}}}})(Q1);H1.exports=Q1;var SC=H1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y1=qn,er=SC;function Z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var G1=new Set,ll={};function zo(t,e){Ta(t,e),Ta(t+"Capture",e)}function Ta(t,e){for(ll[t]=e,t=0;t<e.length;t++)G1.add(e[t])}var Fi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pm=Object.prototype.hasOwnProperty,IC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,bw={},Sw={};function EC(t){return Pm.call(Sw,t)?!0:Pm.call(bw,t)?!1:IC.test(t)?Sw[t]=!0:(bw[t]=!0,!1)}function OC(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function kC(t,e,n,r){if(e===null||typeof e>"u"||OC(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function gn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var en={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){en[t]=new gn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];en[e]=new gn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){en[t]=new gn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){en[t]=new gn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){en[t]=new gn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){en[t]=new gn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){en[t]=new gn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){en[t]=new gn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){en[t]=new gn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ev=/[\-:]([a-z])/g;function Ov(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ev,Ov);en[e]=new gn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ev,Ov);en[e]=new gn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ev,Ov);en[e]=new gn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){en[t]=new gn(t,1,!1,t.toLowerCase(),null,!1,!1)});en.xlinkHref=new gn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){en[t]=new gn(t,1,!1,t.toLowerCase(),null,!0,!0)});function kv(t,e,n,r){var i=en.hasOwnProperty(e)?en[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(kC(e,n,i,r)&&(n=null),r||i===null?EC(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Qi=Y1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,zc=Symbol.for("react.element"),la=Symbol.for("react.portal"),ca=Symbol.for("react.fragment"),Dv=Symbol.for("react.strict_mode"),Rm=Symbol.for("react.profiler"),J1=Symbol.for("react.provider"),X1=Symbol.for("react.context"),xv=Symbol.for("react.forward_ref"),Tm=Symbol.for("react.suspense"),Mm=Symbol.for("react.suspense_list"),Cv=Symbol.for("react.memo"),us=Symbol.for("react.lazy"),Z1=Symbol.for("react.offscreen"),Iw=Symbol.iterator;function Du(t){return t===null||typeof t!="object"?null:(t=Iw&&t[Iw]||t["@@iterator"],typeof t=="function"?t:null)}var Et=Object.assign,Dp;function Lu(t){if(Dp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Dp=e&&e[1]||""}return`
`+Dp+t}var xp=!1;function Cp(t,e){if(!t||xp)return"";xp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var r=f}Reflect.construct(t,[],e)}else{try{e.call()}catch(f){r=f}t.call(e.prototype)}else{try{throw Error()}catch(f){r=f}t()}}catch(f){if(f&&r&&typeof f.stack=="string"){for(var i=f.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{xp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Lu(t):""}function DC(t){switch(t.tag){case 5:return Lu(t.type);case 16:return Lu("Lazy");case 13:return Lu("Suspense");case 19:return Lu("SuspenseList");case 0:case 2:case 15:return t=Cp(t.type,!1),t;case 11:return t=Cp(t.type.render,!1),t;case 1:return t=Cp(t.type,!0),t;default:return""}}function Nm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ca:return"Fragment";case la:return"Portal";case Rm:return"Profiler";case Dv:return"StrictMode";case Tm:return"Suspense";case Mm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case X1:return(t.displayName||"Context")+".Consumer";case J1:return(t._context.displayName||"Context")+".Provider";case xv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Cv:return e=t.displayName||null,e!==null?e:Nm(t.type)||"Memo";case us:e=t._payload,t=t._init;try{return Nm(t(e))}catch{}}return null}function xC(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Nm(e);case 8:return e===Dv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ps(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function eS(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function CC(t){var e=eS(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Vc(t){t._valueTracker||(t._valueTracker=CC(t))}function tS(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=eS(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Uf(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Bm(t,e){var n=e.checked;return Et({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Ew(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ps(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function nS(t,e){e=e.checked,e!=null&&kv(t,"checked",e,!1)}function Fm(t,e){nS(t,e);var n=Ps(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Lm(t,e.type,n):e.hasOwnProperty("defaultValue")&&Lm(t,e.type,Ps(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ow(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Lm(t,e,n){(e!=="number"||Uf(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var $u=Array.isArray;function Sa(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ps(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function $m(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Z(91));return Et({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function kw(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Z(92));if($u(n)){if(1<n.length)throw Error(Z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ps(n)}}function rS(t,e){var n=Ps(e.value),r=Ps(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Dw(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function iS(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function jm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?iS(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Kc,sS=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Kc=Kc||document.createElement("div"),Kc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Kc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function cl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Wu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},AC=["Webkit","ms","Moz","O"];Object.keys(Wu).forEach(function(t){AC.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Wu[e]=Wu[t]})});function oS(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Wu.hasOwnProperty(t)&&Wu[t]?(""+e).trim():e+"px"}function aS(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=oS(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var PC=Et({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Um(t,e){if(e){if(PC[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Z(62))}}function zm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vm=null;function Av(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Km=null,Ia=null,Ea=null;function xw(t){if(t=Wl(t)){if(typeof Km!="function")throw Error(Z(280));var e=t.stateNode;e&&(e=lh(e),Km(t.stateNode,t.type,e))}}function uS(t){Ia?Ea?Ea.push(t):Ea=[t]:Ia=t}function lS(){if(Ia){var t=Ia,e=Ea;if(Ea=Ia=null,xw(t),e)for(t=0;t<e.length;t++)xw(e[t])}}function cS(t,e){return t(e)}function fS(){}var Ap=!1;function dS(t,e,n){if(Ap)return t(e,n);Ap=!0;try{return cS(t,e,n)}finally{Ap=!1,(Ia!==null||Ea!==null)&&(fS(),lS())}}function fl(t,e){var n=t.stateNode;if(n===null)return null;var r=lh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Z(231,e,typeof n));return n}var Wm=!1;if(Fi)try{var xu={};Object.defineProperty(xu,"passive",{get:function(){Wm=!0}}),window.addEventListener("test",xu,xu),window.removeEventListener("test",xu,xu)}catch{Wm=!1}function RC(t,e,n,r,i,s,o,a,l){var f=Array.prototype.slice.call(arguments,3);try{e.apply(n,f)}catch(h){this.onError(h)}}var qu=!1,zf=null,Vf=!1,qm=null,TC={onError:function(t){qu=!0,zf=t}};function MC(t,e,n,r,i,s,o,a,l){qu=!1,zf=null,RC.apply(TC,arguments)}function NC(t,e,n,r,i,s,o,a,l){if(MC.apply(this,arguments),qu){if(qu){var f=zf;qu=!1,zf=null}else throw Error(Z(198));Vf||(Vf=!0,qm=f)}}function Vo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function hS(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Cw(t){if(Vo(t)!==t)throw Error(Z(188))}function BC(t){var e=t.alternate;if(!e){if(e=Vo(t),e===null)throw Error(Z(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Cw(i),t;if(s===r)return Cw(i),e;s=s.sibling}throw Error(Z(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Z(189))}}if(n.alternate!==r)throw Error(Z(190))}if(n.tag!==3)throw Error(Z(188));return n.stateNode.current===n?t:e}function pS(t){return t=BC(t),t!==null?mS(t):null}function mS(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=mS(t);if(e!==null)return e;t=t.sibling}return null}var yS=er.unstable_scheduleCallback,Aw=er.unstable_cancelCallback,FC=er.unstable_shouldYield,LC=er.unstable_requestPaint,Tt=er.unstable_now,$C=er.unstable_getCurrentPriorityLevel,Pv=er.unstable_ImmediatePriority,vS=er.unstable_UserBlockingPriority,Kf=er.unstable_NormalPriority,jC=er.unstable_LowPriority,gS=er.unstable_IdlePriority,sh=null,ai=null;function UC(t){if(ai&&typeof ai.onCommitFiberRoot=="function")try{ai.onCommitFiberRoot(sh,t,void 0,(t.current.flags&128)===128)}catch{}}var xr=Math.clz32?Math.clz32:KC,zC=Math.log,VC=Math.LN2;function KC(t){return t>>>=0,t===0?32:31-(zC(t)/VC|0)|0}var Wc=64,qc=4194304;function ju(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Wf(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=ju(a):(s&=o,s!==0&&(r=ju(s)))}else o=n&~i,o!==0?r=ju(o):s!==0&&(r=ju(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-xr(e),i=1<<n,r|=t[n],e&=~i;return r}function WC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qC(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-xr(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=WC(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Hm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function wS(){var t=Wc;return Wc<<=1,!(Wc&4194240)&&(Wc=64),t}function Pp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Vl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-xr(e),t[e]=n}function HC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-xr(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Rv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-xr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ge=0;function _S(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var bS,Tv,SS,IS,ES,Qm=!1,Hc=[],ws=null,_s=null,bs=null,dl=new Map,hl=new Map,hs=[],QC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pw(t,e){switch(t){case"focusin":case"focusout":ws=null;break;case"dragenter":case"dragleave":_s=null;break;case"mouseover":case"mouseout":bs=null;break;case"pointerover":case"pointerout":dl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":hl.delete(e.pointerId)}}function Cu(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Wl(e),e!==null&&Tv(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function YC(t,e,n,r,i){switch(e){case"focusin":return ws=Cu(ws,t,e,n,r,i),!0;case"dragenter":return _s=Cu(_s,t,e,n,r,i),!0;case"mouseover":return bs=Cu(bs,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return dl.set(s,Cu(dl.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,hl.set(s,Cu(hl.get(s)||null,t,e,n,r,i)),!0}return!1}function OS(t){var e=fo(t.target);if(e!==null){var n=Vo(e);if(n!==null){if(e=n.tag,e===13){if(e=hS(n),e!==null){t.blockedOn=e,ES(t.priority,function(){SS(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function vf(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ym(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Vm=r,n.target.dispatchEvent(r),Vm=null}else return e=Wl(n),e!==null&&Tv(e),t.blockedOn=n,!1;e.shift()}return!0}function Rw(t,e,n){vf(t)&&n.delete(e)}function GC(){Qm=!1,ws!==null&&vf(ws)&&(ws=null),_s!==null&&vf(_s)&&(_s=null),bs!==null&&vf(bs)&&(bs=null),dl.forEach(Rw),hl.forEach(Rw)}function Au(t,e){t.blockedOn===e&&(t.blockedOn=null,Qm||(Qm=!0,er.unstable_scheduleCallback(er.unstable_NormalPriority,GC)))}function pl(t){function e(i){return Au(i,t)}if(0<Hc.length){Au(Hc[0],t);for(var n=1;n<Hc.length;n++){var r=Hc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ws!==null&&Au(ws,t),_s!==null&&Au(_s,t),bs!==null&&Au(bs,t),dl.forEach(e),hl.forEach(e),n=0;n<hs.length;n++)r=hs[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<hs.length&&(n=hs[0],n.blockedOn===null);)OS(n),n.blockedOn===null&&hs.shift()}var Oa=Qi.ReactCurrentBatchConfig,qf=!0;function JC(t,e,n,r){var i=Ge,s=Oa.transition;Oa.transition=null;try{Ge=1,Mv(t,e,n,r)}finally{Ge=i,Oa.transition=s}}function XC(t,e,n,r){var i=Ge,s=Oa.transition;Oa.transition=null;try{Ge=4,Mv(t,e,n,r)}finally{Ge=i,Oa.transition=s}}function Mv(t,e,n,r){if(qf){var i=Ym(t,e,n,r);if(i===null)Up(t,e,r,Hf,n),Pw(t,r);else if(YC(i,t,e,n,r))r.stopPropagation();else if(Pw(t,r),e&4&&-1<QC.indexOf(t)){for(;i!==null;){var s=Wl(i);if(s!==null&&bS(s),s=Ym(t,e,n,r),s===null&&Up(t,e,r,Hf,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Up(t,e,r,null,n)}}var Hf=null;function Ym(t,e,n,r){if(Hf=null,t=Av(r),t=fo(t),t!==null)if(e=Vo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=hS(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Hf=t,null}function kS(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($C()){case Pv:return 1;case vS:return 4;case Kf:case jC:return 16;case gS:return 536870912;default:return 16}default:return 16}}var ms=null,Nv=null,gf=null;function DS(){if(gf)return gf;var t,e=Nv,n=e.length,r,i="value"in ms?ms.value:ms.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return gf=i.slice(t,1<r?1-r:void 0)}function wf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Qc(){return!0}function Tw(){return!1}function ir(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Qc:Tw,this.isPropagationStopped=Tw,this}return Et(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Qc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Qc)},persist:function(){},isPersistent:Qc}),e}var ru={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bv=ir(ru),Kl=Et({},ru,{view:0,detail:0}),ZC=ir(Kl),Rp,Tp,Pu,oh=Et({},Kl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Pu&&(Pu&&t.type==="mousemove"?(Rp=t.screenX-Pu.screenX,Tp=t.screenY-Pu.screenY):Tp=Rp=0,Pu=t),Rp)},movementY:function(t){return"movementY"in t?t.movementY:Tp}}),Mw=ir(oh),eA=Et({},oh,{dataTransfer:0}),tA=ir(eA),nA=Et({},Kl,{relatedTarget:0}),Mp=ir(nA),rA=Et({},ru,{animationName:0,elapsedTime:0,pseudoElement:0}),iA=ir(rA),sA=Et({},ru,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),oA=ir(sA),aA=Et({},ru,{data:0}),Nw=ir(aA),uA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fA(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=cA[t])?!!e[t]:!1}function Fv(){return fA}var dA=Et({},Kl,{key:function(t){if(t.key){var e=uA[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=wf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?lA[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fv,charCode:function(t){return t.type==="keypress"?wf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?wf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),hA=ir(dA),pA=Et({},oh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bw=ir(pA),mA=Et({},Kl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fv}),yA=ir(mA),vA=Et({},ru,{propertyName:0,elapsedTime:0,pseudoElement:0}),gA=ir(vA),wA=Et({},oh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),_A=ir(wA),bA=[9,13,27,32],Lv=Fi&&"CompositionEvent"in window,Hu=null;Fi&&"documentMode"in document&&(Hu=document.documentMode);var SA=Fi&&"TextEvent"in window&&!Hu,xS=Fi&&(!Lv||Hu&&8<Hu&&11>=Hu),Fw=String.fromCharCode(32),Lw=!1;function CS(t,e){switch(t){case"keyup":return bA.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function AS(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var fa=!1;function IA(t,e){switch(t){case"compositionend":return AS(e);case"keypress":return e.which!==32?null:(Lw=!0,Fw);case"textInput":return t=e.data,t===Fw&&Lw?null:t;default:return null}}function EA(t,e){if(fa)return t==="compositionend"||!Lv&&CS(t,e)?(t=DS(),gf=Nv=ms=null,fa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return xS&&e.locale!=="ko"?null:e.data;default:return null}}var OA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $w(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!OA[t.type]:e==="textarea"}function PS(t,e,n,r){uS(r),e=Qf(e,"onChange"),0<e.length&&(n=new Bv("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Qu=null,ml=null;function kA(t){zS(t,0)}function ah(t){var e=pa(t);if(tS(e))return t}function DA(t,e){if(t==="change")return e}var RS=!1;if(Fi){var Np;if(Fi){var Bp="oninput"in document;if(!Bp){var jw=document.createElement("div");jw.setAttribute("oninput","return;"),Bp=typeof jw.oninput=="function"}Np=Bp}else Np=!1;RS=Np&&(!document.documentMode||9<document.documentMode)}function Uw(){Qu&&(Qu.detachEvent("onpropertychange",TS),ml=Qu=null)}function TS(t){if(t.propertyName==="value"&&ah(ml)){var e=[];PS(e,ml,t,Av(t)),dS(kA,e)}}function xA(t,e,n){t==="focusin"?(Uw(),Qu=e,ml=n,Qu.attachEvent("onpropertychange",TS)):t==="focusout"&&Uw()}function CA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ah(ml)}function AA(t,e){if(t==="click")return ah(e)}function PA(t,e){if(t==="input"||t==="change")return ah(e)}function RA(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Rr=typeof Object.is=="function"?Object.is:RA;function yl(t,e){if(Rr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Pm.call(e,i)||!Rr(t[i],e[i]))return!1}return!0}function zw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Vw(t,e){var n=zw(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=zw(n)}}function MS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?MS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function NS(){for(var t=window,e=Uf();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Uf(t.document)}return e}function $v(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function TA(t){var e=NS(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&MS(n.ownerDocument.documentElement,n)){if(r!==null&&$v(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Vw(n,s);var o=Vw(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var MA=Fi&&"documentMode"in document&&11>=document.documentMode,da=null,Gm=null,Yu=null,Jm=!1;function Kw(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Jm||da==null||da!==Uf(r)||(r=da,"selectionStart"in r&&$v(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Yu&&yl(Yu,r)||(Yu=r,r=Qf(Gm,"onSelect"),0<r.length&&(e=new Bv("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=da)))}function Yc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ha={animationend:Yc("Animation","AnimationEnd"),animationiteration:Yc("Animation","AnimationIteration"),animationstart:Yc("Animation","AnimationStart"),transitionend:Yc("Transition","TransitionEnd")},Fp={},BS={};Fi&&(BS=document.createElement("div").style,"AnimationEvent"in window||(delete ha.animationend.animation,delete ha.animationiteration.animation,delete ha.animationstart.animation),"TransitionEvent"in window||delete ha.transitionend.transition);function uh(t){if(Fp[t])return Fp[t];if(!ha[t])return t;var e=ha[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in BS)return Fp[t]=e[n];return t}var FS=uh("animationend"),LS=uh("animationiteration"),$S=uh("animationstart"),jS=uh("transitionend"),US=new Map,Ww="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function js(t,e){US.set(t,e),zo(e,[t])}for(var Lp=0;Lp<Ww.length;Lp++){var $p=Ww[Lp],NA=$p.toLowerCase(),BA=$p[0].toUpperCase()+$p.slice(1);js(NA,"on"+BA)}js(FS,"onAnimationEnd");js(LS,"onAnimationIteration");js($S,"onAnimationStart");js("dblclick","onDoubleClick");js("focusin","onFocus");js("focusout","onBlur");js(jS,"onTransitionEnd");Ta("onMouseEnter",["mouseout","mouseover"]);Ta("onMouseLeave",["mouseout","mouseover"]);Ta("onPointerEnter",["pointerout","pointerover"]);Ta("onPointerLeave",["pointerout","pointerover"]);zo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));zo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));zo("onBeforeInput",["compositionend","keypress","textInput","paste"]);zo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));zo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));zo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Uu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),FA=new Set("cancel close invalid load scroll toggle".split(" ").concat(Uu));function qw(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,NC(r,e,void 0,t),t.currentTarget=null}function zS(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,f=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;qw(i,a,f),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,f=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;qw(i,a,f),s=l}}}if(Vf)throw t=qm,Vf=!1,qm=null,t}function ht(t,e){var n=e[ny];n===void 0&&(n=e[ny]=new Set);var r=t+"__bubble";n.has(r)||(VS(e,t,2,!1),n.add(r))}function jp(t,e,n){var r=0;e&&(r|=4),VS(n,t,r,e)}var Gc="_reactListening"+Math.random().toString(36).slice(2);function vl(t){if(!t[Gc]){t[Gc]=!0,G1.forEach(function(n){n!=="selectionchange"&&(FA.has(n)||jp(n,!1,t),jp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Gc]||(e[Gc]=!0,jp("selectionchange",!1,e))}}function VS(t,e,n,r){switch(kS(e)){case 1:var i=JC;break;case 4:i=XC;break;default:i=Mv}n=i.bind(null,e,n,t),i=void 0,!Wm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Up(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=fo(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}dS(function(){var f=s,h=Av(n),m=[];e:{var y=US.get(t);if(y!==void 0){var w=Bv,I=t;switch(t){case"keypress":if(wf(n)===0)break e;case"keydown":case"keyup":w=hA;break;case"focusin":I="focus",w=Mp;break;case"focusout":I="blur",w=Mp;break;case"beforeblur":case"afterblur":w=Mp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=Mw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=tA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=yA;break;case FS:case LS:case $S:w=iA;break;case jS:w=gA;break;case"scroll":w=ZC;break;case"wheel":w=_A;break;case"copy":case"cut":case"paste":w=oA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=Bw}var E=(e&4)!==0,$=!E&&t==="scroll",S=E?y!==null?y+"Capture":null:y;E=[];for(var _=f,O;_!==null;){O=_;var z=O.stateNode;if(O.tag===5&&z!==null&&(O=z,S!==null&&(z=fl(_,S),z!=null&&E.push(gl(_,z,O)))),$)break;_=_.return}0<E.length&&(y=new w(y,I,null,n,h),m.push({event:y,listeners:E}))}}if(!(e&7)){e:{if(y=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",y&&n!==Vm&&(I=n.relatedTarget||n.fromElement)&&(fo(I)||I[Li]))break e;if((w||y)&&(y=h.window===h?h:(y=h.ownerDocument)?y.defaultView||y.parentWindow:window,w?(I=n.relatedTarget||n.toElement,w=f,I=I?fo(I):null,I!==null&&($=Vo(I),I!==$||I.tag!==5&&I.tag!==6)&&(I=null)):(w=null,I=f),w!==I)){if(E=Mw,z="onMouseLeave",S="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(E=Bw,z="onPointerLeave",S="onPointerEnter",_="pointer"),$=w==null?y:pa(w),O=I==null?y:pa(I),y=new E(z,_+"leave",w,n,h),y.target=$,y.relatedTarget=O,z=null,fo(h)===f&&(E=new E(S,_+"enter",I,n,h),E.target=O,E.relatedTarget=$,z=E),$=z,w&&I)t:{for(E=w,S=I,_=0,O=E;O;O=ea(O))_++;for(O=0,z=S;z;z=ea(z))O++;for(;0<_-O;)E=ea(E),_--;for(;0<O-_;)S=ea(S),O--;for(;_--;){if(E===S||S!==null&&E===S.alternate)break t;E=ea(E),S=ea(S)}E=null}else E=null;w!==null&&Hw(m,y,w,E,!1),I!==null&&$!==null&&Hw(m,$,I,E,!0)}}e:{if(y=f?pa(f):window,w=y.nodeName&&y.nodeName.toLowerCase(),w==="select"||w==="input"&&y.type==="file")var W=DA;else if($w(y))if(RS)W=PA;else{W=CA;var Q=xA}else(w=y.nodeName)&&w.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(W=AA);if(W&&(W=W(t,f))){PS(m,W,n,h);break e}Q&&Q(t,y,f),t==="focusout"&&(Q=y._wrapperState)&&Q.controlled&&y.type==="number"&&Lm(y,"number",y.value)}switch(Q=f?pa(f):window,t){case"focusin":($w(Q)||Q.contentEditable==="true")&&(da=Q,Gm=f,Yu=null);break;case"focusout":Yu=Gm=da=null;break;case"mousedown":Jm=!0;break;case"contextmenu":case"mouseup":case"dragend":Jm=!1,Kw(m,n,h);break;case"selectionchange":if(MA)break;case"keydown":case"keyup":Kw(m,n,h)}var H;if(Lv)e:{switch(t){case"compositionstart":var X="onCompositionStart";break e;case"compositionend":X="onCompositionEnd";break e;case"compositionupdate":X="onCompositionUpdate";break e}X=void 0}else fa?CS(t,n)&&(X="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(X="onCompositionStart");X&&(xS&&n.locale!=="ko"&&(fa||X!=="onCompositionStart"?X==="onCompositionEnd"&&fa&&(H=DS()):(ms=h,Nv="value"in ms?ms.value:ms.textContent,fa=!0)),Q=Qf(f,X),0<Q.length&&(X=new Nw(X,t,null,n,h),m.push({event:X,listeners:Q}),H?X.data=H:(H=AS(n),H!==null&&(X.data=H)))),(H=SA?IA(t,n):EA(t,n))&&(f=Qf(f,"onBeforeInput"),0<f.length&&(h=new Nw("onBeforeInput","beforeinput",null,n,h),m.push({event:h,listeners:f}),h.data=H))}zS(m,e)})}function gl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Qf(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=fl(t,n),s!=null&&r.unshift(gl(t,s,i)),s=fl(t,e),s!=null&&r.push(gl(t,s,i))),t=t.return}return r}function ea(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Hw(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,f=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&f!==null&&(a=f,i?(l=fl(n,s),l!=null&&o.unshift(gl(n,l,a))):i||(l=fl(n,s),l!=null&&o.push(gl(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var LA=/\r\n?/g,$A=/\u0000|\uFFFD/g;function Qw(t){return(typeof t=="string"?t:""+t).replace(LA,`
`).replace($A,"")}function Jc(t,e,n){if(e=Qw(e),Qw(t)!==e&&n)throw Error(Z(425))}function Yf(){}var Xm=null,Zm=null;function ey(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ty=typeof setTimeout=="function"?setTimeout:void 0,jA=typeof clearTimeout=="function"?clearTimeout:void 0,Yw=typeof Promise=="function"?Promise:void 0,UA=typeof queueMicrotask=="function"?queueMicrotask:typeof Yw<"u"?function(t){return Yw.resolve(null).then(t).catch(zA)}:ty;function zA(t){setTimeout(function(){throw t})}function zp(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),pl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);pl(e)}function Ss(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Gw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var iu=Math.random().toString(36).slice(2),Gr="__reactFiber$"+iu,wl="__reactProps$"+iu,Li="__reactContainer$"+iu,ny="__reactEvents$"+iu,VA="__reactListeners$"+iu,KA="__reactHandles$"+iu;function fo(t){var e=t[Gr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Li]||n[Gr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Gw(t);t!==null;){if(n=t[Gr])return n;t=Gw(t)}return e}t=n,n=t.parentNode}return null}function Wl(t){return t=t[Gr]||t[Li],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function pa(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Z(33))}function lh(t){return t[wl]||null}var ry=[],ma=-1;function Us(t){return{current:t}}function mt(t){0>ma||(t.current=ry[ma],ry[ma]=null,ma--)}function ut(t,e){ma++,ry[ma]=t.current,t.current=e}var Rs={},ln=Us(Rs),Dn=Us(!1),Co=Rs;function Ma(t,e){var n=t.type.contextTypes;if(!n)return Rs;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function xn(t){return t=t.childContextTypes,t!=null}function Gf(){mt(Dn),mt(ln)}function Jw(t,e,n){if(ln.current!==Rs)throw Error(Z(168));ut(ln,e),ut(Dn,n)}function KS(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Z(108,xC(t)||"Unknown",i));return Et({},n,r)}function Jf(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Rs,Co=ln.current,ut(ln,t),ut(Dn,Dn.current),!0}function Xw(t,e,n){var r=t.stateNode;if(!r)throw Error(Z(169));n?(t=KS(t,e,Co),r.__reactInternalMemoizedMergedChildContext=t,mt(Dn),mt(ln),ut(ln,t)):mt(Dn),ut(Dn,n)}var Ei=null,ch=!1,Vp=!1;function WS(t){Ei===null?Ei=[t]:Ei.push(t)}function WA(t){ch=!0,WS(t)}function zs(){if(!Vp&&Ei!==null){Vp=!0;var t=0,e=Ge;try{var n=Ei;for(Ge=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ei=null,ch=!1}catch(i){throw Ei!==null&&(Ei=Ei.slice(t+1)),yS(Pv,zs),i}finally{Ge=e,Vp=!1}}return null}var ya=[],va=0,Xf=null,Zf=0,dr=[],hr=0,Ao=null,xi=1,Ci="";function uo(t,e){ya[va++]=Zf,ya[va++]=Xf,Xf=t,Zf=e}function qS(t,e,n){dr[hr++]=xi,dr[hr++]=Ci,dr[hr++]=Ao,Ao=t;var r=xi;t=Ci;var i=32-xr(r)-1;r&=~(1<<i),n+=1;var s=32-xr(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,xi=1<<32-xr(e)+i|n<<i|r,Ci=s+t}else xi=1<<s|n<<i|r,Ci=t}function jv(t){t.return!==null&&(uo(t,1),qS(t,1,0))}function Uv(t){for(;t===Xf;)Xf=ya[--va],ya[va]=null,Zf=ya[--va],ya[va]=null;for(;t===Ao;)Ao=dr[--hr],dr[hr]=null,Ci=dr[--hr],dr[hr]=null,xi=dr[--hr],dr[hr]=null}var Xn=null,Gn=null,gt=!1,kr=null;function HS(t,e){var n=yr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Zw(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Xn=t,Gn=Ss(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Xn=t,Gn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ao!==null?{id:xi,overflow:Ci}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=yr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Xn=t,Gn=null,!0):!1;default:return!1}}function iy(t){return(t.mode&1)!==0&&(t.flags&128)===0}function sy(t){if(gt){var e=Gn;if(e){var n=e;if(!Zw(t,e)){if(iy(t))throw Error(Z(418));e=Ss(n.nextSibling);var r=Xn;e&&Zw(t,e)?HS(r,n):(t.flags=t.flags&-4097|2,gt=!1,Xn=t)}}else{if(iy(t))throw Error(Z(418));t.flags=t.flags&-4097|2,gt=!1,Xn=t}}}function e_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Xn=t}function Xc(t){if(t!==Xn)return!1;if(!gt)return e_(t),gt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ey(t.type,t.memoizedProps)),e&&(e=Gn)){if(iy(t))throw QS(),Error(Z(418));for(;e;)HS(t,e),e=Ss(e.nextSibling)}if(e_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Gn=Ss(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Gn=null}}else Gn=Xn?Ss(t.stateNode.nextSibling):null;return!0}function QS(){for(var t=Gn;t;)t=Ss(t.nextSibling)}function Na(){Gn=Xn=null,gt=!1}function zv(t){kr===null?kr=[t]:kr.push(t)}var qA=Qi.ReactCurrentBatchConfig;function Ir(t,e){if(t&&t.defaultProps){e=Et({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var ed=Us(null),td=null,ga=null,Vv=null;function Kv(){Vv=ga=td=null}function Wv(t){var e=ed.current;mt(ed),t._currentValue=e}function oy(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ka(t,e){td=t,Vv=ga=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(kn=!0),t.firstContext=null)}function gr(t){var e=t._currentValue;if(Vv!==t)if(t={context:t,memoizedValue:e,next:null},ga===null){if(td===null)throw Error(Z(308));ga=t,td.dependencies={lanes:0,firstContext:t}}else ga=ga.next=t;return e}var ho=null;function qv(t){ho===null?ho=[t]:ho.push(t)}function YS(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,qv(e)):(n.next=i.next,i.next=n),e.interleaved=n,$i(t,r)}function $i(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ls=!1;function Hv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function GS(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ri(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Is(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Fe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,$i(t,n)}return i=r.interleaved,i===null?(e.next=e,qv(r)):(e.next=i.next,i.next=e),r.interleaved=e,$i(t,n)}function _f(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Rv(t,n)}}function t_(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function nd(t,e,n,r){var i=t.updateQueue;ls=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,f=l.next;l.next=null,o===null?s=f:o.next=f,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=f:a.next=f,h.lastBaseUpdate=l))}if(s!==null){var m=i.baseState;o=0,h=f=l=null,a=s;do{var y=a.lane,w=a.eventTime;if((r&y)===y){h!==null&&(h=h.next={eventTime:w,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var I=t,E=a;switch(y=e,w=n,E.tag){case 1:if(I=E.payload,typeof I=="function"){m=I.call(w,m,y);break e}m=I;break e;case 3:I.flags=I.flags&-65537|128;case 0:if(I=E.payload,y=typeof I=="function"?I.call(w,m,y):I,y==null)break e;m=Et({},m,y);break e;case 2:ls=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,y=i.effects,y===null?i.effects=[a]:y.push(a))}else w={eventTime:w,lane:y,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(f=h=w,l=m):h=h.next=w,o|=y;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;y=a,a=y.next,y.next=null,i.lastBaseUpdate=y,i.shared.pending=null}}while(1);if(h===null&&(l=m),i.baseState=l,i.firstBaseUpdate=f,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ro|=o,t.lanes=o,t.memoizedState=m}}function n_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Z(191,i));i.call(r)}}}var JS=new Y1.Component().refs;function ay(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Et({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var fh={isMounted:function(t){return(t=t._reactInternals)?Vo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=yn(),i=Os(t),s=Ri(r,i);s.payload=e,n!=null&&(s.callback=n),e=Is(t,s,i),e!==null&&(Cr(e,t,i,r),_f(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=yn(),i=Os(t),s=Ri(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Is(t,s,i),e!==null&&(Cr(e,t,i,r),_f(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=yn(),r=Os(t),i=Ri(n,r);i.tag=2,e!=null&&(i.callback=e),e=Is(t,i,r),e!==null&&(Cr(e,t,r,n),_f(e,t,r))}};function r_(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!yl(n,r)||!yl(i,s):!0}function XS(t,e,n){var r=!1,i=Rs,s=e.contextType;return typeof s=="object"&&s!==null?s=gr(s):(i=xn(e)?Co:ln.current,r=e.contextTypes,s=(r=r!=null)?Ma(t,i):Rs),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=fh,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function i_(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&fh.enqueueReplaceState(e,e.state,null)}function uy(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=JS,Hv(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=gr(s):(s=xn(e)?Co:ln.current,i.context=Ma(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(ay(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&fh.enqueueReplaceState(i,i.state,null),nd(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Ru(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Z(309));var r=n.stateNode}if(!r)throw Error(Z(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===JS&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Z(284));if(!n._owner)throw Error(Z(290,t))}return t}function Zc(t,e){throw t=Object.prototype.toString.call(e),Error(Z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function s_(t){var e=t._init;return e(t._payload)}function ZS(t){function e(S,_){if(t){var O=S.deletions;O===null?(S.deletions=[_],S.flags|=16):O.push(_)}}function n(S,_){if(!t)return null;for(;_!==null;)e(S,_),_=_.sibling;return null}function r(S,_){for(S=new Map;_!==null;)_.key!==null?S.set(_.key,_):S.set(_.index,_),_=_.sibling;return S}function i(S,_){return S=ks(S,_),S.index=0,S.sibling=null,S}function s(S,_,O){return S.index=O,t?(O=S.alternate,O!==null?(O=O.index,O<_?(S.flags|=2,_):O):(S.flags|=2,_)):(S.flags|=1048576,_)}function o(S){return t&&S.alternate===null&&(S.flags|=2),S}function a(S,_,O,z){return _===null||_.tag!==6?(_=Gp(O,S.mode,z),_.return=S,_):(_=i(_,O),_.return=S,_)}function l(S,_,O,z){var W=O.type;return W===ca?h(S,_,O.props.children,z,O.key):_!==null&&(_.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===us&&s_(W)===_.type)?(z=i(_,O.props),z.ref=Ru(S,_,O),z.return=S,z):(z=kf(O.type,O.key,O.props,null,S.mode,z),z.ref=Ru(S,_,O),z.return=S,z)}function f(S,_,O,z){return _===null||_.tag!==4||_.stateNode.containerInfo!==O.containerInfo||_.stateNode.implementation!==O.implementation?(_=Jp(O,S.mode,z),_.return=S,_):(_=i(_,O.children||[]),_.return=S,_)}function h(S,_,O,z,W){return _===null||_.tag!==7?(_=Io(O,S.mode,z,W),_.return=S,_):(_=i(_,O),_.return=S,_)}function m(S,_,O){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Gp(""+_,S.mode,O),_.return=S,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case zc:return O=kf(_.type,_.key,_.props,null,S.mode,O),O.ref=Ru(S,null,_),O.return=S,O;case la:return _=Jp(_,S.mode,O),_.return=S,_;case us:var z=_._init;return m(S,z(_._payload),O)}if($u(_)||Du(_))return _=Io(_,S.mode,O,null),_.return=S,_;Zc(S,_)}return null}function y(S,_,O,z){var W=_!==null?_.key:null;if(typeof O=="string"&&O!==""||typeof O=="number")return W!==null?null:a(S,_,""+O,z);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case zc:return O.key===W?l(S,_,O,z):null;case la:return O.key===W?f(S,_,O,z):null;case us:return W=O._init,y(S,_,W(O._payload),z)}if($u(O)||Du(O))return W!==null?null:h(S,_,O,z,null);Zc(S,O)}return null}function w(S,_,O,z,W){if(typeof z=="string"&&z!==""||typeof z=="number")return S=S.get(O)||null,a(_,S,""+z,W);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case zc:return S=S.get(z.key===null?O:z.key)||null,l(_,S,z,W);case la:return S=S.get(z.key===null?O:z.key)||null,f(_,S,z,W);case us:var Q=z._init;return w(S,_,O,Q(z._payload),W)}if($u(z)||Du(z))return S=S.get(O)||null,h(_,S,z,W,null);Zc(_,z)}return null}function I(S,_,O,z){for(var W=null,Q=null,H=_,X=_=0,U=null;H!==null&&X<O.length;X++){H.index>X?(U=H,H=null):U=H.sibling;var ee=y(S,H,O[X],z);if(ee===null){H===null&&(H=U);break}t&&H&&ee.alternate===null&&e(S,H),_=s(ee,_,X),Q===null?W=ee:Q.sibling=ee,Q=ee,H=U}if(X===O.length)return n(S,H),gt&&uo(S,X),W;if(H===null){for(;X<O.length;X++)H=m(S,O[X],z),H!==null&&(_=s(H,_,X),Q===null?W=H:Q.sibling=H,Q=H);return gt&&uo(S,X),W}for(H=r(S,H);X<O.length;X++)U=w(H,S,X,O[X],z),U!==null&&(t&&U.alternate!==null&&H.delete(U.key===null?X:U.key),_=s(U,_,X),Q===null?W=U:Q.sibling=U,Q=U);return t&&H.forEach(function(ce){return e(S,ce)}),gt&&uo(S,X),W}function E(S,_,O,z){var W=Du(O);if(typeof W!="function")throw Error(Z(150));if(O=W.call(O),O==null)throw Error(Z(151));for(var Q=W=null,H=_,X=_=0,U=null,ee=O.next();H!==null&&!ee.done;X++,ee=O.next()){H.index>X?(U=H,H=null):U=H.sibling;var ce=y(S,H,ee.value,z);if(ce===null){H===null&&(H=U);break}t&&H&&ce.alternate===null&&e(S,H),_=s(ce,_,X),Q===null?W=ce:Q.sibling=ce,Q=ce,H=U}if(ee.done)return n(S,H),gt&&uo(S,X),W;if(H===null){for(;!ee.done;X++,ee=O.next())ee=m(S,ee.value,z),ee!==null&&(_=s(ee,_,X),Q===null?W=ee:Q.sibling=ee,Q=ee);return gt&&uo(S,X),W}for(H=r(S,H);!ee.done;X++,ee=O.next())ee=w(H,S,X,ee.value,z),ee!==null&&(t&&ee.alternate!==null&&H.delete(ee.key===null?X:ee.key),_=s(ee,_,X),Q===null?W=ee:Q.sibling=ee,Q=ee);return t&&H.forEach(function(de){return e(S,de)}),gt&&uo(S,X),W}function $(S,_,O,z){if(typeof O=="object"&&O!==null&&O.type===ca&&O.key===null&&(O=O.props.children),typeof O=="object"&&O!==null){switch(O.$$typeof){case zc:e:{for(var W=O.key,Q=_;Q!==null;){if(Q.key===W){if(W=O.type,W===ca){if(Q.tag===7){n(S,Q.sibling),_=i(Q,O.props.children),_.return=S,S=_;break e}}else if(Q.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===us&&s_(W)===Q.type){n(S,Q.sibling),_=i(Q,O.props),_.ref=Ru(S,Q,O),_.return=S,S=_;break e}n(S,Q);break}else e(S,Q);Q=Q.sibling}O.type===ca?(_=Io(O.props.children,S.mode,z,O.key),_.return=S,S=_):(z=kf(O.type,O.key,O.props,null,S.mode,z),z.ref=Ru(S,_,O),z.return=S,S=z)}return o(S);case la:e:{for(Q=O.key;_!==null;){if(_.key===Q)if(_.tag===4&&_.stateNode.containerInfo===O.containerInfo&&_.stateNode.implementation===O.implementation){n(S,_.sibling),_=i(_,O.children||[]),_.return=S,S=_;break e}else{n(S,_);break}else e(S,_);_=_.sibling}_=Jp(O,S.mode,z),_.return=S,S=_}return o(S);case us:return Q=O._init,$(S,_,Q(O._payload),z)}if($u(O))return I(S,_,O,z);if(Du(O))return E(S,_,O,z);Zc(S,O)}return typeof O=="string"&&O!==""||typeof O=="number"?(O=""+O,_!==null&&_.tag===6?(n(S,_.sibling),_=i(_,O),_.return=S,S=_):(n(S,_),_=Gp(O,S.mode,z),_.return=S,S=_),o(S)):n(S,_)}return $}var Ba=ZS(!0),eI=ZS(!1),ql={},ui=Us(ql),_l=Us(ql),bl=Us(ql);function po(t){if(t===ql)throw Error(Z(174));return t}function Qv(t,e){switch(ut(bl,e),ut(_l,t),ut(ui,ql),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:jm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=jm(e,t)}mt(ui),ut(ui,e)}function Fa(){mt(ui),mt(_l),mt(bl)}function tI(t){po(bl.current);var e=po(ui.current),n=jm(e,t.type);e!==n&&(ut(_l,t),ut(ui,n))}function Yv(t){_l.current===t&&(mt(ui),mt(_l))}var bt=Us(0);function rd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Kp=[];function Gv(){for(var t=0;t<Kp.length;t++)Kp[t]._workInProgressVersionPrimary=null;Kp.length=0}var bf=Qi.ReactCurrentDispatcher,Wp=Qi.ReactCurrentBatchConfig,Po=0,It=null,jt=null,Ht=null,id=!1,Gu=!1,Sl=0,HA=0;function sn(){throw Error(Z(321))}function Jv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Rr(t[n],e[n]))return!1;return!0}function Xv(t,e,n,r,i,s){if(Po=s,It=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,bf.current=t===null||t.memoizedState===null?JA:XA,t=n(r,i),Gu){s=0;do{if(Gu=!1,Sl=0,25<=s)throw Error(Z(301));s+=1,Ht=jt=null,e.updateQueue=null,bf.current=ZA,t=n(r,i)}while(Gu)}if(bf.current=sd,e=jt!==null&&jt.next!==null,Po=0,Ht=jt=It=null,id=!1,e)throw Error(Z(300));return t}function Zv(){var t=Sl!==0;return Sl=0,t}function qr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ht===null?It.memoizedState=Ht=t:Ht=Ht.next=t,Ht}function wr(){if(jt===null){var t=It.alternate;t=t!==null?t.memoizedState:null}else t=jt.next;var e=Ht===null?It.memoizedState:Ht.next;if(e!==null)Ht=e,jt=t;else{if(t===null)throw Error(Z(310));jt=t,t={memoizedState:jt.memoizedState,baseState:jt.baseState,baseQueue:jt.baseQueue,queue:jt.queue,next:null},Ht===null?It.memoizedState=Ht=t:Ht=Ht.next=t}return Ht}function Il(t,e){return typeof e=="function"?e(t):e}function qp(t){var e=wr(),n=e.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=t;var r=jt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,f=s;do{var h=f.lane;if((Po&h)===h)l!==null&&(l=l.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),r=f.hasEagerState?f.eagerState:t(r,f.action);else{var m={lane:h,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};l===null?(a=l=m,o=r):l=l.next=m,It.lanes|=h,Ro|=h}f=f.next}while(f!==null&&f!==s);l===null?o=r:l.next=a,Rr(r,e.memoizedState)||(kn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,It.lanes|=s,Ro|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Hp(t){var e=wr(),n=e.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Rr(s,e.memoizedState)||(kn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function nI(){}function rI(t,e){var n=It,r=wr(),i=e(),s=!Rr(r.memoizedState,i);if(s&&(r.memoizedState=i,kn=!0),r=r.queue,eg(oI.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Ht!==null&&Ht.memoizedState.tag&1){if(n.flags|=2048,El(9,sI.bind(null,n,r,i,e),void 0,null),Qt===null)throw Error(Z(349));Po&30||iI(n,e,i)}return i}function iI(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=It.updateQueue,e===null?(e={lastEffect:null,stores:null},It.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function sI(t,e,n,r){e.value=n,e.getSnapshot=r,aI(e)&&uI(t)}function oI(t,e,n){return n(function(){aI(e)&&uI(t)})}function aI(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Rr(t,n)}catch{return!0}}function uI(t){var e=$i(t,1);e!==null&&Cr(e,t,1,-1)}function o_(t){var e=qr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Il,lastRenderedState:t},e.queue=t,t=t.dispatch=GA.bind(null,It,t),[e.memoizedState,t]}function El(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=It.updateQueue,e===null?(e={lastEffect:null,stores:null},It.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function lI(){return wr().memoizedState}function Sf(t,e,n,r){var i=qr();It.flags|=t,i.memoizedState=El(1|e,n,void 0,r===void 0?null:r)}function dh(t,e,n,r){var i=wr();r=r===void 0?null:r;var s=void 0;if(jt!==null){var o=jt.memoizedState;if(s=o.destroy,r!==null&&Jv(r,o.deps)){i.memoizedState=El(e,n,s,r);return}}It.flags|=t,i.memoizedState=El(1|e,n,s,r)}function a_(t,e){return Sf(8390656,8,t,e)}function eg(t,e){return dh(2048,8,t,e)}function cI(t,e){return dh(4,2,t,e)}function fI(t,e){return dh(4,4,t,e)}function dI(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function hI(t,e,n){return n=n!=null?n.concat([t]):null,dh(4,4,dI.bind(null,e,t),n)}function tg(){}function pI(t,e){var n=wr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Jv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function mI(t,e){var n=wr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Jv(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function yI(t,e,n){return Po&21?(Rr(n,e)||(n=wS(),It.lanes|=n,Ro|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,kn=!0),t.memoizedState=n)}function QA(t,e){var n=Ge;Ge=n!==0&&4>n?n:4,t(!0);var r=Wp.transition;Wp.transition={};try{t(!1),e()}finally{Ge=n,Wp.transition=r}}function vI(){return wr().memoizedState}function YA(t,e,n){var r=Os(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},gI(t))wI(e,n);else if(n=YS(t,e,n,r),n!==null){var i=yn();Cr(n,t,r,i),_I(n,e,r)}}function GA(t,e,n){var r=Os(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(gI(t))wI(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Rr(a,o)){var l=e.interleaved;l===null?(i.next=i,qv(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=YS(t,e,i,r),n!==null&&(i=yn(),Cr(n,t,r,i),_I(n,e,r))}}function gI(t){var e=t.alternate;return t===It||e!==null&&e===It}function wI(t,e){Gu=id=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function _I(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Rv(t,n)}}var sd={readContext:gr,useCallback:sn,useContext:sn,useEffect:sn,useImperativeHandle:sn,useInsertionEffect:sn,useLayoutEffect:sn,useMemo:sn,useReducer:sn,useRef:sn,useState:sn,useDebugValue:sn,useDeferredValue:sn,useTransition:sn,useMutableSource:sn,useSyncExternalStore:sn,useId:sn,unstable_isNewReconciler:!1},JA={readContext:gr,useCallback:function(t,e){return qr().memoizedState=[t,e===void 0?null:e],t},useContext:gr,useEffect:a_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Sf(4194308,4,dI.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Sf(4194308,4,t,e)},useInsertionEffect:function(t,e){return Sf(4,2,t,e)},useMemo:function(t,e){var n=qr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=qr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=YA.bind(null,It,t),[r.memoizedState,t]},useRef:function(t){var e=qr();return t={current:t},e.memoizedState=t},useState:o_,useDebugValue:tg,useDeferredValue:function(t){return qr().memoizedState=t},useTransition:function(){var t=o_(!1),e=t[0];return t=QA.bind(null,t[1]),qr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=It,i=qr();if(gt){if(n===void 0)throw Error(Z(407));n=n()}else{if(n=e(),Qt===null)throw Error(Z(349));Po&30||iI(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,a_(oI.bind(null,r,s,t),[t]),r.flags|=2048,El(9,sI.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=qr(),e=Qt.identifierPrefix;if(gt){var n=Ci,r=xi;n=(r&~(1<<32-xr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Sl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=HA++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},XA={readContext:gr,useCallback:pI,useContext:gr,useEffect:eg,useImperativeHandle:hI,useInsertionEffect:cI,useLayoutEffect:fI,useMemo:mI,useReducer:qp,useRef:lI,useState:function(){return qp(Il)},useDebugValue:tg,useDeferredValue:function(t){var e=wr();return yI(e,jt.memoizedState,t)},useTransition:function(){var t=qp(Il)[0],e=wr().memoizedState;return[t,e]},useMutableSource:nI,useSyncExternalStore:rI,useId:vI,unstable_isNewReconciler:!1},ZA={readContext:gr,useCallback:pI,useContext:gr,useEffect:eg,useImperativeHandle:hI,useInsertionEffect:cI,useLayoutEffect:fI,useMemo:mI,useReducer:Hp,useRef:lI,useState:function(){return Hp(Il)},useDebugValue:tg,useDeferredValue:function(t){var e=wr();return jt===null?e.memoizedState=t:yI(e,jt.memoizedState,t)},useTransition:function(){var t=Hp(Il)[0],e=wr().memoizedState;return[t,e]},useMutableSource:nI,useSyncExternalStore:rI,useId:vI,unstable_isNewReconciler:!1};function La(t,e){try{var n="",r=e;do n+=DC(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Qp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ly(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var eP=typeof WeakMap=="function"?WeakMap:Map;function bI(t,e,n){n=Ri(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ad||(ad=!0,wy=r),ly(t,e)},n}function SI(t,e,n){n=Ri(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){ly(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){ly(t,e),typeof r!="function"&&(Es===null?Es=new Set([this]):Es.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function u_(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new eP;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=pP.bind(null,t,e,n),e.then(t,t))}function l_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function c_(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ri(-1,1),e.tag=2,Is(n,e,1))),n.lanes|=1),t)}var tP=Qi.ReactCurrentOwner,kn=!1;function dn(t,e,n,r){e.child=t===null?eI(e,null,n,r):Ba(e,t.child,n,r)}function f_(t,e,n,r,i){n=n.render;var s=e.ref;return ka(e,i),r=Xv(t,e,n,r,s,i),n=Zv(),t!==null&&!kn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ji(t,e,i)):(gt&&n&&jv(e),e.flags|=1,dn(t,e,r,i),e.child)}function d_(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!lg(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,II(t,e,s,r,i)):(t=kf(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:yl,n(o,r)&&t.ref===e.ref)return ji(t,e,i)}return e.flags|=1,t=ks(s,r),t.ref=e.ref,t.return=e,e.child=t}function II(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(yl(s,r)&&t.ref===e.ref)if(kn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(kn=!0);else return e.lanes=t.lanes,ji(t,e,i)}return cy(t,e,n,r,i)}function EI(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ut(_a,Wn),Wn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ut(_a,Wn),Wn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ut(_a,Wn),Wn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,ut(_a,Wn),Wn|=r;return dn(t,e,i,n),e.child}function OI(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function cy(t,e,n,r,i){var s=xn(n)?Co:ln.current;return s=Ma(e,s),ka(e,i),n=Xv(t,e,n,r,s,i),r=Zv(),t!==null&&!kn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ji(t,e,i)):(gt&&r&&jv(e),e.flags|=1,dn(t,e,n,i),e.child)}function h_(t,e,n,r,i){if(xn(n)){var s=!0;Jf(e)}else s=!1;if(ka(e,i),e.stateNode===null)If(t,e),XS(e,n,r),uy(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,f=n.contextType;typeof f=="object"&&f!==null?f=gr(f):(f=xn(n)?Co:ln.current,f=Ma(e,f));var h=n.getDerivedStateFromProps,m=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==f)&&i_(e,o,r,f),ls=!1;var y=e.memoizedState;o.state=y,nd(e,r,o,i),l=e.memoizedState,a!==r||y!==l||Dn.current||ls?(typeof h=="function"&&(ay(e,n,h,r),l=e.memoizedState),(a=ls||r_(e,n,a,r,y,l,f))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=f,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,GS(t,e),a=e.memoizedProps,f=e.type===e.elementType?a:Ir(e.type,a),o.props=f,m=e.pendingProps,y=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=gr(l):(l=xn(n)?Co:ln.current,l=Ma(e,l));var w=n.getDerivedStateFromProps;(h=typeof w=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==m||y!==l)&&i_(e,o,r,l),ls=!1,y=e.memoizedState,o.state=y,nd(e,r,o,i);var I=e.memoizedState;a!==m||y!==I||Dn.current||ls?(typeof w=="function"&&(ay(e,n,w,r),I=e.memoizedState),(f=ls||r_(e,n,f,r,y,I,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,I,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,I,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=I),o.props=r,o.state=I,o.context=l,r=f):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),r=!1)}return fy(t,e,n,r,s,i)}function fy(t,e,n,r,i,s){OI(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Xw(e,n,!1),ji(t,e,s);r=e.stateNode,tP.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ba(e,t.child,null,s),e.child=Ba(e,null,a,s)):dn(t,e,a,s),e.memoizedState=r.state,i&&Xw(e,n,!0),e.child}function kI(t){var e=t.stateNode;e.pendingContext?Jw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Jw(t,e.context,!1),Qv(t,e.containerInfo)}function p_(t,e,n,r,i){return Na(),zv(i),e.flags|=256,dn(t,e,n,r),e.child}var dy={dehydrated:null,treeContext:null,retryLane:0};function hy(t){return{baseLanes:t,cachePool:null,transitions:null}}function DI(t,e,n){var r=e.pendingProps,i=bt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ut(bt,i&1),t===null)return sy(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=mh(o,r,0,null),t=Io(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=hy(n),e.memoizedState=dy,t):ng(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return nP(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ks(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=ks(a,s):(s=Io(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?hy(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=dy,r}return s=t.child,t=s.sibling,r=ks(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function ng(t,e){return e=mh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ef(t,e,n,r){return r!==null&&zv(r),Ba(e,t.child,null,n),t=ng(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function nP(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Qp(Error(Z(422))),ef(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=mh({mode:"visible",children:r.children},i,0,null),s=Io(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Ba(e,t.child,null,o),e.child.memoizedState=hy(o),e.memoizedState=dy,s);if(!(e.mode&1))return ef(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Z(419)),r=Qp(s,r,void 0),ef(t,e,o,r)}if(a=(o&t.childLanes)!==0,kn||a){if(r=Qt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,$i(t,i),Cr(r,t,i,-1))}return ug(),r=Qp(Error(Z(421))),ef(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=mP.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Gn=Ss(i.nextSibling),Xn=e,gt=!0,kr=null,t!==null&&(dr[hr++]=xi,dr[hr++]=Ci,dr[hr++]=Ao,xi=t.id,Ci=t.overflow,Ao=e),e=ng(e,r.children),e.flags|=4096,e)}function m_(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),oy(t.return,e,n)}function Yp(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function xI(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(dn(t,e,r.children,n),r=bt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&m_(t,n,e);else if(t.tag===19)m_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ut(bt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&rd(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Yp(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&rd(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Yp(e,!0,n,null,s);break;case"together":Yp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function If(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ji(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ro|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Z(153));if(e.child!==null){for(t=e.child,n=ks(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ks(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function rP(t,e,n){switch(e.tag){case 3:kI(e),Na();break;case 5:tI(e);break;case 1:xn(e.type)&&Jf(e);break;case 4:Qv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ut(ed,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ut(bt,bt.current&1),e.flags|=128,null):n&e.child.childLanes?DI(t,e,n):(ut(bt,bt.current&1),t=ji(t,e,n),t!==null?t.sibling:null);ut(bt,bt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return xI(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ut(bt,bt.current),r)break;return null;case 22:case 23:return e.lanes=0,EI(t,e,n)}return ji(t,e,n)}var CI,py,AI,PI;CI=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};py=function(){};AI=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,po(ui.current);var s=null;switch(n){case"input":i=Bm(t,i),r=Bm(t,r),s=[];break;case"select":i=Et({},i,{value:void 0}),r=Et({},r,{value:void 0}),s=[];break;case"textarea":i=$m(t,i),r=$m(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Yf)}Um(n,r);var o;n=null;for(f in i)if(!r.hasOwnProperty(f)&&i.hasOwnProperty(f)&&i[f]!=null)if(f==="style"){var a=i[f];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(ll.hasOwnProperty(f)?s||(s=[]):(s=s||[]).push(f,null));for(f in r){var l=r[f];if(a=i!=null?i[f]:void 0,r.hasOwnProperty(f)&&l!==a&&(l!=null||a!=null))if(f==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(f,n)),n=l;else f==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(f,l)):f==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(f,""+l):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(ll.hasOwnProperty(f)?(l!=null&&f==="onScroll"&&ht("scroll",t),s||a===l||(s=[])):(s=s||[]).push(f,l))}n&&(s=s||[]).push("style",n);var f=s;(e.updateQueue=f)&&(e.flags|=4)}};PI=function(t,e,n,r){n!==r&&(e.flags|=4)};function Tu(t,e){if(!gt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function on(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function iP(t,e,n){var r=e.pendingProps;switch(Uv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return on(e),null;case 1:return xn(e.type)&&Gf(),on(e),null;case 3:return r=e.stateNode,Fa(),mt(Dn),mt(ln),Gv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Xc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,kr!==null&&(Sy(kr),kr=null))),py(t,e),on(e),null;case 5:Yv(e);var i=po(bl.current);if(n=e.type,t!==null&&e.stateNode!=null)AI(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Z(166));return on(e),null}if(t=po(ui.current),Xc(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Gr]=e,r[wl]=s,t=(e.mode&1)!==0,n){case"dialog":ht("cancel",r),ht("close",r);break;case"iframe":case"object":case"embed":ht("load",r);break;case"video":case"audio":for(i=0;i<Uu.length;i++)ht(Uu[i],r);break;case"source":ht("error",r);break;case"img":case"image":case"link":ht("error",r),ht("load",r);break;case"details":ht("toggle",r);break;case"input":Ew(r,s),ht("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ht("invalid",r);break;case"textarea":kw(r,s),ht("invalid",r)}Um(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Jc(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Jc(r.textContent,a,t),i=["children",""+a]):ll.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ht("scroll",r)}switch(n){case"input":Vc(r),Ow(r,s,!0);break;case"textarea":Vc(r),Dw(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Yf)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=iS(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Gr]=e,t[wl]=r,CI(t,e,!1,!1),e.stateNode=t;e:{switch(o=zm(n,r),n){case"dialog":ht("cancel",t),ht("close",t),i=r;break;case"iframe":case"object":case"embed":ht("load",t),i=r;break;case"video":case"audio":for(i=0;i<Uu.length;i++)ht(Uu[i],t);i=r;break;case"source":ht("error",t),i=r;break;case"img":case"image":case"link":ht("error",t),ht("load",t),i=r;break;case"details":ht("toggle",t),i=r;break;case"input":Ew(t,r),i=Bm(t,r),ht("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Et({},r,{value:void 0}),ht("invalid",t);break;case"textarea":kw(t,r),i=$m(t,r),ht("invalid",t);break;default:i=r}Um(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?aS(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&sS(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&cl(t,l):typeof l=="number"&&cl(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ll.hasOwnProperty(s)?l!=null&&s==="onScroll"&&ht("scroll",t):l!=null&&kv(t,s,l,o))}switch(n){case"input":Vc(t),Ow(t,r,!1);break;case"textarea":Vc(t),Dw(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ps(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Sa(t,!!r.multiple,s,!1):r.defaultValue!=null&&Sa(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Yf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return on(e),null;case 6:if(t&&e.stateNode!=null)PI(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Z(166));if(n=po(bl.current),po(ui.current),Xc(e)){if(r=e.stateNode,n=e.memoizedProps,r[Gr]=e,(s=r.nodeValue!==n)&&(t=Xn,t!==null))switch(t.tag){case 3:Jc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Jc(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Gr]=e,e.stateNode=r}return on(e),null;case 13:if(mt(bt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(gt&&Gn!==null&&e.mode&1&&!(e.flags&128))QS(),Na(),e.flags|=98560,s=!1;else if(s=Xc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Z(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Z(317));s[Gr]=e}else Na(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;on(e),s=!1}else kr!==null&&(Sy(kr),kr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||bt.current&1?Vt===0&&(Vt=3):ug())),e.updateQueue!==null&&(e.flags|=4),on(e),null);case 4:return Fa(),py(t,e),t===null&&vl(e.stateNode.containerInfo),on(e),null;case 10:return Wv(e.type._context),on(e),null;case 17:return xn(e.type)&&Gf(),on(e),null;case 19:if(mt(bt),s=e.memoizedState,s===null)return on(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Tu(s,!1);else{if(Vt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=rd(t),o!==null){for(e.flags|=128,Tu(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ut(bt,bt.current&1|2),e.child}t=t.sibling}s.tail!==null&&Tt()>$a&&(e.flags|=128,r=!0,Tu(s,!1),e.lanes=4194304)}else{if(!r)if(t=rd(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Tu(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!gt)return on(e),null}else 2*Tt()-s.renderingStartTime>$a&&n!==1073741824&&(e.flags|=128,r=!0,Tu(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Tt(),e.sibling=null,n=bt.current,ut(bt,r?n&1|2:n&1),e):(on(e),null);case 22:case 23:return ag(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Wn&1073741824&&(on(e),e.subtreeFlags&6&&(e.flags|=8192)):on(e),null;case 24:return null;case 25:return null}throw Error(Z(156,e.tag))}function sP(t,e){switch(Uv(e),e.tag){case 1:return xn(e.type)&&Gf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Fa(),mt(Dn),mt(ln),Gv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Yv(e),null;case 13:if(mt(bt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Z(340));Na()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return mt(bt),null;case 4:return Fa(),null;case 10:return Wv(e.type._context),null;case 22:case 23:return ag(),null;case 24:return null;default:return null}}var tf=!1,an=!1,oP=typeof WeakSet=="function"?WeakSet:Set,ae=null;function wa(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){At(t,e,r)}else n.current=null}function my(t,e,n){try{n()}catch(r){At(t,e,r)}}var y_=!1;function aP(t,e){if(Xm=qf,t=NS(),$v(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,f=0,h=0,m=t,y=null;t:for(;;){for(var w;m!==n||i!==0&&m.nodeType!==3||(a=o+i),m!==s||r!==0&&m.nodeType!==3||(l=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(w=m.firstChild)!==null;)y=m,m=w;for(;;){if(m===t)break t;if(y===n&&++f===i&&(a=o),y===s&&++h===r&&(l=o),(w=m.nextSibling)!==null)break;m=y,y=m.parentNode}m=w}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Zm={focusedElem:t,selectionRange:n},qf=!1,ae=e;ae!==null;)if(e=ae,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ae=t;else for(;ae!==null;){e=ae;try{var I=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(I!==null){var E=I.memoizedProps,$=I.memoizedState,S=e.stateNode,_=S.getSnapshotBeforeUpdate(e.elementType===e.type?E:Ir(e.type,E),$);S.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var O=e.stateNode.containerInfo;O.nodeType===1?O.textContent="":O.nodeType===9&&O.documentElement&&O.removeChild(O.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Z(163))}}catch(z){At(e,e.return,z)}if(t=e.sibling,t!==null){t.return=e.return,ae=t;break}ae=e.return}return I=y_,y_=!1,I}function Ju(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&my(e,n,s)}i=i.next}while(i!==r)}}function hh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function yy(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function RI(t){var e=t.alternate;e!==null&&(t.alternate=null,RI(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Gr],delete e[wl],delete e[ny],delete e[VA],delete e[KA])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function TI(t){return t.tag===5||t.tag===3||t.tag===4}function v_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||TI(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function vy(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Yf));else if(r!==4&&(t=t.child,t!==null))for(vy(t,e,n),t=t.sibling;t!==null;)vy(t,e,n),t=t.sibling}function gy(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(gy(t,e,n),t=t.sibling;t!==null;)gy(t,e,n),t=t.sibling}var Xt=null,Er=!1;function os(t,e,n){for(n=n.child;n!==null;)MI(t,e,n),n=n.sibling}function MI(t,e,n){if(ai&&typeof ai.onCommitFiberUnmount=="function")try{ai.onCommitFiberUnmount(sh,n)}catch{}switch(n.tag){case 5:an||wa(n,e);case 6:var r=Xt,i=Er;Xt=null,os(t,e,n),Xt=r,Er=i,Xt!==null&&(Er?(t=Xt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Xt.removeChild(n.stateNode));break;case 18:Xt!==null&&(Er?(t=Xt,n=n.stateNode,t.nodeType===8?zp(t.parentNode,n):t.nodeType===1&&zp(t,n),pl(t)):zp(Xt,n.stateNode));break;case 4:r=Xt,i=Er,Xt=n.stateNode.containerInfo,Er=!0,os(t,e,n),Xt=r,Er=i;break;case 0:case 11:case 14:case 15:if(!an&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&my(n,e,o),i=i.next}while(i!==r)}os(t,e,n);break;case 1:if(!an&&(wa(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){At(n,e,a)}os(t,e,n);break;case 21:os(t,e,n);break;case 22:n.mode&1?(an=(r=an)||n.memoizedState!==null,os(t,e,n),an=r):os(t,e,n);break;default:os(t,e,n)}}function g_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new oP),e.forEach(function(r){var i=yP.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function br(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Xt=a.stateNode,Er=!1;break e;case 3:Xt=a.stateNode.containerInfo,Er=!0;break e;case 4:Xt=a.stateNode.containerInfo,Er=!0;break e}a=a.return}if(Xt===null)throw Error(Z(160));MI(s,o,i),Xt=null,Er=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(f){At(i,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)NI(e,t),e=e.sibling}function NI(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(br(e,t),Kr(t),r&4){try{Ju(3,t,t.return),hh(3,t)}catch(E){At(t,t.return,E)}try{Ju(5,t,t.return)}catch(E){At(t,t.return,E)}}break;case 1:br(e,t),Kr(t),r&512&&n!==null&&wa(n,n.return);break;case 5:if(br(e,t),Kr(t),r&512&&n!==null&&wa(n,n.return),t.flags&32){var i=t.stateNode;try{cl(i,"")}catch(E){At(t,t.return,E)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&nS(i,s),zm(a,o);var f=zm(a,s);for(o=0;o<l.length;o+=2){var h=l[o],m=l[o+1];h==="style"?aS(i,m):h==="dangerouslySetInnerHTML"?sS(i,m):h==="children"?cl(i,m):kv(i,h,m,f)}switch(a){case"input":Fm(i,s);break;case"textarea":rS(i,s);break;case"select":var y=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var w=s.value;w!=null?Sa(i,!!s.multiple,w,!1):y!==!!s.multiple&&(s.defaultValue!=null?Sa(i,!!s.multiple,s.defaultValue,!0):Sa(i,!!s.multiple,s.multiple?[]:"",!1))}i[wl]=s}catch(E){At(t,t.return,E)}}break;case 6:if(br(e,t),Kr(t),r&4){if(t.stateNode===null)throw Error(Z(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(E){At(t,t.return,E)}}break;case 3:if(br(e,t),Kr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{pl(e.containerInfo)}catch(E){At(t,t.return,E)}break;case 4:br(e,t),Kr(t);break;case 13:br(e,t),Kr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(sg=Tt())),r&4&&g_(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(an=(f=an)||h,br(e,t),an=f):br(e,t),Kr(t),r&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!h&&t.mode&1)for(ae=t,h=t.child;h!==null;){for(m=ae=h;ae!==null;){switch(y=ae,w=y.child,y.tag){case 0:case 11:case 14:case 15:Ju(4,y,y.return);break;case 1:wa(y,y.return);var I=y.stateNode;if(typeof I.componentWillUnmount=="function"){r=y,n=y.return;try{e=r,I.props=e.memoizedProps,I.state=e.memoizedState,I.componentWillUnmount()}catch(E){At(r,n,E)}}break;case 5:wa(y,y.return);break;case 22:if(y.memoizedState!==null){__(m);continue}}w!==null?(w.return=y,ae=w):__(m)}h=h.sibling}e:for(h=null,m=t;;){if(m.tag===5){if(h===null){h=m;try{i=m.stateNode,f?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=m.stateNode,l=m.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=oS("display",o))}catch(E){At(t,t.return,E)}}}else if(m.tag===6){if(h===null)try{m.stateNode.nodeValue=f?"":m.memoizedProps}catch(E){At(t,t.return,E)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;h===m&&(h=null),m=m.return}h===m&&(h=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:br(e,t),Kr(t),r&4&&g_(t);break;case 21:break;default:br(e,t),Kr(t)}}function Kr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(TI(n)){var r=n;break e}n=n.return}throw Error(Z(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(cl(i,""),r.flags&=-33);var s=v_(t);gy(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=v_(t);vy(t,a,o);break;default:throw Error(Z(161))}}catch(l){At(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function uP(t,e,n){ae=t,BI(t)}function BI(t,e,n){for(var r=(t.mode&1)!==0;ae!==null;){var i=ae,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||tf;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||an;a=tf;var f=an;if(tf=o,(an=l)&&!f)for(ae=i;ae!==null;)o=ae,l=o.child,o.tag===22&&o.memoizedState!==null?b_(i):l!==null?(l.return=o,ae=l):b_(i);for(;s!==null;)ae=s,BI(s),s=s.sibling;ae=i,tf=a,an=f}w_(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ae=s):w_(t)}}function w_(t){for(;ae!==null;){var e=ae;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:an||hh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!an)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Ir(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&n_(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}n_(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var h=f.memoizedState;if(h!==null){var m=h.dehydrated;m!==null&&pl(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Z(163))}an||e.flags&512&&yy(e)}catch(y){At(e,e.return,y)}}if(e===t){ae=null;break}if(n=e.sibling,n!==null){n.return=e.return,ae=n;break}ae=e.return}}function __(t){for(;ae!==null;){var e=ae;if(e===t){ae=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ae=n;break}ae=e.return}}function b_(t){for(;ae!==null;){var e=ae;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{hh(4,e)}catch(l){At(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){At(e,i,l)}}var s=e.return;try{yy(e)}catch(l){At(e,s,l)}break;case 5:var o=e.return;try{yy(e)}catch(l){At(e,o,l)}}}catch(l){At(e,e.return,l)}if(e===t){ae=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ae=a;break}ae=e.return}}var lP=Math.ceil,od=Qi.ReactCurrentDispatcher,rg=Qi.ReactCurrentOwner,vr=Qi.ReactCurrentBatchConfig,Fe=0,Qt=null,Bt=null,Zt=0,Wn=0,_a=Us(0),Vt=0,Ol=null,Ro=0,ph=0,ig=0,Xu=null,Sn=null,sg=0,$a=1/0,_i=null,ad=!1,wy=null,Es=null,nf=!1,ys=null,ud=0,Zu=0,_y=null,Ef=-1,Of=0;function yn(){return Fe&6?Tt():Ef!==-1?Ef:Ef=Tt()}function Os(t){return t.mode&1?Fe&2&&Zt!==0?Zt&-Zt:qA.transition!==null?(Of===0&&(Of=wS()),Of):(t=Ge,t!==0||(t=window.event,t=t===void 0?16:kS(t.type)),t):1}function Cr(t,e,n,r){if(50<Zu)throw Zu=0,_y=null,Error(Z(185));Vl(t,n,r),(!(Fe&2)||t!==Qt)&&(t===Qt&&(!(Fe&2)&&(ph|=n),Vt===4&&ps(t,Zt)),Cn(t,r),n===1&&Fe===0&&!(e.mode&1)&&($a=Tt()+500,ch&&zs()))}function Cn(t,e){var n=t.callbackNode;qC(t,e);var r=Wf(t,t===Qt?Zt:0);if(r===0)n!==null&&Aw(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Aw(n),e===1)t.tag===0?WA(S_.bind(null,t)):WS(S_.bind(null,t)),UA(function(){!(Fe&6)&&zs()}),n=null;else{switch(_S(r)){case 1:n=Pv;break;case 4:n=vS;break;case 16:n=Kf;break;case 536870912:n=gS;break;default:n=Kf}n=KI(n,FI.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function FI(t,e){if(Ef=-1,Of=0,Fe&6)throw Error(Z(327));var n=t.callbackNode;if(Da()&&t.callbackNode!==n)return null;var r=Wf(t,t===Qt?Zt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ld(t,r);else{e=r;var i=Fe;Fe|=2;var s=$I();(Qt!==t||Zt!==e)&&(_i=null,$a=Tt()+500,So(t,e));do try{dP();break}catch(a){LI(t,a)}while(1);Kv(),od.current=s,Fe=i,Bt!==null?e=0:(Qt=null,Zt=0,e=Vt)}if(e!==0){if(e===2&&(i=Hm(t),i!==0&&(r=i,e=by(t,i))),e===1)throw n=Ol,So(t,0),ps(t,r),Cn(t,Tt()),n;if(e===6)ps(t,r);else{if(i=t.current.alternate,!(r&30)&&!cP(i)&&(e=ld(t,r),e===2&&(s=Hm(t),s!==0&&(r=s,e=by(t,s))),e===1))throw n=Ol,So(t,0),ps(t,r),Cn(t,Tt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Z(345));case 2:lo(t,Sn,_i);break;case 3:if(ps(t,r),(r&130023424)===r&&(e=sg+500-Tt(),10<e)){if(Wf(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){yn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=ty(lo.bind(null,t,Sn,_i),e);break}lo(t,Sn,_i);break;case 4:if(ps(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-xr(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Tt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*lP(r/1960))-r,10<r){t.timeoutHandle=ty(lo.bind(null,t,Sn,_i),r);break}lo(t,Sn,_i);break;case 5:lo(t,Sn,_i);break;default:throw Error(Z(329))}}}return Cn(t,Tt()),t.callbackNode===n?FI.bind(null,t):null}function by(t,e){var n=Xu;return t.current.memoizedState.isDehydrated&&(So(t,e).flags|=256),t=ld(t,e),t!==2&&(e=Sn,Sn=n,e!==null&&Sy(e)),t}function Sy(t){Sn===null?Sn=t:Sn.push.apply(Sn,t)}function cP(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Rr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ps(t,e){for(e&=~ig,e&=~ph,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-xr(e),r=1<<n;t[n]=-1,e&=~r}}function S_(t){if(Fe&6)throw Error(Z(327));Da();var e=Wf(t,0);if(!(e&1))return Cn(t,Tt()),null;var n=ld(t,e);if(t.tag!==0&&n===2){var r=Hm(t);r!==0&&(e=r,n=by(t,r))}if(n===1)throw n=Ol,So(t,0),ps(t,e),Cn(t,Tt()),n;if(n===6)throw Error(Z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,lo(t,Sn,_i),Cn(t,Tt()),null}function og(t,e){var n=Fe;Fe|=1;try{return t(e)}finally{Fe=n,Fe===0&&($a=Tt()+500,ch&&zs())}}function To(t){ys!==null&&ys.tag===0&&!(Fe&6)&&Da();var e=Fe;Fe|=1;var n=vr.transition,r=Ge;try{if(vr.transition=null,Ge=1,t)return t()}finally{Ge=r,vr.transition=n,Fe=e,!(Fe&6)&&zs()}}function ag(){Wn=_a.current,mt(_a)}function So(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,jA(n)),Bt!==null)for(n=Bt.return;n!==null;){var r=n;switch(Uv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Gf();break;case 3:Fa(),mt(Dn),mt(ln),Gv();break;case 5:Yv(r);break;case 4:Fa();break;case 13:mt(bt);break;case 19:mt(bt);break;case 10:Wv(r.type._context);break;case 22:case 23:ag()}n=n.return}if(Qt=t,Bt=t=ks(t.current,null),Zt=Wn=e,Vt=0,Ol=null,ig=ph=Ro=0,Sn=Xu=null,ho!==null){for(e=0;e<ho.length;e++)if(n=ho[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}ho=null}return t}function LI(t,e){do{var n=Bt;try{if(Kv(),bf.current=sd,id){for(var r=It.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}id=!1}if(Po=0,Ht=jt=It=null,Gu=!1,Sl=0,rg.current=null,n===null||n.return===null){Vt=1,Ol=e,Bt=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Zt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var f=l,h=a,m=h.tag;if(!(h.mode&1)&&(m===0||m===11||m===15)){var y=h.alternate;y?(h.updateQueue=y.updateQueue,h.memoizedState=y.memoizedState,h.lanes=y.lanes):(h.updateQueue=null,h.memoizedState=null)}var w=l_(o);if(w!==null){w.flags&=-257,c_(w,o,a,s,e),w.mode&1&&u_(s,f,e),e=w,l=f;var I=e.updateQueue;if(I===null){var E=new Set;E.add(l),e.updateQueue=E}else I.add(l);break e}else{if(!(e&1)){u_(s,f,e),ug();break e}l=Error(Z(426))}}else if(gt&&a.mode&1){var $=l_(o);if($!==null){!($.flags&65536)&&($.flags|=256),c_($,o,a,s,e),zv(La(l,a));break e}}s=l=La(l,a),Vt!==4&&(Vt=2),Xu===null?Xu=[s]:Xu.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var S=bI(s,l,e);t_(s,S);break e;case 1:a=l;var _=s.type,O=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(Es===null||!Es.has(O)))){s.flags|=65536,e&=-e,s.lanes|=e;var z=SI(s,a,e);t_(s,z);break e}}s=s.return}while(s!==null)}UI(n)}catch(W){e=W,Bt===n&&n!==null&&(Bt=n=n.return);continue}break}while(1)}function $I(){var t=od.current;return od.current=sd,t===null?sd:t}function ug(){(Vt===0||Vt===3||Vt===2)&&(Vt=4),Qt===null||!(Ro&268435455)&&!(ph&268435455)||ps(Qt,Zt)}function ld(t,e){var n=Fe;Fe|=2;var r=$I();(Qt!==t||Zt!==e)&&(_i=null,So(t,e));do try{fP();break}catch(i){LI(t,i)}while(1);if(Kv(),Fe=n,od.current=r,Bt!==null)throw Error(Z(261));return Qt=null,Zt=0,Vt}function fP(){for(;Bt!==null;)jI(Bt)}function dP(){for(;Bt!==null&&!FC();)jI(Bt)}function jI(t){var e=VI(t.alternate,t,Wn);t.memoizedProps=t.pendingProps,e===null?UI(t):Bt=e,rg.current=null}function UI(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=sP(n,e),n!==null){n.flags&=32767,Bt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Vt=6,Bt=null;return}}else if(n=iP(n,e,Wn),n!==null){Bt=n;return}if(e=e.sibling,e!==null){Bt=e;return}Bt=e=t}while(e!==null);Vt===0&&(Vt=5)}function lo(t,e,n){var r=Ge,i=vr.transition;try{vr.transition=null,Ge=1,hP(t,e,n,r)}finally{vr.transition=i,Ge=r}return null}function hP(t,e,n,r){do Da();while(ys!==null);if(Fe&6)throw Error(Z(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Z(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(HC(t,s),t===Qt&&(Bt=Qt=null,Zt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||nf||(nf=!0,KI(Kf,function(){return Da(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=vr.transition,vr.transition=null;var o=Ge;Ge=1;var a=Fe;Fe|=4,rg.current=null,aP(t,n),NI(n,t),TA(Zm),qf=!!Xm,Zm=Xm=null,t.current=n,uP(n),LC(),Fe=a,Ge=o,vr.transition=s}else t.current=n;if(nf&&(nf=!1,ys=t,ud=i),s=t.pendingLanes,s===0&&(Es=null),UC(n.stateNode),Cn(t,Tt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ad)throw ad=!1,t=wy,wy=null,t;return ud&1&&t.tag!==0&&Da(),s=t.pendingLanes,s&1?t===_y?Zu++:(Zu=0,_y=t):Zu=0,zs(),null}function Da(){if(ys!==null){var t=_S(ud),e=vr.transition,n=Ge;try{if(vr.transition=null,Ge=16>t?16:t,ys===null)var r=!1;else{if(t=ys,ys=null,ud=0,Fe&6)throw Error(Z(331));var i=Fe;for(Fe|=4,ae=t.current;ae!==null;){var s=ae,o=s.child;if(ae.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var f=a[l];for(ae=f;ae!==null;){var h=ae;switch(h.tag){case 0:case 11:case 15:Ju(8,h,s)}var m=h.child;if(m!==null)m.return=h,ae=m;else for(;ae!==null;){h=ae;var y=h.sibling,w=h.return;if(RI(h),h===f){ae=null;break}if(y!==null){y.return=w,ae=y;break}ae=w}}}var I=s.alternate;if(I!==null){var E=I.child;if(E!==null){I.child=null;do{var $=E.sibling;E.sibling=null,E=$}while(E!==null)}}ae=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ae=o;else e:for(;ae!==null;){if(s=ae,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ju(9,s,s.return)}var S=s.sibling;if(S!==null){S.return=s.return,ae=S;break e}ae=s.return}}var _=t.current;for(ae=_;ae!==null;){o=ae;var O=o.child;if(o.subtreeFlags&2064&&O!==null)O.return=o,ae=O;else e:for(o=_;ae!==null;){if(a=ae,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:hh(9,a)}}catch(W){At(a,a.return,W)}if(a===o){ae=null;break e}var z=a.sibling;if(z!==null){z.return=a.return,ae=z;break e}ae=a.return}}if(Fe=i,zs(),ai&&typeof ai.onPostCommitFiberRoot=="function")try{ai.onPostCommitFiberRoot(sh,t)}catch{}r=!0}return r}finally{Ge=n,vr.transition=e}}return!1}function I_(t,e,n){e=La(n,e),e=bI(t,e,1),t=Is(t,e,1),e=yn(),t!==null&&(Vl(t,1,e),Cn(t,e))}function At(t,e,n){if(t.tag===3)I_(t,t,n);else for(;e!==null;){if(e.tag===3){I_(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Es===null||!Es.has(r))){t=La(n,t),t=SI(e,t,1),e=Is(e,t,1),t=yn(),e!==null&&(Vl(e,1,t),Cn(e,t));break}}e=e.return}}function pP(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=yn(),t.pingedLanes|=t.suspendedLanes&n,Qt===t&&(Zt&n)===n&&(Vt===4||Vt===3&&(Zt&130023424)===Zt&&500>Tt()-sg?So(t,0):ig|=n),Cn(t,e)}function zI(t,e){e===0&&(t.mode&1?(e=qc,qc<<=1,!(qc&130023424)&&(qc=4194304)):e=1);var n=yn();t=$i(t,e),t!==null&&(Vl(t,e,n),Cn(t,n))}function mP(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),zI(t,n)}function yP(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Z(314))}r!==null&&r.delete(e),zI(t,n)}var VI;VI=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Dn.current)kn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return kn=!1,rP(t,e,n);kn=!!(t.flags&131072)}else kn=!1,gt&&e.flags&1048576&&qS(e,Zf,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;If(t,e),t=e.pendingProps;var i=Ma(e,ln.current);ka(e,n),i=Xv(null,e,r,t,i,n);var s=Zv();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,xn(r)?(s=!0,Jf(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Hv(e),i.updater=fh,e.stateNode=i,i._reactInternals=e,uy(e,r,t,n),e=fy(null,e,r,!0,s,n)):(e.tag=0,gt&&s&&jv(e),dn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(If(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=gP(r),t=Ir(r,t),i){case 0:e=cy(null,e,r,t,n);break e;case 1:e=h_(null,e,r,t,n);break e;case 11:e=f_(null,e,r,t,n);break e;case 14:e=d_(null,e,r,Ir(r.type,t),n);break e}throw Error(Z(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ir(r,i),cy(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ir(r,i),h_(t,e,r,i,n);case 3:e:{if(kI(e),t===null)throw Error(Z(387));r=e.pendingProps,s=e.memoizedState,i=s.element,GS(t,e),nd(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=La(Error(Z(423)),e),e=p_(t,e,r,n,i);break e}else if(r!==i){i=La(Error(Z(424)),e),e=p_(t,e,r,n,i);break e}else for(Gn=Ss(e.stateNode.containerInfo.firstChild),Xn=e,gt=!0,kr=null,n=eI(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Na(),r===i){e=ji(t,e,n);break e}dn(t,e,r,n)}e=e.child}return e;case 5:return tI(e),t===null&&sy(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,ey(r,i)?o=null:s!==null&&ey(r,s)&&(e.flags|=32),OI(t,e),dn(t,e,o,n),e.child;case 6:return t===null&&sy(e),null;case 13:return DI(t,e,n);case 4:return Qv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ba(e,null,r,n):dn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ir(r,i),f_(t,e,r,i,n);case 7:return dn(t,e,e.pendingProps,n),e.child;case 8:return dn(t,e,e.pendingProps.children,n),e.child;case 12:return dn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,ut(ed,r._currentValue),r._currentValue=o,s!==null)if(Rr(s.value,o)){if(s.children===i.children&&!Dn.current){e=ji(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Ri(-1,n&-n),l.tag=2;var f=s.updateQueue;if(f!==null){f=f.shared;var h=f.pending;h===null?l.next=l:(l.next=h.next,h.next=l),f.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),oy(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Z(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),oy(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}dn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ka(e,n),i=gr(i),r=r(i),e.flags|=1,dn(t,e,r,n),e.child;case 14:return r=e.type,i=Ir(r,e.pendingProps),i=Ir(r.type,i),d_(t,e,r,i,n);case 15:return II(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ir(r,i),If(t,e),e.tag=1,xn(r)?(t=!0,Jf(e)):t=!1,ka(e,n),XS(e,r,i),uy(e,r,i,n),fy(null,e,r,!0,t,n);case 19:return xI(t,e,n);case 22:return EI(t,e,n)}throw Error(Z(156,e.tag))};function KI(t,e){return yS(t,e)}function vP(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yr(t,e,n,r){return new vP(t,e,n,r)}function lg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function gP(t){if(typeof t=="function")return lg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===xv)return 11;if(t===Cv)return 14}return 2}function ks(t,e){var n=t.alternate;return n===null?(n=yr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function kf(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")lg(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ca:return Io(n.children,i,s,e);case Dv:o=8,i|=8;break;case Rm:return t=yr(12,n,e,i|2),t.elementType=Rm,t.lanes=s,t;case Tm:return t=yr(13,n,e,i),t.elementType=Tm,t.lanes=s,t;case Mm:return t=yr(19,n,e,i),t.elementType=Mm,t.lanes=s,t;case Z1:return mh(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case J1:o=10;break e;case X1:o=9;break e;case xv:o=11;break e;case Cv:o=14;break e;case us:o=16,r=null;break e}throw Error(Z(130,t==null?t:typeof t,""))}return e=yr(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Io(t,e,n,r){return t=yr(7,t,r,e),t.lanes=n,t}function mh(t,e,n,r){return t=yr(22,t,r,e),t.elementType=Z1,t.lanes=n,t.stateNode={isHidden:!1},t}function Gp(t,e,n){return t=yr(6,t,null,e),t.lanes=n,t}function Jp(t,e,n){return e=yr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function wP(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Pp(0),this.expirationTimes=Pp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pp(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function cg(t,e,n,r,i,s,o,a,l){return t=new wP(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=yr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Hv(s),t}function _P(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:la,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function WI(t){if(!t)return Rs;t=t._reactInternals;e:{if(Vo(t)!==t||t.tag!==1)throw Error(Z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(xn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Z(171))}if(t.tag===1){var n=t.type;if(xn(n))return KS(t,n,e)}return e}function qI(t,e,n,r,i,s,o,a,l){return t=cg(n,r,!0,t,i,s,o,a,l),t.context=WI(null),n=t.current,r=yn(),i=Os(n),s=Ri(r,i),s.callback=e??null,Is(n,s,i),t.current.lanes=i,Vl(t,i,r),Cn(t,r),t}function yh(t,e,n,r){var i=e.current,s=yn(),o=Os(i);return n=WI(n),e.context===null?e.context=n:e.pendingContext=n,e=Ri(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Is(i,e,o),t!==null&&(Cr(t,i,o,s),_f(t,i,o)),o}function cd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function E_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function fg(t,e){E_(t,e),(t=t.alternate)&&E_(t,e)}function bP(){return null}var HI=typeof reportError=="function"?reportError:function(t){console.error(t)};function dg(t){this._internalRoot=t}vh.prototype.render=dg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Z(409));yh(t,e,null,null)};vh.prototype.unmount=dg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;To(function(){yh(null,t,null,null)}),e[Li]=null}};function vh(t){this._internalRoot=t}vh.prototype.unstable_scheduleHydration=function(t){if(t){var e=IS();t={blockedOn:null,target:t,priority:e};for(var n=0;n<hs.length&&e!==0&&e<hs[n].priority;n++);hs.splice(n,0,t),n===0&&OS(t)}};function hg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function gh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function O_(){}function SP(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var f=cd(o);s.call(f)}}var o=qI(e,r,t,0,null,!1,!1,"",O_);return t._reactRootContainer=o,t[Li]=o.current,vl(t.nodeType===8?t.parentNode:t),To(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var f=cd(l);a.call(f)}}var l=cg(t,0,!1,null,null,!1,!1,"",O_);return t._reactRootContainer=l,t[Li]=l.current,vl(t.nodeType===8?t.parentNode:t),To(function(){yh(e,l,n,r)}),l}function wh(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=cd(o);a.call(l)}}yh(e,o,t,i)}else o=SP(n,e,t,i,r);return cd(o)}bS=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ju(e.pendingLanes);n!==0&&(Rv(e,n|1),Cn(e,Tt()),!(Fe&6)&&($a=Tt()+500,zs()))}break;case 13:To(function(){var r=$i(t,1);if(r!==null){var i=yn();Cr(r,t,1,i)}}),fg(t,1)}};Tv=function(t){if(t.tag===13){var e=$i(t,134217728);if(e!==null){var n=yn();Cr(e,t,134217728,n)}fg(t,134217728)}};SS=function(t){if(t.tag===13){var e=Os(t),n=$i(t,e);if(n!==null){var r=yn();Cr(n,t,e,r)}fg(t,e)}};IS=function(){return Ge};ES=function(t,e){var n=Ge;try{return Ge=t,e()}finally{Ge=n}};Km=function(t,e,n){switch(e){case"input":if(Fm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=lh(r);if(!i)throw Error(Z(90));tS(r),Fm(r,i)}}}break;case"textarea":rS(t,n);break;case"select":e=n.value,e!=null&&Sa(t,!!n.multiple,e,!1)}};cS=og;fS=To;var IP={usingClientEntryPoint:!1,Events:[Wl,pa,lh,uS,lS,og]},Mu={findFiberByHostInstance:fo,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},EP={bundleType:Mu.bundleType,version:Mu.version,rendererPackageName:Mu.rendererPackageName,rendererConfig:Mu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=pS(t),t===null?null:t.stateNode},findFiberByHostInstance:Mu.findFiberByHostInstance||bP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rf.isDisabled&&rf.supportsFiber)try{sh=rf.inject(EP),ai=rf}catch{}}rr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=IP;rr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!hg(e))throw Error(Z(200));return _P(t,e,null,n)};rr.createRoot=function(t,e){if(!hg(t))throw Error(Z(299));var n=!1,r="",i=HI;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=cg(t,1,!1,null,null,n,!1,r,i),t[Li]=e.current,vl(t.nodeType===8?t.parentNode:t),new dg(e)};rr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Z(188)):(t=Object.keys(t).join(","),Error(Z(268,t)));return t=pS(e),t=t===null?null:t.stateNode,t};rr.flushSync=function(t){return To(t)};rr.hydrate=function(t,e,n){if(!gh(e))throw Error(Z(200));return wh(null,t,e,!0,n)};rr.hydrateRoot=function(t,e,n){if(!hg(t))throw Error(Z(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=HI;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=qI(e,null,t,1,n??null,i,!1,s,o),t[Li]=e.current,vl(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new vh(e)};rr.render=function(t,e,n){if(!gh(e))throw Error(Z(200));return wh(null,t,e,!1,n)};rr.unmountComponentAtNode=function(t){if(!gh(t))throw Error(Z(40));return t._reactRootContainer?(To(function(){wh(null,null,t,!1,function(){t._reactRootContainer=null,t[Li]=null})}),!0):!1};rr.unstable_batchedUpdates=og;rr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!gh(n))throw Error(Z(200));if(t==null||t._reactInternals===void 0)throw Error(Z(38));return wh(t,e,n,!1,r)};rr.version="18.2.0-next-9e3b772b8-20220608";function QI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(QI)}catch(t){console.error(t)}}QI(),q1.exports=rr;var OP=q1.exports,YI,k_=OP;YI=k_.createRoot,k_.hydrateRoot;var Iy=function(t,e){return Iy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Iy(t,e)};function pi(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Iy(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function tt(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s}function re(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function ve(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(h){try{f(r.next(h))}catch(m){o(m)}}function l(h){try{f(r.throw(h))}catch(m){o(m)}}function f(h){h.done?s(h.value):i(h.value).then(a,l)}f((r=r.apply(t,e||[])).next())})}function GI(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(f){return function(h){return l([f,h])}}function l(f){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,f[0]&&(n=0)),n;)try{if(r=1,i&&(s=f[0]&2?i.return:f[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,f[1])).done)return s;switch(i=0,s&&(f=[f[0]&2,s.value]),f[0]){case 0:case 1:s=f;break;case 4:return n.label++,{value:f[1],done:!1};case 5:n.label++,i=f[1],f=[0];continue;case 7:f=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(f[0]===6||f[0]===2)){n=0;continue}if(f[0]===3&&(!s||f[1]>s[0]&&f[1]<s[3])){n.label=f[1];break}if(f[0]===6&&n.label<s[1]){n.label=s[1],s=f;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(f);break}s[2]&&n.ops.pop(),n.trys.pop();continue}f=e.call(t,n)}catch(h){f=[6,h],i=0}finally{r=s=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function ja(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Tr(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}function ci(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}function ge(t){return this instanceof ge?(this.v=t,this):new ge(t)}function Dr(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(y){r[y]&&(i[y]=function(w){return new Promise(function(I,E){s.push([y,w,I,E])>1||a(y,w)})})}function a(y,w){try{l(r[y](w))}catch(I){m(s[0][3],I)}}function l(y){y.value instanceof ge?Promise.resolve(y.value.v).then(f,h):m(s[0][2],y)}function f(y){a("next",y)}function h(y){a("throw",y)}function m(y,w){y(w),s.shift(),s.length&&a(s[0][0],s[0][1])}}function Df(t){var e,n;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,s){e[i]=t[i]?function(o){return(n=!n)?{value:ge(t[i](o)),done:!1}:s?s(o):o}:s}}function Ds(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof ja=="function"?ja(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,l){o=t[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(f){s({value:f,done:a})},o)}}function kl(t){"@babel/helpers - typeof";return kl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kl(t)}function kP(t,e){if(kl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(kl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function DP(t){var e=kP(t,"string");return kl(e)=="symbol"?e:String(e)}function D_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,DP(r.key),r)}}function Vs(t,e,n){return e&&D_(t.prototype,e),n&&D_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function xP(t){return t[t.length-1]}function Ua(t){return Array.isArray(t)?t.slice(0):[t]}function CP(t,e){t=t.slice(0);for(var n=[];t.length;){var r=t.splice(0,e);n.push(r)}return n}function pg(t){return Array.isArray(t)}function JI(t){return t!=null}function Xp(t,e){var n=0,r=-1;for(var i of t){r=r+1;var s=e(i,r);if(s)n=n+1;else break}return n}function za(t,e){for(var n=e.length,r=0;r<n;++r){var i=e[r];t.push(i)}}function AP(t){return t.filter(function(e,n,r){return r.indexOf(e)===n})}function Va(t){var e=t.split("-");if(e.length!==2)throw new Error("malformatted revision: "+t);return{height:parseInt(e[0],10),hash:e[1]}}function x_(t){var e=parseInt(t.split("-")[0],10);return e}function Ui(t,e){var n=e?e._rev:null,r=n?Va(n).height:0,i=r+1;return i+"-"+t}function XI(t){var e=t.split("."),n=e.length;return n===1?r=>r[t]:r=>{for(var i=r,s=0;s<n;++s){var o=e[s];if(i=i[o],typeof i>"u")return i}return i}}function $e(t){return Object.assign({},t)}function PP(t){return Object.keys(t)[0]}function fd(t,e=!1){if(!t)return t;if(!e&&Array.isArray(t))return t.sort((r,i)=>typeof r=="string"&&typeof i=="string"?r.localeCompare(i):typeof r=="object"?1:-1).map(r=>fd(r,e));if(typeof t=="object"&&!Array.isArray(t)){var n={};return Object.keys(t).sort((r,i)=>r.localeCompare(i)).forEach(r=>{n[r]=fd(t[r],e)}),n}return t}function Ey(t){if(!t||t===null||typeof t!="object")return t;if(Array.isArray(t)){for(var e=new Array(t.length),n=e.length;n--;)e[n]=Ey(t[n]);return e}var r={};for(var i in t)r[i]=Ey(t[i]);return r}var Pn=Ey;function xs(t,e,n){return Object.defineProperty(t,e,{get:function(){return n}}),n}var mg=1;function Ks(){return{lwt:mg}}function Rn(){return""}function RP(t){return Object.assign({},t,{_meta:void 0,_deleted:void 0,_rev:void 0})}function TP(t,e,n){if(e.length!==n.length)return!1;for(var r=0,i=e.length;r<i;){var s=e[r],o=n[r];if(r++,s._rev!==o._rev||s[t]!==o[t])return!1}return!0}class Cs{constructor(e,n){e=this.words=e||[],this.sigBytes=n===void 0?e.length*4:n}toString(e){return(e||MP).stringify(this)}concat(e){if(this.clamp(),this.sigBytes%4)for(let n=0;n<e.sigBytes;n++){const r=e.words[n>>>2]>>>24-n%4*8&255;this.words[this.sigBytes+n>>>2]|=r<<24-(this.sigBytes+n)%4*8}else for(let n=0;n<e.sigBytes;n+=4)this.words[this.sigBytes+n>>>2]=e.words[n>>>2];return this.sigBytes+=e.sigBytes,this}clamp(){this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4)}clone(){return new Cs([...this.words])}}const MP={stringify(t){const e=[];for(let n=0;n<t.sigBytes;n++){const r=t.words[n>>>2]>>>24-n%4*8&255;e.push((r>>>4).toString(16),(r&15).toString(16))}return e.join("")}},NP={parse(t){const e=t.length,n=[];for(let r=0;r<e;r++)n[r>>>2]|=(t.charCodeAt(r)&255)<<24-r%4*8;return new Cs(n,e)}},BP={parse(t){return NP.parse(unescape(encodeURIComponent(t)))}};class FP{constructor(){this._data=new Cs,this._nDataBytes=0,this._minBufferSize=0,this.blockSize=512/32}reset(){this._data=new Cs,this._nDataBytes=0}_append(e){typeof e=="string"&&(e=BP.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes}_doProcessBlock(e,n){}_process(e){let n,r=this._data.sigBytes/(this.blockSize*4);e?r=Math.ceil(r):r=Math.max((r|0)-this._minBufferSize,0);const i=r*this.blockSize,s=Math.min(i*4,this._data.sigBytes);if(i){for(let o=0;o<i;o+=this.blockSize)this._doProcessBlock(this._data.words,o);n=this._data.words.splice(0,i),this._data.sigBytes-=s}return new Cs(n,s)}}class LP extends FP{update(e){return this._append(e),this._process(),this}finalize(e){e&&this._append(e)}}const C_=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],$P=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],so=[];class jP extends LP{constructor(){super(...arguments),this._hash=new Cs([...C_])}reset(){super.reset(),this._hash=new Cs([...C_])}_doProcessBlock(e,n){const r=this._hash.words;let i=r[0],s=r[1],o=r[2],a=r[3],l=r[4],f=r[5],h=r[6],m=r[7];for(let y=0;y<64;y++){if(y<16)so[y]=e[n+y]|0;else{const O=so[y-15],z=(O<<25|O>>>7)^(O<<14|O>>>18)^O>>>3,W=so[y-2],Q=(W<<15|W>>>17)^(W<<13|W>>>19)^W>>>10;so[y]=z+so[y-7]+Q+so[y-16]}const w=l&f^~l&h,I=i&s^i&o^s&o,E=(i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22),$=(l<<26|l>>>6)^(l<<21|l>>>11)^(l<<7|l>>>25),S=m+$+w+$P[y]+so[y],_=E+I;m=h,h=f,f=l,l=a+S|0,a=o,o=s,s=i,i=S+_|0}r[0]=r[0]+i|0,r[1]=r[1]+s|0,r[2]=r[2]+o|0,r[3]=r[3]+a|0,r[4]=r[4]+l|0,r[5]=r[5]+f|0,r[6]=r[6]+h|0,r[7]=r[7]+m|0}finalize(e){super.finalize(e);const n=this._nDataBytes*8,r=this._data.sigBytes*8;return this._data.words[r>>>5]|=128<<24-r%32,this._data.words[(r+64>>>9<<4)+14]=Math.floor(n/4294967296),this._data.words[(r+64>>>9<<4)+15]=n,this._data.sigBytes=this._data.words.length*4,this._process(),this._hash}}function UP(t){return new jP().finalize(t).toString()}function zP(t){return Promise.resolve(UP(t))}async function VP(t){var e=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",e),r=Array.prototype.map.call(new Uint8Array(n),i=>("00"+i.toString(16)).slice(-2)).join("");return r}var KP=typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof crypto.subtle.digest=="function",WP=KP?VP:zP;function qP(){return new Promise(t=>setTimeout(t,0))}function HP(t=0){return new Promise(e=>setTimeout(e,t))}function ZI(t){return t&&typeof t.then=="function"?t:Promise.resolve(t)}var dd=Promise.resolve(!0),Jn=Promise.resolve(!1),yg=Promise.resolve(null),un=Promise.resolve();function vg(t=1e4){return typeof requestIdleCallback=="function"?new Promise(e=>{requestIdleCallback(()=>e(),{timeout:t})}):HP(0)}var Zp=un;function QP(t=void 0){return Zp=Zp.then(()=>vg(t)),Zp}function YP(t,e){return t.reduce((n,r)=>n.then(r),Promise.resolve(e))}var GP=/\./g,A_="abcdefghijklmnopqrstuvwxyz";function su(t=10){for(var e="",n=0;n<t;n++)e+=A_.charAt(Math.floor(Math.random()*A_.length));return e}function eE(t){t+="";var e=t.charAt(0).toUpperCase();return e+t.substr(1)}function zu(t){for(;t.charAt(0)===".";)t=t.substr(1);for(;t.slice(-1)===".";)t=t.slice(0,-1);return t}function Ka(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,r;if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Ka(t[r],e[r]))return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();var i=Object.keys(t);if(n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){var s=i[r];if(!Ka(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}var Oy=t=>{var e=typeof t;return t!==null&&(e==="object"||e==="function")},em=new Set(["__proto__","prototype","constructor"]),JP=new Set("0123456789");function tE(t){var e=[],n="",r="start",i=!1;for(var s of t)switch(s){case"\\":{if(r==="index")throw new Error("Invalid character in an index");if(r==="indexEnd")throw new Error("Invalid character after an index");i&&(n+=s),r="property",i=!i;break}case".":{if(r==="index")throw new Error("Invalid character in an index");if(r==="indexEnd"){r="property";break}if(i){i=!1,n+=s;break}if(em.has(n))return[];e.push(n),n="",r="property";break}case"[":{if(r==="index")throw new Error("Invalid character in an index");if(r==="indexEnd"){r="index";break}if(i){i=!1,n+=s;break}if(r==="property"){if(em.has(n))return[];e.push(n),n=""}r="index";break}case"]":{if(r==="index"){e.push(Number.parseInt(n,10)),n="",r="indexEnd";break}if(r==="indexEnd")throw new Error("Invalid character after an index")}default:{if(r==="index"&&!JP.has(s))throw new Error("Invalid character in an index");if(r==="indexEnd")throw new Error("Invalid character after an index");r==="start"&&(r="property"),i&&(i=!1,n+="\\"),n+=s}}switch(i&&(n+="\\"),r){case"property":{if(em.has(n))return[];e.push(n);break}case"index":throw new Error("Index was not closed");case"start":{e.push("");break}}return e}function nE(t,e){if(typeof e!="number"&&Array.isArray(t)){var n=Number.parseInt(e,10);return Number.isInteger(n)&&t[n]===t[e]}return!1}function XP(t,e){if(nE(t,e))throw new Error("Cannot use string index")}function Ts(t,e,n){if(Array.isArray(e)&&(e=e.join(".")),!e.includes(".")&&!e.includes("["))return t[e];if(!Oy(t)||typeof e!="string")return n===void 0?t:n;var r=tE(e);if(r.length===0)return n;for(var i=0;i<r.length;i++){var s=r[i];if(nE(t,s)?t=i===r.length-1?void 0:null:t=t[s],t==null){if(i!==r.length-1)return n;break}}return t===void 0?n:t}function rE(t,e,n){if(Array.isArray(e)&&(e=e.join(".")),!Oy(t)||typeof e!="string")return t;for(var r=t,i=tE(e),s=0;s<i.length;s++){var o=i[s];XP(t,o),s===i.length-1?t[o]=n:Oy(t[o])||(t[o]=typeof i[s+1]=="number"?[]:{}),t=t[o]}return r}function Mo(t,e){var n=t.get(e);if(typeof n>"u")throw new Error("missing value from map "+e);return n}function Mr(t,e,n,r){var i=t.get(e);return typeof i>"u"?(i=n(),t.set(e,i)):r&&r(i),i}function pt(t){var e=t.split("-"),n="RxDB";return e.forEach(r=>{n+=eE(r)}),n+="Plugin",new Error(`You are using a function which must be overwritten by a plugin.
        You should either prevent the usage of this function or add the plugin via:
            import { `+n+" } from 'rxdb/plugins/"+t+`';
            addRxPlugin(`+n+`);
        `)}function ky(t){var e={name:t.name,message:t.message,rxdb:t.rxdb,parameters:t.parameters,code:t.code,stack:t.stack?t.stack.replace(/\n/g,` 
 `):void 0};return e}var tm=0;function Ft(){var t=Date.now();t=t+.01,t<=tm&&(t=tm+.01);var e=parseFloat(t.toFixed(2));return tm=e,e}function ye(t,e){if(!t)throw e||(e=""),new Error("ensureNotFalsy() is falsy: "+e);return t}var Ai={bufferSize:1,refCount:!0},gg="15.9.1";function Dl(t,e){return Dl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Dl(t,e)}function wg(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Dl(t,e)}function Dy(t){return Dy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Dy(t)}function ZP(t){try{return Function.toString.call(t).indexOf("[native code]")!==-1}catch{return typeof t=="function"}}function iE(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(iE=function(){return!!t})()}function eR(t,e,n){if(iE())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var i=new(t.bind.apply(t,r));return n&&Dl(i,n.prototype),i}function hd(t){var e=typeof Map=="function"?new Map:void 0;return hd=function(r){if(r===null||!ZP(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(r))return e.get(r);e.set(r,i)}function i(){return eR(r,arguments,Dy(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Dl(i,r)},hd(t)}var it={isDevMode(){return!1},deepFreezeWhenDevMode(t){return t},tunnelErrorMessage(t){return"RxDB Error-Code "+t+`.
        Error messages are not included in RxDB core to reduce build size.
        - To find out what this error means, either use the dev-mode-plugin https://rxdb.info/dev-mode.html
        - or search for the error code here: https://github.com/pubkey/rxdb/search?q=`+t+`
        `}};function tR(t){var e="";return Object.keys(t).length===0||(e+=`Given parameters: {
`,e+=Object.keys(t).map(n=>{var r="[object Object]";try{n==="errors"?r=t[n].map(i=>JSON.stringify(i,Object.getOwnPropertyNames(i))):r=JSON.stringify(t[n],function(i,s){return s===void 0?null:s},2)}catch{}return n+":"+r}).join(`
`),e+="}"),e}function sE(t,e,n){return"RxError ("+e+`):
`+t+`
`+tR(n)}var nR=function(t){wg(e,t);function e(r,i,s={}){var o,a=sE(i,r,s);return o=t.call(this,a)||this,o.code=r,o.message=a,o.parameters=s,o.rxdb=!0,o}var n=e.prototype;return n.toString=function(){return this.message},Vs(e,[{key:"name",get:function(){return"RxError ("+this.code+")"}},{key:"typeError",get:function(){return!1}}]),e}(hd(Error)),rR=function(t){wg(e,t);function e(r,i,s={}){var o,a=sE(i,r,s);return o=t.call(this,a)||this,o.code=r,o.message=a,o.parameters=s,o.rxdb=!0,o}var n=e.prototype;return n.toString=function(){return this.message},Vs(e,[{key:"name",get:function(){return"RxTypeError ("+this.code+")"}},{key:"typeError",get:function(){return!0}}]),e}(hd(TypeError));function le(t,e){return new nR(t,it.tunnelErrorMessage(t),e)}function el(t,e){return new rR(t,it.tunnelErrorMessage(t),e)}function _h(t){return t&&t.status===409?t:!1}var iR={409:"document write conflict",422:"schema validation error",510:"attachment data missing"};function sR(t){return le("COL20",{name:iR[t.status],document:t.documentId,writeError:t})}var xl={preAddRxPlugin:[],preCreateRxDatabase:[],createRxDatabase:[],preCreateRxCollection:[],createRxCollection:[],postDestroyRxCollection:[],postRemoveRxCollection:[],preCreateRxSchema:[],createRxSchema:[],preCreateRxQuery:[],prePrepareQuery:[],createRxDocument:[],postCreateRxDocument:[],preCreateRxStorageInstance:[],preMigrateDocument:[],postMigrateDocument:[],preDestroyRxDatabase:[],postRemoveRxDatabase:[],preReplicationMasterWrite:[],preReplicationMasterWriteDocumentsHandle:[]};function Nr(t,e){xl[t]&&xl[t].forEach(n=>n(e))}function No(t,e){return Promise.all(xl[t].map(n=>n(e)))}function zi(t,e){var n=e;n=n.replace(GP,".properties."),n="properties."+n,n=zu(n);var r=Ts(t,n);return r}function oE(t,e,n){if(typeof e.primaryKey=="string")return n;var r=Ws(e,n),i=n[t];if(i&&i!==r)throw le("DOC19",{args:{documentData:n,existingPrimary:i,newPrimary:r},schema:e});return n[t]=r,n}function Fn(t){return typeof t=="string"?t:t.key}function oR(t){var e=Fn(t.primaryKey),n=zi(t,e);return ye(n.maxLength)}function Ws(t,e){if(typeof t.primaryKey=="string")return e[t.primaryKey];var n=t.primaryKey;return n.fields.map(r=>{var i=Ts(e,r);if(typeof i>"u")throw le("DOC18",{args:{field:r,documentData:e}});return i}).join(n.separator)}function aR(t){var e=fd(t,!0);return e}function uR(t){return["_deleted",t]}function bh(t){t=$e(t);var e=Fn(t.primaryKey);t.properties=$e(t.properties),t.additionalProperties=!1,Object.prototype.hasOwnProperty.call(t,"keyCompression")||(t.keyCompression=!1),t.indexes=t.indexes?t.indexes.slice(0):[],t.required=t.required?t.required.slice(0):[],t.encrypted=t.encrypted?t.encrypted.slice(0):[],t.properties._rev={type:"string",minLength:1},t.properties._attachments={type:"object"},t.properties._deleted={type:"boolean"},t.properties._meta=lR,t.required=t.required?t.required.slice(0):[],t.required.push("_deleted"),t.required.push("_rev"),t.required.push("_meta"),t.required.push("_attachments");var n=aE(t);za(t.required,n),t.required=t.required.filter(s=>!s.includes(".")).filter((s,o,a)=>a.indexOf(s)===o),t.version=t.version||0;var r=t.indexes.map(s=>{var o=pg(s)?s.slice(0):[s];return o.includes(e)||o.push(e),o[0]!=="_deleted"&&o.unshift("_deleted"),o});r.length===0&&r.push(uR(e)),r.push(["_meta.lwt",e]),t.internalIndexes&&t.internalIndexes.map(s=>{r.push(s)});var i=new Set;return r.filter(s=>{var o=s.join(",");return i.has(o)?!1:(i.add(o),!0)}),t.indexes=r,t}var lR={type:"object",properties:{lwt:{type:"number",minimum:mg,maximum:1e15,multipleOf:.01}},additionalProperties:!0,required:["lwt"]};function aE(t){var e=Object.keys(t.properties).filter(r=>t.properties[r].final),n=Fn(t.primaryKey);return e.push(n),typeof t.primaryKey!="string"&&t.primaryKey.fields.forEach(r=>e.push(r)),e}function cR(t,e){for(var n=Object.keys(t.defaultValues),r=0;r<n.length;++r){var i=n[r];(!Object.prototype.hasOwnProperty.call(e,i)||typeof e[i]>"u")&&(e[i]=t.defaultValues[i])}return e}var uE=function(){function t(n,r){this.jsonSchema=n,this.hashFunction=r,this.indexes=fR(this.jsonSchema),this.primaryPath=Fn(this.jsonSchema.primaryKey),this.finalFields=aE(this.jsonSchema)}var e=t.prototype;return e.validateChange=function(r,i){this.finalFields.forEach(s=>{if(!Ka(r[s],i[s]))throw le("DOC9",{dataBefore:r,dataAfter:i,fieldName:s,schema:this.jsonSchema})})},e.getDocumentPrototype=function(){var r={},i=zi(this.jsonSchema,"");return Object.keys(i).forEach(s=>{var o=s;r.__defineGetter__(s,function(){if(!(!this.get||typeof this.get!="function")){var a=this.get(o);return a}}),Object.defineProperty(r,s+"$",{get:function(){return this.get$(o)},enumerable:!1,configurable:!1}),Object.defineProperty(r,s+"$$",{get:function(){return this.get$$(o)},enumerable:!1,configurable:!1}),Object.defineProperty(r,s+"_",{get:function(){return this.populate(o)},enumerable:!1,configurable:!1})}),xs(this,"getDocumentPrototype",()=>r),r},e.getPrimaryOfDocumentData=function(r){return Ws(this.jsonSchema,r)},Vs(t,[{key:"version",get:function(){return this.jsonSchema.version}},{key:"defaultValues",get:function(){var n={};return Object.entries(this.jsonSchema.properties).filter(([,r])=>Object.prototype.hasOwnProperty.call(r,"default")).forEach(([r,i])=>n[r]=i.default),xs(this,"defaultValues",n)}},{key:"hash",get:function(){return xs(this,"hash",this.hashFunction(JSON.stringify(this.jsonSchema)))}}]),t}();function fR(t){return(t.indexes||[]).map(e=>pg(e)?e:[e])}function dR(t){var e=t.version?t.version:0,n=0;return new Array(e).fill(0).map(()=>n++)}function hR(t,e,n=!0){n&&Nr("preCreateRxSchema",t);var r=bh(t);r=aR(r),it.deepFreezeWhenDevMode(r);var i=new uE(r,e);return Nr("createRxSchema",i),i}function qe(t){return typeof t=="function"}function pR(t){return qe(t==null?void 0:t.lift)}function Ln(t){return function(e){if(pR(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}var _g=function(t){return t&&typeof t.length=="number"&&typeof t!="function"};function lE(t){return qe(t==null?void 0:t.then)}function bg(t){var e=function(r){Error.call(r),r.stack=new Error().stack},n=t(e);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var nm=bg(function(t){return function(n){t(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(r,i){return i+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function pd(t,e){if(t){var n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Bo=function(){function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var e,n,r,i,s;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var a=ja(o),l=a.next();!l.done;l=a.next()){var f=l.value;f.remove(this)}}catch(E){e={error:E}}finally{try{l&&!l.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}else o.remove(this);var h=this.initialTeardown;if(qe(h))try{h()}catch(E){s=E instanceof nm?E.errors:[E]}var m=this._finalizers;if(m){this._finalizers=null;try{for(var y=ja(m),w=y.next();!w.done;w=y.next()){var I=w.value;try{P_(I)}catch(E){s=s??[],E instanceof nm?s=ci(ci([],Tr(s)),Tr(E.errors)):s.push(E)}}}catch(E){r={error:E}}finally{try{w&&!w.done&&(i=y.return)&&i.call(y)}finally{if(r)throw r.error}}}if(s)throw new nm(s)}},t.prototype.add=function(e){var n;if(e&&e!==this)if(this.closed)P_(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}},t.prototype._hasParent=function(e){var n=this._parentage;return n===e||Array.isArray(n)&&n.includes(e)},t.prototype._addParent=function(e){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e},t.prototype._removeParent=function(e){var n=this._parentage;n===e?this._parentage=null:Array.isArray(n)&&pd(n,e)},t.prototype.remove=function(e){var n=this._finalizers;n&&pd(n,e),e instanceof t&&e._removeParent(this)},t.EMPTY=function(){var e=new t;return e.closed=!0,e}(),t}(),cE=Bo.EMPTY;function fE(t){return t instanceof Bo||t&&"closed"in t&&qe(t.remove)&&qe(t.add)&&qe(t.unsubscribe)}function P_(t){qe(t)?t():t.unsubscribe()}var dE={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},xy={setTimeout:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=xy.delegate;return i!=null&&i.setTimeout?i.setTimeout.apply(i,ci([t,e],Tr(n))):setTimeout.apply(void 0,ci([t,e],Tr(n)))},clearTimeout:function(t){var e=xy.delegate;return((e==null?void 0:e.clearTimeout)||clearTimeout)(t)},delegate:void 0};function hE(t){xy.setTimeout(function(){throw t})}function R_(){}function xf(t){t()}var Sg=function(t){pi(e,t);function e(n){var r=t.call(this)||this;return r.isStopped=!1,n?(r.destination=n,fE(n)&&n.add(r)):r.destination=gR,r}return e.create=function(n,r,i){return new Wa(n,r,i)},e.prototype.next=function(n){this.isStopped||this._next(n)},e.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(n){this.destination.next(n)},e.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(Bo),mR=Function.prototype.bind;function rm(t,e){return mR.call(t,e)}var yR=function(){function t(e){this.partialObserver=e}return t.prototype.next=function(e){var n=this.partialObserver;if(n.next)try{n.next(e)}catch(r){sf(r)}},t.prototype.error=function(e){var n=this.partialObserver;if(n.error)try{n.error(e)}catch(r){sf(r)}else sf(e)},t.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(n){sf(n)}},t}(),Wa=function(t){pi(e,t);function e(n,r,i){var s=t.call(this)||this,o;if(qe(n)||!n)o={next:n??void 0,error:r??void 0,complete:i??void 0};else{var a;s&&dE.useDeprecatedNextContext?(a=Object.create(n),a.unsubscribe=function(){return s.unsubscribe()},o={next:n.next&&rm(n.next,a),error:n.error&&rm(n.error,a),complete:n.complete&&rm(n.complete,a)}):o=n}return s.destination=new yR(o),s}return e}(Sg);function sf(t){hE(t)}function vR(t){throw t}var gR={closed:!0,next:R_,error:vR,complete:R_},Ig=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function Ko(t){return t}function wR(t){return t.length===0?Ko:t.length===1?t[0]:function(n){return t.reduce(function(r,i){return i(r)},n)}}var Ot=function(){function t(e){e&&(this._subscribe=e)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(e,n,r){var i=this,s=bR(e)?e:new Wa(e,n,r);return xf(function(){var o=i,a=o.operator,l=o.source;s.add(a?a.call(s,l):l?i._subscribe(s):i._trySubscribe(s))}),s},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(n){e.error(n)}},t.prototype.forEach=function(e,n){var r=this;return n=T_(n),new n(function(i,s){var o=new Wa({next:function(a){try{e(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:i});r.subscribe(o)})},t.prototype._subscribe=function(e){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(e)},t.prototype[Ig]=function(){return this},t.prototype.pipe=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return wR(e)(this)},t.prototype.toPromise=function(e){var n=this;return e=T_(e),new e(function(r,i){var s;n.subscribe(function(o){return s=o},function(o){return i(o)},function(){return r(s)})})},t.create=function(e){return new t(e)},t}();function T_(t){var e;return(e=t??dE.Promise)!==null&&e!==void 0?e:Promise}function _R(t){return t&&qe(t.next)&&qe(t.error)&&qe(t.complete)}function bR(t){return t&&t instanceof Sg||_R(t)&&fE(t)}function pE(t){return qe(t[Ig])}function mE(t){return Symbol.asyncIterator&&qe(t==null?void 0:t[Symbol.asyncIterator])}function yE(t){return new TypeError("You provided "+(t!==null&&typeof t=="object"?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function SR(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var vE=SR();function gE(t){return qe(t==null?void 0:t[vE])}function wE(t){return Dr(this,arguments,function(){var n,r,i,s;return GI(this,function(o){switch(o.label){case 0:n=t.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,ge(n.read())];case 3:return r=o.sent(),i=r.value,s=r.done,s?[4,ge(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,ge(i)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}function _E(t){return qe(t==null?void 0:t.getReader)}function sr(t){if(t instanceof Ot)return t;if(t!=null){if(pE(t))return IR(t);if(_g(t))return ER(t);if(lE(t))return OR(t);if(mE(t))return bE(t);if(gE(t))return kR(t);if(_E(t))return DR(t)}throw yE(t)}function IR(t){return new Ot(function(e){var n=t[Ig]();if(qe(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function ER(t){return new Ot(function(e){for(var n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function OR(t){return new Ot(function(e){t.then(function(n){e.closed||(e.next(n),e.complete())},function(n){return e.error(n)}).then(null,hE)})}function kR(t){return new Ot(function(e){var n,r;try{for(var i=ja(t),s=i.next();!s.done;s=i.next()){var o=s.value;if(e.next(o),e.closed)return}}catch(a){n={error:a}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}e.complete()})}function bE(t){return new Ot(function(e){xR(t,e).catch(function(n){return e.error(n)})})}function DR(t){return bE(wE(t))}function xR(t,e){var n,r,i,s;return ve(this,void 0,void 0,function(){var o,a;return GI(this,function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),n=Ds(t),l.label=1;case 1:return[4,n.next()];case 2:if(r=l.sent(),!!r.done)return[3,4];if(o=r.value,e.next(o),e.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=l.sent(),i={error:a},[3,11];case 6:return l.trys.push([6,,9,10]),r&&!r.done&&(s=n.return)?[4,s.call(n)]:[3,8];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function Tn(t,e,n,r,i){return new CR(t,e,n,r,i)}var CR=function(t){pi(e,t);function e(n,r,i,s,o,a){var l=t.call(this,n)||this;return l.onFinalize=o,l.shouldUnsubscribe=a,l._next=r?function(f){try{r(f)}catch(h){n.error(h)}}:t.prototype._next,l._error=s?function(f){try{s(f)}catch(h){n.error(h)}finally{this.unsubscribe()}}:t.prototype._error,l._complete=i?function(){try{i()}catch(f){n.error(f)}finally{this.unsubscribe()}}:t.prototype._complete,l}return e.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;t.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},e}(Sg),AR=function(t){pi(e,t);function e(n,r){return t.call(this)||this}return e.prototype.schedule=function(n,r){return this},e}(Bo),md={setInterval:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=md.delegate;return i!=null&&i.setInterval?i.setInterval.apply(i,ci([t,e],Tr(n))):setInterval.apply(void 0,ci([t,e],Tr(n)))},clearInterval:function(t){var e=md.delegate;return((e==null?void 0:e.clearInterval)||clearInterval)(t)},delegate:void 0},PR=function(t){pi(e,t);function e(n,r){var i=t.call(this,n,r)||this;return i.scheduler=n,i.work=r,i.pending=!1,i}return e.prototype.schedule=function(n,r){var i;if(r===void 0&&(r=0),this.closed)return this;this.state=n;var s=this.id,o=this.scheduler;return s!=null&&(this.id=this.recycleAsyncId(o,s,r)),this.pending=!0,this.delay=r,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,r),this},e.prototype.requestAsyncId=function(n,r,i){return i===void 0&&(i=0),md.setInterval(n.flush.bind(n,this),i)},e.prototype.recycleAsyncId=function(n,r,i){if(i===void 0&&(i=0),i!=null&&this.delay===i&&this.pending===!1)return r;r!=null&&md.clearInterval(r)},e.prototype.execute=function(n,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(n,r);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(n,r){var i=!1,s;try{this.work(n)}catch(o){i=!0,s=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),s},e.prototype.unsubscribe=function(){if(!this.closed){var n=this,r=n.id,i=n.scheduler,s=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,pd(s,this),r!=null&&(this.id=this.recycleAsyncId(i,r,null)),this.delay=null,t.prototype.unsubscribe.call(this)}},e}(AR),Eg={now:function(){return(Eg.delegate||Date).now()},delegate:void 0},M_=function(){function t(e,n){n===void 0&&(n=t.now),this.schedulerActionCtor=e,this.now=n}return t.prototype.schedule=function(e,n,r){return n===void 0&&(n=0),new this.schedulerActionCtor(this,e).schedule(r,n)},t.now=Eg.now,t}(),RR=function(t){pi(e,t);function e(n,r){r===void 0&&(r=M_.now);var i=t.call(this,n,r)||this;return i.actions=[],i._active=!1,i}return e.prototype.flush=function(n){var r=this.actions;if(this._active){r.push(n);return}var i;this._active=!0;do if(i=n.execute(n.state,n.delay))break;while(n=r.shift());if(this._active=!1,i){for(;n=r.shift();)n.unsubscribe();throw i}},e}(M_),TR=new RR(PR),MR=TR;function SE(t){return t&&qe(t.schedule)}function NR(t){return t instanceof Date&&!isNaN(t)}function IE(t,e,n){t===void 0&&(t=0),n===void 0&&(n=MR);var r=-1;return e!=null&&(SE(e)?n=e:r=e),new Ot(function(i){var s=NR(t)?+t-n.now():t;s<0&&(s=0);var o=0;return n.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}function Og(t){return t[t.length-1]}function BR(t){return qe(Og(t))?t.pop():void 0}function ou(t){return SE(Og(t))?t.pop():void 0}function EE(t,e){return typeof Og(t)=="number"?t.pop():e}function Ti(t,e,n,r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function OE(t){return Ln(function(e,n){var r=null,i=!1,s;r=e.subscribe(Tn(n,void 0,void 0,function(o){s=sr(t(o,OE(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}var FR=Array.isArray,LR=Object.getPrototypeOf,$R=Object.prototype,jR=Object.keys;function UR(t){if(t.length===1){var e=t[0];if(FR(e))return{args:e,keys:null};if(zR(e)){var n=jR(e);return{args:n.map(function(r){return e[r]}),keys:n}}}return{args:t,keys:null}}function zR(t){return t&&typeof t=="object"&&LR(t)===$R}function kE(t,e){return e===void 0&&(e=0),Ln(function(n,r){n.subscribe(Tn(r,function(i){return Ti(r,t,function(){return r.next(i)},e)},function(){return Ti(r,t,function(){return r.complete()},e)},function(i){return Ti(r,t,function(){return r.error(i)},e)}))})}function DE(t,e){return e===void 0&&(e=0),Ln(function(n,r){r.add(t.schedule(function(){return n.subscribe(r)},e))})}function VR(t,e){return sr(t).pipe(DE(e),kE(e))}function KR(t,e){return sr(t).pipe(DE(e),kE(e))}function WR(t,e){return new Ot(function(n){var r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function qR(t,e){return new Ot(function(n){var r;return Ti(n,e,function(){r=t[vE](),Ti(n,e,function(){var i,s,o;try{i=r.next(),s=i.value,o=i.done}catch(a){n.error(a);return}o?n.complete():n.next(s)},0,!0)}),function(){return qe(r==null?void 0:r.return)&&r.return()}})}function xE(t,e){if(!t)throw new Error("Iterable cannot be null");return new Ot(function(n){Ti(n,e,function(){var r=t[Symbol.asyncIterator]();Ti(n,e,function(){r.next().then(function(i){i.done?n.complete():n.next(i.value)})},0,!0)})})}function HR(t,e){return xE(wE(t),e)}function QR(t,e){if(t!=null){if(pE(t))return VR(t,e);if(_g(t))return WR(t,e);if(lE(t))return KR(t,e);if(mE(t))return xE(t,e);if(gE(t))return qR(t,e);if(_E(t))return HR(t,e)}throw yE(t)}function au(t,e){return e?QR(t,e):sr(t)}function Mt(t,e){return Ln(function(n,r){var i=0;n.subscribe(Tn(r,function(s){r.next(t.call(e,s,i++))}))})}var YR=Array.isArray;function GR(t,e){return YR(e)?t.apply(void 0,ci([],Tr(e))):t(e)}function CE(t){return Mt(function(e){return GR(t,e)})}function JR(t,e){return t.reduce(function(n,r,i){return n[r]=e[i],n},{})}function AE(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=ou(t),r=BR(t),i=UR(t),s=i.args,o=i.keys;if(s.length===0)return au([],n);var a=new Ot(XR(s,n,o?function(l){return JR(o,l)}:Ko));return r?a.pipe(CE(r)):a}function XR(t,e,n){return n===void 0&&(n=Ko),function(r){N_(e,function(){for(var i=t.length,s=new Array(i),o=i,a=i,l=function(h){N_(e,function(){var m=au(t[h],e),y=!1;m.subscribe(Tn(r,function(w){s[h]=w,y||(y=!0,a--),a||r.next(n(s.slice()))},function(){--o||r.complete()}))},r)},f=0;f<i;f++)l(f)},r)}}function N_(t,e,n){t?Ti(n,t,e):e()}function ZR(t,e,n,r,i,s,o,a){var l=[],f=0,h=0,m=!1,y=function(){m&&!l.length&&!f&&e.complete()},w=function(E){return f<r?I(E):l.push(E)},I=function(E){s&&e.next(E),f++;var $=!1;sr(n(E,h++)).subscribe(Tn(e,function(S){i==null||i(S),s?w(S):e.next(S)},function(){$=!0},void 0,function(){if($)try{f--;for(var S=function(){var _=l.shift();o?Ti(e,o,function(){return I(_)}):I(_)};l.length&&f<r;)S();y()}catch(_){e.error(_)}}))};return t.subscribe(Tn(e,w,function(){m=!0,y()})),function(){a==null||a()}}function Br(t,e,n){return n===void 0&&(n=1/0),qe(e)?Br(function(r,i){return Mt(function(s,o){return e(r,s,i,o)})(sr(t(r,i)))},n):(typeof e=="number"&&(n=e),Ln(function(r,i){return ZR(r,i,t,n)}))}var eT=Array.isArray;function tT(t){return t.length===1&&eT(t[0])?t[0]:t}function kg(t){return t===void 0&&(t=1/0),Br(Ko,t)}function nT(){return kg(1)}var rT=bg(function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Kt=function(t){pi(e,t);function e(){var n=t.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return e.prototype.lift=function(n){var r=new B_(this,this);return r.operator=n,r},e.prototype._throwIfClosed=function(){if(this.closed)throw new rT},e.prototype.next=function(n){var r=this;xf(function(){var i,s;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var o=ja(r.currentObservers),a=o.next();!a.done;a=o.next()){var l=a.value;l.next(n)}}catch(f){i={error:f}}finally{try{a&&!a.done&&(s=o.return)&&s.call(o)}finally{if(i)throw i.error}}}})},e.prototype.error=function(n){var r=this;xf(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=n;for(var i=r.observers;i.length;)i.shift().error(n)}})},e.prototype.complete=function(){var n=this;xf(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var r=n.observers;r.length;)r.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(n){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,n)},e.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},e.prototype._innerSubscribe=function(n){var r=this,i=this,s=i.hasError,o=i.isStopped,a=i.observers;return s||o?cE:(this.currentObservers=null,a.push(n),new Bo(function(){r.currentObservers=null,pd(a,n)}))},e.prototype._checkFinalizedStatuses=function(n){var r=this,i=r.hasError,s=r.thrownError,o=r.isStopped;i?n.error(s):o&&n.complete()},e.prototype.asObservable=function(){var n=new Ot;return n.source=this,n},e.create=function(n,r){return new B_(n,r)},e}(Ot),B_=function(t){pi(e,t);function e(n,r){var i=t.call(this)||this;return i.destination=n,i.source=r,i}return e.prototype.next=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.next)===null||i===void 0||i.call(r,n)},e.prototype.error=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.error)===null||i===void 0||i.call(r,n)},e.prototype.complete=function(){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||r===void 0||r.call(n)},e.prototype._subscribe=function(n){var r,i;return(i=(r=this.source)===null||r===void 0?void 0:r.subscribe(n))!==null&&i!==void 0?i:cE},e}(Kt);function F_(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return nT()(au(t,ou(t)))}var PE=new Ot(function(t){return t.complete()});function im(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=ou(t);return au(t,n)}function Fo(t,e){return e===void 0&&(e=Ko),t=t??iT,Ln(function(n,r){var i,s=!0;n.subscribe(Tn(r,function(o){var a=e(o);(s||!t(i,a))&&(s=!1,i=a,r.next(o))}))})}function iT(t,e){return t===e}function lt(t,e){return Ln(function(n,r){var i=0;n.subscribe(Tn(r,function(s){return t.call(e,s,i++)&&r.next(s)}))})}var RE=bg(function(t){return function(){t(this),this.name="EmptyError",this.message="no elements in sequence"}});function sT(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=ou(t),r=EE(t,1/0);return t=tT(t),Ln(function(i,s){kg(r)(au(ci([i],Tr(t)),n)).subscribe(s)})}function oT(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return sT.apply(void 0,ci([],Tr(t)))}var Jr=function(t){pi(e,t);function e(n){var r=t.call(this)||this;return r._value=n,r}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(n){var r=t.prototype._subscribe.call(this,n);return!r.closed&&n.next(this._value),r},e.prototype.getValue=function(){var n=this,r=n.hasError,i=n.thrownError,s=n._value;if(r)throw i;return this._throwIfClosed(),s},e.prototype.next=function(n){t.prototype.next.call(this,this._value=n)},e}(Kt),TE=function(t){pi(e,t);function e(n,r,i){n===void 0&&(n=1/0),r===void 0&&(r=1/0),i===void 0&&(i=Eg);var s=t.call(this)||this;return s._bufferSize=n,s._windowTime=r,s._timestampProvider=i,s._buffer=[],s._infiniteTimeWindow=!0,s._infiniteTimeWindow=r===1/0,s._bufferSize=Math.max(1,n),s._windowTime=Math.max(1,r),s}return e.prototype.next=function(n){var r=this,i=r.isStopped,s=r._buffer,o=r._infiniteTimeWindow,a=r._timestampProvider,l=r._windowTime;i||(s.push(n),!o&&s.push(a.now()+l)),this._trimBuffer(),t.prototype.next.call(this,n)},e.prototype._subscribe=function(n){this._throwIfClosed(),this._trimBuffer();for(var r=this._innerSubscribe(n),i=this,s=i._infiniteTimeWindow,o=i._buffer,a=o.slice(),l=0;l<a.length&&!n.closed;l+=s?1:2)n.next(a[l]);return this._checkFinalizedStatuses(n),r},e.prototype._trimBuffer=function(){var n=this,r=n._bufferSize,i=n._timestampProvider,s=n._buffer,o=n._infiniteTimeWindow,a=(o?1:2)*r;if(r<1/0&&a<s.length&&s.splice(0,s.length-a),!o){for(var l=i.now(),f=0,h=1;h<s.length&&s[h]<=l;h+=2)f=h;f&&s.splice(0,f+1)}},e}(Kt);function aT(t){t===void 0&&(t=1/0);var e;t&&typeof t=="object"?e=t:e={count:t};var n=e.count,r=n===void 0?1/0:n,i=e.delay,s=e.resetOnSuccess,o=s===void 0?!1:s;return r<=0?Ko:Ln(function(a,l){var f=0,h,m=function(){var y=!1;h=a.subscribe(Tn(l,function(w){o&&(f=0),l.next(w)},void 0,function(w){if(f++<r){var I=function(){h?(h.unsubscribe(),h=null,m()):y=!0};if(i!=null){var E=typeof i=="number"?IE(i):sr(i(w,f)),$=Tn(l,function(){$.unsubscribe(),I()},function(){l.complete()});E.subscribe($)}else I()}else l.error(w)})),y&&(h.unsubscribe(),h=null,m())};m()})}function uT(t){t===void 0&&(t={});var e=t.connector,n=e===void 0?function(){return new Kt}:e,r=t.resetOnError,i=r===void 0?!0:r,s=t.resetOnComplete,o=s===void 0?!0:s,a=t.resetOnRefCountZero,l=a===void 0?!0:a;return function(f){var h,m,y,w=0,I=!1,E=!1,$=function(){m==null||m.unsubscribe(),m=void 0},S=function(){$(),h=y=void 0,I=E=!1},_=function(){var O=h;S(),O==null||O.unsubscribe()};return Ln(function(O,z){w++,!E&&!I&&$();var W=y=y??n();z.add(function(){w--,w===0&&!E&&!I&&(m=sm(_,l))}),W.subscribe(z),!h&&w>0&&(h=new Wa({next:function(Q){return W.next(Q)},error:function(Q){E=!0,$(),m=sm(S,i,Q),W.error(Q)},complete:function(){I=!0,$(),m=sm(S,o),W.complete()}}),sr(O).subscribe(h))})(f)}}function sm(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(e===!0){t();return}if(e!==!1){var i=new Wa({next:function(){i.unsubscribe(),t()}});return sr(e.apply(void 0,ci([],Tr(n)))).subscribe(i)}}function Pi(t,e,n){var r,i,s,o,a=!1;return t&&typeof t=="object"?(r=t.bufferSize,o=r===void 0?1/0:r,i=t.windowTime,e=i===void 0?1/0:i,s=t.refCount,a=s===void 0?!1:s,n=t.scheduler):o=t??1/0,uT({connector:function(){return new TE(o,e,n)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:a})}function Hl(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=ou(t);return Ln(function(r,i){(n?F_(t,r,n):F_(t,r)).subscribe(i)})}function Cl(t,e){return Ln(function(n,r){var i=null,s=0,o=!1,a=function(){return o&&!i&&r.complete()};n.subscribe(Tn(r,function(l){i==null||i.unsubscribe();var f=0,h=s++;sr(t(l,h)).subscribe(i=Tn(r,function(m){return r.next(e?e(l,m,h,f++):m)},function(){i=null,a()}))},function(){o=!0,a()}))})}function ME(t,e){return e===void 0&&(e=!1),Ln(function(n,r){var i=0;n.subscribe(Tn(r,function(s){var o=t(s,i++);(o||e)&&r.next(s),!o&&r.complete()}))})}function Cy(t,e,n){var r=qe(t)||e||n?{next:t,error:e,complete:n}:t;return r?Ln(function(i,s){var o;(o=r.subscribe)===null||o===void 0||o.call(r);var a=!0;i.subscribe(Tn(s,function(l){var f;(f=r.next)===null||f===void 0||f.call(r,l),s.next(l)},function(){var l;a=!1,(l=r.complete)===null||l===void 0||l.call(r),s.complete()},function(l){var f;a=!1,(f=r.error)===null||f===void 0||f.call(r,l),s.error(l)},function(){var l,f;a&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(f=r.finalize)===null||f===void 0||f.call(r)}))}):Ko}function Dg(t){return t.documentData?t.documentData:t.previousDocumentData}function lT(t){switch(t.operation){case"INSERT":return{operation:t.operation,id:t.documentId,doc:t.documentData,previous:null};case"UPDATE":return{operation:t.operation,id:t.documentId,doc:it.deepFreezeWhenDevMode(t.documentData),previous:t.previousDocumentData?t.previousDocumentData:"UNKNOWN"};case"DELETE":return{operation:t.operation,id:t.documentId,doc:null,previous:t.previousDocumentData}}}function cT(t){return!!t&&(t instanceof Ot||qe(t.lift)&&qe(t.subscribe))}function fT(t,e){var n=typeof e=="object";return new Promise(function(r,i){var s=!1,o;t.subscribe({next:function(a){o=a,s=!0},error:i,complete:function(){s?r(o):n?r(e.defaultValue):i(new RE)}})})}function As(t,e){var n=typeof e=="object";return new Promise(function(r,i){var s=new Wa({next:function(o){r(o),s.unsubscribe()},error:i,complete:function(){n?r(e.defaultValue):i(new RE)}});t.subscribe(s)})}function Ay(t){return new Ot(function(e){sr(t()).subscribe(e)})}var dT=["addListener","removeListener"],hT=["addEventListener","removeEventListener"],pT=["on","off"];function Py(t,e,n,r){if(qe(n)&&(r=n,n=void 0),r)return Py(t,e,n).pipe(CE(r));var i=Tr(vT(t)?hT.map(function(a){return function(l){return t[a](e,l,n)}}):mT(t)?dT.map(L_(t,e)):yT(t)?pT.map(L_(t,e)):[],2),s=i[0],o=i[1];if(!s&&_g(t))return Br(function(a){return Py(a,e,n)})(sr(t));if(!s)throw new TypeError("Invalid event target");return new Ot(function(a){var l=function(){for(var f=[],h=0;h<arguments.length;h++)f[h]=arguments[h];return a.next(1<f.length?f:f[0])};return s(l),function(){return o(l)}})}function L_(t,e){return function(n){return function(r){return t[n](e,r)}}}function mT(t){return qe(t.addListener)&&qe(t.removeListener)}function yT(t){return qe(t.on)&&qe(t.off)}function vT(t){return qe(t.addEventListener)&&qe(t.removeEventListener)}function gT(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=ou(t),r=EE(t,1/0),i=t;return i.length?i.length===1?sr(i[0]):kg(r)(au(i,n)):PE}function xg(t){return t[t.length-1]}function wT(t){const e=typeof t;return t!==null&&(e==="object"||e==="function")}function $_(t,e,n){if(Array.isArray(e)&&(e=e.join(".")),!wT(t)||typeof e!="string")return n===void 0?t:n;const r=e.split(".");if(r.length===0)return n;for(let i=0;i<r.length;i++){const s=r[i];if(_T(t,s)?t=i===r.length-1?void 0:null:t=t[s],t==null){if(i!==r.length-1)return n;break}}return t===void 0?n:t}function _T(t,e){if(typeof e!="number"&&Array.isArray(t)){const n=Number.parseInt(e,10);return Number.isInteger(n)&&t[n]===t[e]}return!1}const NE=t=>!!t.queryParams.limit,bT=t=>t.queryParams.limit===1,ST=t=>!!(t.queryParams.skip&&t.queryParams.skip>0),IT=t=>t.changeEvent.operation==="DELETE",ET=t=>t.changeEvent.operation==="INSERT",OT=t=>t.changeEvent.operation==="UPDATE",kT=t=>NE(t)&&t.previousResults.length>=t.queryParams.limit,DT=t=>{const e=t.queryParams.sortFields,n=t.changeEvent.previous,r=t.changeEvent.doc;if(!r)return!1;if(!n)return!0;for(let i=0;i<e.length;i++){const s=e[i],o=$_(n,s),a=$_(r,s);if(o!==a)return!0}return!1},xT=t=>{const e=t.changeEvent.id;if(t.keyDocumentMap)return t.keyDocumentMap.has(e);{const n=t.queryParams.primaryKey,r=t.previousResults;for(let i=0;i<r.length;i++)if(r[i][n]===e)return!0;return!1}},CT=t=>{const e=t.previousResults[0];return!!(e&&e[t.queryParams.primaryKey]===t.changeEvent.id)},AT=t=>{const e=xg(t.previousResults);return!!(e&&e[t.queryParams.primaryKey]===t.changeEvent.id)},PT=t=>{const e=t.changeEvent.previous;if(!e)return!1;const n=t.previousResults[0];return n?n[t.queryParams.primaryKey]===t.changeEvent.id?!0:t.queryParams.sortComparator(e,n)<0:!1},RT=t=>{const e=t.changeEvent.previous;if(!e)return!1;const n=xg(t.previousResults);return n?n[t.queryParams.primaryKey]===t.changeEvent.id?!0:t.queryParams.sortComparator(e,n)>0:!1},TT=t=>{const e=t.changeEvent.doc;if(!e)return!1;const n=t.previousResults[0];return n?n[t.queryParams.primaryKey]===t.changeEvent.id?!0:t.queryParams.sortComparator(e,n)<0:!1},MT=t=>{const e=t.changeEvent.doc;if(!e)return!1;const n=xg(t.previousResults);return n?n[t.queryParams.primaryKey]===t.changeEvent.id?!0:t.queryParams.sortComparator(e,n)>0:!1},NT=t=>{const e=t.changeEvent.previous;return e?t.queryParams.queryMatcher(e):!1},BT=t=>{const e=t.changeEvent.doc;return e?t.queryParams.queryMatcher(e):!1},FT=t=>t.previousResults.length===0,LT={0:ET,1:OT,2:IT,3:NE,4:bT,5:ST,6:FT,7:kT,8:CT,9:AT,10:DT,11:xT,12:PT,13:RT,14:TT,15:MT,16:NT,17:BT};function BE(t,e,n,r){var i=t.length,s=i-1,o=0;if(i===0)return t.push(e),0;for(var a;r<=s;)o=r+(s-r>>1),a=t[o],n(a,e)<=0?r=o+1:s=o-1;return n(a,e)<=0&&o++,t.splice(o,0,e),o}const $T=t=>{},Cg=t=>{t.previousResults.unshift(t.changeEvent.doc),t.keyDocumentMap&&t.keyDocumentMap.set(t.changeEvent.id,t.changeEvent.doc)},Ag=t=>{t.previousResults.push(t.changeEvent.doc),t.keyDocumentMap&&t.keyDocumentMap.set(t.changeEvent.id,t.changeEvent.doc)},Pg=t=>{const e=t.previousResults.shift();t.keyDocumentMap&&e&&t.keyDocumentMap.delete(e[t.queryParams.primaryKey])},Rg=t=>{const e=t.previousResults.pop();t.keyDocumentMap&&e&&t.keyDocumentMap.delete(e[t.queryParams.primaryKey])},jT=t=>{Pg(t),Ag(t)},UT=t=>{Rg(t),Cg(t)},zT=t=>{Pg(t),Cg(t)},VT=t=>{Rg(t),Ag(t)},FE=t=>{t.keyDocumentMap&&t.keyDocumentMap.delete(t.changeEvent.id);const e=t.queryParams.primaryKey,n=t.previousResults;for(let r=0;r<n.length;r++)if(n[r][e]===t.changeEvent.id){n.splice(r,1);break}},KT=t=>{const e=t.changeEvent.doc,n=t.queryParams.primaryKey,r=t.previousResults;for(let i=0;i<r.length;i++)if(r[i][n]===t.changeEvent.id){r[i]=e,t.keyDocumentMap&&t.keyDocumentMap.set(t.changeEvent.id,e);break}},WT=t=>{const e={_id:"wrongHuman"+new Date().getTime()};t.previousResults.length=0,t.previousResults.push(e),t.keyDocumentMap&&(t.keyDocumentMap.clear(),t.keyDocumentMap.set(e._id,e))},LE=t=>{const e=t.changeEvent.id,n=t.changeEvent.doc;if(t.keyDocumentMap){if(t.keyDocumentMap.has(e))return;t.keyDocumentMap.set(e,n)}else if(t.previousResults.find(i=>i[t.queryParams.primaryKey]===e))return;BE(t.previousResults,n,t.queryParams.sortComparator,0)},qT=t=>{FE(t),LE(t)},HT=t=>{throw new Error("Action runFullQueryAgain must be implemented by yourself")},QT=t=>{throw new Error("Action unknownAction should never be called")},YT=["doNothing","insertFirst","insertLast","removeFirstItem","removeLastItem","removeFirstInsertLast","removeLastInsertFirst","removeFirstInsertFirst","removeLastInsertLast","removeExisting","replaceExisting","alwaysWrong","insertAtSortPosition","removeExistingAndInsertAtSortPosition","runFullQueryAgain","unknownAction"],GT={doNothing:$T,insertFirst:Cg,insertLast:Ag,removeFirstItem:Pg,removeLastItem:Rg,removeFirstInsertLast:jT,removeLastInsertFirst:UT,removeFirstInsertFirst:zT,removeLastInsertLast:VT,removeExisting:FE,replaceExisting:KT,alwaysWrong:WT,insertAtSortPosition:LE,removeExistingAndInsertAtSortPosition:qT,runFullQueryAgain:HT,unknownAction:QT},JT=40;function om(t){return t.charCodeAt(0)-JT}function XT(t){return t?"1":"0"}function j_(t,e){const n=[];for(let r=0,i=t.length;r<i;r+=e)n.push(t.substring(r,r+e));return n}function ZT(t){const e=new Map,r=2+parseInt(t.charAt(0)+t.charAt(1),10)*2,i=t.substring(2,r),s=j_(i,2);for(let E=0;E<s.length;E++){const $=s[E],S=$.charAt(0),_=om($.charAt(1));e.set(S,_)}const o=t.substring(r,t.length-3),a=j_(o,4);for(let E=0;E<a.length;E++){const $=a[E],S=$.charAt(0),_=$.charAt(1),O=$.charAt(2),z=om($.charAt(3));if(!e.has(_))throw new Error("missing node with id "+_);if(!e.has(O))throw new Error("missing node with id "+O);const W=e.get(_),Q=e.get(O),H={l:z,0:W,1:Q};e.set(S,H)}const l=t.slice(-3),f=l.charAt(0),h=l.charAt(1),m=om(l.charAt(2)),y=e.get(f),w=e.get(h);return{l:m,0:y,1:w}}function eM(t,e,n){let r=t,i=t.l;for(;;){const s=e[i](n),o=XT(s);if(r=r[o],typeof r=="number"||typeof r=="string")return r;i=r.l}}const tM="14a1b,c+d2e5f0g/h.i4j*k-l)m(n6oeh6pnm6qen6ril6snh6tin6ubo9vce9wmh9xns9yne9zmi9{cm9|ad9}cp9~aq9ae9¡bf9¢bq9£cg9¤ck9¥cn9¦nd9§np9¨nq9©nf9ªng9«nm9¬nk9­mr9®ms9¯mt9°mj9±mk9²ml9³mn9´mc8µ³{8¶¯}8·°¤8¸³§8¹mn8º³«8»³m8¼m´4½z²4¾³w4¿zµ4À¯¶4Á°·4Â³º4Ã³¸4Äm¹4Åv¤7Æyn7ÇÀÁ7È~7É¥¤7ÊÃÄ7Ë¨n7Ìº¹7Í­°7Î®m7Ï¯°7Ð±m7Ñ³m7Ò¼m5ÓÄm5Ô¹m5Õ½°5Ö¾m5×¿°5ØÇÏ5ÙÂm5ÚÊÑ5Û±m5Üºm5ÝÌÑ5ÞÕÍ2ß|2à¡u2á£Å2âÖÎ2ã¦Æ2ä©x2åªÆ2æ×Ø2ç|È2è¡¢2é£É2ê¤¥2ëÙÚ2ì¦Ë2í©n2îªn2ïÛÐ2ðÜÝ2ñ¬n2òÒÓ/óan/ôbn/õcn/öÞâ/÷ßã/øàä/ùáå/úæë/ûçì/üèí/ýéî/þÍÎ/ÿÏÑ/ĀòÔ,ācn,Ăöï,ă¤ñ,Ąúð,ąêñ,ĆþÐ,ćÿÑ,Ĉac0ĉbc0Ċóõ0ċôā0Čßá0čà¤0Ďçé0ďèê0Đ÷ù0đøă0Ēûý0ēüą0ĔmÒ-ĕmĀ-ĖÞæ-ėČĎ-Ęčď-ęĂĄ-ĚĐĒ-ěđē-Ĝ²»-ĝÍÏ-ĞĆć-ğ²³-ĠĔĈ3ġĕĊ3ĢĖė3ģęĚ3ĤĢĝ(ĥĜğ(ĦģĞ(ħĠġ+Ĩĉċ+ĩĤĦ+ĪĘě+īħĨ1ĬĩĪ1ĭĬī*Įĥm*ĭĮ.";let am;function nM(){return am||(am=ZT(tM)),am}const rM=t=>eM(nM(),LT,t);function iM(t){const e=rM(t);return YT[e]}function sM(t,e,n,r,i){const s=GT[t];return s({queryParams:e,changeEvent:n,previousResults:r,keyDocumentMap:i}),r}var Ar=String.fromCharCode(65535),li=Number.MIN_SAFE_INTEGER;function oM(t,e){var n=e.selector,r=t.indexes?t.indexes.slice(0):[];e.index&&(r=[e.index]);var i=!!e.sort.find(h=>Object.values(h)[0]==="desc"),s=new Set;Object.keys(n).forEach(h=>{var m=zi(t,h);m&&m.type==="boolean"&&Object.prototype.hasOwnProperty.call(n[h],"$eq")&&s.add(h)});var o=e.sort.map(h=>Object.keys(h)[0]),a=o.filter(h=>!s.has(h)).join(","),l=-1,f;if(r.forEach(h=>{var m=!0,y=!0,w=h.map(_=>{var O=n[_],z=O?Object.keys(O):[],W={};if(!O||!z.length){var Q=y?li:Ar;W={startKey:Q,endKey:m?Ar:li,inclusiveStart:!0,inclusiveEnd:!0}}else z.forEach(H=>{if(Tg.has(H)){var X=O[H],U=cM(H,X);W=Object.assign(W,U)}});return typeof W.startKey>"u"&&(W.startKey=li),typeof W.endKey>"u"&&(W.endKey=Ar),typeof W.inclusiveStart>"u"&&(W.inclusiveStart=!0),typeof W.inclusiveEnd>"u"&&(W.inclusiveEnd=!0),y&&!W.inclusiveStart&&(y=!1),m&&!W.inclusiveEnd&&(m=!1),W}),I=w.map(_=>_.startKey),E=w.map(_=>_.endKey),$={index:h,startKeys:I,endKeys:E,inclusiveEnd:m,inclusiveStart:y,sortSatisfiedByIndex:!i&&a===h.filter(_=>!s.has(_)).join(","),selectorSatisfiedByIndex:lM(h,e.selector,I,E)},S=fM(t,e,$);(S>=l||e.index)&&(l=S,f=$)}),!f)throw le("SNH",{query:e});return f}var Tg=new Set(["$eq","$gt","$gte","$lt","$lte"]),aM=new Set(["$eq","$gt","$gte"]),uM=new Set(["$eq","$lt","$lte"]);function lM(t,e,n,r){var i=Object.entries(e),s=i.find(([H,X])=>{if(!t.includes(H))return!0;var U=Object.entries(X).find(([ee,ce])=>!Tg.has(ee));return U});if(s||e.$and||e.$or)return!1;var o=[],a=new Set;for(var[l,f]of Object.entries(e)){if(!t.includes(l))return!1;var h=Object.keys(f).filter(H=>aM.has(H));if(h.length>1)return!1;var m=h[0];if(m&&a.add(l),m!=="$eq"){if(o.length>0)return!1;o.push(m)}}var y=[],w=new Set;for(var[I,E]of Object.entries(e)){if(!t.includes(I))return!1;var $=Object.keys(E).filter(H=>uM.has(H));if($.length>1)return!1;var S=$[0];if(S&&w.add(I),S!=="$eq"){if(y.length>0)return!1;y.push(S)}}var _=0;for(var O of t){for(var z of[a,w]){if(!z.has(O)&&z.size>0)return!1;z.delete(O)}var W=n[_],Q=r[_];if(W!==Q&&a.size>0&&w.size>0)return!1;_++}return!0}function cM(t,e){switch(t){case"$eq":return{startKey:e,endKey:e,inclusiveEnd:!0,inclusiveStart:!0};case"$lte":return{endKey:e,inclusiveEnd:!0};case"$gte":return{startKey:e,inclusiveStart:!0};case"$lt":return{endKey:e,inclusiveEnd:!1};case"$gt":return{startKey:e,inclusiveStart:!1};default:throw new Error("SNH")}}function fM(t,e,n){var r=0,i=h=>{h>0&&(r=r+h)},s=10,o=Xp(n.startKeys,h=>h!==li&&h!==Ar);i(o*s);var a=Xp(n.startKeys,h=>h!==Ar&&h!==li);i(a*s);var l=Xp(n.startKeys,(h,m)=>h===n.endKeys[m]);i(l*s*1.5);var f=n.sortSatisfiedByIndex?5:0;return i(f),r}const dM=2147483647,hM=-2147483648,pM=Number.MAX_SAFE_INTEGER,mM=Number.MIN_SAFE_INTEGER,Vi=Symbol("missing"),$E=Object.freeze(new Error("mingo: cycle detected while processing object/array")),yM=Object.getPrototypeOf([]),jE=Object.getPrototypeOf({}),vM="[object Object]",gM=/^\[object ([a-zA-Z0-9]+)\]$/;let Mg=class{};class Ng{}const Lo=t=>t===null?Mg:t===void 0?Ng:t.constructor,Ql=t=>{const e=OM(t);let n=0,r=e.length;for(;r;)n=(n<<5)-n^e.charCodeAt(--r);return n>>>0},UE=new Set(["null","undefined","boolean","number","string","date","regexp"]),U_=new Set([Ng,Mg,Boolean,String,Number]),Nu=t=>t.toString(),Sr=t=>`${Lo(t).name}[${t.toString()}]`,$o=new Map([[Number,Nu],[Boolean,Nu],[RegExp,Nu],[Function,Nu],[Symbol,Nu],[Date,t=>t.toISOString()],[String,JSON.stringify],[Mg,t=>"null"],[Ng,t=>"undefined"],[Int8Array,Sr],[Uint8Array,Sr],[Uint8ClampedArray,Sr],[Int16Array,Sr],[Uint16Array,Sr],[Int32Array,Sr],[Uint32Array,Sr],[Float32Array,Sr],[Float64Array,Sr]]);typeof BigInt<"u"&&$o.set(BigInt,t=>"0x"+t.toString(16));typeof BigInt64Array<"u"&&$o.set(BigInt64Array,Sr);typeof BigUint64Array<"u"&&$o.set(BigUint64Array,Sr);const wM={null:0,undefined:0,number:1,string:2,object:3,array:4,boolean:5,date:6,regexp:7,function:8},Mn=(t,e)=>{t===Vi&&(t=void 0),e===Vi&&(e=void 0);const[n,r]=[t,e].map(i=>wM[Al(i).toLowerCase()]);return n!==r?n-r:n===1||n===2||n===6?t<e?-1:t>e?1:0:Wi(t,e)?0:t<e?-1:t>e?1:0};function Yt(t,e){if(!t)throw new Error(e)}const _M=t=>{const e=Object.getPrototypeOf(Lo(t));return e&&e.name==="TypedArray"},Ry=t=>{if(U_.has(Lo(t)))return t;const e=new Set,n=r=>{if(e.has(r))throw $E;const i=Lo(r);if(U_.has(i))return r;try{if(Lt(r))return e.add(r),r.map(n);if(wt(r)){e.add(r);const s={};for(const o in r)s[o]=n(r[o]);return s}}finally{e.delete(r)}return i===Date||i===RegExp||_M(r)?new i(r):r};return n(t)},Al=t=>gM.exec(Object.prototype.toString.call(t))[1],um=t=>typeof t=="boolean",Ki=t=>typeof t=="string",Qn=t=>!isNaN(t)&&typeof t=="number",Lt=Array.isArray,wt=t=>{if(!t)return!1;const e=Object.getPrototypeOf(t);return(e===jE||e===null)&&vM===Object.prototype.toString.call(t)},Sh=t=>t===Object(t),Ty=t=>t instanceof Date,Cf=t=>t instanceof RegExp,Ih=t=>typeof t=="function",cn=t=>t==null,qa=(t,e)=>t.includes(e),zE=(t,e)=>!qa(t,e),bM=(t,e=!0)=>!!t||e&&t==="",uu=t=>cn(t)||Ki(t)&&!t||t instanceof Array&&t.length===0||wt(t)&&Object.keys(t).length===0,z_=t=>t===Vi,Yl=t=>t instanceof Array?t:[t],Zn=(t,e)=>!!t&&Object.prototype.hasOwnProperty.call(t,e),SM=(t,e)=>wt(t)&&wt(e)||Lt(t)&&Lt(e);function My(t,e,n){if(n=n||{flatten:!1},z_(t)||cn(t))return e;if(z_(e)||cn(e))return t;if(!SM(t,e)){if(n.skipValidation)return e||t;throw Error("mismatched types. must both be array or object")}if(n.skipValidation=!0,Lt(t)){const r=t,i=e;if(n.flatten){let s=0,o=0;for(;s<r.length&&o<i.length;)r[s]=My(r[s++],i[o++],n);for(;o<i.length;)r.push(e[o++])}else Gl(r,i)}else for(const r in e)t[r]=My(t[r],e[r],n);return t}function Ny(t,e=Ql){const n=new Map;return t.forEach((r,i)=>{const s=KE(r,e);n.has(s)?n.get(s).some(o=>Wi(t[o],r))||n.get(s).push(i):n.set(s,[i])}),n}function Bg(t,e=Ql){if(t.some(a=>a.length==0))return[];if(t.length===1)return Array.from(t);const n=kM(t.map((a,l)=>[l,a.length]),a=>a[1]),r=t[n[0][0]],i=Ny(r,e),s=new Map,o=new Array;return i.forEach((a,l)=>{const f=a.map(w=>r[w]),h=f.map(w=>0),m=f.map(w=>[n[0][0],0]);let y=!1;for(let w=1;w<t.length;w++){const[I,E]=n[w],$=t[I];if(s.has(w)||s.set(w,Ny($)),s.get(w).has(l)){const S=s.get(w).get(l).map(_=>$[_]);y=f.map((_,O)=>S.some((z,W)=>{const Q=h[O];return Wi(_,z)&&(h[O]++,I<m[O][0]&&(m[O]=[I,s.get(w).get(l)[W]])),Q<h[O]})).some(Boolean)}if(!y)return}y&&Gl(o,h.map((w,I)=>w===t.length-1?[f[I],m[I]]:Vi).filter(w=>w!==Vi))}),o.sort((a,l)=>{const[f,[h,m]]=a,[y,[w,I]]=l,E=Mn(h,w);return E!==0?E:Mn(m,I)}).map(a=>a[0])}function VE(t,e=0){const n=new Array;function r(i,s){for(let o=0,a=i.length;o<a;o++)Lt(i[o])&&(s>0||s<0)?r(i[o],Math.max(-1,s-1)):n.push(i[o])}return r(t,e),n}const IM=t=>{let[e,n]=[Object.getPrototypeOf(t),Object.getOwnPropertyNames(t)],r=e;for(;!n.length&&e!==jE&&e!==yM;)r=e,n=Object.getOwnPropertyNames(e),e=Object.getPrototypeOf(e);const i={};return n.forEach(s=>i[s]=t[s]),[i,r]};function Wi(t,e){const n=[[t,e]];for(;n.length>0;){if([t,e]=n.pop(),t===e)continue;const r=Lo(t);if(r!==Lo(e)||Ih(t))return!1;if($o.has(r)){const i=$o.get(r);if(i(t)!==i(e))return!1;continue}if(r===Array||r===Object){const i=Object.keys(t),s=Object.keys(e);if(i.length!==s.length||new Set(i.concat(s)).size!=i.length)return!1;for(const o of i)n.push([t[o],e[o]]);continue}return!1}return!n.length}function EM(t,e=Ql){const n=t.map(r=>Vi);return Ny(t,e).forEach((r,i)=>{r.forEach(s=>n[s]=t[s])}),n.filter(r=>r!==Vi)}function OM(t){const e=new Set,n=r=>{const i=Lo(r);if($o.has(i))return $o.get(i)(r);const s=i===Object?"":i.name;if(Ih(r.toJSON))return`${s}(${JSON.stringify(r)})`;if(e.has(r))throw $E;e.add(r);try{if(i===Array)return"["+r.map(n).join(",")+"]";if(i!==Object){const[a,l]=IM(r);if(Lt(r))return`${s}${n([...r,a])}`;r=a}const o=Object.keys(r);return o.sort(),`${s}{`+o.map(a=>`${a}:${n(r[a])}`).join(",")+"}"}finally{e.delete(r)}};return n(t)}function KE(t,e){return e=e||Ql,cn(t)?null:e(t).toString()}function kM(t,e,n=Mn){if(uu(t))return t;const r=new Array,i=new Array;for(let s=0;s<t.length;s++){const o=t[s],a=e(o,s);cn(a)?i.push(o):r.push([a,o])}return r.sort((s,o)=>n(s[0],o[0])),Gl(i,r.map(s=>s[1]))}function DM(t,e,n=Ql){if(t.length<1)return new Map;const r=new Map,i=new Map;for(let s=0;s<t.length;s++){const o=t[s],a=e(o,s),l=KE(a,n);if(l===null)i.has(null)?i.get(null).push(o):i.set(null,[o]);else{const f=r.has(l)?r.get(l).find(h=>Wi(h,a)):null;cn(f)?(i.set(a,[o]),r.has(l)?r.get(l).push(a):r.set(l,[a])):i.get(f).push(o)}}return i}const lm=5e4;function Gl(t,...e){return t instanceof Array?e.reduce((n,r)=>{let i=Math.ceil(r.length/lm),s=0;for(;i-- >0;)Array.prototype.push.apply(n,r.slice(s,s+lm)),s+=lm;return n},t):e.filter(Sh).reduce((n,r)=>(Object.assign(n,r),n),t)}function By(t,e){return Sh(t)?t[e]:void 0}function xM(t,e){if(e<1)return t;for(;e--&&t.length===1;)t=t[0];return t}function lu(t,e,n){let r=0;function i(o,a){let l=o;for(let f=0;f<a.length;f++){const h=a[f];if(/^\d+$/.exec(h)===null&&l instanceof Array){if(f===0&&r>0)break;r+=1;const y=a.slice(f);l=l.reduce((w,I)=>{const E=i(I,y);return E!==void 0&&w.push(E),w},[]);break}else l=By(l,h);if(l===void 0)break}return l}const s=UE.has(Al(t).toLowerCase())?t:i(t,e.split("."));return s instanceof Array&&(n!=null&&n.unwrapArray)?xM(s,r):s}function Af(t,e,n){const r=e.split("."),i=r[0],s=r.slice(1).join("."),o=/^\d+$/.exec(i)!==null,a=r.length>1;let l,f;if(t instanceof Array)if(o)l=By(t,Number(i)),a&&(l=Af(l,s,n)),l=[l];else{l=[];for(const h of t)f=Af(h,e,n),n!=null&&n.preserveMissing?(f===void 0&&(f=Vi),l.push(f)):f!==void 0&&l.push(f)}else{if(f=By(t,i),a&&(f=Af(f,s,n)),f===void 0)return;l=n!=null&&n.preserveKeys?Object.assign({},t):{},l[i]=f}return l}function Fy(t){if(t instanceof Array)for(let e=t.length-1;e>=0;e--)t[e]===Vi?t.splice(e,1):Fy(t[e]);else if(wt(t))for(const e in t)Zn(t,e)&&Fy(t[e])}const V_=/^\d+$/;function Pl(t,e,n,r){const i=e.split("."),s=i[0],o=i.slice(1).join(".");if(i.length===1)(wt(t)||Lt(t)&&V_.test(s))&&n(t,s);else{r!=null&&r.buildGraph&&cn(t[s])&&(t[s]={});const a=t[s];if(!a)return;const l=!!(i.length>1&&V_.test(i[1]));a instanceof Array&&(r!=null&&r.descendArray)&&!l?a.forEach(f=>Pl(f,o,n,r)):Pl(a,o,n,r)}}function CM(t,e,n){Pl(t,e,(r,i)=>{r[i]=Ih(n)?n(r[i]):n},{buildGraph:!0})}function K_(t,e,n){Pl(t,e,(r,i)=>{if(r instanceof Array){if(/^\d+$/.test(i))r.splice(parseInt(i),1);else if(n&&n.descendArray)for(const s of r)wt(s)&&delete s[i]}else wt(r)&&delete r[i]},n)}const AM=/^\$[a-zA-Z0-9_]+$/;function Wo(t){return AM.test(t)}function WE(t){if(UE.has(Al(t).toLowerCase()))return Cf(t)?{$regex:t}:{$eq:t};if(Sh(t)){if(!Object.keys(t).some(Wo))return{$eq:t};if(Zn(t,"$regex")){const n=Object.assign({},t);return n.$regex=new RegExp(t.$regex,t.$options),delete n.$options,n}}return t}var vs;(function(t){t.CLONE_ALL="CLONE_ALL",t.CLONE_INPUT="CLONE_INPUT",t.CLONE_OUTPUT="CLONE_OUTPUT",t.CLONE_OFF="CLONE_OFF"})(vs||(vs={}));class Eo{constructor(e,n,r,i=Date.now()){this._opts=e,this._root=n,this._local=r,this.timestamp=i,this.update(n,r)}static init(e,n,r){return e instanceof Eo?new Eo(e._opts,cn(e.root)?n:e.root,Object.assign({},e.local,r)):new Eo(e,n,r)}update(e,n){var r;return this._root=e,this._local=n&&Object.assign({},n,{variables:Object.assign({},(r=this._local)===null||r===void 0?void 0:r.variables,n==null?void 0:n.variables)}),this}getOptions(){return Object.freeze(Object.assign(Object.assign({},this._opts),{context:jo.from(this._opts.context)}))}get root(){return this._root}get local(){return this._local}get idKey(){return this._opts.idKey}get collation(){var e;return(e=this._opts)===null||e===void 0?void 0:e.collation}get processingMode(){var e;return((e=this._opts)===null||e===void 0?void 0:e.processingMode)||vs.CLONE_OFF}get useStrictMode(){var e;return(e=this._opts)===null||e===void 0?void 0:e.useStrictMode}get scriptEnabled(){var e;return(e=this._opts)===null||e===void 0?void 0:e.scriptEnabled}get useGlobalContext(){var e;return(e=this._opts)===null||e===void 0?void 0:e.useGlobalContext}get hashFunction(){var e;return(e=this._opts)===null||e===void 0?void 0:e.hashFunction}get collectionResolver(){var e;return(e=this._opts)===null||e===void 0?void 0:e.collectionResolver}get jsonSchemaValidator(){var e;return(e=this._opts)===null||e===void 0?void 0:e.jsonSchemaValidator}get variables(){var e;return(e=this._opts)===null||e===void 0?void 0:e.variables}get context(){var e;return(e=this._opts)===null||e===void 0?void 0:e.context}}function Fg(t){return t instanceof Eo?t.getOptions():Object.freeze(Object.assign(Object.assign({idKey:"_id",scriptEnabled:!0,useStrictMode:!0,useGlobalContext:!0,processingMode:vs.CLONE_OFF},t),{context:t!=null&&t.context?jo.from(t==null?void 0:t.context):jo.init({})}))}var Ye;(function(t){t.ACCUMULATOR="accumulator",t.EXPRESSION="expression",t.PIPELINE="pipeline",t.PROJECTION="projection",t.QUERY="query",t.WINDOW="window"})(Ye||(Ye={}));class jo{constructor(e){this.operators={[Ye.ACCUMULATOR]:{},[Ye.EXPRESSION]:{},[Ye.PIPELINE]:{},[Ye.PROJECTION]:{},[Ye.QUERY]:{},[Ye.WINDOW]:{}};for(const[n,r]of Object.entries(e))this.addOperators(n,r)}static init(e={}){return new jo(e)}static from(e){return new jo(e.operators)}addOperators(e,n){for(const[r,i]of Object.entries(n))this.getOperator(e,r)||(this.operators[e][r]=i);return this}addAccumulatorOps(e){return this.addOperators(Ye.ACCUMULATOR,e)}addExpressionOps(e){return this.addOperators(Ye.EXPRESSION,e)}addQueryOps(e){return this.addOperators(Ye.QUERY,e)}addPipelineOps(e){return this.addOperators(Ye.PIPELINE,e)}addProjectionOps(e){return this.addOperators(Ye.PROJECTION,e)}addWindowOps(e){return this.addOperators(Ye.WINDOW,e)}getOperator(e,n){return e in this.operators&&this.operators[e][n]||null}}const co=jo.init();function W_(t,e){for(const[n,r]of Object.entries(e)){Yt(Ih(r)&&Wo(n),`'${n}' is not a valid operator`);const i=Oo(t,n,null);Yt(!i||r===i,`${n} already exists for '${t}' operators. Cannot change operator function once registered.`)}switch(t){case Ye.ACCUMULATOR:co.addAccumulatorOps(e);break;case Ye.EXPRESSION:co.addExpressionOps(e);break;case Ye.PIPELINE:co.addPipelineOps(e);break;case Ye.PROJECTION:co.addProjectionOps(e);break;case Ye.QUERY:co.addQueryOps(e);break;case Ye.WINDOW:co.addWindowOps(e);break}}function Oo(t,e,n){const{context:r,useGlobalContext:i}=n||{},s=r?r.getOperator(t,e):null;return!s&&i?co.getOperator(t,e):s}const q_={$$ROOT(t,e,n){return n.root},$$CURRENT(t,e,n){return t},$$REMOVE(t,e,n){},$$NOW(t,e,n){return new Date(n.timestamp)}},Ly={$$KEEP(t,e,n){return t},$$PRUNE(t,e,n){},$$DESCEND(t,e,n){if(!Zn(e,"$cond"))return t;let r;for(const[i,s]of Object.entries(t))if(Sh(s)){if(s instanceof Array){const o=[];for(let a of s)wt(a)&&(a=H_(a,e,n.update(a))),cn(a)||o.push(a);r=o}else r=H_(s,e,n.update(s));cn(r)?delete t[i]:t[i]=r}return t}};function Xr(t,e,n,r){var i;const s=Eo.init(r,t);if(n=n||"",Wo(n)){const o=Oo(Ye.EXPRESSION,n,r);if(o)return o(t,e,s);const a=Oo(Ye.ACCUMULATOR,n,r);if(a)return t instanceof Array||(t=Xr(t,e,null,s),e=null),Yt(t instanceof Array,`'${n}' target must be an array.`),a(t,e,s.update(null,s.local));throw new Error(`operator '${n}' is not registered`)}if(Ki(e)&&e.length>0&&e[0]==="$"){if(Zn(Ly,e))return e;let o=s.root;const a=e.split(".");if(Zn(q_,a[0]))o=q_[a[0]](t,null,s),e=e.slice(a[0].length+1);else if(a[0].slice(0,2)==="$$"){o=Object.assign({},s.variables,{this:t},(i=s.local)===null||i===void 0?void 0:i.variables);const l=a[0].slice(2);Yt(Zn(o,l),`Use of undefined variable: ${l}`),e=e.slice(2)}else e=e.slice(1);return e===""?o:lu(o,e)}if(Lt(e))return e.map(o=>Xr(t,o,null,s));if(wt(e)){const o={};for(const[a,l]of Object.entries(e))if(o[a]=Xr(t,l,a,s),[Ye.EXPRESSION,Ye.ACCUMULATOR].some(f=>!!Oo(f,a,r)))return Yt(Object.keys(e).length===1,"Invalid aggregation expression '"+JSON.stringify(e)+"'"),o[a];return o}return e}function H_(t,e,n){const r=Xr(t,e,null,n);return Zn(Ly,r)?Ly[r](t,e,n):r}function Ha(t){return t instanceof Q_?t:new Q_(t)}function PM(...t){let e=0;return Ha(()=>{for(;e<t.length;){const n=t[e].next();if(!n.done)return n;e++}return{done:!0}})}function RM(t){return!!t&&typeof t=="object"&&(t==null?void 0:t.next)instanceof Function}function TM(t,e){const n=t.slice(e+1);t.splice(e),Array.prototype.push.apply(t,n)}const $y=new Error;var si;(function(t){t[t.MAP=0]="MAP",t[t.FILTER=1]="FILTER",t[t.TAKE=2]="TAKE",t[t.DROP=3]="DROP"})(si||(si={}));function MM(t,e,n){let r=!1,i=-1,s=0;return function(o){try{e:for(;!r;){let a=t();i++;let l=-1;const f=e.length;let h=!1;for(;++l<f;){const m=e[l];switch(m.action){case si.MAP:a=m.func(a,i);break;case si.FILTER:if(!m.func(a,i))continue e;break;case si.TAKE:--m.count,m.count||(h=!0);break;case si.DROP:--m.count,m.count||TM(e,l);continue e;default:break e}}if(r=h,o)n[s++]=a;else return{value:a,done:!1}}}catch(a){if(a!==$y)throw a}return r=!0,{done:r}}}class Q_{constructor(e){this.iteratees=[],this.yieldedValues=[],this.isDone=!1;let n;if(e instanceof Function&&(e={next:e}),RM(e)){const r=e;n=()=>{const i=r.next();if(i.done)throw $y;return i.value}}else if(e instanceof Array){const r=e,i=r.length;let s=0;n=()=>{if(s<i)return r[s++];throw $y}}else if(!(e instanceof Function))throw new Error("Lazy must be initialized with an array, generator, or function.");this.getNext=MM(n,this.iteratees,this.yieldedValues)}push(e,n){return typeof n=="function"?this.iteratees.push({action:e,func:n}):typeof n=="number"&&this.iteratees.push({action:e,count:n}),this}next(){return this.getNext()}map(e){return this.push(si.MAP,e)}filter(e){return this.push(si.FILTER,e)}take(e){return e>0?this.push(si.TAKE,e):this}drop(e){return e>0?this.push(si.DROP,e):this}transform(e){const n=this;let r;return Ha(()=>(r||(r=Ha(e(n.value()))),r.next()))}value(){return this.isDone||(this.isDone=this.getNext(!0).done),this.yieldedValues}each(e){for(;;){const n=this.next();if(n.done)break;if(e(n.value)===!1)return!1}return!0}reduce(e,n){let r=this.next();for(n===void 0&&!r.done&&(n=r.value,r=this.next());!r.done;)n=e(n,r.value),r=this.next();return n}size(){return this.reduce((e,n)=>++e,0)}[Symbol.iterator](){return this}}class NM{constructor(e,n){this.pipeline=e,this.options=Fg(n)}stream(e){let n=Ha(e);const r=this.options.processingMode;(r==vs.CLONE_ALL||r==vs.CLONE_INPUT)&&n.map(Ry);const i=new Array;if(!uu(this.pipeline))for(const s of this.pipeline){const o=Object.keys(s),a=o[0],l=Oo(Ye.PIPELINE,a,this.options);Yt(o.length===1&&!!l,`invalid pipeline operator ${a}`),i.push(a),n=l(n,s[a],this.options)}return(r==vs.CLONE_OUTPUT||r==vs.CLONE_ALL&&Bg([["$group","$unwind"],i]).length)&&n.map(Ry),n}run(e){return this.stream(e).value()}}class BM{constructor(e,n,r,i){this.source=e,this.predicate=n,this.projection=r,this.options=i,this.operators=[],this.result=null,this.buffer=[]}fetch(){return this.result?this.result:(wt(this.projection)&&this.operators.push({$project:this.projection}),this.result=Ha(this.source).filter(this.predicate),this.operators.length>0&&(this.result=new NM(this.operators,this.options).stream(this.result)),this.result)}fetchAll(){const e=Ha([...this.buffer]);return this.buffer=[],PM(e,this.fetch())}all(){return this.fetchAll().value()}count(){return this.all().length}skip(e){return this.operators.push({$skip:e}),this}limit(e){return this.operators.push({$limit:e}),this}sort(e){return this.operators.push({$sort:e}),this}collation(e){return this.options=Object.assign(Object.assign({},this.options),{collation:e}),this}next(){if(this.buffer.length>0)return this.buffer.pop();const e=this.fetch().next();if(!e.done)return e.value}hasNext(){if(this.buffer.length>0)return!0;const e=this.fetch().next();return e.done?!1:(this.buffer.push(e.value),!0)}map(e){return this.all().map(e)}forEach(e){this.all().forEach(e)}[Symbol.iterator](){return this.fetchAll()}}class qs{constructor(e,n){this.condition=e,this.options=Fg(n),this.compiled=[],this.compile()}compile(){Yt(wt(this.condition),`query criteria must be an object: ${JSON.stringify(this.condition)}`);const e={};for(const[n,r]of Object.entries(this.condition)){if(n==="$where")Object.assign(e,{field:n,expr:r});else if(qa(["$and","$or","$nor","$expr","$jsonSchema"],n))this.processOperator(n,n,r);else{Yt(!Wo(n),`unknown top level operator: ${n}`);for(const[i,s]of Object.entries(WE(r)))this.processOperator(n,i,s)}e.field&&this.processOperator(e.field,e.field,e.expr)}}processOperator(e,n,r){const i=Oo(Ye.QUERY,n,this.options);if(!i)throw new Error(`unknown operator ${n}`);const s=i(e,r,this.options);this.compiled.push(s)}test(e){for(let n=0,r=this.compiled.length;n<r;n++)if(!this.compiled[n](e))return!1;return!0}find(e,n){return new BM(e,r=>this.test(r),n||{},this.options)}remove(e){return e.reduce((n,r)=>(this.test(r)||n.push(r),n),[])}}const FM=(t,e,n)=>{if(uu(e)||!wt(e))return t;let r=Mn;const i=n.collation;return wt(i)&&Ki(i.locale)&&(r=$M(i)),t.transform(s=>{const o=Object.keys(e);for(const a of o.reverse()){const l=DM(s,h=>lu(h,a),n.hashFunction),f=Array.from(l.keys()).sort(r);e[a]===-1&&f.reverse(),s=[],f.reduce((h,m)=>Gl(h,l.get(m)),s)}return s})},LM={1:"base",2:"accent",3:"variant"};function $M(t){const e={sensitivity:LM[t.strength||3],caseFirst:t.caseFirst==="off"?"false":t.caseFirst||"false",numeric:t.numericOrdering||!1,ignorePunctuation:t.alternate==="shifted"};(t.caseLevel||!1)===!0&&(e.sensitivity==="base"&&(e.sensitivity="case"),e.sensitivity==="accent"&&(e.sensitivity="variant"));const n=new Intl.Collator(t.locale,e);return(r,i)=>{if(!Ki(r)||!Ki(i))return Mn(r,i);const s=n.compare(r,i);return s<0?-1:s>0?1:0}}function wn(t){const e=(n,r,i)=>{const s={unwrapArray:!0},o=Math.max(1,n.split(".").length-1);return a=>{const l=lu(a,n,s);return t(l,r,Object.assign(Object.assign({},i),{depth:o}))}};return e.op="query",e}function qE(t,e,n){if(Wi(t,e)||cn(t)&&cn(e))return!0;if(t instanceof Array){const r=Wi.bind(null,e);return t.some(r)||VE(t,n==null?void 0:n.depth).some(r)}return!1}function jM(t,e,n){return!qE(t,e,n)}function HE(t,e,n){return cn(t)?e.some(r=>r===null):Bg([Yl(t),e],n==null?void 0:n.hashFunction).length>0}function UM(t,e,n){return!HE(t,e,n)}function zM(t,e,n){return Eh(t,e,(r,i)=>Mn(r,i)<0)}function VM(t,e,n){return Eh(t,e,(r,i)=>Mn(r,i)<=0)}function KM(t,e,n){return Eh(t,e,(r,i)=>Mn(r,i)>0)}function WM(t,e,n){return Eh(t,e,(r,i)=>Mn(r,i)>=0)}function qM(t,e,n){return Yl(t).some(r=>e.length===2&&r%e[0]===e[1])}function HM(t,e,n){const r=Yl(t),i=s=>Ki(s)&&bM(e.exec(s),n==null?void 0:n.useStrictMode);return r.some(i)||VE(r,1).some(i)}function QM(t,e,n){return(e===!1||e===0)&&t===void 0||(e===!0||e===1)&&t!==void 0}function YM(t,e,n){if(!Lt(t)||!Lt(e)||!t.length||!e.length)return!1;let r=!0;for(const i of e){if(!r)break;wt(i)&&qa(Object.keys(i),"$elemMatch")?r=QE(t,i.$elemMatch,n):i instanceof RegExp?r=t.some(s=>typeof s=="string"&&i.test(s)):r=t.some(s=>Wi(i,s))}return r}function GM(t,e,n){return Array.isArray(t)&&t.length===e}function JM(t){return Wo(t)&&["$and","$or","$nor"].indexOf(t)===-1}function QE(t,e,n){if(Lt(t)&&!uu(t)){let r=o=>o,i=e;Object.keys(e).every(JM)&&(i={temp:e},r=o=>({temp:o}));const s=new qs(i,n);for(let o=0,a=t.length;o<a;o++)if(s.test(r(t[o])))return!0}return!1}const Y_=t=>t===null,G_=t=>Qn(t)&&t>=hM&&t<=dM&&t.toString().indexOf(".")===-1,J_=t=>Qn(t)&&t>=mM&&t<=pM&&t.toString().indexOf(".")===-1,XM={array:Lt,bool:um,boolean:um,date:Ty,decimal:Qn,double:Qn,int:G_,long:J_,number:Qn,null:Y_,object:wt,regex:Cf,regexp:Cf,string:Ki,undefined:cn,function:t=>{throw new Error("unsupported type key `function`.")},1:Qn,2:Ki,3:wt,4:Lt,6:cn,8:um,9:Ty,10:Y_,11:Cf,16:G_,18:J_,19:Qn};function X_(t,e,n){const r=XM[e];return r?r(t):!1}function ZM(t,e,n){return Array.isArray(e)?e.findIndex(r=>X_(t,r))>=0:X_(t,e)}function Eh(t,e,n){return Yl(t).some(r=>Al(r)===Al(e)&&n(r,e))}const Z_=(t,e)=>{const n={};return t.split("").forEach((r,i)=>n[r]=e*(i+1)),n};Object.assign(Object.assign(Object.assign({},Z_("ABCDEFGHIKLM",1)),Z_("NOPQRSTUVWXY",-1)),{Z:0});const eb={undefined:null,null:null,NaN:NaN,Infinity:new Error,"-Infinity":new Error};function or(t,e=eb){const n=Object.assign({},eb,e),r=new Set(Object.keys(n));return(i,s,o)=>{const a=Xr(i,s,null,o);if(r.has(`${a}`)){const l=n[`${a}`];if(l instanceof Error)throw new Error(`cannot apply $${t.name} to -inf, value must in (-inf,inf)`);return l}return t(a)}}or(Math.acos,{Infinity:1/0,0:new Error});or(Math.acosh,{Infinity:1/0,0:new Error});or(Math.asin);or(Math.asinh,{Infinity:1/0,"-Infinity":-1/0});or(Math.atan);or(Math.atanh,{1:1/0,"-1":-1/0});or(Math.cos);or(Math.cosh,{"-Infinity":1/0,Infinity:1/0});const e2=Math.PI/180;or(t=>t*e2,{Infinity:1/0,"-Infinity":1/0});const t2=180/Math.PI;or(t=>t*t2,{Infinity:1/0,"-Infinity":-1/0});or(Math.sin);or(Math.sinh,{"-Infinity":-1/0,Infinity:1/0});or(Math.tan);const n2=(t,e,n)=>{if(uu(e))return t;let r=Object.keys(e),i=!1;YE(e,n);const s=n.idKey;if(qa(r,s)){const a=e[s];(a===0||a===!1)&&(r=r.filter(zE.bind(null,[s])),i=r.length==0)}else r.push(s);const o=Eo.init(n);return t.map(a=>jy(a,e,o.update(a),r,i))};function jy(t,e,n,r,i){let s={},o=!1,a=!1;const l=[];i&&l.push(n.idKey);for(const f of r){let h;const m=e[f];if(f!==n.idKey&&qa([0,!1],m)&&(a=!0),f===n.idKey&&uu(m))h=t[f];else if(Ki(m))h=Xr(t,m,f,n);else if(!qa([1,!0],m))if(m instanceof Array)h=m.map(w=>{const I=Xr(t,w,null,n);return cn(I)?null:I});else if(wt(m)){const w=m,I=Object.keys(m),E=I.length==1?I[0]:"",$=Oo(Ye.PROJECTION,E,n);if($)E==="$slice"?Yl(w[E]).every(Qn)?(h=$(t,w[E],f,n),o=!0):h=Xr(t,w,f,n):h=$(t,w[E],f,n);else if(Wo(E))h=Xr(t,w[E],E,n);else if(Zn(t,f)){YE(w,n);let S=t[f];S instanceof Array?h=S.map(_=>jy(_,w,n,I,!1)):(S=wt(S)?S:t,h=jy(S,w,n,I,!1))}else h=Xr(t,m,null,n)}else{l.push(f);continue}const y=Af(t,f,{preserveMissing:!0});y!==void 0&&My(s,y,{flatten:!0}),zE([0,1,!1,!0],m)&&(h===void 0?K_(s,f,{descendArray:!0}):CM(s,f,h))}if(Fy(s),(o||a||i)&&(s=Gl({},t,s),l.length>0))for(const f of l)K_(s,f,{descendArray:!0});return s}function YE(t,e){const n=[!1,!1];for(const[r,i]of Object.entries(t)){if(r===(e==null?void 0:e.idKey))return;i===0||i===!1?n[0]=!0:(i===1||i===!0)&&(n[1]=!0),Yt(!(n[0]&&n[1]),"Projection cannot have a mix of inclusion and exclusion.")}}const r2=(t,e,n)=>{Yt(Lt(e),"Invalid expression: $and expects value to be an Array.");const r=e.map(i=>new qs(i,n));return i=>r.every(s=>s.test(i))},GE=(t,e,n)=>{Yt(Lt(e),"Invalid expression. $or expects value to be an Array");const r=e.map(i=>new qs(i,n));return i=>r.some(s=>s.test(i))},i2=(t,e,n)=>{Yt(Lt(e),"Invalid expression. $nor expects value to be an array.");const r=GE("$or",e,n);return i=>!r(i)},s2=(t,e,n)=>{const r={};r[t]=WE(e);const i=new qs(r,n);return s=>!i.test(s)},o2=wn(qE),a2=wn(KM),u2=wn(WM),l2=wn(HE),c2=wn(zM),f2=wn(VM),d2=wn(jM),h2=wn(UM),p2=wn(qM),m2=wn(HM);wn(YM);const y2=wn(QE),v2=wn(GM),g2=wn(QM),w2=wn(ZM);var tb=!1;function _2(t){return tb||(W_(Ye.PIPELINE,{$sort:FM,$project:n2}),W_(Ye.QUERY,{$and:r2,$eq:o2,$elemMatch:y2,$exists:g2,$gt:a2,$gte:u2,$in:l2,$lt:c2,$lte:f2,$ne:d2,$nin:h2,$mod:p2,$nor:i2,$not:s2,$or:GE,$regex:m2,$size:v2,$type:w2}),tb=!0),new qs(t)}function Rl(t,e){var n=Fn(t.primaryKey);e=$e(e);var r=Pn(e);if(typeof r.skip!="number"&&(r.skip=0),r.selector?(r.selector=r.selector,Object.entries(r.selector).forEach(([f,h])=>{(typeof h!="object"||h===null)&&(r.selector[f]={$eq:h})})):r.selector={},r.index){var i=Ua(r.index);i.includes(n)||i.push(n),r.index=i}if(r.sort){var l=r.sort.find(f=>PP(f)===n);l||(r.sort=r.sort.slice(0),r.sort.push({[n]:"asc"}))}else if(r.index)r.sort=r.index.map(f=>({[f]:"asc"}));else{if(t.indexes){var s=new Set;Object.entries(r.selector).forEach(([f,h])=>{var m=!1;typeof h=="object"&&h!==null?m=!!Object.keys(h).find(y=>Tg.has(y)):m=!0,m&&s.add(f)});var o=-1,a;t.indexes.forEach(f=>{var h=pg(f)?f:[f],m=h.findIndex(y=>!s.has(y));m>0&&m>o&&(o=m,a=h)}),a&&(r.sort=a.map(f=>({[f]:"asc"})))}r.sort||(r.sort=[{[n]:"asc"}])}return r}function Lg(t,e){if(!e.sort)throw le("SNH",{query:e});var n=[];e.sort.forEach(i=>{var s=Object.keys(i)[0],o=Object.values(i)[0];n.push({key:s,direction:o,getValueFn:XI(s)})});var r=(i,s)=>{for(var o=0;o<n.length;++o){var a=n[o],l=a.getValueFn(i),f=a.getValueFn(s);if(l!==f){var h=a.direction==="asc"?Mn(l,f):Mn(f,l);return h}}};return r}function Oh(t,e){if(!e.sort)throw le("SNH",{query:e});var n=_2(e.selector),r=i=>n.test(i);return r}function b2(t,e){return!e.sort||e.sort.length===0?[t]:e.sort.map(n=>Object.keys(n)[0])}var S2=new WeakMap;function I2(t){return Mr(S2,t,()=>{var e=t.collection,n=Rl(e.storageInstance.schema,Pn(t.mangoQuery)),r=e.schema.primaryPath,i=Lg(e.schema.jsonSchema,n),s=(f,h)=>{var m={docA:f,docB:h,rxQuery:t};return i(m.docA,m.docB)},o=Oh(e.schema.jsonSchema,n),a=f=>{var h={doc:f,rxQuery:t};return o(h.doc)},l={primaryKey:t.collection.schema.primaryPath,skip:n.skip,limit:n.limit,sortFields:b2(r,n),sortComparator:s,queryMatcher:a};return l})}function E2(t,e){if(!t.collection.database.eventReduce)return{runFullQueryAgain:!0};var n=I2(t),r=ye(t._result).docsData.slice(0),i=ye(t._result).docsDataMap,s=!1,o=e.map(l=>lT(l)).filter(JI),a=o.find(l=>{var f={queryParams:n,changeEvent:l,previousResults:r,keyDocumentMap:i},h=iM(f);if(h==="runFullQueryAgain")return!0;if(h!=="doNothing")return s=!0,sM(h,n,l,r,i),!1});return a?{runFullQueryAgain:!0}:{runFullQueryAgain:!1,changed:s,newResults:r}}var O2=function(){function t(){this._map=new Map}var e=t.prototype;return e.getByQuery=function(r){var i=r.toString();return Mr(this._map,i,()=>r)},t}();function k2(){return new O2}function nb(t,e){e.uncached=!0;var n=e.toString();t._map.delete(n)}function D2(t){return t.refCount$.observers.length}var x2=100,C2=30*1e3,A2=(t,e)=>(n,r)=>{if(!(r._map.size<t)){var i=Ft()-e,s=[],o=Array.from(r._map.values());for(var a of o)if(!(D2(a)>0)){if(a._lastEnsureEqual===0&&a._creationTime<i){nb(r,a);continue}s.push(a)}var l=s.length-t;if(!(l<=0)){var f=s.sort((m,y)=>m._lastEnsureEqual-y._lastEnsureEqual),h=f.slice(0,l);h.forEach(m=>nb(r,m))}}},JE=A2(x2,C2),cm=new WeakSet;function P2(t){cm.has(t)||(cm.add(t),qP().then(()=>QP(200)).then(()=>{t.destroyed||t.cacheReplacementPolicy(t,t._queryCache),cm.delete(t)}))}var XE=function(){function t(n,r,i){this.cacheItemByDocId=new Map,this.registry=typeof FinalizationRegistry=="function"?new FinalizationRegistry(s=>{var o=s.docId,a=this.cacheItemByDocId.get(o);a&&(a.byRev.delete(s.revisionHeight),a.byRev.size===0&&this.cacheItemByDocId.delete(o))}):void 0,this.registerIdleTasks=[],this.primaryPath=n,this.changes$=r,this.documentCreator=i,r.subscribe(s=>{var o=s.documentId,a=this.cacheItemByDocId.get(o);if(a){var l=Dg(s);a.last=l}})}var e=t.prototype;return e.getLatestDocumentData=function(r){var i=Mo(this.cacheItemByDocId,r);return i.last},e.getLatestDocumentDataIfExists=function(r){var i=this.cacheItemByDocId.get(r);if(i)return i.last},Vs(t,[{key:"getCachedRxDocument",get:function(){var n=R2(this);return xs(this,"getCachedRxDocument",n)}}]),t}();function R2(t){var e=t.primaryPath,n=t.cacheItemByDocId,r=t.registry,i=it.deepFreezeWhenDevMode,s=t.documentCreator,o=a=>{var l=a[e],f=x_(a._rev),h=Mr(n,l,()=>T2(a)),m=h.byRev,y=m.get(f),w=y?y.deref():void 0;return w||(a=i(a),w=s(a),m.set(f,N2(w)),r&&(t.registerIdleTasks.push(w),t.registerIdlePromise||(t.registerIdlePromise=vg().then(()=>{t.registerIdlePromise=void 0;var I=t.registerIdleTasks;I.length!==0&&(t.registerIdleTasks=[],I.forEach(E=>{r.register(E,{docId:E.primary,revisionHeight:x_(E.revision)})}))})))),w};return o}function ZE(t,e){for(var n=t.getCachedRxDocument,r=[],i=0;i<e.length;i++){var s=e[i],o=n(s);r.push(o)}return r}function T2(t){return{byRev:new Map,last:t}}var M2=typeof WeakRef=="function",N2=M2?B2:F2;function B2(t){return new WeakRef(t)}function F2(t){return{deref(){return t}}}var rb=function(){function t(e,n,r){this.time=Ft(),this.collection=e,this.count=r,this.documents=ZE(this.collection._docCache,n)}return Vs(t,[{key:"docsData",get:function(){return xs(this,"docsData",this.documents.map(e=>e._data))}},{key:"docsDataMap",get:function(){var e=new Map;return this.documents.forEach(n=>{e.set(n.primary,n._data)}),xs(this,"docsDataMap",e)}},{key:"docsMap",get:function(){for(var e=new Map,n=this.documents,r=0;r<n.length;r++){var i=n[r];e.set(i.primary,i)}return xs(this,"docsMap",e)}}]),t}(),L2=0,$2=function(){return++L2},eO=function(){function t(n,r,i,s={}){this.id=$2(),this._execOverDatabaseCount=0,this._creationTime=Ft(),this._lastEnsureEqual=0,this.uncached=!1,this.refCount$=new Jr(null),this._result=null,this._latestChangeEvent=-1,this._lastExecStart=0,this._lastExecEnd=0,this._ensureEqualQueue=Jn,this.op=n,this.mangoQuery=r,this.collection=i,this.other=s,r||(this.mangoQuery=tl()),this.isFindOneByIdQuery=z2(this.collection.schema.primaryPath,r)}var e=t.prototype;return e._setResultData=function(r){if(typeof r=="number"){this._result=new rb(this.collection,[],r);return}else r instanceof Map&&(r=Array.from(r.values()));var i=new rb(this.collection,r,r.length);this._result=i},e._execOverDatabase=async function(){if(this._execOverDatabaseCount=this._execOverDatabaseCount+1,this._lastExecStart=Ft(),this.op==="count"){var r=this.getPreparedQuery(),i=await this.collection.storageInstance.count(r);if(i.mode==="slow"&&!this.collection.database.allowSlowCount)throw le("QU14",{collection:this.collection,queryObj:this.mangoQuery});return i.count}if(this.op==="findByIds"){var s=ye(this.mangoQuery.selector)[this.collection.schema.primaryPath].$in,o=new Map,a=[];if(s.forEach(h=>{var m=this.collection._docCache.getLatestDocumentDataIfExists(h);if(m){if(!m._deleted){var y=this.collection._docCache.getCachedRxDocument(m);o.set(h,y)}}else a.push(h)}),a.length>0){var l=await this.collection.storageInstance.findDocumentsById(a,!1);l.forEach(h=>{var m=this.collection._docCache.getCachedRxDocument(h);o.set(m.primary,m)})}return o}var f=nO(this);return f.then(h=>(this._lastExecEnd=Ft(),h))},e.exec=function(r){if(r&&this.op!=="findOne")throw le("QU9",{collection:this.collection.name,query:this.mangoQuery,op:this.op});return ib(this).then(()=>As(this.$)).then(i=>{if(!i&&r)throw le("QU10",{collection:this.collection.name,query:this.mangoQuery,op:this.op});return i})},e.toString=function(){var r=fd({op:this.op,query:this.mangoQuery,other:this.other},!0),i=JSON.stringify(r);return this.toString=()=>i,i},e.getPreparedQuery=function(){var r={rxQuery:this,mangoQuery:Rl(this.collection.schema.jsonSchema,this.mangoQuery)};r.mangoQuery.selector._deleted={$eq:!1},r.mangoQuery.index&&r.mangoQuery.index.unshift("_deleted"),Nr("prePrepareQuery",r);var i=Jl(this.collection.schema.jsonSchema,r.mangoQuery);return this.getPreparedQuery=()=>i,i},e.doesDocumentDataMatch=function(r){return r._deleted?!1:this.queryMatcher(r)},e.remove=function(){return this.exec().then(r=>Array.isArray(r)?Promise.all(r.map(i=>i.remove())):r.remove())},e.update=function(r){throw pt("update")},e.where=function(r){throw pt("query-builder")},e.sort=function(r){throw pt("query-builder")},e.skip=function(r){throw pt("query-builder")},e.limit=function(r){throw pt("query-builder")},Vs(t,[{key:"$",get:function(){if(!this._$){var n=this.collection.$.pipe(lt(r=>!r.isLocal),Hl(null),Br(()=>ib(this)),Mt(()=>this._result),Pi(Ai),Fo((r,i)=>!!(r&&r.time===ye(i).time)),lt(r=>!!r),Mt(r=>{var i=ye(r);return this.op==="count"?i.count:this.op==="findOne"?i.documents.length===0?null:i.documents[0]:this.op==="findByIds"?i.docsMap:i.documents.slice(0)}));this._$=gT(n,this.refCount$.pipe(lt(()=>!1)))}return this._$}},{key:"$$",get:function(){var n=this.collection.database.getReactivityFactory();return n.fromObservable(this.$,void 0)}},{key:"queryMatcher",get:function(){var n=this.collection.schema.jsonSchema,r=Rl(this.collection.schema.jsonSchema,this.mangoQuery);return xs(this,"queryMatcher",Oh(n,r))}},{key:"asRxQuery",get:function(){return this}}]),t}();function tl(){return{selector:{}}}function j2(t){return t.collection._queryCache.getByQuery(t)}function ra(t,e,n,r){Nr("preCreateRxQuery",{op:t,queryObj:e,collection:n,other:r});var i=new eO(t,e,n,r);return i=j2(i),P2(n),i}function tO(t){var e=t.asRxQuery.collection._changeEventBuffer.counter;return t._latestChangeEvent>=e}function ib(t){return t.collection.database.destroyed||tO(t)?Jn:(t._ensureEqualQueue=t._ensureEqualQueue.then(()=>U2(t)),t._ensureEqualQueue)}function U2(t){if(t._lastEnsureEqual=Ft(),t.collection.database.destroyed||tO(t))return Jn;var e=!1,n=!1;if(t._latestChangeEvent===-1&&(n=!0),!n){var r=t.asRxQuery.collection._changeEventBuffer.getFrom(t._latestChangeEvent+1);if(r===null)n=!0;else{t._latestChangeEvent=t.asRxQuery.collection._changeEventBuffer.counter;var i=t.asRxQuery.collection._changeEventBuffer.reduceByLastOfDoc(r);if(t.op==="count"){var s=ye(t._result).count,o=s;i.forEach(l=>{var f=l.previousDocumentData&&t.doesDocumentDataMatch(l.previousDocumentData),h=t.doesDocumentDataMatch(l.documentData);!f&&h&&o++,f&&!h&&o--}),o!==s&&(e=!0,t._setResultData(o))}else{var a=E2(t,i);a.runFullQueryAgain?n=!0:a.changed&&(e=!0,t._setResultData(a.newResults))}}}return n?t._execOverDatabase().then(l=>(t._latestChangeEvent=t.collection._changeEventBuffer.counter,typeof l=="number"?((!t._result||l!==t._result.count)&&(e=!0,t._setResultData(l)),e):((!t._result||!TP(t.collection.schema.primaryPath,l,t._result.docsData))&&(e=!0,t._setResultData(l)),e))):Promise.resolve(e)}function Jl(t,e){if(!e.sort)throw le("SNH",{query:e});var n=oM(t,e);return{query:e,queryPlan:n}}async function nO(t){var e=[],n=t.collection;if(t.isFindOneByIdQuery)if(Array.isArray(t.isFindOneByIdQuery)){var r=t.isFindOneByIdQuery;if(r=r.filter(h=>{var m=t.collection._docCache.getLatestDocumentDataIfExists(h);return m?(m._deleted||e.push(m),!1):!0}),r.length>0){var i=await n.storageInstance.findDocumentsById(r,!1);za(e,i)}}else{var s=t.isFindOneByIdQuery,o=t.collection._docCache.getLatestDocumentDataIfExists(s);if(!o){var a=await n.storageInstance.findDocumentsById([s],!1);a[0]&&(o=a[0])}o&&!o._deleted&&e.push(o)}else{var l=t.getPreparedQuery(),f=await n.storageInstance.query(l);e=f.documents}return e}function z2(t,e){if(!e.skip&&e.selector&&Object.keys(e.selector).length===1&&e.selector[t]){var n=e.selector[t];if(typeof n=="string")return n;if(Object.keys(n).length===1&&typeof n.$eq=="string"||Object.keys(n).length===1&&Array.isArray(n.$eq)&&!n.$eq.find(r=>typeof r!="string"))return n.$eq}return!1}var V2="_rxdb_internal";async function Xl(t,e){var n=await t.findDocumentsById([e],!1),r=n[0];if(r)return r}async function Tl(t,e,n){var r=await t.bulkWrite([e],n);if(r.error.length>0){var i=r.error[0];throw i}else{var s=r.success[0];return s}}function K2(t,e){var n=Xl(t,e),r=t.changeStream().pipe(Mt(i=>i.events.find(s=>s.documentId===e)),lt(i=>!!i),Mt(i=>Promise.resolve(ye(i).documentData)),Hl(n),Cl(i=>i),lt(i=>!!i));return r}function Ml(t){return Object.assign({},...t)}function rO(t,e,n){var r=e.documentData,i=e.previousDocumentData,s={documentId:e.documentId,collectionName:n?n.name:void 0,isLocal:t,operation:e.operation,documentData:it.deepFreezeWhenDevMode(r),previousDocumentData:it.deepFreezeWhenDevMode(i)};return s}function yd(t,e,n,r){if(r)throw r.status===409?le("CONFLICT",{collection:t.name,id:e,writeError:r,data:n}):r.status===422?le("VD2",{collection:t.name,id:e,writeError:r,data:n}):r}function iO(t,e,n,r,i,s,o){for(var a=!!t.schema.attachments,l=[],f=[],h=[],m=su(10),y={id:m,events:[],checkpoint:null,context:i,startTime:Ft(),endTime:0},w=y.events,I=[],E=[],$=[],S=n.size>0,_,O=r.length,z=function(){var Q=r[W],H=Q.document,X=Q.previous,U=H[e],ee=H._deleted,ce=X&&X._deleted,de=void 0;S&&(de=n.get(U));var Pe;if(de){var Te=de._rev;if(!X||X&&Te!==X._rev){var Dt={isError:!0,status:409,documentId:U,writeRow:Q,documentInDb:de};return h.push(Dt),1}var G=a?fm(Q):Q;a&&(ee?X&&Object.keys(X._attachments).forEach(ft=>{E.push({documentId:U,attachmentId:ft,digest:ye(X)._attachments[ft].digest})}):(Object.entries(H._attachments).find(([ft,Ct])=>{var Un=X?X._attachments[ft]:void 0;return!Un&&!Ct.data&&(Pe={documentId:U,documentInDb:de,isError:!0,status:510,writeRow:Q,attachmentId:ft}),!0}),Pe||Object.entries(H._attachments).forEach(([ft,Ct])=>{var Un=X?X._attachments[ft]:void 0;if(!Un)I.push({documentId:U,attachmentId:ft,attachmentData:Ct,digest:Ct.digest});else{var tn=G.document._attachments[ft].digest;Ct.data&&Un.digest!==tn&&$.push({documentId:U,attachmentId:ft,attachmentData:Ct,digest:Ct.digest})}}))),Pe?h.push(Pe):(a?(f.push(fm(G)),o&&o(H)):(f.push(G),o&&o(H)),_=G);var oe=null,ue=null,Re=null;if(ce&&!ee)Re="INSERT",oe=a?gs(H):H;else if(X&&!ce&&!ee)Re="UPDATE",oe=a?gs(H):H,ue=X;else if(ee)Re="DELETE",oe=ye(H),ue=X;else throw le("SNH",{args:{writeRow:Q}});var xt={documentId:U,documentData:oe,previousDocumentData:ue,operation:Re};w.push(xt)}else{var ot=!!ee;if(a&&Object.entries(H._attachments).forEach(([ft,Ct])=>{Ct.data?I.push({documentId:U,attachmentId:ft,attachmentData:Ct,digest:Ct.digest}):(Pe={documentId:U,isError:!0,status:510,writeRow:Q,attachmentId:ft},h.push(Pe))}),Pe||(a?(l.push(fm(Q)),s&&s(H)):(l.push(Q),s&&s(H)),_=Q),!ot){var ct={documentId:U,operation:"INSERT",documentData:a?gs(H):H,previousDocumentData:a&&X?gs(X):X};w.push(ct)}}},W=0;W<O;W++)z();return{bulkInsertDocs:l,bulkUpdateDocs:f,newestRow:_,errors:h,eventBulk:y,attachmentsAdd:I,attachmentsRemove:E,attachmentsUpdate:$}}function fm(t){return{previous:t.previous,document:gs(t.document)}}function W2(t){return atob(t).length}function q2(t){var e=t.data;if(!e)return t;var n={length:W2(e),digest:t.digest,type:t.type};return n}function gs(t){if(!t._attachments||Object.keys(t._attachments).length===0)return t;var e=$e(t);return e._attachments={},Object.entries(t._attachments).forEach(([n,r])=>{e._attachments[n]=q2(r)}),e}function $g(t){var e=$e(t);return e._meta=$e(t._meta),e}function jg(t,e,n){it.deepFreezeWhenDevMode(n);var r=Fn(n.primaryKey);function i(o){var a=$e(o.document);if(a._meta=$e(a._meta),it.isDevMode()){a=oE(r,n,a);try{typeof structuredClone=="function"?structuredClone(o):JSON.parse(JSON.stringify(o))}catch{throw le("DOC24",{collection:e.collectionName,document:o.document})}o.previous,o.previous&&Object.keys(o.previous._meta).forEach(l=>{if(!Object.prototype.hasOwnProperty.call(o.document._meta,l))throw le("SNH",{dataBefore:o.previous,dataAfter:o.document})})}return a._meta.lwt=Ft(),a._rev=Ui(t.token,o.previous),{document:a,previous:o.previous}}var s={originalStorageInstance:e,schema:e.schema,internals:e.internals,collectionName:e.collectionName,databaseName:e.databaseName,options:e.options,bulkWrite(o,a){var l=o.map(f=>i(f));return t.lockedRun(()=>e.bulkWrite(l,a)).then(f=>{var h={error:[],success:f.success.slice(0)},m=f.error.filter(w=>w.status===409&&!w.writeRow.previous&&!w.writeRow.document._deleted&&ye(w.documentInDb)._deleted?!0:(h.error.push(w),!1));if(m.length>0){var y=m.map(w=>({previous:w.documentInDb,document:Object.assign({},w.writeRow.document,{_rev:Ui(t.token,w.documentInDb)})}));return t.lockedRun(()=>e.bulkWrite(y,a)).then(w=>(za(h.error,w.error),za(h.success,w.success),h))}return f})},query(o){return t.lockedRun(()=>e.query(o))},count(o){return t.lockedRun(()=>e.count(o))},findDocumentsById(o,a){return t.lockedRun(()=>e.findDocumentsById(o,a))},getAttachmentData(o,a,l){return t.lockedRun(()=>e.getAttachmentData(o,a,l))},getChangedDocumentsSince:e.getChangedDocumentsSince?(o,a)=>t.lockedRun(()=>e.getChangedDocumentsSince(ye(o),a)):void 0,cleanup(o){return t.lockedRun(()=>e.cleanup(o))},remove(){return t.storageInstances.delete(s),t.lockedRun(()=>e.remove())},close(){return t.storageInstances.delete(s),t.lockedRun(()=>e.close())},changeStream(){return e.changeStream()},conflictResultionTasks(){return e.conflictResultionTasks()},resolveConflictResultionTask(o){if(o.output.isEqual)return e.resolveConflictResultionTask(o);var a=Object.assign({},o.output.documentData,{_meta:Ks(),_rev:Rn(),_attachments:{}}),l=$e(a);return delete l._meta,delete l._rev,delete l._attachments,e.resolveConflictResultionTask({id:o.id,output:{isEqual:!1,documentData:l}})}};return t.storageInstances.add(s),s}function sO(t){if(t.schema.keyCompression)throw le("UT5",{args:{params:t}});if(vd(t.schema))throw le("UT6",{args:{params:t}});if(t.schema.attachments&&t.schema.attachments.compression)throw le("UT7",{args:{params:t}})}function vd(t){return!!(t.encrypted&&t.encrypted.length>0||t.attachments&&t.attachments.encrypted)}function H2(t,e,n){var r=Fn(t.schema.primaryKey),i=n?n.lwt:mg,s=n?n.id:"";return Rl(t.schema,{selector:{$or:[{"_meta.lwt":{$gt:i}},{"_meta.lwt":{$eq:i},[r]:{$gt:n?s:""}}],"_meta.lwt":{$gte:i}},sort:[{"_meta.lwt":"asc"},{[r]:"asc"}],skip:0,limit:e})}async function oO(t,e,n){if(t.getChangedDocumentsSince)return t.getChangedDocumentsSince(e,n);var r=Fn(t.schema.primaryKey),i=Jl(t.schema,H2(t,e,n)),s=await t.query(i),o=s.documents,a=xP(o);return{documents:o,checkpoint:a?{id:a[r],lwt:a._meta.lwt}:n||{id:"",lwt:0}}}var aO=function(){function t(n,r,i,s){this.queueByDocId=new Map,this.isRunning=!1,this.storageInstance=n,this.primaryPath=r,this.preWrite=i,this.postWrite=s}var e=t.prototype;return e.addWrite=function(r,i){var s=r[this.primaryPath],o=Mr(this.queueByDocId,s,()=>[]),a=new Promise((l,f)=>{var h={lastKnownDocumentState:r,modifier:i,resolve:l,reject:f};ye(o).push(h),this.triggerRun()});return a},e.triggerRun=async function(){if(!(this.isRunning===!0||this.queueByDocId.size===0)){this.isRunning=!0;var r=[],i=this.queueByDocId;this.queueByDocId=new Map,await Promise.all(Array.from(i.entries()).map(async([o,a])=>{var l=Q2(a.map(m=>m.lastKnownDocumentState)),f=l;for(var h of a)try{f=await h.modifier(Pn(f))}catch(m){h.reject(m),h.reject=()=>{},h.resolve=()=>{}}try{await this.preWrite(f,l)}catch(m){a.forEach(y=>y.reject(m));return}r.push({previous:l,document:f})}));var s=r.length>0?await this.storageInstance.bulkWrite(r,"incremental-write"):{error:[],success:[]};return await Promise.all(s.success.map(o=>{var a=o[this.primaryPath];this.postWrite(o);var l=Mo(i,a);l.forEach(f=>f.resolve(o))})),s.error.forEach(o=>{var a=o.documentId,l=Mo(i,a),f=_h(o);if(f){var h=Mr(this.queueByDocId,a,()=>[]);l.reverse().forEach(y=>{y.lastKnownDocumentState=ye(f.documentInDb),ye(h).unshift(y)})}else{var m=sR(o);l.forEach(y=>y.reject(m))}}),this.isRunning=!1,this.triggerRun()}},t}();function sb(t){var e=async n=>{var r=RP(n);r._deleted=n._deleted;var i=await t(r),s=Object.assign({},i,{_meta:n._meta,_attachments:n._attachments,_rev:n._rev,_deleted:typeof i._deleted<"u"?i._deleted:n._deleted});return typeof s._deleted>"u"&&(s._deleted=!1),s};return e}function Q2(t){var e=t[0],n=Va(e._rev).height;return t.forEach(r=>{var i=Va(r._rev).height;i>n&&(e=r,n=i)}),e}var kh={get primaryPath(){var t=this;if(t.isInstanceOfRxDocument)return t.collection.schema.primaryPath},get primary(){var t=this;if(t.isInstanceOfRxDocument)return t._data[t.primaryPath]},get revision(){var t=this;if(t.isInstanceOfRxDocument)return t._data._rev},get deleted$(){var t=this;if(t.isInstanceOfRxDocument)return t.$.pipe(Mt(e=>e._data._deleted))},get deleted$$(){var t=this,e=t.collection.database.getReactivityFactory();return e.fromObservable(t.deleted$,t.getLatest().deleted)},get deleted(){var t=this;if(t.isInstanceOfRxDocument)return t._data._deleted},getLatest(){var t=this.collection._docCache.getLatestDocumentData(this.primary);return this.collection._docCache.getCachedRxDocument(t)},get $(){var t=this;return t.collection.$.pipe(lt(e=>!e.isLocal),lt(e=>e.documentId===this.primary),Mt(e=>Dg(e)),Hl(t.collection._docCache.getLatestDocumentData(this.primary)),Fo((e,n)=>e._rev===n._rev),Mt(e=>this.collection._docCache.getCachedRxDocument(e)),Pi(Ai))},get $$(){var t=this,e=t.collection.database.getReactivityFactory();return e.fromObservable(t.$,t.getLatest()._data)},get$(t){if(it.isDevMode()){if(t.includes(".item."))throw le("DOC1",{path:t});if(t===this.primaryPath)throw le("DOC2");if(this.collection.schema.finalFields.includes(t))throw le("DOC3",{path:t});var e=zi(this.collection.schema.jsonSchema,t);if(!e)throw le("DOC4",{path:t})}return this.$.pipe(Mt(n=>Ts(n,t)),Fo())},get$$(t){var e=this.get$(t),n=this.collection.database.getReactivityFactory();return n.fromObservable(e,this.getLatest().get(t))},populate(t){var e=zi(this.collection.schema.jsonSchema,t),n=this.get(t);if(!n)return yg;if(!e)throw le("DOC5",{path:t});if(!e.ref)throw le("DOC6",{path:t,schemaObj:e});var r=this.collection.database.collections[e.ref];if(!r)throw le("DOC7",{ref:e.ref,path:t,schemaObj:e});return e.type==="array"?r.findByIds(n).exec().then(i=>{var s=i.values();return Array.from(s)}):r.findOne(n).exec()},get(t){return Mr(this._propertyCache,t,()=>{var e=Ts(this._data,t);if(typeof e!="object"||e===null||Array.isArray(e))return it.deepFreezeWhenDevMode(e);var n=this,r=new Proxy($e(e),{get(i,s){if(typeof s!="string")return i[s];var o=s.charAt(s.length-1);if(s.endsWith("$$")){var a=s.slice(0,-2);return n.get$$(zu(t+"."+a))}else if(o==="$"){var l=s.slice(0,-1);return n.get$(zu(t+"."+l))}else if(o==="_"){var f=s.slice(0,-1);return n.populate(zu(t+"."+f))}else return n.get(zu(t+"."+s))}});return r})},toJSON(t=!1){if(t)return it.deepFreezeWhenDevMode(this._data);var e=$e(this._data);return delete e._rev,delete e._attachments,delete e._deleted,delete e._meta,it.deepFreezeWhenDevMode(e)},toMutableJSON(t=!1){return Pn(this.toJSON(t))},update(t){throw pt("update")},incrementalUpdate(t){throw pt("update")},updateCRDT(t){throw pt("crdt")},putAttachment(){throw pt("attachments")},getAttachment(){throw pt("attachments")},allAttachments(){throw pt("attachments")},get allAttachments$(){throw pt("attachments")},async modify(t,e){var n=this._data,r=await sb(t)(n);return this._saveData(r,n)},incrementalModify(t,e){return this.collection.incrementalWriteQueue.addWrite(this._data,sb(t)).then(n=>this.collection._docCache.getCachedRxDocument(n))},patch(t){var e=this._data,n=Pn(e);return Object.entries(t).forEach(([r,i])=>{n[r]=i}),this._saveData(n,e)},incrementalPatch(t){return this.incrementalModify(e=>(Object.entries(t).forEach(([n,r])=>{e[n]=r}),e))},async _saveData(t,e){if(t=$e(t),this._data._deleted)throw le("DOC11",{id:this.primary,document:this});await lO(this.collection,t,e);var n=await this.collection.storageInstance.bulkWrite([{previous:e,document:t}],"rx-document-save-data"),r=n.error[0];return yd(this.collection,this.primary,t,r),await this.collection._runHooks("post","save",t,this),this.collection._docCache.getCachedRxDocument(n.success[0])},remove(){var t=this.collection;if(this.deleted)return Promise.reject(le("DOC13",{document:this,id:this.primary}));var e=$e(this._data),n;return t._runHooks("pre","remove",e,this).then(async()=>{e._deleted=!0;var r=await t.storageInstance.bulkWrite([{previous:this._data,document:e}],"rx-document-remove"),i=r.error[0];return yd(t,this.primary,e,i),r.success[0]}).then(r=>(n=r,this.collection._runHooks("post","remove",e,this))).then(()=>this.collection._docCache.getCachedRxDocument(n))},incrementalRemove(){return this.incrementalModify(async t=>(await this.collection._runHooks("pre","remove",t,this),t._deleted=!0,t)).then(async t=>(await this.collection._runHooks("post","remove",t._data,t),t))},destroy(){throw le("DOC14")}};function uO(t=kh){var e=function(r,i){this.collection=r,this._data=i,this._propertyCache=new Map,this.isInstanceOfRxDocument=!0};return e.prototype=t,e}function Y2(t,e,n){var r=new t(e,n);return Nr("createRxDocument",r),r}function lO(t,e,n){return e._meta=Object.assign({},n._meta,e._meta),it.isDevMode()&&t.schema.validateChange(n,e),t._runHooks("pre","save",e,n)}var ko="collection",Ug="storage-token",Pf="rx-migration-status",G2="RxInternalDocument",zg=bh({version:0,title:G2,primaryKey:{key:"id",fields:["context","key"],separator:"|"},type:"object",properties:{id:{type:"string",maxLength:200},key:{type:"string"},context:{type:"string",enum:[ko,Ug,Pf,"OTHER"]},data:{type:"object",additionalProperties:!0}},indexes:[],required:["key","context","data"],additionalProperties:!1,sharding:{shards:1,mode:"collection"}});function Qa(t,e){return Ws(zg,{key:t,context:e})}async function Vg(t){var e=Jl(t.schema,{selector:{context:ko,_deleted:{$eq:!1}},sort:[{id:"asc"}],skip:0}),n=await t.query(e),r=n.documents;return r}var cO="storageToken",J2=Qa(cO,Ug);async function X2(t){var e=su(10),n=t.password?await t.hashFunction(JSON.stringify(t.password)):void 0,r={id:J2,context:Ug,key:cO,data:{rxdbVersion:t.rxdbVersion,token:e,instanceToken:t.token,passwordHash:n},_deleted:!1,_meta:Ks(),_rev:Rn(),_attachments:{}},i=await t.internalStore.bulkWrite([{document:r}],"internal-add-storage-token");if(i.success[0])return i.success[0];var s=ye(i.error[0]);if(s.isError&&_h(s)){var o=s;if(!Z2(o.documentInDb.data.rxdbVersion,t.rxdbVersion))throw le("DM5",{args:{database:t.name,databaseStateVersion:o.documentInDb.data.rxdbVersion,codeVersion:t.rxdbVersion}});if(n&&n!==o.documentInDb.data.passwordHash)throw le("DB1",{passwordHash:n,existingPasswordHash:o.documentInDb.data.passwordHash});var a=o.documentInDb;return ye(a)}throw s}function Z2(t,e){if(!t||e.includes("beta")&&e!==t)return!1;var n=t.split(".")[0],r=e.split(".")[0];return n===r}async function fO(t,e,n){if(t.schema.version!==n.version)throw le("SNH",{schema:n,version:t.schema.version,name:t.name,collection:t,args:{storageCollectionName:e}});for(var r=Uy(t.name,t.schema.jsonSchema),i=Qa(r,ko);;){var s=await Xl(t.database.internalStore,i),o=Pn(ye(s)),a=o.data.connectedStorages.find(l=>l.collectionName===e&&l.schema.version===n.version);if(a)return;o.data.connectedStorages.push({collectionName:e,schema:n});try{await Tl(t.database.internalStore,{previous:ye(s),document:o},"add-connected-storage-to-collection")}catch(l){if(!_h(l))throw l}}}function Uy(t,e){return t+"-"+e.version}function dm(t,e){return e=$e(e),e=cR(t,e),e=oE(t.primaryPath,t.jsonSchema,e),e._meta=Ks(),Object.prototype.hasOwnProperty.call(e,"_deleted")||(e._deleted=!1),Object.prototype.hasOwnProperty.call(e,"_attachments")||(e._attachments={}),Object.prototype.hasOwnProperty.call(e,"_rev")||(e._rev=Rn()),e}async function eN(t,e){e.multiInstance=t.multiInstance;var n=await t.storage.createStorageInstance(e);return n}async function dO(t,e,n,r,i,s,o){var a=await Vg(e),l=a.filter(y=>y.data.name===i),f=[];l.forEach(y=>{f.push({collectionName:y.data.name,schema:y.data.schema,isCollection:!0}),y.data.connectedStorages.forEach(w=>f.push({collectionName:w.collectionName,isCollection:!1,schema:w.schema}))});var h=new Set;if(f=f.filter(y=>{var w=y.collectionName+"||"+y.schema.version;return h.has(w)?!1:(h.add(w),!0)}),await Promise.all(f.map(async y=>{var w=await t.createStorageInstance({collectionName:y.collectionName,databaseInstanceToken:n,databaseName:r,multiInstance:!1,options:{},schema:y.schema,password:s,devMode:it.isDevMode()});await w.remove(),y.isCollection&&await No("postRemoveRxCollection",{storage:t,databaseName:r,collectionName:i})})),o){var m=l.map(y=>{var w=$g(y);return w._deleted=!0,w._meta.lwt=Ft(),w._rev=Ui(n,y),{previous:y,document:w}});await e.bulkWrite(m,"rx-database-remove-collection-all")}}var tN=function(){function t(n){this.subs=[],this.limit=100,this.counter=0,this.eventCounterMap=new WeakMap,this.buffer=[],this.collection=n,this.subs.push(this.collection.$.pipe(lt(r=>!r.isLocal)).subscribe(r=>this._handleChangeEvent(r)))}var e=t.prototype;return e._handleChangeEvent=function(r){for(this.counter++,this.buffer.push(r),this.eventCounterMap.set(r,this.counter);this.buffer.length>this.limit;)this.buffer.shift()},e.getArrayIndexByPointer=function(r){var i=this.buffer[0],s=this.eventCounterMap.get(i);if(r<s)return null;var o=r-s;return o},e.getFrom=function(r){var i=[],s=this.getArrayIndexByPointer(r);if(s===null)return null;for(;;){var o=this.buffer[s];if(s++,o)i.push(o);else return i}},e.runFrom=function(r,i){var s=this.getFrom(r);if(s===null)throw new Error("out of bounds");s.forEach(o=>i(o))},e.reduceByLastOfDoc=function(r){return r.slice(0)},e.destroy=function(){this.subs.forEach(r=>r.unsubscribe())},t}();function nN(t){return new tN(t)}var rN=new WeakMap;function iN(t){var e=t.schema.getDocumentPrototype(),n=aN(t),r=kh,i={};return[e,n,r].forEach(s=>{var o=Object.getOwnPropertyNames(s);o.forEach(a=>{var l=Object.getOwnPropertyDescriptor(s,a),f=!0;(a.startsWith("_")||a.endsWith("_")||a.startsWith("$")||a.endsWith("$"))&&(f=!1),typeof l.value=="function"?Object.defineProperty(i,a,{get(){return l.value.bind(this)},enumerable:f,configurable:!1}):(l.enumerable=f,l.configurable=!1,l.writable&&(l.writable=!1),Object.defineProperty(i,a,l))})}),i}function sN(t){return Mr(rN,t,()=>uO(iN(t)))}function oN(t,e){var n=Y2(sN(t),t,it.deepFreezeWhenDevMode(e));return t._runHooksSync("post","create",e,n),Nr("postCreateRxDocument",n),n}function aN(t){var e={};return Object.entries(t.methods).forEach(([n,r])=>{e[n]=r}),e}async function gd(t,e){var n=Ws(t.input.metaInstance.schema,{isCheckpoint:"1",itemId:e}),r=await t.input.metaInstance.findDocumentsById([n],!1),i=r[0];if(t.lastCheckpointDoc[e]=i,i)return i.checkpointData}async function wd(t,e,n){t.checkpointQueue=t.checkpointQueue.then(async()=>{var r=t.lastCheckpointDoc[e];if(n&&!t.events.canceled.getValue()&&(!r||JSON.stringify(r.checkpointData)!==JSON.stringify(n))){var i={id:"",isCheckpoint:"1",itemId:e,_deleted:!1,_attachments:{},checkpointData:n,_meta:Ks(),_rev:Rn()};for(i.id=Ws(t.input.metaInstance.schema,i);!t.events.canceled.getValue();){if(r&&(i.checkpointData=Ml([r.checkpointData,i.checkpointData])),i._meta.lwt=Ft(),i._rev=Ui(await t.checkpointKey,r),t.events.canceled.getValue())return;var s=await t.input.metaInstance.bulkWrite([{previous:r,document:i}],"replication-set-checkpoint"),o=s.success[0];if(o){t.lastCheckpointDoc[e]=o;return}else{var a=s.error[0];if(a.status!==409)throw a;r=ye(a.documentInDb),i._rev=Ui(await t.checkpointKey,r)}}}}),await t.checkpointQueue}async function uN(t){var e=await t.hashFunction([t.identifier,t.forkInstance.databaseName,t.forkInstance.collectionName].join("||"));return"rx_storage_replication_"+e}function ob(t,e,n,r,i){var s=Object.assign({},r,{_attachments:e&&r._attachments?r._attachments:{},_meta:n?r._meta:{lwt:Ft()},_rev:n?r._rev:Rn()});return s._rev||(s._rev=Ui(t,i)),s}function cs(t,e,n){var r=$e(t);return e||delete r._attachments,n||(delete r._meta,delete r._rev),r}function zy(t,e){return t.hasAttachments?e.map(n=>{var r=Pn(n.document);return r.docData=gs(r.docData),{document:r,previous:n.previous}}):e}function Vy(t){for(;;)if(t.underlyingPersistentStorage)t=t.underlyingPersistentStorage;else return t}var Rf="RxReplicationProtocolMetaData";function Ky(t,e){var n=oR(t),r={title:Rf,primaryKey:{key:"id",fields:["itemId","isCheckpoint"],separator:"|"},type:"object",version:t.version,additionalProperties:!1,properties:{id:{type:"string",minLength:1,maxLength:n+2},isCheckpoint:{type:"string",enum:["0","1"],minLength:1,maxLength:1},itemId:{type:"string",maxLength:n>4?n:4},checkpointData:{type:"object",additionalProperties:!0},docData:{type:"object",properties:t.properties},isResolvedConflict:{type:"string"}},keyCompression:t.keyCompression,required:["id","isCheckpoint","itemId"]};e&&(r.encrypted=["docData"]);var i=bh(r);return i}function hO(t,e){return t.input.metaInstance.findDocumentsById(e.map(n=>{var r=Ws(t.input.metaInstance.schema,{itemId:n,isCheckpoint:"0"});return r}),!0).then(n=>{var r={};return Object.values(n).forEach(i=>{r[i.itemId]={docData:i.docData,metaDocument:i}}),r})}async function _d(t,e,n,r){var i=e[t.primaryPath],s=n?$g(n):{id:"",isCheckpoint:"0",itemId:i,docData:e,_attachments:{},_deleted:!1,_rev:Rn(),_meta:{lwt:0}};s.docData=e,r&&(s.isResolvedConflict=r),s._meta.lwt=Ft(),s.id=Ws(t.input.metaInstance.schema,s),s._rev=Ui(await t.checkpointKey,n);var o={previous:n,document:s};return o}async function lN(t){if(t.input.initialCheckpoint&&t.input.initialCheckpoint.downstream){var e=await gd(t,"down");e||await wd(t,"down",t.input.initialCheckpoint.downstream)}var n=await t.input.hashFunction(t.input.identifier),r=t.input.replicationHandler,i=0,s=[];function o(I){t.stats.down.addNewTask=t.stats.down.addNewTask+1;var E={time:i++,task:I};s.push(E),t.streamQueue.down=t.streamQueue.down.then(()=>{for(var $=[];s.length>0;){t.events.active.down.next(!0);var S=ye(s.shift());if(!(S.time<l)){if(S.task==="RESYNC")if($.length===0){$.push(S.task);break}else break;$.push(S.task)}}if($.length!==0)return $[0]==="RESYNC"?f():h($)}).then(()=>{t.events.active.down.next(!1),!t.firstSyncDone.down.getValue()&&!t.events.canceled.getValue()&&t.firstSyncDone.down.next(!0)})}if(o("RESYNC"),!t.events.canceled.getValue()){var a=r.masterChangeStream$.pipe(Br(async I=>(await As(t.events.active.up.pipe(lt(E=>!E))),I))).subscribe(I=>{t.stats.down.masterChangeStreamEmit=t.stats.down.masterChangeStreamEmit+1,o(I)});As(t.events.canceled.pipe(lt(I=>!!I))).then(()=>a.unsubscribe())}var l=-1;async function f(){if(t.stats.down.downstreamResyncOnce=t.stats.down.downstreamResyncOnce+1,!t.events.canceled.getValue()){t.checkpointQueue=t.checkpointQueue.then(()=>gd(t,"down"));for(var I=await t.checkpointQueue,E=[];!t.events.canceled.getValue();){l=i++;var $=await r.masterChangesSince(I,t.input.pullBatchSize);if($.documents.length===0||(I=Ml([I,$.checkpoint]),E.push(w($.documents,I)),$.documents.length<t.input.pullBatchSize))break}await Promise.all(E)}}function h(I){t.stats.down.downstreamProcessChanges=t.stats.down.downstreamProcessChanges+1;var E=[],$=null;return I.forEach(S=>{if(S==="RESYNC")throw new Error("SNH");za(E,S.documents),$=Ml([$,S.checkpoint])}),w(E,ye($))}var m=un,y={docs:{}};function w(I,E){var $=t.primaryPath;return t.stats.down.persistFromMaster=t.stats.down.persistFromMaster+1,I.forEach(S=>{var _=S[$];y.docs[_]=S}),y.checkpoint=E,m=m.then(()=>{var S=y.docs;y.docs={};var _=y.checkpoint,O=Object.keys(S);if(t.events.canceled.getValue()||O.length===0)return un;var z=[],W={},Q={},H=[];return Promise.all([t.input.forkInstance.findDocumentsById(O,!0),hO(t,O)]).then(([X,U])=>{var ee=new Map;return X.forEach(ce=>ee.set(ce[$],ce)),Promise.all(O.map(async ce=>{var de=ee.get(ce),Pe=de?cs(de,t.hasAttachments,!1):void 0,ot=S[ce],ct=U[ce];if(ct&&de&&ct.metaDocument.isResolvedConflict===de._rev)return un;var Te=!ct||!Pe?!1:await t.input.conflictHandler({realMasterState:ct.docData,newDocumentState:Pe},"downstream-check-if-equal-0").then(Re=>Re.isEqual);if(!Te&&ct&&ct.docData._rev&&de&&de._meta[t.input.identifier]&&Va(de._rev).height===de._meta[t.input.identifier]&&(Te=!0),de&&ct&&Te===!1||de&&!ct)return un;var Dt=Pe?await t.input.conflictHandler({realMasterState:ot,newDocumentState:Pe},"downstream-check-if-equal-1").then(Re=>Re.isEqual):!1;if(Pe&&Dt)return(!ct||Te===!1)&&H.push(await _d(t,Pe,ct?ct.metaDocument:void 0)),un;var G=Object.assign({},ot,de?{_meta:$e(de._meta),_attachments:t.hasAttachments&&ot._attachments?ot._attachments:{},_rev:Rn()}:{_meta:{lwt:Ft()},_rev:Rn(),_attachments:t.hasAttachments&&ot._attachments?ot._attachments:{}});if(ot._rev){var oe=de?Va(de._rev).height+1:1;G._meta[t.input.identifier]=oe,t.input.keepMeta&&(G._rev=ot._rev)}t.input.keepMeta&&ot._meta&&(G._meta=ot._meta);var ue={previous:de,document:G};ue.document._rev=ue.document._rev?ue.document._rev:Ui(n,ue.previous),z.push(ue),W[ce]=ue,Q[ce]=await _d(t,ot,ct?ct.metaDocument:void 0)}))}).then(async()=>{if(z.length>0)return t.input.forkInstance.bulkWrite(z,await t.downstreamBulkWriteFlag).then(X=>{X.success.forEach(U=>{var ee=U[$];t.events.processed.down.next(W[ee]),H.push(Q[ee])}),X.error.forEach(U=>{U.status!==409&&t.events.error.next(le("RC_PULL",{writeError:U}))})})}).then(()=>{if(H.length>0)return t.input.metaInstance.bulkWrite(zy(t,H),"replication-down-write-meta").then(X=>{X.error.forEach(U=>{t.events.error.next(le("RC_PULL",{id:U.documentId,writeError:U}))})})}).then(()=>{wd(t,"down",_)})}).catch(S=>t.events.error.next(S)),m}}var bd=function(t,e){var n=gs(t.newDocumentState),r=gs(t.realMasterState);return Ka(n,r)?Promise.resolve({isEqual:!0}):Promise.resolve({isEqual:!1,documentData:t.realMasterState})};async function cN(t,e,n){var r=t.input.conflictHandler,i=await r(e,"replication-resolve-conflict");if(!i.isEqual){var s=Object.assign({},i.documentData,{_meta:$e(n._meta),_rev:Rn(),_attachments:$e(n._attachments)});return s._meta.lwt=Ft(),s._rev=Ui(await t.checkpointKey,n),{resolvedDoc:s,output:i}}}async function Wy(t,e,n,r){if(!n._attachments||r&&!r._attachments)throw new Error("_attachments missing");var i=n[t],s=new Set(r&&r._attachments?Object.keys(r._attachments):[]);return await Promise.all(Object.entries(n._attachments).map(async([o,a])=>{if((!s.has(o)||r&&ye(r._attachments)[o].digest!==a.digest)&&!a.data){var l=await e.getAttachmentData(i,o,a.digest);a.data=l}})),n}async function fN(t){if(t.input.initialCheckpoint&&t.input.initialCheckpoint.upstream){var e=await gd(t,"up");e||await wd(t,"up",t.input.initialCheckpoint.upstream)}var n=t.input.replicationHandler;t.streamQueue.up=t.streamQueue.up.then(()=>f().then(()=>{h()}));var r=0,i=-1,s=[],o=Jn,a={docs:{}},l=t.input.forkInstance.changeStream().subscribe(async y=>{if(y.context!==await t.downstreamBulkWriteFlag)return t.stats.up.forkChangeStreamEmit=t.stats.up.forkChangeStreamEmit+1,s.push({task:y,time:r++}),t.events.active.up.getValue()||t.events.active.up.next(!0),t.input.waitBeforePersist?t.input.waitBeforePersist().then(()=>h()):h()});As(t.events.canceled.pipe(lt(y=>!!y))).then(()=>l.unsubscribe());async function f(){if(t.stats.up.upstreamInitialSync=t.stats.up.upstreamInitialSync+1,!t.events.canceled.getValue()){t.checkpointQueue=t.checkpointQueue.then(()=>gd(t,"up"));for(var y=await t.checkpointQueue,w=new Set,I=async function(){i=r++,w.size>3&&await Promise.race(Array.from(w));var S=await oO(t.input.forkInstance,t.input.pushBatchSize,y);if(S.documents.length===0)return 1;y=Ml([y,S.checkpoint]);var _=m(S.documents,ye(y));w.add(_),_.catch().then(()=>w.delete(_))};!t.events.canceled.getValue()&&!await I(););var E=await Promise.all(w),$=E.find(S=>!!S);$?await f():!t.firstSyncDone.up.getValue()&&!t.events.canceled.getValue()&&t.firstSyncDone.up.next(!0)}}function h(){if(t.events.canceled.getValue()||s.length===0){t.events.active.up.next(!1);return}t.stats.up.processTasks=t.stats.up.processTasks+1,t.events.active.up.next(!0),t.streamQueue.up=t.streamQueue.up.then(()=>{for(var y=[],w={};s.length>0;){var I=ye(s.shift());I.time<i||(za(y,I.task.events.map($=>$.documentData)),w=Ml([w,I.task.checkpoint]))}var E=y.length===0?Jn:m(y,w);return E.then(()=>{s.length===0?t.events.active.up.next(!1):h()})})}function m(y,w){return t.stats.up.persistToMaster=t.stats.up.persistToMaster+1,y.forEach(I=>{var E=I[t.primaryPath];a.docs[E]=I}),a.checkpoint=w,o=o.then(async()=>{if(t.events.canceled.getValue())return!1;var I=a.docs;a.docs={};var E=a.checkpoint,$=Object.keys(I);if($.length===0)return!1;var S=await hO(t,$),_={},O=[],z={},W={};if(await Promise.all($.map(async Te=>{var Dt=I[Te];W[Te]=Dt;var G=cs(Dt,t.hasAttachments,!!t.input.keepMeta),oe=S[Te];oe&&oe.metaDocument.isResolvedConflict!==Dt._rev&&(await t.input.conflictHandler({realMasterState:oe.docData,newDocumentState:G},"upstream-check-if-equal")).isEqual||oe&&oe.docData._rev&&Va(Dt._rev).height===Dt._meta[t.input.identifier]||(O.push(Te),_[Te]={assumedMasterState:oe?oe.docData:void 0,newDocumentState:G},z[Te]=await _d(t,G,oe?oe.metaDocument:void 0))})),O.length===0)return!1;var Q=Object.values(_),H=new Set,X={},U=CP(Q,t.input.pushBatchSize);await Promise.all(U.map(async Te=>{t.hasAttachments&&await Promise.all(Te.map(async G=>{G.newDocumentState=await Wy(t.primaryPath,t.input.forkInstance,Pn(G.newDocumentState),G.assumedMasterState)}));var Dt=await n.masterWrite(Te);Dt.forEach(G=>{var oe=G[t.primaryPath];H.add(oe),X[oe]=G})}));var ee=[];if(O.forEach(Te=>{H.has(Te)||(t.events.processed.up.next(_[Te]),ee.push(z[Te]))}),t.events.canceled.getValue())return!1;ee.length>0&&await t.input.metaInstance.bulkWrite(zy(t,ee),"replication-up-write-meta");var ce=!1;if(H.size>0){t.stats.up.persistToMasterHadConflicts=t.stats.up.persistToMasterHadConflicts+1;var de=[],Pe={};if(await Promise.all(Object.entries(X).map(([Te,Dt])=>{var G=_[Te],oe={newDocumentState:G.newDocumentState,assumedMasterState:G.assumedMasterState,realMasterState:Dt};return cN(t,oe,W[Te]).then(async ue=>{if(ue){t.events.resolvedConflicts.next({input:oe,output:ue.output}),de.push({previous:W[Te],document:ue.resolvedDoc});var Re=S[Te];Pe[Te]=await _d(t,ye(Dt),Re?Re.metaDocument:void 0,ue.resolvedDoc._rev)}})})),de.length>0){ce=!0,t.stats.up.persistToMasterConflictWrites=t.stats.up.persistToMasterConflictWrites+1;var ot=await t.input.forkInstance.bulkWrite(de,"replication-up-write-conflict"),ct=[];ot.success.forEach(Te=>{var Dt=Te[t.primaryPath];ct.push(Pe[Dt])}),ct.length>0&&await t.input.metaInstance.bulkWrite(zy(t,ct),"replication-up-write-conflict-meta")}}return wd(t,"up",E),ce}).catch(I=>(t.events.error.next(I),!1)),o}}function pO(t){t=$e(t),t.forkInstance=Vy(t.forkInstance),t.metaInstance=Vy(t.metaInstance);var e=uN(t),n={primaryPath:Fn(t.forkInstance.schema.primaryKey),hasAttachments:!!t.forkInstance.schema.attachments,input:t,checkpointKey:e,downstreamBulkWriteFlag:e.then(r=>"replication-downstream-"+r),events:{canceled:new Jr(!1),active:{down:new Jr(!0),up:new Jr(!0)},processed:{down:new Kt,up:new Kt},resolvedConflicts:new Kt,error:new Kt},stats:{down:{addNewTask:0,downstreamProcessChanges:0,downstreamResyncOnce:0,masterChangeStreamEmit:0,persistFromMaster:0},up:{forkChangeStreamEmit:0,persistToMaster:0,persistToMasterConflictWrites:0,persistToMasterHadConflicts:0,processTasks:0,upstreamInitialSync:0}},firstSyncDone:{down:new Jr(!1),up:new Jr(!1)},streamQueue:{down:un,up:un},checkpointQueue:un,lastCheckpointDoc:{}};return lN(n),fN(n),n}function Tf(t){return As(AE([t.firstSyncDone.down.pipe(lt(e=>!!e)),t.firstSyncDone.up.pipe(lt(e=>!!e))])).then(()=>{})}function ab(t){return Promise.all([t.streamQueue.up,t.streamQueue.down,t.checkpointQueue])}function dN(t,e,n,r=!1){t=Vy(t);var i=!!t.schema.attachments,s=Fn(t.schema.primaryKey),o={masterChangeStream$:t.changeStream().pipe(Br(async a=>{var l={checkpoint:a.checkpoint,documents:await Promise.all(a.events.map(async f=>{var h=cs(f.documentData,i,r);return i&&(h=await Wy(s,t,Pn(h),void 0)),h}))};return l})),masterChangesSince(a,l){return oO(t,l,a).then(async f=>({checkpoint:f.documents.length>0?f.checkpoint:a,documents:await Promise.all(f.documents.map(async h=>{var m=cs(h,i,r);return i&&(m=await Wy(s,t,Pn(m),void 0)),m}))}))},async masterWrite(a){var l={};a.forEach(E=>{var $=E.newDocumentState[s];l[$]=E});var f=Object.keys(l),h=await t.findDocumentsById(f,!0),m=new Map;h.forEach(E=>m.set(E[s],E));var y=[],w=[];if(await Promise.all(Object.entries(l).map(async([E,$])=>{var S=m.get(E);S?S&&!$.assumedMasterState?y.push(cs(S,i,r)):(await e({realMasterState:cs(S,i,r),newDocumentState:ye($.assumedMasterState)},"rxStorageInstanceToReplicationHandler-masterWrite")).isEqual===!0?w.push({previous:S,document:ob(n,i,r,$.newDocumentState,S)}):y.push(cs(S,i,r)):w.push({document:ob(n,i,r,$.newDocumentState)})})),w.length>0){var I=await t.bulkWrite(w,"replication-master-write");I.error.forEach(E=>{if(E.status!==409)throw new Error("non conflict error");y.push(cs(ye(E.documentInDb),i,r))})}return y}};return o}async function mO(t){t.events.canceled.next(!0),t.events.active.up.complete(),t.events.active.down.complete(),t.events.processed.up.complete(),t.events.processed.down.complete(),t.events.resolvedConflicts.complete(),t.events.canceled.complete(),await t.checkpointQueue}var yO=["pre","post"],vO=["insert","save","remove","create"],ub=!1,gO=function(){function t(n,r,i,s,o={},a={},l={},f={},h={},m=JE,y={},w=bd){this.storageInstance={},this.timeouts=new Set,this.incrementalWriteQueue={},this._incrementalUpsertQueues=new Map,this.synced=!1,this.hooks={},this._subs=[],this._docCache={},this._queryCache=k2(),this.$={},this.checkpoint$={},this._changeEventBuffer={},this.onDestroy=[],this.destroyed=!1,this.database=n,this.name=r,this.schema=i,this.internalStorageInstance=s,this.instanceCreationOptions=o,this.migrationStrategies=a,this.methods=l,this.attachments=f,this.options=h,this.cacheReplacementPolicy=m,this.statics=y,this.conflictHandler=w,hN(this.asRxCollection)}var e=t.prototype;return e.prepare=async function(){this.storageInstance=jg(this.database,this.internalStorageInstance,this.schema.jsonSchema),this.incrementalWriteQueue=new aO(this.storageInstance,this.schema.primaryPath,(o,a)=>lO(this,o,a),o=>this._runHooks("post","save",o));var r=this.database.eventBulks$.pipe(lt(o=>o.collectionName===this.name));this.$=r.pipe(Br(o=>o.events)),this.checkpoint$=r.pipe(Mt(o=>o.checkpoint)),this._changeEventBuffer=nN(this.asRxCollection),this._docCache=new XE(this.schema.primaryPath,this.$.pipe(lt(o=>!o.isLocal)),o=>oN(this.asRxCollection,o));var i=await this.database.storageToken,s=this.storageInstance.changeStream().subscribe(o=>{var a={id:o.id,internal:!1,collectionName:this.name,storageToken:i,events:o.events.map(l=>rO(!1,l,this)),databaseToken:this.database.token,checkpoint:o.checkpoint,context:o.context,endTime:o.endTime,startTime:o.startTime};this.database.$emit(a)});return this._subs.push(s),this._subs.push(this.storageInstance.conflictResultionTasks().subscribe(o=>{this.conflictHandler(o.input,o.context).then(a=>{this.storageInstance.resolveConflictResultionTask({id:o.id,output:a})})})),un},e.cleanup=function(r){throw pt("cleanup")},e.migrationNeeded=function(){throw pt("migration-schema")},e.getMigrationState=function(){throw pt("migration-schema")},e.startMigration=function(r=10){return this.getMigrationState().startMigration(r)},e.migratePromise=function(r=10){return this.getMigrationState().migratePromise(r)},e.insert=async function(r){var i=await this.bulkInsert([r]),s=i.error[0];yd(this,r[this.schema.primaryPath],r,s);var o=ye(i.success[0]);return o},e.bulkInsert=async function(r){if(r.length===0)return{success:[],error:[]};var i=this.schema.primaryPath,s=r.map(m=>{var y=dm(this.schema,m);return y}),o=this.hasHooks("pre","insert")?await Promise.all(s.map(m=>this._runHooks("pre","insert",m).then(()=>m))):s,a=o.map(m=>{var y={document:m};return y}),l=await this.storageInstance.bulkWrite(a,"rx-collection-bulk-insert"),f=ZE(this._docCache,l.success);if(this.hasHooks("post","insert")){var h=new Map;o.forEach(m=>{h.set(m[i],m)}),await Promise.all(f.map(m=>this._runHooks("post","insert",h.get(m.primary),m)))}return{success:f,error:l.error}},e.bulkRemove=async function(r){var i=this.schema.primaryPath;if(r.length===0)return{success:[],error:[]};var s=await this.findByIds(r).exec(),o=[],a=new Map;Array.from(s.values()).forEach(y=>{var w=y.toMutableJSON(!0);o.push(w),a.set(y.primary,w)}),await Promise.all(o.map(y=>{var w=y[this.schema.primaryPath];return this._runHooks("pre","remove",y,s.get(w))}));var l=o.map(y=>{var w=$e(y);return w._deleted=!0,{previous:y,document:w}}),f=await this.storageInstance.bulkWrite(l,"rx-collection-bulk-remove"),h=f.success.map(y=>y[i]);await Promise.all(h.map(y=>this._runHooks("post","remove",a.get(y),s.get(y))));var m=h.map(y=>Mo(s,y));return{success:m,error:f.error}},e.bulkUpsert=async function(r){var i=[],s=new Map;r.forEach(f=>{var h=dm(this.schema,f),m=h[this.schema.primaryPath];if(!m)throw le("COL3",{primaryPath:this.schema.primaryPath,data:h,schema:this.schema.jsonSchema});s.set(m,h),i.push(h)});var o=await this.bulkInsert(i),a=o.success.slice(0),l=[];return await Promise.all(o.error.map(async f=>{if(f.status!==409)l.push(f);else{var h=f.documentId,m=Mo(s,h),y=ye(f.documentInDb),w=this._docCache.getCachedRxDocument(y),I=await w.incrementalModify(()=>m);a.push(I)}})),{error:l,success:a}},e.upsert=async function(r){var i=await this.bulkUpsert([r]);return yd(this.asRxCollection,r[this.schema.primaryPath],r,i.error[0]),i.success[0]},e.incrementalUpsert=function(r){var i=dm(this.schema,r),s=i[this.schema.primaryPath];if(!s)throw le("COL4",{data:r});var o=this._incrementalUpsertQueues.get(s);return o||(o=un),o=o.then(()=>mN(this,s,i)).then(a=>a.inserted?a.doc:pN(a.doc,i)),this._incrementalUpsertQueues.set(s,o),o},e.find=function(r){if(typeof r=="string")throw le("COL5",{queryObj:r});r||(r=tl());var i=ra("find",r,this);return i},e.findOne=function(r){if(typeof r=="number"||Array.isArray(r))throw el("COL6",{queryObj:r});var i;if(typeof r=="string")i=ra("findOne",{selector:{[this.schema.primaryPath]:r},limit:1},this);else{if(r||(r=tl()),r.limit)throw le("QU6");r=$e(r),r.limit=1,i=ra("findOne",r,this)}return i},e.count=function(r){r||(r=tl());var i=ra("count",r,this);return i},e.findByIds=function(r){var i={selector:{[this.schema.primaryPath]:{$in:r.slice(0)}}},s=ra("findByIds",i,this);return s},e.exportJSON=function(){throw pt("json-dump")},e.importJSON=function(r){throw pt("json-dump")},e.insertCRDT=function(r){throw pt("crdt")},e.addHook=function(r,i,s,o=!1){if(typeof s!="function")throw el("COL7",{key:i,when:r});if(!yO.includes(r))throw el("COL8",{key:i,when:r});if(!vO.includes(i))throw le("COL9",{key:i});if(r==="post"&&i==="create"&&o===!0)throw le("COL10",{when:r,key:i,parallel:o});var a=s.bind(this),l=o?"parallel":"series";this.hooks[i]=this.hooks[i]||{},this.hooks[i][r]=this.hooks[i][r]||{series:[],parallel:[]},this.hooks[i][r][l].push(a)},e.getHooks=function(r,i){return!this.hooks[i]||!this.hooks[i][r]?{series:[],parallel:[]}:this.hooks[i][r]},e.hasHooks=function(r,i){var s=this.getHooks(r,i);return s?s.series.length>0||s.parallel.length>0:!1},e._runHooks=function(r,i,s,o){var a=this.getHooks(r,i);if(!a)return un;var l=a.series.map(f=>()=>f(s,o));return YP(l).then(()=>Promise.all(a.parallel.map(f=>f(s,o))))},e._runHooksSync=function(r,i,s,o){var a=this.getHooks(r,i);a&&a.series.forEach(l=>l(s,o))},e.promiseWait=function(r){var i=new Promise(s=>{var o=setTimeout(()=>{this.timeouts.delete(o),s()},r);this.timeouts.add(o)});return i},e.destroy=function(){return this.destroyed?Jn:(this.destroyed=!0,Array.from(this.timeouts).forEach(r=>clearTimeout(r)),this._changeEventBuffer&&this._changeEventBuffer.destroy(),this.database.requestIdlePromise().then(()=>Promise.all(this.onDestroy.map(r=>r()))).then(()=>this.storageInstance.close()).then(()=>(this._subs.forEach(r=>r.unsubscribe()),delete this.database.collections[this.name],No("postDestroyRxCollection",this).then(()=>!0))))},e.remove=async function(){await this.destroy(),await dO(this.database.storage,this.database.internalStore,this.database.token,this.database.name,this.name,this.database.password,this.database.hashFunction)},Vs(t,[{key:"insert$",get:function(){return this.$.pipe(lt(n=>n.operation==="INSERT"))}},{key:"update$",get:function(){return this.$.pipe(lt(n=>n.operation==="UPDATE"))}},{key:"remove$",get:function(){return this.$.pipe(lt(n=>n.operation==="DELETE"))}},{key:"asRxCollection",get:function(){return this}}]),t}();function hN(t){if(!ub){ub=!0;var e=Object.getPrototypeOf(t);vO.forEach(n=>{yO.map(r=>{var i=r+eE(n);e[i]=function(s,o){return this.addHook(r,n,s,o)}})})}}function pN(t,e){return t.incrementalModify(n=>e)}function mN(t,e,n){var r=t._docCache.getLatestDocumentDataIfExists(e);return r?Promise.resolve({doc:t._docCache.getCachedRxDocument(r),inserted:!1}):t.findOne(e).exec().then(i=>i?{doc:i,inserted:!1}:t.insert(n).then(s=>({doc:s,inserted:!0})))}function yN({database:t,name:e,schema:n,instanceCreationOptions:r={},migrationStrategies:i={},autoMigrate:s=!0,statics:o={},methods:a={},attachments:l={},options:f={},localDocuments:h=!1,cacheReplacementPolicy:m=JE,conflictHandler:y=bd}){var w={databaseInstanceToken:t.token,databaseName:t.name,collectionName:e,schema:n.jsonSchema,options:r,multiInstance:t.multiInstance,password:t.password,devMode:it.isDevMode()};return Nr("preCreateRxStorageInstance",w),eN(t,w).then(I=>{var E=new gO(t,e,n,I,r,i,a,l,f,m,o,y);return E.prepare().then(()=>{Object.entries(o).forEach(([S,_])=>{Object.defineProperty(E,S,{get:()=>_.bind(E)})});var $=un;return s&&E.schema.version!==0&&($=E.migratePromise()),$}).then(()=>(Nr("createRxCollection",{collection:E,creator:{name:e,schema:n,storageInstance:I,instanceCreationOptions:r,migrationStrategies:i,methods:a,attachments:l,options:f,cacheReplacementPolicy:m,localDocuments:h,statics:o}}),E)).catch($=>I.close().then(()=>Promise.reject($)))})}var wO=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this._parallels=e||1,this._qC=0,this._iC=new Set,this._lHN=0,this._hPM=new Map,this._pHM=new Map};wO.prototype={isIdle:function(){return this._qC<this._parallels},lock:function(){this._qC++},unlock:function(){this._qC--,qy(this)},wrapCall:function(e){var n=this;this.lock();var r;try{r=e()}catch(i){throw this.unlock(),i}return!r.then||typeof r.then!="function"?(this.unlock(),r):r.then(function(i){return n.unlock(),i}).catch(function(i){throw n.unlock(),i})},requestIdlePromise:function(e){var n=this;e=e||{};var r,i=new Promise(function(a){return r=a}),s=function(){hm(n,i),r()};if(i._manRes=s,e.timeout){var o=setTimeout(function(){i._manRes()},e.timeout);i._timeoutObj=o}return this._iC.add(i),qy(this),i},cancelIdlePromise:function(e){hm(this,e)},requestIdleCallback:function(e,n){var r=this._lHN++,i=this.requestIdlePromise(n);return this._hPM.set(r,i),this._pHM.set(i,r),i.then(function(){return e()}),r},cancelIdleCallback:function(e){var n=this._hPM.get(e);this.cancelIdlePromise(n)},clear:function(){var e=this;this._iC.forEach(function(n){return hm(e,n)}),this._qC=0,this._iC.clear(),this._hPM=new Map,this._pHM=new Map}};function vN(t){if(t._iC.size!==0){var e=t._iC.values(),n=e.next().value;n._manRes(),setTimeout(function(){return qy(t)},0)}}function hm(t,e){if(e){if(e._timeoutObj&&clearTimeout(e._timeoutObj),t._pHM.has(e)){var n=t._pHM.get(e);t._hPM.delete(n),t._pHM.delete(e)}t._iC.delete(e)}}function qy(t){t._tryIR||t._iC.size===0||(t._tryIR=!0,setTimeout(function(){if(!t.isIdle()){t._tryIR=!1;return}setTimeout(function(){if(!t.isIdle()){t._tryIR=!1;return}vN(t),t._tryIR=!1},0)},0))}class Kg{constructor(e){jc(this,"ttl");jc(this,"map",new Map);jc(this,"_to",!1);this.ttl=e}has(e){return this.map.has(e)}add(e){this.map.set(e,_O()),this._to||(this._to=!0,setTimeout(()=>{this._to=!1,gN(this)},0))}clear(){this.map.clear()}}function gN(t){const e=_O()-t.ttl,n=t.map[Symbol.iterator]();for(;;){const r=n.next().value;if(!r)return;const i=r[0];if(r[1]<e)t.map.delete(i);else return}}function _O(){return Date.now()}var Sd=new Set,Wg=function(){function t(n,r,i,s,o,a,l=!1,f={},h,m,y,w,I){this.idleQueue=new wO,this.rxdbVersion=gg,this.storageInstances=new Set,this._subs=[],this.startupErrors=[],this.onDestroy=[],this.destroyed=!1,this.collections={},this.eventBulks$=new Kt,this.observable$=this.eventBulks$.pipe(Br(E=>E.events)),this.storageToken=Jn,this.storageTokenDocument=Jn,this.emittedEventBulkIds=new Kg(60*1e3),this.name=n,this.token=r,this.storage=i,this.instanceCreationOptions=s,this.password=o,this.multiInstance=a,this.eventReduce=l,this.options=f,this.internalStore=h,this.hashFunction=m,this.cleanupPolicy=y,this.allowSlowCount=w,this.reactivity=I,this.name!=="pseudoInstance"&&(this.internalStore=jg(this.asRxDatabase,h,zg),this.storageTokenDocument=X2(this.asRxDatabase).catch(E=>this.startupErrors.push(E)),this.storageToken=this.storageTokenDocument.then(E=>E.data.token).catch(E=>this.startupErrors.push(E)))}var e=t.prototype;return e.getReactivityFactory=function(){if(!this.reactivity)throw le("DB14",{database:this.name});return this.reactivity},e.$emit=function(r){this.emittedEventBulkIds.has(r.id)||(this.emittedEventBulkIds.add(r.id),this.eventBulks$.next(r))},e.removeCollectionDoc=async function(r,i){var s=await Xl(this.internalStore,Qa(Uy(r,i),ko));if(!s)throw le("SNH",{name:r,schema:i});var o=$g(s);o._deleted=!0,await this.internalStore.bulkWrite([{document:o,previous:s}],"rx-database-remove-collection")},e.addCollections=async function(r){var i={},s={},o=[],a={};await Promise.all(Object.entries(r).map(async([h,m])=>{var y=h,w=m.schema;i[y]=w;var I=hR(w,this.hashFunction);if(s[y]=I,this.collections[h])throw le("DB3",{name:h});var E=Uy(h,w),$={id:Qa(E,ko),key:E,context:ko,data:{name:y,schemaHash:await I.hash,schema:I.jsonSchema,version:I.version,connectedStorages:[]},_deleted:!1,_meta:Ks(),_rev:Rn(),_attachments:{}};o.push({document:$});var S=Object.assign({},m,{name:y,schema:I,database:this}),_=$e(m);_.database=this,_.name=h,Nr("preCreateRxCollection",_),S.conflictHandler=_.conflictHandler,a[y]=S}));var l=await this.internalStore.bulkWrite(o,"rx-database-add-collection");await SN(this),await Promise.all(l.error.map(async h=>{if(h.status!==409)throw le("DB12",{database:this.name,writeError:h});var m=ye(h.documentInDb),y=m.data.name,w=s[y];if(m.data.schemaHash!==await w.hash)throw le("DB6",{database:this.name,collection:y,previousSchemaHash:m.data.schemaHash,schemaHash:await w.hash,previousSchema:m.data.schema,schema:ye(i[y])})}));var f={};return await Promise.all(Object.keys(r).map(async h=>{var m=a[h],y=await yN(m);f[h]=y,this.collections[h]=y,this[h]||Object.defineProperty(this,h,{get:()=>this.collections[h]})})),f},e.lockedRun=function(r){return this.idleQueue.wrapCall(r)},e.requestIdlePromise=function(){return this.idleQueue.requestIdlePromise()},e.exportJSON=function(r){throw pt("json-dump")},e.importJSON=function(r){throw pt("json-dump")},e.backup=function(r){throw pt("backup")},e.leaderElector=function(){throw pt("leader-election")},e.isLeader=function(){throw pt("leader-election")},e.waitForLeadership=function(){throw pt("leader-election")},e.migrationStates=function(){throw pt("migration-schema")},e.destroy=async function(){return this.destroyed||(this.destroyed=!0,await No("preDestroyRxDatabase",this),this.eventBulks$.complete(),this._subs.map(r=>r.unsubscribe()),this.name==="pseudoInstance")?Jn:this.requestIdlePromise().then(()=>Promise.all(this.onDestroy.map(r=>r()))).then(()=>Promise.all(Object.keys(this.collections).map(r=>this.collections[r]).map(r=>r.destroy()))).then(()=>this.internalStore.close()).then(()=>Sd.delete(this.storage.name+"|"+this.name)).then(()=>!0)},e.remove=function(){return this.destroy().then(()=>SO(this.name,this.storage,this.password))},Vs(t,[{key:"$",get:function(){return this.observable$}},{key:"asRxDatabase",get:function(){return this}}]),t}();function wN(t,e){var n=e.name+"|"+t;if(Sd.has(n))throw le("DB8",{name:t,storage:e.name,link:"https://rxdb.info/rx-database.html#ignoreduplicate"})}async function bO(t,e,n,r,i,s){var o=await e.createStorageInstance({databaseInstanceToken:t,databaseName:n,collectionName:V2,schema:zg,options:r,multiInstance:i,password:s,devMode:it.isDevMode()});return o}function _N({storage:t,instanceCreationOptions:e,name:n,password:r,multiInstance:i=!0,eventReduce:s=!0,ignoreDuplicate:o=!1,options:a={},cleanupPolicy:l,allowSlowCount:f=!1,localDocuments:h=!1,hashFunction:m=WP,reactivity:y}){Nr("preCreateRxDatabase",{storage:t,instanceCreationOptions:e,name:n,password:r,multiInstance:i,eventReduce:s,ignoreDuplicate:o,options:a,localDocuments:h}),o||wN(n,t),Sd.add(t.name+"|"+n);var w=su(10);return bO(w,t,n,e,i,r).catch(I=>{throw Sd.delete(t.name+"|"+n),I}).then(I=>{var E=new Wg(n,w,t,e,r,i,s,a,I,m,l,f,y);return No("createRxDatabase",{database:E,creator:{storage:t,instanceCreationOptions:e,name:n,password:r,multiInstance:i,eventReduce:s,ignoreDuplicate:o,options:a,localDocuments:h}}).then(()=>E)})}async function SO(t,e,n){var r=su(10),i=await bO(r,e,t,{},!1,n),s=await Vg(i),o=new Set;s.forEach(l=>o.add(l.data.name));var a=Array.from(o);return await Promise.all(a.map(l=>dO(e,i,r,t,l,n))),await No("postRemoveRxDatabase",{databaseName:t,storage:e}),await i.remove(),a}function bN(t){return t instanceof Wg}async function IO(t){var e=await t.storageTokenDocument;return e.data.instanceToken===t.token}async function SN(t){if(await t.storageToken,t.startupErrors[0])throw t.startupErrors[0]}var IN={RxSchema:uE.prototype,RxDocument:kh,RxQuery:eO.prototype,RxCollection:gO.prototype,RxDatabase:Wg.prototype},pm=new Set,lb=new Set;function gi(t){if(Nr("preAddRxPlugin",{plugin:t,plugins:pm}),!pm.has(t)){{if(lb.has(t.name))throw le("PL3",{name:t.name,plugin:t});pm.add(t),lb.add(t.name)}if(!t.rxdb)throw el("PL1",{plugin:t});t.init&&t.init(),t.prototypes&&Object.entries(t.prototypes).forEach(([e,n])=>n(IN[e])),t.overwritable&&Object.assign(it,t.overwritable),t.hooks&&Object.entries(t.hooks).forEach(([e,n])=>{n.after&&xl[e].push(n.after),n.before&&xl[e].unshift(n.before)})}}function EN(t){return t&&typeof t.then=="function"}Promise.resolve(!1);var ON=Promise.resolve(!0),Mi=Promise.resolve();function mo(t,e){return t||(t=0),new Promise(function(n){return setTimeout(function(){return n(e)},t)})}function kN(t,e){return Math.floor(Math.random()*(e-t+1)+t)}function Zl(){return Math.random().toString(36).substring(2)}var mm=0;function ec(){var t=Date.now()*1e3;return t<=mm&&(t=mm+1),mm=t,t}function DN(){return typeof navigator<"u"&&typeof navigator.locks<"u"&&typeof navigator.locks.request=="function"}var xN=ec,CN="native";function AN(t){var e={time:ec(),messagesCallback:null,bc:new BroadcastChannel(t),subFns:[]};return e.bc.onmessage=function(n){e.messagesCallback&&e.messagesCallback(n.data)},e}function PN(t){t.bc.close(),t.subFns=[]}function RN(t,e){try{return t.bc.postMessage(e,!1),Mi}catch(n){return Promise.reject(n)}}function TN(t,e){t.messagesCallback=e}function MN(){if(typeof globalThis<"u"&&globalThis.Deno&&globalThis.Deno.args)return!0;if((typeof window<"u"||typeof self<"u")&&typeof BroadcastChannel=="function"){if(BroadcastChannel._pubkey)throw new Error("BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill");return!0}else return!1}function NN(){return 150}var BN={create:AN,close:PN,onMessage:TN,postMessage:RN,canBeUsed:MN,type:CN,averageResponseTime:NN,microSeconds:xN};function qg(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=JSON.parse(JSON.stringify(t));return typeof e.webWorkerSupport>"u"&&(e.webWorkerSupport=!0),e.idb||(e.idb={}),e.idb.ttl||(e.idb.ttl=1e3*45),e.idb.fallbackInterval||(e.idb.fallbackInterval=150),t.idb&&typeof t.idb.onclose=="function"&&(e.idb.onclose=t.idb.onclose),e.localstorage||(e.localstorage={}),e.localstorage.removeTimeout||(e.localstorage.removeTimeout=1e3*60),t.methods&&(e.methods=t.methods),e.node||(e.node={}),e.node.ttl||(e.node.ttl=1e3*60*2),e.node.maxParallelWrites||(e.node.maxParallelWrites=2048),typeof e.node.useFastPath>"u"&&(e.node.useFastPath=!0),e}var FN=ec,LN="pubkey.broadcast-channel-0-",qi="messages",Dh={durability:"relaxed"},$N="idb";function EO(){if(typeof indexedDB<"u")return indexedDB;if(typeof window<"u"){if(typeof window.mozIndexedDB<"u")return window.mozIndexedDB;if(typeof window.webkitIndexedDB<"u")return window.webkitIndexedDB;if(typeof window.msIndexedDB<"u")return window.msIndexedDB}return!1}function Hg(t){t.commit&&t.commit()}function jN(t){var e=EO(),n=LN+t,r=e.open(n);return r.onupgradeneeded=function(i){var s=i.target.result;s.createObjectStore(qi,{keyPath:"id",autoIncrement:!0})},new Promise(function(i,s){r.onerror=function(o){return s(o)},r.onsuccess=function(){i(r.result)}})}function UN(t,e,n){var r=Date.now(),i={uuid:e,time:r,data:n},s=t.transaction([qi],"readwrite",Dh);return new Promise(function(o,a){s.oncomplete=function(){return o()},s.onerror=function(f){return a(f)};var l=s.objectStore(qi);l.add(i),Hg(s)})}function zN(t,e){var n=t.transaction(qi,"readonly",Dh),r=n.objectStore(qi),i=[],s=IDBKeyRange.bound(e+1,1/0);if(r.getAll){var o=r.getAll(s);return new Promise(function(l,f){o.onerror=function(h){return f(h)},o.onsuccess=function(h){l(h.target.result)}})}function a(){try{return s=IDBKeyRange.bound(e+1,1/0),r.openCursor(s)}catch{return r.openCursor()}}return new Promise(function(l,f){var h=a();h.onerror=function(m){return f(m)},h.onsuccess=function(m){var y=m.target.result;y?y.value.id<e+1?y.continue(e+1):(i.push(y.value),y.continue()):(Hg(n),l(i))}})}function VN(t,e){if(t.closed)return Promise.resolve([]);var n=t.db.transaction(qi,"readwrite",Dh),r=n.objectStore(qi);return Promise.all(e.map(function(i){var s=r.delete(i);return new Promise(function(o){s.onsuccess=function(){return o()}})}))}function KN(t,e){var n=Date.now()-e,r=t.transaction(qi,"readonly",Dh),i=r.objectStore(qi),s=[];return new Promise(function(o){i.openCursor().onsuccess=function(a){var l=a.target.result;if(l){var f=l.value;f.time<n?(s.push(f),l.continue()):(Hg(r),o(s))}else o(s)}})}function WN(t){return KN(t.db,t.options.idb.ttl).then(function(e){return VN(t,e.map(function(n){return n.id}))})}function qN(t,e){return e=qg(e),jN(t).then(function(n){var r={closed:!1,lastCursorId:0,channelName:t,options:e,uuid:Zl(),eMIs:new Kg(e.idb.ttl*2),writeBlockPromise:Mi,messagesCallback:null,readQueuePromises:[],db:n};return n.onclose=function(){r.closed=!0,e.idb.onclose&&e.idb.onclose()},OO(r),r})}function OO(t){t.closed||kO(t).then(function(){return mo(t.options.idb.fallbackInterval)}).then(function(){return OO(t)})}function HN(t,e){return!(t.uuid===e.uuid||e.eMIs.has(t.id)||t.data.time<e.messagesCallbackTime)}function kO(t){return t.closed||!t.messagesCallback?Mi:zN(t.db,t.lastCursorId).then(function(e){var n=e.filter(function(r){return!!r}).map(function(r){return r.id>t.lastCursorId&&(t.lastCursorId=r.id),r}).filter(function(r){return HN(r,t)}).sort(function(r,i){return r.time-i.time});return n.forEach(function(r){t.messagesCallback&&(t.eMIs.add(r.id),t.messagesCallback(r.data))}),Mi})}function QN(t){t.closed=!0,t.db.close()}function YN(t,e){return t.writeBlockPromise=t.writeBlockPromise.then(function(){return UN(t.db,t.uuid,e)}).then(function(){kN(0,10)===0&&WN(t)}),t.writeBlockPromise}function GN(t,e,n){t.messagesCallbackTime=n,t.messagesCallback=e,kO(t)}function JN(){return!!EO()}function XN(t){return t.idb.fallbackInterval*2}var ZN={create:qN,close:QN,onMessage:GN,postMessage:YN,canBeUsed:JN,type:$N,averageResponseTime:XN,microSeconds:FN},eB=ec,tB="pubkey.broadcastChannel-",nB="localstorage";function DO(){var t;if(typeof window>"u")return null;try{t=window.localStorage,t=window["ie8-eventlistener/storage"]||window.localStorage}catch{}return t}function xO(t){return tB+t}function rB(t,e){return new Promise(function(n){mo().then(function(){var r=xO(t.channelName),i={token:Zl(),time:Date.now(),data:e,uuid:t.uuid},s=JSON.stringify(i);DO().setItem(r,s);var o=document.createEvent("Event");o.initEvent("storage",!0,!0),o.key=r,o.newValue=s,window.dispatchEvent(o),n()})})}function iB(t,e){var n=xO(t),r=function(s){s.key===n&&e(JSON.parse(s.newValue))};return window.addEventListener("storage",r),r}function sB(t){window.removeEventListener("storage",t)}function oB(t,e){if(e=qg(e),!CO())throw new Error("BroadcastChannel: localstorage cannot be used");var n=Zl(),r=new Kg(e.localstorage.removeTimeout),i={channelName:t,uuid:n,eMIs:r};return i.listener=iB(t,function(s){i.messagesCallback&&s.uuid!==n&&(!s.token||r.has(s.token)||s.data.time&&s.data.time<i.messagesCallbackTime||(r.add(s.token),i.messagesCallback(s.data)))}),i}function aB(t){sB(t.listener)}function uB(t,e,n){t.messagesCallbackTime=n,t.messagesCallback=e}function CO(){var t=DO();if(!t)return!1;try{var e="__broadcastchannel_check";t.setItem(e,"works"),t.removeItem(e)}catch{return!1}return!0}function lB(){var t=120,e=navigator.userAgent.toLowerCase();return e.includes("safari")&&!e.includes("chrome")?t*2:t}var cB={create:oB,close:aB,onMessage:uB,postMessage:rB,canBeUsed:CO,type:nB,averageResponseTime:lB,microSeconds:eB},AO=ec,fB="simulate",Qg=new Set;function dB(t){var e={time:AO(),name:t,messagesCallback:null};return Qg.add(e),e}function hB(t){Qg.delete(t)}var PO=5;function pB(t,e){return new Promise(function(n){return setTimeout(function(){var r=Array.from(Qg);r.forEach(function(i){i.name===t.name&&i!==t&&i.messagesCallback&&i.time<e.time&&i.messagesCallback(e)}),n()},PO)})}function mB(t,e){t.messagesCallback=e}function yB(){return!0}function vB(){return PO}var gB={create:dB,close:hB,onMessage:mB,postMessage:pB,canBeUsed:yB,type:fB,averageResponseTime:vB,microSeconds:AO},cb=[BN,ZN,cB];function wB(t){var e=[].concat(t.methods,cb).filter(Boolean);if(t.type){if(t.type==="simulate")return gB;var n=e.find(function(i){return i.type===t.type});if(n)return n;throw new Error("method-type "+t.type+" not found")}t.webWorkerSupport||(e=e.filter(function(i){return i.type!=="idb"}));var r=e.find(function(i){return i.canBeUsed()});if(r)return r;throw new Error("No usable method found in "+JSON.stringify(cb.map(function(i){return i.type})))}var RO=new Set,_B=0,xh=function(e,n){this.id=_B++,RO.add(this),this.name=e,fb&&(n=fb),this.options=qg(n),this.method=wB(this.options),this._iL=!1,this._onML=null,this._addEL={message:[],internal:[]},this._uMP=new Set,this._befC=[],this._prepP=null,bB(this)};xh._pubkey=!0;var fb;xh.prototype={postMessage:function(e){if(this.closed)throw new Error("BroadcastChannel.postMessage(): Cannot post message after channel has closed "+JSON.stringify(e));return db(this,"message",e)},postInternal:function(e){return db(this,"internal",e)},set onmessage(t){var e=this.method.microSeconds(),n={time:e,fn:t};pb(this,"message",this._onML),t&&typeof t=="function"?(this._onML=n,hb(this,"message",n)):this._onML=null},addEventListener:function(e,n){var r=this.method.microSeconds(),i={time:r,fn:n};hb(this,e,i)},removeEventListener:function(e,n){var r=this._addEL[e].find(function(i){return i.fn===n});pb(this,e,r)},close:function(){var e=this;if(!this.closed){RO.delete(this),this.closed=!0;var n=this._prepP?this._prepP:Mi;return this._onML=null,this._addEL.message=[],n.then(function(){return Promise.all(Array.from(e._uMP))}).then(function(){return Promise.all(e._befC.map(function(r){return r()}))}).then(function(){return e.method.close(e._state)})}},get type(){return this.method.type},get isClosed(){return this.closed}};function db(t,e,n){var r=t.method.microSeconds(),i={time:r,type:e,data:n},s=t._prepP?t._prepP:Mi;return s.then(function(){var o=t.method.postMessage(t._state,i);return t._uMP.add(o),o.catch().then(function(){return t._uMP.delete(o)}),o})}function bB(t){var e=t.method.create(t.name,t.options);EN(e)?(t._prepP=e,e.then(function(n){t._state=n})):t._state=e}function TO(t){return t._addEL.message.length>0||t._addEL.internal.length>0}function hb(t,e,n){t._addEL[e].push(n),SB(t)}function pb(t,e,n){t._addEL[e]=t._addEL[e].filter(function(r){return r!==n}),IB(t)}function SB(t){if(!t._iL&&TO(t)){var e=function(i){t._addEL[i.type].forEach(function(s){i.time>=s.time&&s.fn(i.data)})},n=t.method.microSeconds();t._prepP?t._prepP.then(function(){t._iL=!0,t.method.onMessage(t._state,e,n)}):(t._iL=!0,t.method.onMessage(t._state,e,n))}}function IB(t){if(t._iL&&!TO(t)){t._iL=!1;var e=t.method.microSeconds();t.method.onMessage(t._state,null,e)}}function EB(t){if(typeof WorkerGlobalScope=="function"&&self instanceof WorkerGlobalScope){var e=self.close.bind(self);self.close=function(){return t(),e()}}else{if(typeof window.addEventListener!="function")return;window.addEventListener("beforeunload",function(){t()},!0),window.addEventListener("unload",function(){t()},!0)}}function OB(t){process.on("exit",function(){return t()}),process.on("beforeExit",function(){return t().then(function(){return process.exit()})}),process.on("SIGINT",function(){return t().then(function(){return process.exit()})}),process.on("uncaughtException",function(e){return t().then(function(){console.trace(e),process.exit(101)})})}var kB=Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]",DB=kB?OB:EB,nl=new Set,mb=!1;function xB(){mb||(mb=!0,DB(AB))}function CB(t){if(xB(),typeof t!="function")throw new Error("Listener is no function");nl.add(t);var e={remove:function(){return nl.delete(t)},run:function(){return nl.delete(t),t()}};return e}function AB(){var t=[];return nl.forEach(function(e){t.push(e()),nl.delete(e)}),Promise.all(t)}function Do(t,e){var n={context:"leader",action:e,token:t.token};return t.broadcastChannel.postInternal(n)}function MO(t){t.isLeader=!0,t._hasLeader=!0;var e=CB(function(){return t.die()});t._unl.push(e);var n=function(i){i.context==="leader"&&i.action==="apply"&&Do(t,"tell"),i.context==="leader"&&i.action==="tell"&&!t._dpLC&&(t._dpLC=!0,t._dpL(),Do(t,"tell"))};return t.broadcastChannel.addEventListener("internal",n),t._lstns.push(n),Do(t,"tell")}var NO=function(e,n){var r=this;this.broadcastChannel=e,e._befC.push(function(){return r.die()}),this._options=n,this.isLeader=!1,this.isDead=!1,this.token=Zl(),this._lstns=[],this._unl=[],this._dpL=function(){},this._dpLC=!1,this._wKMC={},this.lN="pubkey-bc||"+e.method.type+"||"+e.name};NO.prototype={hasLeader:function(){var e=this;return navigator.locks.query().then(function(n){var r=n.held?n.held.filter(function(i){return i.name===e.lN}):[];return!!(r&&r.length>0)})},awaitLeadership:function(){var e=this;if(!this._wLMP){this._wKMC.c=new AbortController;var n=new Promise(function(r,i){e._wKMC.res=r,e._wKMC.rej=i});this._wLMP=new Promise(function(r){navigator.locks.request(e.lN,{signal:e._wKMC.c.signal},function(){return e._wKMC.c=void 0,MO(e),r(),n}).catch(function(){})})}return this._wLMP},set onduplicate(t){},die:function(){var e=this;return this._lstns.forEach(function(n){return e.broadcastChannel.removeEventListener("internal",n)}),this._lstns=[],this._unl.forEach(function(n){return n.remove()}),this._unl=[],this.isLeader&&(this.isLeader=!1),this.isDead=!0,this._wKMC.res&&this._wKMC.res(),this._wKMC.c&&this._wKMC.c.abort("LeaderElectionWebLock.die() called"),Do(this,"death")}};var BO=function(e,n){var r=this;this.broadcastChannel=e,this._options=n,this.isLeader=!1,this._hasLeader=!1,this.isDead=!1,this.token=Zl(),this._aplQ=Mi,this._aplQC=0,this._unl=[],this._lstns=[],this._dpL=function(){},this._dpLC=!1;var i=function(o){o.context==="leader"&&(o.action==="death"&&(r._hasLeader=!1),o.action==="tell"&&(r._hasLeader=!0))};this.broadcastChannel.addEventListener("internal",i),this._lstns.push(i)};BO.prototype={hasLeader:function(){return Promise.resolve(this._hasLeader)},applyOnce:function(e){var n=this;if(this.isLeader)return mo(0,!0);if(this.isDead)return mo(0,!1);if(this._aplQC>1)return this._aplQ;var r=function(){if(n.isLeader)return ON;var s=!1,o,a=new Promise(function(h){o=function(){s=!0,h()}}),l=function(m){m.context==="leader"&&m.token!=n.token&&(m.action==="apply"&&m.token>n.token&&o(),m.action==="tell"&&(o(),n._hasLeader=!0))};n.broadcastChannel.addEventListener("internal",l);var f=e?n._options.responseTime*4:n._options.responseTime;return Do(n,"apply").then(function(){return Promise.race([mo(f),a.then(function(){return Promise.reject(new Error)})])}).then(function(){return Do(n,"apply")}).then(function(){return Promise.race([mo(f),a.then(function(){return Promise.reject(new Error)})])}).catch(function(){}).then(function(){return n.broadcastChannel.removeEventListener("internal",l),s?!1:MO(n).then(function(){return!0})})};return this._aplQC=this._aplQC+1,this._aplQ=this._aplQ.then(function(){return r()}).then(function(){n._aplQC=n._aplQC-1}),this._aplQ.then(function(){return n.isLeader})},awaitLeadership:function(){return this._aLP||(this._aLP=PB(this)),this._aLP},set onduplicate(t){this._dpL=t},die:function(){var e=this;return this._lstns.forEach(function(n){return e.broadcastChannel.removeEventListener("internal",n)}),this._lstns=[],this._unl.forEach(function(n){return n.remove()}),this._unl=[],this.isLeader&&(this._hasLeader=!1,this.isLeader=!1),this.isDead=!0,Do(this,"death")}};function PB(t){return t.isLeader?Mi:new Promise(function(e){var n=!1;function r(){n||(n=!0,t.broadcastChannel.removeEventListener("internal",s),e(!0))}t.applyOnce().then(function(){t.isLeader&&r()});var i=function o(){return mo(t._options.fallbackInterval).then(function(){if(!(t.isDead||n))if(t.isLeader)r();else return t.applyOnce(!0).then(function(){t.isLeader?r():o()})})};i();var s=function(a){a.context==="leader"&&a.action==="death"&&(t._hasLeader=!1,t.applyOnce().then(function(){t.isLeader&&r()}))};t.broadcastChannel.addEventListener("internal",s),t._lstns.push(s)})}function RB(t,e){return t||(t={}),t=JSON.parse(JSON.stringify(t)),t.fallbackInterval||(t.fallbackInterval=3e3),t.responseTime||(t.responseTime=e.method.averageResponseTime(e.options)),t}function TB(t,e){if(t._leaderElector)throw new Error("BroadcastChannel already has a leader-elector");e=RB(e,t);var n=DN()?new NO(t,e):new BO(t,e);return t._befC.push(function(){return n.die()}),t._leaderElector=n,n}var Id=new Map;function MB(t,e,n,r){var i=Id.get(e);return i||(i={bc:new xh(["RxDB:",t,n].join("|")),refs:new Set},Id.set(e,i)),i.refs.add(r),i.bc}function yb(t,e){var n=Id.get(t);if(n&&(n.refs.delete(e),n.refs.size===0))return Id.delete(t),n.bc.close()}function NB(t,e,n,r){if(e.multiInstance){var i=r||MB(t,e.databaseInstanceToken,n.databaseName,n),s=new Kt,o=y=>{y.storageName===t&&y.databaseName===e.databaseName&&y.collectionName===e.collectionName&&y.version===e.schema.version&&s.next(y.eventBulk)};i.addEventListener("message",o);var a=n.changeStream(),l=!1,f=a.subscribe(y=>{l||i.postMessage({storageName:t,databaseName:e.databaseName,collectionName:e.collectionName,version:e.schema.version,eventBulk:y})});n.changeStream=function(){return s.asObservable().pipe(oT(a))};var h=n.close.bind(n);n.close=async function(){return l=!0,f.unsubscribe(),i.removeEventListener("message",o),r||await yb(e.databaseInstanceToken,n),h()};var m=n.remove.bind(n);n.remove=async function(){return l=!0,f.unsubscribe(),i.removeEventListener("message",o),r||await yb(e.databaseInstanceToken,n),m()}}}function BB(t,e){var n=e.map(r=>{var i=zi(t,r);if(!i)throw new Error("not in schema: "+r);var s=i.type,o;(s==="number"||s==="integer")&&(o=Yg(i));var a=XI(r),l=i.maxLength?i.maxLength:0,f;s==="string"?f=m=>{var y=a(m);return y||(y=""),y.padEnd(l," ")}:s==="boolean"?f=m=>{var y=a(m);return y?"1":"0"}:f=m=>{var y=a(m);return Ed(o,y)};var h={fieldName:r,schemaPart:i,parsedLengths:o,getValue:a,getIndexStringPart:f};return h});return n}function FB(t,e){var n=BB(t,e),r=n.length,i=n.map(o=>o.getIndexStringPart),s=function(o){for(var a="",l=0;l<r;++l)a+=i[l](o);return a};return s}function Yg(t){var e=Math.floor(t.minimum),n=Math.ceil(t.maximum),r=t.multipleOf,i=n-e,s=i.toString().length,o=r.toString().split("."),a=0;return o.length>1&&(a=o[1].length),{minimum:e,maximum:n,nonDecimals:s,decimals:a,roundedMinimum:e}}function Ed(t,e){typeof e>"u"&&(e=0),e<t.minimum&&(e=t.minimum),e>t.maximum&&(e=t.maximum);var n=(Math.floor(e)-t.roundedMinimum).toString(),r=n.padStart(t.nonDecimals,"0");if(t.decimals>0){var i=e.toString().split("."),s=i.length>1?i[1]:"0";r+=s.padEnd(t.decimals,"0")}return r}function vb(t,e,n){var r="";return e.forEach((i,s)=>{var o=zi(t,i),a=n[s],l=o.type;switch(l){case"string":var f=ye(o.maxLength,"maxLength not set");typeof a=="string"?r+=a.padEnd(f," "):r+="".padEnd(f," ");break;case"boolean":if(a===null)r+="0";else if(a===li)r+="0";else if(a===Ar)r+="1";else{var h=a?"1":"0";r+=h}break;case"number":case"integer":var m=Yg(o);if(a===null||a===li){var y="0";r+=y.repeat(m.nonDecimals+m.decimals)}else if(a===Ar)r+=Ed(m,m.maximum);else{var w=Ed(m,a);r+=w}break;default:throw new Error("unknown index type "+l)}}),r}function LB(t,e,n){var r="";return e.forEach((i,s)=>{var o=zi(t,i),a=n[s],l=o.type;switch(l){case"string":var f=ye(o.maxLength,"maxLength not set");typeof a=="string"&&a!==Ar?r+=a.padEnd(f," "):a===li?r+="".padEnd(f," "):r+="".padEnd(f,Ar);break;case"boolean":if(a===null)r+="1";else{var h=a?"1":"0";r+=h}break;case"number":case"integer":var m=Yg(o);if(a===null||a===Ar){var y="9";r+=y.repeat(m.nonDecimals+m.decimals)}else if(a===li){var w="0";r+=w.repeat(m.nonDecimals+m.decimals)}else r+=Ed(m,a);break;default:throw new Error("unknown index type "+l)}}),r}var gb=t=>Promise.resolve(t);function wb(t,e){if(t==="_deleted")return e;e=$e(e);var n=!!e._deleted;return e[t]=n,delete e._deleted,e}function ym(t,e,n){return n.map(r=>{var i=$e(r);if(e!=="_deleted"){var s=!!i[e];i._deleted=s,delete i[e]}else i._deleted=!!i._deleted;var o=t.schema.primaryPath;return i[o]=Ws(t.schema.jsonSchema,i),i})}function _b(t,e){if(typeof window>"u"||typeof window!="object"||typeof window.addEventListener>"u"||navigator.onLine)return t.promiseWait(e);var n,r=new Promise(i=>{n=()=>{window.removeEventListener("online",n),i()},window.addEventListener("online",n)});return Promise.race([r,t.promiseWait(e)]).then(()=>{window.removeEventListener("online",n)})}var FO=new WeakMap,$B=function(){function t(n,r,i,s,o,a,l,f){this.subs=[],this.subjects={received:new Kt,sent:new Kt,error:new Kt,canceled:new Jr(!1),active:new Jr(!1)},this.received$=this.subjects.received.asObservable(),this.sent$=this.subjects.sent.asObservable(),this.error$=this.subjects.error.asObservable(),this.canceled$=this.subjects.canceled.asObservable(),this.active$=this.subjects.active.asObservable(),this.onCancel=[],this.callOnStart=void 0,this.remoteEvents$=new Kt,this.replicationIdentifier=n,this.collection=r,this.deletedField=i,this.pull=s,this.push=o,this.live=a,this.retryTime=l,this.autoStart=f;var h=Mr(FO,r,()=>[]);h.push(this),this.collection.onDestroy.push(()=>this.cancel()),Object.keys(this.subjects).forEach(y=>{Object.defineProperty(this,y+"$",{get:function(){return this.subjects[y].asObservable()}})});var m=new Promise(y=>{this.callOnStart=y});this.startPromise=m}var e=t.prototype;return e.start=async function(){if(!this.isStopped()){var r=this.pull&&this.pull.modifier?this.pull.modifier:gb,i=this.push&&this.push.modifier?this.push.modifier:gb,s=this.collection.database,o="rx-replication-meta-"+await s.hashFunction([this.collection.name,this.replicationIdentifier].join("-")),a=Ky(this.collection.schema.jsonSchema,vd(this.collection.schema.jsonSchema)),[l]=await Promise.all([this.collection.database.storage.createStorageInstance({databaseName:s.name,collectionName:o,databaseInstanceToken:s.token,multiInstance:s.multiInstance,options:{},schema:a,password:s.password,devMode:it.isDevMode()}),fO(this.collection,o,a)]);this.metaInstance=l,this.internalReplicationState=pO({pushBatchSize:this.push&&this.push.batchSize?this.push.batchSize:100,pullBatchSize:this.pull&&this.pull.batchSize?this.pull.batchSize:100,initialCheckpoint:{upstream:this.push?this.push.initialCheckpoint:void 0,downstream:this.pull?this.pull.initialCheckpoint:void 0},forkInstance:this.collection.storageInstance,metaInstance:this.metaInstance,hashFunction:s.hashFunction,identifier:"rxdbreplication"+this.replicationIdentifier,conflictHandler:this.collection.conflictHandler,replicationHandler:{masterChangeStream$:this.remoteEvents$.asObservable().pipe(lt(f=>!!this.pull),Br(async f=>{if(f==="RESYNC")return f;var h=$e(f);return h.documents=ym(this.collection,this.deletedField,h.documents),h.documents=await Promise.all(h.documents.map(m=>r(m))),h})),masterChangesSince:async(f,h)=>{if(!this.pull)return{checkpoint:null,documents:[]};for(var m=!1,y={};!m&&!this.isStopped();)try{y=await this.pull.handler(f,h),m=!0}catch(E){var w=le("RC_PULL",{checkpoint:f,errors:Ua(E).map($=>ky($)),direction:"pull"});this.subjects.error.next(w),await _b(this.collection,ye(this.retryTime))}if(this.isStopped())return{checkpoint:null,documents:[]};var I=$e(y);return I.documents=ym(this.collection,this.deletedField,I.documents),I.documents=await Promise.all(I.documents.map(E=>r(E))),I},masterWrite:async f=>{if(!this.push)return[];var h=!1;await No("preReplicationMasterWrite",{rows:f,collection:this.collection});var m=await Promise.all(f.map(async $=>($.newDocumentState=await i($.newDocumentState),$.newDocumentState===null?null:($.assumedMasterState&&($.assumedMasterState=await i($.assumedMasterState)),this.deletedField!=="_deleted"&&($.newDocumentState=wb(this.deletedField,$.newDocumentState),$.assumedMasterState&&($.assumedMasterState=wb(this.deletedField,$.assumedMasterState))),$)))),y=m.filter(JI),w=null;for(y.length===0&&(h=!0,w=[]);!h&&!this.isStopped();)try{if(w=await this.push.handler(y),!Array.isArray(w))throw le("RC_PUSH_NO_AR",{pushRows:f,direction:"push",args:{result:w}});h=!0}catch($){var I=$.rxdb?$:le("RC_PUSH",{pushRows:f,errors:Ua($).map(S=>ky(S)),direction:"push"});this.subjects.error.next(I),await _b(this.collection,ye(this.retryTime))}if(this.isStopped())return[];await No("preReplicationMasterWriteDocumentsHandle",{result:w,collection:this.collection});var E=ym(this.collection,this.deletedField,ye(w));return E}}}),this.subs.push(this.internalReplicationState.events.error.subscribe(f=>{this.subjects.error.next(f)}),this.internalReplicationState.events.processed.down.subscribe(f=>this.subjects.received.next(f.document)),this.internalReplicationState.events.processed.up.subscribe(f=>{this.subjects.sent.next(f.newDocumentState)}),AE([this.internalReplicationState.events.active.down,this.internalReplicationState.events.active.up]).subscribe(([f,h])=>{var m=f||h;this.subjects.active.next(m)})),this.pull&&this.pull.stream$&&this.live&&this.subs.push(this.pull.stream$.subscribe({next:f=>{this.remoteEvents$.next(f)},error:f=>{this.subjects.error.next(f)}})),this.live||(await Tf(this.internalReplicationState),await ab(this.internalReplicationState),await this.cancel()),this.callOnStart()}},e.isStopped=function(){return!!this.subjects.canceled.getValue()},e.awaitInitialReplication=async function(){return await this.startPromise,Tf(ye(this.internalReplicationState))},e.awaitInSync=async function(){await this.startPromise,await Tf(ye(this.internalReplicationState));for(var r=2;r>0;)r--,await this.collection.database.requestIdlePromise(),await ab(ye(this.internalReplicationState));return!0},e.reSync=function(){this.remoteEvents$.next("RESYNC")},e.emitEvent=function(r){this.remoteEvents$.next(r)},e.cancel=async function(){if(this.isStopped())return Jn;var r=this.onCancel.map(i=>ZI(i()));return this.internalReplicationState&&await mO(this.internalReplicationState),this.metaInstance&&r.push(ye(this.internalReplicationState).checkpointQueue.then(()=>ye(this.metaInstance).close())),this.subs.forEach(i=>i.unsubscribe()),this.subjects.canceled.next(!0),this.subjects.active.complete(),this.subjects.canceled.complete(),this.subjects.error.complete(),this.subjects.received.complete(),this.subjects.sent.complete(),Promise.all(r)},t}(),Fr;(function(t){function e(U){return Array.isArray(U)?U.slice():t.isObject(U)?{...U}:U}t.clone=e;function n(U){let ee=r(U);return Array.isArray(U)&&(ee=ee.filter(ce=>ce!=="length")),ee}t.keys=n;function r(U){return U?Object.getOwnPropertyNames(U):[]}t.keysOfNonArray=r;function i(U,ee){return a(n(U),ce=>ee(U[ce],ce)),U}t.forOwn=i;function s(U,ee){return a(r(U),ce=>ee(U[ce],ce)),U}t.forOwnOfNonArray=s;function o(U,ee){return Array.isArray(U)?a(U,ee):s(U,ee),U}t.forEach=o;function a(U,ee){for(let ce=0,de=U.length;ce<de&&ee(U[ce],ce)!==!1;++ce);}t.forEachOfArray=a;function l(U,...ee){for(const ce of ee)o(ce,(de,Pe)=>{const ot=U[Pe];ot instanceof Object&&(de=l(e(ot),de)),U[Pe]=de});return U}t.merge=l;function f(U){return Array.isArray(U)||(U=r(U)),U.length===0}t.isEmpty=f,t.isFunction=U=>typeof U=="function",t.isUndefined=U=>U===void 0||U==="undefined";function h(U){return U==null||U==="undefined"||U==="null"}t.isNullOrUndefined=h,t.isObject=U=>Object.prototype.toString.call(U)==="[object Object]",t.isEmptyObject=U=>h(U)||t.isObject(U)&&f(U);function m(){return typeof globalThis.ngDevMode>"u"||!!globalThis.ngDevMode}t.isDevMode=m;function y(U){return typeof U=="number"&&!isNaN(U)}t.isValidNumber=y;function w(){}t.noop=w;function I(U){return U}t.identity=I;function E(U,ee){const ce=[];for(let de=0;de<U;++de)ce[de]=ee(de);return ce}t.times=E;function $(U,ee,ce){return t.isUndefined(ee)&&(ee=U,U=0),t.isUndefined(ce)&&(ce=ee<U?-1:1),E(Math.abs((ee-U)/(ce||1)),de=>U+ce*de)}t.range=$;function S(U){return t.isObject(U)?U._id:String(U)}t.getMaybeId=S;function _(U){return U.filter(I)}t.compact=_;function O(U){return f(U)?U:Array.isArray(U)?_(U):Object.entries(U).filter(([,ee])=>!h(ee)&&!f(ee)).reduce((ee,[ce,de])=>({...ee,[ce]:de}),{})}t.compactObject=O;function z(){var U;return(U=localStorage.debug)==null?void 0:U.includes("@ngx-odm/rxdb")}t.isDevModeForced=z;function W(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}t.isTestEnvironment=W,t.logger={log:function(){const U="#8d2089";return W()||!m()||!z()?w:console.log.bind(console,"%c[DEBUG::@ngx-odm/rxdb]",`background:${U};color:#fff;padding:2px;font-size:normal;`)}(),table:function(){return W()||!m()||!z()?w:console.table.bind(console)}()};function Q(U="Event"){return function(ce){return m()?ce.pipe(Cy({next(de){t.logger.log(`observable:${U}:next:`,de)},error(de){t.logger.log(`observable:${U}:error:`,de.message)},complete(){t.logger.log(`observable:${U}:complete`)}})):ce}}t.debug=Q;function H(U=3,ee=1e4){return ce=>ce.pipe(aT({count:U,delay:(de,Pe)=>{const ot=Math.pow(2,Pe-1)*ee;return t.logger.log("replication:kinto:longpoll:retry",Pe,ot),IE(ot)}}))}t.retryWithBackoff=H,t.tapOnce=U=>ee=>Ay(()=>(U(),ee)),t.deferUntil=U=>ee=>Ay(()=>U.pipe(Cl(()=>ee))),t.getDefaultQuery=()=>({selector:{_deleted:{$eq:!1}},skip:0,sort:[{id:"asc"}]});const X={properties:{id:{type:"string"},_deleted:{type:"boolean"}},primaryKey:"id",indexes:[["_deleted","id"]]};t.getDefaultQuery(),t.getDefaultPreparedQuery=()=>Jl(X,t.getDefaultQuery())})(Fr||(Fr={}));const LO=()=>typeof window=="object"&&"fetch"in window?window.fetch.bind(window):fetch;function bb(t){return t&&t instanceof $B}function Sb(t=!1){return Mt(e=>(Array.isArray(e)?e:[...e.values()]).map(n=>{const r={...n._data};return t||(delete r._rev,delete r._attachments,delete r._deleted,delete r._meta),r}))}const{debug:jB,isEmptyObject:UB,isFunction:zB}=Fr;function VB(t){return!UB(t)&&zB(t.run)}function Bu(t){return VB(t)?e=>new Ot(n=>e.subscribe(r=>t.run(()=>n.next(r)),r=>t.run(()=>n.error(r)),()=>t.run(()=>n.complete()))):e=>e}function tc(){return function(t,e,n){const r=n.value;return n.value=function(...i){return Ay(()=>this.initialized$.pipe(Cl(()=>r.apply(this,i)),jB(`collection.${e}`)))},n}}function kt(){return function(t,e,n){const r=n.value;return n.value=async function(...i){return await fT(this.initialized$).catch(()=>{throw new Error(`Collection "${this.config.name}" was not initialized. Please check RxDB errors.`)}),r.apply(this,i)},n}}var Ib,Eb,Ob,kb,Db,xb;const{getMaybeId:KB,logger:vm,debug:WB,noop:qB}=Fr;class Je{get initialized$(){return this._init$.asObservable()}get collection(){return this._collection}get db(){return this.dbService.db}get dbOptions(){return this.dbService.dbOptions}get replicationState(){return this._replicationState}get queryParams$(){var e;return(e=this.config.options)!=null&&e.useQueryParams?this.initialized$.pipe(Cl(()=>this.collection.queryParams.$)):im({})}constructor(e,n,r={},i=im(""),s=qB){this.config=e,this.dbService=n,this.ngZone=r,this.currentUrl$=i,this.updateQueryParamsFn=s,this._replicationState=null,this._init$=new TE,this.init(e)}destroy(){var e;(e=this.collection)==null||e.destroy()}setQueryParams(e){var n;(n=this.collection.queryParams)==null||n.set(e)}patchQueryParams(e){var n;(n=this.collection.queryParams)==null||n.patch(e)}async sync(){var e;if(bb(this.replicationState)){this.replicationState.reSync();return}if(typeof((e=this.config.options)==null?void 0:e.replicationStateFactory)=="function"){try{this._replicationState=this.config.options.replicationStateFactory(this.collection)}catch(n){vm.log("replicationState has error, ignore replication"),vm.log(n.message)}if(bb(this.replicationState))return this.replicationState.autoStart||this.replicationState.reSync(),Py(window,"online").pipe(WB("online"),ME(()=>!this.replicationState.isStopped())).subscribe(()=>{this._replicationState.reSync()}),this.replicationState.startPromise}}async info(){return this.collection.getMetadata()}async import(e){const n=await this.collection.schema.hash,r={name:this.collection.name,schemaHash:n,docs:e};this.collection.importJSON(r)}async export(){return this.collection.exportJSON()}docs(e,n=!1){return(cT(e)?e:im(e)).pipe(Cl(r=>this.collection.find(r).$),Sb(n),Bu(this.ngZone),Pi(Ai))}docsByIds(e,n=!1){return this.collection.findByIds(e).$.pipe(Sb(n),Bu(this.ngZone),Pi(Ai))}count(e){return this.collection.count(e).$.pipe(Bu(this.ngZone),Pi(Ai))}get(e,n=!1){return this.collection.findOne(e).$.pipe(Mt(r=>r?r.toMutableJSON(n):null),Bu(this.ngZone),Pi(Ai))}async insert(e){return this.collection.insert(e)}async insertBulk(e){return this.collection.bulkInsert(e)}async upsert(e){return this.collection.upsert(e)}async upsertBulk(e){return this.collection.bulkUpsert(e)}async set(e,n){return this.collection.findOne(e).update({$set:n})}async updateBulk(e,n){return this.collection.find(e).update({$set:n})}async remove(e){const n=KB(e);return this.collection.findOne(n).remove()}async removeBulk(e){return Array.isArray(e)?this.collection.bulkRemove(e):{success:[...(await this.collection.find(e).remove().catch(()=>new Map)).values()],error:[]}}async clear(){return this.collection.remove()}async getAttachments(e){const n=await this.collection.findOne(e).exec();if(!n)return null;const r=n.allAttachments().map(i=>i.getData());return Promise.all(r)}async getAttachmentById(e,n){const r=await this.collection.findOne(e).exec();if(!r)return null;const i=r.getAttachment(n);return i?i.getData():null}async putAttachment(e,n){const r=await this.collection.findOne(e).exec();r&&await r.putAttachment(n)}async removeAttachment(e,n){const r=await this.collection.findOne(e).exec();if(!r)return;const i=r.getAttachment(n);i&&await i.remove()}async addHook(e,n,r=!1){this.collection[e](n,r)}async getLocal(e,n){const r=await this.collection.getLocal(e);return r?n?r==null?void 0:r.get(n):r==null?void 0:r.toJSON().data:null}getLocal$(e,n){return this.collection.getLocal$(e).pipe(Mt(r=>r?n?r.get(n):r.toJSON().data:null),Fo(),Bu(this.ngZone))}async insertLocal(e,n){await this.collection.insertLocal(e,n)}async upsertLocal(e,n){await this.collection.upsertLocal(e,n)}async setLocal(e,n,r){var s,o;const i=await this.collection.getLocal(e);await this.collection.upsertLocal(e,{...((o=(s=i==null?void 0:i.toJSON)==null?void 0:s.call(i))==null?void 0:o.data)||{},[n]:r})}async removeLocal(e){const n=await this.collection.getLocal(e);await(n==null?void 0:n.remove())}async init(e){var i,s,o,a;const{name:n,options:r}=e;try{await this.dbService.initCollections({[n]:e}),this._collection=this.db.collections[n],r!=null&&r.useQueryParams&&this.collection.queryParamsInit(this.currentUrl$,this.updateQueryParamsFn),this._init$.next(!0),this._init$.complete()}catch(l){if(l.message.includes("DM5")||l.message.includes("DB6")&&((i=l.parameters.previousSchema)==null?void 0:i.version)===((s=l.parameters.schema)==null?void 0:s.version))vm.log("Reload the page to fix the issue. The database is in a state where it can not be used."),await SO(this.db.name,this.db.storage),(a=(o=window==null?void 0:window.location)==null?void 0:o.reload)==null||a.call(o);else throw this._init$.complete(),l}}}tt([kt(),re("design:type",Function),re("design:paramtypes",[]),re("design:returntype",Promise)],Je.prototype,"sync",null);tt([kt(),re("design:type",Function),re("design:paramtypes",[]),re("design:returntype",Promise)],Je.prototype,"info",null);tt([kt(),re("design:type",Function),re("design:paramtypes",[Array]),re("design:returntype",Promise)],Je.prototype,"import",null);tt([kt(),re("design:type",Function),re("design:paramtypes",[]),re("design:returntype",Promise)],Je.prototype,"export",null);tt([tc(),re("design:type",Function),re("design:paramtypes",[Object,Object]),re("design:returntype",Ot)],Je.prototype,"docs",null);tt([tc(),re("design:type",Function),re("design:paramtypes",[Array,Object]),re("design:returntype",Ot)],Je.prototype,"docsByIds",null);tt([tc(),re("design:type",Function),re("design:paramtypes",[Object]),re("design:returntype",Ot)],Je.prototype,"count",null);tt([tc(),re("design:type",Function),re("design:paramtypes",[String,Object]),re("design:returntype",Ot)],Je.prototype,"get",null);tt([kt(),re("design:type",Function),re("design:paramtypes",[Object]),re("design:returntype",Promise)],Je.prototype,"insert",null);tt([kt(),re("design:type",Function),re("design:paramtypes",[Array]),re("design:returntype",Promise)],Je.prototype,"insertBulk",null);tt([kt(),re("design:type",Function),re("design:paramtypes",[Object]),re("design:returntype",Promise)],Je.prototype,"upsert",null);tt([kt(),re("design:type",Function),re("design:paramtypes",[Array]),re("design:returntype",Promise)],Je.prototype,"upsertBulk",null);tt([kt(),re("design:type",Function),re("design:paramtypes",[String,Object]),re("design:returntype",Promise)],Je.prototype,"set",null);tt([kt(),re("design:type",Function),re("design:paramtypes",[Object,Object]),re("design:returntype",Promise)],Je.prototype,"updateBulk",null);tt([kt(),re("design:type",Function),re("design:paramtypes",[Object]),re("design:returntype",Promise)],Je.prototype,"remove",null);tt([kt(),re("design:type",Function),re("design:paramtypes",[Object]),re("design:returntype",Promise)],Je.prototype,"removeBulk",null);tt([kt(),re("design:type",Function),re("design:paramtypes",[]),re("design:returntype",Promise)],Je.prototype,"clear",null);tt([kt(),re("design:type",Function),re("design:paramtypes",[String]),re("design:returntype",Promise)],Je.prototype,"getAttachments",null);tt([kt(),re("design:type",Function),re("design:paramtypes",[String,String]),re("design:returntype",Promise)],Je.prototype,"getAttachmentById",null);tt([kt(),re("design:type",Function),re("design:paramtypes",[String,Object]),re("design:returntype",Promise)],Je.prototype,"putAttachment",null);tt([kt(),re("design:type",Function),re("design:paramtypes",[String,String]),re("design:returntype",Promise)],Je.prototype,"removeAttachment",null);tt([kt(),re("design:type",Function),re("design:paramtypes",[typeof(Ib=typeof Hook<"u"&&Hook)=="function"?Ib:Object,Object,Object]),re("design:returntype",Promise)],Je.prototype,"addHook",null);tt([kt(),re("design:type",Function),re("design:paramtypes",[String,typeof(Eb=typeof K<"u"&&K)=="function"?Eb:Object]),re("design:returntype",Promise)],Je.prototype,"getLocal",null);tt([tc(),re("design:type",Function),re("design:paramtypes",[String,typeof(Ob=typeof K<"u"&&K)=="function"?Ob:Object]),re("design:returntype",Ot)],Je.prototype,"getLocal$",null);tt([kt(),re("design:type",Function),re("design:paramtypes",[String,typeof(kb=typeof L<"u"&&L)=="function"?kb:Object]),re("design:returntype",Promise)],Je.prototype,"insertLocal",null);tt([kt(),re("design:type",Function),re("design:paramtypes",[String,typeof(Db=typeof L<"u"&&L)=="function"?Db:Object]),re("design:returntype",Promise)],Je.prototype,"upsertLocal",null);tt([kt(),re("design:type",Function),re("design:paramtypes",[String,typeof(xb=typeof K<"u"&&K)=="function"?xb:Object,Object]),re("design:returntype",Promise)],Je.prototype,"setLocal",null);tt([kt(),re("design:type",Function),re("design:paramtypes",[String]),re("design:returntype",Promise)],Je.prototype,"removeLocal",null);var $O={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(vw,function(){var n=function(u,c){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,p){d.__proto__=p}||function(d,p){for(var v in p)Object.prototype.hasOwnProperty.call(p,v)&&(d[v]=p[v])})(u,c)},r=function(){return(r=Object.assign||function(u){for(var c,d=1,p=arguments.length;d<p;d++)for(var v in c=arguments[d])Object.prototype.hasOwnProperty.call(c,v)&&(u[v]=c[v]);return u}).apply(this,arguments)};function i(u,c,d){if(d||arguments.length===2)for(var p,v=0,g=c.length;v<g;v++)!p&&v in c||((p=p||Array.prototype.slice.call(c,0,v))[v]=c[v]);return u.concat(p||Array.prototype.slice.call(c))}var s=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:vw,o=Object.keys,a=Array.isArray;function l(u,c){return typeof c!="object"||o(c).forEach(function(d){u[d]=c[d]}),u}typeof Promise>"u"||s.Promise||(s.Promise=Promise);var f=Object.getPrototypeOf,h={}.hasOwnProperty;function m(u,c){return h.call(u,c)}function y(u,c){typeof c=="function"&&(c=c(f(u))),(typeof Reflect>"u"?o:Reflect.ownKeys)(c).forEach(function(d){I(u,d,c[d])})}var w=Object.defineProperty;function I(u,c,d,p){w(u,c,l(d&&m(d,"get")&&typeof d.get=="function"?{get:d.get,set:d.set,configurable:!0}:{value:d,configurable:!0,writable:!0},p))}function E(u){return{from:function(c){return u.prototype=Object.create(c.prototype),I(u.prototype,"constructor",u),{extend:y.bind(null,u.prototype)}}}}var $=Object.getOwnPropertyDescriptor,S=[].slice;function _(u,c,d){return S.call(u,c,d)}function O(u,c){return c(u)}function z(u){if(!u)throw new Error("Assertion Failed")}function W(u){s.setImmediate?setImmediate(u):setTimeout(u,0)}function Q(u,c){if(typeof c=="string"&&m(u,c))return u[c];if(!c)return u;if(typeof c!="string"){for(var d=[],p=0,v=c.length;p<v;++p){var g=Q(u,c[p]);d.push(g)}return d}var b=c.indexOf(".");if(b!==-1){var k=u[c.substr(0,b)];return k==null?void 0:Q(k,c.substr(b+1))}}function H(u,c,d){if(u&&c!==void 0&&!("isFrozen"in Object&&Object.isFrozen(u)))if(typeof c!="string"&&"length"in c){z(typeof d!="string"&&"length"in d);for(var p=0,v=c.length;p<v;++p)H(u,c[p],d[p])}else{var g,b,k=c.indexOf(".");k!==-1?(g=c.substr(0,k),(b=c.substr(k+1))===""?d===void 0?a(u)&&!isNaN(parseInt(g))?u.splice(g,1):delete u[g]:u[g]=d:H(k=!(k=u[g])||!m(u,g)?u[g]={}:k,b,d)):d===void 0?a(u)&&!isNaN(parseInt(c))?u.splice(c,1):delete u[c]:u[c]=d}}function X(u){var c,d={};for(c in u)m(u,c)&&(d[c]=u[c]);return d}var U=[].concat;function ee(u){return U.apply([],u)}var Ur="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(ee([8,16,32,64].map(function(u){return["Int","Uint","Float"].map(function(c){return c+u+"Array"})}))).filter(function(u){return s[u]}),ce=new Set(Ur.map(function(u){return s[u]})),de=null;function Pe(u){return de=new WeakMap,u=function c(d){if(!d||typeof d!="object")return d;var p=de.get(d);if(p)return p;if(a(d)){p=[],de.set(d,p);for(var v=0,g=d.length;v<g;++v)p.push(c(d[v]))}else if(ce.has(d.constructor))p=d;else{var b,k=f(d);for(b in p=k===Object.prototype?{}:Object.create(k),de.set(d,p),d)m(d,b)&&(p[b]=c(d[b]))}return p}(u),de=null,u}var ot={}.toString;function ct(u){return ot.call(u).slice(8,-1)}var Te=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Dt=typeof Te=="symbol"?function(u){var c;return u!=null&&(c=u[Te])&&c.apply(u)}:function(){return null};function G(u,c){return c=u.indexOf(c),0<=c&&u.splice(c,1),0<=c}var oe={};function ue(u){var c,d,p,v;if(arguments.length===1){if(a(u))return u.slice();if(this===oe&&typeof u=="string")return[u];if(v=Dt(u)){for(d=[];!(p=v.next()).done;)d.push(p.value);return d}if(u==null)return[u];if(typeof(c=u.length)!="number")return[u];for(d=new Array(c);c--;)d[c]=u[c];return d}for(c=arguments.length,d=new Array(c);c--;)d[c]=arguments[c];return d}var Re=typeof Symbol<"u"?function(u){return u[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},mu=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],lr=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(mu),xt={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ft(u,c){this.name=u,this.message=c}function Ct(u,c){return u+". Errors: "+Object.keys(c).map(function(d){return c[d].toString()}).filter(function(d,p,v){return v.indexOf(d)===p}).join(`
`)}function Un(u,c,d,p){this.failures=c,this.failedKeys=p,this.successCount=d,this.message=Ct(u,c)}function tn(u,c){this.name="BulkError",this.failures=Object.keys(c).map(function(d){return c[d]}),this.failuresByPos=c,this.message=Ct(u,this.failures)}E(ft).from(Error).extend({toString:function(){return this.name+": "+this.message}}),E(Un).from(ft),E(tn).from(ft);var Xi=lr.reduce(function(u,c){return u[c]=c+"Error",u},{}),bx=ft,pe=lr.reduce(function(u,c){var d=c+"Error";function p(v,g){this.name=d,v?typeof v=="string"?(this.message="".concat(v).concat(g?`
 `+g:""),this.inner=g||null):typeof v=="object"&&(this.message="".concat(v.name," ").concat(v.message),this.inner=v):(this.message=xt[c]||d,this.inner=null)}return E(p).from(bx),u[c]=p,u},{});pe.Syntax=SyntaxError,pe.Type=TypeError,pe.Range=RangeError;var $0=mu.reduce(function(u,c){return u[c+"Error"]=pe[c],u},{}),hc=lr.reduce(function(u,c){return["Syntax","Type","Range"].indexOf(c)===-1&&(u[c+"Error"]=pe[c]),u},{});function et(){}function hu(u){return u}function Sx(u,c){return u==null||u===hu?c:function(d){return c(u(d))}}function Gs(u,c){return function(){u.apply(this,arguments),c.apply(this,arguments)}}function Ix(u,c){return u===et?c:function(){var d=u.apply(this,arguments);d!==void 0&&(arguments[0]=d);var p=this.onsuccess,v=this.onerror;this.onsuccess=null,this.onerror=null;var g=c.apply(this,arguments);return p&&(this.onsuccess=this.onsuccess?Gs(p,this.onsuccess):p),v&&(this.onerror=this.onerror?Gs(v,this.onerror):v),g!==void 0?g:d}}function Ex(u,c){return u===et?c:function(){u.apply(this,arguments);var d=this.onsuccess,p=this.onerror;this.onsuccess=this.onerror=null,c.apply(this,arguments),d&&(this.onsuccess=this.onsuccess?Gs(d,this.onsuccess):d),p&&(this.onerror=this.onerror?Gs(p,this.onerror):p)}}function Ox(u,c){return u===et?c:function(d){var p=u.apply(this,arguments);l(d,p);var v=this.onsuccess,g=this.onerror;return this.onsuccess=null,this.onerror=null,d=c.apply(this,arguments),v&&(this.onsuccess=this.onsuccess?Gs(v,this.onsuccess):v),g&&(this.onerror=this.onerror?Gs(g,this.onerror):g),p===void 0?d===void 0?void 0:d:l(p,d)}}function kx(u,c){return u===et?c:function(){return c.apply(this,arguments)!==!1&&u.apply(this,arguments)}}function Vh(u,c){return u===et?c:function(){var d=u.apply(this,arguments);if(d&&typeof d.then=="function"){for(var p=this,v=arguments.length,g=new Array(v);v--;)g[v]=arguments[v];return d.then(function(){return c.apply(p,g)})}return c.apply(this,arguments)}}hc.ModifyError=Un,hc.DexieError=ft,hc.BulkError=tn;var jr=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function j0(u){jr=u}var pu={},U0=100,Ur=typeof Promise>"u"?[]:function(){var u=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[u,f(u),u];var c=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[c,f(c),u]}(),mu=Ur[0],lr=Ur[1],Ur=Ur[2],lr=lr&&lr.then,yu=mu&&mu.constructor,Kh=!!Ur,vu=function(u,c){gu.push([u,c]),pc&&(queueMicrotask(xx),pc=!1)},Wh=!0,pc=!0,Js=[],mc=[],qh=hu,Zi={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:et,pgp:!1,env:{},finalize:et},fe=Zi,gu=[],Xs=0,yc=[];function se(u){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var c=this._PSD=fe;if(typeof u!="function"){if(u!==pu)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Qh(this,this._value))}this._state=null,this._value=null,++c.ref,function d(p,v){try{v(function(g){if(p._state===null){if(g===p)throw new TypeError("A promise cannot be resolved with itself.");var b=p._lib&&Ho();g&&typeof g.then=="function"?d(p,function(k,A){g instanceof se?g._then(k,A):g.then(k,A)}):(p._state=!0,p._value=g,V0(p)),b&&Qo()}},Qh.bind(null,p))}catch(g){Qh(p,g)}}(this,u)}var Hh={get:function(){var u=fe,c=_c;function d(p,v){var g=this,b=!u.global&&(u!==fe||c!==_c),k=b&&!ts(),A=new se(function(x,M){Yh(g,new z0(W0(p,u,b,k),W0(v,u,b,k),x,M,u))});return this._consoleTask&&(A._consoleTask=this._consoleTask),A}return d.prototype=pu,d},set:function(u){I(this,"then",u&&u.prototype===pu?Hh:{get:function(){return u},set:Hh.set})}};function z0(u,c,d,p,v){this.onFulfilled=typeof u=="function"?u:null,this.onRejected=typeof c=="function"?c:null,this.resolve=d,this.reject=p,this.psd=v}function Qh(u,c){var d,p;mc.push(c),u._state===null&&(d=u._lib&&Ho(),c=qh(c),u._state=!1,u._value=c,p=u,Js.some(function(v){return v._value===p._value})||Js.push(p),V0(u),d&&Qo())}function V0(u){var c=u._listeners;u._listeners=[];for(var d=0,p=c.length;d<p;++d)Yh(u,c[d]);var v=u._PSD;--v.ref||v.finalize(),Xs===0&&(++Xs,vu(function(){--Xs==0&&Gh()},[]))}function Yh(u,c){if(u._state!==null){var d=u._state?c.onFulfilled:c.onRejected;if(d===null)return(u._state?c.resolve:c.reject)(u._value);++c.psd.ref,++Xs,vu(Dx,[d,u,c])}else u._listeners.push(c)}function Dx(u,c,d){try{var p,v=c._value;!c._state&&mc.length&&(mc=[]),p=jr&&c._consoleTask?c._consoleTask.run(function(){return u(v)}):u(v),c._state||mc.indexOf(v)!==-1||function(g){for(var b=Js.length;b;)if(Js[--b]._value===g._value)return Js.splice(b,1)}(c),d.resolve(p)}catch(g){d.reject(g)}finally{--Xs==0&&Gh(),--d.psd.ref||d.psd.finalize()}}function xx(){Zs(Zi,function(){Ho()&&Qo()})}function Ho(){var u=Wh;return pc=Wh=!1,u}function Qo(){var u,c,d;do for(;0<gu.length;)for(u=gu,gu=[],d=u.length,c=0;c<d;++c){var p=u[c];p[0].apply(null,p[1])}while(0<gu.length);pc=Wh=!0}function Gh(){var u=Js;Js=[],u.forEach(function(p){p._PSD.onunhandled.call(null,p._value,p)});for(var c=yc.slice(0),d=c.length;d;)c[--d]()}function vc(u){return new se(pu,!1,u)}function vt(u,c){var d=fe;return function(){var p=Ho(),v=fe;try{return ns(d,!0),u.apply(this,arguments)}catch(g){c&&c(g)}finally{ns(v,!1),p&&Qo()}}}y(se.prototype,{then:Hh,_then:function(u,c){Yh(this,new z0(null,null,u,c,fe))},catch:function(u){if(arguments.length===1)return this.then(null,u);var c=u,d=arguments[1];return typeof c=="function"?this.then(null,function(p){return(p instanceof c?d:vc)(p)}):this.then(null,function(p){return(p&&p.name===c?d:vc)(p)})},finally:function(u){return this.then(function(c){return se.resolve(u()).then(function(){return c})},function(c){return se.resolve(u()).then(function(){return vc(c)})})},timeout:function(u,c){var d=this;return u<1/0?new se(function(p,v){var g=setTimeout(function(){return v(new pe.Timeout(c))},u);d.then(p,v).finally(clearTimeout.bind(null,g))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&I(se.prototype,Symbol.toStringTag,"Dexie.Promise"),Zi.env=K0(),y(se,{all:function(){var u=ue.apply(null,arguments).map(bc);return new se(function(c,d){u.length===0&&c([]);var p=u.length;u.forEach(function(v,g){return se.resolve(v).then(function(b){u[g]=b,--p||c(u)},d)})})},resolve:function(u){return u instanceof se?u:u&&typeof u.then=="function"?new se(function(c,d){u.then(c,d)}):new se(pu,!0,u)},reject:vc,race:function(){var u=ue.apply(null,arguments).map(bc);return new se(function(c,d){u.map(function(p){return se.resolve(p).then(c,d)})})},PSD:{get:function(){return fe},set:function(u){return fe=u}},totalEchoes:{get:function(){return _c}},newPSD:es,usePSD:Zs,scheduler:{get:function(){return vu},set:function(u){vu=u}},rejectionMapper:{get:function(){return qh},set:function(u){qh=u}},follow:function(u,c){return new se(function(d,p){return es(function(v,g){var b=fe;b.unhandleds=[],b.onunhandled=g,b.finalize=Gs(function(){var k,A=this;k=function(){A.unhandleds.length===0?v():g(A.unhandleds[0])},yc.push(function x(){k(),yc.splice(yc.indexOf(x),1)}),++Xs,vu(function(){--Xs==0&&Gh()},[])},b.finalize),u()},c,d,p)})}}),yu&&(yu.allSettled&&I(se,"allSettled",function(){var u=ue.apply(null,arguments).map(bc);return new se(function(c){u.length===0&&c([]);var d=u.length,p=new Array(d);u.forEach(function(v,g){return se.resolve(v).then(function(b){return p[g]={status:"fulfilled",value:b}},function(b){return p[g]={status:"rejected",reason:b}}).then(function(){return--d||c(p)})})})}),yu.any&&typeof AggregateError<"u"&&I(se,"any",function(){var u=ue.apply(null,arguments).map(bc);return new se(function(c,d){u.length===0&&d(new AggregateError([]));var p=u.length,v=new Array(p);u.forEach(function(g,b){return se.resolve(g).then(function(k){return c(k)},function(k){v[b]=k,--p||d(new AggregateError(v))})})})}));var Wt={awaits:0,echoes:0,id:0},Cx=0,gc=[],wc=0,_c=0,Ax=0;function es(u,c,d,p){var v=fe,g=Object.create(v);return g.parent=v,g.ref=0,g.global=!1,g.id=++Ax,Zi.env,g.env=Kh?{Promise:se,PromiseProp:{value:se,configurable:!0,writable:!0},all:se.all,race:se.race,allSettled:se.allSettled,any:se.any,resolve:se.resolve,reject:se.reject}:{},c&&l(g,c),++v.ref,g.finalize=function(){--this.parent.ref||this.parent.finalize()},p=Zs(g,u,d,p),g.ref===0&&g.finalize(),p}function Yo(){return Wt.id||(Wt.id=++Cx),++Wt.awaits,Wt.echoes+=U0,Wt.id}function ts(){return!!Wt.awaits&&(--Wt.awaits==0&&(Wt.id=0),Wt.echoes=Wt.awaits*U0,!0)}function bc(u){return Wt.echoes&&u&&u.constructor===yu?(Yo(),u.then(function(c){return ts(),c},function(c){return ts(),Pt(c)})):u}function Px(){var u=gc[gc.length-1];gc.pop(),ns(u,!1)}function ns(u,c){var d,p=fe;(c?!Wt.echoes||wc++&&u===fe:!wc||--wc&&u===fe)||queueMicrotask(c?(function(v){++_c,Wt.echoes&&--Wt.echoes!=0||(Wt.echoes=Wt.awaits=Wt.id=0),gc.push(fe),ns(v,!0)}).bind(null,u):Px),u!==fe&&(fe=u,p===Zi&&(Zi.env=K0()),Kh&&(d=Zi.env.Promise,c=u.env,(p.global||u.global)&&(Object.defineProperty(s,"Promise",c.PromiseProp),d.all=c.all,d.race=c.race,d.resolve=c.resolve,d.reject=c.reject,c.allSettled&&(d.allSettled=c.allSettled),c.any&&(d.any=c.any))))}function K0(){var u=s.Promise;return Kh?{Promise:u,PromiseProp:Object.getOwnPropertyDescriptor(s,"Promise"),all:u.all,race:u.race,allSettled:u.allSettled,any:u.any,resolve:u.resolve,reject:u.reject}:{}}function Zs(u,c,d,p,v){var g=fe;try{return ns(u,!0),c(d,p,v)}finally{ns(g,!1)}}function W0(u,c,d,p){return typeof u!="function"?u:function(){var v=fe;d&&Yo(),ns(c,!0);try{return u.apply(this,arguments)}finally{ns(v,!1),p&&queueMicrotask(ts)}}}function Jh(u){Promise===yu&&Wt.echoes===0?wc===0?u():enqueueNativeMicroTask(u):setTimeout(u,0)}(""+lr).indexOf("[native code]")===-1&&(Yo=ts=et);var Pt=se.reject,Ur="4.0.1-beta.11",eo=String.fromCharCode(65535),mi="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",q0="String expected.",Go=[],Sc="__dbnames",Xh="readonly",Zh="readwrite";function to(u,c){return u?c?function(){return u.apply(this,arguments)&&c.apply(this,arguments)}:u:c}var H0={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Ic(u){return typeof u!="string"||/\./.test(u)?function(c){return c}:function(c){return c[u]===void 0&&u in c&&delete(c=Pe(c))[u],c}}function Q0(){throw pe.Type()}function je(u,c){try{var d=Y0(u),p=Y0(c);if(d!==p)return d==="Array"?1:p==="Array"?-1:d==="binary"?1:p==="binary"?-1:d==="string"?1:p==="string"?-1:d==="Date"?1:p!=="Date"?NaN:-1;switch(d){case"number":case"Date":case"string":return c<u?1:u<c?-1:0;case"binary":return function(v,g){for(var b=v.length,k=g.length,A=b<k?b:k,x=0;x<A;++x)if(v[x]!==g[x])return v[x]<g[x]?-1:1;return b===k?0:b<k?-1:1}(G0(u),G0(c));case"Array":return function(v,g){for(var b=v.length,k=g.length,A=b<k?b:k,x=0;x<A;++x){var M=je(v[x],g[x]);if(M!==0)return M}return b===k?0:b<k?-1:1}(u,c)}}catch{}return NaN}function Y0(u){var c=typeof u;return c!="object"?c:ArrayBuffer.isView(u)?"binary":(u=ct(u),u==="ArrayBuffer"?"binary":u)}function G0(u){return u instanceof Uint8Array?u:ArrayBuffer.isView(u)?new Uint8Array(u.buffer,u.byteOffset,u.byteLength):new Uint8Array(u)}var J0=(dt.prototype._trans=function(u,c,d){var p=this._tx||fe.trans,v=this.name,g=jr&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(u==="readonly"?"read":"write"," ").concat(this.name));function b(x,M,D){if(!D.schema[v])throw new pe.NotFound("Table "+v+" not part of transaction");return c(D.idbtrans,D)}var k=Ho();try{var A=p&&p.db._novip===this.db._novip?p===fe.trans?p._promise(u,b,d):es(function(){return p._promise(u,b,d)},{trans:p,transless:fe.transless||fe}):function x(M,D,C,P){if(M.idbdb&&(M._state.openComplete||fe.letThrough||M._vip)){var T=M._createTransaction(D,C,M._dbSchema);try{T.create(),M._state.PR1398_maxLoop=3}catch(B){return B.name===Xi.InvalidState&&M.isOpen()&&0<--M._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),M.close({disableAutoOpen:!1}),M.open().then(function(){return x(M,D,C,P)})):Pt(B)}return T._promise(D,function(B,R){return es(function(){return fe.trans=T,P(B,R,T)})}).then(function(B){if(D==="readwrite")try{T.idbtrans.commit()}catch{}return D==="readonly"?B:T._completion.then(function(){return B})})}if(M._state.openComplete)return Pt(new pe.DatabaseClosed(M._state.dbOpenError));if(!M._state.isBeingOpened){if(!M._state.autoOpen)return Pt(new pe.DatabaseClosed);M.open().catch(et)}return M._state.dbReadyPromise.then(function(){return x(M,D,C,P)})}(this.db,u,[this.name],b);return g&&(A._consoleTask=g,A=A.catch(function(x){return console.trace(x),Pt(x)})),A}finally{k&&Qo()}},dt.prototype.get=function(u,c){var d=this;return u&&u.constructor===Object?this.where(u).first(c):u==null?Pt(new pe.Type("Invalid argument to Table.get()")):this._trans("readonly",function(p){return d.core.get({trans:p,key:u}).then(function(v){return d.hook.reading.fire(v)})}).then(c)},dt.prototype.where=function(u){if(typeof u=="string")return new this.db.WhereClause(this,u);if(a(u))return new this.db.WhereClause(this,"[".concat(u.join("+"),"]"));var c=o(u);if(c.length===1)return this.where(c[0]).equals(u[c[0]]);var d=this.schema.indexes.concat(this.schema.primKey).filter(function(A){if(A.compound&&c.every(function(M){return 0<=A.keyPath.indexOf(M)})){for(var x=0;x<c.length;++x)if(c.indexOf(A.keyPath[x])===-1)return!1;return!0}return!1}).sort(function(A,x){return A.keyPath.length-x.keyPath.length})[0];if(d&&this.db._maxKey!==eo){var b=d.keyPath.slice(0,c.length);return this.where(b).equals(b.map(function(x){return u[x]}))}!d&&jr&&console.warn("The query ".concat(JSON.stringify(u)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(c.join("+"),"]"));var p=this.schema.idxByName,v=this.db._deps.indexedDB;function g(A,x){return v.cmp(A,x)===0}var k=c.reduce(function(C,x){var M=C[0],D=C[1],C=p[x],P=u[x];return[M||C,M||!C?to(D,C&&C.multi?function(T){return T=Q(T,x),a(T)&&T.some(function(B){return g(P,B)})}:function(T){return g(P,Q(T,x))}):D]},[null,null]),b=k[0],k=k[1];return b?this.where(b.name).equals(u[b.keyPath]).filter(k):d?this.filter(k):this.where(c).equals("")},dt.prototype.filter=function(u){return this.toCollection().and(u)},dt.prototype.count=function(u){return this.toCollection().count(u)},dt.prototype.offset=function(u){return this.toCollection().offset(u)},dt.prototype.limit=function(u){return this.toCollection().limit(u)},dt.prototype.each=function(u){return this.toCollection().each(u)},dt.prototype.toArray=function(u){return this.toCollection().toArray(u)},dt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},dt.prototype.orderBy=function(u){return new this.db.Collection(new this.db.WhereClause(this,a(u)?"[".concat(u.join("+"),"]"):u))},dt.prototype.reverse=function(){return this.toCollection().reverse()},dt.prototype.mapToClass=function(u){var c,d=this.db,p=this.name;function v(){return c!==null&&c.apply(this,arguments)||this}(this.schema.mappedClass=u).prototype instanceof Q0&&(function(A,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");function M(){this.constructor=A}n(A,x),A.prototype=x===null?Object.create(x):(M.prototype=x.prototype,new M)}(v,c=u),Object.defineProperty(v.prototype,"db",{get:function(){return d},enumerable:!1,configurable:!0}),v.prototype.table=function(){return p},u=v);for(var g=new Set,b=u.prototype;b;b=f(b))Object.getOwnPropertyNames(b).forEach(function(A){return g.add(A)});function k(A){if(!A)return A;var x,M=Object.create(u.prototype);for(x in A)if(!g.has(x))try{M[x]=A[x]}catch{}return M}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=k,this.hook("reading",k),u},dt.prototype.defineClass=function(){return this.mapToClass(function(u){l(this,u)})},dt.prototype.add=function(u,c){var d=this,p=this.schema.primKey,v=p.auto,g=p.keyPath,b=u;return g&&v&&(b=Ic(g)(u)),this._trans("readwrite",function(k){return d.core.mutate({trans:k,type:"add",keys:c!=null?[c]:null,values:[b]})}).then(function(k){return k.numFailures?se.reject(k.failures[0]):k.lastResult}).then(function(k){if(g)try{H(u,g,k)}catch{}return k})},dt.prototype.update=function(u,c){return typeof u!="object"||a(u)?this.where(":id").equals(u).modify(c):(u=Q(u,this.schema.primKey.keyPath),u===void 0?Pt(new pe.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(u).modify(c))},dt.prototype.put=function(u,c){var d=this,p=this.schema.primKey,v=p.auto,g=p.keyPath,b=u;return g&&v&&(b=Ic(g)(u)),this._trans("readwrite",function(k){return d.core.mutate({trans:k,type:"put",values:[b],keys:c!=null?[c]:null})}).then(function(k){return k.numFailures?se.reject(k.failures[0]):k.lastResult}).then(function(k){if(g)try{H(u,g,k)}catch{}return k})},dt.prototype.delete=function(u){var c=this;return this._trans("readwrite",function(d){return c.core.mutate({trans:d,type:"delete",keys:[u]})}).then(function(d){return d.numFailures?se.reject(d.failures[0]):void 0})},dt.prototype.clear=function(){var u=this;return this._trans("readwrite",function(c){return u.core.mutate({trans:c,type:"deleteRange",range:H0})}).then(function(c){return c.numFailures?se.reject(c.failures[0]):void 0})},dt.prototype.bulkGet=function(u){var c=this;return this._trans("readonly",function(d){return c.core.getMany({keys:u,trans:d}).then(function(p){return p.map(function(v){return c.hook.reading.fire(v)})})})},dt.prototype.bulkAdd=function(u,c,d){var p=this,v=Array.isArray(c)?c:void 0,g=(d=d||(v?void 0:c))?d.allKeys:void 0;return this._trans("readwrite",function(b){var x=p.schema.primKey,k=x.auto,x=x.keyPath;if(x&&v)throw new pe.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(v&&v.length!==u.length)throw new pe.InvalidArgument("Arguments objects and keys must have the same length");var A=u.length,x=x&&k?u.map(Ic(x)):u;return p.core.mutate({trans:b,type:"add",keys:v,values:x,wantResults:g}).then(function(T){var D=T.numFailures,C=T.results,P=T.lastResult,T=T.failures;if(D===0)return g?C:P;throw new tn("".concat(p.name,".bulkAdd(): ").concat(D," of ").concat(A," operations failed"),T)})})},dt.prototype.bulkPut=function(u,c,d){var p=this,v=Array.isArray(c)?c:void 0,g=(d=d||(v?void 0:c))?d.allKeys:void 0;return this._trans("readwrite",function(b){var x=p.schema.primKey,k=x.auto,x=x.keyPath;if(x&&v)throw new pe.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(v&&v.length!==u.length)throw new pe.InvalidArgument("Arguments objects and keys must have the same length");var A=u.length,x=x&&k?u.map(Ic(x)):u;return p.core.mutate({trans:b,type:"put",keys:v,values:x,wantResults:g}).then(function(T){var D=T.numFailures,C=T.results,P=T.lastResult,T=T.failures;if(D===0)return g?C:P;throw new tn("".concat(p.name,".bulkPut(): ").concat(D," of ").concat(A," operations failed"),T)})})},dt.prototype.bulkUpdate=function(u){var c=this,d=this.core,p=u.map(function(b){return b.key}),v=u.map(function(b){return b.changes}),g=[];return this._trans("readwrite",function(b){return d.getMany({trans:b,keys:p,cache:"clone"}).then(function(k){var A=[],x=[];u.forEach(function(D,C){var P=D.key,T=D.changes,B=k[C];if(B){for(var R=0,F=Object.keys(T);R<F.length;R++){var j=F[R],V=T[j];if(j===c.schema.primKey.keyPath){if(je(V,P)!==0)throw new pe.Constraint("Cannot update primary key in bulkUpdate()")}else H(B,j,V)}g.push(C),A.push(P),x.push(B)}});var M=A.length;return d.mutate({trans:b,type:"put",keys:A,values:x,updates:{keys:p,changeSpecs:v}}).then(function(D){var C=D.numFailures,P=D.failures;if(C===0)return M;for(var T=0,B=Object.keys(P);T<B.length;T++){var R,F=B[T],j=g[Number(F)];j!=null&&(R=P[F],delete P[F],P[j]=R)}throw new tn("".concat(c.name,".bulkUpdate(): ").concat(C," of ").concat(M," operations failed"),P)})})})},dt.prototype.bulkDelete=function(u){var c=this,d=u.length;return this._trans("readwrite",function(p){return c.core.mutate({trans:p,type:"delete",keys:u})}).then(function(b){var v=b.numFailures,g=b.lastResult,b=b.failures;if(v===0)return g;throw new tn("".concat(c.name,".bulkDelete(): ").concat(v," of ").concat(d," operations failed"),b)})},dt);function dt(){}function wu(u){function c(b,k){if(k){for(var A=arguments.length,x=new Array(A-1);--A;)x[A-1]=arguments[A];return d[b].subscribe.apply(null,x),u}if(typeof b=="string")return d[b]}var d={};c.addEventType=g;for(var p=1,v=arguments.length;p<v;++p)g(arguments[p]);return c;function g(b,k,A){if(typeof b!="object"){var x;k=k||kx;var M={subscribers:[],fire:A=A||et,subscribe:function(D){M.subscribers.indexOf(D)===-1&&(M.subscribers.push(D),M.fire=k(M.fire,D))},unsubscribe:function(D){M.subscribers=M.subscribers.filter(function(C){return C!==D}),M.fire=M.subscribers.reduce(k,A)}};return d[b]=c[b]=M}o(x=b).forEach(function(D){var C=x[D];if(a(C))g(D,x[D][0],x[D][1]);else{if(C!=="asap")throw new pe.InvalidArgument("Invalid event config");var P=g(D,hu,function(){for(var T=arguments.length,B=new Array(T);T--;)B[T]=arguments[T];P.subscribers.forEach(function(R){W(function(){R.apply(null,B)})})})}})}}function _u(u,c){return E(c).from({prototype:u}),c}function Jo(u,c){return!(u.filter||u.algorithm||u.or)&&(c?u.justLimit:!u.replayFilter)}function ep(u,c){u.filter=to(u.filter,c)}function tp(u,c,d){var p=u.replayFilter;u.replayFilter=p?function(){return to(p(),c())}:c,u.justLimit=d&&!p}function Ec(u,c){if(u.isPrimKey)return c.primaryKey;var d=c.getIndexByKeyPath(u.index);if(!d)throw new pe.Schema("KeyPath "+u.index+" on object store "+c.name+" is not indexed");return d}function X0(u,c,d){var p=Ec(u,c.schema);return c.openCursor({trans:d,values:!u.keysOnly,reverse:u.dir==="prev",unique:!!u.unique,query:{index:p,range:u.range}})}function Oc(u,c,d,p){var v=u.replayFilter?to(u.filter,u.replayFilter()):u.filter;if(u.or){var g={},b=function(k,A,x){var M,D;v&&!v(A,x,function(C){return A.stop(C)},function(C){return A.fail(C)})||((D=""+(M=A.primaryKey))=="[object ArrayBuffer]"&&(D=""+new Uint8Array(M)),m(g,D)||(g[D]=!0,c(k,A,x)))};return Promise.all([u.or._iterate(b,d),Z0(X0(u,p,d),u.algorithm,b,!u.keysOnly&&u.valueMapper)])}return Z0(X0(u,p,d),to(u.algorithm,v),c,!u.keysOnly&&u.valueMapper)}function Z0(u,c,d,p){var v=vt(p?function(g,b,k){return d(p(g),b,k)}:d);return u.then(function(g){if(g)return g.start(function(){var b=function(){return g.continue()};c&&!c(g,function(k){return b=k},function(k){g.stop(k),b=et},function(k){g.fail(k),b=et})||v(g.value,g,function(k){return b=k}),b()})})}var Rx=(Le.prototype._read=function(u,c){var d=this._ctx;return d.error?d.table._trans(null,Pt.bind(null,d.error)):d.table._trans("readonly",u).then(c)},Le.prototype._write=function(u){var c=this._ctx;return c.error?c.table._trans(null,Pt.bind(null,c.error)):c.table._trans("readwrite",u,"locked")},Le.prototype._addAlgorithm=function(u){var c=this._ctx;c.algorithm=to(c.algorithm,u)},Le.prototype._iterate=function(u,c){return Oc(this._ctx,u,c,this._ctx.table.core)},Le.prototype.clone=function(u){var c=Object.create(this.constructor.prototype),d=Object.create(this._ctx);return u&&l(d,u),c._ctx=d,c},Le.prototype.raw=function(){return this._ctx.valueMapper=null,this},Le.prototype.each=function(u){var c=this._ctx;return this._read(function(d){return Oc(c,u,d,c.table.core)})},Le.prototype.count=function(u){var c=this;return this._read(function(d){var p=c._ctx,v=p.table.core;if(Jo(p,!0))return v.count({trans:d,query:{index:Ec(p,v.schema),range:p.range}}).then(function(b){return Math.min(b,p.limit)});var g=0;return Oc(p,function(){return++g,!1},d,v).then(function(){return g})}).then(u)},Le.prototype.sortBy=function(u,c){var d=u.split(".").reverse(),p=d[0],v=d.length-1;function g(A,x){return x?g(A[d[x]],x-1):A[p]}var b=this._ctx.dir==="next"?1:-1;function k(A,x){return A=g(A,v),x=g(x,v),A<x?-b:x<A?b:0}return this.toArray(function(A){return A.sort(k)}).then(c)},Le.prototype.toArray=function(u){var c=this;return this._read(function(d){var p=c._ctx;if(p.dir==="next"&&Jo(p,!0)&&0<p.limit){var v=p.valueMapper,g=Ec(p,p.table.core.schema);return p.table.core.query({trans:d,limit:p.limit,values:!0,query:{index:g,range:p.range}}).then(function(k){return k=k.result,v?k.map(v):k})}var b=[];return Oc(p,function(k){return b.push(k)},d,p.table.core).then(function(){return b})},u)},Le.prototype.offset=function(u){var c=this._ctx;return u<=0||(c.offset+=u,Jo(c)?tp(c,function(){var d=u;return function(p,v){return d===0||(d===1?--d:v(function(){p.advance(d),d=0}),!1)}}):tp(c,function(){var d=u;return function(){return--d<0}})),this},Le.prototype.limit=function(u){return this._ctx.limit=Math.min(this._ctx.limit,u),tp(this._ctx,function(){var c=u;return function(d,p,v){return--c<=0&&p(v),0<=c}},!0),this},Le.prototype.until=function(u,c){return ep(this._ctx,function(d,p,v){return!u(d.value)||(p(v),c)}),this},Le.prototype.first=function(u){return this.limit(1).toArray(function(c){return c[0]}).then(u)},Le.prototype.last=function(u){return this.reverse().first(u)},Le.prototype.filter=function(u){var c;return ep(this._ctx,function(d){return u(d.value)}),(c=this._ctx).isMatch=to(c.isMatch,u),this},Le.prototype.and=function(u){return this.filter(u)},Le.prototype.or=function(u){return new this.db.WhereClause(this._ctx.table,u,this)},Le.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Le.prototype.desc=function(){return this.reverse()},Le.prototype.eachKey=function(u){var c=this._ctx;return c.keysOnly=!c.isMatch,this.each(function(d,p){u(p.key,p)})},Le.prototype.eachUniqueKey=function(u){return this._ctx.unique="unique",this.eachKey(u)},Le.prototype.eachPrimaryKey=function(u){var c=this._ctx;return c.keysOnly=!c.isMatch,this.each(function(d,p){u(p.primaryKey,p)})},Le.prototype.keys=function(u){var c=this._ctx;c.keysOnly=!c.isMatch;var d=[];return this.each(function(p,v){d.push(v.key)}).then(function(){return d}).then(u)},Le.prototype.primaryKeys=function(u){var c=this._ctx;if(c.dir==="next"&&Jo(c,!0)&&0<c.limit)return this._read(function(p){var v=Ec(c,c.table.core.schema);return c.table.core.query({trans:p,values:!1,limit:c.limit,query:{index:v,range:c.range}})}).then(function(p){return p.result}).then(u);c.keysOnly=!c.isMatch;var d=[];return this.each(function(p,v){d.push(v.primaryKey)}).then(function(){return d}).then(u)},Le.prototype.uniqueKeys=function(u){return this._ctx.unique="unique",this.keys(u)},Le.prototype.firstKey=function(u){return this.limit(1).keys(function(c){return c[0]}).then(u)},Le.prototype.lastKey=function(u){return this.reverse().firstKey(u)},Le.prototype.distinct=function(){var u=this._ctx,u=u.index&&u.table.schema.idxByName[u.index];if(!u||!u.multi)return this;var c={};return ep(this._ctx,function(v){var p=v.primaryKey.toString(),v=m(c,p);return c[p]=!0,!v}),this},Le.prototype.modify=function(u){var c=this,d=this._ctx;return this._write(function(p){var v,g,b;b=typeof u=="function"?u:(v=o(u),g=v.length,function(R){for(var F=!1,j=0;j<g;++j){var V=v[j],q=u[V];Q(R,V)!==q&&(H(R,V,q),F=!0)}return F});function k(R,V){var j=V.failures,V=V.numFailures;T+=R-V;for(var q=0,Y=o(j);q<Y.length;q++){var ne=Y[q];P.push(j[ne])}}var A=d.table.core,x=A.schema.primaryKey,M=x.outbound,D=x.extractKey,C=c.db._options.modifyChunkSize||200,P=[],T=0,B=[];return c.clone().primaryKeys().then(function(R){function F(j){var V=Math.min(C,R.length-j);return A.getMany({trans:p,keys:R.slice(j,j+V),cache:"immutable"}).then(function(q){for(var Y=[],ne=[],J=M?[]:null,ie=[],te=0;te<V;++te){var he=q[te],me={value:Pe(he),primKey:R[j+te]};b.call(me,me.value,me)!==!1&&(me.value==null?ie.push(R[j+te]):M||je(D(he),D(me.value))===0?(ne.push(me.value),M&&J.push(R[j+te])):(ie.push(R[j+te]),Y.push(me.value)))}var He=Jo(d)&&d.limit===1/0&&(typeof u!="function"||u===np)&&{index:d.index,range:d.range};return Promise.resolve(0<Y.length&&A.mutate({trans:p,type:"add",values:Y}).then(function(Ce){for(var nt in Ce.failures)ie.splice(parseInt(nt),1);k(Y.length,Ce)})).then(function(){return(0<ne.length||He&&typeof u=="object")&&A.mutate({trans:p,type:"put",keys:J,values:ne,criteria:He,changeSpec:typeof u!="function"&&u}).then(function(Ce){return k(ne.length,Ce)})}).then(function(){return(0<ie.length||He&&u===np)&&A.mutate({trans:p,type:"delete",keys:ie,criteria:He}).then(function(Ce){return k(ie.length,Ce)})}).then(function(){return R.length>j+V&&F(j+C)})})}return F(0).then(function(){if(0<P.length)throw new Un("Error modifying one or more objects",P,T,B);return R.length})})})},Le.prototype.delete=function(){var u=this._ctx,c=u.range;return Jo(u)&&(u.isPrimKey||c.type===3)?this._write(function(d){var p=u.table.core.schema.primaryKey,v=c;return u.table.core.count({trans:d,query:{index:p,range:v}}).then(function(g){return u.table.core.mutate({trans:d,type:"deleteRange",range:v}).then(function(b){var k=b.failures;if(b.lastResult,b.results,b=b.numFailures,b)throw new Un("Could not delete some values",Object.keys(k).map(function(A){return k[A]}),g-b);return g-b})})}):this.modify(np)},Le);function Le(){}var np=function(u,c){return c.value=null};function Tx(u,c){return u<c?-1:u===c?0:1}function Mx(u,c){return c<u?-1:u===c?0:1}function zn(u,c,d){return u=u instanceof tw?new u.Collection(u):u,u._ctx.error=new(d||TypeError)(c),u}function Xo(u){return new u.Collection(u,function(){return ew("")}).limit(0)}function kc(u,c,d,p){var v,g,b,k,A,x,M,D=d.length;if(!d.every(function(T){return typeof T=="string"}))return zn(u,q0);function C(T){v=T==="next"?function(R){return R.toUpperCase()}:function(R){return R.toLowerCase()},g=T==="next"?function(R){return R.toLowerCase()}:function(R){return R.toUpperCase()},b=T==="next"?Tx:Mx;var B=d.map(function(R){return{lower:g(R),upper:v(R)}}).sort(function(R,F){return b(R.lower,F.lower)});k=B.map(function(R){return R.upper}),A=B.map(function(R){return R.lower}),M=(x=T)==="next"?"":p}C("next"),u=new u.Collection(u,function(){return rs(k[0],A[D-1]+p)}),u._ondirectionchange=function(T){C(T)};var P=0;return u._addAlgorithm(function(T,B,R){var F=T.key;if(typeof F!="string")return!1;var j=g(F);if(c(j,A,P))return!0;for(var V=null,q=P;q<D;++q){var Y=function(ne,J,ie,te,he,me){for(var He=Math.min(ne.length,te.length),Ce=-1,nt=0;nt<He;++nt){var Vn=J[nt];if(Vn!==te[nt])return he(ne[nt],ie[nt])<0?ne.substr(0,nt)+ie[nt]+ie.substr(nt+1):he(ne[nt],te[nt])<0?ne.substr(0,nt)+te[nt]+ie.substr(nt+1):0<=Ce?ne.substr(0,Ce)+J[Ce]+ie.substr(Ce+1):null;he(ne[nt],Vn)<0&&(Ce=nt)}return He<te.length&&me==="next"?ne+ie.substr(ne.length):He<ne.length&&me==="prev"?ne.substr(0,ie.length):Ce<0?null:ne.substr(0,Ce)+te[Ce]+ie.substr(Ce+1)}(F,j,k[q],A[q],b,x);Y===null&&V===null?P=q+1:(V===null||0<b(V,Y))&&(V=Y)}return B(V!==null?function(){T.continue(V+M)}:R),!1}),u}function rs(u,c,d,p){return{type:2,lower:u,upper:c,lowerOpen:d,upperOpen:p}}function ew(u){return{type:1,lower:u,upper:u}}var tw=(Object.defineProperty(qt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),qt.prototype.between=function(u,c,d,p){d=d!==!1,p=p===!0;try{return 0<this._cmp(u,c)||this._cmp(u,c)===0&&(d||p)&&(!d||!p)?Xo(this):new this.Collection(this,function(){return rs(u,c,!d,!p)})}catch{return zn(this,mi)}},qt.prototype.equals=function(u){return u==null?zn(this,mi):new this.Collection(this,function(){return ew(u)})},qt.prototype.above=function(u){return u==null?zn(this,mi):new this.Collection(this,function(){return rs(u,void 0,!0)})},qt.prototype.aboveOrEqual=function(u){return u==null?zn(this,mi):new this.Collection(this,function(){return rs(u,void 0,!1)})},qt.prototype.below=function(u){return u==null?zn(this,mi):new this.Collection(this,function(){return rs(void 0,u,!1,!0)})},qt.prototype.belowOrEqual=function(u){return u==null?zn(this,mi):new this.Collection(this,function(){return rs(void 0,u)})},qt.prototype.startsWith=function(u){return typeof u!="string"?zn(this,q0):this.between(u,u+eo,!0,!0)},qt.prototype.startsWithIgnoreCase=function(u){return u===""?this.startsWith(u):kc(this,function(c,d){return c.indexOf(d[0])===0},[u],eo)},qt.prototype.equalsIgnoreCase=function(u){return kc(this,function(c,d){return c===d[0]},[u],"")},qt.prototype.anyOfIgnoreCase=function(){var u=ue.apply(oe,arguments);return u.length===0?Xo(this):kc(this,function(c,d){return d.indexOf(c)!==-1},u,"")},qt.prototype.startsWithAnyOfIgnoreCase=function(){var u=ue.apply(oe,arguments);return u.length===0?Xo(this):kc(this,function(c,d){return d.some(function(p){return c.indexOf(p)===0})},u,eo)},qt.prototype.anyOf=function(){var u=this,c=ue.apply(oe,arguments),d=this._cmp;try{c.sort(d)}catch{return zn(this,mi)}if(c.length===0)return Xo(this);var p=new this.Collection(this,function(){return rs(c[0],c[c.length-1])});p._ondirectionchange=function(g){d=g==="next"?u._ascending:u._descending,c.sort(d)};var v=0;return p._addAlgorithm(function(g,b,k){for(var A=g.key;0<d(A,c[v]);)if(++v===c.length)return b(k),!1;return d(A,c[v])===0||(b(function(){g.continue(c[v])}),!1)}),p},qt.prototype.notEqual=function(u){return this.inAnyRange([[-1/0,u],[u,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},qt.prototype.noneOf=function(){var u=ue.apply(oe,arguments);if(u.length===0)return new this.Collection(this);try{u.sort(this._ascending)}catch{return zn(this,mi)}var c=u.reduce(function(d,p){return d?d.concat([[d[d.length-1][1],p]]):[[-1/0,p]]},null);return c.push([u[u.length-1],this.db._maxKey]),this.inAnyRange(c,{includeLowers:!1,includeUppers:!1})},qt.prototype.inAnyRange=function(F,c){var d=this,p=this._cmp,v=this._ascending,g=this._descending,b=this._min,k=this._max;if(F.length===0)return Xo(this);if(!F.every(function(j){return j[0]!==void 0&&j[1]!==void 0&&v(j[0],j[1])<=0}))return zn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",pe.InvalidArgument);var A=!c||c.includeLowers!==!1,x=c&&c.includeUppers===!0,M,D=v;function C(j,V){return D(j[0],V[0])}try{(M=F.reduce(function(j,V){for(var q=0,Y=j.length;q<Y;++q){var ne=j[q];if(p(V[0],ne[1])<0&&0<p(V[1],ne[0])){ne[0]=b(ne[0],V[0]),ne[1]=k(ne[1],V[1]);break}}return q===Y&&j.push(V),j},[])).sort(C)}catch{return zn(this,mi)}var P=0,T=x?function(j){return 0<v(j,M[P][1])}:function(j){return 0<=v(j,M[P][1])},B=A?function(j){return 0<g(j,M[P][0])}:function(j){return 0<=g(j,M[P][0])},R=T,F=new this.Collection(this,function(){return rs(M[0][0],M[M.length-1][1],!A,!x)});return F._ondirectionchange=function(j){D=j==="next"?(R=T,v):(R=B,g),M.sort(C)},F._addAlgorithm(function(j,V,q){for(var Y,ne=j.key;R(ne);)if(++P===M.length)return V(q),!1;return!T(Y=ne)&&!B(Y)||(d._cmp(ne,M[P][1])===0||d._cmp(ne,M[P][0])===0||V(function(){D===v?j.continue(M[P][0]):j.continue(M[P][1])}),!1)}),F},qt.prototype.startsWithAnyOf=function(){var u=ue.apply(oe,arguments);return u.every(function(c){return typeof c=="string"})?u.length===0?Xo(this):this.inAnyRange(u.map(function(c){return[c,c+eo]})):zn(this,"startsWithAnyOf() only works with strings")},qt);function qt(){}function zr(u){return vt(function(c){return bu(c),u(c.target.error),!1})}function bu(u){u.stopPropagation&&u.stopPropagation(),u.preventDefault&&u.preventDefault()}var Su="storagemutated",rp="x-storagemutated-1",is=wu(null,Su),Nx=(Vr.prototype._lock=function(){return z(!fe.global),++this._reculock,this._reculock!==1||fe.global||(fe.lockOwnerFor=this),this},Vr.prototype._unlock=function(){if(z(!fe.global),--this._reculock==0)for(fe.global||(fe.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var u=this._blockedFuncs.shift();try{Zs(u[1],u[0])}catch{}}return this},Vr.prototype._locked=function(){return this._reculock&&fe.lockOwnerFor!==this},Vr.prototype.create=function(u){var c=this;if(!this.mode)return this;var d=this.db.idbdb,p=this.db._state.dbOpenError;if(z(!this.idbtrans),!u&&!d)switch(p&&p.name){case"DatabaseClosedError":throw new pe.DatabaseClosed(p);case"MissingAPIError":throw new pe.MissingAPI(p.message,p);default:throw new pe.OpenFailed(p)}if(!this.active)throw new pe.TransactionInactive;return z(this._completion._state===null),(u=this.idbtrans=u||(this.db.core||d).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=vt(function(v){bu(v),c._reject(u.error)}),u.onabort=vt(function(v){bu(v),c.active&&c._reject(new pe.Abort(u.error)),c.active=!1,c.on("abort").fire(v)}),u.oncomplete=vt(function(){c.active=!1,c._resolve(),"mutatedParts"in u&&is.storagemutated.fire(u.mutatedParts)}),this},Vr.prototype._promise=function(u,c,d){var p=this;if(u==="readwrite"&&this.mode!=="readwrite")return Pt(new pe.ReadOnly("Transaction is readonly"));if(!this.active)return Pt(new pe.TransactionInactive);if(this._locked())return new se(function(g,b){p._blockedFuncs.push([function(){p._promise(u,c,d).then(g,b)},fe])});if(d)return es(function(){var g=new se(function(b,k){p._lock();var A=c(b,k,p);A&&A.then&&A.then(b,k)});return g.finally(function(){return p._unlock()}),g._lib=!0,g});var v=new se(function(g,b){var k=c(g,b,p);k&&k.then&&k.then(g,b)});return v._lib=!0,v},Vr.prototype._root=function(){return this.parent?this.parent._root():this},Vr.prototype.waitFor=function(u){var c,d=this._root(),p=se.resolve(u);d._waitingFor?d._waitingFor=d._waitingFor.then(function(){return p}):(d._waitingFor=p,d._waitingQueue=[],c=d.idbtrans.objectStore(d.storeNames[0]),function g(){for(++d._spinCount;d._waitingQueue.length;)d._waitingQueue.shift()();d._waitingFor&&(c.get(-1/0).onsuccess=g)}());var v=d._waitingFor;return new se(function(g,b){p.then(function(k){return d._waitingQueue.push(vt(g.bind(null,k)))},function(k){return d._waitingQueue.push(vt(b.bind(null,k)))}).finally(function(){d._waitingFor===v&&(d._waitingFor=null)})})},Vr.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new pe.Abort))},Vr.prototype.table=function(u){var c=this._memoizedTables||(this._memoizedTables={});if(m(c,u))return c[u];var d=this.schema[u];if(!d)throw new pe.NotFound("Table "+u+" not part of transaction");return d=new this.db.Table(u,d,this),d.core=this.db.core.table(u),c[u]=d},Vr);function Vr(){}function ip(u,c,d,p,v,g,b){return{name:u,keyPath:c,unique:d,multi:p,auto:v,compound:g,src:(d&&!b?"&":"")+(p?"*":"")+(v?"++":"")+nw(c)}}function nw(u){return typeof u=="string"?u:u?"["+[].join.call(u,"+")+"]":""}function sp(u,c,d){return{name:u,primKey:c,indexes:d,mappedClass:null,idxByName:(p=function(v){return[v.name,v]},d.reduce(function(v,g,b){return b=p(g,b),b&&(v[b[0]]=b[1]),v},{}))};var p}var Iu=function(u){try{return u.only([[]]),Iu=function(){return[[]]},[[]]}catch{return Iu=function(){return eo},eo}};function op(u){return u==null?function(){}:typeof u=="string"?(c=u).split(".").length===1?function(d){return d[c]}:function(d){return Q(d,c)}:function(d){return Q(d,u)};var c}function rw(u){return[].slice.call(u)}var Bx=0;function Eu(u){return u==null?":id":typeof u=="string"?u:"[".concat(u.join("+"),"]")}function Fx(u,c,A){function p(R){if(R.type===3)return null;if(R.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var P=R.lower,T=R.upper,B=R.lowerOpen,R=R.upperOpen;return P===void 0?T===void 0?null:c.upperBound(T,!!R):T===void 0?c.lowerBound(P,!!B):c.bound(P,T,!!B,!!R)}function v(C){var P,T=C.name;return{name:T,schema:C,mutate:function(B){var R=B.trans,F=B.type,j=B.keys,V=B.values,q=B.range;return new Promise(function(Y,ne){Y=vt(Y);var J=R.objectStore(T),ie=J.keyPath==null,te=F==="put"||F==="add";if(!te&&F!=="delete"&&F!=="deleteRange")throw new Error("Invalid operation type: "+F);var he,me=(j||V||{length:1}).length;if(j&&V&&j.length!==V.length)throw new Error("Given keys array must have same length as given values array.");if(me===0)return Y({numFailures:0,failures:{},results:[],lastResult:void 0});function He(fn){++Vn,bu(fn)}var Ce=[],nt=[],Vn=0;if(F==="deleteRange"){if(q.type===4)return Y({numFailures:Vn,failures:nt,results:[],lastResult:void 0});q.type===3?Ce.push(he=J.clear()):Ce.push(he=J.delete(p(q)))}else{var ie=te?ie?[V,j]:[V,null]:[j,null],De=ie[0],vi=ie[1];if(te)for(var rn=0;rn<me;++rn)Ce.push(he=vi&&vi[rn]!==void 0?J[F](De[rn],vi[rn]):J[F](De[rn])),he.onerror=He;else for(rn=0;rn<me;++rn)Ce.push(he=J[F](De[rn])),he.onerror=He}function $c(fn){fn=fn.target.result,Ce.forEach(function(io,Op){return io.error!=null&&(nt[Op]=io.error)}),Y({numFailures:Vn,failures:nt,results:F==="delete"?j:Ce.map(function(io){return io.result}),lastResult:fn})}he.onerror=function(fn){He(fn),$c(fn)},he.onsuccess=$c})},getMany:function(B){var R=B.trans,F=B.keys;return new Promise(function(j,V){j=vt(j);for(var q,Y=R.objectStore(T),ne=F.length,J=new Array(ne),ie=0,te=0,he=function(Ce){Ce=Ce.target,J[Ce._pos]=Ce.result,++te===ie&&j(J)},me=zr(V),He=0;He<ne;++He)F[He]!=null&&((q=Y.get(F[He]))._pos=He,q.onsuccess=he,q.onerror=me,++ie);ie===0&&j(J)})},get:function(B){var R=B.trans,F=B.key;return new Promise(function(j,V){j=vt(j);var q=R.objectStore(T).get(F);q.onsuccess=function(Y){return j(Y.target.result)},q.onerror=zr(V)})},query:(P=x,function(B){return new Promise(function(R,F){R=vt(R);var j,V,q,ie=B.trans,Y=B.values,ne=B.limit,he=B.query,J=ne===1/0?void 0:ne,te=he.index,he=he.range,ie=ie.objectStore(T),te=te.isPrimaryKey?ie:ie.index(te.name),he=p(he);if(ne===0)return R({result:[]});P?((J=Y?te.getAll(he,J):te.getAllKeys(he,J)).onsuccess=function(me){return R({result:me.target.result})},J.onerror=zr(F)):(j=0,V=!Y&&"openKeyCursor"in te?te.openKeyCursor(he):te.openCursor(he),q=[],V.onsuccess=function(me){var He=V.result;return He?(q.push(Y?He.value:He.primaryKey),++j===ne?R({result:q}):void He.continue()):R({result:q})},V.onerror=zr(F))})}),openCursor:function(B){var R=B.trans,F=B.values,j=B.query,V=B.reverse,q=B.unique;return new Promise(function(Y,ne){Y=vt(Y);var te=j.index,J=j.range,ie=R.objectStore(T),ie=te.isPrimaryKey?ie:ie.index(te.name),te=V?q?"prevunique":"prev":q?"nextunique":"next",he=!F&&"openKeyCursor"in ie?ie.openKeyCursor(p(J),te):ie.openCursor(p(J),te);he.onerror=zr(ne),he.onsuccess=vt(function(me){var He,Ce,nt,Vn,De=he.result;De?(De.___id=++Bx,De.done=!1,He=De.continue.bind(De),Ce=(Ce=De.continuePrimaryKey)&&Ce.bind(De),nt=De.advance.bind(De),Vn=function(){throw new Error("Cursor not stopped")},De.trans=R,De.stop=De.continue=De.continuePrimaryKey=De.advance=function(){throw new Error("Cursor not started")},De.fail=vt(ne),De.next=function(){var vi=this,rn=1;return this.start(function(){return rn--?vi.continue():vi.stop()}).then(function(){return vi})},De.start=function(vi){function rn(){if(he.result)try{vi()}catch(fn){De.fail(fn)}else De.done=!0,De.start=function(){throw new Error("Cursor behind last entry")},De.stop()}var $c=new Promise(function(fn,io){fn=vt(fn),he.onerror=zr(io),De.fail=io,De.stop=function(Op){De.stop=De.continue=De.continuePrimaryKey=De.advance=Vn,fn(Op)}});return he.onsuccess=vt(function(fn){he.onsuccess=rn,rn()}),De.continue=He,De.continuePrimaryKey=Ce,De.advance=nt,rn(),$c},Y(De)):Y(null)},ne)})},count:function(B){var R=B.query,F=B.trans,j=R.index,V=R.range;return new Promise(function(q,Y){var ne=F.objectStore(T),J=j.isPrimaryKey?ne:ne.index(j.name),ne=p(V),J=ne?J.count(ne):J.count();J.onsuccess=vt(function(ie){return q(ie.target.result)}),J.onerror=zr(Y)})}}}var g,b,k,M=(b=A,k=rw((g=u).objectStoreNames),{schema:{name:g.name,tables:k.map(function(C){return b.objectStore(C)}).map(function(C){var P=C.keyPath,R=C.autoIncrement,T=a(P),B={},R={name:C.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:P==null,compound:T,keyPath:P,autoIncrement:R,unique:!0,extractKey:op(P)},indexes:rw(C.indexNames).map(function(F){return C.index(F)}).map(function(q){var j=q.name,V=q.unique,Y=q.multiEntry,q=q.keyPath,Y={name:j,compound:a(q),keyPath:q,unique:V,multiEntry:Y,extractKey:op(q)};return B[Eu(q)]=Y}),getIndexByKeyPath:function(F){return B[Eu(F)]}};return B[":id"]=R.primaryKey,P!=null&&(B[Eu(P)]=R.primaryKey),R})},hasGetAll:0<k.length&&"getAll"in b.objectStore(k[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),A=M.schema,x=M.hasGetAll,M=A.tables.map(v),D={};return M.forEach(function(C){return D[C.name]=C}),{stack:"dbcore",transaction:u.transaction.bind(u),table:function(C){if(!D[C])throw new Error("Table '".concat(C,"' not found"));return D[C]},MIN_KEY:-1/0,MAX_KEY:Iu(c),schema:A}}function Lx(u,c,d,p){var v=d.IDBKeyRange;return d.indexedDB,{dbcore:(p=Fx(c,v,p),u.dbcore.reduce(function(g,b){return b=b.create,r(r({},g),b(g))},p))}}function Dc(u,p){var d=p.db,p=Lx(u._middlewares,d,u._deps,p);u.core=p.dbcore,u.tables.forEach(function(v){var g=v.name;u.core.schema.tables.some(function(b){return b.name===g})&&(v.core=u.core.table(g),u[g]instanceof u.Table&&(u[g].core=v.core))})}function xc(u,c,d,p){d.forEach(function(v){var g=p[v];c.forEach(function(b){var k=function A(x,M){return $(x,M)||(x=f(x))&&A(x,M)}(b,v);(!k||"value"in k&&k.value===void 0)&&(b===u.Transaction.prototype||b instanceof u.Transaction?I(b,v,{get:function(){return this.table(v)},set:function(A){w(this,v,{value:A,writable:!0,configurable:!0,enumerable:!0})}}):b[v]=new u.Table(v,g))})})}function ap(u,c){c.forEach(function(d){for(var p in d)d[p]instanceof u.Table&&delete d[p]})}function $x(u,c){return u._cfg.version-c._cfg.version}function jx(u,c,d,p){var v=u._dbSchema;d.objectStoreNames.contains("$meta")&&!v.$meta&&(v.$meta=sp("$meta",sw("")[0],[]),u._storeNames.push("$meta"));var g=u._createTransaction("readwrite",u._storeNames,v);g.create(d),g._completion.catch(p);var b=g._reject.bind(g),k=fe.transless||fe;es(function(){return fe.trans=g,fe.transless=k,c!==0?(Dc(u,d),x=c,((A=g).storeNames.includes("$meta")?A.table("$meta").get("version").then(function(M){return M??x}):se.resolve(x)).then(function(M){return C=M,P=g,T=d,B=[],M=(D=u)._versions,R=D._dbSchema=Ac(0,D.idbdb,T),(M=M.filter(function(F){return F._cfg.version>=C})).length!==0?(M.forEach(function(F){B.push(function(){var j=R,V=F._cfg.dbschema;Pc(D,j,T),Pc(D,V,T),R=D._dbSchema=V;var q=up(j,V);q.add.forEach(function(te){lp(T,te[0],te[1].primKey,te[1].indexes)}),q.change.forEach(function(te){if(te.recreate)throw new pe.Upgrade("Not yet support for changing primary key");var he=T.objectStore(te.name);te.add.forEach(function(me){return Cc(he,me)}),te.change.forEach(function(me){he.deleteIndex(me.name),Cc(he,me)}),te.del.forEach(function(me){return he.deleteIndex(me)})});var Y=F._cfg.contentUpgrade;if(Y&&F._cfg.version>C){Dc(D,T),P._memoizedTables={};var ne=X(V);q.del.forEach(function(te){ne[te]=j[te]}),ap(D,[D.Transaction.prototype]),xc(D,[D.Transaction.prototype],o(ne),ne),P.schema=ne;var J,ie=Re(Y);return ie&&Yo(),q=se.follow(function(){var te;(J=Y(P))&&ie&&(te=ts.bind(null,null),J.then(te,te))}),J&&typeof J.then=="function"?se.resolve(J):q.then(function(){return J})}}),B.push(function(j){var V,q,Y=F._cfg.dbschema;V=Y,q=j,[].slice.call(q.db.objectStoreNames).forEach(function(ne){return V[ne]==null&&q.db.deleteObjectStore(ne)}),ap(D,[D.Transaction.prototype]),xc(D,[D.Transaction.prototype],D._storeNames,D._dbSchema),P.schema=D._dbSchema}),B.push(function(j){D.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(D.idbdb.version/10)===F._cfg.version?(D.idbdb.deleteObjectStore("$meta"),delete D._dbSchema.$meta,D._storeNames=D._storeNames.filter(function(V){return V!=="$meta"})):j.objectStore("$meta").put(F._cfg.version,"version"))})}),function F(){return B.length?se.resolve(B.shift()(P.idbtrans)).then(F):se.resolve()}().then(function(){iw(R,T)})):se.resolve();var D,C,P,T,B,R}).catch(b)):(o(v).forEach(function(M){lp(d,M,v[M].primKey,v[M].indexes)}),Dc(u,d),void se.follow(function(){return u.on.populate.fire(g)}).catch(b));var A,x})}function Ux(u,c){iw(u._dbSchema,c),c.db.version%10!=0||c.objectStoreNames.contains("$meta")||c.db.createObjectStore("$meta").add(Math.ceil(c.db.version/10-1),"version");var d=Ac(0,u.idbdb,c);Pc(u,u._dbSchema,c);for(var p=0,v=up(d,u._dbSchema).change;p<v.length;p++){var g=function(b){if(b.change.length||b.recreate)return console.warn("Unable to patch indexes of table ".concat(b.name," because it has changes on the type of index or primary key.")),{value:void 0};var k=c.objectStore(b.name);b.add.forEach(function(A){jr&&console.debug("Dexie upgrade patch: Creating missing index ".concat(b.name,".").concat(A.src)),Cc(k,A)})}(v[p]);if(typeof g=="object")return g.value}}function up(u,c){var d,p={del:[],add:[],change:[]};for(d in u)c[d]||p.del.push(d);for(d in c){var v=u[d],g=c[d];if(v){var b={name:d,def:g,recreate:!1,del:[],add:[],change:[]};if(""+(v.primKey.keyPath||"")!=""+(g.primKey.keyPath||"")||v.primKey.auto!==g.primKey.auto)b.recreate=!0,p.change.push(b);else{var k=v.idxByName,A=g.idxByName,x=void 0;for(x in k)A[x]||b.del.push(x);for(x in A){var M=k[x],D=A[x];M?M.src!==D.src&&b.change.push(D):b.add.push(D)}(0<b.del.length||0<b.add.length||0<b.change.length)&&p.change.push(b)}}else p.add.push([d,g])}return p}function lp(u,c,d,p){var v=u.db.createObjectStore(c,d.keyPath?{keyPath:d.keyPath,autoIncrement:d.auto}:{autoIncrement:d.auto});return p.forEach(function(g){return Cc(v,g)}),v}function iw(u,c){o(u).forEach(function(d){c.db.objectStoreNames.contains(d)||(jr&&console.debug("Dexie: Creating missing table",d),lp(c,d,u[d].primKey,u[d].indexes))})}function Cc(u,c){u.createIndex(c.name,c.keyPath,{unique:c.unique,multiEntry:c.multi})}function Ac(u,c,d){var p={};return _(c.objectStoreNames,0).forEach(function(v){for(var g=d.objectStore(v),b=ip(nw(x=g.keyPath),x||"",!0,!1,!!g.autoIncrement,x&&typeof x!="string",!0),k=[],A=0;A<g.indexNames.length;++A){var M=g.index(g.indexNames[A]),x=M.keyPath,M=ip(M.name,x,!!M.unique,!!M.multiEntry,!1,x&&typeof x!="string",!1);k.push(M)}p[v]=sp(v,b,k)}),p}function Pc(u,c,d){for(var p=d.db.objectStoreNames,v=0;v<p.length;++v){var g=p[v],b=d.objectStore(g);u._hasGetAll="getAll"in b;for(var k=0;k<b.indexNames.length;++k){var A=b.indexNames[k],x=b.index(A).keyPath,M=typeof x=="string"?x:"["+_(x).join("+")+"]";!c[g]||(x=c[g].idxByName[M])&&(x.name=A,delete c[g].idxByName[M],c[g].idxByName[A]=x)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&s.WorkerGlobalScope&&s instanceof s.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(u._hasGetAll=!1)}function sw(u){return u.split(",").map(function(c,d){var p=(c=c.trim()).replace(/([&*]|\+\+)/g,""),v=/^\[/.test(p)?p.match(/^\[(.*)\]$/)[1].split("+"):p;return ip(p,v||null,/\&/.test(c),/\*/.test(c),/\+\+/.test(c),a(v),d===0)})}var zx=(Rc.prototype._parseStoresSpec=function(u,c){o(u).forEach(function(d){if(u[d]!==null){var p=sw(u[d]),v=p.shift();if(v.unique=!0,v.multi)throw new pe.Schema("Primary key cannot be multi-valued");p.forEach(function(g){if(g.auto)throw new pe.Schema("Only primary key can be marked as autoIncrement (++)");if(!g.keyPath)throw new pe.Schema("Index must have a name and cannot be an empty string")}),c[d]=sp(d,v,p)}})},Rc.prototype.stores=function(d){var c=this.db;this._cfg.storesSource=this._cfg.storesSource?l(this._cfg.storesSource,d):d;var d=c._versions,p={},v={};return d.forEach(function(g){l(p,g._cfg.storesSource),v=g._cfg.dbschema={},g._parseStoresSpec(p,v)}),c._dbSchema=v,ap(c,[c._allTables,c,c.Transaction.prototype]),xc(c,[c._allTables,c,c.Transaction.prototype,this._cfg.tables],o(v),v),c._storeNames=o(v),this},Rc.prototype.upgrade=function(u){return this._cfg.contentUpgrade=Vh(this._cfg.contentUpgrade||et,u),this},Rc);function Rc(){}function cp(u,c){var d=u._dbNamesDB;return d||(d=u._dbNamesDB=new yi(Sc,{addons:[],indexedDB:u,IDBKeyRange:c})).version(1).stores({dbnames:"name"}),d.table("dbnames")}function fp(u){return u&&typeof u.databases=="function"}function dp(u){return es(function(){return fe.letThrough=!0,u()})}function hp(u){return!("from"in u)}var nn=function(u,c){if(!this){var d=new nn;return u&&"d"in u&&l(d,u),d}l(this,arguments.length?{d:1,from:u,to:1<arguments.length?c:u}:{d:0})};function Ou(u,c,d){var p=je(c,d);if(!isNaN(p)){if(0<p)throw RangeError();if(hp(u))return l(u,{from:c,to:d,d:1});var v=u.l,p=u.r;if(je(d,u.from)<0)return v?Ou(v,c,d):u.l={from:c,to:d,d:1,l:null,r:null},ow(u);if(0<je(c,u.to))return p?Ou(p,c,d):u.r={from:c,to:d,d:1,l:null,r:null},ow(u);je(c,u.from)<0&&(u.from=c,u.l=null,u.d=p?p.d+1:1),0<je(d,u.to)&&(u.to=d,u.r=null,u.d=u.l?u.l.d+1:1),d=!u.r,v&&!u.l&&ku(u,v),p&&d&&ku(u,p)}}function ku(u,c){hp(c)||function d(p,A){var g=A.from,b=A.to,k=A.l,A=A.r;Ou(p,g,b),k&&d(p,k),A&&d(p,A)}(u,c)}function Tc(u,c){var d=pp(c),p=d.next();if(p.done)return!1;for(var v=p.value,g=pp(u),b=g.next(v.from),k=b.value;!p.done&&!b.done;){if(je(k.from,v.to)<=0&&0<=je(k.to,v.from))return!0;je(v.from,k.from)<0?v=(p=d.next(k.from)).value:k=(b=g.next(v.from)).value}return!1}function pp(u){var c=hp(u)?null:{s:0,n:u};return{next:function(d){for(var p=0<arguments.length;c;)switch(c.s){case 0:if(c.s=1,p)for(;c.n.l&&je(d,c.n.from)<0;)c={up:c,n:c.n.l,s:1};else for(;c.n.l;)c={up:c,n:c.n.l,s:1};case 1:if(c.s=2,!p||je(d,c.n.to)<=0)return{value:c.n,done:!1};case 2:if(c.n.r){c.s=3,c={up:c,n:c.n.r,s:0};continue}case 3:c=c.up}return{done:!0}}}}function ow(u){var c,d,p=(((c=u.r)===null||c===void 0?void 0:c.d)||0)-(((d=u.l)===null||d===void 0?void 0:d.d)||0),v=1<p?"r":p<-1?"l":"";v&&(c=v=="r"?"l":"r",d=r({},u),p=u[v],u.from=p.from,u.to=p.to,u[v]=p[v],d[v]=p[c],(u[c]=d).d=aw(d)),u.d=aw(u)}function aw(d){var c=d.r,d=d.l;return(c?d?Math.max(c.d,d.d):c.d:d?d.d:0)+1}function Mc(u,c){return o(c).forEach(function(d){u[d]?ku(u[d],c[d]):u[d]=function p(v){var g,b,k={};for(g in v)m(v,g)&&(b=v[g],k[g]=!b||typeof b!="object"||ce.has(b.constructor)?b:p(b));return k}(c[d])}),u}function mp(u,c){return u.all||c.all||Object.keys(u).some(function(d){return c[d]&&Tc(c[d],u[d])})}y(nn.prototype,((lr={add:function(u){return ku(this,u),this},addKey:function(u){return Ou(this,u,u),this},addKeys:function(u){var c=this;return u.forEach(function(d){return Ou(c,d,d)}),this}})[Te]=function(){return pp(this)},lr));var no={},yp={},vp=!1;function Nc(u){Mc(yp,u),vp||(vp=!0,setTimeout(function(){vp=!1,gp(yp,!(yp={}))},0))}function gp(u,c){c===void 0&&(c=!1);var d=new Set;if(u.all)for(var p=0,v=Object.values(no);p<v.length;p++)uw(b=v[p],u,d,c);else for(var g in u){var b,k=/^idb\:\/\/(.*)\/(.*)\//.exec(g);k&&(g=k[1],k=k[2],(b=no["idb://".concat(g,"/").concat(k)])&&uw(b,u,d,c))}d.forEach(function(A){return A()})}function uw(u,c,d,p){for(var v=[],g=0,b=Object.entries(u.queries.query);g<b.length;g++){for(var k=b[g],A=k[0],x=[],M=0,D=k[1];M<D.length;M++){var C=D[M];mp(c,C.obsSet)?C.subscribers.forEach(function(R){return d.add(R)}):p&&x.push(C)}p&&v.push([A,x])}if(p)for(var P=0,T=v;P<T.length;P++){var B=T[P],A=B[0],x=B[1];u.queries.query[A]=x}}function Vx(u){var c=u._state,d=u._deps.indexedDB;if(c.isBeingOpened||u.idbdb)return c.dbReadyPromise.then(function(){return c.dbOpenError?Pt(c.dbOpenError):u});c.isBeingOpened=!0,c.dbOpenError=null,c.openComplete=!1;var p=c.openCanceller,v=Math.round(10*u.verno),g=!1;function b(){if(c.openCanceller!==p)throw new pe.DatabaseClosed("db.open() was cancelled")}function k(){return new se(function(C,P){if(b(),!d)throw new pe.MissingAPI;var T=u.name,B=c.autoSchema||!v?d.open(T):d.open(T,v);if(!B)throw new pe.MissingAPI;B.onerror=zr(P),B.onblocked=vt(u._fireOnBlocked),B.onupgradeneeded=vt(function(R){var F;M=B.transaction,c.autoSchema&&!u._options.allowEmptyDB?(B.onerror=bu,M.abort(),B.result.close(),(F=d.deleteDatabase(T)).onsuccess=F.onerror=vt(function(){P(new pe.NoSuchDatabase("Database ".concat(T," doesnt exist")))})):(M.onerror=zr(P),R=R.oldVersion>Math.pow(2,62)?0:R.oldVersion,D=R<1,u.idbdb=B.result,g&&Ux(u,M),jx(u,R/10,M,P))},P),B.onsuccess=vt(function(){M=null;var R,F,j,V,q,Y=u.idbdb=B.result,ne=_(Y.objectStoreNames);if(0<ne.length)try{var J=Y.transaction((V=ne).length===1?V[0]:V,"readonly");if(c.autoSchema)F=Y,j=J,(R=u).verno=F.version/10,j=R._dbSchema=Ac(0,F,j),R._storeNames=_(F.objectStoreNames,0),xc(R,[R._allTables],o(j),j);else if(Pc(u,u._dbSchema,J),((q=up(Ac(0,(q=u).idbdb,J),q._dbSchema)).add.length||q.change.some(function(ie){return ie.add.length||ie.change.length}))&&!g)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Y.close(),v=Y.version+1,g=!0,C(k());Dc(u,J)}catch{}Go.push(u),Y.onversionchange=vt(function(ie){c.vcFired=!0,u.on("versionchange").fire(ie)}),Y.onclose=vt(function(ie){u.on("close").fire(ie)}),D&&(q=u._deps,J=T,Y=q.indexedDB,q=q.IDBKeyRange,fp(Y)||J===Sc||cp(Y,q).put({name:J}).catch(et)),C()},P)}).catch(function(C){switch(C==null?void 0:C.name){case"UnknownError":if(0<c.PR1398_maxLoop)return c.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),k();break;case"VersionError":if(0<v)return v=0,k()}return se.reject(C)})}var A,x=c.dbReadyResolve,M=null,D=!1;return se.race([p,(typeof navigator>"u"?se.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(C){function P(){return indexedDB.databases().finally(C)}A=setInterval(P,100),P()}).finally(function(){return clearInterval(A)}):Promise.resolve()).then(k)]).then(function(){return b(),c.onReadyBeingFired=[],se.resolve(dp(function(){return u.on.ready.fire(u.vip)})).then(function C(){if(0<c.onReadyBeingFired.length){var P=c.onReadyBeingFired.reduce(Vh,et);return c.onReadyBeingFired=[],se.resolve(dp(function(){return P(u.vip)})).then(C)}})}).finally(function(){c.openCanceller===p&&(c.onReadyBeingFired=null,c.isBeingOpened=!1)}).catch(function(C){c.dbOpenError=C;try{M&&M.abort()}catch{}return p===c.openCanceller&&u._close(),Pt(C)}).finally(function(){c.openComplete=!0,x()}).then(function(){var C;return D&&(C={},u.tables.forEach(function(P){P.schema.indexes.forEach(function(T){T.name&&(C["idb://".concat(u.name,"/").concat(P.name,"/").concat(T.name)]=new nn(-1/0,[[[]]]))}),C["idb://".concat(u.name,"/").concat(P.name,"/")]=C["idb://".concat(u.name,"/").concat(P.name,"/:dels")]=new nn(-1/0,[[[]]])}),is(Su).fire(C),gp(C,!0)),u})}function wp(u){function c(g){return u.next(g)}var d=v(c),p=v(function(g){return u.throw(g)});function v(g){return function(A){var k=g(A),A=k.value;return k.done?A:A&&typeof A.then=="function"?A.then(d,p):a(A)?Promise.all(A).then(d,p):d(A)}}return v(c)()}function Bc(u,c,d){for(var p=a(u)?u.slice():[u],v=0;v<d;++v)p.push(c);return p}var Kx={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(u){return r(r({},u),{table:function(c){var d=u.table(c),p=d.schema,v={},g=[];function b(D,C,P){var T=Eu(D),B=v[T]=v[T]||[],R=D==null?0:typeof D=="string"?1:D.length,F=0<C,F=r(r({},P),{name:F?"".concat(T,"(virtual-from:").concat(P.name,")"):P.name,lowLevelIndex:P,isVirtual:F,keyTail:C,keyLength:R,extractKey:op(D),unique:!F&&P.unique});return B.push(F),F.isPrimaryKey||g.push(F),1<R&&b(R===2?D[0]:D.slice(0,R-1),C+1,P),B.sort(function(j,V){return j.keyTail-V.keyTail}),F}c=b(p.primaryKey.keyPath,0,p.primaryKey),v[":id"]=[c];for(var k=0,A=p.indexes;k<A.length;k++){var x=A[k];b(x.keyPath,0,x)}function M(D){var C,P=D.query.index;return P.isVirtual?r(r({},D),{query:{index:P.lowLevelIndex,range:(C=D.query.range,P=P.keyTail,{type:C.type===1?2:C.type,lower:Bc(C.lower,C.lowerOpen?u.MAX_KEY:u.MIN_KEY,P),lowerOpen:!0,upper:Bc(C.upper,C.upperOpen?u.MIN_KEY:u.MAX_KEY,P),upperOpen:!0})}}):D}return r(r({},d),{schema:r(r({},p),{primaryKey:c,indexes:g,getIndexByKeyPath:function(D){return(D=v[Eu(D)])&&D[0]}}),count:function(D){return d.count(M(D))},query:function(D){return d.query(M(D))},openCursor:function(D){var C=D.query.index,P=C.keyTail,T=C.isVirtual,B=C.keyLength;return T?d.openCursor(M(D)).then(function(F){return F&&R(F)}):d.openCursor(D);function R(F){return Object.create(F,{continue:{value:function(j){j!=null?F.continue(Bc(j,D.reverse?u.MAX_KEY:u.MIN_KEY,P)):D.unique?F.continue(F.key.slice(0,B).concat(D.reverse?u.MIN_KEY:u.MAX_KEY,P)):F.continue()}},continuePrimaryKey:{value:function(j,V){F.continuePrimaryKey(Bc(j,u.MAX_KEY,P),V)}},primaryKey:{get:function(){return F.primaryKey}},key:{get:function(){var j=F.key;return B===1?j[0]:j.slice(0,B)}},value:{get:function(){return F.value}}})}}})}})}};function _p(u,c,d,p){return d=d||{},p=p||"",o(u).forEach(function(v){var g,b,k;m(c,v)?(g=u[v],b=c[v],typeof g=="object"&&typeof b=="object"&&g&&b?(k=ct(g))!==ct(b)?d[p+v]=c[v]:k==="Object"?_p(g,b,d,p+v+"."):g!==b&&(d[p+v]=c[v]):g!==b&&(d[p+v]=c[v])):d[p+v]=void 0}),o(c).forEach(function(v){m(u,v)||(d[p+v]=c[v])}),d}function bp(u,c){return c.type==="delete"?c.keys:c.keys||c.values.map(u.extractKey)}var Wx={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(u){return r(r({},u),{table:function(c){var d=u.table(c),p=d.schema.primaryKey;return r(r({},d),{mutate:function(v){var g=fe.trans,b=g.table(c).hook,k=b.deleting,A=b.creating,x=b.updating;switch(v.type){case"add":if(A.fire===et)break;return g._promise("readwrite",function(){return M(v)},!0);case"put":if(A.fire===et&&x.fire===et)break;return g._promise("readwrite",function(){return M(v)},!0);case"delete":if(k.fire===et)break;return g._promise("readwrite",function(){return M(v)},!0);case"deleteRange":if(k.fire===et)break;return g._promise("readwrite",function(){return function D(C,P,T){return d.query({trans:C,values:!1,query:{index:p,range:P},limit:T}).then(function(B){var R=B.result;return M({type:"delete",keys:R,trans:C}).then(function(F){return 0<F.numFailures?Promise.reject(F.failures[0]):R.length<T?{failures:[],numFailures:0,lastResult:void 0}:D(C,r(r({},P),{lower:R[R.length-1],lowerOpen:!0}),T)})})}(v.trans,v.range,1e4)},!0)}return d.mutate(v);function M(D){var C,P,T,B=fe.trans,R=D.keys||bp(p,D);if(!R)throw new Error("Keys missing");return(D=D.type==="add"||D.type==="put"?r(r({},D),{keys:R}):r({},D)).type!=="delete"&&(D.values=i([],D.values,!0)),D.keys&&(D.keys=i([],D.keys,!0)),C=d,T=R,((P=D).type==="add"?Promise.resolve([]):C.getMany({trans:P.trans,keys:T,cache:"immutable"})).then(function(F){var j=R.map(function(V,q){var Y,ne,J,ie=F[q],te={onerror:null,onsuccess:null};return D.type==="delete"?k.fire.call(te,V,ie,B):D.type==="add"||ie===void 0?(Y=A.fire.call(te,V,D.values[q],B),V==null&&Y!=null&&(D.keys[q]=V=Y,p.outbound||H(D.values[q],p.keyPath,V))):(Y=_p(ie,D.values[q]),(ne=x.fire.call(te,Y,V,ie,B))&&(J=D.values[q],Object.keys(ne).forEach(function(he){m(J,he)?J[he]=ne[he]:H(J,he,ne[he])}))),te});return d.mutate(D).then(function(V){for(var q=V.failures,Y=V.results,ne=V.numFailures,V=V.lastResult,J=0;J<R.length;++J){var ie=(Y||R)[J],te=j[J];ie==null?te.onerror&&te.onerror(q[J]):te.onsuccess&&te.onsuccess(D.type==="put"&&F[J]?D.values[J]:ie)}return{failures:q,results:Y,numFailures:ne,lastResult:V}}).catch(function(V){return j.forEach(function(q){return q.onerror&&q.onerror(V)}),Promise.reject(V)})})}}})}})}};function lw(u,c,d){try{if(!c||c.keys.length<u.length)return null;for(var p=[],v=0,g=0;v<c.keys.length&&g<u.length;++v)je(c.keys[v],u[g])===0&&(p.push(d?Pe(c.values[v]):c.values[v]),++g);return p.length===u.length?p:null}catch{return null}}var qx={stack:"dbcore",level:-1,create:function(u){return{table:function(c){var d=u.table(c);return r(r({},d),{getMany:function(p){if(!p.cache)return d.getMany(p);var v=lw(p.keys,p.trans._cache,p.cache==="clone");return v?se.resolve(v):d.getMany(p).then(function(g){return p.trans._cache={keys:p.keys,values:p.cache==="clone"?Pe(g):g},g})},mutate:function(p){return p.type!=="add"&&(p.trans._cache=null),d.mutate(p)}})}}}};function cw(u,c){return u.trans.mode==="readonly"&&!!u.subscr&&!u.trans.explicit&&u.trans.db._options.cache!=="disabled"&&!c.schema.primaryKey.outbound}function fw(u,c){switch(u){case"query":return c.values&&!c.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Hx={stack:"dbcore",level:0,name:"Observability",create:function(u){var c=u.schema.name,d=new nn(u.MIN_KEY,u.MAX_KEY);return r(r({},u),{transaction:function(p,v,g){if(fe.subscr&&v!=="readonly")throw new pe.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(fe.querier));return u.transaction(p,v,g)},table:function(p){function v(P){var P=(T=P.query).index,T=T.range;return[P,new nn((P=T.lower)!==null&&P!==void 0?P:u.MIN_KEY,(T=T.upper)!==null&&T!==void 0?T:u.MAX_KEY)]}var g=u.table(p),b=g.schema,k=b.primaryKey,A=k.extractKey,x=k.outbound,M=r(r({},g),{mutate:function(C){function P(te){return te="idb://".concat(c,"/").concat(p,"/").concat(te),j[te]||(j[te]=new nn)}var T,B,R,F=C.trans,j=C.mutatedParts||(C.mutatedParts={}),V=P(""),q=P(":dels"),Y=C.type,ie=C.type==="deleteRange"?[C.range]:C.type==="delete"?[C.keys]:C.values.length<50?[bp(k,C).filter(function(te){return te}),C.values]:[],ne=ie[0],J=ie[1],ie=C.trans._cache;return a(ne)?(V.addKeys(ne),(ie=Y==="delete"||ne.length===J.length?lw(ne,ie):null)||q.addKeys(ne),(ie||J)&&(T=P,B=ie,R=J,b.indexes.forEach(function(te){var he=T(te.name||"");function me(Ce){return Ce!=null?te.extractKey(Ce):null}function He(Ce){return te.multiEntry&&a(Ce)?Ce.forEach(function(nt){return he.addKey(nt)}):he.addKey(Ce)}(B||R).forEach(function(Ce,De){var Vn=B&&me(B[De]),De=R&&me(R[De]);je(Vn,De)!==0&&(Vn!=null&&He(Vn),De!=null&&He(De))})}))):ne?(J={from:ne.lower,to:ne.upper},q.add(J),V.add(J)):(V.add(d),q.add(d),b.indexes.forEach(function(te){return P(te.name).add(d)})),g.mutate(C).then(function(te){return!ne||C.type!=="add"&&C.type!=="put"||V.addKeys(te.results),F.mutatedParts=Mc(F.mutatedParts||{},j),te})}}),D={get:function(C){return[k,new nn(C.key)]},getMany:function(C){return[k,new nn().addKeys(C.keys)]},count:v,query:v,openCursor:v};return o(D).forEach(function(C){M[C]=function(P){var T=fe.subscr,B=!!T,R=cw(fe,g)&&fw(C,P)?P.obsSet={}:T;if(B){var F=function(J){return J="idb://".concat(c,"/").concat(p,"/").concat(J),R[J]||(R[J]=new nn)},j=F(""),V=F(":dels"),T=D[C](P),B=T[0],T=T[1];if((C==="query"&&B.isPrimaryKey&&!P.values?V:F(B.name||"")).add(T),!B.isPrimaryKey){if(C!=="count"){var q=C==="query"&&x&&P.values&&g.query(r(r({},P),{values:!1}));return g[C].apply(this,arguments).then(function(J){if(C==="query"){if(x&&P.values)return q.then(function(me){return me=me.result,j.addKeys(me),J});var ie=P.values?J.result.map(A):J.result;(P.values?j:V).addKeys(ie)}else if(C==="openCursor"){var te=J,he=P.values;return te&&Object.create(te,{key:{get:function(){return V.addKey(te.primaryKey),te.key}},primaryKey:{get:function(){var me=te.primaryKey;return V.addKey(me),me}},value:{get:function(){return he&&j.addKey(te.primaryKey),te.value}}})}return J})}V.add(d)}}return g[C].apply(this,arguments)}}),M}})}};function dw(u,c,d){if(d.numFailures===0)return c;if(c.type==="deleteRange")return null;var p=c.keys?c.keys.length:"values"in c&&c.values?c.values.length:1;return d.numFailures===p?null:(c=r({},c),a(c.keys)&&(c.keys=c.keys.filter(function(v,g){return!(g in d.failures)})),"values"in c&&a(c.values)&&(c.values=c.values.filter(function(v,g){return!(g in d.failures)})),c)}function Sp(u,c){return d=u,((p=c).lower===void 0||(p.lowerOpen?0<je(d,p.lower):0<=je(d,p.lower)))&&(u=u,(c=c).upper===void 0||(c.upperOpen?je(u,c.upper)<0:je(u,c.upper)<=0));var d,p}function hw(u,c,C,p,v,g){if(!C||C.length===0)return u;var b=c.query.index,k=b.multiEntry,A=c.query.range,x=p.schema.primaryKey.extractKey,M=b.extractKey,D=(b.lowLevelIndex||b).extractKey,C=C.reduce(function(P,T){var B=P,R=T.type==="add"||T.type==="put"?T.values.filter(function(q){return q=M(q),k&&a(q)?q.some(function(Y){return Sp(Y,A)}):Sp(q,A)}).map(function(q){return q=Pe(q),g&&Object.freeze(q),q}):[];switch(T.type){case"add":B=P.concat(c.values?R:R.map(function(Y){return x(Y)}));break;case"put":var F=new nn().addKeys(T.values.map(function(Y){return x(Y)})),B=P.filter(function(Y){return Y=c.values?x(Y):Y,!Tc(new nn(Y),F)}).concat(c.values?R:R.map(function(Y){return x(Y)}));break;case"delete":var j=new nn().addKeys(T.keys);B=P.filter(function(Y){return Y=c.values?x(Y):Y,!Tc(new nn(Y),j)});break;case"deleteRange":var V=T.range;B=P.filter(function(Y){return!Sp(x(Y),V)})}return B},u);return C===u?u:(C.sort(function(P,T){return je(D(P),D(T))||je(x(P),x(T))}),c.limit&&c.limit<1/0&&(C.length>c.limit?C.length=c.limit:u.length===c.limit&&C.length<c.limit&&(v.dirty=!0)),g?Object.freeze(C):C)}function pw(u,c){return je(u.lower,c.lower)===0&&je(u.upper,c.upper)===0&&!!u.lowerOpen==!!c.lowerOpen&&!!u.upperOpen==!!c.upperOpen}function Qx(u,c){return function(d,p,v,g){if(d===void 0)return p!==void 0?-1:0;if(p===void 0)return 1;if((p=je(d,p))===0){if(v&&g)return 0;if(v)return 1;if(g)return-1}return p}(u.lower,c.lower,u.lowerOpen,c.lowerOpen)<=0&&0<=function(d,p,v,g){if(d===void 0)return p!==void 0?1:0;if(p===void 0)return-1;if((p=je(d,p))===0){if(v&&g)return 0;if(v)return-1;if(g)return 1}return p}(u.upper,c.upper,u.upperOpen,c.upperOpen)}function Yx(u,c,d,p){u.subscribers.add(d),p.addEventListener("abort",function(){var v,g;u.subscribers.delete(d),u.subscribers.size===0&&(v=u,g=c,setTimeout(function(){v.subscribers.size===0&&G(g,v)},3e3))})}var Gx={stack:"dbcore",level:0,name:"Cache",create:function(u){var c=u.schema.name;return r(r({},u),{transaction:function(d,p,v){var g,b,k=u.transaction(d,p,v);return p==="readwrite"&&(b=(g=new AbortController).signal,v=function(A){return function(){if(g.abort(),p==="readwrite"){for(var x=new Set,M=0,D=d;M<D.length;M++){var C=D[M],P=no["idb://".concat(c,"/").concat(C)];if(P){var T=u.table(C),B=P.optimisticOps.filter(function(me){return me.trans===k});if(k._explicit&&A&&k.mutatedParts)for(var R=0,F=Object.values(P.queries.query);R<F.length;R++)for(var j=0,V=(ne=F[R]).slice();j<V.length;j++)mp((J=V[j]).obsSet,k.mutatedParts)&&(G(ne,J),J.subscribers.forEach(function(me){return x.add(me)}));else if(0<B.length){P.optimisticOps=P.optimisticOps.filter(function(me){return me.trans!==k});for(var q=0,Y=Object.values(P.queries.query);q<Y.length;q++)for(var ne,J,ie,te=0,he=(ne=Y[q]).slice();te<he.length;te++)(J=he[te]).res!=null&&k.mutatedParts&&(A&&!J.dirty?(ie=Object.isFrozen(J.res),ie=hw(J.res,J.req,B,T,J,ie),J.dirty?(G(ne,J),J.subscribers.forEach(function(me){return x.add(me)})):ie!==J.res&&(J.res=ie,J.promise=se.resolve({result:ie}))):(J.dirty&&G(ne,J),J.subscribers.forEach(function(me){return x.add(me)})))}}}x.forEach(function(me){return me()})}}},k.addEventListener("abort",v(!1),{signal:b}),k.addEventListener("error",v(!1),{signal:b}),k.addEventListener("complete",v(!0),{signal:b})),k},table:function(d){var p=u.table(d),v=p.schema.primaryKey;return r(r({},p),{mutate:function(g){var b=fe.trans;if(v.outbound||b.db._options.cache==="disabled"||b.explicit)return p.mutate(g);var k=no["idb://".concat(c,"/").concat(d)];return k?(b=p.mutate(g),g.type!=="add"&&g.type!=="put"||!(50<=g.values.length||bp(v,g).some(function(A){return A==null}))?(k.optimisticOps.push(g),g.mutatedParts&&Nc(g.mutatedParts),b.then(function(A){0<A.numFailures&&(G(k.optimisticOps,g),(A=dw(0,g,A))&&k.optimisticOps.push(A),g.mutatedParts&&Nc(g.mutatedParts))}),b.catch(function(){G(k.optimisticOps,g),g.mutatedParts&&Nc(g.mutatedParts)})):b.then(function(A){var x=dw(0,r(r({},g),{values:g.values.map(function(P,D){var C,P=(C=v.keyPath)!==null&&C!==void 0&&C.includes(".")?Pe(P):r({},P);return H(P,v.keyPath,A.results[D]),P})}),A);k.optimisticOps.push(x),queueMicrotask(function(){return g.mutatedParts&&Nc(g.mutatedParts)})}),b):p.mutate(g)},query:function(g){if(!cw(fe,p)||!fw("query",g))return p.query(g);var b=((x=fe.trans)===null||x===void 0?void 0:x.db._options.cache)==="immutable",D=fe,k=D.requery,A=D.signal,x=function(T,B,R,F){var j=no["idb://".concat(T,"/").concat(B)];if(!j)return[];if(!(B=j.queries[R]))return[null,!1,j,null];var V=B[(F.query?F.query.index.name:null)||""];if(!V)return[null,!1,j,null];switch(R){case"query":var q=V.find(function(Y){return Y.req.limit===F.limit&&Y.req.values===F.values&&pw(Y.req.query.range,F.query.range)});return q?[q,!0,j,V]:[V.find(function(Y){return("limit"in Y.req?Y.req.limit:1/0)>=F.limit&&(!F.values||Y.req.values)&&Qx(Y.req.query.range,F.query.range)}),!1,j,V];case"count":return q=V.find(function(Y){return pw(Y.req.query.range,F.query.range)}),[q,!!q,j,V]}}(c,d,"query",g),M=x[0],D=x[1],C=x[2],P=x[3];return M&&D?M.obsSet=g.obsSet:(D=p.query(g).then(function(T){var B=T.result;if(M&&(M.res=B),b){for(var R=0,F=B.length;R<F;++R)Object.freeze(B[R]);Object.freeze(B)}else T.result=Pe(B);return T}).catch(function(T){return P&&M&&G(P,M),Promise.reject(T)}),M={obsSet:g.obsSet,promise:D,subscribers:new Set,type:"query",req:g,dirty:!1},P?P.push(M):(P=[M],(C=C||(no["idb://".concat(c,"/").concat(d)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[g.query.index.name||""]=P)),Yx(M,P,k,A),M.promise.then(function(T){return{result:hw(T.result,g,C==null?void 0:C.optimisticOps,p,M,b)}})}})}})}};function Fc(u,c){return new Proxy(u,{get:function(d,p,v){return p==="db"?c:Reflect.get(d,p,v)}})}var yi=(Rt.prototype.version=function(u){if(isNaN(u)||u<.1)throw new pe.Type("Given version is not a positive number");if(u=Math.round(10*u)/10,this.idbdb||this._state.isBeingOpened)throw new pe.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,u);var c=this._versions,d=c.filter(function(p){return p._cfg.version===u})[0];return d||(d=new this.Version(u),c.push(d),c.sort($x),d.stores({}),this._state.autoSchema=!1,d)},Rt.prototype._whenReady=function(u){var c=this;return this.idbdb&&(this._state.openComplete||fe.letThrough||this._vip)?u():new se(function(d,p){if(c._state.openComplete)return p(new pe.DatabaseClosed(c._state.dbOpenError));if(!c._state.isBeingOpened){if(!c._state.autoOpen)return void p(new pe.DatabaseClosed);c.open().catch(et)}c._state.dbReadyPromise.then(d,p)}).then(u)},Rt.prototype.use=function(u){var c=u.stack,d=u.create,p=u.level,v=u.name;return v&&this.unuse({stack:c,name:v}),u=this._middlewares[c]||(this._middlewares[c]=[]),u.push({stack:c,create:d,level:p??10,name:v}),u.sort(function(g,b){return g.level-b.level}),this},Rt.prototype.unuse=function(u){var c=u.stack,d=u.name,p=u.create;return c&&this._middlewares[c]&&(this._middlewares[c]=this._middlewares[c].filter(function(v){return p?v.create!==p:!!d&&v.name!==d})),this},Rt.prototype.open=function(){var u=this;return Zs(Zi,function(){return Vx(u)})},Rt.prototype._close=function(){var u=this._state,c=Go.indexOf(this);if(0<=c&&Go.splice(c,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}u.isBeingOpened||(u.dbReadyPromise=new se(function(d){u.dbReadyResolve=d}),u.openCanceller=new se(function(d,p){u.cancelOpen=p}))},Rt.prototype.close=function(d){var c=(d===void 0?{disableAutoOpen:!0}:d).disableAutoOpen,d=this._state;c?(d.isBeingOpened&&d.cancelOpen(new pe.DatabaseClosed),this._close(),d.autoOpen=!1,d.dbOpenError=new pe.DatabaseClosed):(this._close(),d.autoOpen=this._options.autoOpen||d.isBeingOpened,d.openComplete=!1,d.dbOpenError=null)},Rt.prototype.delete=function(u){var c=this;u===void 0&&(u={disableAutoOpen:!0});var d=0<arguments.length&&typeof arguments[0]!="object",p=this._state;return new se(function(v,g){function b(){c.close(u);var k=c._deps.indexedDB.deleteDatabase(c.name);k.onsuccess=vt(function(){var A,x,M;A=c._deps,x=c.name,M=A.indexedDB,A=A.IDBKeyRange,fp(M)||x===Sc||cp(M,A).delete(x).catch(et),v()}),k.onerror=zr(g),k.onblocked=c._fireOnBlocked}if(d)throw new pe.InvalidArgument("Invalid closeOptions argument to db.delete()");p.isBeingOpened?p.dbReadyPromise.then(b):b()})},Rt.prototype.backendDB=function(){return this.idbdb},Rt.prototype.isOpen=function(){return this.idbdb!==null},Rt.prototype.hasBeenClosed=function(){var u=this._state.dbOpenError;return u&&u.name==="DatabaseClosed"},Rt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Rt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Rt.prototype,"tables",{get:function(){var u=this;return o(this._allTables).map(function(c){return u._allTables[c]})},enumerable:!1,configurable:!0}),Rt.prototype.transaction=function(){var u=(function(c,d,p){var v=arguments.length;if(v<2)throw new pe.InvalidArgument("Too few arguments");for(var g=new Array(v-1);--v;)g[v-1]=arguments[v];return p=g.pop(),[c,ee(g),p]}).apply(this,arguments);return this._transaction.apply(this,u)},Rt.prototype._transaction=function(u,c,d){var p=this,v=fe.trans;v&&v.db===this&&u.indexOf("!")===-1||(v=null);var g,b,k=u.indexOf("?")!==-1;u=u.replace("!","").replace("?","");try{if(b=c.map(function(x){if(x=x instanceof p.Table?x.name:x,typeof x!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return x}),u=="r"||u===Xh)g=Xh;else{if(u!="rw"&&u!=Zh)throw new pe.InvalidArgument("Invalid transaction mode: "+u);g=Zh}if(v){if(v.mode===Xh&&g===Zh){if(!k)throw new pe.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");v=null}v&&b.forEach(function(x){if(v&&v.storeNames.indexOf(x)===-1){if(!k)throw new pe.SubTransaction("Table "+x+" not included in parent transaction.");v=null}}),k&&v&&!v.active&&(v=null)}}catch(x){return v?v._promise(null,function(M,D){D(x)}):Pt(x)}var A=(function x(M,D,C,P,T){return se.resolve().then(function(){var B=fe.transless||fe,R=M._createTransaction(D,C,M._dbSchema,P);if(R.explicit=!0,B={trans:R,transless:B},P)R.idbtrans=P.idbtrans;else try{R.create(),R.idbtrans._explicit=!0,M._state.PR1398_maxLoop=3}catch(V){return V.name===Xi.InvalidState&&M.isOpen()&&0<--M._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),M.close({disableAutoOpen:!1}),M.open().then(function(){return x(M,D,C,null,T)})):Pt(V)}var F,j=Re(T);return j&&Yo(),B=se.follow(function(){var V;(F=T.call(R,R))&&(j?(V=ts.bind(null,null),F.then(V,V)):typeof F.next=="function"&&typeof F.throw=="function"&&(F=wp(F)))},B),(F&&typeof F.then=="function"?se.resolve(F).then(function(V){return R.active?V:Pt(new pe.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):B.then(function(){return F})).then(function(V){return P&&R._resolve(),R._completion.then(function(){return V})}).catch(function(V){return R._reject(V),Pt(V)})})}).bind(null,this,g,b,v,d);return v?v._promise(g,A,"lock"):fe.trans?Zs(fe.transless,function(){return p._whenReady(A)}):this._whenReady(A)},Rt.prototype.table=function(u){if(!m(this._allTables,u))throw new pe.InvalidTable("Table ".concat(u," does not exist"));return this._allTables[u]},Rt);function Rt(u,c){var d=this;this._middlewares={},this.verno=0;var p=Rt.dependencies;this._options=c=r({addons:Rt.addons,autoOpen:!0,indexedDB:p.indexedDB,IDBKeyRange:p.IDBKeyRange,cache:"cloned"},c),this._deps={indexedDB:c.indexedDB,IDBKeyRange:c.IDBKeyRange},p=c.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var v,g,b,k,A,x={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:et,dbReadyPromise:null,cancelOpen:et,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:c.autoOpen};x.dbReadyPromise=new se(function(D){x.dbReadyResolve=D}),x.openCanceller=new se(function(D,C){x.cancelOpen=C}),this._state=x,this.name=u,this.on=wu(this,"populate","blocked","versionchange","close",{ready:[Vh,et]}),this.on.ready.subscribe=O(this.on.ready.subscribe,function(D){return function(C,P){Rt.vip(function(){var T,B=d._state;B.openComplete?(B.dbOpenError||se.resolve().then(C),P&&D(C)):B.onReadyBeingFired?(B.onReadyBeingFired.push(C),P&&D(C)):(D(C),T=d,P||D(function R(){T.on.ready.unsubscribe(C),T.on.ready.unsubscribe(R)}))})}}),this.Collection=(v=this,_u(Rx.prototype,function(F,R){this.db=v;var P=H0,T=null;if(R)try{P=R()}catch(j){T=j}var B=F._ctx,R=B.table,F=R.hook.reading.fire;this._ctx={table:R,index:B.index,isPrimKey:!B.index||R.schema.primKey.keyPath&&B.index===R.schema.primKey.name,range:P,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:T,or:B.or,valueMapper:F!==hu?F:null}})),this.Table=(g=this,_u(J0.prototype,function(D,C,P){this.db=g,this._tx=P,this.name=D,this.schema=C,this.hook=g._allTables[D]?g._allTables[D].hook:wu(null,{creating:[Ix,et],reading:[Sx,hu],updating:[Ox,et],deleting:[Ex,et]})})),this.Transaction=(b=this,_u(Nx.prototype,function(D,C,P,T,B){var R=this;this.db=b,this.mode=D,this.storeNames=C,this.schema=P,this.chromeTransactionDurability=T,this.idbtrans=null,this.on=wu(this,"complete","error","abort"),this.parent=B||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new se(function(F,j){R._resolve=F,R._reject=j}),this._completion.then(function(){R.active=!1,R.on.complete.fire()},function(F){var j=R.active;return R.active=!1,R.on.error.fire(F),R.parent?R.parent._reject(F):j&&R.idbtrans&&R.idbtrans.abort(),Pt(F)})})),this.Version=(k=this,_u(zx.prototype,function(D){this.db=k,this._cfg={version:D,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(A=this,_u(tw.prototype,function(D,C,P){if(this.db=A,this._ctx={table:D,index:C===":id"?null:C,or:P},this._cmp=this._ascending=je,this._descending=function(T,B){return je(B,T)},this._max=function(T,B){return 0<je(T,B)?T:B},this._min=function(T,B){return je(T,B)<0?T:B},this._IDBKeyRange=A._deps.IDBKeyRange,!this._IDBKeyRange)throw new pe.MissingAPI})),this.on("versionchange",function(D){0<D.newVersion?console.warn("Another connection wants to upgrade database '".concat(d.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(d.name,"'. Closing db now to resume the delete request.")),d.close({disableAutoOpen:!1})}),this.on("blocked",function(D){!D.newVersion||D.newVersion<D.oldVersion?console.warn("Dexie.delete('".concat(d.name,"') was blocked")):console.warn("Upgrade '".concat(d.name,"' blocked by other connection holding version ").concat(D.oldVersion/10))}),this._maxKey=Iu(c.IDBKeyRange),this._createTransaction=function(D,C,P,T){return new d.Transaction(D,C,P,d._options.chromeTransactionDurability,T)},this._fireOnBlocked=function(D){d.on("blocked").fire(D),Go.filter(function(C){return C.name===d.name&&C!==d&&!C._state.vcFired}).map(function(C){return C.on("versionchange").fire(D)})},this.use(qx),this.use(Gx),this.use(Hx),this.use(Kx),this.use(Wx);var M=new Proxy(this,{get:function(D,C,P){if(C==="_vip")return!0;if(C==="table")return function(B){return Fc(d.table(B),M)};var T=Reflect.get(D,C,P);return T instanceof J0?Fc(T,M):C==="tables"?T.map(function(B){return Fc(B,M)}):C==="_createTransaction"?function(){return Fc(T.apply(this,arguments),M)}:T}});this.vip=M,p.forEach(function(D){return D(d)})}var Lc,lr=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Jx=(Ip.prototype.subscribe=function(u,c,d){return this._subscribe(u&&typeof u!="function"?u:{next:u,error:c,complete:d})},Ip.prototype[lr]=function(){return this},Ip);function Ip(u){this._subscribe=u}try{Lc={indexedDB:s.indexedDB||s.mozIndexedDB||s.webkitIndexedDB||s.msIndexedDB,IDBKeyRange:s.IDBKeyRange||s.webkitIDBKeyRange}}catch{Lc={indexedDB:null,IDBKeyRange:null}}function mw(u){var c,d=!1,p=new Jx(function(v){var g=Re(u),b,k=!1,A={},x={},M={get closed(){return k},unsubscribe:function(){k||(k=!0,b&&b.abort(),D&&is.storagemutated.unsubscribe(P))}};v.start&&v.start(M);var D=!1,C=function(){return Jh(T)},P=function(B){Mc(A,B),mp(x,A)&&C()},T=function(){var B,R,F;!k&&Lc.indexedDB&&(A={},B={},b&&b.abort(),b=new AbortController,F=function(j){var V=Ho();try{g&&Yo();var q=es(u,j);return q=g?q.finally(ts):q}finally{V&&Qo()}}(R={subscr:B,signal:b.signal,requery:C,querier:u,trans:null}),Promise.resolve(F).then(function(j){d=!0,c=j,k||R.signal.aborted||(A={},function(V){for(var q in V)if(m(V,q))return;return 1}(x=B)||D||(is(Su,P),D=!0),Jh(function(){return!k&&v.next&&v.next(j)}))},function(j){d=!1,["DatabaseClosedError","AbortError"].includes(j==null?void 0:j.name)||k||Jh(function(){k||v.error&&v.error(j)})}))};return setTimeout(C,0),M});return p.hasValue=function(){return d},p.getValue=function(){return c},p}var ro=yi;function Ep(u){var c=ss;try{ss=!0,is.storagemutated.fire(u),gp(u,!0)}finally{ss=c}}y(ro,r(r({},hc),{delete:function(u){return new ro(u,{addons:[]}).delete()},exists:function(u){return new ro(u,{addons:[]}).open().then(function(c){return c.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(u){try{return c=ro.dependencies,d=c.indexedDB,c=c.IDBKeyRange,(fp(d)?Promise.resolve(d.databases()).then(function(p){return p.map(function(v){return v.name}).filter(function(v){return v!==Sc})}):cp(d,c).toCollection().primaryKeys()).then(u)}catch{return Pt(new pe.MissingAPI)}var c,d},defineClass:function(){return function(u){l(this,u)}},ignoreTransaction:function(u){return fe.trans?Zs(fe.transless,u):u()},vip:dp,async:function(u){return function(){try{var c=wp(u.apply(this,arguments));return c&&typeof c.then=="function"?c:se.resolve(c)}catch(d){return Pt(d)}}},spawn:function(u,c,d){try{var p=wp(u.apply(d,c||[]));return p&&typeof p.then=="function"?p:se.resolve(p)}catch(v){return Pt(v)}},currentTransaction:{get:function(){return fe.trans||null}},waitFor:function(u,c){return c=se.resolve(typeof u=="function"?ro.ignoreTransaction(u):u).timeout(c||6e4),fe.trans?fe.trans.waitFor(c):c},Promise:se,debug:{get:function(){return jr},set:function(u){j0(u)}},derive:E,extend:l,props:y,override:O,Events:wu,on:is,liveQuery:mw,extendObservabilitySet:Mc,getByKeyPath:Q,setByKeyPath:H,delByKeyPath:function(u,c){typeof c=="string"?H(u,c,void 0):"length"in c&&[].map.call(c,function(d){H(u,d,void 0)})},shallowClone:X,deepClone:Pe,getObjectDiff:_p,cmp:je,asap:W,minKey:-1/0,addons:[],connections:Go,errnames:Xi,dependencies:Lc,cache:no,semVer:Ur,version:Ur.split(".").map(function(u){return parseInt(u)}).reduce(function(u,c,d){return u+c/Math.pow(10,2*d)})})),ro.maxKey=Iu(ro.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(is(Su,function(u){ss||(u=new CustomEvent(rp,{detail:u}),ss=!0,dispatchEvent(u),ss=!1)}),addEventListener(rp,function(u){u=u.detail,ss||Ep(u)}));var Zo,ss=!1,yw=function(){};return typeof BroadcastChannel<"u"&&((yw=function(){(Zo=new BroadcastChannel(rp)).onmessage=function(u){return u.data&&Ep(u.data)}})(),typeof Zo.unref=="function"&&Zo.unref(),is(Su,function(u){ss||Zo.postMessage(u)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(u){if(!yi.disableBfCache&&u.persisted){jr&&console.debug("Dexie: handling persisted pagehide"),Zo!=null&&Zo.close();for(var c=0,d=Go;c<d.length;c++)d[c].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(u){!yi.disableBfCache&&u.persisted&&(jr&&console.debug("Dexie: handling persisted pageshow"),yw(),Ep({all:new nn(-1/0,[[]])}))})),se.rejectionMapper=function(u,c){return!u||u instanceof ft||u instanceof TypeError||u instanceof SyntaxError||!u.name||!$0[u.name]?u:(c=new $0[u.name](c||u.message,u),"stack"in u&&I(c,"stack",{get:function(){return this.inner.stack}}),c)},j0(jr),r(yi,Object.freeze({__proto__:null,Dexie:yi,liveQuery:mw,Entity:Q0,cmp:je,default:yi,RangeSet:nn,mergeRanges:ku,rangesOverlap:Tc}),{default:yi}),yi})})($O);var HB=$O.exports;const Hy=rh(HB),Cb=Symbol.for("Dexie"),Qy=globalThis[Cb]||(globalThis[Cb]=Hy);if(Hy.semVer!==Qy.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Hy.semVer} and ${Qy.semVer}`);var Od="docs",QB="changes",Ab="attachments",jO="dexie",Pb=new Map,Mf=new Map;function YB(t,e,n,r){var i="rxdb-dexie-"+t+"--"+r.version+"--"+e,s=Mr(Pb,i,()=>{var o=(async()=>{var a=$e(n);a.autoOpen=!1;var l=new Qy(i,a),f={[Od]:XB(r),[QB]:"++sequence, id",[Ab]:"id"};return l.version(1).stores(f),await l.open(),{dexieDb:l,dexieTable:l[Od],dexieAttachmentsTable:l[Ab],booleanIndexes:ZB(r)}})();return Pb.set(i,s),Mf.set(s,0),o});return s}async function GB(t){var e=await t,n=Mf.get(t),r=n-1;r===0?(e.dexieDb.close(),Mf.delete(t)):Mf.set(t,r)}var Yy="__";function nc(t){var e=t.split(".");if(e.length>1)return e.map(r=>nc(r)).join(".");if(t.startsWith("|")){var n=t.substring(1);return Yy+n}else return t}function UO(t){var e=t.split(".");if(e.length>1)return e.map(r=>UO(r)).join(".");if(t.startsWith(Yy)){var n=t.substring(Yy.length);return"|"+n}else return t}function JB(t,e){return e&&(e=$e(e),e=Gy(e),t.forEach(n=>{var r=Ts(e,n),i=r?"1":"0";rE(e,n,i)}),e)}function zO(t,e){return e&&(e=$e(e),e=Jy(e),t.forEach(n=>{var r=Ts(e,n),i=r==="1";rE(e,n,i)}),e)}function Gy(t){if(!t||typeof t=="string"||typeof t=="number"||typeof t=="boolean")return t;if(Array.isArray(t))return t.map(n=>Gy(n));if(typeof t=="object"){var e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="object"&&(r=Gy(r)),e[nc(n)]=r}),e}}function Jy(t){if(!t||typeof t=="string"||typeof t=="number"||typeof t=="boolean")return t;if(Array.isArray(t))return t.map(n=>Jy(n));if(typeof t=="object"){var e={};return Object.entries(t).forEach(([n,r])=>{(typeof r=="object"||Array.isArray(t))&&(r=Jy(r)),e[UO(n)]=r}),e}}function XB(t){var e=[],n=Fn(t.primaryKey);e.push([n]),e.push(["_deleted",n]),t.indexes&&t.indexes.forEach(s=>{var o=Ua(s);e.push(o)}),e.push(["_meta.lwt",n]),e.push(["_meta.lwt"]),e=e.map(s=>s.map(o=>nc(o)));var r=e.map(s=>s.length===1?s[0]:"["+s.join("+")+"]");r=r.filter((s,o,a)=>a.indexOf(s)===o);var i=r.join(", ");return i}async function Rb(t,e){var n=await t,r=await n.dexieTable.bulkGet(e);return r.map(i=>zO(n.booleanIndexes,i))}function of(t,e){return t+"||"+e}function ZB(t){var e=new Set,n=[];return t.indexes?(t.indexes.forEach(r=>{var i=Ua(r);i.forEach(s=>{if(!e.has(s)){e.add(s);var o=zi(t,s);o.type==="boolean"&&n.push(s)}})}),n.push("_deleted"),AP(n)):n}function Tb(t){return t===li?-1/0:t}function Mb(t,e,n){if(t.includes(e)){var r=n===Ar||n===!0?"1":"0";return r}else return n}function VO(t,e,n){if(!n){if(typeof window>"u")throw new Error("IDBKeyRange missing");n=window.IDBKeyRange}var r=e.startKeys.map((o,a)=>{var l=e.index[a];return Mb(t,l,o)}).map(Tb),i=e.endKeys.map((o,a)=>{var l=e.index[a];return Mb(t,l,o)}).map(Tb),s=n.bound(r,i,!e.inclusiveStart,!e.inclusiveEnd);return s}async function Nb(t,e){var n=await t.internals,r=e.query,i=r.skip?r.skip:0,s=r.limit?r.limit:1/0,o=i+s,a=e.queryPlan,l=!1;a.selectorSatisfiedByIndex||(l=Oh(t.schema,e.query));var f=VO(n.booleanIndexes,a,n.dexieDb._options.IDBKeyRange),h=a.index,m=[];if(await n.dexieDb.transaction("r",n.dexieTable,async w=>{var I=w.idbtrans,E=I.objectStore(Od),$,S;S="["+h.map(O=>nc(O)).join("+")+"]",$=E.index(S);var _=$.openCursor(f);await new Promise(O=>{_.onsuccess=function(z){var W=z.target.result;if(W){var Q=zO(n.booleanIndexes,W.value);(!l||l(Q))&&m.push(Q),a.sortSatisfiedByIndex&&m.length===o?O():W.continue()}else O()}})}),!a.sortSatisfiedByIndex){var y=Lg(t.schema,e.query);m=m.sort(y)}return m=m.slice(i,o),{documents:m}}async function eF(t,e){var n=await t.internals,r=e.queryPlan,i=r.index,s=VO(n.booleanIndexes,r,n.dexieDb._options.IDBKeyRange),o=-1;return await n.dexieDb.transaction("r",n.dexieTable,async a=>{var l=a.idbtrans,f=l.objectStore(Od),h,m;m="["+i.map(w=>nc(w)).join("+")+"]",h=f.index(m);var y=h.count(s);o=await new Promise((w,I)=>{y.onsuccess=function(){w(y.result)},y.onerror=E=>I(E)})}),o}var tF=Ft(),nF=function(){function t(n,r,i,s,o,a,l){this.changes$=new Kt,this.instanceId=tF++,this.storage=n,this.databaseName=r,this.collectionName=i,this.schema=s,this.internals=o,this.options=a,this.settings=l,this.primaryPath=Fn(this.schema.primaryKey)}var e=t.prototype;return e.bulkWrite=async function(r,i){oo(this),r.forEach(h=>{if(!h.document._rev||h.previous&&!h.previous._rev)throw le("SNH",{args:{row:h}})});var s=await this.internals,o={success:[],error:[]},a=r.map(h=>h.document[this.primaryPath]),l;if(await s.dexieDb.transaction("rw",s.dexieTable,s.dexieAttachmentsTable,async()=>{var h=new Map,m=await Rb(this.internals,a);m.forEach(I=>{var E=I;return E&&h.set(E[this.primaryPath],E),E}),l=iO(this,this.primaryPath,h,r,i),o.error=l.errors;var y=[];l.bulkInsertDocs.forEach(I=>{o.success.push(I.document),y.push(I.document)}),l.bulkUpdateDocs.forEach(I=>{o.success.push(I.document),y.push(I.document)}),y=y.map(I=>JB(s.booleanIndexes,I)),y.length>0&&await s.dexieTable.bulkPut(y);var w=[];l.attachmentsAdd.forEach(I=>{w.push({id:of(I.documentId,I.attachmentId),data:I.attachmentData.data})}),l.attachmentsUpdate.forEach(I=>{w.push({id:of(I.documentId,I.attachmentId),data:I.attachmentData.data})}),await s.dexieAttachmentsTable.bulkPut(w),await s.dexieAttachmentsTable.bulkDelete(l.attachmentsRemove.map(I=>of(I.documentId,I.attachmentId)))}),l=ye(l),l.eventBulk.events.length>0){var f=ye(l.newestRow).document;l.eventBulk.checkpoint={id:f[this.primaryPath],lwt:f._meta.lwt},l.eventBulk.endTime=Ft(),this.changes$.next(l.eventBulk)}return o},e.findDocumentsById=async function(r,i){oo(this);var s=await this.internals,o=[];return await s.dexieDb.transaction("r",s.dexieTable,async()=>{var a=await Rb(this.internals,r);a.forEach(l=>{l&&(!l._deleted||i)&&o.push(l)})}),o},e.query=function(r){return oo(this),Nb(this,r)},e.count=async function(r){if(r.queryPlan.selectorSatisfiedByIndex){var i=await eF(this,r);return{count:i,mode:"fast"}}else{var s=await Nb(this,r);return{count:s.documents.length,mode:"slow"}}},e.changeStream=function(){return oo(this),this.changes$.asObservable()},e.cleanup=async function(r){oo(this);var i=await this.internals;return await i.dexieDb.transaction("rw",i.dexieTable,async()=>{var s=Ft()-r,o=await i.dexieTable.where("_meta.lwt").below(s).toArray(),a=[];o.forEach(l=>{l._deleted==="1"&&a.push(l[this.primaryPath])}),await i.dexieTable.bulkDelete(a)}),!0},e.getAttachmentData=async function(r,i,s){oo(this);var o=await this.internals,a=of(r,i);return await o.dexieDb.transaction("r",o.dexieAttachmentsTable,async()=>{var l=await o.dexieAttachmentsTable.get(a);if(l)return l.data;throw new Error("attachment missing documentId: "+r+" attachmentId: "+i)})},e.remove=async function(){oo(this);var r=await this.internals;return await r.dexieTable.clear(),this.close()},e.close=function(){return this.closed?this.closed:(this.closed=(async()=>{this.changes$.complete(),await GB(this.internals)})(),this.closed)},e.conflictResultionTasks=function(){return new Kt},e.resolveConflictResultionTask=async function(r){},t}();async function rF(t,e,n){var r=YB(e.databaseName,e.collectionName,n,e.schema),i=new nF(t,e.databaseName,e.collectionName,e.schema,r,e.options,n);return await NB(jO,e,i),Promise.resolve(i)}function oo(t){if(t.closed)throw new Error("RxStorageInstanceDexie is closed "+t.databaseName+"-"+t.collectionName)}var iF=function(){function t(n){this.name=jO,this.rxdbVersion=gg,this.settings=n}var e=t.prototype;return e.createStorageInstance=function(r){return sO(r),rF(this,r,this.settings)},t}();function sF(t={}){var e=new iF(t);return e}function oF(t,e,n,r,i){for(var s=i+1;r<=i;){var o=r+i>>>1,a=t[o],l=n!==void 0?n(a,e):a-e;l>=0?(s=o,i=o-1):r=o+1}return s}function aF(t,e,n,r,i){for(var s=i+1;r<=i;){var o=r+i>>>1,a=t[o],l=n!==void 0?n(a,e):a-e;l>0?(s=o,i=o-1):r=o+1}return s}function uF(t,e,n,r,i){for(var s=r-1;r<=i;){var o=r+i>>>1,a=t[o],l=n!==void 0?n(a,e):a-e;l<0?(s=o,r=o+1):i=o-1}return s}function lF(t,e,n,r,i){for(var s=r-1;r<=i;){var o=r+i>>>1,a=t[o],l=n!==void 0?n(a,e):a-e;l<=0?(s=o,r=o+1):i=o-1}return s}function cF(t,e,n,r,i){for(;r<=i;){var s=r+i>>>1,o=t[s],a=n!==void 0?n(o,e):o-e;if(a===0)return s;a<=0?r=s+1:i=s-1}return-1}function rc(t,e,n,r,i,s){return typeof n=="function"?s(t,e,n,r===void 0?0:r|0,i===void 0?t.length-1:i|0):s(t,e,void 0,n===void 0?0:n|0,r===void 0?t.length-1:r|0)}function fF(t,e,n,r,i){return rc(t,e,n,r,i,oF)}function Bb(t,e,n,r,i){return rc(t,e,n,r,i,aF)}function dF(t,e,n,r,i){return rc(t,e,n,r,i,uF)}function hF(t,e,n,r,i){return rc(t,e,n,r,i,lF)}function KO(t,e,n,r,i){return rc(t,e,n,r,i,cF)}function WO(t,e,n){return[t,e,n].join("--memory--")}function af(t){if(t.internals.removed)throw new Error("removed")}function uf(t,e){return t+"||"+e}function pF(t,e){return t.indexString<e.indexString?-1:1}function Fb(t,e,n,r,i){var s=r.document;e.documents.set(t,s);for(var o=0;o<n.length;++o){var a=n[o],l=a.docsWithIndex,f=a.getIndexableString,h=f(s),m=BE(l,{id:t,doc:s,indexString:h},pF,0);if(i){var y=f(i);if(y===h){var w=l[m-1];if(w&&w.id===t)l.splice(m-1,1);else{var I=l[m+1];if(I.id===t)l.splice(m+1,1);else throw le("SNH",{args:{row:r,byIndex:a}})}}else{var E=KO(l,{indexString:y},rl);l.splice(E,1)}}}}function mF(t,e,n,r){var i=r[t];n.documents.delete(i),Object.values(n.byIndex).forEach(s=>{var o=s.docsWithIndex,a=s.getIndexableString(r),l=KO(o,{indexString:a},rl);o.splice(l,1)})}function rl(t,e){var n=t.indexString,r=e.indexString;return n<r?-1:n===r?0:1}function yF(t,e){var n=Fn(e.primaryKey),r=e.indexes?e.indexes.map(i=>Ua(i)):[];r.push(["_deleted","_meta.lwt",n]),r.forEach(i=>{t.byIndex[Xy(i)]={index:i,docsWithIndex:[],getIndexableString:FB(e,i)}})}function Xy(t){return t.join(",")}var Lb=new Set,vF=function(){function t(n,r,i,s,o,a,l){this.closed=!1,this.storage=n,this.databaseName=r,this.collectionName=i,this.schema=s,this.internals=o,this.options=a,this.settings=l,Lb.add(this),this.primaryPath=Fn(this.schema.primaryKey)}var e=t.prototype;return e.bulkWrite=function(r,i){this.ensurePersistence(),af(this);for(var s=this.internals,o=this.internals.documents,a=this.primaryPath,l=iO(this,a,o,r,i),f=l.errors,h=new Array(l.bulkInsertDocs.length),m=l.bulkInsertDocs,y=0;y<m.length;++y){var w=m[y],I=w.document;h[y]=I}for(var E=l.bulkUpdateDocs,$=0;$<E.length;++$){var S=E[$],_=S.document;h.push(_)}if(this.internals.ensurePersistenceTask=l,this.internals.ensurePersistenceIdlePromise||(this.internals.ensurePersistenceIdlePromise=vg().then(()=>{this.internals.ensurePersistenceIdlePromise=void 0,this.ensurePersistence()})),l.eventBulk.events.length>0){var O=ye(l.newestRow).document;l.eventBulk.checkpoint={id:O[a],lwt:O._meta.lwt},l.eventBulk.endTime=Ft(),dd.then(()=>{s.changes$.next(l.eventBulk)})}var z=Promise.resolve({success:h,error:f});return z},e.ensurePersistence=function(){if(this.internals.ensurePersistenceTask){var r=this.internals,i=this.internals.documents,s=this.primaryPath,o=this.internals.ensurePersistenceTask;this.internals.ensurePersistenceTask=void 0;for(var a=Object.values(this.internals.byIndex),l=o.bulkInsertDocs,f=0;f<l.length;++f){var h=l[f],m=h.document,y=m[s];Fb(y,r,a,h,void 0)}for(var w=o.bulkUpdateDocs,I=0;I<w.length;++I){var E=w[I],$=E.document,S=$[s];Fb(S,r,a,E,i.get(S))}if(this.schema.attachments){var _=r.attachments;o.attachmentsAdd.forEach(O=>{_.set(uf(O.documentId,O.attachmentId),{writeData:O.attachmentData,digest:O.digest})}),this.schema.attachments&&(o.attachmentsUpdate.forEach(O=>{_.set(uf(O.documentId,O.attachmentId),{writeData:O.attachmentData,digest:O.digest})}),o.attachmentsRemove.forEach(O=>{_.delete(uf(O.documentId,O.attachmentId))}))}}},e.findDocumentsById=function(r,i){this.ensurePersistence();var s=this.internals.documents,o=[];if(s.size===0)return Promise.resolve(o);for(var a=0;a<r.length;++a){var l=r[a],f=s.get(l);f&&(!f._deleted||i)&&o.push(f)}return Promise.resolve(o)},e.query=function(r){this.ensurePersistence();var i=r.queryPlan,s=r.query,o=s.skip?s.skip:0,a=s.limit?s.limit:1/0,l=o+a,f=!1;i.selectorSatisfiedByIndex||(f=Oh(this.schema,r.query));var h=i.index,m=!i.sortSatisfiedByIndex,y=h,w=i.startKeys,I=vb(this.schema,y,w),E=i.endKeys;E=E;var $=LB(this.schema,y,E),S=Xy(y);if(!this.internals.byIndex[S])throw new Error("index does not exist "+S);for(var _=this.internals.byIndex[S].docsWithIndex,O=(i.inclusiveStart?fF:Bb)(_,{indexString:I},rl),z=(i.inclusiveEnd?hF:dF)(_,{indexString:$},rl),W=[],Q=!1;!Q;){var H=_[O];if(!H||O>z)break;var X=H.doc;(!f||f(X))&&W.push(X),W.length>=l&&!m&&(Q=!0),O++}if(m){var U=Lg(this.schema,r.query);W=W.sort(U)}return W=W.slice(o,l),Promise.resolve({documents:W})},e.count=async function(r){this.ensurePersistence();var i=await this.query(r);return{count:i.documents.length,mode:"fast"}},e.cleanup=function(r){this.ensurePersistence();for(var i=Ft()-r,s=["_deleted","_meta.lwt",this.primaryPath],o=Xy(s),a=this.internals.byIndex[o].docsWithIndex,l=vb(this.schema,s,[!0,0,""]),f=Bb(a,{indexString:l},rl),h=!1;!h;){var m=a[f];!m||m.doc._meta.lwt>i?h=!0:(mF(this.primaryPath,this.schema,this.internals,m.doc),f++)}return dd},e.getAttachmentData=function(r,i,s){this.ensurePersistence(),af(this);var o=uf(r,i),a=this.internals.attachments.get(o);if(!s||!a||a.digest!==s)throw new Error("attachment does not exist: "+o);return Promise.resolve(a.writeData.data)},e.changeStream=function(){return af(this),this.internals.changes$.asObservable()},e.remove=async function(){if(this.closed)throw new Error("closed");this.ensurePersistence(),af(this),this.internals.removed=!0,this.storage.collectionStates.delete(WO(this.databaseName,this.collectionName,this.schema.version)),await this.close()},e.close=function(){return Lb.delete(this),this.ensurePersistence(),this.closed||(this.closed=!0,this.internals.refCount=this.internals.refCount-1),un},e.conflictResultionTasks=function(){return this.internals.conflictResultionTasks$.asObservable()},e.resolveConflictResultionTask=function(r){return un},t}();function gF(t,e,n){var r=WO(e.databaseName,e.collectionName,e.schema.version),i=t.collectionStates.get(r);if(!i)i={id:su(5),schema:e.schema,removed:!1,refCount:1,documents:new Map,attachments:e.schema.attachments?new Map:void 0,byIndex:{},conflictResultionTasks$:new Kt,changes$:new Kt},yF(i,e.schema),t.collectionStates.set(r,i);else{if(e.devMode&&!Ka(i.schema,e.schema))throw new Error("storage was already created with a different schema");i.refCount=i.refCount+1}var s=new vF(t,e.databaseName,e.collectionName,e.schema,i,e.options,n);return Promise.resolve(s)}var wF=new Map;function $b(t={}){var e={name:"memory",rxdbVersion:gg,collectionStates:wF,createStorageInstance(n){sO(n);var r=Object.assign({},t,n.options);return gF(this,n,r)}};return e}function _F(t){let{name:e,options:n,storage:r,...i}=t;if(!r)switch(n.storageType){case"dexie":r=sF(n.storageOptions);break;case"memory":r=$b(n.storageOptions);break;default:r=$b(n.storageOptions);break}return{name:e,storage:r,options:n,...i}}const bF=/^[v^~<>=]*?(\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+))?(?:-([\da-z\-]+(?:\.[\da-z\-]+)*))?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i,jb=t=>{if(typeof t!="string")throw new TypeError("Invalid argument expected string");const e=t.match(bF);if(!e)throw new Error(`Invalid argument not valid semver ('${t}' received)`);return e.shift(),e},Ub=t=>t==="*"||t==="x"||t==="X",zb=t=>{const e=parseInt(t,10);return isNaN(e)?t:e},SF=(t,e)=>typeof t!=typeof e?[String(t),String(e)]:[t,e],IF=(t,e)=>{if(Ub(t)||Ub(e))return 0;const[n,r]=SF(zb(t),zb(e));return n>r?1:n<r?-1:0},Vb=(t,e)=>{for(let n=0;n<Math.max(t.length,e.length);n++){const r=IF(t[n]||"0",e[n]||"0");if(r!==0)return r}return 0},EF=(t,e)=>{const n=jb(t),r=jb(e),i=n.pop(),s=r.pop(),o=Vb(n,r);return o!==0?o:i&&s?Vb(i.split("."),s.split(".")):i||s?i?-1:1:0},OF=(t,e,n)=>{kF(n);const r=EF(t,e);return qO[n].includes(r)},qO={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1],"!=":[-1,1]},Kb=Object.keys(qO),kF=t=>{if(typeof t!="string")throw new TypeError(`Invalid operator type, expected string but got ${typeof t}`);if(Kb.indexOf(t)===-1)throw new Error(`Invalid operator, expected one of ${Kb.join("|")}`)},{logger:Yr,getDefaultPreparedQuery:DF}=Fr,Wb="storage-token|storageToken",Gg=async t=>{let e;try{const r=await LO()(t);if(r.ok)e=await r.json();else throw new Error(`Failed to fetch schema from "${t}", status: ${r.status}`)}catch{throw new Error(`Failed to fetch schema from "${t}"`)}return e},xF=async t=>{var e;try{const n={};for(const r in t){const i=t[r];!i.schema&&((e=i.options)!=null&&e.schemaUrl)&&(i.schema=await Gg(i.options.schemaUrl)),n[i.name]=i}return n}catch(n){throw new Error(n.message)}},CF=async(t,e)=>{let n;const i=await LO()(t);if(i.ok)n=await i.json();else throw new Error(`Failed to fetch db dump from "${t}", status: ${i.status}`);if(!e||!Object.keys(e).length)throw new Error("collections must be initialized before importing");for(const s of n.collections){const o=e[s.name];if(o)s.schemaHash=o.schema._hash;else throw new Error("no such collection as provided in dump")}return n},AF=async(t,e,n)=>{var s,o;let r={};if(t.name!=="dexie")return;const i=(s=await e.internals)==null?void 0:s.dexieTable;if(r=(o=await i.get(Wb))==null?void 0:o.data,!(r!=null&&r.rxdbVersion)||OF(n,r.rxdbVersion,">"))try{await i.update(Wb,{data:{...r,rxdbVersion:n}}),Yr.log("prepare-plugin: migrated internal storage to",n)}catch{throw new Error("prepare-plugin: unable to migrate internal storage")}},PF=async({database:t,creator:e})=>{var o;const n=await IO(t);Yr.log("prepare-plugin: hook:createRxDatabase:after");const{storage:r,internalStore:i,rxdbVersion:s}=t;if(await AF(r,i,s),!(!((o=e.options)!=null&&o.dumpPath)||!n))try{const a=await CF(e.options.dumpPath,t.collections);await t.importJSON(a),Yr.log(`prepare-plugin: imported dump for db "${t.name}"`)}catch(a){Yr.log("prepare-plugin: imported dump error",a)}},RF=async t=>{if(typeof t=="string"){const e=await Gg(t);if(!e)throw new Error(`Failed to fetch schema from "${t}"`);t=e}},TF=async({collection:t,creator:e})=>{var l,f,h;Yr.log("prepare-plugin: hook:createRxCollection:before");const n=await t.getMetadata();Yr.log("prepare-plugin: hook:createRxCollection:before",n);const r=((l=e.options)==null?void 0:l.initialDocs)||[],i=await a();if(!r.length)return;if(i||!n.isFirstTimeInstantiated){if(!((f=e.options)!=null&&f.recreate)||(h=e.options)!=null&&h.replication)return;Yr.log(`prepare-plugin: collection "${t.name}" already has ${i} docs (including _deleted), but recreate option is set`)}const s=await t.schema.hash,o={name:t.name,schemaHash:s,docs:r};try{const{success:m,error:y}=await t.importJSON(o),w=await a();Yr.log(`prepare-plugin: imported ${m.length} docs for collection "${t.name}", errors count ${y.length}, current docs count ${w}`),Yr.table(m)}catch(m){Yr.log("prepare-plugin: imported dump error",m)}return;async function a(){const{count:m}=await t.storageInstance.count(DF()).catch(()=>({count:0}));return m}},MF={name:"prepare-plugin",rxdb:!0,prototypes:{RxDatabase:t=>{Object.assign(t,{fetchSchema:Gg})},RxCollection:t=>{Object.assign(t,{getMetadata:async function(){const n=await IO(this.database),r=await Vg(this.database.internalStore),{id:i,data:s,_meta:o,_rev:a}=r.filter(l=>l.data.name===this.name).at(0)||{};return{id:i||this.name,databaseName:this.database.name,collectionName:(s==null?void 0:s.name)||this.name,storageName:this.storageInstance.originalStorageInstance.storage.name,last_modified:o!=null&&o.lwt?Math.floor(o==null?void 0:o.lwt):Date.now(),rev:a?Number(a==null?void 0:a.at(0)):1,isFirstTimeInstantiated:n}}})}},hooks:{createRxDatabase:{after:PF},preCreateRxSchema:{before:RF},createRxCollection:{after:TF}}};function HO(t,e){const n={};if(Array.isArray(e))for(const r of e){const i=Object.getOwnPropertyDescriptor(t,r);i!=null&&i.enumerable&&Object.defineProperty(n,r,i)}else for(const r of Reflect.ownKeys(t)){const i=Object.getOwnPropertyDescriptor(t,r);if(i.enumerable){const s=t[r];e(r,s,t)&&Object.defineProperty(n,r,i)}}return n}const QO="%[a-f0-9]{2}",qb=new RegExp("("+QO+")|([^%]+?)","gi"),Hb=new RegExp("("+QO+")+","gi");function Zy(t,e){try{return[decodeURIComponent(t.join(""))]}catch{}if(t.length===1)return t;e=e||1;const n=t.slice(0,e),r=t.slice(e);return Array.prototype.concat.call([],Zy(n),Zy(r))}function NF(t){try{return decodeURIComponent(t)}catch{let e=t.match(qb)||[];for(let n=1;n<e.length;n++)t=Zy(e,n).join(""),e=t.match(qb)||[];return t}}function BF(t){const e={"%FE%FF":"��","%FF%FE":"��"};let n=Hb.exec(t);for(;n;){try{e[n[0]]=decodeURIComponent(n[0])}catch{const i=NF(n[0]);i!==n[0]&&(e[n[0]]=i)}n=Hb.exec(t)}e["%C2"]="�";const r=Object.keys(e);for(const i of r)t=t.replace(new RegExp(i,"g"),e[i]);return t}function FF(t){if(typeof t!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return decodeURIComponent(t)}catch{return BF(t)}}function YO(t,e){if(!(typeof t=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(t===""||e==="")return[];const n=t.indexOf(e);return n===-1?[]:[t.slice(0,n),t.slice(n+e.length)]}const LF=t=>t==null,$F=t=>encodeURIComponent(t).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),ev=Symbol("encodeFragmentIdentifier");function jF(t){switch(t.arrayFormat){case"index":return e=>(n,r)=>{const i=n.length;return r===void 0||t.skipNull&&r===null||t.skipEmptyString&&r===""?n:r===null?[...n,[Nt(e,t),"[",i,"]"].join("")]:[...n,[Nt(e,t),"[",Nt(i,t),"]=",Nt(r,t)].join("")]};case"bracket":return e=>(n,r)=>r===void 0||t.skipNull&&r===null||t.skipEmptyString&&r===""?n:r===null?[...n,[Nt(e,t),"[]"].join("")]:[...n,[Nt(e,t),"[]=",Nt(r,t)].join("")];case"colon-list-separator":return e=>(n,r)=>r===void 0||t.skipNull&&r===null||t.skipEmptyString&&r===""?n:r===null?[...n,[Nt(e,t),":list="].join("")]:[...n,[Nt(e,t),":list=",Nt(r,t)].join("")];case"comma":case"separator":case"bracket-separator":{const e=t.arrayFormat==="bracket-separator"?"[]=":"=";return n=>(r,i)=>i===void 0||t.skipNull&&i===null||t.skipEmptyString&&i===""?r:(i=i===null?"":i,r.length===0?[[Nt(n,t),e,Nt(i,t)].join("")]:[[r,Nt(i,t)].join(t.arrayFormatSeparator)])}default:return e=>(n,r)=>r===void 0||t.skipNull&&r===null||t.skipEmptyString&&r===""?n:r===null?[...n,Nt(e,t)]:[...n,[Nt(e,t),"=",Nt(r,t)].join("")]}}function UF(t){let e;switch(t.arrayFormat){case"index":return(n,r,i)=>{if(e=/\[(\d*)]$/.exec(n),n=n.replace(/\[\d*]$/,""),!e){i[n]=r;return}i[n]===void 0&&(i[n]={}),i[n][e[1]]=r};case"bracket":return(n,r,i)=>{if(e=/(\[])$/.exec(n),n=n.replace(/\[]$/,""),!e){i[n]=r;return}if(i[n]===void 0){i[n]=[r];return}i[n]=[...i[n],r]};case"colon-list-separator":return(n,r,i)=>{if(e=/(:list)$/.exec(n),n=n.replace(/:list$/,""),!e){i[n]=r;return}if(i[n]===void 0){i[n]=[r];return}i[n]=[...i[n],r]};case"comma":case"separator":return(n,r,i)=>{const s=typeof r=="string"&&r.includes(t.arrayFormatSeparator),o=typeof r=="string"&&!s&&Oi(r,t).includes(t.arrayFormatSeparator);r=o?Oi(r,t):r;const a=s||o?r.split(t.arrayFormatSeparator).map(l=>Oi(l,t)):r===null?r:Oi(r,t);i[n]=a};case"bracket-separator":return(n,r,i)=>{const s=/(\[])$/.test(n);if(n=n.replace(/\[]$/,""),!s){i[n]=r&&Oi(r,t);return}const o=r===null?[]:r.split(t.arrayFormatSeparator).map(a=>Oi(a,t));if(i[n]===void 0){i[n]=o;return}i[n]=[...i[n],...o]};default:return(n,r,i)=>{if(i[n]===void 0){i[n]=r;return}i[n]=[...[i[n]].flat(),r]}}}function GO(t){if(typeof t!="string"||t.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function Nt(t,e){return e.encode?e.strict?$F(t):encodeURIComponent(t):t}function Oi(t,e){return e.decode?FF(t):t}function JO(t){return Array.isArray(t)?t.sort():typeof t=="object"?JO(Object.keys(t)).sort((e,n)=>Number(e)-Number(n)).map(e=>t[e]):t}function XO(t){const e=t.indexOf("#");return e!==-1&&(t=t.slice(0,e)),t}function zF(t){let e="";const n=t.indexOf("#");return n!==-1&&(e=t.slice(n)),e}function Qb(t,e){return e.parseNumbers&&!Number.isNaN(Number(t))&&typeof t=="string"&&t.trim()!==""?t=Number(t):e.parseBooleans&&t!==null&&(t.toLowerCase()==="true"||t.toLowerCase()==="false")&&(t=t.toLowerCase()==="true"),t}function Jg(t){t=XO(t);const e=t.indexOf("?");return e===-1?"":t.slice(e+1)}function Xg(t,e){e={decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1,...e},GO(e.arrayFormatSeparator);const n=UF(e),r=Object.create(null);if(typeof t!="string"||(t=t.trim().replace(/^[?#&]/,""),!t))return r;for(const i of t.split("&")){if(i==="")continue;const s=e.decode?i.replace(/\+/g," "):i;let[o,a]=YO(s,"=");o===void 0&&(o=s),a=a===void 0?null:["comma","separator","bracket-separator"].includes(e.arrayFormat)?a:Oi(a,e),n(Oi(o,e),a,r)}for(const[i,s]of Object.entries(r))if(typeof s=="object"&&s!==null)for(const[o,a]of Object.entries(s))s[o]=Qb(a,e);else r[i]=Qb(s,e);return e.sort===!1?r:(e.sort===!0?Object.keys(r).sort():Object.keys(r).sort(e.sort)).reduce((i,s)=>{const o=r[s];return o&&typeof o=="object"&&!Array.isArray(o)?i[s]=JO(o):i[s]=o,i},Object.create(null))}function ZO(t,e){if(!t)return"";e={encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:",",...e},GO(e.arrayFormatSeparator);const n=o=>e.skipNull&&LF(t[o])||e.skipEmptyString&&t[o]==="",r=jF(e),i={};for(const[o,a]of Object.entries(t))n(o)||(i[o]=a);const s=Object.keys(i);return e.sort!==!1&&s.sort(e.sort),s.map(o=>{const a=t[o];return a===void 0?"":a===null?Nt(o,e):Array.isArray(a)?a.length===0&&e.arrayFormat==="bracket-separator"?Nt(o,e)+"[]":a.reduce(r(o),[]).join("&"):Nt(o,e)+"="+Nt(a,e)}).filter(o=>o.length>0).join("&")}function ek(t,e){var i;e={decode:!0,...e};let[n,r]=YO(t,"#");return n===void 0&&(n=t),{url:((i=n==null?void 0:n.split("?"))==null?void 0:i[0])??"",query:Xg(Jg(t),e),...e&&e.parseFragmentIdentifier&&r?{fragmentIdentifier:Oi(r,e)}:{}}}function tk(t,e){e={encode:!0,strict:!0,[ev]:!0,...e};const n=XO(t.url).split("?")[0]||"",r=Jg(t.url),i={...Xg(r,{sort:!1}),...t.query};let s=ZO(i,e);s&&(s=`?${s}`);let o=zF(t.url);if(t.fragmentIdentifier){const a=new URL(n);a.hash=t.fragmentIdentifier,o=e[ev]?a.hash:`#${t.fragmentIdentifier}`}return`${n}${s}${o}`}function nk(t,e,n){n={parseFragmentIdentifier:!0,[ev]:!1,...n};const{url:r,query:i,fragmentIdentifier:s}=ek(t,n);return tk({url:r,query:HO(i,e),fragmentIdentifier:s},n)}function VF(t,e,n){const r=Array.isArray(e)?i=>!e.includes(i):(i,s)=>!e(i,s);return nk(t,r,n)}const gm=Object.freeze(Object.defineProperty({__proto__:null,exclude:VF,extract:Jg,parse:Xg,parseUrl:ek,pick:nk,stringify:ZO,stringifyUrl:tk},Symbol.toStringTag,{value:"Module"})),{keys:Yb,isEmpty:Gb,isNullOrUndefined:tv}=Fr,KF=({selector:t,sort:e,limit:n,skip:r},i)=>{const s=Yb(i.jsonSchema.properties);return Gb(t)||(t=HO(t,o=>!o.startsWith("$")&&!o.includes(".")&&s.includes(o))),Gb(e)||(e=e==null?void 0:e.filter(o=>s.includes(Yb(o)[0]))),(tv(n)||isNaN(n))&&(n=void 0),(tv(r)||isNaN(r))&&(r=void 0),{selector:t,sort:e,limit:n,skip:r}},Jb=(t,e)=>{t=gm.extract(t);const n=gm.pick(t,["selector","sort","limit","skip"]),r=gm.parse(n,{parseNumbers:!0,parseBooleans:!0}),{selector:i,sort:s,limit:o,skip:a}=r,l=i?JSON.parse(i):void 0,f=s?JSON.parse(s):void 0;return KF({selector:l,sort:f,limit:o,skip:a},e)},lf=t=>tv(t)?"":JSON.stringify(t),{logger:Xb,compactObject:WF}=Fr,qF={name:"query-params-plugin",rxdb:!0,prototypes:{RxCollection:t=>{const e=new Jr({});let n=!1,r,i=!1,s="",o=()=>Promise.resolve(!1);function a(h=PE,m){var y;n=!!((y=this.options)!=null&&y.useQueryParams),r=this.schema,!(!n||i)&&(o=m,h.pipe(Fo(),Cy(w=>{s=w}),Mt(w=>Jb(w,r)),OE(w=>(Xb.log("Error in parsing url to mango query",w),e)),Cy(w=>{Xb.log("queryParams",w)}),ME(()=>!this.destroyed)).subscribe(e),i=!0)}function l(h){if(!n)return;const{selector:m,sort:y,limit:w,skip:I}=h,E={limit:w,skip:I};m&&(E.selector=lf(h.selector)),y&&(E.sort=lf(h.sort)),o(E)}function f(h){if(!n)return;const m=Jb(s,r),y={selector:lf(h.selector||m.selector),sort:lf(h.sort||m.sort),limit:h.limit||m.limit,skip:h.skip||m.skip};o(WF(y))}Object.assign(t,{queryParams:{$:e.asObservable(),get:()=>e.getValue(),set:l,patch:f}},{queryParamsInit:a})}},hooks:{createRxCollection:{}}};var rk={minimumDeletedTime:1e3*60*60*24*31,minimumCollectionAge:1e3*60,runEach:1e3*60*5,awaitReplicationsInSync:!0,waitForLeadership:!0},wm=dd;async function HF(t){var e=t.database,n=Object.assign({},rk,e.cleanupPolicy?e.cleanupPolicy:{});await t.promiseWait(n.minimumCollectionAge),!t.destroyed&&(n.waitForLeadership&&await e.waitForLeadership(),!t.destroyed&&(await ik(t,n),await QF(t,n)))}async function ik(t,e){for(var n=t.database,r=t.storageInstance,i=!1;!i&&!t.destroyed;){if(e.awaitReplicationsInSync){var s=FO.get(t);s&&await Promise.all(s.map(o=>{if(!o.isStopped())return o.awaitInSync()}))}if(await n.requestIdlePromise(),t.destroyed)return;wm=wm.then(()=>t.destroyed?!0:r.cleanup(e.minimumDeletedTime)),i=await wm}}async function QF(t,e){for(;!t.destroyed;){if(await t.promiseWait(e.runEach),t.destroyed)return;await ik(t,e)}}var YF={name:"cleanup",rxdb:!0,prototypes:{RxCollection:t=>{t.cleanup=async function(e){var n=Object.assign({},rk,this.database.cleanupPolicy?this.database.cleanupPolicy:{});typeof e>"u"&&(e=n.minimumDeletedTime);for(var r=!1;!r&&!this.destroyed;)r=await this.storageInstance.cleanup(e)}}},hooks:{createRxCollection:{after:t=>{HF(t.collection)}}}};function GF(t){var e={name:this.name,instanceToken:this.token,collections:[]},n=Object.keys(this.collections).filter(r=>!t||t.includes(r)).filter(r=>r.charAt(0)!=="_").map(r=>this.collections[r]);return Promise.all(n.map(r=>r.exportJSON())).then(r=>(e.collections=r,e))}var JF=function(t){var e=t.collections.filter(n=>!this.collections[n.name]).map(n=>n.name);if(e.length>0)throw le("JD1",{missingCollections:e});return Promise.all(t.collections.map(n=>this.collections[n.name].importJSON(n)))},XF=async function(){var t={name:this.name,schemaHash:await this.schema.hash,docs:[]},e=ra("find",tl(),this);return nO(e).then(n=>(t.docs=n.map(r=>(r=$e(r),delete r._rev,delete r._attachments,r)),t))};async function ZF(t){if(t.schemaHash!==await this.schema.hash)throw le("JD2",{schemaHash:t.schemaHash,own:this.schema.hash});var e=t.docs;return this.storageInstance.bulkWrite(e.map(n=>{var r=Object.assign({},n,{_meta:{lwt:Ft()},_rev:Rn(),_attachments:{},_deleted:!1});return{document:r}}),"json-dump-import")}var eL={name:"json-dump",rxdb:!0,prototypes:{RxDatabase:t=>{t.exportJSON=GF,t.importJSON=JF},RxCollection:t=>{t.exportJSON=XF,t.importJSON=ZF}},overwritable:{}},tL=uO(),nL=function(t){wg(e,t);function e(n,r,i){var s;return s=t.call(this,null,r)||this,s.id=n,s.parent=i,s}return e}(tL),il={get isLocal(){return!0},get allAttachments$(){throw le("LD1",{document:this})},get primaryPath(){return"id"},get primary(){return this.id},get $(){var t=this,e=Mo(nv,this.parent);return t.parent.$.pipe(lt(n=>n.documentId===this.primary),lt(n=>n.isLocal),Mt(n=>Dg(n)),Hl(e.docCache.getLatestDocumentData(this.primary)),Fo((n,r)=>n._rev===r._rev),Mt(n=>e.docCache.getCachedRxDocument(n)),Pi(Ai))},get $$(){var t=this,e=_m(t),n=e.getReactivityFactory();return n.fromObservable(t.$,t.getLatest()._data)},get deleted$$(){var t=this,e=_m(t),n=e.getReactivityFactory();return n.fromObservable(t.deleted$,t.getLatest().deleted)},getLatest(){var t=Mo(nv,this.parent),e=t.docCache.getLatestDocumentData(this.primary);return t.docCache.getCachedRxDocument(e)},get(t){if(t="data."+t,!!this._data){if(typeof t!="string")throw el("LD2",{objPath:t});var e=Ts(this._data,t);return e=it.deepFreezeWhenDevMode(e),e}},get$(t){if(t="data."+t,it.isDevMode()){if(t.includes(".item."))throw le("LD3",{objPath:t});if(t===this.primaryPath)throw le("LD4")}return this.$.pipe(Mt(e=>e._data),Mt(e=>Ts(e,t)),Fo())},get$$(t){var e=_m(this),n=e.getReactivityFactory();return n.fromObservable(this.get$(t),this.getLatest().get(t))},async incrementalModify(t){var e=await sl(this.parent);return e.incrementalWriteQueue.addWrite(this._data,async n=>(n.data=await t(n.data,this),n)).then(n=>e.docCache.getCachedRxDocument(n))},incrementalPatch(t){return this.incrementalModify(e=>(Object.entries(t).forEach(([n,r])=>{e[n]=r}),e))},async _saveData(t){var e=await sl(this.parent),n=this._data;return t.id=this.id,e.storageInstance.bulkWrite([{previous:n,document:t}],"local-document-save-data").then(r=>{var i=r.success[0];if(!i)throw r.error[0];t=$e(t),t._rev=i._rev})},async remove(){var t=await sl(this.parent),e={id:this._data.id,data:{},_deleted:!0,_meta:Ks(),_rev:Rn(),_attachments:{}};return Tl(t.storageInstance,{previous:this._data,document:e},"local-document-remove").then(n=>t.docCache.getCachedRxDocument(n))}},Zb=!1,rL=()=>{if(!Zb){Zb=!0;var t=kh,e=Object.getOwnPropertyNames(t);e.forEach(r=>{var i=Object.getOwnPropertyDescriptor(il,r);if(!i){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(il,r,s)}});var n=r=>()=>{throw le("LD6",{functionName:r})};["populate","update","putAttachment","getAttachment","allAttachments"].forEach(r=>il[r]=n(r))}};function iL(t,e){rL();var n=new nL(t.id,t,e);return Object.setPrototypeOf(n,il),n.prototype=il,n}function _m(t){var e=t.parent;return bN(e)?e:e.database}var kd=new WeakMap,nv=new WeakMap;function e1(t){var e=t.database?t.database:t,n=t.database?t.name:"",r=(async()=>{var i=await sk(e.token,e.storage,e.name,n,e.instanceCreationOptions,e.multiInstance);i=jg(e,i,ok);var s=new XE("id",t.$.pipe(lt(h=>h.isLocal)),h=>iL(h,t)),o=new aO(i,"id",()=>{},()=>{}),a=await e.storageToken,l=i.changeStream().subscribe(h=>{var m={id:h.id,internal:!1,collectionName:t.database?t.name:void 0,storageToken:a,events:h.events.map(y=>rO(!0,y,t.database?t:void 0)),databaseToken:e.token,checkpoint:h.checkpoint,context:h.context,endTime:h.endTime,startTime:h.startTime};e.$emit(m)});t._subs.push(l);var f={database:e,parent:t,storageInstance:i,docCache:s,incrementalWriteQueue:o};return nv.set(t,f),f})();kd.set(t,r)}function sl(t){var e=kd.get(t);if(!e){var n=t.database?t.database:t,r=t.database?t.name:"";throw le("LD8",{database:n.name,collection:r})}return e}function sk(t,e,n,r,i,s){return e.createStorageInstance({databaseInstanceToken:t,databaseName:n,collectionName:sL(r),schema:ok,options:i,multiInstance:s,devMode:it.isDevMode()})}function t1(t){var e=kd.get(t);if(e)return kd.delete(t),e.then(n=>n.storageInstance.close())}async function n1(t,e,n){var r=su(10),i=await sk(r,t,e,n,{},!1);await i.remove()}function sL(t){return"plugin-local-documents-"+t}var ok=bh({title:"RxLocalDocument",version:0,primaryKey:"id",type:"object",properties:{id:{type:"string",maxLength:128},data:{type:"object",additionalProperties:!0}},required:["id","data"]});async function r1(t,e){var n=await sl(this),r={id:t,data:e,_deleted:!1,_meta:Ks(),_rev:Rn(),_attachments:{}};return Tl(n.storageInstance,{document:r},"local-document-insert").then(i=>n.docCache.getCachedRxDocument(i))}function i1(t,e){return this.getLocal(t).then(n=>{if(n)return n.incrementalModify(()=>e);var r=this.insertLocal(t,e);return r})}async function s1(t){var e=await sl(this),n=e.docCache,r=n.getLatestDocumentDataIfExists(t);return r?Promise.resolve(n.getCachedRxDocument(r)):Xl(e.storageInstance,t).then(i=>i?e.docCache.getCachedRxDocument(i):null)}function o1(t){return this.$.pipe(Hl(null),Br(async e=>{if(e)return{changeEvent:e};var n=await this.getLocal(t);return{doc:n}}),Br(async e=>{if(e.changeEvent){var n=e.changeEvent;if(!n.isLocal||n.documentId!==t)return{use:!1};var r=await this.getLocal(t);return{use:!0,doc:r}}else return{use:!0,doc:e.doc}}),lt(e=>e.use),Mt(e=>e.doc))}var ak={name:"local-documents",rxdb:!0,prototypes:{RxCollection:t=>{t.insertLocal=r1,t.upsertLocal=i1,t.getLocal=s1,t.getLocal$=o1},RxDatabase:t=>{t.insertLocal=r1,t.upsertLocal=i1,t.getLocal=s1,t.getLocal$=o1}},hooks:{createRxDatabase:{before:t=>{t.creator.localDocuments&&e1(t.database)}},createRxCollection:{before:t=>{t.creator.localDocuments&&e1(t.collection)}},preDestroyRxDatabase:{after:t=>t1(t)},postDestroyRxCollection:{after:t=>t1(t)},postRemoveRxDatabase:{after:t=>n1(t.storage,t.databaseName,"")},postRemoveRxCollection:{after:t=>n1(t.storage,t.databaseName,t.collectionName)}},overwritable:{}};async function uk(t){var e=dR(t.collection.schema.jsonSchema).map(r=>t.collection.name+"-"+r),n=await t.database.internalStore.findDocumentsById(e.map(r=>Qa(r,ko)),!1);if(n.length>1)throw new Error("more the one old collection meta found");return n[0]}function oL(t,e,n){var r=$e(n._attachments),i=Pn(n),s=i._meta;delete i._meta,i._attachments=r;for(var o=e+1,a=Promise.resolve(i),l=function(){var f=o;a=a.then(h=>aL(t,f,h)),o++};o<=t.schema.version;)l();return a.then(f=>f===null?yg:(f._meta=s,f))}function aL(t,e,n){if(n===null)return yg;var r=t.migrationStrategies[e](n,t),i=ZI(r);return i}async function lk(t){if(t.collection.schema.version===0)return Jn;var e=await uk(t);return!!e}var uL=200,ck=new WeakMap;function lL(t){var e=fk(t.database),n=e.getValue().slice(0);n.push(t),e.next(n)}function fk(t){return Mr(ck,t,()=>new Jr([]))}function cL(t){var e=ck.get(t);e&&e.complete()}var fL=function(){function t(n,r,i=[n.name,"v",n.schema.version].join("-")){this.started=!1,this.updateStatusHandlers=[],this.updateStatusQueue=dd,this.collection=n,this.migrationStrategies=r,this.statusDocKey=i,this.database=n.database,this.oldCollectionMeta=uk(this),this.mustMigrate=lk(this),this.statusDocId=Qa(this.statusDocKey,Pf),lL(this),this.$=K2(this.database.internalStore,this.statusDocId).pipe(lt(s=>!!s),Mt(s=>ye(s).data),Pi(Ai))}var e=t.prototype;return e.getStatus=function(){return As(this.$)},e.startMigration=async function(r=uL){var i=await this.mustMigrate;if(i){if(this.started)throw le("DM1");this.started=!0;var s=void 0;if(this.database.multiInstance){s=new xh(["rx-migration-state",this.database.name,this.collection.name,this.collection.schema.version].join("|"));var o=TB(s);await o.awaitLeadership()}var a=await this.oldCollectionMeta,l=await this.database.storage.createStorageInstance({databaseName:this.database.name,collectionName:this.collection.name,databaseInstanceToken:this.database.token,multiInstance:this.database.multiInstance,options:{},schema:a.data.schema,password:this.database.password,devMode:it.isDevMode()}),f=await this.getConnectedStorageInstances(),h=await this.countAllDoucments([l].concat(f.map(m=>m.oldStorage)));await this.updateStatus(m=>(m.count.total=h,m));try{await Promise.all(f.map(async m=>{await fO(this.collection,m.newStorage.collectionName,m.newStorage.schema),await this.migrateStorage(m.oldStorage,m.newStorage,r),await m.newStorage.close()})),await this.migrateStorage(l,this.collection.storageInstance.originalStorageInstance,r)}catch(m){await l.close(),await this.updateStatus(y=>(y.status="ERROR",y.error=ky(m),y));return}await Tl(this.database.internalStore,{previous:a,document:Object.assign({},a,{_deleted:!0})},"rx-migration-remove-collection-meta"),await this.updateStatus(m=>(m.status="DONE",m)),s&&await s.close()}},e.updateStatus=function(r){return this.updateStatusHandlers.push(r),this.updateStatusQueue=this.updateStatusQueue.then(async()=>{if(this.updateStatusHandlers.length!==0){var i=this.updateStatusHandlers;for(this.updateStatusHandlers=[];;){var s=await Xl(this.database.internalStore,this.statusDocId),o=Pn(s);s||(o={id:this.statusDocId,key:this.statusDocKey,context:Pf,data:{collectionName:this.collection.name,status:"RUNNING",count:{total:0,handled:0,percent:0}},_deleted:!1,_meta:Ks(),_rev:Rn(),_attachments:{}});var a=ye(o).data;for(var l of i)a=l(a);if(a.count.percent=Math.round(a.count.handled/a.count.total*100),o&&s&&Ka(o.data,s.data))break;try{await Tl(this.database.internalStore,{previous:s,document:ye(o)},Pf);break}catch(f){if(!_h(f))throw f}}}}),this.updateStatusQueue},e.migrateStorage=async function(r,i,s){var o=await this.database.storage.createStorageInstance({databaseName:this.database.name,collectionName:"rx-migration-state-meta-"+this.collection.name+"-"+this.collection.schema.version,databaseInstanceToken:this.database.token,multiInstance:this.database.multiInstance,options:{},schema:Ky(r.schema,vd(r.schema)),password:this.database.password,devMode:it.isDevMode()}),a=dN(i,bd,this.database.token,!0),l=pO({keepMeta:!0,identifier:["rx-migration-state",this.collection.name,r.schema.version,this.collection.schema.version].join("-"),replicationHandler:{masterChangesSince(){return Promise.resolve({checkpoint:null,documents:[]})},masterWrite:async h=>{h=await Promise.all(h.map(async y=>{var w=y.newDocumentState;if(i.schema.title===Rf&&(w=y.newDocumentState.docData,y.newDocumentState.isCheckpoint==="1"))return{assumedMasterState:void 0,newDocumentState:y.newDocumentState};var I=await oL(this.collection,r.schema.version,w),E={assumedMasterState:void 0,newDocumentState:i.schema.title===Rf?Object.assign({},y.newDocumentState,{docData:I}):I};return E})),h=h.filter(y=>!!y.newDocumentState);var m=await a.masterWrite(h);return m},masterChangeStream$:new Kt().asObservable()},forkInstance:r,metaInstance:o,pushBatchSize:s,pullBatchSize:0,conflictHandler:bd,hashFunction:this.database.hashFunction}),f=!1;if(l.events.error.subscribe(h=>f=h),l.events.processed.up.subscribe(()=>{this.updateStatus(h=>(h.count.handled=h.count.handled+1,h))}),await Tf(l),await mO(l),await this.updateStatusQueue,f)throw await o.close(),f;await Promise.all([r.remove(),o.remove()])},e.countAllDoucments=async function(r){var i=0;return await Promise.all(r.map(async s=>{var o=Jl(s.schema,Rl(s.schema,{selector:{}})),a=await s.count(o);i+=a.count})),i},e.getConnectedStorageInstances=async function(){var r=await this.oldCollectionMeta,i=[];return await Promise.all(await Promise.all(r.data.connectedStorages.map(async s=>{if(s.schema.title!==Rf)throw new Error("unknown migration handling for schema");var o=Ky(Pn(this.collection.schema.jsonSchema),vd(s.schema));o.version=this.collection.schema.version;var[a,l]=await Promise.all([this.database.storage.createStorageInstance({databaseInstanceToken:this.database.token,databaseName:this.database.name,devMode:it.isDevMode(),multiInstance:this.database.multiInstance,options:{},schema:s.schema,password:this.database.password,collectionName:s.collectionName}),this.database.storage.createStorageInstance({databaseInstanceToken:this.database.token,databaseName:this.database.name,devMode:it.isDevMode(),multiInstance:this.database.multiInstance,options:{},schema:o,password:this.database.password,collectionName:s.collectionName})]);i.push({oldStorage:a,newStorage:l})}))),i},e.migratePromise=async function(r){this.startMigration(r);var i=await this.mustMigrate;if(!i)return{status:"DONE",collectionName:this.collection.name,count:{handled:0,percent:0,total:0}};var s=await Promise.race([As(this.$.pipe(lt(o=>o.status==="DONE"))),As(this.$.pipe(lt(o=>o.status==="ERROR")))]);if(s.status==="ERROR")throw le("DM4",{collection:this.collection.name,error:s.error});return s},t}(),dL=new WeakMap,hL={name:"migration-schema",rxdb:!0,init(){gi(ak)},hooks:{preDestroyRxDatabase:{after:cL}},prototypes:{RxDatabase:t=>{t.migrationStates=function(){return fk(this).pipe(Pi(Ai))}},RxCollection:t=>{t.getMigrationState=function(){return Mr(dL,this,()=>new fL(this.asRxCollection,this.migrationStrategies))},t.migrationNeeded=function(){return this.schema.version===0?Jn:lk(this.getMigrationState())}}}};const Zg=(t,e)=>{switch(t){case"deep":return Ry(e);case"copy":return Ty(e)?new Date(e):Lt(e)?[...e]:wt(e)?Object.assign({},e):e;default:return e}},pL=/^[a-z]+[a-zA-Z0-9]*$/;function dk(t){if(!t.includes(".$"))return[{parent:t,selector:t},[]];const e=t.indexOf(".$"),n=t.indexOf("]"),r=t.substring(0,e),i=t.substring(e+3,n);Yt(i===""||pL.test(i),"The filter <identifier> must begin with a lowercase letter and contain only alphanumeric characters.");const s=t.substring(n+2),[o,a]=s?dk(s):[];return[{selector:t,parent:r,child:i||"$",next:o},[i,...a||[]].filter(Boolean)]}const $n=(t,e,n,r,i)=>{const{parent:s,child:o,next:a}=e;if(!o){let f=!1;return Pl(t,s,(m,y)=>f=!!r(m,y)||f,i),f}const l=lu(t,s);return Lt(l)?l.map((f,h)=>n[o]&&!n[o].test({[o]:f})?!1:a?$n(f,a,n,r,i):r(l,h)).some(Boolean):!1};function ar(t,e,n,r){const i=[];for(const[s,o]of Object.entries(t)){const[a,l]=dk(s);if(!l.length)r(o,a,{})&&i.push(a.parent);else{const f={};e.forEach(m=>{Object.keys(m).forEach(y=>{l.forEach(w=>{(y===w||y.startsWith(w+"."))&&(f[w]=f[w]||{},Object.assign(f[w],{[y]:m[y]}))})})});const h={};for(const[m,y]of Object.entries(f))h[m]=new qs(y,n.queryOptions);r(o,a,h)&&i.push(a.parent)}}return i}const mL=(t,e,n=[],r={})=>ar(e,n,r,(i,s,o)=>{const a={$each:[i]};return wt(i)&&Zn(i,"$each")&&Object.assign(a,i),$n(t,s,o,(l,f)=>{const h=l[f]||(l[f]=[]);return Bg([h,a.$each]).length===a.$each.length?!1:(l[f]=Zg(r.cloneMode,EM(h.concat(a.$each))),!0)},{buildGraph:!0})}),yL=new Set(["and","or","xor"]),vL=(t,e,n=[],r={})=>ar(e,n,r,(i,s,o)=>{const a=Object.keys(i);return Yt(a.length===1&&yL.has(a[0]),`Invalid bit operator '${a[0]}'. Must be one of 'and', 'or', or 'xor'.`),$n(t,s,o,(l,f)=>{let h=l[f];const m=i[a[0]];if(h!==void 0&&!(Qn(h)&&Qn(m)))return!1;switch(h=h||0,a[0]){case"and":l[f]=h&m;break;case"or":l[f]=h|m;break;case"xor":l[f]=h^m;break}return l[f]!==h},{buildGraph:!0})}),gL=(t,e,n=[],r={})=>{const i=Date.now();return ar(e,n,r,(s,o,a)=>$n(t,o,a,(l,f)=>(l[f]=i,!0),{buildGraph:!0}))},wL=(t,e,n=[],r={})=>ar(e,n,r,(i,s,o)=>{if(!s.child){const a=lu(t,s.parent);Yt(a===void 0||Qn(a),"cannot apply $inc to a value of non-numeric type")}return $n(t,s,o,(a,l)=>(a[l]=(a[l]||(a[l]=0))+i,!0),{buildGraph:!0})}),_L=(t,e,n=[],r={})=>ar(e,n,r,(i,s,o)=>$n(t,s,o,(a,l)=>a[l]!==void 0&&Mn(a[l],i)>-1?!1:(a[l]=i,!0),{buildGraph:!0})),bL=(t,e,n=[],r={})=>ar(e,n,r,(i,s,o)=>$n(t,s,o,(a,l)=>a[l]!==void 0&&Mn(a[l],i)<1?!1:(a[l]=i,!0),{buildGraph:!0})),SL=(t,e,n=[],r={})=>ar(e,n,r,(i,s,o)=>$n(t,s,o,(a,l)=>{const f=a[l];return a[l]=a[l]===void 0?0:a[l]*i,a[l]!==f},{buildGraph:!0})),IL=(t,e,n=[],r={})=>ar(e,n,r,(i,s,o)=>$n(t,s,o,(a,l)=>{const f=a[l];return Yt(Lt(f),`path '${s.selector}' contains an element of non-array type.`),f.length?(i===-1?f.splice(0,1):f.pop(),!0):!1})),hk=(t,e,n=[],r={})=>ar(e,n,r,(i,s,o)=>{const a=!wt(i)||Object.keys(i).some(Wo),l=new qs(a?{k:i}:i,r.queryOptions),f=a?h=>l.test({k:h}):h=>l.test(h);return $n(t,s,o,(h,m)=>{const y=h[m],w=new Array;return y.map(E=>{const $=f(E);return $||w.push(E),$}).some(Boolean)?(h[m]=w,!0):!1})}),EL=(t,e,n=[],r={})=>{const i={};return Object.entries(e).forEach(([s,o])=>{i[s]={$in:o}}),hk(t,i,n,r)},OL=Object.freeze(["$each","$slice","$sort","$position"]),kL=(t,e,n=[],r={})=>ar(e,n,r,(i,s,o)=>{const a={$each:[i]};return wt(i)&&OL.some(l=>Zn(i,l))&&Object.assign(a,i),$n(t,s,o,(l,f)=>{const h=l[f]||(l[f]=[]),m=h.slice(0,a.$slice||h.length),y=h.length,w=Qn(a.$position)?a.$position:h.length;if(h.splice(w,0,...Zg(r.cloneMode,a.$each)),a.$sort){const I=wt(a.$sort)?Object.keys(a.$sort||{}).pop():"",E=I?a.$sort[I]:a.$sort,$=I?S=>lu(S,I):S=>S;h.sort((S,_)=>E*Mn($(S),$(_)))}return Qn(a.$slice)&&(a.$slice<0?h.splice(0,h.length+a.$slice):h.splice(a.$slice)),y!=h.length||!Wi(m,h)},{descendArray:!0,buildGraph:!0})}),pk=(t,e,n=[],r={})=>ar(e,n,r,(i,s,o)=>$n(t,s,o,(a,l)=>Wi(a[l],i)?!1:(a[l]=Zg(r.cloneMode,i),!0),{buildGraph:!0})),DL=(t,e,n=[],r={})=>{const i=[],s=ar(e,n,r,(o,a,l)=>$n(t,a,l,(f,h)=>Zn(f,h)?(i.push(...pk(t,{[o]:f[h]},n,r)),delete f[h],!0):!1));return Array.from(new Set(s.concat(i)))},xL=(t,e,n=[],r={})=>ar(e,n,r,(i,s,o)=>$n(t,s,o,(a,l)=>Zn(a,l)?(Lt(a)?a[l]=null:delete a[l],!0):!1)),a1=Object.freeze(Object.defineProperty({__proto__:null,$addToSet:mL,$bit:vL,$currentDate:gL,$inc:wL,$max:_L,$min:bL,$mul:SL,$pop:IL,$pull:hk,$pullAll:EL,$push:kL,$rename:DL,$set:pk,$unset:xL},Symbol.toStringTag,{value:"Module"}));function CL(t){return(e,n,r=[],i={},s={})=>{const o=Object.assign({cloneMode:"copy"},t,s);Object.assign(o,{queryOptions:Fg(Object.assign({useStrictMode:!1},o==null?void 0:o.queryOptions))}),r=r||[],i=i||{};const a=Object.entries(n);Yt(a.length===1,"Update expression must contain only one operator.");const[l,f]=a[0];Yt(Zn(a1,l),`Update operator '${l}' is not supported.`);const h=a1[l];return Object.keys(i).length&&!new qs(i,o.queryOptions).test(e)?[]:h(e,f,r,o)}}var bm;function mk(t,e){if(!bm){var n=CL({cloneMode:"none"});bm=(r,i)=>{var s=Pn(r);return n(s,i),s}}return bm(t,e)}function AL(t){return this.incrementalModify(e=>{var n=mk(e,t);return n})}function PL(t){var e=this._data,n=mk(e,t);return this._saveData(n,e)}function RL(t){return this.exec().then(e=>e?Array.isArray(e)?Promise.all(e.map(n=>n.update(t))).then(()=>e):e.update(t).then(()=>e):null)}var TL={name:"update",rxdb:!0,prototypes:{RxDocument:t=>{t.update=PL,t.incrementalUpdate=AL},RxQuery:t=>{t.update=RL}}};const{logger:ML}=Fr;async function NL(t=[]){try{gi(ak),gi(eL),gi(hL),gi(TL),gi(YF),gi(MF),gi(qF);for(const e of t)gi(e);ML.log("rxdb plugins loaded")}catch(e){throw new Error(e.message??e)}}const{logger:ta}=Fr;class BL{get db(){return this.dbInstance}get dbOptions(){return this.options}get collections(){return this.db.collections}async destroyDb(){try{await this.db.remove(),await this.db.destroy(),this.dbInstance=null,ta.log("database destroy")}catch{ta.log("database destroy error")}}async initDb(e){var n,r;if(!this.dbInstance)try{if(await NL((n=e.options)==null?void 0:n.plugins),this.dbInstance=await _N(e),this.options=e,ta.log(`created database "${this.db.name}" with config "${JSON.stringify(e)}"`),(r=e==null?void 0:e.options)!=null&&r.schemas){const i=await this.initCollections(e.options.schemas);ta.log(`created ${Object.keys(i).length} collections bulk: ${Object.keys(i)}`)}}catch(i){throw ta.log("Error initializing the database:",i),i}}async initCollections(e){try{const n=await xF(e);return await this.db.addCollections(n)}catch(n){throw ta.log("Error initializing collection(s)",n),n}}}var yk={exports:{}},Xe={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gt=typeof Symbol=="function"&&Symbol.for,e0=Gt?Symbol.for("react.element"):60103,t0=Gt?Symbol.for("react.portal"):60106,Ch=Gt?Symbol.for("react.fragment"):60107,Ah=Gt?Symbol.for("react.strict_mode"):60108,Ph=Gt?Symbol.for("react.profiler"):60114,Rh=Gt?Symbol.for("react.provider"):60109,Th=Gt?Symbol.for("react.context"):60110,n0=Gt?Symbol.for("react.async_mode"):60111,Mh=Gt?Symbol.for("react.concurrent_mode"):60111,Nh=Gt?Symbol.for("react.forward_ref"):60112,Bh=Gt?Symbol.for("react.suspense"):60113,FL=Gt?Symbol.for("react.suspense_list"):60120,Fh=Gt?Symbol.for("react.memo"):60115,Lh=Gt?Symbol.for("react.lazy"):60116,LL=Gt?Symbol.for("react.block"):60121,$L=Gt?Symbol.for("react.fundamental"):60117,jL=Gt?Symbol.for("react.responder"):60118,UL=Gt?Symbol.for("react.scope"):60119;function ur(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case e0:switch(t=t.type,t){case n0:case Mh:case Ch:case Ph:case Ah:case Bh:return t;default:switch(t=t&&t.$$typeof,t){case Th:case Nh:case Lh:case Fh:case Rh:return t;default:return e}}case t0:return e}}}function vk(t){return ur(t)===Mh}Xe.AsyncMode=n0;Xe.ConcurrentMode=Mh;Xe.ContextConsumer=Th;Xe.ContextProvider=Rh;Xe.Element=e0;Xe.ForwardRef=Nh;Xe.Fragment=Ch;Xe.Lazy=Lh;Xe.Memo=Fh;Xe.Portal=t0;Xe.Profiler=Ph;Xe.StrictMode=Ah;Xe.Suspense=Bh;Xe.isAsyncMode=function(t){return vk(t)||ur(t)===n0};Xe.isConcurrentMode=vk;Xe.isContextConsumer=function(t){return ur(t)===Th};Xe.isContextProvider=function(t){return ur(t)===Rh};Xe.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===e0};Xe.isForwardRef=function(t){return ur(t)===Nh};Xe.isFragment=function(t){return ur(t)===Ch};Xe.isLazy=function(t){return ur(t)===Lh};Xe.isMemo=function(t){return ur(t)===Fh};Xe.isPortal=function(t){return ur(t)===t0};Xe.isProfiler=function(t){return ur(t)===Ph};Xe.isStrictMode=function(t){return ur(t)===Ah};Xe.isSuspense=function(t){return ur(t)===Bh};Xe.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Ch||t===Mh||t===Ph||t===Ah||t===Bh||t===FL||typeof t=="object"&&t!==null&&(t.$$typeof===Lh||t.$$typeof===Fh||t.$$typeof===Rh||t.$$typeof===Th||t.$$typeof===Nh||t.$$typeof===$L||t.$$typeof===jL||t.$$typeof===UL||t.$$typeof===LL)};Xe.typeOf=ur;yk.exports=Xe;var zL=yk.exports,r0=zL,VL={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},KL={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},WL={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},gk={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},i0={};i0[r0.ForwardRef]=WL;i0[r0.Memo]=gk;function u1(t){return r0.isMemo(t)?gk:i0[t.$$typeof]||VL}var qL=Object.defineProperty,HL=Object.getOwnPropertyNames,l1=Object.getOwnPropertySymbols,QL=Object.getOwnPropertyDescriptor,YL=Object.getPrototypeOf,c1=Object.prototype;function wk(t,e,n){if(typeof e!="string"){if(c1){var r=YL(e);r&&r!==c1&&wk(t,r,n)}var i=HL(e);l1&&(i=i.concat(l1(e)));for(var s=u1(t),o=u1(e),a=0;a<i.length;++a){var l=i[a];if(!KL[l]&&!(n&&n[l])&&!(o&&o[l])&&!(s&&s[l])){var f=QL(e,l);try{qL(t,l,f)}catch{}}}}return t}var GL=wk;const JL=rh(GL);var _k={exports:{}},Ze={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var f1=Object.getOwnPropertySymbols,XL=Object.prototype.hasOwnProperty,ZL=Object.prototype.propertyIsEnumerable;function e3(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function t3(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de",Object.getOwnPropertyNames(t)[0]==="5")return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(e).map(function(s){return e[s]});if(r.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(s){i[s]=s}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var n3=t3()?Object.assign:function(t,e){for(var n,r=e3(t),i,s=1;s<arguments.length;s++){n=Object(arguments[s]);for(var o in n)XL.call(n,o)&&(r[o]=n[o]);if(f1){i=f1(n);for(var a=0;a<i.length;a++)ZL.call(n,i[a])&&(r[i[a]]=n[i[a]])}}return r};/** @license React v16.14.0
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s0=n3,Lr=typeof Symbol=="function"&&Symbol.for,ic=Lr?Symbol.for("react.element"):60103,r3=Lr?Symbol.for("react.portal"):60106,i3=Lr?Symbol.for("react.fragment"):60107,s3=Lr?Symbol.for("react.strict_mode"):60108,o3=Lr?Symbol.for("react.profiler"):60114,a3=Lr?Symbol.for("react.provider"):60109,u3=Lr?Symbol.for("react.context"):60110,l3=Lr?Symbol.for("react.forward_ref"):60112,c3=Lr?Symbol.for("react.suspense"):60113,f3=Lr?Symbol.for("react.memo"):60115,d3=Lr?Symbol.for("react.lazy"):60116,d1=typeof Symbol=="function"&&Symbol.iterator;function sc(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var bk={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Sk={};function cu(t,e,n){this.props=t,this.context=e,this.refs=Sk,this.updater=n||bk}cu.prototype.isReactComponent={};cu.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error(sc(85));this.updater.enqueueSetState(this,t,e,"setState")};cu.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Ik(){}Ik.prototype=cu.prototype;function o0(t,e,n){this.props=t,this.context=e,this.refs=Sk,this.updater=n||bk}var a0=o0.prototype=new Ik;a0.constructor=o0;s0(a0,cu.prototype);a0.isPureReactComponent=!0;var u0={current:null},Ek=Object.prototype.hasOwnProperty,Ok={key:!0,ref:!0,__self:!0,__source:!0};function kk(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Ek.call(e,r)&&!Ok.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),f=0;f<a;f++)l[f]=arguments[f+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:ic,type:t,key:s,ref:o,props:i,_owner:u0.current}}function h3(t,e){return{$$typeof:ic,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function l0(t){return typeof t=="object"&&t!==null&&t.$$typeof===ic}function p3(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,function(n){return e[n]})}var Dk=/\/+/g,Dd=[];function xk(t,e,n,r){if(Dd.length){var i=Dd.pop();return i.result=t,i.keyPrefix=e,i.func=n,i.context=r,i.count=0,i}return{result:t,keyPrefix:e,func:n,context:r,count:0}}function Ck(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,10>Dd.length&&Dd.push(t)}function rv(t,e,n,r){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case ic:case r3:s=!0}}if(s)return n(r,t,e===""?"."+Sm(t,0):e),1;if(s=0,e=e===""?".":e+":",Array.isArray(t))for(var o=0;o<t.length;o++){i=t[o];var a=e+Sm(i,o);s+=rv(i,a,n,r)}else if(t===null||typeof t!="object"?a=null:(a=d1&&t[d1]||t["@@iterator"],a=typeof a=="function"?a:null),typeof a=="function")for(t=a.call(t),o=0;!(i=t.next()).done;)i=i.value,a=e+Sm(i,o++),s+=rv(i,a,n,r);else if(i==="object")throw n=""+t,Error(sc(31,n==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":n,""));return s}function iv(t,e,n){return t==null?0:rv(t,"",e,n)}function Sm(t,e){return typeof t=="object"&&t!==null&&t.key!=null?p3(t.key):e.toString(36)}function m3(t,e){t.func.call(t.context,e,t.count++)}function y3(t,e,n){var r=t.result,i=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?sv(t,r,n,function(s){return s}):t!=null&&(l0(t)&&(t=h3(t,i+(!t.key||e&&e.key===t.key?"":(""+t.key).replace(Dk,"$&/")+"/")+n)),r.push(t))}function sv(t,e,n,r,i){var s="";n!=null&&(s=(""+n).replace(Dk,"$&/")+"/"),e=xk(e,s,r,i),iv(t,y3,e),Ck(e)}var Ak={current:null};function Yi(){var t=Ak.current;if(t===null)throw Error(sc(321));return t}var v3={ReactCurrentDispatcher:Ak,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:u0,IsSomeRendererActing:{current:!1},assign:s0};Ze.Children={map:function(t,e,n){if(t==null)return t;var r=[];return sv(t,r,null,e,n),r},forEach:function(t,e,n){if(t==null)return t;e=xk(null,null,e,n),iv(t,m3,e),Ck(e)},count:function(t){return iv(t,function(){return null},null)},toArray:function(t){var e=[];return sv(t,e,null,function(n){return n}),e},only:function(t){if(!l0(t))throw Error(sc(143));return t}};Ze.Component=cu;Ze.Fragment=i3;Ze.Profiler=o3;Ze.PureComponent=o0;Ze.StrictMode=s3;Ze.Suspense=c3;Ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=v3;Ze.cloneElement=function(t,e,n){if(t==null)throw Error(sc(267,t));var r=s0({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=u0.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Ek.call(e,l)&&!Ok.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var f=0;f<l;f++)a[f]=arguments[f+2];r.children=a}return{$$typeof:ic,type:t.type,key:i,ref:s,props:r,_owner:o}};Ze.createContext=function(t,e){return e===void 0&&(e=null),t={$$typeof:u3,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider={$$typeof:a3,_context:t},t.Consumer=t};Ze.createElement=kk;Ze.createFactory=function(t){var e=kk.bind(null,t);return e.type=t,e};Ze.createRef=function(){return{current:null}};Ze.forwardRef=function(t){return{$$typeof:l3,render:t}};Ze.isValidElement=l0;Ze.lazy=function(t){return{$$typeof:d3,_ctor:t,_status:-1,_result:null}};Ze.memo=function(t,e){return{$$typeof:f3,type:t,compare:e===void 0?null:e}};Ze.useCallback=function(t,e){return Yi().useCallback(t,e)};Ze.useContext=function(t,e){return Yi().useContext(t,e)};Ze.useDebugValue=function(){};Ze.useEffect=function(t,e){return Yi().useEffect(t,e)};Ze.useImperativeHandle=function(t,e,n){return Yi().useImperativeHandle(t,e,n)};Ze.useLayoutEffect=function(t,e){return Yi().useLayoutEffect(t,e)};Ze.useMemo=function(t,e){return Yi().useMemo(t,e)};Ze.useReducer=function(t,e,n){return Yi().useReducer(t,e,n)};Ze.useRef=function(t){return Yi().useRef(t)};Ze.useState=function(t){return Yi().useState(t)};Ze.version="16.14.0";_k.exports=Ze;var g3=_k.exports;const ia=rh(g3),w3=new TextDecoder("utf-8"),ov=t=>w3.decode(t),_3=new TextEncoder,c0=t=>_3.encode(t),[b4,b3]=(()=>{const t=()=>{throw new Error("BigInt is not available in this environment")};function e(){throw t()}return e.asIntN=()=>{throw t()},e.asUintN=()=>{throw t()},typeof BigInt<"u"?[BigInt,!0]:[e,!1]})(),[oc,S4]=(()=>{const t=()=>{throw new Error("BigInt64Array is not available in this environment")};class e{static get BYTES_PER_ELEMENT(){return 8}static of(){throw t()}static from(){throw t()}constructor(){throw t()}}return typeof BigInt64Array<"u"?[BigInt64Array,!0]:[e,!1]})(),[ac,I4]=(()=>{const t=()=>{throw new Error("BigUint64Array is not available in this environment")};class e{static get BYTES_PER_ELEMENT(){return 8}static of(){throw t()}static from(){throw t()}constructor(){throw t()}}return typeof BigUint64Array<"u"?[BigUint64Array,!0]:[e,!1]})(),S3=t=>typeof t=="number",Pk=t=>typeof t=="boolean",Ut=t=>typeof t=="function",Nn=t=>t!=null&&Object(t)===t,Ms=t=>Nn(t)&&Ut(t.then),uc=t=>Nn(t)&&Ut(t[Symbol.iterator]),fu=t=>Nn(t)&&Ut(t[Symbol.asyncIterator]),av=t=>Nn(t)&&Nn(t.schema),Rk=t=>Nn(t)&&"done"in t&&"value"in t,Tk=t=>Nn(t)&&Ut(t.stat)&&S3(t.fd),Mk=t=>Nn(t)&&f0(t.body),$h=t=>"_getDOMStream"in t&&"_getNodeStream"in t,I3=t=>Nn(t)&&Ut(t.abort)&&Ut(t.getWriter)&&!$h(t),f0=t=>Nn(t)&&Ut(t.cancel)&&Ut(t.getReader)&&!$h(t),E3=t=>Nn(t)&&Ut(t.end)&&Ut(t.write)&&Pk(t.writable)&&!$h(t),Nk=t=>Nn(t)&&Ut(t.read)&&Ut(t.pipe)&&Pk(t.readable)&&!$h(t),O3=t=>Nn(t)&&Ut(t.clear)&&Ut(t.bytes)&&Ut(t.position)&&Ut(t.setPosition)&&Ut(t.capacity)&&Ut(t.getBufferIdentifier)&&Ut(t.createLong),d0=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function k3(t){const e=t[0]?[t[0]]:[];let n,r,i,s;for(let o,a,l=0,f=0,h=t.length;++l<h;){if(o=e[f],a=t[l],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(e[++f]=a);continue}if({byteOffset:n,byteLength:i}=o,{byteOffset:r,byteLength:s}=a,n+i<r||r+s<n){a&&(e[++f]=a);continue}e[f]=new Uint8Array(o.buffer,n,r-n+s)}return e}function h1(t,e,n=0,r=e.byteLength){const i=t.byteLength,s=new Uint8Array(t.buffer,t.byteOffset,i),o=new Uint8Array(e.buffer,e.byteOffset,Math.min(r,i));return s.set(o,n),t}function fi(t,e){const n=k3(t),r=n.reduce((h,m)=>h+m.byteLength,0);let i,s,o,a=0,l=-1;const f=Math.min(e||Number.POSITIVE_INFINITY,r);for(const h=n.length;++l<h;){if(i=n[l],s=i.subarray(0,Math.min(i.length,f-a)),f<=a+s.length){s.length<i.length?n[l]=i.subarray(s.length):s.length===i.length&&l++,o?h1(o,s,a):o=s;break}h1(o||(o=new Uint8Array(f)),s,a),a+=s.length}return[o||new Uint8Array(0),n.slice(l),r-(o?o.byteLength:0)]}function rt(t,e){let n=Rk(e)?e.value:e;return n instanceof t?t===Uint8Array?new t(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=c0(n)),n instanceof ArrayBuffer?new t(n):n instanceof d0?new t(n):O3(n)?rt(t,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new t(0):new t(n.buffer,n.byteOffset,n.byteLength/t.BYTES_PER_ELEMENT):t.from(n)):new t(0)}const Fu=t=>rt(Int32Array,t),Ue=t=>rt(Uint8Array,t),uv=t=>(t.next(),t);function*D3(t,e){const n=function*(i){yield i},r=typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof d0?n(e):uc(e)?e:n(e);return yield*uv(function*(i){let s=null;do s=i.next(yield rt(t,s));while(!s.done)}(r[Symbol.iterator]())),new t}const x3=t=>D3(Uint8Array,t);function Bk(t,e){return Dr(this,arguments,function*(){if(Ms(e))return yield ge(yield ge(yield*Df(Ds(Bk(t,yield ge(e))))));const r=function(o){return Dr(this,arguments,function*(){yield yield ge(yield ge(o))})},i=function(o){return Dr(this,arguments,function*(){yield ge(yield*Df(Ds(uv(function*(a){let l=null;do l=a.next(yield l==null?void 0:l.value);while(!l.done)}(o[Symbol.iterator]())))))})},s=typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof d0?r(e):uc(e)?i(e):fu(e)?e:r(e);return yield ge(yield*Df(Ds(uv(function(o){return Dr(this,arguments,function*(){let a=null;do a=yield ge(o.next(yield yield ge(rt(t,a))));while(!a.done)})}(s[Symbol.asyncIterator]()))))),yield ge(new t)})}const C3=t=>Bk(Uint8Array,t);function h0(t,e,n){if(t!==0){n=n.slice(0,e+1);for(let r=-1;++r<=e;)n[r]+=t}return n}function A3(t,e){let n=0;const r=t.length;if(r!==e.length)return!1;if(r>0)do if(t[n]!==e[n])return!1;while(++n<r);return!0}const fr={fromIterable(t){return cf(P3(t))},fromAsyncIterable(t){return cf(R3(t))},fromDOMStream(t){return cf(T3(t))},fromNodeStream(t){return cf(N3(t))},toDOMStream(t,e){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(t,e){throw new Error('"toNodeStream" not available in this environment')}},cf=t=>(t.next(),t);function*P3(t){let e,n=!1,r=[],i,s,o,a=0;function l(){return s==="peek"?fi(r,o)[0]:([i,r,a]=fi(r,o),i)}({cmd:s,size:o}=yield null);const f=x3(t)[Symbol.iterator]();try{do if({done:e,value:i}=Number.isNaN(o-a)?f.next():f.next(o-a),!e&&i.byteLength>0&&(r.push(i),a+=i.byteLength),e||o<=a)do({cmd:s,size:o}=yield l());while(o<a);while(!e)}catch(h){(n=!0)&&typeof f.throw=="function"&&f.throw(h)}finally{n===!1&&typeof f.return=="function"&&f.return(null)}return null}function R3(t){return Dr(this,arguments,function*(){let n,r=!1,i=[],s,o,a,l=0;function f(){return o==="peek"?fi(i,a)[0]:([s,i,l]=fi(i,a),s)}({cmd:o,size:a}=yield yield ge(null));const h=C3(t)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(a-l)?yield ge(h.next()):yield ge(h.next(a-l)),!n&&s.byteLength>0&&(i.push(s),l+=s.byteLength),n||a<=l)do({cmd:o,size:a}=yield yield ge(f()));while(a<l);while(!n)}catch(m){(r=!0)&&typeof h.throw=="function"&&(yield ge(h.throw(m)))}finally{r===!1&&typeof h.return=="function"&&(yield ge(h.return(new Uint8Array(0))))}return yield ge(null)})}function T3(t){return Dr(this,arguments,function*(){let n=!1,r=!1,i=[],s,o,a,l=0;function f(){return o==="peek"?fi(i,a)[0]:([s,i,l]=fi(i,a),s)}({cmd:o,size:a}=yield yield ge(null));const h=new M3(t);try{do if({done:n,value:s}=Number.isNaN(a-l)?yield ge(h.read()):yield ge(h.read(a-l)),!n&&s.byteLength>0&&(i.push(Ue(s)),l+=s.byteLength),n||a<=l)do({cmd:o,size:a}=yield yield ge(f()));while(a<l);while(!n)}catch(m){(r=!0)&&(yield ge(h.cancel(m)))}finally{r===!1?yield ge(h.cancel()):t.locked&&h.releaseLock()}return yield ge(null)})}class M3{constructor(e){this.source=e,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(e){return ve(this,void 0,void 0,function*(){const{reader:n,source:r}=this;n&&(yield n.cancel(e).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(e){return ve(this,void 0,void 0,function*(){if(e===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=Ue(n)),n})}}const Im=(t,e)=>{const n=i=>r([e,i]);let r;return[e,n,new Promise(i=>(r=i)&&t.once(e,n))]};function N3(t){return Dr(this,arguments,function*(){const n=[];let r="error",i=!1,s=null,o,a,l=0,f=[],h;function m(){return o==="peek"?fi(f,a)[0]:([h,f,l]=fi(f,a),h)}if({cmd:o,size:a}=yield yield ge(null),t.isTTY)return yield yield ge(new Uint8Array(0)),yield ge(null);try{n[0]=Im(t,"end"),n[1]=Im(t,"error");do{if(n[2]=Im(t,"readable"),[r,s]=yield ge(Promise.race(n.map(w=>w[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(a-l)?(h=Ue(t.read(a-l)),h.byteLength<a-l&&(h=Ue(t.read()))):h=Ue(t.read()),h.byteLength>0&&(f.push(h),l+=h.byteLength)),i||a<=l)do({cmd:o,size:a}=yield yield ge(m()));while(a<l)}while(!i)}finally{yield ge(y(n,r==="error"?s:null))}return yield ge(null);function y(w,I){return h=f=null,new Promise((E,$)=>{for(const[S,_]of w)t.off(S,_);try{const S=t.destroy;S&&S.call(t,I),I=void 0}catch(S){I=S||I}finally{I!=null?$(I):E()}})}})}var Yn;(function(t){t[t.V1=0]="V1",t[t.V2=1]="V2",t[t.V3=2]="V3",t[t.V4=3]="V4",t[t.V5=4]="V5"})(Yn||(Yn={}));var tr;(function(t){t[t.Sparse=0]="Sparse",t[t.Dense=1]="Dense"})(tr||(tr={}));var An;(function(t){t[t.HALF=0]="HALF",t[t.SINGLE=1]="SINGLE",t[t.DOUBLE=2]="DOUBLE"})(An||(An={}));var Hi;(function(t){t[t.DAY=0]="DAY",t[t.MILLISECOND=1]="MILLISECOND"})(Hi||(Hi={}));var ze;(function(t){t[t.SECOND=0]="SECOND",t[t.MILLISECOND=1]="MILLISECOND",t[t.MICROSECOND=2]="MICROSECOND",t[t.NANOSECOND=3]="NANOSECOND"})(ze||(ze={}));var Ns;(function(t){t[t.YEAR_MONTH=0]="YEAR_MONTH",t[t.DAY_TIME=1]="DAY_TIME",t[t.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(Ns||(Ns={}));var Ve;(function(t){t[t.NONE=0]="NONE",t[t.Schema=1]="Schema",t[t.DictionaryBatch=2]="DictionaryBatch",t[t.RecordBatch=3]="RecordBatch",t[t.Tensor=4]="Tensor",t[t.SparseTensor=5]="SparseTensor"})(Ve||(Ve={}));var N;(function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.Float=3]="Float",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct=13]="Struct",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Dictionary=-1]="Dictionary",t[t.Int8=-2]="Int8",t[t.Int16=-3]="Int16",t[t.Int32=-4]="Int32",t[t.Int64=-5]="Int64",t[t.Uint8=-6]="Uint8",t[t.Uint16=-7]="Uint16",t[t.Uint32=-8]="Uint32",t[t.Uint64=-9]="Uint64",t[t.Float16=-10]="Float16",t[t.Float32=-11]="Float32",t[t.Float64=-12]="Float64",t[t.DateDay=-13]="DateDay",t[t.DateMillisecond=-14]="DateMillisecond",t[t.TimestampSecond=-15]="TimestampSecond",t[t.TimestampMillisecond=-16]="TimestampMillisecond",t[t.TimestampMicrosecond=-17]="TimestampMicrosecond",t[t.TimestampNanosecond=-18]="TimestampNanosecond",t[t.TimeSecond=-19]="TimeSecond",t[t.TimeMillisecond=-20]="TimeMillisecond",t[t.TimeMicrosecond=-21]="TimeMicrosecond",t[t.TimeNanosecond=-22]="TimeNanosecond",t[t.DenseUnion=-23]="DenseUnion",t[t.SparseUnion=-24]="SparseUnion",t[t.IntervalDayTime=-25]="IntervalDayTime",t[t.IntervalYearMonth=-26]="IntervalYearMonth"})(N||(N={}));var bi;(function(t){t[t.OFFSET=0]="OFFSET",t[t.DATA=1]="DATA",t[t.VALIDITY=2]="VALIDITY",t[t.TYPE=3]="TYPE"})(bi||(bi={}));const B3=void 0;function Nl(t){if(t===null)return"null";if(t===B3)return"undefined";switch(typeof t){case"number":return`${t}`;case"bigint":return`${t}`;case"string":return`"${t}"`}return typeof t[Symbol.toPrimitive]=="function"?t[Symbol.toPrimitive]("string"):ArrayBuffer.isView(t)?t instanceof oc||t instanceof ac?`[${[...t].map(e=>Nl(e))}]`:`[${t}]`:ArrayBuffer.isView(t)?`[${t}]`:JSON.stringify(t,(e,n)=>typeof n=="bigint"?`${n}`:n)}const F3=Symbol.for("isArrowBigNum");function $r(t,...e){return e.length===0?Object.setPrototypeOf(rt(this.TypedArray,t),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(t,...e),this.constructor.prototype)}$r.prototype[F3]=!0;$r.prototype.toJSON=function(){return`"${xo(this)}"`};$r.prototype.valueOf=function(){return Fk(this)};$r.prototype.toString=function(){return xo(this)};$r.prototype[Symbol.toPrimitive]=function(t="default"){switch(t){case"number":return Fk(this);case"string":return xo(this);case"default":return lv(this)}return xo(this)};function xa(...t){return $r.apply(this,t)}function Ca(...t){return $r.apply(this,t)}function Bl(...t){return $r.apply(this,t)}Object.setPrototypeOf(xa.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(Ca.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(Bl.prototype,Object.create(Uint32Array.prototype));Object.assign(xa.prototype,$r.prototype,{constructor:xa,signed:!0,TypedArray:Int32Array,BigIntArray:oc});Object.assign(Ca.prototype,$r.prototype,{constructor:Ca,signed:!1,TypedArray:Uint32Array,BigIntArray:ac});Object.assign(Bl.prototype,$r.prototype,{constructor:Bl,signed:!0,TypedArray:Uint32Array,BigIntArray:ac});function Fk(t){const{buffer:e,byteOffset:n,length:r,signed:i}=t,s=new ac(e,n,r),o=i&&s[s.length-1]&BigInt(1)<<BigInt(63);let a=BigInt(o?1:0),l=BigInt(0);if(o){for(const f of s)a+=~f*(BigInt(1)<<BigInt(32)*l++);a*=BigInt(-1)}else for(const f of s)a+=f*(BigInt(1)<<BigInt(32)*l++);return a}let xo,lv;b3?(lv=t=>t.byteLength===8?new t.BigIntArray(t.buffer,t.byteOffset,1)[0]:Em(t),xo=t=>t.byteLength===8?`${new t.BigIntArray(t.buffer,t.byteOffset,1)[0]}`:Em(t)):(xo=Em,lv=xo);function Em(t){let e="";const n=new Uint32Array(2);let r=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let s=-1;const o=r.length-1;do{for(n[0]=r[s=0];s<o;)r[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+r[s];r[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,e=`${n[0]}${e}`}while(i[0]||i[1]||i[2]||i[3]);return e??"0"}class p0{static new(e,n){switch(n){case!0:return new xa(e);case!1:return new Ca(e)}switch(e.constructor){case Int8Array:case Int16Array:case Int32Array:case oc:return new xa(e)}return e.byteLength===16?new Bl(e):new Ca(e)}static signed(e){return new xa(e)}static unsigned(e){return new Ca(e)}static decimal(e){return new Bl(e)}constructor(e,n){return p0.new(e,n)}}var Lk,$k,jk,Uk,zk,Vk,Kk,Wk,qk,Hk,Qk,Yk,Gk,Jk,Xk,Zk,eD,tD,nD;class we{static isNull(e){return(e==null?void 0:e.typeId)===N.Null}static isInt(e){return(e==null?void 0:e.typeId)===N.Int}static isFloat(e){return(e==null?void 0:e.typeId)===N.Float}static isBinary(e){return(e==null?void 0:e.typeId)===N.Binary}static isUtf8(e){return(e==null?void 0:e.typeId)===N.Utf8}static isBool(e){return(e==null?void 0:e.typeId)===N.Bool}static isDecimal(e){return(e==null?void 0:e.typeId)===N.Decimal}static isDate(e){return(e==null?void 0:e.typeId)===N.Date}static isTime(e){return(e==null?void 0:e.typeId)===N.Time}static isTimestamp(e){return(e==null?void 0:e.typeId)===N.Timestamp}static isInterval(e){return(e==null?void 0:e.typeId)===N.Interval}static isList(e){return(e==null?void 0:e.typeId)===N.List}static isStruct(e){return(e==null?void 0:e.typeId)===N.Struct}static isUnion(e){return(e==null?void 0:e.typeId)===N.Union}static isFixedSizeBinary(e){return(e==null?void 0:e.typeId)===N.FixedSizeBinary}static isFixedSizeList(e){return(e==null?void 0:e.typeId)===N.FixedSizeList}static isMap(e){return(e==null?void 0:e.typeId)===N.Map}static isDictionary(e){return(e==null?void 0:e.typeId)===N.Dictionary}static isDenseUnion(e){return we.isUnion(e)&&e.mode===tr.Dense}static isSparseUnion(e){return we.isUnion(e)&&e.mode===tr.Sparse}get typeId(){return N.NONE}}Lk=Symbol.toStringTag;we[Lk]=(t=>(t.children=null,t.ArrayType=Array,t[Symbol.toStringTag]="DataType"))(we.prototype);let Bs=class extends we{toString(){return"Null"}get typeId(){return N.Null}};$k=Symbol.toStringTag;Bs[$k]=(t=>t[Symbol.toStringTag]="Null")(Bs.prototype);class Fs extends we{constructor(e,n){super(),this.isSigned=e,this.bitWidth=n}get typeId(){return N.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?oc:ac}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}jk=Symbol.toStringTag;Fs[jk]=(t=>(t.isSigned=null,t.bitWidth=null,t[Symbol.toStringTag]="Int"))(Fs.prototype);class Fl extends Fs{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}Object.defineProperty(Fl.prototype,"ArrayType",{value:Int32Array});class Ll extends we{constructor(e){super(),this.precision=e}get typeId(){return N.Float}get ArrayType(){switch(this.precision){case An.HALF:return Uint16Array;case An.SINGLE:return Float32Array;case An.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}Uk=Symbol.toStringTag;Ll[Uk]=(t=>(t.precision=null,t[Symbol.toStringTag]="Float"))(Ll.prototype);let xd=class extends we{constructor(){super()}get typeId(){return N.Binary}toString(){return"Binary"}};zk=Symbol.toStringTag;xd[zk]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Binary"))(xd.prototype);let Cd=class extends we{constructor(){super()}get typeId(){return N.Utf8}toString(){return"Utf8"}};Vk=Symbol.toStringTag;Cd[Vk]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Utf8"))(Cd.prototype);let Ad=class extends we{constructor(){super()}get typeId(){return N.Bool}toString(){return"Bool"}};Kk=Symbol.toStringTag;Ad[Kk]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Bool"))(Ad.prototype);let Pd=class extends we{constructor(e,n,r=128){super(),this.scale=e,this.precision=n,this.bitWidth=r}get typeId(){return N.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};Wk=Symbol.toStringTag;Pd[Wk]=(t=>(t.scale=null,t.precision=null,t.ArrayType=Uint32Array,t[Symbol.toStringTag]="Decimal"))(Pd.prototype);class Rd extends we{constructor(e){super(),this.unit=e}get typeId(){return N.Date}toString(){return`Date${(this.unit+1)*32}<${Hi[this.unit]}>`}}qk=Symbol.toStringTag;Rd[qk]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Date"))(Rd.prototype);class $l extends we{constructor(e,n){super(),this.unit=e,this.bitWidth=n}get typeId(){return N.Time}toString(){return`Time${this.bitWidth}<${ze[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return oc}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}Hk=Symbol.toStringTag;$l[Hk]=(t=>(t.unit=null,t.bitWidth=null,t[Symbol.toStringTag]="Time"))($l.prototype);class Td extends we{constructor(e,n){super(),this.unit=e,this.timezone=n}get typeId(){return N.Timestamp}toString(){return`Timestamp<${ze[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}Qk=Symbol.toStringTag;Td[Qk]=(t=>(t.unit=null,t.timezone=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Timestamp"))(Td.prototype);class Md extends we{constructor(e){super(),this.unit=e}get typeId(){return N.Interval}toString(){return`Interval<${Ns[this.unit]}>`}}Yk=Symbol.toStringTag;Md[Yk]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Interval"))(Md.prototype);let Nd=class extends we{constructor(e){super(),this.children=[e]}get typeId(){return N.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};Gk=Symbol.toStringTag;Nd[Gk]=(t=>(t.children=null,t[Symbol.toStringTag]="List"))(Nd.prototype);class pn extends we{constructor(e){super(),this.children=e}get typeId(){return N.Struct}toString(){return`Struct<{${this.children.map(e=>`${e.name}:${e.type}`).join(", ")}}>`}}Jk=Symbol.toStringTag;pn[Jk]=(t=>(t.children=null,t[Symbol.toStringTag]="Struct"))(pn.prototype);class Bd extends we{constructor(e,n,r){super(),this.mode=e,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((i,s,o)=>(i[s]=o)&&i||i,Object.create(null))}get typeId(){return N.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(e=>`${e.type}`).join(" | ")}>`}}Xk=Symbol.toStringTag;Bd[Xk]=(t=>(t.mode=null,t.typeIds=null,t.children=null,t.typeIdToChildIndex=null,t.ArrayType=Int8Array,t[Symbol.toStringTag]="Union"))(Bd.prototype);let Fd=class extends we{constructor(e){super(),this.byteWidth=e}get typeId(){return N.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};Zk=Symbol.toStringTag;Fd[Zk]=(t=>(t.byteWidth=null,t.ArrayType=Uint8Array,t[Symbol.toStringTag]="FixedSizeBinary"))(Fd.prototype);let Ld=class extends we{constructor(e,n){super(),this.listSize=e,this.children=[n]}get typeId(){return N.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};eD=Symbol.toStringTag;Ld[eD]=(t=>(t.children=null,t.listSize=null,t[Symbol.toStringTag]="FixedSizeList"))(Ld.prototype);class $d extends we{constructor(e,n=!1){super(),this.children=[e],this.keysSorted=n}get typeId(){return N.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(e=>`${e.name}:${e.type}`).join(", ")}}>`}}tD=Symbol.toStringTag;$d[tD]=(t=>(t.children=null,t.keysSorted=null,t[Symbol.toStringTag]="Map_"))($d.prototype);const L3=(t=>()=>++t)(-1);class Ya extends we{constructor(e,n,r,i){super(),this.indices=n,this.dictionary=e,this.isOrdered=i||!1,this.id=r==null?L3():typeof r=="number"?r:r.low}get typeId(){return N.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}nD=Symbol.toStringTag;Ya[nD]=(t=>(t.id=null,t.indices=null,t.isOrdered=null,t.dictionary=null,t[Symbol.toStringTag]="Dictionary"))(Ya.prototype);function Si(t){const e=t;switch(t.typeId){case N.Decimal:return t.bitWidth/32;case N.Timestamp:return 2;case N.Date:return 1+e.unit;case N.Interval:return 1+e.unit;case N.FixedSizeList:return e.listSize;case N.FixedSizeBinary:return e.byteWidth;default:return 1}}class Be{visitMany(e,...n){return e.map((r,i)=>this.visit(r,...n.map(s=>s[i])))}visit(...e){return this.getVisitFn(e[0],!1).apply(this,e)}getVisitFn(e,n=!0){return $3(this,e,n)}getVisitFnByTypeId(e,n=!0){return sa(this,e,n)}visitNull(e,...n){return null}visitBool(e,...n){return null}visitInt(e,...n){return null}visitFloat(e,...n){return null}visitUtf8(e,...n){return null}visitBinary(e,...n){return null}visitFixedSizeBinary(e,...n){return null}visitDate(e,...n){return null}visitTimestamp(e,...n){return null}visitTime(e,...n){return null}visitDecimal(e,...n){return null}visitList(e,...n){return null}visitStruct(e,...n){return null}visitUnion(e,...n){return null}visitDictionary(e,...n){return null}visitInterval(e,...n){return null}visitFixedSizeList(e,...n){return null}visitMap(e,...n){return null}}function $3(t,e,n=!0){return typeof e=="number"?sa(t,e,n):typeof e=="string"&&e in N?sa(t,N[e],n):e&&e instanceof we?sa(t,p1(e),n):e!=null&&e.type&&e.type instanceof we?sa(t,p1(e.type),n):sa(t,N.NONE,n)}function sa(t,e,n=!0){let r=null;switch(e){case N.Null:r=t.visitNull;break;case N.Bool:r=t.visitBool;break;case N.Int:r=t.visitInt;break;case N.Int8:r=t.visitInt8||t.visitInt;break;case N.Int16:r=t.visitInt16||t.visitInt;break;case N.Int32:r=t.visitInt32||t.visitInt;break;case N.Int64:r=t.visitInt64||t.visitInt;break;case N.Uint8:r=t.visitUint8||t.visitInt;break;case N.Uint16:r=t.visitUint16||t.visitInt;break;case N.Uint32:r=t.visitUint32||t.visitInt;break;case N.Uint64:r=t.visitUint64||t.visitInt;break;case N.Float:r=t.visitFloat;break;case N.Float16:r=t.visitFloat16||t.visitFloat;break;case N.Float32:r=t.visitFloat32||t.visitFloat;break;case N.Float64:r=t.visitFloat64||t.visitFloat;break;case N.Utf8:r=t.visitUtf8;break;case N.Binary:r=t.visitBinary;break;case N.FixedSizeBinary:r=t.visitFixedSizeBinary;break;case N.Date:r=t.visitDate;break;case N.DateDay:r=t.visitDateDay||t.visitDate;break;case N.DateMillisecond:r=t.visitDateMillisecond||t.visitDate;break;case N.Timestamp:r=t.visitTimestamp;break;case N.TimestampSecond:r=t.visitTimestampSecond||t.visitTimestamp;break;case N.TimestampMillisecond:r=t.visitTimestampMillisecond||t.visitTimestamp;break;case N.TimestampMicrosecond:r=t.visitTimestampMicrosecond||t.visitTimestamp;break;case N.TimestampNanosecond:r=t.visitTimestampNanosecond||t.visitTimestamp;break;case N.Time:r=t.visitTime;break;case N.TimeSecond:r=t.visitTimeSecond||t.visitTime;break;case N.TimeMillisecond:r=t.visitTimeMillisecond||t.visitTime;break;case N.TimeMicrosecond:r=t.visitTimeMicrosecond||t.visitTime;break;case N.TimeNanosecond:r=t.visitTimeNanosecond||t.visitTime;break;case N.Decimal:r=t.visitDecimal;break;case N.List:r=t.visitList;break;case N.Struct:r=t.visitStruct;break;case N.Union:r=t.visitUnion;break;case N.DenseUnion:r=t.visitDenseUnion||t.visitUnion;break;case N.SparseUnion:r=t.visitSparseUnion||t.visitUnion;break;case N.Dictionary:r=t.visitDictionary;break;case N.Interval:r=t.visitInterval;break;case N.IntervalDayTime:r=t.visitIntervalDayTime||t.visitInterval;break;case N.IntervalYearMonth:r=t.visitIntervalYearMonth||t.visitInterval;break;case N.FixedSizeList:r=t.visitFixedSizeList;break;case N.Map:r=t.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${N[e]}'`)}function p1(t){switch(t.typeId){case N.Null:return N.Null;case N.Int:{const{bitWidth:e,isSigned:n}=t;switch(e){case 8:return n?N.Int8:N.Uint8;case 16:return n?N.Int16:N.Uint16;case 32:return n?N.Int32:N.Uint32;case 64:return n?N.Int64:N.Uint64}return N.Int}case N.Float:switch(t.precision){case An.HALF:return N.Float16;case An.SINGLE:return N.Float32;case An.DOUBLE:return N.Float64}return N.Float;case N.Binary:return N.Binary;case N.Utf8:return N.Utf8;case N.Bool:return N.Bool;case N.Decimal:return N.Decimal;case N.Time:switch(t.unit){case ze.SECOND:return N.TimeSecond;case ze.MILLISECOND:return N.TimeMillisecond;case ze.MICROSECOND:return N.TimeMicrosecond;case ze.NANOSECOND:return N.TimeNanosecond}return N.Time;case N.Timestamp:switch(t.unit){case ze.SECOND:return N.TimestampSecond;case ze.MILLISECOND:return N.TimestampMillisecond;case ze.MICROSECOND:return N.TimestampMicrosecond;case ze.NANOSECOND:return N.TimestampNanosecond}return N.Timestamp;case N.Date:switch(t.unit){case Hi.DAY:return N.DateDay;case Hi.MILLISECOND:return N.DateMillisecond}return N.Date;case N.Interval:switch(t.unit){case Ns.DAY_TIME:return N.IntervalDayTime;case Ns.YEAR_MONTH:return N.IntervalYearMonth}return N.Interval;case N.Map:return N.Map;case N.List:return N.List;case N.Struct:return N.Struct;case N.Union:switch(t.mode){case tr.Dense:return N.DenseUnion;case tr.Sparse:return N.SparseUnion}return N.Union;case N.FixedSizeBinary:return N.FixedSizeBinary;case N.FixedSizeList:return N.FixedSizeList;case N.Dictionary:return N.Dictionary}throw new Error(`Unrecognized type '${N[t.typeId]}'`)}Be.prototype.visitInt8=null;Be.prototype.visitInt16=null;Be.prototype.visitInt32=null;Be.prototype.visitInt64=null;Be.prototype.visitUint8=null;Be.prototype.visitUint16=null;Be.prototype.visitUint32=null;Be.prototype.visitUint64=null;Be.prototype.visitFloat16=null;Be.prototype.visitFloat32=null;Be.prototype.visitFloat64=null;Be.prototype.visitDateDay=null;Be.prototype.visitDateMillisecond=null;Be.prototype.visitTimestampSecond=null;Be.prototype.visitTimestampMillisecond=null;Be.prototype.visitTimestampMicrosecond=null;Be.prototype.visitTimestampNanosecond=null;Be.prototype.visitTimeSecond=null;Be.prototype.visitTimeMillisecond=null;Be.prototype.visitTimeMicrosecond=null;Be.prototype.visitTimeNanosecond=null;Be.prototype.visitDenseUnion=null;Be.prototype.visitSparseUnion=null;Be.prototype.visitIntervalDayTime=null;Be.prototype.visitIntervalYearMonth=null;const rD=new Float64Array(1),na=new Uint32Array(rD.buffer);function iD(t){const e=(t&31744)>>10,n=(t&1023)/1024,r=Math.pow(-1,(t&32768)>>15);switch(e){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,e-15)*(1+n)}function j3(t){if(t!==t)return 32256;rD[0]=t;const e=(na[1]&2147483648)>>16&65535;let n=na[1]&2146435072,r=0;return n>=1089470464?na[0]>0?n=31744:(n=(n&2080374784)>>16,r=(na[1]&1048575)>>10):n<=1056964608?(r=1048576+(na[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=(na[1]&1048575)+512>>10),e|n|r&65535}class Ee extends Be{}function xe(t){return(e,n,r)=>{if(e.setValid(n,r!=null))return t(e,n,r)}}const U3=(t,e,n)=>{t[e]=Math.trunc(n/864e5)},m0=(t,e,n)=>{t[e]=Math.trunc(n%4294967296),t[e+1]=Math.trunc(n/4294967296)},z3=(t,e,n)=>{t[e]=Math.trunc(n*1e3%4294967296),t[e+1]=Math.trunc(n*1e3/4294967296)},V3=(t,e,n)=>{t[e]=Math.trunc(n*1e6%4294967296),t[e+1]=Math.trunc(n*1e6/4294967296)},sD=(t,e,n,r)=>{if(n+1<e.length){const{[n]:i,[n+1]:s}=e;t.set(r.subarray(0,s-i),i)}},K3=({offset:t,values:e},n,r)=>{const i=t+n;r?e[i>>3]|=1<<i%8:e[i>>3]&=~(1<<i%8)},Gi=({values:t},e,n)=>{t[e]=n},y0=({values:t},e,n)=>{t[e]=n},oD=({values:t},e,n)=>{t[e]=j3(n)},W3=(t,e,n)=>{switch(t.type.precision){case An.HALF:return oD(t,e,n);case An.SINGLE:case An.DOUBLE:return y0(t,e,n)}},aD=({values:t},e,n)=>{U3(t,e,n.valueOf())},uD=({values:t},e,n)=>{m0(t,e*2,n.valueOf())},q3=({stride:t,values:e},n,r)=>{e.set(r.subarray(0,t),t*n)},H3=({values:t,valueOffsets:e},n,r)=>sD(t,e,n,r),Q3=({values:t,valueOffsets:e},n,r)=>{sD(t,e,n,c0(r))},Y3=(t,e,n)=>{t.type.unit===Hi.DAY?aD(t,e,n):uD(t,e,n)},lD=({values:t},e,n)=>m0(t,e*2,n/1e3),cD=({values:t},e,n)=>m0(t,e*2,n),fD=({values:t},e,n)=>z3(t,e*2,n),dD=({values:t},e,n)=>V3(t,e*2,n),G3=(t,e,n)=>{switch(t.type.unit){case ze.SECOND:return lD(t,e,n);case ze.MILLISECOND:return cD(t,e,n);case ze.MICROSECOND:return fD(t,e,n);case ze.NANOSECOND:return dD(t,e,n)}},hD=({values:t},e,n)=>{t[e]=n},pD=({values:t},e,n)=>{t[e]=n},mD=({values:t},e,n)=>{t[e]=n},yD=({values:t},e,n)=>{t[e]=n},J3=(t,e,n)=>{switch(t.type.unit){case ze.SECOND:return hD(t,e,n);case ze.MILLISECOND:return pD(t,e,n);case ze.MICROSECOND:return mD(t,e,n);case ze.NANOSECOND:return yD(t,e,n)}},X3=({values:t,stride:e},n,r)=>{t.set(r.subarray(0,e),e*n)},Z3=(t,e,n)=>{const r=t.children[0],i=t.valueOffsets,s=_r.getVisitFn(r);if(Array.isArray(n))for(let o=-1,a=i[e],l=i[e+1];a<l;)s(r,a++,n[++o]);else for(let o=-1,a=i[e],l=i[e+1];a<l;)s(r,a++,n.get(++o))},e$=(t,e,n)=>{const r=t.children[0],{valueOffsets:i}=t,s=_r.getVisitFn(r);let{[e]:o,[e+1]:a}=i;const l=n instanceof Map?n.entries():Object.entries(n);for(const f of l)if(s(r,o,f),++o>=a)break},t$=(t,e)=>(n,r,i,s)=>r&&n(r,t,e[s]),n$=(t,e)=>(n,r,i,s)=>r&&n(r,t,e.get(s)),r$=(t,e)=>(n,r,i,s)=>r&&n(r,t,e.get(i.name)),i$=(t,e)=>(n,r,i,s)=>r&&n(r,t,e[i.name]),s$=(t,e,n)=>{const r=t.type.children.map(s=>_r.getVisitFn(s.type)),i=n instanceof Map?r$(e,n):n instanceof Ke?n$(e,n):Array.isArray(n)?t$(e,n):i$(e,n);t.type.children.forEach((s,o)=>i(r[o],t.children[o],s,o))},o$=(t,e,n)=>{t.type.mode===tr.Dense?vD(t,e,n):gD(t,e,n)},vD=(t,e,n)=>{const r=t.type.typeIdToChildIndex[t.typeIds[e]],i=t.children[r];_r.visit(i,t.valueOffsets[e],n)},gD=(t,e,n)=>{const r=t.type.typeIdToChildIndex[t.typeIds[e]],i=t.children[r];_r.visit(i,e,n)},a$=(t,e,n)=>{var r;(r=t.dictionary)===null||r===void 0||r.set(t.values[e],n)},u$=(t,e,n)=>{t.type.unit===Ns.DAY_TIME?wD(t,e,n):_D(t,e,n)},wD=({values:t},e,n)=>{t.set(n.subarray(0,2),2*e)},_D=({values:t},e,n)=>{t[e]=n[0]*12+n[1]%12},l$=(t,e,n)=>{const{stride:r}=t,i=t.children[0],s=_r.getVisitFn(i);if(Array.isArray(n))for(let o=-1,a=e*r;++o<r;)s(i,a+o,n[o]);else for(let o=-1,a=e*r;++o<r;)s(i,a+o,n.get(o))};Ee.prototype.visitBool=xe(K3);Ee.prototype.visitInt=xe(Gi);Ee.prototype.visitInt8=xe(Gi);Ee.prototype.visitInt16=xe(Gi);Ee.prototype.visitInt32=xe(Gi);Ee.prototype.visitInt64=xe(Gi);Ee.prototype.visitUint8=xe(Gi);Ee.prototype.visitUint16=xe(Gi);Ee.prototype.visitUint32=xe(Gi);Ee.prototype.visitUint64=xe(Gi);Ee.prototype.visitFloat=xe(W3);Ee.prototype.visitFloat16=xe(oD);Ee.prototype.visitFloat32=xe(y0);Ee.prototype.visitFloat64=xe(y0);Ee.prototype.visitUtf8=xe(Q3);Ee.prototype.visitBinary=xe(H3);Ee.prototype.visitFixedSizeBinary=xe(q3);Ee.prototype.visitDate=xe(Y3);Ee.prototype.visitDateDay=xe(aD);Ee.prototype.visitDateMillisecond=xe(uD);Ee.prototype.visitTimestamp=xe(G3);Ee.prototype.visitTimestampSecond=xe(lD);Ee.prototype.visitTimestampMillisecond=xe(cD);Ee.prototype.visitTimestampMicrosecond=xe(fD);Ee.prototype.visitTimestampNanosecond=xe(dD);Ee.prototype.visitTime=xe(J3);Ee.prototype.visitTimeSecond=xe(hD);Ee.prototype.visitTimeMillisecond=xe(pD);Ee.prototype.visitTimeMicrosecond=xe(mD);Ee.prototype.visitTimeNanosecond=xe(yD);Ee.prototype.visitDecimal=xe(X3);Ee.prototype.visitList=xe(Z3);Ee.prototype.visitStruct=xe(s$);Ee.prototype.visitUnion=xe(o$);Ee.prototype.visitDenseUnion=xe(vD);Ee.prototype.visitSparseUnion=xe(gD);Ee.prototype.visitDictionary=xe(a$);Ee.prototype.visitInterval=xe(u$);Ee.prototype.visitIntervalDayTime=xe(wD);Ee.prototype.visitIntervalYearMonth=xe(_D);Ee.prototype.visitFixedSizeList=xe(l$);Ee.prototype.visitMap=xe(e$);const _r=new Ee,Or=Symbol.for("parent"),Aa=Symbol.for("rowIndex");class v0{constructor(e,n){return this[Or]=e,this[Aa]=n,new Proxy(this,new f$)}toArray(){return Object.values(this.toJSON())}toJSON(){const e=this[Aa],n=this[Or],r=n.type.children,i={};for(let s=-1,o=r.length;++s<o;)i[r[s].name]=Bn.visit(n.children[s],e);return i}toString(){return`{${[...this].map(([e,n])=>`${Nl(e)}: ${Nl(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new c$(this[Or],this[Aa])}}class c${constructor(e,n){this.childIndex=0,this.children=e.children,this.rowIndex=n,this.childFields=e.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const e=this.childIndex;return e<this.numChildren?(this.childIndex=e+1,{done:!1,value:[this.childFields[e].name,Bn.visit(this.children[e],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(v0.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Or]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Aa]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class f${isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(e){return e[Or].type.children.map(n=>n.name)}has(e,n){return e[Or].type.children.findIndex(r=>r.name===n)!==-1}getOwnPropertyDescriptor(e,n){if(e[Or].type.children.findIndex(r=>r.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(e,n){if(Reflect.has(e,n))return e[n];const r=e[Or].type.children.findIndex(i=>i.name===n);if(r!==-1){const i=Bn.visit(e[Or].children[r],e[Aa]);return Reflect.set(e,n,i),i}}set(e,n,r){const i=e[Or].type.children.findIndex(s=>s.name===n);return i!==-1?(_r.visit(e[Or].children[i],e[Aa],r),Reflect.set(e,n,r)):Reflect.has(e,n)||typeof n=="symbol"?Reflect.set(e,n,r):!1}}class _e extends Be{}function Oe(t){return(e,n)=>e.getValid(n)?t(e,n):null}const d$=(t,e)=>864e5*t[e],g0=(t,e)=>4294967296*t[e+1]+(t[e]>>>0),h$=(t,e)=>4294967296*(t[e+1]/1e3)+(t[e]>>>0)/1e3,p$=(t,e)=>4294967296*(t[e+1]/1e6)+(t[e]>>>0)/1e6,bD=t=>new Date(t),m$=(t,e)=>bD(d$(t,e)),y$=(t,e)=>bD(g0(t,e)),v$=(t,e)=>null,SD=(t,e,n)=>{if(n+1>=e.length)return null;const r=e[n],i=e[n+1];return t.subarray(r,i)},g$=({offset:t,values:e},n)=>{const r=t+n;return(e[r>>3]&1<<r%8)!==0},ID=({values:t},e)=>m$(t,e),ED=({values:t},e)=>y$(t,e*2),Hs=({stride:t,values:e},n)=>e[t*n],w$=({stride:t,values:e},n)=>iD(e[t*n]),OD=({values:t},e)=>t[e],_$=({stride:t,values:e},n)=>e.subarray(t*n,t*(n+1)),b$=({values:t,valueOffsets:e},n)=>SD(t,e,n),S$=({values:t,valueOffsets:e},n)=>{const r=SD(t,e,n);return r!==null?ov(r):null},I$=({values:t},e)=>t[e],E$=({type:t,values:e},n)=>t.precision!==An.HALF?e[n]:iD(e[n]),O$=(t,e)=>t.type.unit===Hi.DAY?ID(t,e):ED(t,e),kD=({values:t},e)=>1e3*g0(t,e*2),DD=({values:t},e)=>g0(t,e*2),xD=({values:t},e)=>h$(t,e*2),CD=({values:t},e)=>p$(t,e*2),k$=(t,e)=>{switch(t.type.unit){case ze.SECOND:return kD(t,e);case ze.MILLISECOND:return DD(t,e);case ze.MICROSECOND:return xD(t,e);case ze.NANOSECOND:return CD(t,e)}},AD=({values:t},e)=>t[e],PD=({values:t},e)=>t[e],RD=({values:t},e)=>t[e],TD=({values:t},e)=>t[e],D$=(t,e)=>{switch(t.type.unit){case ze.SECOND:return AD(t,e);case ze.MILLISECOND:return PD(t,e);case ze.MICROSECOND:return RD(t,e);case ze.NANOSECOND:return TD(t,e)}},x$=({values:t,stride:e},n)=>p0.decimal(t.subarray(e*n,e*(n+1))),C$=(t,e)=>{const{valueOffsets:n,stride:r,children:i}=t,{[e*r]:s,[e*r+1]:o}=n,l=i[0].slice(s,o-s);return new Ke([l])},A$=(t,e)=>{const{valueOffsets:n,children:r}=t,{[e]:i,[e+1]:s}=n,o=r[0];return new w0(o.slice(i,s-i))},P$=(t,e)=>new v0(t,e),R$=(t,e)=>t.type.mode===tr.Dense?MD(t,e):ND(t,e),MD=(t,e)=>{const n=t.type.typeIdToChildIndex[t.typeIds[e]],r=t.children[n];return Bn.visit(r,t.valueOffsets[e])},ND=(t,e)=>{const n=t.type.typeIdToChildIndex[t.typeIds[e]],r=t.children[n];return Bn.visit(r,e)},T$=(t,e)=>{var n;return(n=t.dictionary)===null||n===void 0?void 0:n.get(t.values[e])},M$=(t,e)=>t.type.unit===Ns.DAY_TIME?BD(t,e):FD(t,e),BD=({values:t},e)=>t.subarray(2*e,2*(e+1)),FD=({values:t},e)=>{const n=t[e],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},N$=(t,e)=>{const{stride:n,children:r}=t,s=r[0].slice(e*n,n);return new Ke([s])};_e.prototype.visitNull=Oe(v$);_e.prototype.visitBool=Oe(g$);_e.prototype.visitInt=Oe(I$);_e.prototype.visitInt8=Oe(Hs);_e.prototype.visitInt16=Oe(Hs);_e.prototype.visitInt32=Oe(Hs);_e.prototype.visitInt64=Oe(OD);_e.prototype.visitUint8=Oe(Hs);_e.prototype.visitUint16=Oe(Hs);_e.prototype.visitUint32=Oe(Hs);_e.prototype.visitUint64=Oe(OD);_e.prototype.visitFloat=Oe(E$);_e.prototype.visitFloat16=Oe(w$);_e.prototype.visitFloat32=Oe(Hs);_e.prototype.visitFloat64=Oe(Hs);_e.prototype.visitUtf8=Oe(S$);_e.prototype.visitBinary=Oe(b$);_e.prototype.visitFixedSizeBinary=Oe(_$);_e.prototype.visitDate=Oe(O$);_e.prototype.visitDateDay=Oe(ID);_e.prototype.visitDateMillisecond=Oe(ED);_e.prototype.visitTimestamp=Oe(k$);_e.prototype.visitTimestampSecond=Oe(kD);_e.prototype.visitTimestampMillisecond=Oe(DD);_e.prototype.visitTimestampMicrosecond=Oe(xD);_e.prototype.visitTimestampNanosecond=Oe(CD);_e.prototype.visitTime=Oe(D$);_e.prototype.visitTimeSecond=Oe(AD);_e.prototype.visitTimeMillisecond=Oe(PD);_e.prototype.visitTimeMicrosecond=Oe(RD);_e.prototype.visitTimeNanosecond=Oe(TD);_e.prototype.visitDecimal=Oe(x$);_e.prototype.visitList=Oe(C$);_e.prototype.visitStruct=Oe(P$);_e.prototype.visitUnion=Oe(R$);_e.prototype.visitDenseUnion=Oe(MD);_e.prototype.visitSparseUnion=Oe(ND);_e.prototype.visitDictionary=Oe(T$);_e.prototype.visitInterval=Oe(M$);_e.prototype.visitIntervalDayTime=Oe(BD);_e.prototype.visitIntervalYearMonth=Oe(FD);_e.prototype.visitFixedSizeList=Oe(N$);_e.prototype.visitMap=Oe(A$);const Bn=new _e,Zr=Symbol.for("keys"),Pa=Symbol.for("vals");class w0{constructor(e){return this[Zr]=new Ke([e.children[0]]).memoize(),this[Pa]=e.children[1],new Proxy(this,new F$)}[Symbol.iterator](){return new B$(this[Zr],this[Pa])}get size(){return this[Zr].length}toArray(){return Object.values(this.toJSON())}toJSON(){const e=this[Zr],n=this[Pa],r={};for(let i=-1,s=e.length;++i<s;)r[e.get(i)]=Bn.visit(n,i);return r}toString(){return`{${[...this].map(([e,n])=>`${Nl(e)}: ${Nl(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class B${constructor(e,n){this.keys=e,this.vals=n,this.keyIndex=0,this.numKeys=e.length}[Symbol.iterator](){return this}next(){const e=this.keyIndex;return e===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(e),Bn.visit(this.vals,e)]})}}class F${isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(e){return e[Zr].toArray().map(String)}has(e,n){return e[Zr].includes(n)}getOwnPropertyDescriptor(e,n){if(e[Zr].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(e,n){if(Reflect.has(e,n))return e[n];const r=e[Zr].indexOf(n);if(r!==-1){const i=Bn.visit(Reflect.get(e,Pa),r);return Reflect.set(e,n,i),i}}set(e,n,r){const i=e[Zr].indexOf(n);return i!==-1?(_r.visit(Reflect.get(e,Pa),i,r),Reflect.set(e,n,r)):Reflect.has(e,n)?Reflect.set(e,n,r):!1}}Object.defineProperties(w0.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Zr]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Pa]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let m1;function LD(t,e,n,r){const{length:i=0}=t;let s=typeof e!="number"?0:e,o=typeof n!="number"?i:n;return s<0&&(s=(s%i+i)%i),o<0&&(o=(o%i+i)%i),o<s&&(m1=s,s=o,o=m1),o>i&&(o=i),r?r(t,s,o):[s,o]}const y1=t=>t!==t;function du(t){if(typeof t!=="object"||t===null)return y1(t)?y1:n=>n===t;if(t instanceof Date){const n=t.valueOf();return r=>r instanceof Date?r.valueOf()===n:!1}return ArrayBuffer.isView(t)?n=>n?A3(t,n):!1:t instanceof Map?$$(t):Array.isArray(t)?L$(t):t instanceof Ke?j$(t):U$(t,!0)}function L$(t){const e=[];for(let n=-1,r=t.length;++n<r;)e[n]=du(t[n]);return jh(e)}function $$(t){let e=-1;const n=[];for(const r of t.values())n[++e]=du(r);return jh(n)}function j$(t){const e=[];for(let n=-1,r=t.length;++n<r;)e[n]=du(t.get(n));return jh(e)}function U$(t,e=!1){const n=Object.keys(t);if(!e&&n.length===0)return()=>!1;const r=[];for(let i=-1,s=n.length;++i<s;)r[i]=du(t[n[i]]);return jh(r,n)}function jh(t,e){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return z$(t,n);case Map:return v1(t,n,n.keys());case w0:case v0:case Object:case void 0:return v1(t,n,e||Object.keys(n))}return n instanceof Ke?V$(t,n):!1}}function z$(t,e){const n=t.length;if(e.length!==n)return!1;for(let r=-1;++r<n;)if(!t[r](e[r]))return!1;return!0}function V$(t,e){const n=t.length;if(e.length!==n)return!1;for(let r=-1;++r<n;)if(!t[r](e.get(r)))return!1;return!0}function v1(t,e,n){const r=n[Symbol.iterator](),i=e instanceof Map?e.keys():Object.keys(e)[Symbol.iterator](),s=e instanceof Map?e.values():Object.values(e)[Symbol.iterator]();let o=0;const a=t.length;let l=s.next(),f=r.next(),h=i.next();for(;o<a&&!f.done&&!h.done&&!l.done&&!(f.value!==h.value||!t[o](l.value));++o,f=r.next(),h=i.next(),l=s.next());return o===a&&f.done&&h.done&&l.done?!0:(r.return&&r.return(),i.return&&i.return(),s.return&&s.return(),!1)}function $D(t,e,n,r){return(n&1<<r)!==0}function K$(t,e,n,r){return(n&1<<r)>>r}function _0(t,e,n){const r=n.byteLength+7&-8;if(t>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(t%8===0?n.subarray(t>>3):jd(new b0(n,t,e,null,$D)).subarray(0,r)),i}return n}function jd(t){const e=[];let n=0,r=0,i=0;for(const o of t)o&&(i|=1<<r),++r===8&&(e[n++]=i,i=r=0);(n===0||r>0)&&(e[n++]=i);const s=new Uint8Array(e.length+7&-8);return s.set(e),s}class b0{constructor(e,n,r,i,s){this.bytes=e,this.length=r,this.context=i,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=e[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function cv(t,e,n){if(n-e<=0)return 0;if(n-e<8){let s=0;for(const o of new b0(t,e,n-e,t,K$))s+=o;return s}const r=n>>3<<3,i=e+(e%8===0?0:8-e%8);return cv(t,e,i)+cv(t,r,n)+W$(t,i>>3,r-i>>3)}function W$(t,e,n){let r=0,i=Math.trunc(e);const s=new DataView(t.buffer,t.byteOffset,t.byteLength),o=n===void 0?t.byteLength:i+n;for(;o-i>=4;)r+=Om(s.getUint32(i)),i+=4;for(;o-i>=2;)r+=Om(s.getUint16(i)),i+=2;for(;o-i>=1;)r+=Om(s.getUint8(i)),i+=1;return r}function Om(t){let e=Math.trunc(t);return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),(e+(e>>>4)&252645135)*16843009>>>24}const q$=-1;class at{constructor(e,n,r,i,s,o=[],a){this.type=e,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let l;s instanceof at?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=Si(e),s&&((l=s[0])&&(this.valueOffsets=l),(l=s[1])&&(this.values=l),(l=s[2])&&(this.nullBitmap=l),(l=s[3])&&(this.typeIds=l))),this.nullable=this._nullCount!==0&&this.nullBitmap&&this.nullBitmap.byteLength>0}get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get byteLength(){let e=0;const{valueOffsets:n,values:r,nullBitmap:i,typeIds:s}=this;return n&&(e+=n.byteLength),r&&(e+=r.byteLength),i&&(e+=i.byteLength),s&&(e+=s.byteLength),this.children.reduce((o,a)=>o+a.byteLength,e)}get nullCount(){let e=this._nullCount,n;return e<=q$&&(n=this.nullBitmap)&&(this._nullCount=e=this.length-cv(n,this.offset,this.offset+this.length)),e}getValid(e){if(this.nullable&&this.nullCount>0){const n=this.offset+e;return(this.nullBitmap[n>>3]&1<<n%8)!==0}return!0}setValid(e,n){if(!this.nullable)return n;if(!this.nullBitmap||this.nullBitmap.byteLength<=e>>3){const{nullBitmap:l}=this._changeLengthAndBackfillNullBitmap(this.length);Object.assign(this,{nullBitmap:l,_nullCount:0})}const{nullBitmap:r,offset:i}=this,s=i+e>>3,o=(i+e)%8,a=r[s]>>o&1;return n?a===0&&(r[s]|=1<<o,this._nullCount=this.nullCount+1):a===1&&(r[s]&=~(1<<o),this._nullCount=this.nullCount-1),n}clone(e=this.type,n=this.offset,r=this.length,i=this._nullCount,s=this,o=this.children){return new at(e,n,r,i,s,o,this.dictionary)}slice(e,n){const{stride:r,typeId:i,children:s}=this,o=+(this._nullCount===0)-1,a=i===16?r:1,l=this._sliceBuffers(e,n,r,i);return this.clone(this.type,this.offset+e,n,o,l,s.length===0||this.valueOffsets?s:this._sliceChildren(s,a*e,a*n))}_changeLengthAndBackfillNullBitmap(e){if(this.typeId===N.Null)return this.clone(this.type,0,e,0);const{length:n,nullCount:r}=this,i=new Uint8Array((e+63&-64)>>3).fill(255,0,n>>3);i[n>>3]=(1<<n-(n&-8))-1,r>0&&i.set(_0(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[bi.VALIDITY]=i,this.clone(this.type,0,e,r+(e-n),s)}_sliceBuffers(e,n,r,i){let s;const{buffers:o}=this;return(s=o[bi.TYPE])&&(o[bi.TYPE]=s.subarray(e,e+n)),(s=o[bi.OFFSET])&&(o[bi.OFFSET]=s.subarray(e,e+n+1))||(s=o[bi.DATA])&&(o[bi.DATA]=i===6?s:s.subarray(r*e,r*(e+n))),o}_sliceChildren(e,n,r){return e.map(i=>i.slice(n,r))}}at.prototype.children=Object.freeze([]);class ol extends Be{visit(e){return this.getVisitFn(e.type).call(this,e)}visitNull(e){const{["type"]:n,["offset"]:r=0,["length"]:i=0}=e;return new at(n,r,i,0)}visitBool(e){const{["type"]:n,["offset"]:r=0}=e,i=Ue(e.nullBitmap),s=rt(n.ArrayType,e.data),{["length"]:o=s.length>>3,["nullCount"]:a=e.nullBitmap?-1:0}=e;return new at(n,r,o,a,[void 0,s,i])}visitInt(e){const{["type"]:n,["offset"]:r=0}=e,i=Ue(e.nullBitmap),s=rt(n.ArrayType,e.data),{["length"]:o=s.length,["nullCount"]:a=e.nullBitmap?-1:0}=e;return new at(n,r,o,a,[void 0,s,i])}visitFloat(e){const{["type"]:n,["offset"]:r=0}=e,i=Ue(e.nullBitmap),s=rt(n.ArrayType,e.data),{["length"]:o=s.length,["nullCount"]:a=e.nullBitmap?-1:0}=e;return new at(n,r,o,a,[void 0,s,i])}visitUtf8(e){const{["type"]:n,["offset"]:r=0}=e,i=Ue(e.data),s=Ue(e.nullBitmap),o=Fu(e.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=e.nullBitmap?-1:0}=e;return new at(n,r,a,l,[o,i,s])}visitBinary(e){const{["type"]:n,["offset"]:r=0}=e,i=Ue(e.data),s=Ue(e.nullBitmap),o=Fu(e.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=e.nullBitmap?-1:0}=e;return new at(n,r,a,l,[o,i,s])}visitFixedSizeBinary(e){const{["type"]:n,["offset"]:r=0}=e,i=Ue(e.nullBitmap),s=rt(n.ArrayType,e.data),{["length"]:o=s.length/Si(n),["nullCount"]:a=e.nullBitmap?-1:0}=e;return new at(n,r,o,a,[void 0,s,i])}visitDate(e){const{["type"]:n,["offset"]:r=0}=e,i=Ue(e.nullBitmap),s=rt(n.ArrayType,e.data),{["length"]:o=s.length/Si(n),["nullCount"]:a=e.nullBitmap?-1:0}=e;return new at(n,r,o,a,[void 0,s,i])}visitTimestamp(e){const{["type"]:n,["offset"]:r=0}=e,i=Ue(e.nullBitmap),s=rt(n.ArrayType,e.data),{["length"]:o=s.length/Si(n),["nullCount"]:a=e.nullBitmap?-1:0}=e;return new at(n,r,o,a,[void 0,s,i])}visitTime(e){const{["type"]:n,["offset"]:r=0}=e,i=Ue(e.nullBitmap),s=rt(n.ArrayType,e.data),{["length"]:o=s.length/Si(n),["nullCount"]:a=e.nullBitmap?-1:0}=e;return new at(n,r,o,a,[void 0,s,i])}visitDecimal(e){const{["type"]:n,["offset"]:r=0}=e,i=Ue(e.nullBitmap),s=rt(n.ArrayType,e.data),{["length"]:o=s.length/Si(n),["nullCount"]:a=e.nullBitmap?-1:0}=e;return new at(n,r,o,a,[void 0,s,i])}visitList(e){const{["type"]:n,["offset"]:r=0,["child"]:i}=e,s=Ue(e.nullBitmap),o=Fu(e.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=e.nullBitmap?-1:0}=e;return new at(n,r,a,l,[o,void 0,s],[i])}visitStruct(e){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=e,s=Ue(e.nullBitmap),{length:o=i.reduce((l,{length:f})=>Math.max(l,f),0),nullCount:a=e.nullBitmap?-1:0}=e;return new at(n,r,o,a,[void 0,void 0,s],i)}visitUnion(e){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=e,s=Ue(e.nullBitmap),o=rt(n.ArrayType,e.typeIds),{["length"]:a=o.length,["nullCount"]:l=e.nullBitmap?-1:0}=e;if(we.isSparseUnion(n))return new at(n,r,a,l,[void 0,void 0,s,o],i);const f=Fu(e.valueOffsets);return new at(n,r,a,l,[f,void 0,s,o],i)}visitDictionary(e){const{["type"]:n,["offset"]:r=0}=e,i=Ue(e.nullBitmap),s=rt(n.indices.ArrayType,e.data),{["dictionary"]:o=new Ke([new ol().visit({type:n.dictionary})])}=e,{["length"]:a=s.length,["nullCount"]:l=e.nullBitmap?-1:0}=e;return new at(n,r,a,l,[void 0,s,i],[],o)}visitInterval(e){const{["type"]:n,["offset"]:r=0}=e,i=Ue(e.nullBitmap),s=rt(n.ArrayType,e.data),{["length"]:o=s.length/Si(n),["nullCount"]:a=e.nullBitmap?-1:0}=e;return new at(n,r,o,a,[void 0,s,i])}visitFixedSizeList(e){const{["type"]:n,["offset"]:r=0,["child"]:i=new ol().visit({type:n.valueType})}=e,s=Ue(e.nullBitmap),{["length"]:o=i.length/Si(n),["nullCount"]:a=e.nullBitmap?-1:0}=e;return new at(n,r,o,a,[void 0,void 0,s],[i])}visitMap(e){const{["type"]:n,["offset"]:r=0,["child"]:i=new ol().visit({type:n.childType})}=e,s=Ue(e.nullBitmap),o=Fu(e.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=e.nullBitmap?-1:0}=e;return new at(n,r,a,l,[o,void 0,s],[i])}}function Ne(t){return new ol().visit(t)}class g1{constructor(e=0,n){this.numChunks=e,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const e=this.chunkIterator.next();if(!e.done)return e;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function jD(t){return t.reduce((e,n)=>e+n.nullCount,0)}function UD(t){return t.reduce((e,n,r)=>(e[r+1]=e[r]+n.length,e),new Uint32Array(t.length+1))}function zD(t,e,n,r){const i=[];for(let s=-1,o=t.length;++s<o;){const a=t[s],l=e[s],{length:f}=a;if(l>=r)break;if(n>=l+f)continue;if(l>=n&&l+f<=r){i.push(a);continue}const h=Math.max(0,n-l),m=Math.min(r-l,f);i.push(a.slice(h,m-h))}return i.length===0&&i.push(t[0].slice(0,0)),i}function S0(t,e,n,r){let i=0,s=0,o=e.length-1;do{if(i>=o-1)return n<e[o]?r(t,i,n-e[i]):null;s=i+Math.trunc((o-i)*.5),n<e[s]?o=s:i=s}while(i<o)}function I0(t,e){return t.getValid(e)}function Ra(t){function e(n,r,i){return t(n[r],i)}return function(n){const r=this.data;return S0(r,this._offsets,n,e)}}function VD(t){let e;function n(r,i,s){return t(r[i],s,e)}return function(r,i){const s=this.data;e=i;const o=S0(s,this._offsets,r,n);return e=void 0,o}}function KD(t){let e;function n(r,i,s){let o=s,a=0,l=0;for(let f=i-1,h=r.length;++f<h;){const m=r[f];if(~(a=t(m,e,o)))return l+a;o=0,l+=m.length}return-1}return function(r,i){e=r;const s=this.data,o=typeof i!="number"?n(s,0,0):S0(s,this._offsets,i,n);return e=void 0,o}}class be extends Be{}function H$(t,e){return e===null&&t.length>0?0:-1}function Q$(t,e){const{nullBitmap:n}=t;if(!n||t.nullCount<=0)return-1;let r=0;for(const i of new b0(n,t.offset+(e||0),t.length,n,$D)){if(!i)return r;++r}return-1}function Ae(t,e,n){if(e===void 0)return-1;if(e===null)return Q$(t,n);const r=Bn.getVisitFn(t),i=du(e);for(let s=(n||0)-1,o=t.length;++s<o;)if(i(r(t,s)))return s;return-1}function WD(t,e,n){const r=Bn.getVisitFn(t),i=du(e);for(let s=(n||0)-1,o=t.length;++s<o;)if(i(r(t,s)))return s;return-1}be.prototype.visitNull=H$;be.prototype.visitBool=Ae;be.prototype.visitInt=Ae;be.prototype.visitInt8=Ae;be.prototype.visitInt16=Ae;be.prototype.visitInt32=Ae;be.prototype.visitInt64=Ae;be.prototype.visitUint8=Ae;be.prototype.visitUint16=Ae;be.prototype.visitUint32=Ae;be.prototype.visitUint64=Ae;be.prototype.visitFloat=Ae;be.prototype.visitFloat16=Ae;be.prototype.visitFloat32=Ae;be.prototype.visitFloat64=Ae;be.prototype.visitUtf8=Ae;be.prototype.visitBinary=Ae;be.prototype.visitFixedSizeBinary=Ae;be.prototype.visitDate=Ae;be.prototype.visitDateDay=Ae;be.prototype.visitDateMillisecond=Ae;be.prototype.visitTimestamp=Ae;be.prototype.visitTimestampSecond=Ae;be.prototype.visitTimestampMillisecond=Ae;be.prototype.visitTimestampMicrosecond=Ae;be.prototype.visitTimestampNanosecond=Ae;be.prototype.visitTime=Ae;be.prototype.visitTimeSecond=Ae;be.prototype.visitTimeMillisecond=Ae;be.prototype.visitTimeMicrosecond=Ae;be.prototype.visitTimeNanosecond=Ae;be.prototype.visitDecimal=Ae;be.prototype.visitList=Ae;be.prototype.visitStruct=Ae;be.prototype.visitUnion=Ae;be.prototype.visitDenseUnion=WD;be.prototype.visitSparseUnion=WD;be.prototype.visitDictionary=Ae;be.prototype.visitInterval=Ae;be.prototype.visitIntervalDayTime=Ae;be.prototype.visitIntervalYearMonth=Ae;be.prototype.visitFixedSizeList=Ae;be.prototype.visitMap=Ae;const Ud=new be;class Se extends Be{}function ke(t){const{type:e}=t;if(t.nullCount===0&&t.stride===1&&(e.typeId===N.Timestamp||e instanceof Fs&&e.bitWidth!==64||e instanceof $l&&e.bitWidth!==64||e instanceof Ll&&e.precision!==An.HALF))return new g1(t.data.length,r=>{const i=t.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let n=0;return new g1(t.data.length,r=>{const s=t.data[r].length,o=t.slice(n,n+s);return n+=s,new Y$(o)})}class Y${constructor(e){this.vector=e,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}Se.prototype.visitNull=ke;Se.prototype.visitBool=ke;Se.prototype.visitInt=ke;Se.prototype.visitInt8=ke;Se.prototype.visitInt16=ke;Se.prototype.visitInt32=ke;Se.prototype.visitInt64=ke;Se.prototype.visitUint8=ke;Se.prototype.visitUint16=ke;Se.prototype.visitUint32=ke;Se.prototype.visitUint64=ke;Se.prototype.visitFloat=ke;Se.prototype.visitFloat16=ke;Se.prototype.visitFloat32=ke;Se.prototype.visitFloat64=ke;Se.prototype.visitUtf8=ke;Se.prototype.visitBinary=ke;Se.prototype.visitFixedSizeBinary=ke;Se.prototype.visitDate=ke;Se.prototype.visitDateDay=ke;Se.prototype.visitDateMillisecond=ke;Se.prototype.visitTimestamp=ke;Se.prototype.visitTimestampSecond=ke;Se.prototype.visitTimestampMillisecond=ke;Se.prototype.visitTimestampMicrosecond=ke;Se.prototype.visitTimestampNanosecond=ke;Se.prototype.visitTime=ke;Se.prototype.visitTimeSecond=ke;Se.prototype.visitTimeMillisecond=ke;Se.prototype.visitTimeMicrosecond=ke;Se.prototype.visitTimeNanosecond=ke;Se.prototype.visitDecimal=ke;Se.prototype.visitList=ke;Se.prototype.visitStruct=ke;Se.prototype.visitUnion=ke;Se.prototype.visitDenseUnion=ke;Se.prototype.visitSparseUnion=ke;Se.prototype.visitDictionary=ke;Se.prototype.visitInterval=ke;Se.prototype.visitIntervalDayTime=ke;Se.prototype.visitIntervalYearMonth=ke;Se.prototype.visitFixedSizeList=ke;Se.prototype.visitMap=ke;const E0=new Se,G$=(t,e)=>t+e;class Qs extends Be{visitNull(e,n){return 0}visitInt(e,n){return e.type.bitWidth/8}visitFloat(e,n){return e.type.ArrayType.BYTES_PER_ELEMENT}visitBool(e,n){return 1/8}visitDecimal(e,n){return e.type.bitWidth/8}visitDate(e,n){return(e.type.unit+1)*4}visitTime(e,n){return e.type.bitWidth/8}visitTimestamp(e,n){return e.type.unit===ze.SECOND?4:8}visitInterval(e,n){return(e.type.unit+1)*4}visitStruct(e,n){return e.children.reduce((r,i)=>r+di.visit(i,n),0)}visitFixedSizeBinary(e,n){return e.type.byteWidth}visitMap(e,n){return 8+e.children.reduce((r,i)=>r+di.visit(i,n),0)}visitDictionary(e,n){var r;return e.type.indices.bitWidth/8+(((r=e.dictionary)===null||r===void 0?void 0:r.getByteLength(e.values[n]))||0)}}const J$=({valueOffsets:t},e)=>8+(t[e+1]-t[e]),X$=({valueOffsets:t},e)=>8+(t[e+1]-t[e]),Z$=({valueOffsets:t,stride:e,children:n},r)=>{const i=n[0],{[r*e]:s}=t,{[r*e+1]:o}=t,a=di.getVisitFn(i.type),l=i.slice(s,o-s);let f=8;for(let h=-1,m=o-s;++h<m;)f+=a(l,h);return f},ej=({stride:t,children:e},n)=>{const r=e[0],i=r.slice(n*t,t),s=di.getVisitFn(r.type);let o=0;for(let a=-1,l=i.length;++a<l;)o+=s(i,a);return o},tj=(t,e)=>t.type.mode===tr.Dense?qD(t,e):HD(t,e),qD=({type:t,children:e,typeIds:n,valueOffsets:r},i)=>{const s=t.typeIdToChildIndex[n[i]];return 8+di.visit(e[s],r[i])},HD=({children:t},e)=>4+di.visitMany(t,t.map(()=>e)).reduce(G$,0);Qs.prototype.visitUtf8=J$;Qs.prototype.visitBinary=X$;Qs.prototype.visitList=Z$;Qs.prototype.visitFixedSizeList=ej;Qs.prototype.visitUnion=tj;Qs.prototype.visitDenseUnion=qD;Qs.prototype.visitSparseUnion=HD;const di=new Qs;var QD;const YD={},GD={};class Ke{constructor(e){var n,r,i;const s=e[0]instanceof Ke?e.flatMap(a=>a.data):e;if(s.length===0||s.some(a=>!(a instanceof at)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:l,indexOf:f,byteLength:h}=YD[o.typeId],m=s[0];this.isValid=y=>I0(m,y),this.get=y=>a(m,y),this.set=(y,w)=>l(m,y,w),this.indexOf=y=>f(m,y),this.getByteLength=y=>h(m,y),this._offsets=[0,m.length];break}default:Object.setPrototypeOf(this,GD[o.typeId]),this._offsets=UD(s);break}this.data=s,this.type=o,this.stride=Si(o),this.numChildren=(i=(r=o.children)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0,this.length=this._offsets[this._offsets.length-1]}get byteLength(){return this._byteLength===-1&&(this._byteLength=this.data.reduce((e,n)=>e+n.byteLength,0)),this._byteLength}get nullCount(){return this._nullCount===-1&&(this._nullCount=jD(this.data)),this._nullCount}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${N[this.type.typeId]}Vector`}isValid(e){return!1}get(e){return null}set(e,n){}indexOf(e,n){return-1}includes(e,n){return this.indexOf(e,n)>0}getByteLength(e){return 0}[Symbol.iterator](){return E0.visit(this)}concat(...e){return new Ke(this.data.concat(e.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(e,n){return new Ke(LD(this,e,n,({data:r,_offsets:i},s,o)=>zD(r,i,s,o)))}toJSON(){return[...this]}toArray(){const{type:e,data:n,length:r,stride:i,ArrayType:s}=this;switch(e.typeId){case N.Int:case N.Float:case N.Decimal:case N.Time:case N.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,r*i);default:return n.reduce((o,{values:a,length:l})=>(o.array.set(a.subarray(0,l*i),o.offset),o.offset+=l*i,o),{array:new s(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(e){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(r=>r.name===e))}getChildAt(e){return e>-1&&e<this.numChildren?new Ke(this.data.map(({children:n})=>n[e])):null}get isMemoized(){return we.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(we.isDictionary(this.type)){const e=new zd(this.data[0].dictionary),n=this.data.map(r=>{const i=r.clone();return i.dictionary=e,i});return new Ke(n)}return new zd(this)}unmemoize(){if(we.isDictionary(this.type)&&this.isMemoized){const e=this.data[0].dictionary.unmemoize(),n=this.data.map(r=>{const i=r.clone();return i.dictionary=e,i});return new Ke(n)}return this}}QD=Symbol.toStringTag;Ke[QD]=(t=>{t.type=we.prototype,t.data=[],t.length=0,t.stride=1,t.numChildren=0,t._nullCount=-1,t._byteLength=-1,t._offsets=new Uint32Array([0]),t[Symbol.isConcatSpreadable]=!0;const e=Object.keys(N).map(n=>N[n]).filter(n=>typeof n=="number"&&n!==N.NONE);for(const n of e){const r=Bn.getVisitFnByTypeId(n),i=_r.getVisitFnByTypeId(n),s=Ud.getVisitFnByTypeId(n),o=di.getVisitFnByTypeId(n);YD[n]={get:r,set:i,indexOf:s,byteLength:o},GD[n]=Object.create(t,{isValid:{value:Ra(I0)},get:{value:Ra(Bn.getVisitFnByTypeId(n))},set:{value:VD(_r.getVisitFnByTypeId(n))},indexOf:{value:KD(Ud.getVisitFnByTypeId(n))},getByteLength:{value:Ra(di.getVisitFnByTypeId(n))}})}return"Vector"})(Ke.prototype);class zd extends Ke{constructor(e){super(e.data);const n=this.get,r=this.set,i=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=s[o];if(a!==void 0)return a;const l=n.call(this,o);return s[o]=l,l}}),Object.defineProperty(this,"set",{value(o,a){r.call(this,o,a),s[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new zd(i.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new Ke(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}class fv{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(e,n,r,i){return e.prep(8,24),e.writeInt64(i),e.pad(4),e.writeInt32(r),e.writeInt64(n),e.offset()}}const km=2,ei=4,ki=4,st=4,fs=new Int32Array(2),w1=new Float32Array(fs.buffer),_1=new Float64Array(fs.buffer),ff=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;let Ni=class dv{constructor(e,n){this.low=e|0,this.high=n|0}static create(e,n){return e==0&&n==0?dv.ZERO:new dv(e,n)}toFloat64(){return(this.low>>>0)+this.high*4294967296}equals(e){return this.low==e.low&&this.high==e.high}};Ni.ZERO=new Ni(0,0);var hv;(function(t){t[t.UTF8_BYTES=1]="UTF8_BYTES",t[t.UTF16_STRING=2]="UTF16_STRING"})(hv||(hv={}));let Ga=class JD{constructor(e){this.bytes_=e,this.position_=0}static allocate(e){return new JD(new Uint8Array(e))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(e){this.position_=e}capacity(){return this.bytes_.length}readInt8(e){return this.readUint8(e)<<24>>24}readUint8(e){return this.bytes_[e]}readInt16(e){return this.readUint16(e)<<16>>16}readUint16(e){return this.bytes_[e]|this.bytes_[e+1]<<8}readInt32(e){return this.bytes_[e]|this.bytes_[e+1]<<8|this.bytes_[e+2]<<16|this.bytes_[e+3]<<24}readUint32(e){return this.readInt32(e)>>>0}readInt64(e){return new Ni(this.readInt32(e),this.readInt32(e+4))}readUint64(e){return new Ni(this.readUint32(e),this.readUint32(e+4))}readFloat32(e){return fs[0]=this.readInt32(e),w1[0]}readFloat64(e){return fs[ff?0:1]=this.readInt32(e),fs[ff?1:0]=this.readInt32(e+4),_1[0]}writeInt8(e,n){this.bytes_[e]=n}writeUint8(e,n){this.bytes_[e]=n}writeInt16(e,n){this.bytes_[e]=n,this.bytes_[e+1]=n>>8}writeUint16(e,n){this.bytes_[e]=n,this.bytes_[e+1]=n>>8}writeInt32(e,n){this.bytes_[e]=n,this.bytes_[e+1]=n>>8,this.bytes_[e+2]=n>>16,this.bytes_[e+3]=n>>24}writeUint32(e,n){this.bytes_[e]=n,this.bytes_[e+1]=n>>8,this.bytes_[e+2]=n>>16,this.bytes_[e+3]=n>>24}writeInt64(e,n){this.writeInt32(e,n.low),this.writeInt32(e+4,n.high)}writeUint64(e,n){this.writeUint32(e,n.low),this.writeUint32(e+4,n.high)}writeFloat32(e,n){w1[0]=n,this.writeInt32(e,fs[0])}writeFloat64(e,n){_1[0]=n,this.writeInt32(e,fs[ff?0:1]),this.writeInt32(e+4,fs[ff?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+ei+ki)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let e="";for(let n=0;n<ki;n++)e+=String.fromCharCode(this.readInt8(this.position_+ei+n));return e}__offset(e,n){const r=e-this.readInt32(e);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(e,n){return e.bb_pos=n+this.readInt32(n),e.bb=this,e}__string(e,n){e+=this.readInt32(e);const r=this.readInt32(e);let i="",s=0;if(e+=ei,n===hv.UTF8_BYTES)return this.bytes_.subarray(e,e+r);for(;s<r;){let o;const a=this.readUint8(e+s++);if(a<192)o=a;else{const l=this.readUint8(e+s++);if(a<224)o=(a&31)<<6|l&63;else{const f=this.readUint8(e+s++);if(a<240)o=(a&15)<<12|(l&63)<<6|f&63;else{const h=this.readUint8(e+s++);o=(a&7)<<18|(l&63)<<12|(f&63)<<6|h&63}}}o<65536?i+=String.fromCharCode(o):(o-=65536,i+=String.fromCharCode((o>>10)+55296,(o&1024-1)+56320))}return i}__union_with_string(e,n){return typeof e=="string"?this.__string(n):this.__union(e,n)}__indirect(e){return e+this.readInt32(e)}__vector(e){return e+this.readInt32(e)+ei}__vector_len(e){return this.readInt32(e+this.readInt32(e))}__has_identifier(e){if(e.length!=ki)throw new Error("FlatBuffers: file identifier must be length "+ki);for(let n=0;n<ki;n++)if(e.charCodeAt(n)!=this.readInt8(this.position()+ei+n))return!1;return!0}createLong(e,n){return Ni.create(e,n)}createScalarList(e,n){const r=[];for(let i=0;i<n;++i)e(i)!==null&&r.push(e(i));return r}createObjList(e,n){const r=[];for(let i=0;i<n;++i){const s=e(i);s!==null&&r.push(s.unpack())}return r}},XD=class ZD{constructor(e){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null;let n;e?n=e:n=1024,this.bb=Ga.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(e){this.force_defaults=e}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(e,n){e>this.minalign&&(this.minalign=e);const r=~(this.bb.capacity()-this.space+n)+1&e-1;for(;this.space<r+e+n;){const i=this.bb.capacity();this.bb=ZD.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(e){for(let n=0;n<e;n++)this.bb.writeInt8(--this.space,0)}writeInt8(e){this.bb.writeInt8(this.space-=1,e)}writeInt16(e){this.bb.writeInt16(this.space-=2,e)}writeInt32(e){this.bb.writeInt32(this.space-=4,e)}writeInt64(e){this.bb.writeInt64(this.space-=8,e)}writeFloat32(e){this.bb.writeFloat32(this.space-=4,e)}writeFloat64(e){this.bb.writeFloat64(this.space-=8,e)}addInt8(e){this.prep(1,0),this.writeInt8(e)}addInt16(e){this.prep(2,0),this.writeInt16(e)}addInt32(e){this.prep(4,0),this.writeInt32(e)}addInt64(e){this.prep(8,0),this.writeInt64(e)}addFloat32(e){this.prep(4,0),this.writeFloat32(e)}addFloat64(e){this.prep(8,0),this.writeFloat64(e)}addFieldInt8(e,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(e))}addFieldInt16(e,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(e))}addFieldInt32(e,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(e))}addFieldInt64(e,n,r){(this.force_defaults||!n.equals(r))&&(this.addInt64(n),this.slot(e))}addFieldFloat32(e,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(e))}addFieldFloat64(e,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(e))}addFieldOffset(e,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(e))}addFieldStruct(e,n,r){n!=r&&(this.nested(n),this.slot(e))}nested(e){if(e!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")}slot(e){this.vtable!==null&&(this.vtable[e]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(e){const n=e.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=n<<1,i=Ga.allocate(r);return i.setPosition(r-n),i.bytes().set(e.bytes(),r-n),i}addOffset(e){this.prep(ei,0),this.writeInt32(this.offset()-e+ei)}startObject(e){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=e;for(let n=0;n<e;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const e=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?e-this.vtable[n]:0);const i=2;this.addInt16(e-this.object_start);const s=(r+i)*km;this.addInt16(s);let o=0;const a=this.space;e:for(n=0;n<this.vtables.length;n++){const l=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(l)){for(let f=km;f<s;f+=km)if(this.bb.readInt16(a+f)!=this.bb.readInt16(l+f))continue e;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-e,this.bb.writeInt32(this.space,o-e)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-e,this.offset()-e)),this.isNested=!1,e}finish(e,n,r){const i=r?st:0;if(n){const s=n;if(this.prep(this.minalign,ei+ki+i),s.length!=ki)throw new Error("FlatBuffers: file identifier must be length "+ki);for(let o=ki-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,ei+i),this.addOffset(e),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(e,n){this.finish(e,n,!0)}requiredField(e,n){const r=this.bb.capacity()-e,i=r-this.bb.readInt32(r);if(!(this.bb.readInt16(i+n)!=0))throw new Error("FlatBuffers: field "+n+" must be set")}startVector(e,n,r){this.notNested(),this.vector_num_elems=n,this.prep(ei,e*n),this.prep(r,e*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(e){if(!e)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(e))return this.string_maps.get(e);const n=this.createString(e);return this.string_maps.set(e,n),n}createString(e){if(!e)return 0;let n;if(e instanceof Uint8Array)n=e;else{n=[];let r=0;for(;r<e.length;){let i;const s=e.charCodeAt(r++);if(s<55296||s>=56320)i=s;else{const o=e.charCodeAt(r++);i=(s<<10)+o+(65536-56623104-56320)}i<128?n.push(i):(i<2048?n.push(i>>6&31|192):(i<65536?n.push(i>>12&15|224):n.push(i>>18&7|240,i>>12&63|128),n.push(i>>6&63|128)),n.push(i&63|128))}}this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let r=0,i=this.space,s=this.bb.bytes();r<n.length;r++)s[i++]=n[r];return this.endVector()}createLong(e,n){return Ni.create(e,n)}createObjectOffset(e){return e===null?0:typeof e=="string"?this.createString(e):e.pack(this)}createObjectOffsetList(e){const n=[];for(let r=0;r<e.length;++r){const i=e[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new Error("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(e,n){return n(this,e.length),this.createObjectOffsetList(e),this.endVector()}};class zt{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsKeyValue(e,n){return(n||new zt).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsKeyValue(e,n){return e.setPosition(e.position()+st),(n||new zt).__init(e.readInt32(e.position())+e.position(),e)}key(e){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,e):null}value(e){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,e):null}static startKeyValue(e){e.startObject(2)}static addKey(e,n){e.addFieldOffset(0,n,0)}static addValue(e,n){e.addFieldOffset(1,n,0)}static endKeyValue(e){return e.endObject()}static createKeyValue(e,n,r){return zt.startKeyValue(e),zt.addKey(e,n),zt.addValue(e,r),zt.endKeyValue(e)}}var Ja;(function(t){t[t.V1=0]="V1",t[t.V2=1]="V2",t[t.V3=2]="V3",t[t.V4=3]="V4",t[t.V5=4]="V5"})(Ja||(Ja={}));var Xa;(function(t){t[t.Little=0]="Little",t[t.Big=1]="Big"})(Xa||(Xa={}));var Vd;(function(t){t[t.DenseArray=0]="DenseArray"})(Vd||(Vd={}));class Hn{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsInt(e,n){return(n||new Hn).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsInt(e,n){return e.setPosition(e.position()+st),(n||new Hn).__init(e.readInt32(e.position())+e.position(),e)}bitWidth(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}isSigned(){const e=this.bb.__offset(this.bb_pos,6);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startInt(e){e.startObject(2)}static addBitWidth(e,n){e.addFieldInt32(0,n,0)}static addIsSigned(e,n){e.addFieldInt8(1,+n,0)}static endInt(e){return e.endObject()}static createInt(e,n,r){return Hn.startInt(e),Hn.addBitWidth(e,n),Hn.addIsSigned(e,r),Hn.endInt(e)}}class Di{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsDictionaryEncoding(e,n){return(n||new Di).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDictionaryEncoding(e,n){return e.setPosition(e.position()+st),(n||new Di).__init(e.readInt32(e.position())+e.position(),e)}id(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}indexType(e){const n=this.bb.__offset(this.bb_pos,6);return n?(e||new Hn).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const e=this.bb.__offset(this.bb_pos,8);return e?!!this.bb.readInt8(this.bb_pos+e):!1}dictionaryKind(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt16(this.bb_pos+e):Vd.DenseArray}static startDictionaryEncoding(e){e.startObject(4)}static addId(e,n){e.addFieldInt64(0,n,e.createLong(0,0))}static addIndexType(e,n){e.addFieldOffset(1,n,0)}static addIsOrdered(e,n){e.addFieldInt8(2,+n,0)}static addDictionaryKind(e,n){e.addFieldInt16(3,n,Vd.DenseArray)}static endDictionaryEncoding(e){return e.endObject()}}class yo{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsBinary(e,n){return(n||new yo).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBinary(e,n){return e.setPosition(e.position()+st),(n||new yo).__init(e.readInt32(e.position())+e.position(),e)}static startBinary(e){e.startObject(0)}static endBinary(e){return e.endObject()}static createBinary(e){return yo.startBinary(e),yo.endBinary(e)}}class vo{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsBool(e,n){return(n||new vo).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBool(e,n){return e.setPosition(e.position()+st),(n||new vo).__init(e.readInt32(e.position())+e.position(),e)}static startBool(e){e.startObject(0)}static endBool(e){return e.endObject()}static createBool(e){return vo.startBool(e),vo.endBool(e)}}var Kd;(function(t){t[t.DAY=0]="DAY",t[t.MILLISECOND=1]="MILLISECOND"})(Kd||(Kd={}));let Nf=class oa{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsDate(e,n){return(n||new oa).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDate(e,n){return e.setPosition(e.position()+st),(n||new oa).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Kd.MILLISECOND}static startDate(e){e.startObject(1)}static addUnit(e,n){e.addFieldInt16(0,n,Kd.MILLISECOND)}static endDate(e){return e.endObject()}static createDate(e,n){return oa.startDate(e),oa.addUnit(e,n),oa.endDate(e)}};class bn{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsDecimal(e,n){return(n||new bn).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDecimal(e,n){return e.setPosition(e.position()+st),(n||new bn).__init(e.readInt32(e.position())+e.position(),e)}precision(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}scale(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):0}bitWidth(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt32(this.bb_pos+e):128}static startDecimal(e){e.startObject(3)}static addPrecision(e,n){e.addFieldInt32(0,n,0)}static addScale(e,n){e.addFieldInt32(1,n,0)}static addBitWidth(e,n){e.addFieldInt32(2,n,128)}static endDecimal(e){return e.endObject()}static createDecimal(e,n,r,i){return bn.startDecimal(e),bn.addPrecision(e,n),bn.addScale(e,r),bn.addBitWidth(e,i),bn.endDecimal(e)}}var Za;(function(t){t[t.SECOND=0]="SECOND",t[t.MILLISECOND=1]="MILLISECOND",t[t.MICROSECOND=2]="MICROSECOND",t[t.NANOSECOND=3]="NANOSECOND"})(Za||(Za={}));class ti{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsFixedSizeBinary(e,n){return(n||new ti).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFixedSizeBinary(e,n){return e.setPosition(e.position()+st),(n||new ti).__init(e.readInt32(e.position())+e.position(),e)}byteWidth(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}static startFixedSizeBinary(e){e.startObject(1)}static addByteWidth(e,n){e.addFieldInt32(0,n,0)}static endFixedSizeBinary(e){return e.endObject()}static createFixedSizeBinary(e,n){return ti.startFixedSizeBinary(e),ti.addByteWidth(e,n),ti.endFixedSizeBinary(e)}}class ni{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsFixedSizeList(e,n){return(n||new ni).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFixedSizeList(e,n){return e.setPosition(e.position()+st),(n||new ni).__init(e.readInt32(e.position())+e.position(),e)}listSize(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}static startFixedSizeList(e){e.startObject(1)}static addListSize(e,n){e.addFieldInt32(0,n,0)}static endFixedSizeList(e){return e.endObject()}static createFixedSizeList(e,n){return ni.startFixedSizeList(e),ni.addListSize(e,n),ni.endFixedSizeList(e)}}var Wd;(function(t){t[t.HALF=0]="HALF",t[t.SINGLE=1]="SINGLE",t[t.DOUBLE=2]="DOUBLE"})(Wd||(Wd={}));class ri{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsFloatingPoint(e,n){return(n||new ri).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFloatingPoint(e,n){return e.setPosition(e.position()+st),(n||new ri).__init(e.readInt32(e.position())+e.position(),e)}precision(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Wd.HALF}static startFloatingPoint(e){e.startObject(1)}static addPrecision(e,n){e.addFieldInt16(0,n,Wd.HALF)}static endFloatingPoint(e){return e.endObject()}static createFloatingPoint(e,n){return ri.startFloatingPoint(e),ri.addPrecision(e,n),ri.endFloatingPoint(e)}}var qd;(function(t){t[t.YEAR_MONTH=0]="YEAR_MONTH",t[t.DAY_TIME=1]="DAY_TIME",t[t.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(qd||(qd={}));class ii{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsInterval(e,n){return(n||new ii).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsInterval(e,n){return e.setPosition(e.position()+st),(n||new ii).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):qd.YEAR_MONTH}static startInterval(e){e.startObject(1)}static addUnit(e,n){e.addFieldInt16(0,n,qd.YEAR_MONTH)}static endInterval(e){return e.endObject()}static createInterval(e,n){return ii.startInterval(e),ii.addUnit(e,n),ii.endInterval(e)}}class go{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsList(e,n){return(n||new go).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsList(e,n){return e.setPosition(e.position()+st),(n||new go).__init(e.readInt32(e.position())+e.position(),e)}static startList(e){e.startObject(0)}static endList(e){return e.endObject()}static createList(e){return go.startList(e),go.endList(e)}}let Bf=class aa{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsMap(e,n){return(n||new aa).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMap(e,n){return e.setPosition(e.position()+st),(n||new aa).__init(e.readInt32(e.position())+e.position(),e)}keysSorted(){const e=this.bb.__offset(this.bb_pos,4);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startMap(e){e.startObject(1)}static addKeysSorted(e,n){e.addFieldInt8(0,+n,0)}static endMap(e){return e.endObject()}static createMap(e,n){return aa.startMap(e),aa.addKeysSorted(e,n),aa.endMap(e)}};class wo{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsNull(e,n){return(n||new wo).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsNull(e,n){return e.setPosition(e.position()+st),(n||new wo).__init(e.readInt32(e.position())+e.position(),e)}static startNull(e){e.startObject(0)}static endNull(e){return e.endObject()}static createNull(e){return wo.startNull(e),wo.endNull(e)}}class _o{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsStruct_(e,n){return(n||new _o).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsStruct_(e,n){return e.setPosition(e.position()+st),(n||new _o).__init(e.readInt32(e.position())+e.position(),e)}static startStruct_(e){e.startObject(0)}static endStruct_(e){return e.endObject()}static createStruct_(e){return _o.startStruct_(e),_o.endStruct_(e)}}class pr{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsTime(e,n){return(n||new pr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTime(e,n){return e.setPosition(e.position()+st),(n||new pr).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Za.MILLISECOND}bitWidth(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):32}static startTime(e){e.startObject(2)}static addUnit(e,n){e.addFieldInt16(0,n,Za.MILLISECOND)}static addBitWidth(e,n){e.addFieldInt32(1,n,32)}static endTime(e){return e.endObject()}static createTime(e,n,r){return pr.startTime(e),pr.addUnit(e,n),pr.addBitWidth(e,r),pr.endTime(e)}}class mr{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsTimestamp(e,n){return(n||new mr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTimestamp(e,n){return e.setPosition(e.position()+st),(n||new mr).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Za.SECOND}timezone(e){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,e):null}static startTimestamp(e){e.startObject(2)}static addUnit(e,n){e.addFieldInt16(0,n,Za.SECOND)}static addTimezone(e,n){e.addFieldOffset(1,n,0)}static endTimestamp(e){return e.endObject()}static createTimestamp(e,n,r){return mr.startTimestamp(e),mr.addUnit(e,n),mr.addTimezone(e,r),mr.endTimestamp(e)}}var Hd;(function(t){t[t.Sparse=0]="Sparse",t[t.Dense=1]="Dense"})(Hd||(Hd={}));class In{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsUnion(e,n){return(n||new In).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsUnion(e,n){return e.setPosition(e.position()+st),(n||new In).__init(e.readInt32(e.position())+e.position(),e)}mode(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Hd.Sparse}typeIds(e){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+e*4):0}typeIdsLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}typeIdsArray(){const e=this.bb.__offset(this.bb_pos,6);return e?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}static startUnion(e){e.startObject(2)}static addMode(e,n){e.addFieldInt16(0,n,Hd.Sparse)}static addTypeIds(e,n){e.addFieldOffset(1,n,0)}static createTypeIdsVector(e,n){e.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)e.addInt32(n[r]);return e.endVector()}static startTypeIdsVector(e,n){e.startVector(4,n,4)}static endUnion(e){return e.endObject()}static createUnion(e,n,r){return In.startUnion(e),In.addMode(e,n),In.addTypeIds(e,r),In.endUnion(e)}}class bo{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsUtf8(e,n){return(n||new bo).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsUtf8(e,n){return e.setPosition(e.position()+st),(n||new bo).__init(e.readInt32(e.position())+e.position(),e)}static startUtf8(e){e.startObject(0)}static endUtf8(e){return e.endObject()}static createUtf8(e){return bo.startUtf8(e),bo.endUtf8(e)}}var _t;(function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.FloatingPoint=3]="FloatingPoint",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct_=13]="Struct_",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Duration=18]="Duration",t[t.LargeBinary=19]="LargeBinary",t[t.LargeUtf8=20]="LargeUtf8",t[t.LargeList=21]="LargeList"})(_t||(_t={}));let cr=class Ff{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsField(e,n){return(n||new Ff).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsField(e,n){return e.setPosition(e.position()+st),(n||new Ff).__init(e.readInt32(e.position())+e.position(),e)}name(e){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,e):null}nullable(){const e=this.bb.__offset(this.bb_pos,6);return e?!!this.bb.readInt8(this.bb_pos+e):!1}typeType(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint8(this.bb_pos+e):_t.NONE}type(e){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(e,this.bb_pos+n):null}dictionary(e){const n=this.bb.__offset(this.bb_pos,12);return n?(e||new Di).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(e,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new Ff).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+e*4),this.bb):null}childrenLength(){const e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,n){const r=this.bb.__offset(this.bb_pos,16);return r?(n||new zt).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,16);return e?this.bb.__vector_len(this.bb_pos+e):0}static startField(e){e.startObject(7)}static addName(e,n){e.addFieldOffset(0,n,0)}static addNullable(e,n){e.addFieldInt8(1,+n,0)}static addTypeType(e,n){e.addFieldInt8(2,n,_t.NONE)}static addType(e,n){e.addFieldOffset(3,n,0)}static addDictionary(e,n){e.addFieldOffset(4,n,0)}static addChildren(e,n){e.addFieldOffset(5,n,0)}static createChildrenVector(e,n){e.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)e.addOffset(n[r]);return e.endVector()}static startChildrenVector(e,n){e.startVector(4,n,4)}static addCustomMetadata(e,n){e.addFieldOffset(6,n,0)}static createCustomMetadataVector(e,n){e.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)e.addOffset(n[r]);return e.endVector()}static startCustomMetadataVector(e,n){e.startVector(4,n,4)}static endField(e){return e.endObject()}},Hr=class wi{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsSchema(e,n){return(n||new wi).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsSchema(e,n){return e.setPosition(e.position()+st),(n||new wi).__init(e.readInt32(e.position())+e.position(),e)}endianness(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Xa.Little}fields(e,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new cr).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+e*4),this.bb):null}fieldsLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new zt).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}features(e){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+e*8):this.bb.createLong(0,0)}featuresLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}static startSchema(e){e.startObject(4)}static addEndianness(e,n){e.addFieldInt16(0,n,Xa.Little)}static addFields(e,n){e.addFieldOffset(1,n,0)}static createFieldsVector(e,n){e.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)e.addOffset(n[r]);return e.endVector()}static startFieldsVector(e,n){e.startVector(4,n,4)}static addCustomMetadata(e,n){e.addFieldOffset(2,n,0)}static createCustomMetadataVector(e,n){e.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)e.addOffset(n[r]);return e.endVector()}static startCustomMetadataVector(e,n){e.startVector(4,n,4)}static addFeatures(e,n){e.addFieldOffset(3,n,0)}static createFeaturesVector(e,n){e.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)e.addInt64(n[r]);return e.endVector()}static startFeaturesVector(e,n){e.startVector(8,n,8)}static endSchema(e){return e.endObject()}static finishSchemaBuffer(e,n){e.finish(n)}static finishSizePrefixedSchemaBuffer(e,n){e.finish(n,void 0,!0)}static createSchema(e,n,r,i,s){return wi.startSchema(e),wi.addEndianness(e,n),wi.addFields(e,r),wi.addCustomMetadata(e,i),wi.addFeatures(e,s),wi.endSchema(e)}};class Kn{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsFooter(e,n){return(n||new Kn).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFooter(e,n){return e.setPosition(e.position()+st),(n||new Kn).__init(e.readInt32(e.position())+e.position(),e)}version(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Ja.V1}schema(e){const n=this.bb.__offset(this.bb_pos,6);return n?(e||new Hr).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(e,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new fv).__init(this.bb.__vector(this.bb_pos+r)+e*24,this.bb):null}dictionariesLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}recordBatches(e,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new fv).__init(this.bb.__vector(this.bb_pos+r)+e*24,this.bb):null}recordBatchesLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new zt).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static startFooter(e){e.startObject(5)}static addVersion(e,n){e.addFieldInt16(0,n,Ja.V1)}static addSchema(e,n){e.addFieldOffset(1,n,0)}static addDictionaries(e,n){e.addFieldOffset(2,n,0)}static startDictionariesVector(e,n){e.startVector(24,n,8)}static addRecordBatches(e,n){e.addFieldOffset(3,n,0)}static startRecordBatchesVector(e,n){e.startVector(24,n,8)}static addCustomMetadata(e,n){e.addFieldOffset(4,n,0)}static createCustomMetadataVector(e,n){e.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)e.addOffset(n[r]);return e.endVector()}static startCustomMetadataVector(e,n){e.startVector(4,n,4)}static endFooter(e){return e.endObject()}static finishFooterBuffer(e,n){e.finish(n)}static finishSizePrefixedFooterBuffer(e,n){e.finish(n,void 0,!0)}}class We{constructor(e=[],n,r){this.fields=e||[],this.metadata=n||new Map,r||(r=pv(e)),this.dictionaries=r}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(e=>e.name)}toString(){return`Schema<{ ${this.fields.map((e,n)=>`${n}: ${e}`).join(", ")} }>`}select(e){const n=new Set(e),r=this.fields.filter(i=>n.has(i.name));return new We(r,this.metadata)}selectAt(e){const n=e.map(r=>this.fields[r]).filter(Boolean);return new We(n,this.metadata)}assign(...e){const n=e[0]instanceof We?e[0]:Array.isArray(e[0])?new We(e[0]):new We(e),r=[...this.fields],i=df(df(new Map,this.metadata),n.metadata),s=n.fields.filter(a=>{const l=r.findIndex(f=>f.name===a.name);return~l?(r[l]=a.clone({metadata:df(df(new Map,r[l].metadata),a.metadata)}))&&!1:!0}),o=pv(s,new Map);return new We([...r,...s],i,new Map([...this.dictionaries,...o]))}}We.prototype.fields=null;We.prototype.metadata=null;We.prototype.dictionaries=null;class yt{constructor(e,n,r=!1,i){this.name=e,this.type=n,this.nullable=r,this.metadata=i||new Map}static new(...e){let[n,r,i,s]=e;return e[0]&&typeof e[0]=="object"&&({name:n}=e[0],r===void 0&&(r=e[0].type),i===void 0&&(i=e[0].nullable),s===void 0&&(s=e[0].metadata)),new yt(`${n}`,r,i,s)}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...e){let[n,r,i,s]=e;return!e[0]||typeof e[0]!="object"?[n=this.name,r=this.type,i=this.nullable,s=this.metadata]=e:{name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:s=this.metadata}=e[0],yt.new(n,r,i,s)}}yt.prototype.type=null;yt.prototype.name=null;yt.prototype.nullable=null;yt.prototype.metadata=null;function df(t,e){return new Map([...t||new Map,...e||new Map])}function pv(t,e=new Map){for(let n=-1,r=t.length;++n<r;){const s=t[n].type;if(we.isDictionary(s)){if(!e.has(s.id))e.set(s.id,s.dictionary);else if(e.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&pv(s.children,e)}return e}var b1=Ni,nj=XD,rj=Ga;class jl{constructor(e,n=Yn.V4,r,i){this.schema=e,this.version=n,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}static decode(e){e=new rj(Ue(e));const n=Kn.getRootAsFooter(e),r=We.decode(n.schema());return new ij(r,n)}static encode(e){const n=new nj,r=We.encode(n,e.schema);Kn.startRecordBatchesVector(n,e.numRecordBatches);for(const o of[...e.recordBatches()].slice().reverse())Ls.encode(n,o);const i=n.endVector();Kn.startDictionariesVector(n,e.numDictionaries);for(const o of[...e.dictionaryBatches()].slice().reverse())Ls.encode(n,o);const s=n.endVector();return Kn.startFooter(n),Kn.addSchema(n,r),Kn.addVersion(n,Yn.V4),Kn.addRecordBatches(n,i),Kn.addDictionaries(n,s),Kn.finishFooterBuffer(n,Kn.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}*recordBatches(){for(let e,n=-1,r=this.numRecordBatches;++n<r;)(e=this.getRecordBatch(n))&&(yield e)}*dictionaryBatches(){for(let e,n=-1,r=this.numDictionaries;++n<r;)(e=this.getDictionaryBatch(n))&&(yield e)}getRecordBatch(e){return e>=0&&e<this.numRecordBatches&&this._recordBatches[e]||null}getDictionaryBatch(e){return e>=0&&e<this.numDictionaries&&this._dictionaryBatches[e]||null}}class ij extends jl{constructor(e,n){super(e,n.version()),this._footer=n}get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}getRecordBatch(e){if(e>=0&&e<this.numRecordBatches){const n=this._footer.recordBatches(e);if(n)return Ls.decode(n)}return null}getDictionaryBatch(e){if(e>=0&&e<this.numDictionaries){const n=this._footer.dictionaries(e);if(n)return Ls.decode(n)}return null}}class Ls{constructor(e,n,r){this.metaDataLength=e,this.offset=typeof r=="number"?r:r.low,this.bodyLength=typeof n=="number"?n:n.low}static decode(e){return new Ls(e.metaDataLength(),e.bodyLength(),e.offset())}static encode(e,n){const{metaDataLength:r}=n,i=new b1(n.offset,0),s=new b1(n.bodyLength,0);return fv.createBlock(e,i,r,s)}}const St=Object.freeze({done:!0,value:void 0});class S1{constructor(e){this._json=e}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}class O0{tee(){return this._getDOMStream().tee()}pipe(e,n){return this._getNodeStream().pipe(e,n)}pipeTo(e,n){return this._getDOMStream().pipeTo(e,n)}pipeThrough(e,n){return this._getDOMStream().pipeThrough(e,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class sj extends O0{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(e=>this._closedPromiseResolve=e)}get closed(){return this._closedPromise}cancel(e){return ve(this,void 0,void 0,function*(){yield this.return(e)})}write(e){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(e):this.resolvers.shift().resolve({done:!1,value:e}))}abort(e){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:e}:this.resolvers.shift().reject({done:!0,value:e}))}close(){if(this._closedPromiseResolve){const{resolvers:e}=this;for(;e.length>0;)e.shift().resolve(St);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(e){return fr.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,e)}toNodeStream(e){return fr.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,e)}throw(e){return ve(this,void 0,void 0,function*(){return yield this.abort(e),St})}return(e){return ve(this,void 0,void 0,function*(){return yield this.close(),St})}read(e){return ve(this,void 0,void 0,function*(){return(yield this.next(e,"read")).value})}peek(e){return ve(this,void 0,void 0,function*(){return(yield this.next(e,"peek")).value})}next(...e){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,r)=>{this.resolvers.push({resolve:n,reject:r})}):Promise.resolve(St)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class Lf extends sj{write(e){if((e=Ue(e)).byteLength>0)return super.write(e)}toString(e=!1){return e?ov(this.toUint8Array(!0)):this.toUint8Array(!1).then(ov)}toUint8Array(e=!1){return e?fi(this._values)[0]:(()=>ve(this,void 0,void 0,function*(){var n,r;const i=[];let s=0;try{for(var o=Ds(this),a;a=yield o.next(),!a.done;){const l=a.value;i.push(l),s+=l.byteLength}}catch(l){n={error:l}}finally{try{a&&!a.done&&(r=o.return)&&(yield r.call(o))}finally{if(n)throw n.error}}return fi(i,s)[0]}))()}}class Qd{constructor(e){e&&(this.source=new oj(fr.fromIterable(e)))}[Symbol.iterator](){return this}next(e){return this.source.next(e)}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}peek(e){return this.source.peek(e)}read(e){return this.source.read(e)}}class eu{constructor(e){e instanceof eu?this.source=e.source:e instanceof Lf?this.source=new ao(fr.fromAsyncIterable(e)):Nk(e)?this.source=new ao(fr.fromNodeStream(e)):f0(e)?this.source=new ao(fr.fromDOMStream(e)):Mk(e)?this.source=new ao(fr.fromDOMStream(e.body)):uc(e)?this.source=new ao(fr.fromIterable(e)):Ms(e)?this.source=new ao(fr.fromAsyncIterable(e)):fu(e)&&(this.source=new ao(fr.fromAsyncIterable(e)))}[Symbol.asyncIterator](){return this}next(e){return this.source.next(e)}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}get closed(){return this.source.closed}cancel(e){return this.source.cancel(e)}peek(e){return this.source.peek(e)}read(e){return this.source.read(e)}}class oj{constructor(e){this.source=e}cancel(e){this.return(e)}peek(e){return this.next(e,"peek").value}read(e){return this.next(e,"read").value}next(e,n="read"){return this.source.next({cmd:n,size:e})}throw(e){return Object.create(this.source.throw&&this.source.throw(e)||St)}return(e){return Object.create(this.source.return&&this.source.return(e)||St)}}class ao{constructor(e){this.source=e,this._closedPromise=new Promise(n=>this._closedPromiseResolve=n)}cancel(e){return ve(this,void 0,void 0,function*(){yield this.return(e)})}get closed(){return this._closedPromise}read(e){return ve(this,void 0,void 0,function*(){return(yield this.next(e,"read")).value})}peek(e){return ve(this,void 0,void 0,function*(){return(yield this.next(e,"peek")).value})}next(e,n="read"){return ve(this,void 0,void 0,function*(){return yield this.source.next({cmd:n,size:e})})}throw(e){return ve(this,void 0,void 0,function*(){const n=this.source.throw&&(yield this.source.throw(e))||St;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}return(e){return ve(this,void 0,void 0,function*(){const n=this.source.return&&(yield this.source.return(e))||St;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}}class I1 extends Qd{constructor(e,n){super(),this.position=0,this.buffer=Ue(e),this.size=typeof n>"u"?this.buffer.byteLength:n}readInt32(e){const{buffer:n,byteOffset:r}=this.readAt(e,4);return new DataView(n,r).getInt32(0,!0)}seek(e){return this.position=Math.min(e,this.size),e<this.size}read(e){const{buffer:n,size:r,position:i}=this;return n&&i<r?(typeof e!="number"&&(e=Number.POSITIVE_INFINITY),this.position=Math.min(r,i+Math.min(r-i,e)),n.subarray(i,this.position)):null}readAt(e,n){const r=this.buffer,i=Math.min(this.size,e+n);return r?r.subarray(e,i):new Uint8Array(n)}close(){this.buffer&&(this.buffer=null)}throw(e){return this.close(),{done:!0,value:e}}return(e){return this.close(),{done:!0,value:e}}}class Yd extends eu{constructor(e,n){super(),this.position=0,this._handle=e,typeof n=="number"?this.size=n:this._pending=(()=>ve(this,void 0,void 0,function*(){this.size=(yield e.stat()).size,delete this._pending}))()}readInt32(e){return ve(this,void 0,void 0,function*(){const{buffer:n,byteOffset:r}=yield this.readAt(e,4);return new DataView(n,r).getInt32(0,!0)})}seek(e){return ve(this,void 0,void 0,function*(){return this._pending&&(yield this._pending),this.position=Math.min(e,this.size),e<this.size})}read(e){return ve(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:n,size:r,position:i}=this;if(n&&i<r){typeof e!="number"&&(e=Number.POSITIVE_INFINITY);let s=i,o=0,a=0;const l=Math.min(r,s+Math.min(r-s,e)),f=new Uint8Array(Math.max(0,(this.position=l)-s));for(;(s+=a)<l&&(o+=a)<f.byteLength;)({bytesRead:a}=yield n.read(f,o,f.byteLength-o,s));return f}return null})}readAt(e,n){return ve(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:r,size:i}=this;if(r&&e+n<i){const s=Math.min(i,e+n),o=new Uint8Array(s-e);return(yield r.read(o,0,n,e)).buffer}return new Uint8Array(n)})}close(){return ve(this,void 0,void 0,function*(){const e=this._handle;this._handle=null,e&&(yield e.close())})}throw(e){return ve(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:e}})}return(e){return ve(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:e}})}}const aj=65536;function ba(t){return t<0&&(t=4294967295+t+1),`0x${t.toString(16)}`}const tu=8,k0=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class ex{constructor(e){this.buffer=e}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(e){const n=new Uint32Array([this.buffer[1]>>>16,this.buffer[1]&65535,this.buffer[0]>>>16,this.buffer[0]&65535]),r=new Uint32Array([e.buffer[1]>>>16,e.buffer[1]&65535,e.buffer[0]>>>16,e.buffer[0]&65535]);let i=n[3]*r[3];this.buffer[0]=i&65535;let s=i>>>16;return i=n[2]*r[3],s+=i,i=n[3]*r[2]>>>0,s+=i,this.buffer[0]+=s<<16,this.buffer[1]=s>>>0<i?aj:0,this.buffer[1]+=s>>>16,this.buffer[1]+=n[1]*r[3]+n[2]*r[2]+n[3]*r[1],this.buffer[1]+=n[0]*r[3]+n[1]*r[2]+n[2]*r[1]+n[3]*r[0]<<16,this}_plus(e){const n=this.buffer[0]+e.buffer[0]>>>0;this.buffer[1]+=e.buffer[1],n<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=n}lessThan(e){return this.buffer[1]<e.buffer[1]||this.buffer[1]===e.buffer[1]&&this.buffer[0]<e.buffer[0]}equals(e){return this.buffer[1]===e.buffer[1]&&this.buffer[0]==e.buffer[0]}greaterThan(e){return e.lessThan(this)}hex(){return`${ba(this.buffer[1])} ${ba(this.buffer[0])}`}}class Qe extends ex{times(e){return this._times(e),this}plus(e){return this._plus(e),this}static from(e,n=new Uint32Array(2)){return Qe.fromString(typeof e=="string"?e:e.toString(),n)}static fromNumber(e,n=new Uint32Array(2)){return Qe.fromString(e.toString(),n)}static fromString(e,n=new Uint32Array(2)){const r=e.length,i=new Qe(n);for(let s=0;s<r;){const o=tu<r-s?tu:r-s,a=new Qe(new Uint32Array([Number.parseInt(e.slice(s,s+o),10),0])),l=new Qe(new Uint32Array([k0[o],0]));i.times(l),i.plus(a),s+=o}return i}static convertArray(e){const n=new Uint32Array(e.length*2);for(let r=-1,i=e.length;++r<i;)Qe.from(e[r],new Uint32Array(n.buffer,n.byteOffset+2*r*4,2));return n}static multiply(e,n){return new Qe(new Uint32Array(e.buffer)).times(n)}static add(e,n){return new Qe(new Uint32Array(e.buffer)).plus(n)}}class _n extends ex{negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[0]==0&&++this.buffer[1],this}times(e){return this._times(e),this}plus(e){return this._plus(e),this}lessThan(e){const n=this.buffer[1]<<0,r=e.buffer[1]<<0;return n<r||n===r&&this.buffer[0]<e.buffer[0]}static from(e,n=new Uint32Array(2)){return _n.fromString(typeof e=="string"?e:e.toString(),n)}static fromNumber(e,n=new Uint32Array(2)){return _n.fromString(e.toString(),n)}static fromString(e,n=new Uint32Array(2)){const r=e.startsWith("-"),i=e.length,s=new _n(n);for(let o=r?1:0;o<i;){const a=tu<i-o?tu:i-o,l=new _n(new Uint32Array([Number.parseInt(e.slice(o,o+a),10),0])),f=new _n(new Uint32Array([k0[a],0]));s.times(f),s.plus(l),o+=a}return r?s.negate():s}static convertArray(e){const n=new Uint32Array(e.length*2);for(let r=-1,i=e.length;++r<i;)_n.from(e[r],new Uint32Array(n.buffer,n.byteOffset+2*r*4,2));return n}static multiply(e,n){return new _n(new Uint32Array(e.buffer)).times(n)}static add(e,n){return new _n(new Uint32Array(e.buffer)).plus(n)}}class Qr{constructor(e){this.buffer=e}high(){return new _n(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new _n(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],this.buffer[0]==0&&++this.buffer[1],this.buffer[1]==0&&++this.buffer[2],this.buffer[2]==0&&++this.buffer[3],this}times(e){const n=new Qe(new Uint32Array([this.buffer[3],0])),r=new Qe(new Uint32Array([this.buffer[2],0])),i=new Qe(new Uint32Array([this.buffer[1],0])),s=new Qe(new Uint32Array([this.buffer[0],0])),o=new Qe(new Uint32Array([e.buffer[3],0])),a=new Qe(new Uint32Array([e.buffer[2],0])),l=new Qe(new Uint32Array([e.buffer[1],0])),f=new Qe(new Uint32Array([e.buffer[0],0]));let h=Qe.multiply(s,f);this.buffer[0]=h.low();const m=new Qe(new Uint32Array([h.high(),0]));return h=Qe.multiply(i,f),m.plus(h),h=Qe.multiply(s,l),m.plus(h),this.buffer[1]=m.low(),this.buffer[3]=m.lessThan(h)?1:0,this.buffer[2]=m.high(),new Qe(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(Qe.multiply(r,f)).plus(Qe.multiply(i,l)).plus(Qe.multiply(s,a)),this.buffer[3]+=Qe.multiply(n,f).plus(Qe.multiply(r,l)).plus(Qe.multiply(i,a)).plus(Qe.multiply(s,o)).low(),this}plus(e){const n=new Uint32Array(4);return n[3]=this.buffer[3]+e.buffer[3]>>>0,n[2]=this.buffer[2]+e.buffer[2]>>>0,n[1]=this.buffer[1]+e.buffer[1]>>>0,n[0]=this.buffer[0]+e.buffer[0]>>>0,n[0]<this.buffer[0]>>>0&&++n[1],n[1]<this.buffer[1]>>>0&&++n[2],n[2]<this.buffer[2]>>>0&&++n[3],this.buffer[3]=n[3],this.buffer[2]=n[2],this.buffer[1]=n[1],this.buffer[0]=n[0],this}hex(){return`${ba(this.buffer[3])} ${ba(this.buffer[2])} ${ba(this.buffer[1])} ${ba(this.buffer[0])}`}static multiply(e,n){return new Qr(new Uint32Array(e.buffer)).times(n)}static add(e,n){return new Qr(new Uint32Array(e.buffer)).plus(n)}static from(e,n=new Uint32Array(4)){return Qr.fromString(typeof e=="string"?e:e.toString(),n)}static fromNumber(e,n=new Uint32Array(4)){return Qr.fromString(e.toString(),n)}static fromString(e,n=new Uint32Array(4)){const r=e.startsWith("-"),i=e.length,s=new Qr(n);for(let o=r?1:0;o<i;){const a=tu<i-o?tu:i-o,l=new Qr(new Uint32Array([Number.parseInt(e.slice(o,o+a),10),0,0,0])),f=new Qr(new Uint32Array([k0[a],0,0,0]));s.times(f),s.plus(l),o+=a}return r?s.negate():s}static convertArray(e){const n=new Uint32Array(e.length*4);for(let r=-1,i=e.length;++r<i;)Qr.from(e[r],new Uint32Array(n.buffer,n.byteOffset+4*4*r,4));return n}}class tx extends Be{constructor(e,n,r,i){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=e,this.nodes=n,this.buffers=r,this.dictionaries=i}visit(e){return super.visit(e instanceof yt?e.type:e)}visitNull(e,{length:n}=this.nextFieldNode()){return Ne({type:e,length:n})}visitBool(e,{length:n,nullCount:r}=this.nextFieldNode()){return Ne({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitInt(e,{length:n,nullCount:r}=this.nextFieldNode()){return Ne({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitFloat(e,{length:n,nullCount:r}=this.nextFieldNode()){return Ne({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitUtf8(e,{length:n,nullCount:r}=this.nextFieldNode()){return Ne({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitBinary(e,{length:n,nullCount:r}=this.nextFieldNode()){return Ne({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitFixedSizeBinary(e,{length:n,nullCount:r}=this.nextFieldNode()){return Ne({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitDate(e,{length:n,nullCount:r}=this.nextFieldNode()){return Ne({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitTimestamp(e,{length:n,nullCount:r}=this.nextFieldNode()){return Ne({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitTime(e,{length:n,nullCount:r}=this.nextFieldNode()){return Ne({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitDecimal(e,{length:n,nullCount:r}=this.nextFieldNode()){return Ne({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitList(e,{length:n,nullCount:r}=this.nextFieldNode()){return Ne({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),valueOffsets:this.readOffsets(e),child:this.visit(e.children[0])})}visitStruct(e,{length:n,nullCount:r}=this.nextFieldNode()){return Ne({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),children:this.visitMany(e.children)})}visitUnion(e){return e.mode===tr.Sparse?this.visitSparseUnion(e):this.visitDenseUnion(e)}visitDenseUnion(e,{length:n,nullCount:r}=this.nextFieldNode()){return Ne({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),typeIds:this.readTypeIds(e),valueOffsets:this.readOffsets(e),children:this.visitMany(e.children)})}visitSparseUnion(e,{length:n,nullCount:r}=this.nextFieldNode()){return Ne({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),typeIds:this.readTypeIds(e),children:this.visitMany(e.children)})}visitDictionary(e,{length:n,nullCount:r}=this.nextFieldNode()){return Ne({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e.indices),dictionary:this.readDictionary(e)})}visitInterval(e,{length:n,nullCount:r}=this.nextFieldNode()){return Ne({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitFixedSizeList(e,{length:n,nullCount:r}=this.nextFieldNode()){return Ne({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),child:this.visit(e.children[0])})}visitMap(e,{length:n,nullCount:r}=this.nextFieldNode()){return Ne({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),valueOffsets:this.readOffsets(e),child:this.visit(e.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(e,n,r=this.nextBufferRange()){return n>0&&this.readData(e,r)||new Uint8Array(0)}readOffsets(e,n){return this.readData(e,n)}readTypeIds(e,n){return this.readData(e,n)}readData(e,{length:n,offset:r}=this.nextBufferRange()){return this.bytes.subarray(r,r+n)}readDictionary(e){return this.dictionaries.get(e.id)}}class uj extends tx{constructor(e,n,r,i){super(new Uint8Array(0),n,r,i),this.sources=e}readNullBitmap(e,n,{offset:r}=this.nextBufferRange()){return n<=0?new Uint8Array(0):jd(this.sources[r])}readOffsets(e,{offset:n}=this.nextBufferRange()){return rt(Uint8Array,rt(Int32Array,this.sources[n]))}readTypeIds(e,{offset:n}=this.nextBufferRange()){return rt(Uint8Array,rt(e.ArrayType,this.sources[n]))}readData(e,{offset:n}=this.nextBufferRange()){const{sources:r}=this;return we.isTimestamp(e)||(we.isInt(e)||we.isTime(e))&&e.bitWidth===64||we.isDate(e)&&e.unit===Hi.MILLISECOND?rt(Uint8Array,_n.convertArray(r[n])):we.isDecimal(e)?rt(Uint8Array,Qr.convertArray(r[n])):we.isBinary(e)||we.isFixedSizeBinary(e)?lj(r[n]):we.isBool(e)?jd(r[n]):we.isUtf8(e)?c0(r[n].join("")):rt(Uint8Array,rt(e.ArrayType,r[n].map(i=>+i)))}}function lj(t){const e=t.join(""),n=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2)n[r>>1]=Number.parseInt(e.slice(r,r+2),16);return n}class Ie extends Be{compareSchemas(e,n){return e===n||n instanceof e.constructor&&this.compareManyFields(e.fields,n.fields)}compareManyFields(e,n){return e===n||Array.isArray(e)&&Array.isArray(n)&&e.length===n.length&&e.every((r,i)=>this.compareFields(r,n[i]))}compareFields(e,n){return e===n||n instanceof e.constructor&&e.name===n.name&&e.nullable===n.nullable&&this.visit(e.type,n.type)}}function jn(t,e){return e instanceof t.constructor}function lc(t,e){return t===e||jn(t,e)}function Ji(t,e){return t===e||jn(t,e)&&t.bitWidth===e.bitWidth&&t.isSigned===e.isSigned}function Uh(t,e){return t===e||jn(t,e)&&t.precision===e.precision}function cj(t,e){return t===e||jn(t,e)&&t.byteWidth===e.byteWidth}function D0(t,e){return t===e||jn(t,e)&&t.unit===e.unit}function cc(t,e){return t===e||jn(t,e)&&t.unit===e.unit&&t.timezone===e.timezone}function fc(t,e){return t===e||jn(t,e)&&t.unit===e.unit&&t.bitWidth===e.bitWidth}function fj(t,e){return t===e||jn(t,e)&&t.children.length===e.children.length&&$s.compareManyFields(t.children,e.children)}function dj(t,e){return t===e||jn(t,e)&&t.children.length===e.children.length&&$s.compareManyFields(t.children,e.children)}function x0(t,e){return t===e||jn(t,e)&&t.mode===e.mode&&t.typeIds.every((n,r)=>n===e.typeIds[r])&&$s.compareManyFields(t.children,e.children)}function hj(t,e){return t===e||jn(t,e)&&t.id===e.id&&t.isOrdered===e.isOrdered&&$s.visit(t.indices,e.indices)&&$s.visit(t.dictionary,e.dictionary)}function C0(t,e){return t===e||jn(t,e)&&t.unit===e.unit}function pj(t,e){return t===e||jn(t,e)&&t.listSize===e.listSize&&t.children.length===e.children.length&&$s.compareManyFields(t.children,e.children)}function mj(t,e){return t===e||jn(t,e)&&t.keysSorted===e.keysSorted&&t.children.length===e.children.length&&$s.compareManyFields(t.children,e.children)}Ie.prototype.visitNull=lc;Ie.prototype.visitBool=lc;Ie.prototype.visitInt=Ji;Ie.prototype.visitInt8=Ji;Ie.prototype.visitInt16=Ji;Ie.prototype.visitInt32=Ji;Ie.prototype.visitInt64=Ji;Ie.prototype.visitUint8=Ji;Ie.prototype.visitUint16=Ji;Ie.prototype.visitUint32=Ji;Ie.prototype.visitUint64=Ji;Ie.prototype.visitFloat=Uh;Ie.prototype.visitFloat16=Uh;Ie.prototype.visitFloat32=Uh;Ie.prototype.visitFloat64=Uh;Ie.prototype.visitUtf8=lc;Ie.prototype.visitBinary=lc;Ie.prototype.visitFixedSizeBinary=cj;Ie.prototype.visitDate=D0;Ie.prototype.visitDateDay=D0;Ie.prototype.visitDateMillisecond=D0;Ie.prototype.visitTimestamp=cc;Ie.prototype.visitTimestampSecond=cc;Ie.prototype.visitTimestampMillisecond=cc;Ie.prototype.visitTimestampMicrosecond=cc;Ie.prototype.visitTimestampNanosecond=cc;Ie.prototype.visitTime=fc;Ie.prototype.visitTimeSecond=fc;Ie.prototype.visitTimeMillisecond=fc;Ie.prototype.visitTimeMicrosecond=fc;Ie.prototype.visitTimeNanosecond=fc;Ie.prototype.visitDecimal=lc;Ie.prototype.visitList=fj;Ie.prototype.visitStruct=dj;Ie.prototype.visitUnion=x0;Ie.prototype.visitDenseUnion=x0;Ie.prototype.visitSparseUnion=x0;Ie.prototype.visitDictionary=hj;Ie.prototype.visitInterval=C0;Ie.prototype.visitIntervalDayTime=C0;Ie.prototype.visitIntervalYearMonth=C0;Ie.prototype.visitFixedSizeList=pj;Ie.prototype.visitMap=mj;const $s=new Ie;function mv(t,e){return $s.compareSchemas(t,e)}function Dm(t,e){return yj(t,e.map(n=>n.data.concat()))}function yj(t,e){const n=[...t.fields],r=[],i={numBatches:e.reduce((m,y)=>Math.max(m,y.length),0)};let s=0,o=0,a=-1;const l=e.length;let f,h=[];for(;i.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<l;)h[a]=f=e[a].shift(),o=Math.min(o,f?f.length:o);Number.isFinite(o)&&(h=vj(n,o,h,e,i),o>0&&(r[s++]=Ne({type:new pn(n),length:o,nullCount:0,children:h.slice()})))}return[t=t.assign(n),r.map(m=>new En(t,m))]}function vj(t,e,n,r,i){var s;const o=(e+63&-64)>>3;for(let a=-1,l=r.length;++a<l;){const f=n[a],h=f==null?void 0:f.length;if(h>=e)h===e?n[a]=f:(n[a]=f.slice(0,e),i.numBatches=Math.max(i.numBatches,r[a].unshift(f.slice(e,h-e))));else{const m=t[a];t[a]=m.clone({nullable:!0}),n[a]=(s=f==null?void 0:f._changeLengthAndBackfillNullBitmap(e))!==null&&s!==void 0?s:Ne({type:m.type,length:e,nullCount:e,nullBitmap:new Uint8Array(o)})}}return n}var nx;class hn{constructor(...e){var n,r;if(e.length===0)return this.batches=[],this.schema=new We([]),this._offsets=[0],this;let i,s;e[0]instanceof We&&(i=e.shift()),e[e.length-1]instanceof Uint32Array&&(s=e.pop());const o=l=>{if(l){if(l instanceof En)return[l];if(l instanceof hn)return l.batches;if(l instanceof at){if(l.type instanceof pn)return[new En(new We(l.type.children),l)]}else{if(Array.isArray(l))return l.flatMap(f=>o(f));if(typeof l[Symbol.iterator]=="function")return[...l].flatMap(f=>o(f));if(typeof l=="object"){const f=Object.keys(l),h=f.map(w=>new Ke([l[w]])),m=new We(f.map((w,I)=>new yt(String(w),h[I].type))),[,y]=Dm(m,h);return y.length===0?[new En(l)]:y}}}return[]},a=e.flatMap(l=>o(l));if(i=(r=i??((n=a[0])===null||n===void 0?void 0:n.schema))!==null&&r!==void 0?r:new We([]),!(i instanceof We))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const l of a){if(!(l instanceof En))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!mv(i,l.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=s??UD(this.data)}get data(){return this.batches.map(({data:e})=>e)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((e,n)=>e+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=jD(this.data)),this._nullCount}isValid(e){return!1}get(e){return null}set(e,n){}indexOf(e,n){return-1}getByteLength(e){return 0}[Symbol.iterator](){return this.batches.length>0?E0.visit(new Ke(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...e){const n=this.schema,r=this.data.concat(e.flatMap(({data:i})=>i));return new hn(n,r.map(i=>new En(n,i)))}slice(e,n){const r=this.schema;[e,n]=LD({length:this.numRows},e,n);const i=zD(this.data,this._offsets,e,n);return new hn(r,i.map(s=>new En(r,s)))}getChild(e){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===e))}getChildAt(e){if(e>-1&&e<this.schema.fields.length){const n=this.data.map(r=>r.children[e]);if(n.length===0){const{type:r}=this.schema.fields[e],i=Ne({type:r,length:0,nullCount:0});n.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new Ke(n)}return null}setChild(e,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===e),n)}setChildAt(e,n){let r=this.schema,i=[...this.batches];if(e>-1&&e<this.numCols){n||(n=new Ke([Ne({type:new Bs,length:this.numRows})]));const s=r.fields.slice(),o=s[e].clone({type:n.type}),a=this.schema.fields.map((l,f)=>this.getChildAt(f));[s[e],a[e]]=[o,n],[r,i]=Dm(r,a)}return new hn(r,i)}select(e){const n=this.schema.fields.reduce((r,i,s)=>r.set(i.name,s),new Map);return this.selectAt(e.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(e){const n=this.schema.selectAt(e),r=this.batches.map(i=>i.selectAt(e));return new hn(n,r)}assign(e){const n=this.schema.fields,[r,i]=e.schema.fields.reduce((a,l,f)=>{const[h,m]=a,y=n.findIndex(w=>w.name===l.name);return~y?m[y]=f:h.push(f),a},[[],[]]),s=this.schema.assign(e.schema),o=[...n.map((a,l)=>[l,i[l]]).map(([a,l])=>l===void 0?this.getChildAt(a):e.getChildAt(l)),...r.map(a=>e.getChildAt(a))].filter(Boolean);return new hn(...Dm(s,o))}}nx=Symbol.toStringTag;hn[nx]=(t=>(t.schema=null,t.batches=[],t._offsets=new Uint32Array([0]),t._nullCount=-1,t[Symbol.isConcatSpreadable]=!0,t.isValid=Ra(I0),t.get=Ra(Bn.getVisitFn(N.Struct)),t.set=VD(_r.getVisitFn(N.Struct)),t.indexOf=KD(Ud.getVisitFn(N.Struct)),t.getByteLength=Ra(di.getVisitFn(N.Struct)),"Table"))(hn.prototype);var rx;let En=class Vu{constructor(...e){switch(e.length){case 2:{if([this.schema]=e,!(this.schema instanceof We))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=Ne({nullCount:0,type:new pn(this.schema.fields),children:this.schema.fields.map(n=>Ne({type:n.type,nullCount:0}))})]=e,!(this.data instanceof at))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=E1(this.schema,this.data.children);break}case 1:{const[n]=e,{fields:r,children:i,length:s}=Object.keys(n).reduce((l,f,h)=>(l.children[h]=n[f],l.length=Math.max(l.length,n[f].length),l.fields[h]=yt.new({name:f,type:n[f].type,nullable:!0}),l),{length:0,fields:new Array,children:new Array}),o=new We(r),a=Ne({type:new pn(r),length:s,children:i,nullCount:0});[this.schema,this.data]=E1(o,a.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=ix(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(e){return this.data.getValid(e)}get(e){return Bn.visit(this.data,e)}set(e,n){return _r.visit(this.data,e,n)}indexOf(e,n){return Ud.visit(this.data,e,n)}getByteLength(e){return di.visit(this.data,e)}[Symbol.iterator](){return E0.visit(new Ke([this.data]))}toArray(){return[...this]}concat(...e){return new hn(this.schema,[this,...e])}slice(e,n){const[r]=new Ke([this.data]).slice(e,n).data;return new Vu(this.schema,r)}getChild(e){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===e))}getChildAt(e){return e>-1&&e<this.schema.fields.length?new Ke([this.data.children[e]]):null}setChild(e,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===e),n)}setChildAt(e,n){let r=this.schema,i=this.data;if(e>-1&&e<this.numCols){n||(n=new Ke([Ne({type:new Bs,length:this.numRows})]));const s=r.fields.slice(),o=i.children.slice(),a=s[e].clone({type:n.type});[s[e],o[e]]=[a,n.data[0]],r=new We(s,new Map(this.schema.metadata)),i=Ne({type:new pn(s),children:o})}return new Vu(r,i)}select(e){const n=this.schema.select(e),r=new pn(n.fields),i=[];for(const s of e){const o=this.schema.fields.findIndex(a=>a.name===s);~o&&(i[o]=this.data.children[o])}return new Vu(n,Ne({type:r,length:this.numRows,children:i}))}selectAt(e){const n=this.schema.selectAt(e),r=e.map(s=>this.data.children[s]).filter(Boolean),i=Ne({type:new pn(n.fields),length:this.numRows,children:r});return new Vu(n,i)}};rx=Symbol.toStringTag;En[rx]=(t=>(t._nullCount=-1,t[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(En.prototype);function E1(t,e,n=e.reduce((r,i)=>Math.max(r,i.length),0)){var r;const i=[...t.fields],s=[...e],o=(n+63&-64)>>3;for(const[a,l]of t.fields.entries()){const f=e[a];(!f||f.length!==n)&&(i[a]=l.clone({nullable:!0}),s[a]=(r=f==null?void 0:f._changeLengthAndBackfillNullBitmap(n))!==null&&r!==void 0?r:Ne({type:l.type,length:n,nullCount:n,nullBitmap:new Uint8Array(o)}))}return[t.assign(i),Ne({type:new pn(i),length:n,children:s})]}function ix(t,e,n=new Map){for(let r=-1,i=t.length;++r<i;){const o=t[r].type,a=e[r];if(we.isDictionary(o)){if(!n.has(o.id))a.dictionary&&n.set(o.id,a.dictionary);else if(n.get(o.id)!==a.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}o.children&&o.children.length>0&&ix(o.children,a.children,n)}return n}class A0 extends En{constructor(e){const n=e.fields.map(i=>Ne({type:i.type})),r=Ne({type:new pn(e.fields),nullCount:0,children:n});super(e,r)}}var Gd;(function(t){t[t.BUFFER=0]="BUFFER"})(Gd||(Gd={}));var Jd;(function(t){t[t.LZ4_FRAME=0]="LZ4_FRAME",t[t.ZSTD=1]="ZSTD"})(Jd||(Jd={}));class ds{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsBodyCompression(e,n){return(n||new ds).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBodyCompression(e,n){return e.setPosition(e.position()+st),(n||new ds).__init(e.readInt32(e.position())+e.position(),e)}codec(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt8(this.bb_pos+e):Jd.LZ4_FRAME}method(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt8(this.bb_pos+e):Gd.BUFFER}static startBodyCompression(e){e.startObject(2)}static addCodec(e,n){e.addFieldInt8(0,n,Jd.LZ4_FRAME)}static addMethod(e,n){e.addFieldInt8(1,n,Gd.BUFFER)}static endBodyCompression(e){return e.endObject()}static createBodyCompression(e,n,r){return ds.startBodyCompression(e),ds.addCodec(e,n),ds.addMethod(e,r),ds.endBodyCompression(e)}}class sx{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(e,n,r){return e.prep(8,16),e.writeInt64(r),e.writeInt64(n),e.offset()}}let ox=class{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(e,n,r){return e.prep(8,16),e.writeInt64(r),e.writeInt64(n),e.offset()}},Ii=class yv{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsRecordBatch(e,n){return(n||new yv).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsRecordBatch(e,n){return e.setPosition(e.position()+st),(n||new yv).__init(e.readInt32(e.position())+e.position(),e)}length(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}nodes(e,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new ox).__init(this.bb.__vector(this.bb_pos+r)+e*16,this.bb):null}nodesLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}buffers(e,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new sx).__init(this.bb.__vector(this.bb_pos+r)+e*16,this.bb):null}buffersLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}compression(e){const n=this.bb.__offset(this.bb_pos,10);return n?(e||new ds).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(e){e.startObject(4)}static addLength(e,n){e.addFieldInt64(0,n,e.createLong(0,0))}static addNodes(e,n){e.addFieldOffset(1,n,0)}static startNodesVector(e,n){e.startVector(16,n,8)}static addBuffers(e,n){e.addFieldOffset(2,n,0)}static startBuffersVector(e,n){e.startVector(16,n,8)}static addCompression(e,n){e.addFieldOffset(3,n,0)}static endRecordBatch(e){return e.endObject()}},ua=class vv{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsDictionaryBatch(e,n){return(n||new vv).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDictionaryBatch(e,n){return e.setPosition(e.position()+st),(n||new vv).__init(e.readInt32(e.position())+e.position(),e)}id(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}data(e){const n=this.bb.__offset(this.bb_pos,6);return n?(e||new Ii).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const e=this.bb.__offset(this.bb_pos,8);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startDictionaryBatch(e){e.startObject(3)}static addId(e,n){e.addFieldInt64(0,n,e.createLong(0,0))}static addData(e,n){e.addFieldOffset(1,n,0)}static addIsDelta(e,n){e.addFieldInt8(2,+n,0)}static endDictionaryBatch(e){return e.endObject()}};var Xd;(function(t){t[t.NONE=0]="NONE",t[t.Schema=1]="Schema",t[t.DictionaryBatch=2]="DictionaryBatch",t[t.RecordBatch=3]="RecordBatch",t[t.Tensor=4]="Tensor",t[t.SparseTensor=5]="SparseTensor"})(Xd||(Xd={}));let as=class Wr{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsMessage(e,n){return(n||new Wr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMessage(e,n){return e.setPosition(e.position()+st),(n||new Wr).__init(e.readInt32(e.position())+e.position(),e)}version(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Ja.V1}headerType(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):Xd.NONE}header(e){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(e,this.bb_pos+n):null}bodyLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}customMetadata(e,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new zt).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static startMessage(e){e.startObject(5)}static addVersion(e,n){e.addFieldInt16(0,n,Ja.V1)}static addHeaderType(e,n){e.addFieldInt8(1,n,Xd.NONE)}static addHeader(e,n){e.addFieldOffset(2,n,0)}static addBodyLength(e,n){e.addFieldInt64(3,n,e.createLong(0,0))}static addCustomMetadata(e,n){e.addFieldOffset(4,n,0)}static createCustomMetadataVector(e,n){e.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)e.addOffset(n[r]);return e.endVector()}static startCustomMetadataVector(e,n){e.startVector(4,n,4)}static endMessage(e){return e.endObject()}static finishMessageBuffer(e,n){e.finish(n)}static finishSizePrefixedMessageBuffer(e,n){e.finish(n,void 0,!0)}static createMessage(e,n,r,i,s,o){return Wr.startMessage(e),Wr.addVersion(e,n),Wr.addHeaderType(e,r),Wr.addHeader(e,i),Wr.addBodyLength(e,s),Wr.addCustomMetadata(e,o),Wr.endMessage(e)}};var gj=Ni;class wj extends Be{visit(e,n){return e==null||n==null?void 0:super.visit(e,n)}visitNull(e,n){return wo.startNull(n),wo.endNull(n)}visitInt(e,n){return Hn.startInt(n),Hn.addBitWidth(n,e.bitWidth),Hn.addIsSigned(n,e.isSigned),Hn.endInt(n)}visitFloat(e,n){return ri.startFloatingPoint(n),ri.addPrecision(n,e.precision),ri.endFloatingPoint(n)}visitBinary(e,n){return yo.startBinary(n),yo.endBinary(n)}visitBool(e,n){return vo.startBool(n),vo.endBool(n)}visitUtf8(e,n){return bo.startUtf8(n),bo.endUtf8(n)}visitDecimal(e,n){return bn.startDecimal(n),bn.addScale(n,e.scale),bn.addPrecision(n,e.precision),bn.addBitWidth(n,e.bitWidth),bn.endDecimal(n)}visitDate(e,n){return Nf.startDate(n),Nf.addUnit(n,e.unit),Nf.endDate(n)}visitTime(e,n){return pr.startTime(n),pr.addUnit(n,e.unit),pr.addBitWidth(n,e.bitWidth),pr.endTime(n)}visitTimestamp(e,n){const r=e.timezone&&n.createString(e.timezone)||void 0;return mr.startTimestamp(n),mr.addUnit(n,e.unit),r!==void 0&&mr.addTimezone(n,r),mr.endTimestamp(n)}visitInterval(e,n){return ii.startInterval(n),ii.addUnit(n,e.unit),ii.endInterval(n)}visitList(e,n){return go.startList(n),go.endList(n)}visitStruct(e,n){return _o.startStruct_(n),_o.endStruct_(n)}visitUnion(e,n){In.startTypeIdsVector(n,e.typeIds.length);const r=In.createTypeIdsVector(n,e.typeIds);return In.startUnion(n),In.addMode(n,e.mode),In.addTypeIds(n,r),In.endUnion(n)}visitDictionary(e,n){const r=this.visit(e.indices,n);return Di.startDictionaryEncoding(n),Di.addId(n,new gj(e.id,0)),Di.addIsOrdered(n,e.isOrdered),r!==void 0&&Di.addIndexType(n,r),Di.endDictionaryEncoding(n)}visitFixedSizeBinary(e,n){return ti.startFixedSizeBinary(n),ti.addByteWidth(n,e.byteWidth),ti.endFixedSizeBinary(n)}visitFixedSizeList(e,n){return ni.startFixedSizeList(n),ni.addListSize(n,e.listSize),ni.endFixedSizeList(n)}visitMap(e,n){return Bf.startMap(n),Bf.addKeysSorted(n,e.keysSorted),Bf.endMap(n)}}const xm=new wj;function _j(t,e=new Map){return new We(Sj(t,e),$f(t.customMetadata),e)}function ax(t){return new nr(t.count,ux(t.columns),lx(t.columns))}function bj(t){return new hi(ax(t.data),t.id,t.isDelta)}function Sj(t,e){return(t.fields||[]).filter(Boolean).map(n=>yt.fromJSON(n,e))}function O1(t,e){return(t.children||[]).filter(Boolean).map(n=>yt.fromJSON(n,e))}function ux(t){return(t||[]).reduce((e,n)=>[...e,new qo(n.count,Ij(n.VALIDITY)),...ux(n.children)],[])}function lx(t,e=[]){for(let n=-1,r=(t||[]).length;++n<r;){const i=t[n];i.VALIDITY&&e.push(new oi(e.length,i.VALIDITY.length)),i.TYPE&&e.push(new oi(e.length,i.TYPE.length)),i.OFFSET&&e.push(new oi(e.length,i.OFFSET.length)),i.DATA&&e.push(new oi(e.length,i.DATA.length)),e=lx(i.children,e)}return e}function Ij(t){return(t||[]).reduce((e,n)=>e+ +(n===0),0)}function Ej(t,e){let n,r,i,s,o,a;return!e||!(s=t.dictionary)?(o=D1(t,O1(t,e)),i=new yt(t.name,o,t.nullable,$f(t.customMetadata))):e.has(n=s.id)?(r=(r=s.indexType)?k1(r):new Fl,a=new Ya(e.get(n),r,n,s.isOrdered),i=new yt(t.name,a,t.nullable,$f(t.customMetadata))):(r=(r=s.indexType)?k1(r):new Fl,e.set(n,o=D1(t,O1(t,e))),a=new Ya(o,r,n,s.isOrdered),i=new yt(t.name,a,t.nullable,$f(t.customMetadata))),i||null}function $f(t){return new Map(Object.entries(t||{}))}function k1(t){return new Fs(t.isSigned,t.bitWidth)}function D1(t,e){const n=t.type.name;switch(n){case"NONE":return new Bs;case"null":return new Bs;case"binary":return new xd;case"utf8":return new Cd;case"bool":return new Ad;case"list":return new Nd((e||[])[0]);case"struct":return new pn(e||[]);case"struct_":return new pn(e||[])}switch(n){case"int":{const r=t.type;return new Fs(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=t.type;return new Ll(An[r.precision])}case"decimal":{const r=t.type;return new Pd(r.scale,r.precision,r.bitWidth)}case"date":{const r=t.type;return new Rd(Hi[r.unit])}case"time":{const r=t.type;return new $l(ze[r.unit],r.bitWidth)}case"timestamp":{const r=t.type;return new Td(ze[r.unit],r.timezone)}case"interval":{const r=t.type;return new Md(Ns[r.unit])}case"union":{const r=t.type;return new Bd(tr[r.mode],r.typeIds||[],e||[])}case"fixedsizebinary":{const r=t.type;return new Fd(r.byteWidth)}case"fixedsizelist":{const r=t.type;return new Ld(r.listSize,(e||[])[0])}case"map":{const r=t.type;return new $d((e||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var Uo=Ni,Oj=XD,kj=Ga;class mn{constructor(e,n,r,i){this._version=n,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=typeof e=="number"?e:e.low}static fromJSON(e,n){const r=new mn(0,Yn.V4,n);return r._createHeader=Dj(e,n),r}static decode(e){e=new kj(Ue(e));const n=as.getRootAsMessage(e),r=n.bodyLength(),i=n.version(),s=n.headerType(),o=new mn(r,i,s);return o._createHeader=xj(n,s),o}static encode(e){const n=new Oj;let r=-1;return e.isSchema()?r=We.encode(n,e.header()):e.isRecordBatch()?r=nr.encode(n,e.header()):e.isDictionaryBatch()&&(r=hi.encode(n,e.header())),as.startMessage(n),as.addVersion(n,Yn.V4),as.addHeader(n,r),as.addHeaderType(n,e.headerType),as.addBodyLength(n,new Uo(e.bodyLength,0)),as.finishMessageBuffer(n,as.endMessage(n)),n.asUint8Array()}static from(e,n=0){if(e instanceof We)return new mn(0,Yn.V4,Ve.Schema,e);if(e instanceof nr)return new mn(n,Yn.V4,Ve.RecordBatch,e);if(e instanceof hi)return new mn(n,Yn.V4,Ve.DictionaryBatch,e);throw new Error(`Unrecognized Message header: ${e}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===Ve.Schema}isRecordBatch(){return this.headerType===Ve.RecordBatch}isDictionaryBatch(){return this.headerType===Ve.DictionaryBatch}}class nr{constructor(e,n,r){this._nodes=n,this._buffers=r,this._length=typeof e=="number"?e:e.low}get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}}class hi{constructor(e,n,r=!1){this._data=e,this._isDelta=r,this._id=typeof n=="number"?n:n.low}get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}}class oi{constructor(e,n){this.offset=typeof e=="number"?e:e.low,this.length=typeof n=="number"?n:n.low}}class qo{constructor(e,n){this.length=typeof e=="number"?e:e.low,this.nullCount=typeof n=="number"?n:n.low}}function Dj(t,e){return()=>{switch(e){case Ve.Schema:return We.fromJSON(t);case Ve.RecordBatch:return nr.fromJSON(t);case Ve.DictionaryBatch:return hi.fromJSON(t)}throw new Error(`Unrecognized Message type: { name: ${Ve[e]}, type: ${e} }`)}}function xj(t,e){return()=>{switch(e){case Ve.Schema:return We.decode(t.header(new Hr));case Ve.RecordBatch:return nr.decode(t.header(new Ii),t.version());case Ve.DictionaryBatch:return hi.decode(t.header(new ua),t.version())}throw new Error(`Unrecognized Message type: { name: ${Ve[e]}, type: ${e} }`)}}yt.encode=$j;yt.decode=Fj;yt.fromJSON=Ej;We.encode=Lj;We.decode=Cj;We.fromJSON=_j;nr.encode=jj;nr.decode=Aj;nr.fromJSON=ax;hi.encode=Uj;hi.decode=Pj;hi.fromJSON=bj;qo.encode=zj;qo.decode=Tj;oi.encode=Vj;oi.decode=Rj;function Cj(t,e=new Map){const n=Bj(t,e);return new We(n,jf(t),e)}function Aj(t,e=Yn.V4){if(t.compression()!==null)throw new Error("Record batch compression not implemented");return new nr(t.length(),Mj(t),Nj(t,e))}function Pj(t,e=Yn.V4){return new hi(nr.decode(t.data(),e),t.id(),t.isDelta())}function Rj(t){return new oi(t.offset(),t.length())}function Tj(t){return new qo(t.length(),t.nullCount())}function Mj(t){const e=[];for(let n,r=-1,i=-1,s=t.nodesLength();++r<s;)(n=t.nodes(r))&&(e[++i]=qo.decode(n));return e}function Nj(t,e){const n=[];for(let r,i=-1,s=-1,o=t.buffersLength();++i<o;)(r=t.buffers(i))&&(e<Yn.V4&&(r.bb_pos+=8*(i+1)),n[++s]=oi.decode(r));return n}function Bj(t,e){const n=[];for(let r,i=-1,s=-1,o=t.fieldsLength();++i<o;)(r=t.fields(i))&&(n[++s]=yt.decode(r,e));return n}function x1(t,e){const n=[];for(let r,i=-1,s=-1,o=t.childrenLength();++i<o;)(r=t.children(i))&&(n[++s]=yt.decode(r,e));return n}function Fj(t,e){let n,r,i,s,o,a;return!e||!(a=t.dictionary())?(i=A1(t,x1(t,e)),r=new yt(t.name(),i,t.nullable(),jf(t))):e.has(n=a.id().low)?(s=(s=a.indexType())?C1(s):new Fl,o=new Ya(e.get(n),s,n,a.isOrdered()),r=new yt(t.name(),o,t.nullable(),jf(t))):(s=(s=a.indexType())?C1(s):new Fl,e.set(n,i=A1(t,x1(t,e))),o=new Ya(i,s,n,a.isOrdered()),r=new yt(t.name(),o,t.nullable(),jf(t))),r||null}function jf(t){const e=new Map;if(t)for(let n,r,i=-1,s=Math.trunc(t.customMetadataLength());++i<s;)(n=t.customMetadata(i))&&(r=n.key())!=null&&e.set(r,n.value());return e}function C1(t){return new Fs(t.isSigned(),t.bitWidth())}function A1(t,e){const n=t.typeType();switch(n){case _t.NONE:return new Bs;case _t.Null:return new Bs;case _t.Binary:return new xd;case _t.Utf8:return new Cd;case _t.Bool:return new Ad;case _t.List:return new Nd((e||[])[0]);case _t.Struct_:return new pn(e||[])}switch(n){case _t.Int:{const r=t.type(new Hn);return new Fs(r.isSigned(),r.bitWidth())}case _t.FloatingPoint:{const r=t.type(new ri);return new Ll(r.precision())}case _t.Decimal:{const r=t.type(new bn);return new Pd(r.scale(),r.precision(),r.bitWidth())}case _t.Date:{const r=t.type(new Nf);return new Rd(r.unit())}case _t.Time:{const r=t.type(new pr);return new $l(r.unit(),r.bitWidth())}case _t.Timestamp:{const r=t.type(new mr);return new Td(r.unit(),r.timezone())}case _t.Interval:{const r=t.type(new ii);return new Md(r.unit())}case _t.Union:{const r=t.type(new In);return new Bd(r.mode(),r.typeIdsArray()||[],e||[])}case _t.FixedSizeBinary:{const r=t.type(new ti);return new Fd(r.byteWidth())}case _t.FixedSizeList:{const r=t.type(new ni);return new Ld(r.listSize(),(e||[])[0])}case _t.Map:{const r=t.type(new Bf);return new $d((e||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${_t[n]}" (${n})`)}function Lj(t,e){const n=e.fields.map(s=>yt.encode(t,s));Hr.startFieldsVector(t,n.length);const r=Hr.createFieldsVector(t,n),i=e.metadata&&e.metadata.size>0?Hr.createCustomMetadataVector(t,[...e.metadata].map(([s,o])=>{const a=t.createString(`${s}`),l=t.createString(`${o}`);return zt.startKeyValue(t),zt.addKey(t,a),zt.addValue(t,l),zt.endKeyValue(t)})):-1;return Hr.startSchema(t),Hr.addFields(t,r),Hr.addEndianness(t,Kj?Xa.Little:Xa.Big),i!==-1&&Hr.addCustomMetadata(t,i),Hr.endSchema(t)}function $j(t,e){let n=-1,r=-1,i=-1;const s=e.type;let o=e.typeId;we.isDictionary(s)?(o=s.dictionary.typeId,i=xm.visit(s,t),r=xm.visit(s.dictionary,t)):r=xm.visit(s,t);const a=(s.children||[]).map(h=>yt.encode(t,h)),l=cr.createChildrenVector(t,a),f=e.metadata&&e.metadata.size>0?cr.createCustomMetadataVector(t,[...e.metadata].map(([h,m])=>{const y=t.createString(`${h}`),w=t.createString(`${m}`);return zt.startKeyValue(t),zt.addKey(t,y),zt.addValue(t,w),zt.endKeyValue(t)})):-1;return e.name&&(n=t.createString(e.name)),cr.startField(t),cr.addType(t,r),cr.addTypeType(t,o),cr.addChildren(t,l),cr.addNullable(t,!!e.nullable),n!==-1&&cr.addName(t,n),i!==-1&&cr.addDictionary(t,i),f!==-1&&cr.addCustomMetadata(t,f),cr.endField(t)}function jj(t,e){const n=e.nodes||[],r=e.buffers||[];Ii.startNodesVector(t,n.length);for(const o of n.slice().reverse())qo.encode(t,o);const i=t.endVector();Ii.startBuffersVector(t,r.length);for(const o of r.slice().reverse())oi.encode(t,o);const s=t.endVector();return Ii.startRecordBatch(t),Ii.addLength(t,new Uo(e.length,0)),Ii.addNodes(t,i),Ii.addBuffers(t,s),Ii.endRecordBatch(t)}function Uj(t,e){const n=nr.encode(t,e.data);return ua.startDictionaryBatch(t),ua.addId(t,new Uo(e.id,0)),ua.addIsDelta(t,e.isDelta),ua.addData(t,n),ua.endDictionaryBatch(t)}function zj(t,e){return ox.createFieldNode(t,new Uo(e.length,0),new Uo(e.nullCount,0))}function Vj(t,e){return sx.createBuffer(t,new Uo(e.offset,0),new Uo(e.length,0))}const Kj=(()=>{const t=new ArrayBuffer(2);return new DataView(t).setInt16(0,256,!0),new Int16Array(t)[0]===256})(),P0=t=>`Expected ${Ve[t]} Message in stream, but was null or length 0.`,R0=t=>`Header pointer of flatbuffer-encoded ${Ve[t]} Message is null or length 0.`,cx=(t,e)=>`Expected to read ${t} metadata bytes, but only read ${e}.`,fx=(t,e)=>`Expected to read ${t} bytes for message body, but only read ${e}.`;class dx{constructor(e){this.source=e instanceof Qd?e:new Qd(e)}[Symbol.iterator](){return this}next(){let e;return(e=this.readMetadataLength()).done||e.value===-1&&(e=this.readMetadataLength()).done||(e=this.readMetadata(e.value)).done?St:e}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}readMessage(e){let n;if((n=this.next()).done)return null;if(e!=null&&n.value.headerType!==e)throw new Error(P0(e));return n.value}readMessageBody(e){if(e<=0)return new Uint8Array(0);const n=Ue(this.source.read(e));if(n.byteLength<e)throw new Error(fx(e,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()}readSchema(e=!1){const n=Ve.Schema,r=this.readMessage(n),i=r==null?void 0:r.header();if(e&&!i)throw new Error(R0(n));return i}readMetadataLength(){const e=this.source.read(zh),n=e&&new Ga(e),r=(n==null?void 0:n.readInt32(0))||0;return{done:r===0,value:r}}readMetadata(e){const n=this.source.read(e);if(!n)return St;if(n.byteLength<e)throw new Error(cx(e,n.byteLength));return{done:!1,value:mn.decode(n)}}}class Wj{constructor(e,n){this.source=e instanceof eu?e:Tk(e)?new Yd(e,n):new eu(e)}[Symbol.asyncIterator](){return this}next(){return ve(this,void 0,void 0,function*(){let e;return(e=yield this.readMetadataLength()).done||e.value===-1&&(e=yield this.readMetadataLength()).done||(e=yield this.readMetadata(e.value)).done?St:e})}throw(e){return ve(this,void 0,void 0,function*(){return yield this.source.throw(e)})}return(e){return ve(this,void 0,void 0,function*(){return yield this.source.return(e)})}readMessage(e){return ve(this,void 0,void 0,function*(){let n;if((n=yield this.next()).done)return null;if(e!=null&&n.value.headerType!==e)throw new Error(P0(e));return n.value})}readMessageBody(e){return ve(this,void 0,void 0,function*(){if(e<=0)return new Uint8Array(0);const n=Ue(yield this.source.read(e));if(n.byteLength<e)throw new Error(fx(e,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()})}readSchema(e=!1){return ve(this,void 0,void 0,function*(){const n=Ve.Schema,r=yield this.readMessage(n),i=r==null?void 0:r.header();if(e&&!i)throw new Error(R0(n));return i})}readMetadataLength(){return ve(this,void 0,void 0,function*(){const e=yield this.source.read(zh),n=e&&new Ga(e),r=(n==null?void 0:n.readInt32(0))||0;return{done:r===0,value:r}})}readMetadata(e){return ve(this,void 0,void 0,function*(){const n=yield this.source.read(e);if(!n)return St;if(n.byteLength<e)throw new Error(cx(e,n.byteLength));return{done:!1,value:mn.decode(n)}})}}class qj extends dx{constructor(e){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=e instanceof S1?e:new S1(e)}next(){const{_json:e}=this;if(!this._schema)return this._schema=!0,{done:!1,value:mn.fromJSON(e.schema,Ve.Schema)};if(this._dictionaryIndex<e.dictionaries.length){const n=e.dictionaries[this._dictionaryIndex++];return this._body=n.data.columns,{done:!1,value:mn.fromJSON(n,Ve.DictionaryBatch)}}if(this._batchIndex<e.batches.length){const n=e.batches[this._batchIndex++];return this._body=n.columns,{done:!1,value:mn.fromJSON(n,Ve.RecordBatch)}}return this._body=[],St}readMessageBody(e){return n(this._body);function n(r){return(r||[]).reduce((i,s)=>[...i,...s.VALIDITY&&[s.VALIDITY]||[],...s.TYPE&&[s.TYPE]||[],...s.OFFSET&&[s.OFFSET]||[],...s.DATA&&[s.DATA]||[],...n(s.children)],[])}}readMessage(e){let n;if((n=this.next()).done)return null;if(e!=null&&n.value.headerType!==e)throw new Error(P0(e));return n.value}readSchema(){const e=Ve.Schema,n=this.readMessage(e),r=n==null?void 0:n.header();if(!n||!r)throw new Error(R0(e));return r}}const zh=4,gv="ARROW1",Ul=new Uint8Array(gv.length);for(let t=0;t<gv.length;t+=1)Ul[t]=gv.codePointAt(t);function T0(t,e=0){for(let n=-1,r=Ul.length;++n<r;)if(Ul[n]!==t[e+n])return!1;return!0}const dc=Ul.length,hx=dc+zh,Hj=dc*2+zh;class Bi extends O0{constructor(e){super(),this._impl=e}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(e){return this._impl.throw(e)}return(e){return this._impl.return(e)}cancel(){return this._impl.cancel()}reset(e){return this._impl.reset(e),this._DOMStream=void 0,this._nodeStream=void 0,this}open(e){const n=this._impl.open(e);return Ms(n)?n.then(()=>this):this}readRecordBatch(e){return this._impl.isFile()?this._impl.readRecordBatch(e):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return fr.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return fr.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(e){throw new Error('"throughNode" not available in this environment')}static throughDOM(e,n){throw new Error('"throughDOM" not available in this environment')}static from(e){return e instanceof Bi?e:av(e)?Jj(e):Tk(e)?e4(e):Ms(e)?(()=>ve(this,void 0,void 0,function*(){return yield Bi.from(yield e)}))():Mk(e)||f0(e)||Nk(e)||fu(e)?Zj(new eu(e)):Xj(new Qd(e))}static readAll(e){return e instanceof Bi?e.isSync()?P1(e):R1(e):av(e)||ArrayBuffer.isView(e)||uc(e)||Rk(e)?P1(e):R1(e)}}class Zd extends Bi{constructor(e){super(e),this._impl=e}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return Dr(this,arguments,function*(){yield ge(yield*Df(Ds(this[Symbol.iterator]())))})}}class eh extends Bi{constructor(e){super(e),this._impl=e}readAll(){var e,n;return ve(this,void 0,void 0,function*(){const r=new Array;try{for(var i=Ds(this),s;s=yield i.next(),!s.done;){const o=s.value;r.push(o)}}catch(o){e={error:o}}finally{try{s&&!s.done&&(n=i.return)&&(yield n.call(i))}finally{if(e)throw e.error}}return r})}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}class px extends Zd{constructor(e){super(e),this._impl=e}}class Qj extends eh{constructor(e){super(e),this._impl=e}}class mx{constructor(e=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=e}get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(e){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=e,this.dictionaries=new Map,this}_loadRecordBatch(e,n){const r=this._loadVectors(e,n,this.schema.fields),i=Ne({type:new pn(this.schema.fields),length:e.length,children:r});return new En(this.schema,i)}_loadDictionaryBatch(e,n){const{id:r,isDelta:i}=e,{dictionaries:s,schema:o}=this,a=s.get(r);if(i||!a){const l=o.dictionaries.get(r),f=this._loadVectors(e.data,n,[l]);return(a&&i?a.concat(new Ke(f)):new Ke(f)).memoize()}return a.memoize()}_loadVectors(e,n,r){return new tx(n,e.nodes,e.buffers,this.dictionaries).visitMany(r)}}class th extends mx{constructor(e,n){super(n),this._reader=av(e)?new qj(this._handle=e):new dx(this._handle=e)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(e){return this.closed||(this.autoDestroy=vx(this,e),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(e){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(e):St}return(e){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(e):St}next(){if(this.closed)return St;let e;const{_reader:n}=this;for(;e=this._readNextMessageAndValidate();)if(e.isSchema())this.reset(e.header());else if(e.isRecordBatch()){this._recordBatchIndex++;const r=e.header(),i=n.readMessageBody(e.bodyLength);return{done:!1,value:this._loadRecordBatch(r,i)}}else if(e.isDictionaryBatch()){this._dictionaryIndex++;const r=e.header(),i=n.readMessageBody(e.bodyLength),s=this._loadDictionaryBatch(r,i);this.dictionaries.set(r.id,s)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new A0(this.schema)}):this.return()}_readNextMessageAndValidate(e){return this._reader.readMessage(e)}}class nh extends mx{constructor(e,n){super(n),this._reader=new Wj(this._handle=e)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return ve(this,void 0,void 0,function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)})}open(e){return ve(this,void 0,void 0,function*(){return this.closed||(this.autoDestroy=vx(this,e),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this})}throw(e){return ve(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(e):St})}return(e){return ve(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(e):St})}next(){return ve(this,void 0,void 0,function*(){if(this.closed)return St;let e;const{_reader:n}=this;for(;e=yield this._readNextMessageAndValidate();)if(e.isSchema())yield this.reset(e.header());else if(e.isRecordBatch()){this._recordBatchIndex++;const r=e.header(),i=yield n.readMessageBody(e.bodyLength);return{done:!1,value:this._loadRecordBatch(r,i)}}else if(e.isDictionaryBatch()){this._dictionaryIndex++;const r=e.header(),i=yield n.readMessageBody(e.bodyLength),s=this._loadDictionaryBatch(r,i);this.dictionaries.set(r.id,s)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new A0(this.schema)}):yield this.return()})}_readNextMessageAndValidate(e){return ve(this,void 0,void 0,function*(){return yield this._reader.readMessage(e)})}}class yx extends th{constructor(e,n){super(e instanceof I1?e:new I1(e),n)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isSync(){return!0}isFile(){return!0}open(e){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const n of this._footer.dictionaryBatches())n&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(e)}readRecordBatch(e){var n;if(this.closed)return null;this._footer||this.open();const r=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(e);if(r&&this._handle.seek(r.offset)){const i=this._reader.readMessage(Ve.RecordBatch);if(i!=null&&i.isRecordBatch()){const s=i.header(),o=this._reader.readMessageBody(i.bodyLength);return this._loadRecordBatch(s,o)}}return null}_readDictionaryBatch(e){var n;const r=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(e);if(r&&this._handle.seek(r.offset)){const i=this._reader.readMessage(Ve.DictionaryBatch);if(i!=null&&i.isDictionaryBatch()){const s=i.header(),o=this._reader.readMessageBody(i.bodyLength),a=this._loadDictionaryBatch(s,o);this.dictionaries.set(s.id,a)}}}_readFooter(){const{_handle:e}=this,n=e.size-hx,r=e.readInt32(n),i=e.readAt(n-r,r);return jl.decode(i)}_readNextMessageAndValidate(e){var n;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const r=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(this._recordBatchIndex);if(r&&this._handle.seek(r.offset))return this._reader.readMessage(e)}return null}}class Yj extends nh{constructor(e,...n){const r=typeof n[0]!="number"?n.shift():void 0,i=n[0]instanceof Map?n.shift():void 0;super(e instanceof Yd?e:new Yd(e,r),i)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isFile(){return!0}isAsync(){return!0}open(e){const n=Object.create(null,{open:{get:()=>super.open}});return ve(this,void 0,void 0,function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const r of this._footer.dictionaryBatches())r&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield n.open.call(this,e)})}readRecordBatch(e){var n;return ve(this,void 0,void 0,function*(){if(this.closed)return null;this._footer||(yield this.open());const r=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(e);if(r&&(yield this._handle.seek(r.offset))){const i=yield this._reader.readMessage(Ve.RecordBatch);if(i!=null&&i.isRecordBatch()){const s=i.header(),o=yield this._reader.readMessageBody(i.bodyLength);return this._loadRecordBatch(s,o)}}return null})}_readDictionaryBatch(e){var n;return ve(this,void 0,void 0,function*(){const r=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(e);if(r&&(yield this._handle.seek(r.offset))){const i=yield this._reader.readMessage(Ve.DictionaryBatch);if(i!=null&&i.isDictionaryBatch()){const s=i.header(),o=yield this._reader.readMessageBody(i.bodyLength),a=this._loadDictionaryBatch(s,o);this.dictionaries.set(s.id,a)}}})}_readFooter(){return ve(this,void 0,void 0,function*(){const{_handle:e}=this;e._pending&&(yield e._pending);const n=e.size-hx,r=yield e.readInt32(n),i=yield e.readAt(n-r,r);return jl.decode(i)})}_readNextMessageAndValidate(e){return ve(this,void 0,void 0,function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const n=this._footer.getRecordBatch(this._recordBatchIndex);if(n&&(yield this._handle.seek(n.offset)))return yield this._reader.readMessage(e)}return null})}}class Gj extends th{constructor(e,n){super(e,n)}_loadVectors(e,n,r){return new uj(n,e.nodes,e.buffers,this.dictionaries).visitMany(r)}}function vx(t,e){return e&&typeof e.autoDestroy=="boolean"?e.autoDestroy:t.autoDestroy}function*P1(t){const e=Bi.from(t);try{if(!e.open({autoDestroy:!1}).closed)do yield e;while(!e.reset().open().closed)}finally{e.cancel()}}function R1(t){return Dr(this,arguments,function*(){const n=yield ge(Bi.from(t));try{if(!(yield ge(n.open({autoDestroy:!1}))).closed)do yield yield ge(n);while(!(yield ge(n.reset().open())).closed)}finally{yield ge(n.cancel())}})}function Jj(t){return new Zd(new Gj(t))}function Xj(t){const e=t.peek(dc+7&-8);return e&&e.byteLength>=4?T0(e)?new px(new yx(t.read())):new Zd(new th(t)):new Zd(new th(function*(){}()))}function Zj(t){return ve(this,void 0,void 0,function*(){const e=yield t.peek(dc+7&-8);return e&&e.byteLength>=4?T0(e)?new px(new yx(yield t.read())):new eh(new nh(t)):new eh(new nh(function(){return Dr(this,arguments,function*(){})}()))})}function e4(t){return ve(this,void 0,void 0,function*(){const{size:e}=yield t.stat(),n=new Yd(t,e);return e>=Hj&&T0(yield n.readAt(0,dc+7&-8))?new Qj(new Yj(n)):new eh(new nh(n))})}class $t extends Be{constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}static assemble(...e){const n=i=>i.flatMap(s=>Array.isArray(s)?n(s):s instanceof En?s.data.children:s.data),r=new $t;return r.visitMany(n(e)),r}visit(e){if(e instanceof Ke)return this.visitMany(e.data),this;const{type:n}=e;if(!we.isDictionary(n)){const{length:r,nullCount:i}=e;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");we.isNull(n)||Pr.call(this,i<=0?new Uint8Array(0):_0(e.offset,r,e.nullBitmap)),this.nodes.push(new qo(r,i))}return super.visit(e)}visitNull(e){return this}visitDictionary(e){return this.visit(e.clone(e.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function Pr(t){const e=t.byteLength+7&-8;return this.buffers.push(t),this.bufferRegions.push(new oi(this._byteLength,e)),this._byteLength+=e,this}function t4(t){const{type:e,length:n,typeIds:r,valueOffsets:i}=t;if(Pr.call(this,r),e.mode===tr.Sparse)return wv.call(this,t);if(e.mode===tr.Dense){if(t.offset<=0)return Pr.call(this,i),wv.call(this,t);{const s=r.reduce((h,m)=>Math.max(h,m),r[0]),o=new Int32Array(s+1),a=new Int32Array(s+1).fill(-1),l=new Int32Array(n),f=h0(-i[0],n,i);for(let h,m,y=-1;++y<n;)(m=a[h=r[y]])===-1&&(m=a[h]=f[h]),l[y]=f[y]-m,++o[h];Pr.call(this,l);for(let h,m=-1,y=e.children.length;++m<y;)if(h=t.children[m]){const w=e.typeIds[m],I=Math.min(n,o[w]);this.visit(h.slice(a[w],I))}}}return this}function n4(t){let e;return t.nullCount>=t.length?Pr.call(this,new Uint8Array(0)):(e=t.values)instanceof Uint8Array?Pr.call(this,_0(t.offset,t.length,e)):Pr.call(this,jd(t.values))}function Ys(t){return Pr.call(this,t.values.subarray(0,t.length*t.stride))}function gx(t){const{length:e,values:n,valueOffsets:r}=t,i=r[0],s=r[e],o=Math.min(s-i,n.byteLength-i);return Pr.call(this,h0(-r[0],e,r)),Pr.call(this,n.subarray(i,i+o)),this}function M0(t){const{length:e,valueOffsets:n}=t;return n&&Pr.call(this,h0(n[0],e,n)),this.visit(t.children[0])}function wv(t){return this.visitMany(t.type.children.map((e,n)=>t.children[n]).filter(Boolean))[0]}$t.prototype.visitBool=n4;$t.prototype.visitInt=Ys;$t.prototype.visitFloat=Ys;$t.prototype.visitUtf8=gx;$t.prototype.visitBinary=gx;$t.prototype.visitFixedSizeBinary=Ys;$t.prototype.visitDate=Ys;$t.prototype.visitTimestamp=Ys;$t.prototype.visitTime=Ys;$t.prototype.visitDecimal=Ys;$t.prototype.visitList=M0;$t.prototype.visitStruct=wv;$t.prototype.visitUnion=t4;$t.prototype.visitInterval=Ys;$t.prototype.visitFixedSizeList=M0;$t.prototype.visitMap=M0;class wx extends O0{constructor(e){super(),this._position=0,this._started=!1,this._sink=new Lf,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,Nn(e)||(e={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof e.autoDestroy=="boolean"?e.autoDestroy:!0,this._writeLegacyIpcFormat=typeof e.writeLegacyIpcFormat=="boolean"?e.writeLegacyIpcFormat:!1}static throughNode(e){throw new Error('"throughNode" not available in this environment')}static throughDOM(e,n){throw new Error('"throughDOM" not available in this environment')}toString(e=!1){return this._sink.toString(e)}toUint8Array(e=!1){return this._sink.toUint8Array(e)}writeAll(e){return Ms(e)?e.then(n=>this.writeAll(n)):fu(e)?L0(this,e):F0(this,e)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(e){return this._sink.toDOMStream(e)}toNodeStream(e){return this._sink.toNodeStream(e)}close(){return this.reset()._sink.close()}abort(e){return this.reset()._sink.abort(e)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(e=this._sink,n=null){return e===this._sink||e instanceof Lf?this._sink=e:(this._sink=new Lf,e&&I3(e)?this.toDOMStream({type:"bytes"}).pipeTo(e):e&&E3(e)&&this.toNodeStream({objectMode:!1}).pipe(e)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!mv(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(e){let n=null;if(this._sink){if(e==null)return this.finish()&&void 0;if(e instanceof hn&&!(n=e.schema))return this.finish()&&void 0;if(e instanceof En&&!(n=e.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!mv(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}e instanceof En?e instanceof A0||this._writeRecordBatch(e):e instanceof hn?this.writeAll(e.batches):uc(e)&&this.writeAll(e)}_writeMessage(e,n=8){const r=n-1,i=mn.encode(e),s=i.byteLength,o=this._writeLegacyIpcFormat?4:8,a=s+o+r&~r,l=a-s-o;return e.headerType===Ve.RecordBatch?this._recordBatchBlocks.push(new Ls(a,e.bodyLength,this._position)):e.headerType===Ve.DictionaryBatch&&this._dictionaryBlocks.push(new Ls(a,e.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-o)),s>0&&this._write(i),this._writePadding(l)}_write(e){if(this._started){const n=Ue(e);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(e){return this._writeMessage(mn.from(e))}_writeFooter(e){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(Ul)}_writePadding(e){return e>0?this._write(new Uint8Array(e)):this}_writeRecordBatch(e){const{byteLength:n,nodes:r,bufferRegions:i,buffers:s}=$t.assemble(e),o=new nr(e.numRows,r,i),a=mn.from(o,n);return this._writeDictionaries(e)._writeMessage(a)._writeBodyBuffers(s)}_writeDictionaryBatch(e,n,r=!1){this._dictionaryDeltaOffsets.set(n,e.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:i,nodes:s,bufferRegions:o,buffers:a}=$t.assemble(new Ke([e])),l=new nr(e.length,s,o),f=new hi(l,n,r),h=mn.from(f,i);return this._writeMessage(h)._writeBodyBuffers(a)}_writeBodyBuffers(e){let n,r,i;for(let s=-1,o=e.length;++s<o;)(n=e[s])&&(r=n.byteLength)>0&&(this._write(n),(i=(r+7&-8)-r)>0&&this._writePadding(i));return this}_writeDictionaries(e){for(let[n,r]of e.dictionaries){let i=this._dictionaryDeltaOffsets.get(n)||0;if(i===0||(r=r==null?void 0:r.slice(i)).length>0)for(const s of r.data)this._writeDictionaryBatch(s,n,i>0),i+=s.length}return this}}class N0 extends wx{static writeAll(e,n){const r=new N0(n);return Ms(e)?e.then(i=>r.writeAll(i)):fu(e)?L0(r,e):F0(r,e)}}class B0 extends wx{static writeAll(e){const n=new B0;return Ms(e)?e.then(r=>n.writeAll(r)):fu(e)?L0(n,e):F0(n,e)}constructor(){super(),this._autoDestroy=!0}_writeSchema(e){return this._writeMagic()._writePadding(2)}_writeFooter(e){const n=jl.encode(new jl(e,Yn.V4,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(e)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function F0(t,e){let n=e;e instanceof hn&&(n=e.batches,t.reset(void 0,e.schema));for(const r of n)t.write(r);return t.finish()}function L0(t,e){var n,r,i,s;return ve(this,void 0,void 0,function*(){try{for(n=Ds(e);r=yield n.next(),!r.done;){const o=r.value;t.write(o)}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}return t.finish()})}function Ku(t){const e=Bi.from(t);return Ms(e)?e.then(n=>Ku(n)):e.isAsync()?e.readAll().then(n=>new hn(n)):new hn(e.readAll())}function Cm(t,e="stream"){return(e==="stream"?N0:B0).writeAll(t).toUint8Array(!0)}var T1=function(){function t(e,n,r,i){var s=this;this.getCell=function(o,a){var l=o<s.headerRows&&a<s.headerColumns,f=o>=s.headerRows&&a<s.headerColumns,h=o<s.headerRows&&a>=s.headerColumns;if(l){var m=["blank"];return a>0&&m.push("level"+o),{type:"blank",classNames:m.join(" "),content:""}}else if(h){var y=a-s.headerColumns,m=["col_heading","level"+o,"col"+y];return{type:"columns",classNames:m.join(" "),content:s.getContent(s.columnsTable,y,o)}}else if(f){var w=o-s.headerRows,m=["row_heading","level"+a,"row"+w];return{type:"index",id:"T_".concat(s.uuid,"level").concat(a,"_row").concat(w),classNames:m.join(" "),content:s.getContent(s.indexTable,w,a)}}else{var w=o-s.headerRows,y=a-s.headerColumns,m=["data","row"+w,"col"+y],I=s.styler?s.getContent(s.styler.displayValuesTable,w,y):s.getContent(s.dataTable,w,y);return{type:"data",id:"T_".concat(s.uuid,"row").concat(w,"_col").concat(y),classNames:m.join(" "),content:I}}},this.getContent=function(o,a,l){var f=o.getChildAt(l);if(f===null)return"";var h=s.getColumnTypeId(o,l);switch(h){case N.Timestamp:return s.nanosToDate(f.get(a));default:return f.get(a)}},this.dataTable=Ku(e),this.indexTable=Ku(n),this.columnsTable=Ku(r),this.styler=i?{caption:i.caption,displayValuesTable:Ku(i.displayValues),styles:i.styles,uuid:i.uuid}:void 0}return Object.defineProperty(t.prototype,"rows",{get:function(){return this.indexTable.numRows+this.columnsTable.numCols},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"columns",{get:function(){return this.indexTable.numCols+this.columnsTable.numRows},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"headerRows",{get:function(){return this.rows-this.dataRows},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"headerColumns",{get:function(){return this.columns-this.dataColumns},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataRows",{get:function(){return this.dataTable.numRows},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataColumns",{get:function(){return this.dataTable.numCols},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uuid",{get:function(){return this.styler&&this.styler.uuid},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"caption",{get:function(){return this.styler&&this.styler.caption},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"styles",{get:function(){return this.styler&&this.styler.styles},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"table",{get:function(){return this.dataTable},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"index",{get:function(){return this.indexTable},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"columnTable",{get:function(){return this.columnsTable},enumerable:!1,configurable:!0}),t.prototype.serialize=function(){return{data:Cm(this.dataTable),index:Cm(this.indexTable),columns:Cm(this.columnsTable)}},t.prototype.getColumnTypeId=function(e,n){return e.schema.fields[n].type.typeId},t.prototype.nanosToDate=function(e){return new Date(e/1e6)},t}(),al=function(){return al=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},al.apply(this,arguments)},ul;(function(t){t.COMPONENT_READY="streamlit:componentReady",t.SET_COMPONENT_VALUE="streamlit:setComponentValue",t.SET_FRAME_HEIGHT="streamlit:setFrameHeight"})(ul||(ul={}));var On=function(){function t(){}return t.API_VERSION=1,t.RENDER_EVENT="streamlit:render",t.events=new EventTarget,t.registeredMessageListener=!1,t.setComponentReady=function(){t.registeredMessageListener||(window.addEventListener("message",t.onMessageEvent),t.registeredMessageListener=!0),t.sendBackMsg(ul.COMPONENT_READY,{apiVersion:t.API_VERSION})},t.setFrameHeight=function(e){e===void 0&&(e=document.body.scrollHeight),e!==t.lastFrameHeight&&(t.lastFrameHeight=e,t.sendBackMsg(ul.SET_FRAME_HEIGHT,{height:e}))},t.setComponentValue=function(e){var n;e instanceof T1?(n="dataframe",e=e.serialize()):i4(e)?(n="bytes",e=new Uint8Array(e.buffer)):e instanceof ArrayBuffer?(n="bytes",e=new Uint8Array(e)):n="json",t.sendBackMsg(ul.SET_COMPONENT_VALUE,{value:e,dataType:n})},t.onMessageEvent=function(e){var n=e.data.type;switch(n){case t.RENDER_EVENT:t.onRenderMessage(e.data);break}},t.onRenderMessage=function(e){var n=e.args;n==null&&(console.error("Got null args in onRenderMessage. This should never happen"),n={});var r=e.dfs&&e.dfs.length>0?t.argsDataframeToObject(e.dfs):{};n=al(al({},n),r);var i=!!e.disabled,s=e.theme;s&&r4(s);var o={disabled:i,args:n,theme:s},a=new CustomEvent(t.RENDER_EVENT,{detail:o});t.events.dispatchEvent(a)},t.argsDataframeToObject=function(e){var n=e.map(function(r){var i=r.key,s=r.value;return[i,t.toArrowTable(s)]});return Object.fromEntries(n)},t.toArrowTable=function(e){var n,r=(n=e.data,n.data),i=n.index,s=n.columns,o=n.styler;return new T1(r,i,s,o)},t.sendBackMsg=function(e,n){window.parent.postMessage(al({isStreamlitMessage:!0,type:e},n),"*")},t}(),r4=function(t){var e=document.createElement("style");document.head.appendChild(e),e.innerHTML=`
    :root {
      --primary-color: `.concat(t.primaryColor,`;
      --background-color: `).concat(t.backgroundColor,`;
      --secondary-background-color: `).concat(t.secondaryBackgroundColor,`;
      --text-color: `).concat(t.textColor,`;
      --font: `).concat(t.font,`;
    }

    body {
      background-color: var(--background-color);
      color: var(--text-color);
    }
  `)};function i4(t){var e=!1;try{e=t instanceof BigInt64Array||t instanceof BigUint64Array}catch{}return t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array||e}var _x=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){_x(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.componentDidMount=function(){On.setFrameHeight()},e.prototype.componentDidUpdate=function(){On.setFrameHeight()},e})(ia.PureComponent);function s4(t){var e=function(n){_x(r,n);function r(i){var s=n.call(this,i)||this;return s.componentDidMount=function(){On.events.addEventListener(On.RENDER_EVENT,s.onRenderEvent),On.setComponentReady()},s.componentDidUpdate=function(){s.state.componentError!=null&&On.setFrameHeight()},s.componentWillUnmount=function(){On.events.removeEventListener(On.RENDER_EVENT,s.onRenderEvent)},s.onRenderEvent=function(o){s.setState({renderData:o.detail})},s.state={renderData:void 0,componentError:void 0},s}return r.prototype.render=function(){return this.state.componentError!=null?ia.createElement("div",null,ia.createElement("h1",null,"Component Error"),ia.createElement("span",null,this.state.componentError.message)):this.state.renderData==null?null:ia.createElement(t,{width:window.innerWidth,disabled:this.state.renderData.disabled,args:this.state.renderData.args,theme:this.state.renderData.theme})},r.getDerivedStateFromError=function(i){return{componentError:i}},r}(ia.PureComponent);return JL(e,t)}var o4=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!t(e[i],n[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!t(e[o],n[o]))return!1}return!0}return e!==e&&n!==n};const a4=rh(o4);let hf;const u4=new Uint8Array(16);function l4(){if(!hf&&(hf=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!hf))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return hf(u4)}const Jt=[];for(let t=0;t<256;++t)Jt.push((t+256).toString(16).slice(1));function c4(t,e=0){return Jt[t[e+0]]+Jt[t[e+1]]+Jt[t[e+2]]+Jt[t[e+3]]+"-"+Jt[t[e+4]]+Jt[t[e+5]]+"-"+Jt[t[e+6]]+Jt[t[e+7]]+"-"+Jt[t[e+8]]+Jt[t[e+9]]+"-"+Jt[t[e+10]]+Jt[t[e+11]]+Jt[t[e+12]]+Jt[t[e+13]]+Jt[t[e+14]]+Jt[t[e+15]]}const f4=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),M1={randomUUID:f4};function d4(t,e,n){if(M1.randomUUID&&!e&&!t)return M1.randomUUID();t=t||{};const r=t.random||(t.rng||l4)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(let i=0;i<16;++i)e[n+i]=r[i];return e}return c4(r)}const{logger:Am,isEmpty:pf}=Fr,h4=(t,e)=>{const[n,r]=qn.useState(),i=qn.useRef(t);return qn.useEffect(()=>{if(!n||pf(t)||a4(t,i.current))return;i.current=t;const{added_rows:s,edited_rows:o,deleted_rows:a}=t;if(!pf(s)){const l=s.map(f=>({...f,id:d4(),createdAt:new Date().toISOString(),last_modified:Date.now()}));if(!l.length)return;e.upsertBulk(l).catch(f=>Am.log("upsertBulk",f))}if(!pf(a)){const l=[];if(a.forEach(f=>{const h=n.at(f);h&&l.push(h.id)}),!l.length)return;e.removeBulk(l).catch(f=>Am.log("removeBulk",f))}if(!pf(o)){const l=Object.entries(o).map(([f,h])=>({...n.at(parseInt(f)),...h,last_modified:Date.now()}));if(!l.length)return;e.upsertBulk(l).catch(f=>Am.log("upsertBulk",f))}},[t,n,e]),[n,r]},p4=t=>{const[e,n]=qn.useState();return qn.useEffect(()=>{const r=s=>{n(s.detail)};return On.events.addEventListener(On.RENDER_EVENT,r),On.setComponentReady(),()=>{On.events.removeEventListener(On.RENDER_EVENT,r),t.unsubscribe()}},[]),e},{logger:N1,isEmptyObject:m4}=Fr,y4=t=>{const[e,n]=qn.useState(),r=new Bo,i=qn.useRef();i.current||(i.current=new Bo);const s=p4(i.current),{editing_state:o,collection_config:a,db_config:l,query:f,with_rev:h}=(s==null?void 0:s.args)||{},m=qn.useRef(),y=qn.useRef();m.current||(m.current=new BL);const w=()=>y.current,[,I]=h4(o,w()),E=qn.useCallback(S=>{const _=_F(S);return m.current.initDb(_)},[]),$=qn.useCallback(async S=>{y.current||(y.current=new Je(S,m.current)),await w().info(),n(!0);const _=w().docs(f,h).subscribe(O=>{O&&(N1.table(O),I(O),On.setComponentValue(O))});r.add(_)},[]);return m4(s)?null:(e||E(l).then(()=>$(a)).catch(N1.log),t.args.element)},v4=s4(y4),g4=YI(document.getElementById("root"));g4.render(bC.jsx(v4,{}));
