var eC=Object.defineProperty;var tC=(t,e,n)=>e in t?eC(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var jc=(t,e,n)=>(tC(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var gw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function rh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var B1={exports:{}},ih={},F1={exports:{}},Me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zl=Symbol.for("react.element"),nC=Symbol.for("react.portal"),rC=Symbol.for("react.fragment"),iC=Symbol.for("react.strict_mode"),sC=Symbol.for("react.profiler"),oC=Symbol.for("react.provider"),aC=Symbol.for("react.context"),uC=Symbol.for("react.forward_ref"),lC=Symbol.for("react.suspense"),cC=Symbol.for("react.memo"),fC=Symbol.for("react.lazy"),ww=Symbol.iterator;function dC(t){return t===null||typeof t!="object"?null:(t=ww&&t[ww]||t["@@iterator"],typeof t=="function"?t:null)}var L1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$1=Object.assign,j1={};function tu(t,e,n){this.props=t,this.context=e,this.refs=j1,this.updater=n||L1}tu.prototype.isReactComponent={};tu.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};tu.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function U1(){}U1.prototype=tu.prototype;function bv(t,e,n){this.props=t,this.context=e,this.refs=j1,this.updater=n||L1}var Sv=bv.prototype=new U1;Sv.constructor=bv;$1(Sv,tu.prototype);Sv.isPureReactComponent=!0;var _w=Array.isArray,z1=Object.prototype.hasOwnProperty,Iv={current:null},V1={key:!0,ref:!0,__self:!0,__source:!0};function K1(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)z1.call(e,r)&&!V1.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),f=0;f<a;f++)l[f]=arguments[f+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:zl,type:t,key:s,ref:o,props:i,_owner:Iv.current}}function hC(t,e){return{$$typeof:zl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ev(t){return typeof t=="object"&&t!==null&&t.$$typeof===zl}function pC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var bw=/\/+/g;function kp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?pC(""+t.key):e.toString(36)}function mf(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case zl:case nC:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+kp(o,0):r,_w(i)?(n="",t!=null&&(n=t.replace(bw,"$&/")+"/"),mf(i,e,n,"",function(f){return f})):i!=null&&(Ev(i)&&(i=hC(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(bw,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",_w(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+kp(s,a);o+=mf(s,e,n,l,i)}else if(l=dC(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+kp(s,a++),o+=mf(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Uc(t,e,n){if(t==null)return t;var r=[],i=0;return mf(t,r,"","",function(s){return e.call(n,s,i++)}),r}function mC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var _n={current:null},yf={transition:null},yC={ReactCurrentDispatcher:_n,ReactCurrentBatchConfig:yf,ReactCurrentOwner:Iv};Me.Children={map:Uc,forEach:function(t,e,n){Uc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Uc(t,function(){e++}),e},toArray:function(t){return Uc(t,function(e){return e})||[]},only:function(t){if(!Ev(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Me.Component=tu;Me.Fragment=rC;Me.Profiler=sC;Me.PureComponent=bv;Me.StrictMode=iC;Me.Suspense=lC;Me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yC;Me.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=$1({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Iv.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)z1.call(e,l)&&!V1.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var f=0;f<l;f++)a[f]=arguments[f+2];r.children=a}return{$$typeof:zl,type:t.type,key:i,ref:s,props:r,_owner:o}};Me.createContext=function(t){return t={$$typeof:aC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:oC,_context:t},t.Consumer=t};Me.createElement=K1;Me.createFactory=function(t){var e=K1.bind(null,t);return e.type=t,e};Me.createRef=function(){return{current:null}};Me.forwardRef=function(t){return{$$typeof:uC,render:t}};Me.isValidElement=Ev;Me.lazy=function(t){return{$$typeof:fC,_payload:{_status:-1,_result:t},_init:mC}};Me.memo=function(t,e){return{$$typeof:cC,type:t,compare:e===void 0?null:e}};Me.startTransition=function(t){var e=yf.transition;yf.transition={};try{t()}finally{yf.transition=e}};Me.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Me.useCallback=function(t,e){return _n.current.useCallback(t,e)};Me.useContext=function(t){return _n.current.useContext(t)};Me.useDebugValue=function(){};Me.useDeferredValue=function(t){return _n.current.useDeferredValue(t)};Me.useEffect=function(t,e){return _n.current.useEffect(t,e)};Me.useId=function(){return _n.current.useId()};Me.useImperativeHandle=function(t,e,n){return _n.current.useImperativeHandle(t,e,n)};Me.useInsertionEffect=function(t,e){return _n.current.useInsertionEffect(t,e)};Me.useLayoutEffect=function(t,e){return _n.current.useLayoutEffect(t,e)};Me.useMemo=function(t,e){return _n.current.useMemo(t,e)};Me.useReducer=function(t,e,n){return _n.current.useReducer(t,e,n)};Me.useRef=function(t){return _n.current.useRef(t)};Me.useState=function(t){return _n.current.useState(t)};Me.useSyncExternalStore=function(t,e,n){return _n.current.useSyncExternalStore(t,e,n)};Me.useTransition=function(){return _n.current.useTransition()};Me.version="18.2.0";F1.exports=Me;var pn=F1.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vC=pn,gC=Symbol.for("react.element"),wC=Symbol.for("react.fragment"),_C=Object.prototype.hasOwnProperty,bC=vC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,SC={key:!0,ref:!0,__self:!0,__source:!0};function W1(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)_C.call(e,r)&&!SC.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:gC,type:t,key:s,ref:o,props:i,_owner:bC.current}}ih.Fragment=wC;ih.jsx=W1;ih.jsxs=W1;B1.exports=ih;var IC=B1.exports,q1={exports:{}},sr={},H1={exports:{}},Q1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(G,oe){var ue=G.length;G.push(oe);e:for(;0<ue;){var Re=ue-1>>>1,xt=G[Re];if(0<i(xt,oe))G[Re]=oe,G[ue]=xt,ue=Re;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var oe=G[0],ue=G.pop();if(ue!==oe){G[0]=ue;e:for(var Re=0,xt=G.length,ft=xt>>>1;Re<ft;){var Ct=2*(Re+1)-1,Vn=G[Ct],tn=Ct+1,Xi=G[tn];if(0>i(Vn,ue))tn<xt&&0>i(Xi,Vn)?(G[Re]=Xi,G[tn]=ue,Re=tn):(G[Re]=Vn,G[Ct]=ue,Re=Ct);else if(tn<xt&&0>i(Xi,ue))G[Re]=Xi,G[tn]=ue,Re=tn;else break e}}return oe}function i(G,oe){var ue=G.sortIndex-oe.sortIndex;return ue!==0?ue:G.id-oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],f=[],h=1,p=null,y=3,w=!1,I=!1,E=!1,$=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(G){for(var oe=n(f);oe!==null;){if(oe.callback===null)r(f);else if(oe.startTime<=G)r(f),oe.sortIndex=oe.expirationTime,e(l,oe);else break;oe=n(f)}}function z(G){if(E=!1,k(G),!I)if(n(l)!==null)I=!0,Te(W);else{var oe=n(f);oe!==null&&Dt(z,oe.startTime-G)}}function W(G,oe){I=!1,E&&(E=!1,S(X),X=-1),w=!0;var ue=y;try{for(k(oe),p=n(l);p!==null&&(!(p.expirationTime>oe)||G&&!ce());){var Re=p.callback;if(typeof Re=="function"){p.callback=null,y=p.priorityLevel;var xt=Re(p.expirationTime<=oe);oe=t.unstable_now(),typeof xt=="function"?p.callback=xt:p===n(l)&&r(l),k(oe)}else r(l);p=n(l)}if(p!==null)var ft=!0;else{var Ct=n(f);Ct!==null&&Dt(z,Ct.startTime-oe),ft=!1}return ft}finally{p=null,y=ue,w=!1}}var Q=!1,H=null,X=-1,U=5,ee=-1;function ce(){return!(t.unstable_now()-ee<U)}function de(){if(H!==null){var G=t.unstable_now();ee=G;var oe=!0;try{oe=H(!0,G)}finally{oe?Pe():(Q=!1,H=null)}}else Q=!1}var Pe;if(typeof _=="function")Pe=function(){_(de)};else if(typeof MessageChannel<"u"){var ot=new MessageChannel,ct=ot.port2;ot.port1.onmessage=de,Pe=function(){ct.postMessage(null)}}else Pe=function(){$(de,0)};function Te(G){H=G,Q||(Q=!0,Pe())}function Dt(G,oe){X=$(function(){G(t.unstable_now())},oe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){I||w||(I=!0,Te(W))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(G){switch(y){case 1:case 2:case 3:var oe=3;break;default:oe=y}var ue=y;y=oe;try{return G()}finally{y=ue}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,oe){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var ue=y;y=G;try{return oe()}finally{y=ue}},t.unstable_scheduleCallback=function(G,oe,ue){var Re=t.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?Re+ue:Re):ue=Re,G){case 1:var xt=-1;break;case 2:xt=250;break;case 5:xt=1073741823;break;case 4:xt=1e4;break;default:xt=5e3}return xt=ue+xt,G={id:h++,callback:oe,priorityLevel:G,startTime:ue,expirationTime:xt,sortIndex:-1},ue>Re?(G.sortIndex=ue,e(f,G),n(l)===null&&G===n(f)&&(E?(S(X),X=-1):E=!0,Dt(z,ue-Re))):(G.sortIndex=xt,e(l,G),I||w||(I=!0,Te(W))),G},t.unstable_shouldYield=ce,t.unstable_wrapCallback=function(G){var oe=y;return function(){var ue=y;y=oe;try{return G.apply(this,arguments)}finally{y=ue}}}})(Q1);H1.exports=Q1;var EC=H1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y1=pn,tr=EC;function Z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var G1=new Set,ll={};function zo(t,e){Ra(t,e),Ra(t+"Capture",e)}function Ra(t,e){for(ll[t]=e,t=0;t<e.length;t++)G1.add(e[t])}var Fi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pm=Object.prototype.hasOwnProperty,OC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Sw={},Iw={};function kC(t){return Pm.call(Iw,t)?!0:Pm.call(Sw,t)?!1:OC.test(t)?Iw[t]=!0:(Sw[t]=!0,!1)}function DC(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function xC(t,e,n,r){if(e===null||typeof e>"u"||DC(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function bn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var en={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){en[t]=new bn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];en[e]=new bn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){en[t]=new bn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){en[t]=new bn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){en[t]=new bn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){en[t]=new bn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){en[t]=new bn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){en[t]=new bn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){en[t]=new bn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ov=/[\-:]([a-z])/g;function kv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ov,kv);en[e]=new bn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ov,kv);en[e]=new bn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ov,kv);en[e]=new bn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){en[t]=new bn(t,1,!1,t.toLowerCase(),null,!1,!1)});en.xlinkHref=new bn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){en[t]=new bn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Dv(t,e,n,r){var i=en.hasOwnProperty(e)?en[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(xC(e,n,i,r)&&(n=null),r||i===null?kC(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Qi=Y1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,zc=Symbol.for("react.element"),ua=Symbol.for("react.portal"),la=Symbol.for("react.fragment"),xv=Symbol.for("react.strict_mode"),Rm=Symbol.for("react.profiler"),J1=Symbol.for("react.provider"),X1=Symbol.for("react.context"),Cv=Symbol.for("react.forward_ref"),Tm=Symbol.for("react.suspense"),Mm=Symbol.for("react.suspense_list"),Av=Symbol.for("react.memo"),us=Symbol.for("react.lazy"),Z1=Symbol.for("react.offscreen"),Ew=Symbol.iterator;function Du(t){return t===null||typeof t!="object"?null:(t=Ew&&t[Ew]||t["@@iterator"],typeof t=="function"?t:null)}var Et=Object.assign,Dp;function Lu(t){if(Dp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Dp=e&&e[1]||""}return`
`+Dp+t}var xp=!1;function Cp(t,e){if(!t||xp)return"";xp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var r=f}Reflect.construct(t,[],e)}else{try{e.call()}catch(f){r=f}t.call(e.prototype)}else{try{throw Error()}catch(f){r=f}t()}}catch(f){if(f&&r&&typeof f.stack=="string"){for(var i=f.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{xp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Lu(t):""}function CC(t){switch(t.tag){case 5:return Lu(t.type);case 16:return Lu("Lazy");case 13:return Lu("Suspense");case 19:return Lu("SuspenseList");case 0:case 2:case 15:return t=Cp(t.type,!1),t;case 11:return t=Cp(t.type.render,!1),t;case 1:return t=Cp(t.type,!0),t;default:return""}}function Nm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case la:return"Fragment";case ua:return"Portal";case Rm:return"Profiler";case xv:return"StrictMode";case Tm:return"Suspense";case Mm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case X1:return(t.displayName||"Context")+".Consumer";case J1:return(t._context.displayName||"Context")+".Provider";case Cv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Av:return e=t.displayName||null,e!==null?e:Nm(t.type)||"Memo";case us:e=t._payload,t=t._init;try{return Nm(t(e))}catch{}}return null}function AC(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Nm(e);case 8:return e===xv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ps(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function eS(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function PC(t){var e=eS(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Vc(t){t._valueTracker||(t._valueTracker=PC(t))}function tS(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=eS(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Uf(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Bm(t,e){var n=e.checked;return Et({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Ow(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ps(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function nS(t,e){e=e.checked,e!=null&&Dv(t,"checked",e,!1)}function Fm(t,e){nS(t,e);var n=Ps(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Lm(t,e.type,n):e.hasOwnProperty("defaultValue")&&Lm(t,e.type,Ps(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function kw(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Lm(t,e,n){(e!=="number"||Uf(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var $u=Array.isArray;function ba(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ps(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function $m(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Z(91));return Et({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Dw(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Z(92));if($u(n)){if(1<n.length)throw Error(Z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ps(n)}}function rS(t,e){var n=Ps(e.value),r=Ps(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function xw(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function iS(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function jm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?iS(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Kc,sS=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Kc=Kc||document.createElement("div"),Kc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Kc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function cl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Wu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},RC=["Webkit","ms","Moz","O"];Object.keys(Wu).forEach(function(t){RC.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Wu[e]=Wu[t]})});function oS(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Wu.hasOwnProperty(t)&&Wu[t]?(""+e).trim():e+"px"}function aS(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=oS(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var TC=Et({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Um(t,e){if(e){if(TC[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Z(62))}}function zm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vm=null;function Pv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Km=null,Sa=null,Ia=null;function Cw(t){if(t=Wl(t)){if(typeof Km!="function")throw Error(Z(280));var e=t.stateNode;e&&(e=lh(e),Km(t.stateNode,t.type,e))}}function uS(t){Sa?Ia?Ia.push(t):Ia=[t]:Sa=t}function lS(){if(Sa){var t=Sa,e=Ia;if(Ia=Sa=null,Cw(t),e)for(t=0;t<e.length;t++)Cw(e[t])}}function cS(t,e){return t(e)}function fS(){}var Ap=!1;function dS(t,e,n){if(Ap)return t(e,n);Ap=!0;try{return cS(t,e,n)}finally{Ap=!1,(Sa!==null||Ia!==null)&&(fS(),lS())}}function fl(t,e){var n=t.stateNode;if(n===null)return null;var r=lh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Z(231,e,typeof n));return n}var Wm=!1;if(Fi)try{var xu={};Object.defineProperty(xu,"passive",{get:function(){Wm=!0}}),window.addEventListener("test",xu,xu),window.removeEventListener("test",xu,xu)}catch{Wm=!1}function MC(t,e,n,r,i,s,o,a,l){var f=Array.prototype.slice.call(arguments,3);try{e.apply(n,f)}catch(h){this.onError(h)}}var qu=!1,zf=null,Vf=!1,qm=null,NC={onError:function(t){qu=!0,zf=t}};function BC(t,e,n,r,i,s,o,a,l){qu=!1,zf=null,MC.apply(NC,arguments)}function FC(t,e,n,r,i,s,o,a,l){if(BC.apply(this,arguments),qu){if(qu){var f=zf;qu=!1,zf=null}else throw Error(Z(198));Vf||(Vf=!0,qm=f)}}function Vo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function hS(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Aw(t){if(Vo(t)!==t)throw Error(Z(188))}function LC(t){var e=t.alternate;if(!e){if(e=Vo(t),e===null)throw Error(Z(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Aw(i),t;if(s===r)return Aw(i),e;s=s.sibling}throw Error(Z(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Z(189))}}if(n.alternate!==r)throw Error(Z(190))}if(n.tag!==3)throw Error(Z(188));return n.stateNode.current===n?t:e}function pS(t){return t=LC(t),t!==null?mS(t):null}function mS(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=mS(t);if(e!==null)return e;t=t.sibling}return null}var yS=tr.unstable_scheduleCallback,Pw=tr.unstable_cancelCallback,$C=tr.unstable_shouldYield,jC=tr.unstable_requestPaint,Tt=tr.unstable_now,UC=tr.unstable_getCurrentPriorityLevel,Rv=tr.unstable_ImmediatePriority,vS=tr.unstable_UserBlockingPriority,Kf=tr.unstable_NormalPriority,zC=tr.unstable_LowPriority,gS=tr.unstable_IdlePriority,sh=null,ui=null;function VC(t){if(ui&&typeof ui.onCommitFiberRoot=="function")try{ui.onCommitFiberRoot(sh,t,void 0,(t.current.flags&128)===128)}catch{}}var Pr=Math.clz32?Math.clz32:qC,KC=Math.log,WC=Math.LN2;function qC(t){return t>>>=0,t===0?32:31-(KC(t)/WC|0)|0}var Wc=64,qc=4194304;function ju(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Wf(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=ju(a):(s&=o,s!==0&&(r=ju(s)))}else o=n&~i,o!==0?r=ju(o):s!==0&&(r=ju(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Pr(e),i=1<<n,r|=t[n],e&=~i;return r}function HC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function QC(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Pr(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=HC(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Hm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function wS(){var t=Wc;return Wc<<=1,!(Wc&4194240)&&(Wc=64),t}function Pp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Vl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Pr(e),t[e]=n}function YC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Pr(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Tv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Pr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ge=0;function _S(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var bS,Mv,SS,IS,ES,Qm=!1,Hc=[],ws=null,_s=null,bs=null,dl=new Map,hl=new Map,hs=[],GC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rw(t,e){switch(t){case"focusin":case"focusout":ws=null;break;case"dragenter":case"dragleave":_s=null;break;case"mouseover":case"mouseout":bs=null;break;case"pointerover":case"pointerout":dl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":hl.delete(e.pointerId)}}function Cu(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Wl(e),e!==null&&Mv(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function JC(t,e,n,r,i){switch(e){case"focusin":return ws=Cu(ws,t,e,n,r,i),!0;case"dragenter":return _s=Cu(_s,t,e,n,r,i),!0;case"mouseover":return bs=Cu(bs,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return dl.set(s,Cu(dl.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,hl.set(s,Cu(hl.get(s)||null,t,e,n,r,i)),!0}return!1}function OS(t){var e=po(t.target);if(e!==null){var n=Vo(e);if(n!==null){if(e=n.tag,e===13){if(e=hS(n),e!==null){t.blockedOn=e,ES(t.priority,function(){SS(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function vf(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ym(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Vm=r,n.target.dispatchEvent(r),Vm=null}else return e=Wl(n),e!==null&&Mv(e),t.blockedOn=n,!1;e.shift()}return!0}function Tw(t,e,n){vf(t)&&n.delete(e)}function XC(){Qm=!1,ws!==null&&vf(ws)&&(ws=null),_s!==null&&vf(_s)&&(_s=null),bs!==null&&vf(bs)&&(bs=null),dl.forEach(Tw),hl.forEach(Tw)}function Au(t,e){t.blockedOn===e&&(t.blockedOn=null,Qm||(Qm=!0,tr.unstable_scheduleCallback(tr.unstable_NormalPriority,XC)))}function pl(t){function e(i){return Au(i,t)}if(0<Hc.length){Au(Hc[0],t);for(var n=1;n<Hc.length;n++){var r=Hc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ws!==null&&Au(ws,t),_s!==null&&Au(_s,t),bs!==null&&Au(bs,t),dl.forEach(e),hl.forEach(e),n=0;n<hs.length;n++)r=hs[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<hs.length&&(n=hs[0],n.blockedOn===null);)OS(n),n.blockedOn===null&&hs.shift()}var Ea=Qi.ReactCurrentBatchConfig,qf=!0;function ZC(t,e,n,r){var i=Ge,s=Ea.transition;Ea.transition=null;try{Ge=1,Nv(t,e,n,r)}finally{Ge=i,Ea.transition=s}}function eA(t,e,n,r){var i=Ge,s=Ea.transition;Ea.transition=null;try{Ge=4,Nv(t,e,n,r)}finally{Ge=i,Ea.transition=s}}function Nv(t,e,n,r){if(qf){var i=Ym(t,e,n,r);if(i===null)Up(t,e,r,Hf,n),Rw(t,r);else if(JC(i,t,e,n,r))r.stopPropagation();else if(Rw(t,r),e&4&&-1<GC.indexOf(t)){for(;i!==null;){var s=Wl(i);if(s!==null&&bS(s),s=Ym(t,e,n,r),s===null&&Up(t,e,r,Hf,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Up(t,e,r,null,n)}}var Hf=null;function Ym(t,e,n,r){if(Hf=null,t=Pv(r),t=po(t),t!==null)if(e=Vo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=hS(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Hf=t,null}function kS(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(UC()){case Rv:return 1;case vS:return 4;case Kf:case zC:return 16;case gS:return 536870912;default:return 16}default:return 16}}var ms=null,Bv=null,gf=null;function DS(){if(gf)return gf;var t,e=Bv,n=e.length,r,i="value"in ms?ms.value:ms.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return gf=i.slice(t,1<r?1-r:void 0)}function wf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Qc(){return!0}function Mw(){return!1}function or(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Qc:Mw,this.isPropagationStopped=Mw,this}return Et(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Qc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Qc)},persist:function(){},isPersistent:Qc}),e}var nu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fv=or(nu),Kl=Et({},nu,{view:0,detail:0}),tA=or(Kl),Rp,Tp,Pu,oh=Et({},Kl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Lv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Pu&&(Pu&&t.type==="mousemove"?(Rp=t.screenX-Pu.screenX,Tp=t.screenY-Pu.screenY):Tp=Rp=0,Pu=t),Rp)},movementY:function(t){return"movementY"in t?t.movementY:Tp}}),Nw=or(oh),nA=Et({},oh,{dataTransfer:0}),rA=or(nA),iA=Et({},Kl,{relatedTarget:0}),Mp=or(iA),sA=Et({},nu,{animationName:0,elapsedTime:0,pseudoElement:0}),oA=or(sA),aA=Et({},nu,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),uA=or(aA),lA=Et({},nu,{data:0}),Bw=or(lA),cA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hA(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=dA[t])?!!e[t]:!1}function Lv(){return hA}var pA=Et({},Kl,{key:function(t){if(t.key){var e=cA[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=wf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?fA[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Lv,charCode:function(t){return t.type==="keypress"?wf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?wf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),mA=or(pA),yA=Et({},oh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fw=or(yA),vA=Et({},Kl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Lv}),gA=or(vA),wA=Et({},nu,{propertyName:0,elapsedTime:0,pseudoElement:0}),_A=or(wA),bA=Et({},oh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),SA=or(bA),IA=[9,13,27,32],$v=Fi&&"CompositionEvent"in window,Hu=null;Fi&&"documentMode"in document&&(Hu=document.documentMode);var EA=Fi&&"TextEvent"in window&&!Hu,xS=Fi&&(!$v||Hu&&8<Hu&&11>=Hu),Lw=String.fromCharCode(32),$w=!1;function CS(t,e){switch(t){case"keyup":return IA.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function AS(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ca=!1;function OA(t,e){switch(t){case"compositionend":return AS(e);case"keypress":return e.which!==32?null:($w=!0,Lw);case"textInput":return t=e.data,t===Lw&&$w?null:t;default:return null}}function kA(t,e){if(ca)return t==="compositionend"||!$v&&CS(t,e)?(t=DS(),gf=Bv=ms=null,ca=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return xS&&e.locale!=="ko"?null:e.data;default:return null}}var DA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!DA[t.type]:e==="textarea"}function PS(t,e,n,r){uS(r),e=Qf(e,"onChange"),0<e.length&&(n=new Fv("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Qu=null,ml=null;function xA(t){zS(t,0)}function ah(t){var e=ha(t);if(tS(e))return t}function CA(t,e){if(t==="change")return e}var RS=!1;if(Fi){var Np;if(Fi){var Bp="oninput"in document;if(!Bp){var Uw=document.createElement("div");Uw.setAttribute("oninput","return;"),Bp=typeof Uw.oninput=="function"}Np=Bp}else Np=!1;RS=Np&&(!document.documentMode||9<document.documentMode)}function zw(){Qu&&(Qu.detachEvent("onpropertychange",TS),ml=Qu=null)}function TS(t){if(t.propertyName==="value"&&ah(ml)){var e=[];PS(e,ml,t,Pv(t)),dS(xA,e)}}function AA(t,e,n){t==="focusin"?(zw(),Qu=e,ml=n,Qu.attachEvent("onpropertychange",TS)):t==="focusout"&&zw()}function PA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ah(ml)}function RA(t,e){if(t==="click")return ah(e)}function TA(t,e){if(t==="input"||t==="change")return ah(e)}function MA(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Nr=typeof Object.is=="function"?Object.is:MA;function yl(t,e){if(Nr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Pm.call(e,i)||!Nr(t[i],e[i]))return!1}return!0}function Vw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Kw(t,e){var n=Vw(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Vw(n)}}function MS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?MS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function NS(){for(var t=window,e=Uf();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Uf(t.document)}return e}function jv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function NA(t){var e=NS(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&MS(n.ownerDocument.documentElement,n)){if(r!==null&&jv(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Kw(n,s);var o=Kw(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var BA=Fi&&"documentMode"in document&&11>=document.documentMode,fa=null,Gm=null,Yu=null,Jm=!1;function Ww(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Jm||fa==null||fa!==Uf(r)||(r=fa,"selectionStart"in r&&jv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Yu&&yl(Yu,r)||(Yu=r,r=Qf(Gm,"onSelect"),0<r.length&&(e=new Fv("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=fa)))}function Yc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var da={animationend:Yc("Animation","AnimationEnd"),animationiteration:Yc("Animation","AnimationIteration"),animationstart:Yc("Animation","AnimationStart"),transitionend:Yc("Transition","TransitionEnd")},Fp={},BS={};Fi&&(BS=document.createElement("div").style,"AnimationEvent"in window||(delete da.animationend.animation,delete da.animationiteration.animation,delete da.animationstart.animation),"TransitionEvent"in window||delete da.transitionend.transition);function uh(t){if(Fp[t])return Fp[t];if(!da[t])return t;var e=da[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in BS)return Fp[t]=e[n];return t}var FS=uh("animationend"),LS=uh("animationiteration"),$S=uh("animationstart"),jS=uh("transitionend"),US=new Map,qw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Us(t,e){US.set(t,e),zo(e,[t])}for(var Lp=0;Lp<qw.length;Lp++){var $p=qw[Lp],FA=$p.toLowerCase(),LA=$p[0].toUpperCase()+$p.slice(1);Us(FA,"on"+LA)}Us(FS,"onAnimationEnd");Us(LS,"onAnimationIteration");Us($S,"onAnimationStart");Us("dblclick","onDoubleClick");Us("focusin","onFocus");Us("focusout","onBlur");Us(jS,"onTransitionEnd");Ra("onMouseEnter",["mouseout","mouseover"]);Ra("onMouseLeave",["mouseout","mouseover"]);Ra("onPointerEnter",["pointerout","pointerover"]);Ra("onPointerLeave",["pointerout","pointerover"]);zo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));zo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));zo("onBeforeInput",["compositionend","keypress","textInput","paste"]);zo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));zo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));zo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Uu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$A=new Set("cancel close invalid load scroll toggle".split(" ").concat(Uu));function Hw(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,FC(r,e,void 0,t),t.currentTarget=null}function zS(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,f=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Hw(i,a,f),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,f=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Hw(i,a,f),s=l}}}if(Vf)throw t=qm,Vf=!1,qm=null,t}function ht(t,e){var n=e[ny];n===void 0&&(n=e[ny]=new Set);var r=t+"__bubble";n.has(r)||(VS(e,t,2,!1),n.add(r))}function jp(t,e,n){var r=0;e&&(r|=4),VS(n,t,r,e)}var Gc="_reactListening"+Math.random().toString(36).slice(2);function vl(t){if(!t[Gc]){t[Gc]=!0,G1.forEach(function(n){n!=="selectionchange"&&($A.has(n)||jp(n,!1,t),jp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Gc]||(e[Gc]=!0,jp("selectionchange",!1,e))}}function VS(t,e,n,r){switch(kS(e)){case 1:var i=ZC;break;case 4:i=eA;break;default:i=Nv}n=i.bind(null,e,n,t),i=void 0,!Wm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Up(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=po(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}dS(function(){var f=s,h=Pv(n),p=[];e:{var y=US.get(t);if(y!==void 0){var w=Fv,I=t;switch(t){case"keypress":if(wf(n)===0)break e;case"keydown":case"keyup":w=mA;break;case"focusin":I="focus",w=Mp;break;case"focusout":I="blur",w=Mp;break;case"beforeblur":case"afterblur":w=Mp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=Nw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=rA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=gA;break;case FS:case LS:case $S:w=oA;break;case jS:w=_A;break;case"scroll":w=tA;break;case"wheel":w=SA;break;case"copy":case"cut":case"paste":w=uA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=Fw}var E=(e&4)!==0,$=!E&&t==="scroll",S=E?y!==null?y+"Capture":null:y;E=[];for(var _=f,k;_!==null;){k=_;var z=k.stateNode;if(k.tag===5&&z!==null&&(k=z,S!==null&&(z=fl(_,S),z!=null&&E.push(gl(_,z,k)))),$)break;_=_.return}0<E.length&&(y=new w(y,I,null,n,h),p.push({event:y,listeners:E}))}}if(!(e&7)){e:{if(y=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",y&&n!==Vm&&(I=n.relatedTarget||n.fromElement)&&(po(I)||I[Li]))break e;if((w||y)&&(y=h.window===h?h:(y=h.ownerDocument)?y.defaultView||y.parentWindow:window,w?(I=n.relatedTarget||n.toElement,w=f,I=I?po(I):null,I!==null&&($=Vo(I),I!==$||I.tag!==5&&I.tag!==6)&&(I=null)):(w=null,I=f),w!==I)){if(E=Nw,z="onMouseLeave",S="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(E=Fw,z="onPointerLeave",S="onPointerEnter",_="pointer"),$=w==null?y:ha(w),k=I==null?y:ha(I),y=new E(z,_+"leave",w,n,h),y.target=$,y.relatedTarget=k,z=null,po(h)===f&&(E=new E(S,_+"enter",I,n,h),E.target=k,E.relatedTarget=$,z=E),$=z,w&&I)t:{for(E=w,S=I,_=0,k=E;k;k=Zo(k))_++;for(k=0,z=S;z;z=Zo(z))k++;for(;0<_-k;)E=Zo(E),_--;for(;0<k-_;)S=Zo(S),k--;for(;_--;){if(E===S||S!==null&&E===S.alternate)break t;E=Zo(E),S=Zo(S)}E=null}else E=null;w!==null&&Qw(p,y,w,E,!1),I!==null&&$!==null&&Qw(p,$,I,E,!0)}}e:{if(y=f?ha(f):window,w=y.nodeName&&y.nodeName.toLowerCase(),w==="select"||w==="input"&&y.type==="file")var W=CA;else if(jw(y))if(RS)W=TA;else{W=PA;var Q=AA}else(w=y.nodeName)&&w.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(W=RA);if(W&&(W=W(t,f))){PS(p,W,n,h);break e}Q&&Q(t,y,f),t==="focusout"&&(Q=y._wrapperState)&&Q.controlled&&y.type==="number"&&Lm(y,"number",y.value)}switch(Q=f?ha(f):window,t){case"focusin":(jw(Q)||Q.contentEditable==="true")&&(fa=Q,Gm=f,Yu=null);break;case"focusout":Yu=Gm=fa=null;break;case"mousedown":Jm=!0;break;case"contextmenu":case"mouseup":case"dragend":Jm=!1,Ww(p,n,h);break;case"selectionchange":if(BA)break;case"keydown":case"keyup":Ww(p,n,h)}var H;if($v)e:{switch(t){case"compositionstart":var X="onCompositionStart";break e;case"compositionend":X="onCompositionEnd";break e;case"compositionupdate":X="onCompositionUpdate";break e}X=void 0}else ca?CS(t,n)&&(X="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(X="onCompositionStart");X&&(xS&&n.locale!=="ko"&&(ca||X!=="onCompositionStart"?X==="onCompositionEnd"&&ca&&(H=DS()):(ms=h,Bv="value"in ms?ms.value:ms.textContent,ca=!0)),Q=Qf(f,X),0<Q.length&&(X=new Bw(X,t,null,n,h),p.push({event:X,listeners:Q}),H?X.data=H:(H=AS(n),H!==null&&(X.data=H)))),(H=EA?OA(t,n):kA(t,n))&&(f=Qf(f,"onBeforeInput"),0<f.length&&(h=new Bw("onBeforeInput","beforeinput",null,n,h),p.push({event:h,listeners:f}),h.data=H))}zS(p,e)})}function gl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Qf(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=fl(t,n),s!=null&&r.unshift(gl(t,s,i)),s=fl(t,e),s!=null&&r.push(gl(t,s,i))),t=t.return}return r}function Zo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Qw(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,f=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&f!==null&&(a=f,i?(l=fl(n,s),l!=null&&o.unshift(gl(n,l,a))):i||(l=fl(n,s),l!=null&&o.push(gl(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var jA=/\r\n?/g,UA=/\u0000|\uFFFD/g;function Yw(t){return(typeof t=="string"?t:""+t).replace(jA,`
`).replace(UA,"")}function Jc(t,e,n){if(e=Yw(e),Yw(t)!==e&&n)throw Error(Z(425))}function Yf(){}var Xm=null,Zm=null;function ey(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ty=typeof setTimeout=="function"?setTimeout:void 0,zA=typeof clearTimeout=="function"?clearTimeout:void 0,Gw=typeof Promise=="function"?Promise:void 0,VA=typeof queueMicrotask=="function"?queueMicrotask:typeof Gw<"u"?function(t){return Gw.resolve(null).then(t).catch(KA)}:ty;function KA(t){setTimeout(function(){throw t})}function zp(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),pl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);pl(e)}function Ss(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Jw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ru=Math.random().toString(36).slice(2),Xr="__reactFiber$"+ru,wl="__reactProps$"+ru,Li="__reactContainer$"+ru,ny="__reactEvents$"+ru,WA="__reactListeners$"+ru,qA="__reactHandles$"+ru;function po(t){var e=t[Xr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Li]||n[Xr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Jw(t);t!==null;){if(n=t[Xr])return n;t=Jw(t)}return e}t=n,n=t.parentNode}return null}function Wl(t){return t=t[Xr]||t[Li],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ha(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Z(33))}function lh(t){return t[wl]||null}var ry=[],pa=-1;function zs(t){return{current:t}}function mt(t){0>pa||(t.current=ry[pa],ry[pa]=null,pa--)}function ut(t,e){pa++,ry[pa]=t.current,t.current=e}var Rs={},ln=zs(Rs),An=zs(!1),Po=Rs;function Ta(t,e){var n=t.type.contextTypes;if(!n)return Rs;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Pn(t){return t=t.childContextTypes,t!=null}function Gf(){mt(An),mt(ln)}function Xw(t,e,n){if(ln.current!==Rs)throw Error(Z(168));ut(ln,e),ut(An,n)}function KS(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Z(108,AC(t)||"Unknown",i));return Et({},n,r)}function Jf(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Rs,Po=ln.current,ut(ln,t),ut(An,An.current),!0}function Zw(t,e,n){var r=t.stateNode;if(!r)throw Error(Z(169));n?(t=KS(t,e,Po),r.__reactInternalMemoizedMergedChildContext=t,mt(An),mt(ln),ut(ln,t)):mt(An),ut(An,n)}var Ei=null,ch=!1,Vp=!1;function WS(t){Ei===null?Ei=[t]:Ei.push(t)}function HA(t){ch=!0,WS(t)}function Vs(){if(!Vp&&Ei!==null){Vp=!0;var t=0,e=Ge;try{var n=Ei;for(Ge=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ei=null,ch=!1}catch(i){throw Ei!==null&&(Ei=Ei.slice(t+1)),yS(Rv,Vs),i}finally{Ge=e,Vp=!1}}return null}var ma=[],ya=0,Xf=null,Zf=0,hr=[],pr=0,Ro=null,xi=1,Ci="";function co(t,e){ma[ya++]=Zf,ma[ya++]=Xf,Xf=t,Zf=e}function qS(t,e,n){hr[pr++]=xi,hr[pr++]=Ci,hr[pr++]=Ro,Ro=t;var r=xi;t=Ci;var i=32-Pr(r)-1;r&=~(1<<i),n+=1;var s=32-Pr(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,xi=1<<32-Pr(e)+i|n<<i|r,Ci=s+t}else xi=1<<s|n<<i|r,Ci=t}function Uv(t){t.return!==null&&(co(t,1),qS(t,1,0))}function zv(t){for(;t===Xf;)Xf=ma[--ya],ma[ya]=null,Zf=ma[--ya],ma[ya]=null;for(;t===Ro;)Ro=hr[--pr],hr[pr]=null,Ci=hr[--pr],hr[pr]=null,xi=hr[--pr],hr[pr]=null}var Zn=null,Jn=null,gt=!1,xr=null;function HS(t,e){var n=vr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function e_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Zn=t,Jn=Ss(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Zn=t,Jn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ro!==null?{id:xi,overflow:Ci}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=vr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Zn=t,Jn=null,!0):!1;default:return!1}}function iy(t){return(t.mode&1)!==0&&(t.flags&128)===0}function sy(t){if(gt){var e=Jn;if(e){var n=e;if(!e_(t,e)){if(iy(t))throw Error(Z(418));e=Ss(n.nextSibling);var r=Zn;e&&e_(t,e)?HS(r,n):(t.flags=t.flags&-4097|2,gt=!1,Zn=t)}}else{if(iy(t))throw Error(Z(418));t.flags=t.flags&-4097|2,gt=!1,Zn=t}}}function t_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Zn=t}function Xc(t){if(t!==Zn)return!1;if(!gt)return t_(t),gt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ey(t.type,t.memoizedProps)),e&&(e=Jn)){if(iy(t))throw QS(),Error(Z(418));for(;e;)HS(t,e),e=Ss(e.nextSibling)}if(t_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Jn=Ss(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Jn=null}}else Jn=Zn?Ss(t.stateNode.nextSibling):null;return!0}function QS(){for(var t=Jn;t;)t=Ss(t.nextSibling)}function Ma(){Jn=Zn=null,gt=!1}function Vv(t){xr===null?xr=[t]:xr.push(t)}var QA=Qi.ReactCurrentBatchConfig;function Or(t,e){if(t&&t.defaultProps){e=Et({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var ed=zs(null),td=null,va=null,Kv=null;function Wv(){Kv=va=td=null}function qv(t){var e=ed.current;mt(ed),t._currentValue=e}function oy(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Oa(t,e){td=t,Kv=va=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Cn=!0),t.firstContext=null)}function wr(t){var e=t._currentValue;if(Kv!==t)if(t={context:t,memoizedValue:e,next:null},va===null){if(td===null)throw Error(Z(308));va=t,td.dependencies={lanes:0,firstContext:t}}else va=va.next=t;return e}var mo=null;function Hv(t){mo===null?mo=[t]:mo.push(t)}function YS(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Hv(e)):(n.next=i.next,i.next=n),e.interleaved=n,$i(t,r)}function $i(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ls=!1;function Qv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function GS(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ri(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Is(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Fe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,$i(t,n)}return i=r.interleaved,i===null?(e.next=e,Hv(r)):(e.next=i.next,i.next=e),r.interleaved=e,$i(t,n)}function _f(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Tv(t,n)}}function n_(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function nd(t,e,n,r){var i=t.updateQueue;ls=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,f=l.next;l.next=null,o===null?s=f:o.next=f,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=f:a.next=f,h.lastBaseUpdate=l))}if(s!==null){var p=i.baseState;o=0,h=f=l=null,a=s;do{var y=a.lane,w=a.eventTime;if((r&y)===y){h!==null&&(h=h.next={eventTime:w,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var I=t,E=a;switch(y=e,w=n,E.tag){case 1:if(I=E.payload,typeof I=="function"){p=I.call(w,p,y);break e}p=I;break e;case 3:I.flags=I.flags&-65537|128;case 0:if(I=E.payload,y=typeof I=="function"?I.call(w,p,y):I,y==null)break e;p=Et({},p,y);break e;case 2:ls=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,y=i.effects,y===null?i.effects=[a]:y.push(a))}else w={eventTime:w,lane:y,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(f=h=w,l=p):h=h.next=w,o|=y;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;y=a,a=y.next,y.next=null,i.lastBaseUpdate=y,i.shared.pending=null}}while(1);if(h===null&&(l=p),i.baseState=l,i.firstBaseUpdate=f,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Mo|=o,t.lanes=o,t.memoizedState=p}}function r_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Z(191,i));i.call(r)}}}var JS=new Y1.Component().refs;function ay(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Et({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var fh={isMounted:function(t){return(t=t._reactInternals)?Vo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=wn(),i=Os(t),s=Ri(r,i);s.payload=e,n!=null&&(s.callback=n),e=Is(t,s,i),e!==null&&(Rr(e,t,i,r),_f(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=wn(),i=Os(t),s=Ri(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Is(t,s,i),e!==null&&(Rr(e,t,i,r),_f(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=wn(),r=Os(t),i=Ri(n,r);i.tag=2,e!=null&&(i.callback=e),e=Is(t,i,r),e!==null&&(Rr(e,t,r,n),_f(e,t,r))}};function i_(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!yl(n,r)||!yl(i,s):!0}function XS(t,e,n){var r=!1,i=Rs,s=e.contextType;return typeof s=="object"&&s!==null?s=wr(s):(i=Pn(e)?Po:ln.current,r=e.contextTypes,s=(r=r!=null)?Ta(t,i):Rs),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=fh,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function s_(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&fh.enqueueReplaceState(e,e.state,null)}function uy(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=JS,Qv(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=wr(s):(s=Pn(e)?Po:ln.current,i.context=Ta(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(ay(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&fh.enqueueReplaceState(i,i.state,null),nd(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Ru(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Z(309));var r=n.stateNode}if(!r)throw Error(Z(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===JS&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Z(284));if(!n._owner)throw Error(Z(290,t))}return t}function Zc(t,e){throw t=Object.prototype.toString.call(e),Error(Z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function o_(t){var e=t._init;return e(t._payload)}function ZS(t){function e(S,_){if(t){var k=S.deletions;k===null?(S.deletions=[_],S.flags|=16):k.push(_)}}function n(S,_){if(!t)return null;for(;_!==null;)e(S,_),_=_.sibling;return null}function r(S,_){for(S=new Map;_!==null;)_.key!==null?S.set(_.key,_):S.set(_.index,_),_=_.sibling;return S}function i(S,_){return S=ks(S,_),S.index=0,S.sibling=null,S}function s(S,_,k){return S.index=k,t?(k=S.alternate,k!==null?(k=k.index,k<_?(S.flags|=2,_):k):(S.flags|=2,_)):(S.flags|=1048576,_)}function o(S){return t&&S.alternate===null&&(S.flags|=2),S}function a(S,_,k,z){return _===null||_.tag!==6?(_=Gp(k,S.mode,z),_.return=S,_):(_=i(_,k),_.return=S,_)}function l(S,_,k,z){var W=k.type;return W===la?h(S,_,k.props.children,z,k.key):_!==null&&(_.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===us&&o_(W)===_.type)?(z=i(_,k.props),z.ref=Ru(S,_,k),z.return=S,z):(z=kf(k.type,k.key,k.props,null,S.mode,z),z.ref=Ru(S,_,k),z.return=S,z)}function f(S,_,k,z){return _===null||_.tag!==4||_.stateNode.containerInfo!==k.containerInfo||_.stateNode.implementation!==k.implementation?(_=Jp(k,S.mode,z),_.return=S,_):(_=i(_,k.children||[]),_.return=S,_)}function h(S,_,k,z,W){return _===null||_.tag!==7?(_=Oo(k,S.mode,z,W),_.return=S,_):(_=i(_,k),_.return=S,_)}function p(S,_,k){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Gp(""+_,S.mode,k),_.return=S,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case zc:return k=kf(_.type,_.key,_.props,null,S.mode,k),k.ref=Ru(S,null,_),k.return=S,k;case ua:return _=Jp(_,S.mode,k),_.return=S,_;case us:var z=_._init;return p(S,z(_._payload),k)}if($u(_)||Du(_))return _=Oo(_,S.mode,k,null),_.return=S,_;Zc(S,_)}return null}function y(S,_,k,z){var W=_!==null?_.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return W!==null?null:a(S,_,""+k,z);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case zc:return k.key===W?l(S,_,k,z):null;case ua:return k.key===W?f(S,_,k,z):null;case us:return W=k._init,y(S,_,W(k._payload),z)}if($u(k)||Du(k))return W!==null?null:h(S,_,k,z,null);Zc(S,k)}return null}function w(S,_,k,z,W){if(typeof z=="string"&&z!==""||typeof z=="number")return S=S.get(k)||null,a(_,S,""+z,W);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case zc:return S=S.get(z.key===null?k:z.key)||null,l(_,S,z,W);case ua:return S=S.get(z.key===null?k:z.key)||null,f(_,S,z,W);case us:var Q=z._init;return w(S,_,k,Q(z._payload),W)}if($u(z)||Du(z))return S=S.get(k)||null,h(_,S,z,W,null);Zc(_,z)}return null}function I(S,_,k,z){for(var W=null,Q=null,H=_,X=_=0,U=null;H!==null&&X<k.length;X++){H.index>X?(U=H,H=null):U=H.sibling;var ee=y(S,H,k[X],z);if(ee===null){H===null&&(H=U);break}t&&H&&ee.alternate===null&&e(S,H),_=s(ee,_,X),Q===null?W=ee:Q.sibling=ee,Q=ee,H=U}if(X===k.length)return n(S,H),gt&&co(S,X),W;if(H===null){for(;X<k.length;X++)H=p(S,k[X],z),H!==null&&(_=s(H,_,X),Q===null?W=H:Q.sibling=H,Q=H);return gt&&co(S,X),W}for(H=r(S,H);X<k.length;X++)U=w(H,S,X,k[X],z),U!==null&&(t&&U.alternate!==null&&H.delete(U.key===null?X:U.key),_=s(U,_,X),Q===null?W=U:Q.sibling=U,Q=U);return t&&H.forEach(function(ce){return e(S,ce)}),gt&&co(S,X),W}function E(S,_,k,z){var W=Du(k);if(typeof W!="function")throw Error(Z(150));if(k=W.call(k),k==null)throw Error(Z(151));for(var Q=W=null,H=_,X=_=0,U=null,ee=k.next();H!==null&&!ee.done;X++,ee=k.next()){H.index>X?(U=H,H=null):U=H.sibling;var ce=y(S,H,ee.value,z);if(ce===null){H===null&&(H=U);break}t&&H&&ce.alternate===null&&e(S,H),_=s(ce,_,X),Q===null?W=ce:Q.sibling=ce,Q=ce,H=U}if(ee.done)return n(S,H),gt&&co(S,X),W;if(H===null){for(;!ee.done;X++,ee=k.next())ee=p(S,ee.value,z),ee!==null&&(_=s(ee,_,X),Q===null?W=ee:Q.sibling=ee,Q=ee);return gt&&co(S,X),W}for(H=r(S,H);!ee.done;X++,ee=k.next())ee=w(H,S,X,ee.value,z),ee!==null&&(t&&ee.alternate!==null&&H.delete(ee.key===null?X:ee.key),_=s(ee,_,X),Q===null?W=ee:Q.sibling=ee,Q=ee);return t&&H.forEach(function(de){return e(S,de)}),gt&&co(S,X),W}function $(S,_,k,z){if(typeof k=="object"&&k!==null&&k.type===la&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case zc:e:{for(var W=k.key,Q=_;Q!==null;){if(Q.key===W){if(W=k.type,W===la){if(Q.tag===7){n(S,Q.sibling),_=i(Q,k.props.children),_.return=S,S=_;break e}}else if(Q.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===us&&o_(W)===Q.type){n(S,Q.sibling),_=i(Q,k.props),_.ref=Ru(S,Q,k),_.return=S,S=_;break e}n(S,Q);break}else e(S,Q);Q=Q.sibling}k.type===la?(_=Oo(k.props.children,S.mode,z,k.key),_.return=S,S=_):(z=kf(k.type,k.key,k.props,null,S.mode,z),z.ref=Ru(S,_,k),z.return=S,S=z)}return o(S);case ua:e:{for(Q=k.key;_!==null;){if(_.key===Q)if(_.tag===4&&_.stateNode.containerInfo===k.containerInfo&&_.stateNode.implementation===k.implementation){n(S,_.sibling),_=i(_,k.children||[]),_.return=S,S=_;break e}else{n(S,_);break}else e(S,_);_=_.sibling}_=Jp(k,S.mode,z),_.return=S,S=_}return o(S);case us:return Q=k._init,$(S,_,Q(k._payload),z)}if($u(k))return I(S,_,k,z);if(Du(k))return E(S,_,k,z);Zc(S,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,_!==null&&_.tag===6?(n(S,_.sibling),_=i(_,k),_.return=S,S=_):(n(S,_),_=Gp(k,S.mode,z),_.return=S,S=_),o(S)):n(S,_)}return $}var Na=ZS(!0),eI=ZS(!1),ql={},li=zs(ql),_l=zs(ql),bl=zs(ql);function yo(t){if(t===ql)throw Error(Z(174));return t}function Yv(t,e){switch(ut(bl,e),ut(_l,t),ut(li,ql),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:jm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=jm(e,t)}mt(li),ut(li,e)}function Ba(){mt(li),mt(_l),mt(bl)}function tI(t){yo(bl.current);var e=yo(li.current),n=jm(e,t.type);e!==n&&(ut(_l,t),ut(li,n))}function Gv(t){_l.current===t&&(mt(li),mt(_l))}var bt=zs(0);function rd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Kp=[];function Jv(){for(var t=0;t<Kp.length;t++)Kp[t]._workInProgressVersionPrimary=null;Kp.length=0}var bf=Qi.ReactCurrentDispatcher,Wp=Qi.ReactCurrentBatchConfig,To=0,It=null,jt=null,Ht=null,id=!1,Gu=!1,Sl=0,YA=0;function sn(){throw Error(Z(321))}function Xv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Nr(t[n],e[n]))return!1;return!0}function Zv(t,e,n,r,i,s){if(To=s,It=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,bf.current=t===null||t.memoizedState===null?ZA:eP,t=n(r,i),Gu){s=0;do{if(Gu=!1,Sl=0,25<=s)throw Error(Z(301));s+=1,Ht=jt=null,e.updateQueue=null,bf.current=tP,t=n(r,i)}while(Gu)}if(bf.current=sd,e=jt!==null&&jt.next!==null,To=0,Ht=jt=It=null,id=!1,e)throw Error(Z(300));return t}function eg(){var t=Sl!==0;return Sl=0,t}function Qr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ht===null?It.memoizedState=Ht=t:Ht=Ht.next=t,Ht}function _r(){if(jt===null){var t=It.alternate;t=t!==null?t.memoizedState:null}else t=jt.next;var e=Ht===null?It.memoizedState:Ht.next;if(e!==null)Ht=e,jt=t;else{if(t===null)throw Error(Z(310));jt=t,t={memoizedState:jt.memoizedState,baseState:jt.baseState,baseQueue:jt.baseQueue,queue:jt.queue,next:null},Ht===null?It.memoizedState=Ht=t:Ht=Ht.next=t}return Ht}function Il(t,e){return typeof e=="function"?e(t):e}function qp(t){var e=_r(),n=e.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=t;var r=jt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,f=s;do{var h=f.lane;if((To&h)===h)l!==null&&(l=l.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),r=f.hasEagerState?f.eagerState:t(r,f.action);else{var p={lane:h,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};l===null?(a=l=p,o=r):l=l.next=p,It.lanes|=h,Mo|=h}f=f.next}while(f!==null&&f!==s);l===null?o=r:l.next=a,Nr(r,e.memoizedState)||(Cn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,It.lanes|=s,Mo|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Hp(t){var e=_r(),n=e.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Nr(s,e.memoizedState)||(Cn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function nI(){}function rI(t,e){var n=It,r=_r(),i=e(),s=!Nr(r.memoizedState,i);if(s&&(r.memoizedState=i,Cn=!0),r=r.queue,tg(oI.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Ht!==null&&Ht.memoizedState.tag&1){if(n.flags|=2048,El(9,sI.bind(null,n,r,i,e),void 0,null),Qt===null)throw Error(Z(349));To&30||iI(n,e,i)}return i}function iI(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=It.updateQueue,e===null?(e={lastEffect:null,stores:null},It.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function sI(t,e,n,r){e.value=n,e.getSnapshot=r,aI(e)&&uI(t)}function oI(t,e,n){return n(function(){aI(e)&&uI(t)})}function aI(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Nr(t,n)}catch{return!0}}function uI(t){var e=$i(t,1);e!==null&&Rr(e,t,1,-1)}function a_(t){var e=Qr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Il,lastRenderedState:t},e.queue=t,t=t.dispatch=XA.bind(null,It,t),[e.memoizedState,t]}function El(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=It.updateQueue,e===null?(e={lastEffect:null,stores:null},It.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function lI(){return _r().memoizedState}function Sf(t,e,n,r){var i=Qr();It.flags|=t,i.memoizedState=El(1|e,n,void 0,r===void 0?null:r)}function dh(t,e,n,r){var i=_r();r=r===void 0?null:r;var s=void 0;if(jt!==null){var o=jt.memoizedState;if(s=o.destroy,r!==null&&Xv(r,o.deps)){i.memoizedState=El(e,n,s,r);return}}It.flags|=t,i.memoizedState=El(1|e,n,s,r)}function u_(t,e){return Sf(8390656,8,t,e)}function tg(t,e){return dh(2048,8,t,e)}function cI(t,e){return dh(4,2,t,e)}function fI(t,e){return dh(4,4,t,e)}function dI(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function hI(t,e,n){return n=n!=null?n.concat([t]):null,dh(4,4,dI.bind(null,e,t),n)}function ng(){}function pI(t,e){var n=_r();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Xv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function mI(t,e){var n=_r();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Xv(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function yI(t,e,n){return To&21?(Nr(n,e)||(n=wS(),It.lanes|=n,Mo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Cn=!0),t.memoizedState=n)}function GA(t,e){var n=Ge;Ge=n!==0&&4>n?n:4,t(!0);var r=Wp.transition;Wp.transition={};try{t(!1),e()}finally{Ge=n,Wp.transition=r}}function vI(){return _r().memoizedState}function JA(t,e,n){var r=Os(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},gI(t))wI(e,n);else if(n=YS(t,e,n,r),n!==null){var i=wn();Rr(n,t,r,i),_I(n,e,r)}}function XA(t,e,n){var r=Os(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(gI(t))wI(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Nr(a,o)){var l=e.interleaved;l===null?(i.next=i,Hv(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=YS(t,e,i,r),n!==null&&(i=wn(),Rr(n,t,r,i),_I(n,e,r))}}function gI(t){var e=t.alternate;return t===It||e!==null&&e===It}function wI(t,e){Gu=id=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function _I(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Tv(t,n)}}var sd={readContext:wr,useCallback:sn,useContext:sn,useEffect:sn,useImperativeHandle:sn,useInsertionEffect:sn,useLayoutEffect:sn,useMemo:sn,useReducer:sn,useRef:sn,useState:sn,useDebugValue:sn,useDeferredValue:sn,useTransition:sn,useMutableSource:sn,useSyncExternalStore:sn,useId:sn,unstable_isNewReconciler:!1},ZA={readContext:wr,useCallback:function(t,e){return Qr().memoizedState=[t,e===void 0?null:e],t},useContext:wr,useEffect:u_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Sf(4194308,4,dI.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Sf(4194308,4,t,e)},useInsertionEffect:function(t,e){return Sf(4,2,t,e)},useMemo:function(t,e){var n=Qr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Qr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=JA.bind(null,It,t),[r.memoizedState,t]},useRef:function(t){var e=Qr();return t={current:t},e.memoizedState=t},useState:a_,useDebugValue:ng,useDeferredValue:function(t){return Qr().memoizedState=t},useTransition:function(){var t=a_(!1),e=t[0];return t=GA.bind(null,t[1]),Qr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=It,i=Qr();if(gt){if(n===void 0)throw Error(Z(407));n=n()}else{if(n=e(),Qt===null)throw Error(Z(349));To&30||iI(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,u_(oI.bind(null,r,s,t),[t]),r.flags|=2048,El(9,sI.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Qr(),e=Qt.identifierPrefix;if(gt){var n=Ci,r=xi;n=(r&~(1<<32-Pr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Sl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=YA++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},eP={readContext:wr,useCallback:pI,useContext:wr,useEffect:tg,useImperativeHandle:hI,useInsertionEffect:cI,useLayoutEffect:fI,useMemo:mI,useReducer:qp,useRef:lI,useState:function(){return qp(Il)},useDebugValue:ng,useDeferredValue:function(t){var e=_r();return yI(e,jt.memoizedState,t)},useTransition:function(){var t=qp(Il)[0],e=_r().memoizedState;return[t,e]},useMutableSource:nI,useSyncExternalStore:rI,useId:vI,unstable_isNewReconciler:!1},tP={readContext:wr,useCallback:pI,useContext:wr,useEffect:tg,useImperativeHandle:hI,useInsertionEffect:cI,useLayoutEffect:fI,useMemo:mI,useReducer:Hp,useRef:lI,useState:function(){return Hp(Il)},useDebugValue:ng,useDeferredValue:function(t){var e=_r();return jt===null?e.memoizedState=t:yI(e,jt.memoizedState,t)},useTransition:function(){var t=Hp(Il)[0],e=_r().memoizedState;return[t,e]},useMutableSource:nI,useSyncExternalStore:rI,useId:vI,unstable_isNewReconciler:!1};function Fa(t,e){try{var n="",r=e;do n+=CC(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Qp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ly(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var nP=typeof WeakMap=="function"?WeakMap:Map;function bI(t,e,n){n=Ri(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ad||(ad=!0,wy=r),ly(t,e)},n}function SI(t,e,n){n=Ri(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){ly(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){ly(t,e),typeof r!="function"&&(Es===null?Es=new Set([this]):Es.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function l_(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new nP;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=yP.bind(null,t,e,n),e.then(t,t))}function c_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function f_(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ri(-1,1),e.tag=2,Is(n,e,1))),n.lanes|=1),t)}var rP=Qi.ReactCurrentOwner,Cn=!1;function hn(t,e,n,r){e.child=t===null?eI(e,null,n,r):Na(e,t.child,n,r)}function d_(t,e,n,r,i){n=n.render;var s=e.ref;return Oa(e,i),r=Zv(t,e,n,r,s,i),n=eg(),t!==null&&!Cn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ji(t,e,i)):(gt&&n&&Uv(e),e.flags|=1,hn(t,e,r,i),e.child)}function h_(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!cg(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,II(t,e,s,r,i)):(t=kf(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:yl,n(o,r)&&t.ref===e.ref)return ji(t,e,i)}return e.flags|=1,t=ks(s,r),t.ref=e.ref,t.return=e,e.child=t}function II(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(yl(s,r)&&t.ref===e.ref)if(Cn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Cn=!0);else return e.lanes=t.lanes,ji(t,e,i)}return cy(t,e,n,r,i)}function EI(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ut(wa,Hn),Hn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ut(wa,Hn),Hn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ut(wa,Hn),Hn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,ut(wa,Hn),Hn|=r;return hn(t,e,i,n),e.child}function OI(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function cy(t,e,n,r,i){var s=Pn(n)?Po:ln.current;return s=Ta(e,s),Oa(e,i),n=Zv(t,e,n,r,s,i),r=eg(),t!==null&&!Cn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ji(t,e,i)):(gt&&r&&Uv(e),e.flags|=1,hn(t,e,n,i),e.child)}function p_(t,e,n,r,i){if(Pn(n)){var s=!0;Jf(e)}else s=!1;if(Oa(e,i),e.stateNode===null)If(t,e),XS(e,n,r),uy(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,f=n.contextType;typeof f=="object"&&f!==null?f=wr(f):(f=Pn(n)?Po:ln.current,f=Ta(e,f));var h=n.getDerivedStateFromProps,p=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==f)&&s_(e,o,r,f),ls=!1;var y=e.memoizedState;o.state=y,nd(e,r,o,i),l=e.memoizedState,a!==r||y!==l||An.current||ls?(typeof h=="function"&&(ay(e,n,h,r),l=e.memoizedState),(a=ls||i_(e,n,a,r,y,l,f))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=f,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,GS(t,e),a=e.memoizedProps,f=e.type===e.elementType?a:Or(e.type,a),o.props=f,p=e.pendingProps,y=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=wr(l):(l=Pn(n)?Po:ln.current,l=Ta(e,l));var w=n.getDerivedStateFromProps;(h=typeof w=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==p||y!==l)&&s_(e,o,r,l),ls=!1,y=e.memoizedState,o.state=y,nd(e,r,o,i);var I=e.memoizedState;a!==p||y!==I||An.current||ls?(typeof w=="function"&&(ay(e,n,w,r),I=e.memoizedState),(f=ls||i_(e,n,f,r,y,I,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,I,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,I,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=I),o.props=r,o.state=I,o.context=l,r=f):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),r=!1)}return fy(t,e,n,r,s,i)}function fy(t,e,n,r,i,s){OI(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Zw(e,n,!1),ji(t,e,s);r=e.stateNode,rP.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Na(e,t.child,null,s),e.child=Na(e,null,a,s)):hn(t,e,a,s),e.memoizedState=r.state,i&&Zw(e,n,!0),e.child}function kI(t){var e=t.stateNode;e.pendingContext?Xw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Xw(t,e.context,!1),Yv(t,e.containerInfo)}function m_(t,e,n,r,i){return Ma(),Vv(i),e.flags|=256,hn(t,e,n,r),e.child}var dy={dehydrated:null,treeContext:null,retryLane:0};function hy(t){return{baseLanes:t,cachePool:null,transitions:null}}function DI(t,e,n){var r=e.pendingProps,i=bt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ut(bt,i&1),t===null)return sy(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=mh(o,r,0,null),t=Oo(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=hy(n),e.memoizedState=dy,t):rg(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return iP(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ks(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=ks(a,s):(s=Oo(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?hy(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=dy,r}return s=t.child,t=s.sibling,r=ks(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function rg(t,e){return e=mh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ef(t,e,n,r){return r!==null&&Vv(r),Na(e,t.child,null,n),t=rg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function iP(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Qp(Error(Z(422))),ef(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=mh({mode:"visible",children:r.children},i,0,null),s=Oo(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Na(e,t.child,null,o),e.child.memoizedState=hy(o),e.memoizedState=dy,s);if(!(e.mode&1))return ef(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Z(419)),r=Qp(s,r,void 0),ef(t,e,o,r)}if(a=(o&t.childLanes)!==0,Cn||a){if(r=Qt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,$i(t,i),Rr(r,t,i,-1))}return lg(),r=Qp(Error(Z(421))),ef(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=vP.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Jn=Ss(i.nextSibling),Zn=e,gt=!0,xr=null,t!==null&&(hr[pr++]=xi,hr[pr++]=Ci,hr[pr++]=Ro,xi=t.id,Ci=t.overflow,Ro=e),e=rg(e,r.children),e.flags|=4096,e)}function y_(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),oy(t.return,e,n)}function Yp(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function xI(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(hn(t,e,r.children,n),r=bt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&y_(t,n,e);else if(t.tag===19)y_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ut(bt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&rd(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Yp(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&rd(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Yp(e,!0,n,null,s);break;case"together":Yp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function If(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ji(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Mo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Z(153));if(e.child!==null){for(t=e.child,n=ks(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ks(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function sP(t,e,n){switch(e.tag){case 3:kI(e),Ma();break;case 5:tI(e);break;case 1:Pn(e.type)&&Jf(e);break;case 4:Yv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ut(ed,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ut(bt,bt.current&1),e.flags|=128,null):n&e.child.childLanes?DI(t,e,n):(ut(bt,bt.current&1),t=ji(t,e,n),t!==null?t.sibling:null);ut(bt,bt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return xI(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ut(bt,bt.current),r)break;return null;case 22:case 23:return e.lanes=0,EI(t,e,n)}return ji(t,e,n)}var CI,py,AI,PI;CI=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};py=function(){};AI=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,yo(li.current);var s=null;switch(n){case"input":i=Bm(t,i),r=Bm(t,r),s=[];break;case"select":i=Et({},i,{value:void 0}),r=Et({},r,{value:void 0}),s=[];break;case"textarea":i=$m(t,i),r=$m(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Yf)}Um(n,r);var o;n=null;for(f in i)if(!r.hasOwnProperty(f)&&i.hasOwnProperty(f)&&i[f]!=null)if(f==="style"){var a=i[f];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(ll.hasOwnProperty(f)?s||(s=[]):(s=s||[]).push(f,null));for(f in r){var l=r[f];if(a=i!=null?i[f]:void 0,r.hasOwnProperty(f)&&l!==a&&(l!=null||a!=null))if(f==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(f,n)),n=l;else f==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(f,l)):f==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(f,""+l):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(ll.hasOwnProperty(f)?(l!=null&&f==="onScroll"&&ht("scroll",t),s||a===l||(s=[])):(s=s||[]).push(f,l))}n&&(s=s||[]).push("style",n);var f=s;(e.updateQueue=f)&&(e.flags|=4)}};PI=function(t,e,n,r){n!==r&&(e.flags|=4)};function Tu(t,e){if(!gt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function on(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function oP(t,e,n){var r=e.pendingProps;switch(zv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return on(e),null;case 1:return Pn(e.type)&&Gf(),on(e),null;case 3:return r=e.stateNode,Ba(),mt(An),mt(ln),Jv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Xc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,xr!==null&&(Sy(xr),xr=null))),py(t,e),on(e),null;case 5:Gv(e);var i=yo(bl.current);if(n=e.type,t!==null&&e.stateNode!=null)AI(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Z(166));return on(e),null}if(t=yo(li.current),Xc(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Xr]=e,r[wl]=s,t=(e.mode&1)!==0,n){case"dialog":ht("cancel",r),ht("close",r);break;case"iframe":case"object":case"embed":ht("load",r);break;case"video":case"audio":for(i=0;i<Uu.length;i++)ht(Uu[i],r);break;case"source":ht("error",r);break;case"img":case"image":case"link":ht("error",r),ht("load",r);break;case"details":ht("toggle",r);break;case"input":Ow(r,s),ht("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ht("invalid",r);break;case"textarea":Dw(r,s),ht("invalid",r)}Um(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Jc(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Jc(r.textContent,a,t),i=["children",""+a]):ll.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ht("scroll",r)}switch(n){case"input":Vc(r),kw(r,s,!0);break;case"textarea":Vc(r),xw(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Yf)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=iS(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Xr]=e,t[wl]=r,CI(t,e,!1,!1),e.stateNode=t;e:{switch(o=zm(n,r),n){case"dialog":ht("cancel",t),ht("close",t),i=r;break;case"iframe":case"object":case"embed":ht("load",t),i=r;break;case"video":case"audio":for(i=0;i<Uu.length;i++)ht(Uu[i],t);i=r;break;case"source":ht("error",t),i=r;break;case"img":case"image":case"link":ht("error",t),ht("load",t),i=r;break;case"details":ht("toggle",t),i=r;break;case"input":Ow(t,r),i=Bm(t,r),ht("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Et({},r,{value:void 0}),ht("invalid",t);break;case"textarea":Dw(t,r),i=$m(t,r),ht("invalid",t);break;default:i=r}Um(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?aS(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&sS(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&cl(t,l):typeof l=="number"&&cl(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ll.hasOwnProperty(s)?l!=null&&s==="onScroll"&&ht("scroll",t):l!=null&&Dv(t,s,l,o))}switch(n){case"input":Vc(t),kw(t,r,!1);break;case"textarea":Vc(t),xw(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ps(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?ba(t,!!r.multiple,s,!1):r.defaultValue!=null&&ba(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Yf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return on(e),null;case 6:if(t&&e.stateNode!=null)PI(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Z(166));if(n=yo(bl.current),yo(li.current),Xc(e)){if(r=e.stateNode,n=e.memoizedProps,r[Xr]=e,(s=r.nodeValue!==n)&&(t=Zn,t!==null))switch(t.tag){case 3:Jc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Jc(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Xr]=e,e.stateNode=r}return on(e),null;case 13:if(mt(bt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(gt&&Jn!==null&&e.mode&1&&!(e.flags&128))QS(),Ma(),e.flags|=98560,s=!1;else if(s=Xc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Z(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Z(317));s[Xr]=e}else Ma(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;on(e),s=!1}else xr!==null&&(Sy(xr),xr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||bt.current&1?Vt===0&&(Vt=3):lg())),e.updateQueue!==null&&(e.flags|=4),on(e),null);case 4:return Ba(),py(t,e),t===null&&vl(e.stateNode.containerInfo),on(e),null;case 10:return qv(e.type._context),on(e),null;case 17:return Pn(e.type)&&Gf(),on(e),null;case 19:if(mt(bt),s=e.memoizedState,s===null)return on(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Tu(s,!1);else{if(Vt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=rd(t),o!==null){for(e.flags|=128,Tu(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ut(bt,bt.current&1|2),e.child}t=t.sibling}s.tail!==null&&Tt()>La&&(e.flags|=128,r=!0,Tu(s,!1),e.lanes=4194304)}else{if(!r)if(t=rd(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Tu(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!gt)return on(e),null}else 2*Tt()-s.renderingStartTime>La&&n!==1073741824&&(e.flags|=128,r=!0,Tu(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Tt(),e.sibling=null,n=bt.current,ut(bt,r?n&1|2:n&1),e):(on(e),null);case 22:case 23:return ug(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Hn&1073741824&&(on(e),e.subtreeFlags&6&&(e.flags|=8192)):on(e),null;case 24:return null;case 25:return null}throw Error(Z(156,e.tag))}function aP(t,e){switch(zv(e),e.tag){case 1:return Pn(e.type)&&Gf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ba(),mt(An),mt(ln),Jv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Gv(e),null;case 13:if(mt(bt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Z(340));Ma()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return mt(bt),null;case 4:return Ba(),null;case 10:return qv(e.type._context),null;case 22:case 23:return ug(),null;case 24:return null;default:return null}}var tf=!1,an=!1,uP=typeof WeakSet=="function"?WeakSet:Set,ae=null;function ga(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){At(t,e,r)}else n.current=null}function my(t,e,n){try{n()}catch(r){At(t,e,r)}}var v_=!1;function lP(t,e){if(Xm=qf,t=NS(),jv(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,f=0,h=0,p=t,y=null;t:for(;;){for(var w;p!==n||i!==0&&p.nodeType!==3||(a=o+i),p!==s||r!==0&&p.nodeType!==3||(l=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(w=p.firstChild)!==null;)y=p,p=w;for(;;){if(p===t)break t;if(y===n&&++f===i&&(a=o),y===s&&++h===r&&(l=o),(w=p.nextSibling)!==null)break;p=y,y=p.parentNode}p=w}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Zm={focusedElem:t,selectionRange:n},qf=!1,ae=e;ae!==null;)if(e=ae,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ae=t;else for(;ae!==null;){e=ae;try{var I=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(I!==null){var E=I.memoizedProps,$=I.memoizedState,S=e.stateNode,_=S.getSnapshotBeforeUpdate(e.elementType===e.type?E:Or(e.type,E),$);S.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var k=e.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Z(163))}}catch(z){At(e,e.return,z)}if(t=e.sibling,t!==null){t.return=e.return,ae=t;break}ae=e.return}return I=v_,v_=!1,I}function Ju(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&my(e,n,s)}i=i.next}while(i!==r)}}function hh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function yy(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function RI(t){var e=t.alternate;e!==null&&(t.alternate=null,RI(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Xr],delete e[wl],delete e[ny],delete e[WA],delete e[qA])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function TI(t){return t.tag===5||t.tag===3||t.tag===4}function g_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||TI(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function vy(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Yf));else if(r!==4&&(t=t.child,t!==null))for(vy(t,e,n),t=t.sibling;t!==null;)vy(t,e,n),t=t.sibling}function gy(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(gy(t,e,n),t=t.sibling;t!==null;)gy(t,e,n),t=t.sibling}var Xt=null,kr=!1;function os(t,e,n){for(n=n.child;n!==null;)MI(t,e,n),n=n.sibling}function MI(t,e,n){if(ui&&typeof ui.onCommitFiberUnmount=="function")try{ui.onCommitFiberUnmount(sh,n)}catch{}switch(n.tag){case 5:an||ga(n,e);case 6:var r=Xt,i=kr;Xt=null,os(t,e,n),Xt=r,kr=i,Xt!==null&&(kr?(t=Xt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Xt.removeChild(n.stateNode));break;case 18:Xt!==null&&(kr?(t=Xt,n=n.stateNode,t.nodeType===8?zp(t.parentNode,n):t.nodeType===1&&zp(t,n),pl(t)):zp(Xt,n.stateNode));break;case 4:r=Xt,i=kr,Xt=n.stateNode.containerInfo,kr=!0,os(t,e,n),Xt=r,kr=i;break;case 0:case 11:case 14:case 15:if(!an&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&my(n,e,o),i=i.next}while(i!==r)}os(t,e,n);break;case 1:if(!an&&(ga(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){At(n,e,a)}os(t,e,n);break;case 21:os(t,e,n);break;case 22:n.mode&1?(an=(r=an)||n.memoizedState!==null,os(t,e,n),an=r):os(t,e,n);break;default:os(t,e,n)}}function w_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new uP),e.forEach(function(r){var i=gP.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Ir(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Xt=a.stateNode,kr=!1;break e;case 3:Xt=a.stateNode.containerInfo,kr=!0;break e;case 4:Xt=a.stateNode.containerInfo,kr=!0;break e}a=a.return}if(Xt===null)throw Error(Z(160));MI(s,o,i),Xt=null,kr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(f){At(i,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)NI(e,t),e=e.sibling}function NI(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ir(e,t),qr(t),r&4){try{Ju(3,t,t.return),hh(3,t)}catch(E){At(t,t.return,E)}try{Ju(5,t,t.return)}catch(E){At(t,t.return,E)}}break;case 1:Ir(e,t),qr(t),r&512&&n!==null&&ga(n,n.return);break;case 5:if(Ir(e,t),qr(t),r&512&&n!==null&&ga(n,n.return),t.flags&32){var i=t.stateNode;try{cl(i,"")}catch(E){At(t,t.return,E)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&nS(i,s),zm(a,o);var f=zm(a,s);for(o=0;o<l.length;o+=2){var h=l[o],p=l[o+1];h==="style"?aS(i,p):h==="dangerouslySetInnerHTML"?sS(i,p):h==="children"?cl(i,p):Dv(i,h,p,f)}switch(a){case"input":Fm(i,s);break;case"textarea":rS(i,s);break;case"select":var y=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var w=s.value;w!=null?ba(i,!!s.multiple,w,!1):y!==!!s.multiple&&(s.defaultValue!=null?ba(i,!!s.multiple,s.defaultValue,!0):ba(i,!!s.multiple,s.multiple?[]:"",!1))}i[wl]=s}catch(E){At(t,t.return,E)}}break;case 6:if(Ir(e,t),qr(t),r&4){if(t.stateNode===null)throw Error(Z(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(E){At(t,t.return,E)}}break;case 3:if(Ir(e,t),qr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{pl(e.containerInfo)}catch(E){At(t,t.return,E)}break;case 4:Ir(e,t),qr(t);break;case 13:Ir(e,t),qr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(og=Tt())),r&4&&w_(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(an=(f=an)||h,Ir(e,t),an=f):Ir(e,t),qr(t),r&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!h&&t.mode&1)for(ae=t,h=t.child;h!==null;){for(p=ae=h;ae!==null;){switch(y=ae,w=y.child,y.tag){case 0:case 11:case 14:case 15:Ju(4,y,y.return);break;case 1:ga(y,y.return);var I=y.stateNode;if(typeof I.componentWillUnmount=="function"){r=y,n=y.return;try{e=r,I.props=e.memoizedProps,I.state=e.memoizedState,I.componentWillUnmount()}catch(E){At(r,n,E)}}break;case 5:ga(y,y.return);break;case 22:if(y.memoizedState!==null){b_(p);continue}}w!==null?(w.return=y,ae=w):b_(p)}h=h.sibling}e:for(h=null,p=t;;){if(p.tag===5){if(h===null){h=p;try{i=p.stateNode,f?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=p.stateNode,l=p.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=oS("display",o))}catch(E){At(t,t.return,E)}}}else if(p.tag===6){if(h===null)try{p.stateNode.nodeValue=f?"":p.memoizedProps}catch(E){At(t,t.return,E)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Ir(e,t),qr(t),r&4&&w_(t);break;case 21:break;default:Ir(e,t),qr(t)}}function qr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(TI(n)){var r=n;break e}n=n.return}throw Error(Z(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(cl(i,""),r.flags&=-33);var s=g_(t);gy(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=g_(t);vy(t,a,o);break;default:throw Error(Z(161))}}catch(l){At(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function cP(t,e,n){ae=t,BI(t)}function BI(t,e,n){for(var r=(t.mode&1)!==0;ae!==null;){var i=ae,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||tf;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||an;a=tf;var f=an;if(tf=o,(an=l)&&!f)for(ae=i;ae!==null;)o=ae,l=o.child,o.tag===22&&o.memoizedState!==null?S_(i):l!==null?(l.return=o,ae=l):S_(i);for(;s!==null;)ae=s,BI(s),s=s.sibling;ae=i,tf=a,an=f}__(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ae=s):__(t)}}function __(t){for(;ae!==null;){var e=ae;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:an||hh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!an)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Or(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&r_(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}r_(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var h=f.memoizedState;if(h!==null){var p=h.dehydrated;p!==null&&pl(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Z(163))}an||e.flags&512&&yy(e)}catch(y){At(e,e.return,y)}}if(e===t){ae=null;break}if(n=e.sibling,n!==null){n.return=e.return,ae=n;break}ae=e.return}}function b_(t){for(;ae!==null;){var e=ae;if(e===t){ae=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ae=n;break}ae=e.return}}function S_(t){for(;ae!==null;){var e=ae;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{hh(4,e)}catch(l){At(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){At(e,i,l)}}var s=e.return;try{yy(e)}catch(l){At(e,s,l)}break;case 5:var o=e.return;try{yy(e)}catch(l){At(e,o,l)}}}catch(l){At(e,e.return,l)}if(e===t){ae=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ae=a;break}ae=e.return}}var fP=Math.ceil,od=Qi.ReactCurrentDispatcher,ig=Qi.ReactCurrentOwner,gr=Qi.ReactCurrentBatchConfig,Fe=0,Qt=null,Bt=null,Zt=0,Hn=0,wa=zs(0),Vt=0,Ol=null,Mo=0,ph=0,sg=0,Xu=null,kn=null,og=0,La=1/0,_i=null,ad=!1,wy=null,Es=null,nf=!1,ys=null,ud=0,Zu=0,_y=null,Ef=-1,Of=0;function wn(){return Fe&6?Tt():Ef!==-1?Ef:Ef=Tt()}function Os(t){return t.mode&1?Fe&2&&Zt!==0?Zt&-Zt:QA.transition!==null?(Of===0&&(Of=wS()),Of):(t=Ge,t!==0||(t=window.event,t=t===void 0?16:kS(t.type)),t):1}function Rr(t,e,n,r){if(50<Zu)throw Zu=0,_y=null,Error(Z(185));Vl(t,n,r),(!(Fe&2)||t!==Qt)&&(t===Qt&&(!(Fe&2)&&(ph|=n),Vt===4&&ps(t,Zt)),Rn(t,r),n===1&&Fe===0&&!(e.mode&1)&&(La=Tt()+500,ch&&Vs()))}function Rn(t,e){var n=t.callbackNode;QC(t,e);var r=Wf(t,t===Qt?Zt:0);if(r===0)n!==null&&Pw(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Pw(n),e===1)t.tag===0?HA(I_.bind(null,t)):WS(I_.bind(null,t)),VA(function(){!(Fe&6)&&Vs()}),n=null;else{switch(_S(r)){case 1:n=Rv;break;case 4:n=vS;break;case 16:n=Kf;break;case 536870912:n=gS;break;default:n=Kf}n=KI(n,FI.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function FI(t,e){if(Ef=-1,Of=0,Fe&6)throw Error(Z(327));var n=t.callbackNode;if(ka()&&t.callbackNode!==n)return null;var r=Wf(t,t===Qt?Zt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ld(t,r);else{e=r;var i=Fe;Fe|=2;var s=$I();(Qt!==t||Zt!==e)&&(_i=null,La=Tt()+500,Eo(t,e));do try{pP();break}catch(a){LI(t,a)}while(1);Wv(),od.current=s,Fe=i,Bt!==null?e=0:(Qt=null,Zt=0,e=Vt)}if(e!==0){if(e===2&&(i=Hm(t),i!==0&&(r=i,e=by(t,i))),e===1)throw n=Ol,Eo(t,0),ps(t,r),Rn(t,Tt()),n;if(e===6)ps(t,r);else{if(i=t.current.alternate,!(r&30)&&!dP(i)&&(e=ld(t,r),e===2&&(s=Hm(t),s!==0&&(r=s,e=by(t,s))),e===1))throw n=Ol,Eo(t,0),ps(t,r),Rn(t,Tt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Z(345));case 2:fo(t,kn,_i);break;case 3:if(ps(t,r),(r&130023424)===r&&(e=og+500-Tt(),10<e)){if(Wf(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){wn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=ty(fo.bind(null,t,kn,_i),e);break}fo(t,kn,_i);break;case 4:if(ps(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Pr(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Tt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*fP(r/1960))-r,10<r){t.timeoutHandle=ty(fo.bind(null,t,kn,_i),r);break}fo(t,kn,_i);break;case 5:fo(t,kn,_i);break;default:throw Error(Z(329))}}}return Rn(t,Tt()),t.callbackNode===n?FI.bind(null,t):null}function by(t,e){var n=Xu;return t.current.memoizedState.isDehydrated&&(Eo(t,e).flags|=256),t=ld(t,e),t!==2&&(e=kn,kn=n,e!==null&&Sy(e)),t}function Sy(t){kn===null?kn=t:kn.push.apply(kn,t)}function dP(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Nr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ps(t,e){for(e&=~sg,e&=~ph,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Pr(e),r=1<<n;t[n]=-1,e&=~r}}function I_(t){if(Fe&6)throw Error(Z(327));ka();var e=Wf(t,0);if(!(e&1))return Rn(t,Tt()),null;var n=ld(t,e);if(t.tag!==0&&n===2){var r=Hm(t);r!==0&&(e=r,n=by(t,r))}if(n===1)throw n=Ol,Eo(t,0),ps(t,e),Rn(t,Tt()),n;if(n===6)throw Error(Z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,fo(t,kn,_i),Rn(t,Tt()),null}function ag(t,e){var n=Fe;Fe|=1;try{return t(e)}finally{Fe=n,Fe===0&&(La=Tt()+500,ch&&Vs())}}function No(t){ys!==null&&ys.tag===0&&!(Fe&6)&&ka();var e=Fe;Fe|=1;var n=gr.transition,r=Ge;try{if(gr.transition=null,Ge=1,t)return t()}finally{Ge=r,gr.transition=n,Fe=e,!(Fe&6)&&Vs()}}function ug(){Hn=wa.current,mt(wa)}function Eo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,zA(n)),Bt!==null)for(n=Bt.return;n!==null;){var r=n;switch(zv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Gf();break;case 3:Ba(),mt(An),mt(ln),Jv();break;case 5:Gv(r);break;case 4:Ba();break;case 13:mt(bt);break;case 19:mt(bt);break;case 10:qv(r.type._context);break;case 22:case 23:ug()}n=n.return}if(Qt=t,Bt=t=ks(t.current,null),Zt=Hn=e,Vt=0,Ol=null,sg=ph=Mo=0,kn=Xu=null,mo!==null){for(e=0;e<mo.length;e++)if(n=mo[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}mo=null}return t}function LI(t,e){do{var n=Bt;try{if(Wv(),bf.current=sd,id){for(var r=It.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}id=!1}if(To=0,Ht=jt=It=null,Gu=!1,Sl=0,ig.current=null,n===null||n.return===null){Vt=1,Ol=e,Bt=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Zt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var f=l,h=a,p=h.tag;if(!(h.mode&1)&&(p===0||p===11||p===15)){var y=h.alternate;y?(h.updateQueue=y.updateQueue,h.memoizedState=y.memoizedState,h.lanes=y.lanes):(h.updateQueue=null,h.memoizedState=null)}var w=c_(o);if(w!==null){w.flags&=-257,f_(w,o,a,s,e),w.mode&1&&l_(s,f,e),e=w,l=f;var I=e.updateQueue;if(I===null){var E=new Set;E.add(l),e.updateQueue=E}else I.add(l);break e}else{if(!(e&1)){l_(s,f,e),lg();break e}l=Error(Z(426))}}else if(gt&&a.mode&1){var $=c_(o);if($!==null){!($.flags&65536)&&($.flags|=256),f_($,o,a,s,e),Vv(Fa(l,a));break e}}s=l=Fa(l,a),Vt!==4&&(Vt=2),Xu===null?Xu=[s]:Xu.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var S=bI(s,l,e);n_(s,S);break e;case 1:a=l;var _=s.type,k=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(Es===null||!Es.has(k)))){s.flags|=65536,e&=-e,s.lanes|=e;var z=SI(s,a,e);n_(s,z);break e}}s=s.return}while(s!==null)}UI(n)}catch(W){e=W,Bt===n&&n!==null&&(Bt=n=n.return);continue}break}while(1)}function $I(){var t=od.current;return od.current=sd,t===null?sd:t}function lg(){(Vt===0||Vt===3||Vt===2)&&(Vt=4),Qt===null||!(Mo&268435455)&&!(ph&268435455)||ps(Qt,Zt)}function ld(t,e){var n=Fe;Fe|=2;var r=$I();(Qt!==t||Zt!==e)&&(_i=null,Eo(t,e));do try{hP();break}catch(i){LI(t,i)}while(1);if(Wv(),Fe=n,od.current=r,Bt!==null)throw Error(Z(261));return Qt=null,Zt=0,Vt}function hP(){for(;Bt!==null;)jI(Bt)}function pP(){for(;Bt!==null&&!$C();)jI(Bt)}function jI(t){var e=VI(t.alternate,t,Hn);t.memoizedProps=t.pendingProps,e===null?UI(t):Bt=e,ig.current=null}function UI(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=aP(n,e),n!==null){n.flags&=32767,Bt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Vt=6,Bt=null;return}}else if(n=oP(n,e,Hn),n!==null){Bt=n;return}if(e=e.sibling,e!==null){Bt=e;return}Bt=e=t}while(e!==null);Vt===0&&(Vt=5)}function fo(t,e,n){var r=Ge,i=gr.transition;try{gr.transition=null,Ge=1,mP(t,e,n,r)}finally{gr.transition=i,Ge=r}return null}function mP(t,e,n,r){do ka();while(ys!==null);if(Fe&6)throw Error(Z(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Z(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(YC(t,s),t===Qt&&(Bt=Qt=null,Zt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||nf||(nf=!0,KI(Kf,function(){return ka(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=gr.transition,gr.transition=null;var o=Ge;Ge=1;var a=Fe;Fe|=4,ig.current=null,lP(t,n),NI(n,t),NA(Zm),qf=!!Xm,Zm=Xm=null,t.current=n,cP(n),jC(),Fe=a,Ge=o,gr.transition=s}else t.current=n;if(nf&&(nf=!1,ys=t,ud=i),s=t.pendingLanes,s===0&&(Es=null),VC(n.stateNode),Rn(t,Tt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ad)throw ad=!1,t=wy,wy=null,t;return ud&1&&t.tag!==0&&ka(),s=t.pendingLanes,s&1?t===_y?Zu++:(Zu=0,_y=t):Zu=0,Vs(),null}function ka(){if(ys!==null){var t=_S(ud),e=gr.transition,n=Ge;try{if(gr.transition=null,Ge=16>t?16:t,ys===null)var r=!1;else{if(t=ys,ys=null,ud=0,Fe&6)throw Error(Z(331));var i=Fe;for(Fe|=4,ae=t.current;ae!==null;){var s=ae,o=s.child;if(ae.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var f=a[l];for(ae=f;ae!==null;){var h=ae;switch(h.tag){case 0:case 11:case 15:Ju(8,h,s)}var p=h.child;if(p!==null)p.return=h,ae=p;else for(;ae!==null;){h=ae;var y=h.sibling,w=h.return;if(RI(h),h===f){ae=null;break}if(y!==null){y.return=w,ae=y;break}ae=w}}}var I=s.alternate;if(I!==null){var E=I.child;if(E!==null){I.child=null;do{var $=E.sibling;E.sibling=null,E=$}while(E!==null)}}ae=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ae=o;else e:for(;ae!==null;){if(s=ae,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ju(9,s,s.return)}var S=s.sibling;if(S!==null){S.return=s.return,ae=S;break e}ae=s.return}}var _=t.current;for(ae=_;ae!==null;){o=ae;var k=o.child;if(o.subtreeFlags&2064&&k!==null)k.return=o,ae=k;else e:for(o=_;ae!==null;){if(a=ae,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:hh(9,a)}}catch(W){At(a,a.return,W)}if(a===o){ae=null;break e}var z=a.sibling;if(z!==null){z.return=a.return,ae=z;break e}ae=a.return}}if(Fe=i,Vs(),ui&&typeof ui.onPostCommitFiberRoot=="function")try{ui.onPostCommitFiberRoot(sh,t)}catch{}r=!0}return r}finally{Ge=n,gr.transition=e}}return!1}function E_(t,e,n){e=Fa(n,e),e=bI(t,e,1),t=Is(t,e,1),e=wn(),t!==null&&(Vl(t,1,e),Rn(t,e))}function At(t,e,n){if(t.tag===3)E_(t,t,n);else for(;e!==null;){if(e.tag===3){E_(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Es===null||!Es.has(r))){t=Fa(n,t),t=SI(e,t,1),e=Is(e,t,1),t=wn(),e!==null&&(Vl(e,1,t),Rn(e,t));break}}e=e.return}}function yP(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=wn(),t.pingedLanes|=t.suspendedLanes&n,Qt===t&&(Zt&n)===n&&(Vt===4||Vt===3&&(Zt&130023424)===Zt&&500>Tt()-og?Eo(t,0):sg|=n),Rn(t,e)}function zI(t,e){e===0&&(t.mode&1?(e=qc,qc<<=1,!(qc&130023424)&&(qc=4194304)):e=1);var n=wn();t=$i(t,e),t!==null&&(Vl(t,e,n),Rn(t,n))}function vP(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),zI(t,n)}function gP(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Z(314))}r!==null&&r.delete(e),zI(t,n)}var VI;VI=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||An.current)Cn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Cn=!1,sP(t,e,n);Cn=!!(t.flags&131072)}else Cn=!1,gt&&e.flags&1048576&&qS(e,Zf,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;If(t,e),t=e.pendingProps;var i=Ta(e,ln.current);Oa(e,n),i=Zv(null,e,r,t,i,n);var s=eg();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Pn(r)?(s=!0,Jf(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Qv(e),i.updater=fh,e.stateNode=i,i._reactInternals=e,uy(e,r,t,n),e=fy(null,e,r,!0,s,n)):(e.tag=0,gt&&s&&Uv(e),hn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(If(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=_P(r),t=Or(r,t),i){case 0:e=cy(null,e,r,t,n);break e;case 1:e=p_(null,e,r,t,n);break e;case 11:e=d_(null,e,r,t,n);break e;case 14:e=h_(null,e,r,Or(r.type,t),n);break e}throw Error(Z(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Or(r,i),cy(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Or(r,i),p_(t,e,r,i,n);case 3:e:{if(kI(e),t===null)throw Error(Z(387));r=e.pendingProps,s=e.memoizedState,i=s.element,GS(t,e),nd(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Fa(Error(Z(423)),e),e=m_(t,e,r,n,i);break e}else if(r!==i){i=Fa(Error(Z(424)),e),e=m_(t,e,r,n,i);break e}else for(Jn=Ss(e.stateNode.containerInfo.firstChild),Zn=e,gt=!0,xr=null,n=eI(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ma(),r===i){e=ji(t,e,n);break e}hn(t,e,r,n)}e=e.child}return e;case 5:return tI(e),t===null&&sy(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,ey(r,i)?o=null:s!==null&&ey(r,s)&&(e.flags|=32),OI(t,e),hn(t,e,o,n),e.child;case 6:return t===null&&sy(e),null;case 13:return DI(t,e,n);case 4:return Yv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Na(e,null,r,n):hn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Or(r,i),d_(t,e,r,i,n);case 7:return hn(t,e,e.pendingProps,n),e.child;case 8:return hn(t,e,e.pendingProps.children,n),e.child;case 12:return hn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,ut(ed,r._currentValue),r._currentValue=o,s!==null)if(Nr(s.value,o)){if(s.children===i.children&&!An.current){e=ji(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Ri(-1,n&-n),l.tag=2;var f=s.updateQueue;if(f!==null){f=f.shared;var h=f.pending;h===null?l.next=l:(l.next=h.next,h.next=l),f.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),oy(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Z(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),oy(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}hn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Oa(e,n),i=wr(i),r=r(i),e.flags|=1,hn(t,e,r,n),e.child;case 14:return r=e.type,i=Or(r,e.pendingProps),i=Or(r.type,i),h_(t,e,r,i,n);case 15:return II(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Or(r,i),If(t,e),e.tag=1,Pn(r)?(t=!0,Jf(e)):t=!1,Oa(e,n),XS(e,r,i),uy(e,r,i,n),fy(null,e,r,!0,t,n);case 19:return xI(t,e,n);case 22:return EI(t,e,n)}throw Error(Z(156,e.tag))};function KI(t,e){return yS(t,e)}function wP(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vr(t,e,n,r){return new wP(t,e,n,r)}function cg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function _P(t){if(typeof t=="function")return cg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Cv)return 11;if(t===Av)return 14}return 2}function ks(t,e){var n=t.alternate;return n===null?(n=vr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function kf(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")cg(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case la:return Oo(n.children,i,s,e);case xv:o=8,i|=8;break;case Rm:return t=vr(12,n,e,i|2),t.elementType=Rm,t.lanes=s,t;case Tm:return t=vr(13,n,e,i),t.elementType=Tm,t.lanes=s,t;case Mm:return t=vr(19,n,e,i),t.elementType=Mm,t.lanes=s,t;case Z1:return mh(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case J1:o=10;break e;case X1:o=9;break e;case Cv:o=11;break e;case Av:o=14;break e;case us:o=16,r=null;break e}throw Error(Z(130,t==null?t:typeof t,""))}return e=vr(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Oo(t,e,n,r){return t=vr(7,t,r,e),t.lanes=n,t}function mh(t,e,n,r){return t=vr(22,t,r,e),t.elementType=Z1,t.lanes=n,t.stateNode={isHidden:!1},t}function Gp(t,e,n){return t=vr(6,t,null,e),t.lanes=n,t}function Jp(t,e,n){return e=vr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function bP(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Pp(0),this.expirationTimes=Pp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pp(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function fg(t,e,n,r,i,s,o,a,l){return t=new bP(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=vr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Qv(s),t}function SP(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ua,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function WI(t){if(!t)return Rs;t=t._reactInternals;e:{if(Vo(t)!==t||t.tag!==1)throw Error(Z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Pn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Z(171))}if(t.tag===1){var n=t.type;if(Pn(n))return KS(t,n,e)}return e}function qI(t,e,n,r,i,s,o,a,l){return t=fg(n,r,!0,t,i,s,o,a,l),t.context=WI(null),n=t.current,r=wn(),i=Os(n),s=Ri(r,i),s.callback=e??null,Is(n,s,i),t.current.lanes=i,Vl(t,i,r),Rn(t,r),t}function yh(t,e,n,r){var i=e.current,s=wn(),o=Os(i);return n=WI(n),e.context===null?e.context=n:e.pendingContext=n,e=Ri(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Is(i,e,o),t!==null&&(Rr(t,i,o,s),_f(t,i,o)),o}function cd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function O_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function dg(t,e){O_(t,e),(t=t.alternate)&&O_(t,e)}function IP(){return null}var HI=typeof reportError=="function"?reportError:function(t){console.error(t)};function hg(t){this._internalRoot=t}vh.prototype.render=hg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Z(409));yh(t,e,null,null)};vh.prototype.unmount=hg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;No(function(){yh(null,t,null,null)}),e[Li]=null}};function vh(t){this._internalRoot=t}vh.prototype.unstable_scheduleHydration=function(t){if(t){var e=IS();t={blockedOn:null,target:t,priority:e};for(var n=0;n<hs.length&&e!==0&&e<hs[n].priority;n++);hs.splice(n,0,t),n===0&&OS(t)}};function pg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function gh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function k_(){}function EP(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var f=cd(o);s.call(f)}}var o=qI(e,r,t,0,null,!1,!1,"",k_);return t._reactRootContainer=o,t[Li]=o.current,vl(t.nodeType===8?t.parentNode:t),No(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var f=cd(l);a.call(f)}}var l=fg(t,0,!1,null,null,!1,!1,"",k_);return t._reactRootContainer=l,t[Li]=l.current,vl(t.nodeType===8?t.parentNode:t),No(function(){yh(e,l,n,r)}),l}function wh(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=cd(o);a.call(l)}}yh(e,o,t,i)}else o=EP(n,e,t,i,r);return cd(o)}bS=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ju(e.pendingLanes);n!==0&&(Tv(e,n|1),Rn(e,Tt()),!(Fe&6)&&(La=Tt()+500,Vs()))}break;case 13:No(function(){var r=$i(t,1);if(r!==null){var i=wn();Rr(r,t,1,i)}}),dg(t,1)}};Mv=function(t){if(t.tag===13){var e=$i(t,134217728);if(e!==null){var n=wn();Rr(e,t,134217728,n)}dg(t,134217728)}};SS=function(t){if(t.tag===13){var e=Os(t),n=$i(t,e);if(n!==null){var r=wn();Rr(n,t,e,r)}dg(t,e)}};IS=function(){return Ge};ES=function(t,e){var n=Ge;try{return Ge=t,e()}finally{Ge=n}};Km=function(t,e,n){switch(e){case"input":if(Fm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=lh(r);if(!i)throw Error(Z(90));tS(r),Fm(r,i)}}}break;case"textarea":rS(t,n);break;case"select":e=n.value,e!=null&&ba(t,!!n.multiple,e,!1)}};cS=ag;fS=No;var OP={usingClientEntryPoint:!1,Events:[Wl,ha,lh,uS,lS,ag]},Mu={findFiberByHostInstance:po,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},kP={bundleType:Mu.bundleType,version:Mu.version,rendererPackageName:Mu.rendererPackageName,rendererConfig:Mu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=pS(t),t===null?null:t.stateNode},findFiberByHostInstance:Mu.findFiberByHostInstance||IP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rf.isDisabled&&rf.supportsFiber)try{sh=rf.inject(kP),ui=rf}catch{}}sr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=OP;sr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!pg(e))throw Error(Z(200));return SP(t,e,null,n)};sr.createRoot=function(t,e){if(!pg(t))throw Error(Z(299));var n=!1,r="",i=HI;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=fg(t,1,!1,null,null,n,!1,r,i),t[Li]=e.current,vl(t.nodeType===8?t.parentNode:t),new hg(e)};sr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Z(188)):(t=Object.keys(t).join(","),Error(Z(268,t)));return t=pS(e),t=t===null?null:t.stateNode,t};sr.flushSync=function(t){return No(t)};sr.hydrate=function(t,e,n){if(!gh(e))throw Error(Z(200));return wh(null,t,e,!0,n)};sr.hydrateRoot=function(t,e,n){if(!pg(t))throw Error(Z(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=HI;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=qI(e,null,t,1,n??null,i,!1,s,o),t[Li]=e.current,vl(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new vh(e)};sr.render=function(t,e,n){if(!gh(e))throw Error(Z(200));return wh(null,t,e,!1,n)};sr.unmountComponentAtNode=function(t){if(!gh(t))throw Error(Z(40));return t._reactRootContainer?(No(function(){wh(null,null,t,!1,function(){t._reactRootContainer=null,t[Li]=null})}),!0):!1};sr.unstable_batchedUpdates=ag;sr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!gh(n))throw Error(Z(200));if(t==null||t._reactInternals===void 0)throw Error(Z(38));return wh(t,e,n,!1,r)};sr.version="18.2.0-next-9e3b772b8-20220608";function QI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(QI)}catch(t){console.error(t)}}QI(),q1.exports=sr;var DP=q1.exports,YI,D_=DP;YI=D_.createRoot,D_.hydrateRoot;var Iy=function(t,e){return Iy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Iy(t,e)};function pi(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Iy(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function tt(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s}function re(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function ve(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(h){try{f(r.next(h))}catch(p){o(p)}}function l(h){try{f(r.throw(h))}catch(p){o(p)}}function f(h){h.done?s(h.value):i(h.value).then(a,l)}f((r=r.apply(t,e||[])).next())})}function GI(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(f){return function(h){return l([f,h])}}function l(f){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,f[0]&&(n=0)),n;)try{if(r=1,i&&(s=f[0]&2?i.return:f[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,f[1])).done)return s;switch(i=0,s&&(f=[f[0]&2,s.value]),f[0]){case 0:case 1:s=f;break;case 4:return n.label++,{value:f[1],done:!1};case 5:n.label++,i=f[1],f=[0];continue;case 7:f=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(f[0]===6||f[0]===2)){n=0;continue}if(f[0]===3&&(!s||f[1]>s[0]&&f[1]<s[3])){n.label=f[1];break}if(f[0]===6&&n.label<s[1]){n.label=s[1],s=f;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(f);break}s[2]&&n.ops.pop(),n.trys.pop();continue}f=e.call(t,n)}catch(h){f=[6,h],i=0}finally{r=s=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function $a(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function nr(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}function br(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}function ge(t){return this instanceof ge?(this.v=t,this):new ge(t)}function Ar(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(y){r[y]&&(i[y]=function(w){return new Promise(function(I,E){s.push([y,w,I,E])>1||a(y,w)})})}function a(y,w){try{l(r[y](w))}catch(I){p(s[0][3],I)}}function l(y){y.value instanceof ge?Promise.resolve(y.value.v).then(f,h):p(s[0][2],y)}function f(y){a("next",y)}function h(y){a("throw",y)}function p(y,w){y(w),s.shift(),s.length&&a(s[0][0],s[0][1])}}function Df(t){var e,n;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,s){e[i]=t[i]?function(o){return(n=!n)?{value:ge(t[i](o)),done:!1}:s?s(o):o}:s}}function Ds(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof $a=="function"?$a(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,l){o=t[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(f){s({value:f,done:a})},o)}}function kl(t){"@babel/helpers - typeof";return kl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kl(t)}function xP(t,e){if(kl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(kl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function CP(t){var e=xP(t,"string");return kl(e)=="symbol"?e:String(e)}function x_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,CP(r.key),r)}}function Ks(t,e,n){return e&&x_(t.prototype,e),n&&x_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function AP(t){return t[t.length-1]}function ja(t){return Array.isArray(t)?t.slice(0):[t]}function PP(t,e){t=t.slice(0);for(var n=[];t.length;){var r=t.splice(0,e);n.push(r)}return n}function mg(t){return Array.isArray(t)}function JI(t){return t!=null}function Xp(t,e){var n=0,r=-1;for(var i of t){r=r+1;var s=e(i,r);if(s)n=n+1;else break}return n}function Ua(t,e){for(var n=e.length,r=0;r<n;++r){var i=e[r];t.push(i)}}function RP(t){return t.filter(function(e,n,r){return r.indexOf(e)===n})}function za(t){var e=t.split("-");if(e.length!==2)throw new Error("malformatted revision: "+t);return{height:parseInt(e[0],10),hash:e[1]}}function C_(t){var e=parseInt(t.split("-")[0],10);return e}function Ui(t,e){var n=e?e._rev:null,r=n?za(n).height:0,i=r+1;return i+"-"+t}function XI(t){var e=t.split("."),n=e.length;return n===1?r=>r[t]:r=>{for(var i=r,s=0;s<n;++s){var o=e[s];if(i=i[o],typeof i>"u")return i}return i}}function $e(t){return Object.assign({},t)}function TP(t){return Object.keys(t)[0]}function fd(t,e=!1){if(!t)return t;if(!e&&Array.isArray(t))return t.sort((r,i)=>typeof r=="string"&&typeof i=="string"?r.localeCompare(i):typeof r=="object"?1:-1).map(r=>fd(r,e));if(typeof t=="object"&&!Array.isArray(t)){var n={};return Object.keys(t).sort((r,i)=>r.localeCompare(i)).forEach(r=>{n[r]=fd(t[r],e)}),n}return t}function Ey(t){if(!t||t===null||typeof t!="object")return t;if(Array.isArray(t)){for(var e=new Array(t.length),n=e.length;n--;)e[n]=Ey(t[n]);return e}var r={};for(var i in t)r[i]=Ey(t[i]);return r}var Mn=Ey;function xs(t,e,n){return Object.defineProperty(t,e,{get:function(){return n}}),n}var yg=1;function Ws(){return{lwt:yg}}function Nn(){return""}function MP(t){return Object.assign({},t,{_meta:void 0,_deleted:void 0,_rev:void 0})}function NP(t,e,n){if(e.length!==n.length)return!1;for(var r=0,i=e.length;r<i;){var s=e[r],o=n[r];if(r++,s._rev!==o._rev||s[t]!==o[t])return!1}return!0}class Cs{constructor(e,n){e=this.words=e||[],this.sigBytes=n===void 0?e.length*4:n}toString(e){return(e||BP).stringify(this)}concat(e){if(this.clamp(),this.sigBytes%4)for(let n=0;n<e.sigBytes;n++){const r=e.words[n>>>2]>>>24-n%4*8&255;this.words[this.sigBytes+n>>>2]|=r<<24-(this.sigBytes+n)%4*8}else for(let n=0;n<e.sigBytes;n+=4)this.words[this.sigBytes+n>>>2]=e.words[n>>>2];return this.sigBytes+=e.sigBytes,this}clamp(){this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4)}clone(){return new Cs([...this.words])}}const BP={stringify(t){const e=[];for(let n=0;n<t.sigBytes;n++){const r=t.words[n>>>2]>>>24-n%4*8&255;e.push((r>>>4).toString(16),(r&15).toString(16))}return e.join("")}},FP={parse(t){const e=t.length,n=[];for(let r=0;r<e;r++)n[r>>>2]|=(t.charCodeAt(r)&255)<<24-r%4*8;return new Cs(n,e)}},LP={parse(t){return FP.parse(unescape(encodeURIComponent(t)))}};class $P{constructor(){this._data=new Cs,this._nDataBytes=0,this._minBufferSize=0,this.blockSize=512/32}reset(){this._data=new Cs,this._nDataBytes=0}_append(e){typeof e=="string"&&(e=LP.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes}_doProcessBlock(e,n){}_process(e){let n,r=this._data.sigBytes/(this.blockSize*4);e?r=Math.ceil(r):r=Math.max((r|0)-this._minBufferSize,0);const i=r*this.blockSize,s=Math.min(i*4,this._data.sigBytes);if(i){for(let o=0;o<i;o+=this.blockSize)this._doProcessBlock(this._data.words,o);n=this._data.words.splice(0,i),this._data.sigBytes-=s}return new Cs(n,s)}}class jP extends $P{update(e){return this._append(e),this._process(),this}finalize(e){e&&this._append(e)}}const A_=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],UP=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],ao=[];class zP extends jP{constructor(){super(...arguments),this._hash=new Cs([...A_])}reset(){super.reset(),this._hash=new Cs([...A_])}_doProcessBlock(e,n){const r=this._hash.words;let i=r[0],s=r[1],o=r[2],a=r[3],l=r[4],f=r[5],h=r[6],p=r[7];for(let y=0;y<64;y++){if(y<16)ao[y]=e[n+y]|0;else{const k=ao[y-15],z=(k<<25|k>>>7)^(k<<14|k>>>18)^k>>>3,W=ao[y-2],Q=(W<<15|W>>>17)^(W<<13|W>>>19)^W>>>10;ao[y]=z+ao[y-7]+Q+ao[y-16]}const w=l&f^~l&h,I=i&s^i&o^s&o,E=(i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22),$=(l<<26|l>>>6)^(l<<21|l>>>11)^(l<<7|l>>>25),S=p+$+w+UP[y]+ao[y],_=E+I;p=h,h=f,f=l,l=a+S|0,a=o,o=s,s=i,i=S+_|0}r[0]=r[0]+i|0,r[1]=r[1]+s|0,r[2]=r[2]+o|0,r[3]=r[3]+a|0,r[4]=r[4]+l|0,r[5]=r[5]+f|0,r[6]=r[6]+h|0,r[7]=r[7]+p|0}finalize(e){super.finalize(e);const n=this._nDataBytes*8,r=this._data.sigBytes*8;return this._data.words[r>>>5]|=128<<24-r%32,this._data.words[(r+64>>>9<<4)+14]=Math.floor(n/4294967296),this._data.words[(r+64>>>9<<4)+15]=n,this._data.sigBytes=this._data.words.length*4,this._process(),this._hash}}function VP(t){return new zP().finalize(t).toString()}function KP(t){return Promise.resolve(VP(t))}async function WP(t){var e=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",e),r=Array.prototype.map.call(new Uint8Array(n),i=>("00"+i.toString(16)).slice(-2)).join("");return r}var qP=typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof crypto.subtle.digest=="function",HP=qP?WP:KP;function QP(){return new Promise(t=>setTimeout(t,0))}function YP(t=0){return new Promise(e=>setTimeout(e,t))}function ZI(t){return t&&typeof t.then=="function"?t:Promise.resolve(t)}var dd=Promise.resolve(!0),Xn=Promise.resolve(!1),vg=Promise.resolve(null),un=Promise.resolve();function gg(t=1e4){return typeof requestIdleCallback=="function"?new Promise(e=>{requestIdleCallback(()=>e(),{timeout:t})}):YP(0)}var Zp=un;function GP(t=void 0){return Zp=Zp.then(()=>gg(t)),Zp}function JP(t,e){return t.reduce((n,r)=>n.then(r),Promise.resolve(e))}var XP=/\./g,P_="abcdefghijklmnopqrstuvwxyz";function iu(t=10){for(var e="",n=0;n<t;n++)e+=P_.charAt(Math.floor(Math.random()*P_.length));return e}function eE(t){t+="";var e=t.charAt(0).toUpperCase();return e+t.substr(1)}function zu(t){for(;t.charAt(0)===".";)t=t.substr(1);for(;t.slice(-1)===".";)t=t.slice(0,-1);return t}function Va(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,r;if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Va(t[r],e[r]))return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();var i=Object.keys(t);if(n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){var s=i[r];if(!Va(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}var Oy=t=>{var e=typeof t;return t!==null&&(e==="object"||e==="function")},em=new Set(["__proto__","prototype","constructor"]),ZP=new Set("0123456789");function tE(t){var e=[],n="",r="start",i=!1;for(var s of t)switch(s){case"\\":{if(r==="index")throw new Error("Invalid character in an index");if(r==="indexEnd")throw new Error("Invalid character after an index");i&&(n+=s),r="property",i=!i;break}case".":{if(r==="index")throw new Error("Invalid character in an index");if(r==="indexEnd"){r="property";break}if(i){i=!1,n+=s;break}if(em.has(n))return[];e.push(n),n="",r="property";break}case"[":{if(r==="index")throw new Error("Invalid character in an index");if(r==="indexEnd"){r="index";break}if(i){i=!1,n+=s;break}if(r==="property"){if(em.has(n))return[];e.push(n),n=""}r="index";break}case"]":{if(r==="index"){e.push(Number.parseInt(n,10)),n="",r="indexEnd";break}if(r==="indexEnd")throw new Error("Invalid character after an index")}default:{if(r==="index"&&!ZP.has(s))throw new Error("Invalid character in an index");if(r==="indexEnd")throw new Error("Invalid character after an index");r==="start"&&(r="property"),i&&(i=!1,n+="\\"),n+=s}}switch(i&&(n+="\\"),r){case"property":{if(em.has(n))return[];e.push(n);break}case"index":throw new Error("Index was not closed");case"start":{e.push("");break}}return e}function nE(t,e){if(typeof e!="number"&&Array.isArray(t)){var n=Number.parseInt(e,10);return Number.isInteger(n)&&t[n]===t[e]}return!1}function eR(t,e){if(nE(t,e))throw new Error("Cannot use string index")}function Ts(t,e,n){if(Array.isArray(e)&&(e=e.join(".")),!e.includes(".")&&!e.includes("["))return t[e];if(!Oy(t)||typeof e!="string")return n===void 0?t:n;var r=tE(e);if(r.length===0)return n;for(var i=0;i<r.length;i++){var s=r[i];if(nE(t,s)?t=i===r.length-1?void 0:null:t=t[s],t==null){if(i!==r.length-1)return n;break}}return t===void 0?n:t}function rE(t,e,n){if(Array.isArray(e)&&(e=e.join(".")),!Oy(t)||typeof e!="string")return t;for(var r=t,i=tE(e),s=0;s<i.length;s++){var o=i[s];eR(t,o),s===i.length-1?t[o]=n:Oy(t[o])||(t[o]=typeof i[s+1]=="number"?[]:{}),t=t[o]}return r}function Bo(t,e){var n=t.get(e);if(typeof n>"u")throw new Error("missing value from map "+e);return n}function Br(t,e,n,r){var i=t.get(e);return typeof i>"u"?(i=n(),t.set(e,i)):r&&r(i),i}function pt(t){var e=t.split("-"),n="RxDB";return e.forEach(r=>{n+=eE(r)}),n+="Plugin",new Error(`You are using a function which must be overwritten by a plugin.
        You should either prevent the usage of this function or add the plugin via:
            import { `+n+" } from 'rxdb/plugins/"+t+`';
            addRxPlugin(`+n+`);
        `)}function ky(t){var e={name:t.name,message:t.message,rxdb:t.rxdb,parameters:t.parameters,code:t.code,stack:t.stack?t.stack.replace(/\n/g,` 
 `):void 0};return e}var tm=0;function Ft(){var t=Date.now();t=t+.01,t<=tm&&(t=tm+.01);var e=parseFloat(t.toFixed(2));return tm=e,e}function ye(t,e){if(!t)throw e||(e=""),new Error("ensureNotFalsy() is falsy: "+e);return t}var Ai={bufferSize:1,refCount:!0},wg="15.9.1";function Dl(t,e){return Dl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Dl(t,e)}function _g(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Dl(t,e)}function Dy(t){return Dy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Dy(t)}function tR(t){try{return Function.toString.call(t).indexOf("[native code]")!==-1}catch{return typeof t=="function"}}function iE(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(iE=function(){return!!t})()}function nR(t,e,n){if(iE())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var i=new(t.bind.apply(t,r));return n&&Dl(i,n.prototype),i}function hd(t){var e=typeof Map=="function"?new Map:void 0;return hd=function(r){if(r===null||!tR(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(r))return e.get(r);e.set(r,i)}function i(){return nR(r,arguments,Dy(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Dl(i,r)},hd(t)}var it={isDevMode(){return!1},deepFreezeWhenDevMode(t){return t},tunnelErrorMessage(t){return"RxDB Error-Code "+t+`.
        Error messages are not included in RxDB core to reduce build size.
        - To find out what this error means, either use the dev-mode-plugin https://rxdb.info/dev-mode.html
        - or search for the error code here: https://github.com/pubkey/rxdb/search?q=`+t+`
        `}};function rR(t){var e="";return Object.keys(t).length===0||(e+=`Given parameters: {
`,e+=Object.keys(t).map(n=>{var r="[object Object]";try{n==="errors"?r=t[n].map(i=>JSON.stringify(i,Object.getOwnPropertyNames(i))):r=JSON.stringify(t[n],function(i,s){return s===void 0?null:s},2)}catch{}return n+":"+r}).join(`
`),e+="}"),e}function sE(t,e,n){return"RxError ("+e+`):
`+t+`
`+rR(n)}var iR=function(t){_g(e,t);function e(r,i,s={}){var o,a=sE(i,r,s);return o=t.call(this,a)||this,o.code=r,o.message=a,o.parameters=s,o.rxdb=!0,o}var n=e.prototype;return n.toString=function(){return this.message},Ks(e,[{key:"name",get:function(){return"RxError ("+this.code+")"}},{key:"typeError",get:function(){return!1}}]),e}(hd(Error)),sR=function(t){_g(e,t);function e(r,i,s={}){var o,a=sE(i,r,s);return o=t.call(this,a)||this,o.code=r,o.message=a,o.parameters=s,o.rxdb=!0,o}var n=e.prototype;return n.toString=function(){return this.message},Ks(e,[{key:"name",get:function(){return"RxTypeError ("+this.code+")"}},{key:"typeError",get:function(){return!0}}]),e}(hd(TypeError));function le(t,e){return new iR(t,it.tunnelErrorMessage(t),e)}function el(t,e){return new sR(t,it.tunnelErrorMessage(t),e)}function _h(t){return t&&t.status===409?t:!1}var oR={409:"document write conflict",422:"schema validation error",510:"attachment data missing"};function aR(t){return le("COL20",{name:oR[t.status],document:t.documentId,writeError:t})}var xl={preAddRxPlugin:[],preCreateRxDatabase:[],createRxDatabase:[],preCreateRxCollection:[],createRxCollection:[],postDestroyRxCollection:[],postRemoveRxCollection:[],preCreateRxSchema:[],createRxSchema:[],preCreateRxQuery:[],prePrepareQuery:[],createRxDocument:[],postCreateRxDocument:[],preCreateRxStorageInstance:[],preMigrateDocument:[],postMigrateDocument:[],preDestroyRxDatabase:[],postRemoveRxDatabase:[],preReplicationMasterWrite:[],preReplicationMasterWriteDocumentsHandle:[]};function Fr(t,e){xl[t]&&xl[t].forEach(n=>n(e))}function Fo(t,e){return Promise.all(xl[t].map(n=>n(e)))}function zi(t,e){var n=e;n=n.replace(XP,".properties."),n="properties."+n,n=zu(n);var r=Ts(t,n);return r}function oE(t,e,n){if(typeof e.primaryKey=="string")return n;var r=qs(e,n),i=n[t];if(i&&i!==r)throw le("DOC19",{args:{documentData:n,existingPrimary:i,newPrimary:r},schema:e});return n[t]=r,n}function $n(t){return typeof t=="string"?t:t.key}function uR(t){var e=$n(t.primaryKey),n=zi(t,e);return ye(n.maxLength)}function qs(t,e){if(typeof t.primaryKey=="string")return e[t.primaryKey];var n=t.primaryKey;return n.fields.map(r=>{var i=Ts(e,r);if(typeof i>"u")throw le("DOC18",{args:{field:r,documentData:e}});return i}).join(n.separator)}function lR(t){var e=fd(t,!0);return e}function cR(t){return["_deleted",t]}function bh(t){t=$e(t);var e=$n(t.primaryKey);t.properties=$e(t.properties),t.additionalProperties=!1,Object.prototype.hasOwnProperty.call(t,"keyCompression")||(t.keyCompression=!1),t.indexes=t.indexes?t.indexes.slice(0):[],t.required=t.required?t.required.slice(0):[],t.encrypted=t.encrypted?t.encrypted.slice(0):[],t.properties._rev={type:"string",minLength:1},t.properties._attachments={type:"object"},t.properties._deleted={type:"boolean"},t.properties._meta=fR,t.required=t.required?t.required.slice(0):[],t.required.push("_deleted"),t.required.push("_rev"),t.required.push("_meta"),t.required.push("_attachments");var n=aE(t);Ua(t.required,n),t.required=t.required.filter(s=>!s.includes(".")).filter((s,o,a)=>a.indexOf(s)===o),t.version=t.version||0;var r=t.indexes.map(s=>{var o=mg(s)?s.slice(0):[s];return o.includes(e)||o.push(e),o[0]!=="_deleted"&&o.unshift("_deleted"),o});r.length===0&&r.push(cR(e)),r.push(["_meta.lwt",e]),t.internalIndexes&&t.internalIndexes.map(s=>{r.push(s)});var i=new Set;return r.filter(s=>{var o=s.join(",");return i.has(o)?!1:(i.add(o),!0)}),t.indexes=r,t}var fR={type:"object",properties:{lwt:{type:"number",minimum:yg,maximum:1e15,multipleOf:.01}},additionalProperties:!0,required:["lwt"]};function aE(t){var e=Object.keys(t.properties).filter(r=>t.properties[r].final),n=$n(t.primaryKey);return e.push(n),typeof t.primaryKey!="string"&&t.primaryKey.fields.forEach(r=>e.push(r)),e}function dR(t,e){for(var n=Object.keys(t.defaultValues),r=0;r<n.length;++r){var i=n[r];(!Object.prototype.hasOwnProperty.call(e,i)||typeof e[i]>"u")&&(e[i]=t.defaultValues[i])}return e}var uE=function(){function t(n,r){this.jsonSchema=n,this.hashFunction=r,this.indexes=hR(this.jsonSchema),this.primaryPath=$n(this.jsonSchema.primaryKey),this.finalFields=aE(this.jsonSchema)}var e=t.prototype;return e.validateChange=function(r,i){this.finalFields.forEach(s=>{if(!Va(r[s],i[s]))throw le("DOC9",{dataBefore:r,dataAfter:i,fieldName:s,schema:this.jsonSchema})})},e.getDocumentPrototype=function(){var r={},i=zi(this.jsonSchema,"");return Object.keys(i).forEach(s=>{var o=s;r.__defineGetter__(s,function(){if(!(!this.get||typeof this.get!="function")){var a=this.get(o);return a}}),Object.defineProperty(r,s+"$",{get:function(){return this.get$(o)},enumerable:!1,configurable:!1}),Object.defineProperty(r,s+"$$",{get:function(){return this.get$$(o)},enumerable:!1,configurable:!1}),Object.defineProperty(r,s+"_",{get:function(){return this.populate(o)},enumerable:!1,configurable:!1})}),xs(this,"getDocumentPrototype",()=>r),r},e.getPrimaryOfDocumentData=function(r){return qs(this.jsonSchema,r)},Ks(t,[{key:"version",get:function(){return this.jsonSchema.version}},{key:"defaultValues",get:function(){var n={};return Object.entries(this.jsonSchema.properties).filter(([,r])=>Object.prototype.hasOwnProperty.call(r,"default")).forEach(([r,i])=>n[r]=i.default),xs(this,"defaultValues",n)}},{key:"hash",get:function(){return xs(this,"hash",this.hashFunction(JSON.stringify(this.jsonSchema)))}}]),t}();function hR(t){return(t.indexes||[]).map(e=>mg(e)?e:[e])}function pR(t){var e=t.version?t.version:0,n=0;return new Array(e).fill(0).map(()=>n++)}function mR(t,e,n=!0){n&&Fr("preCreateRxSchema",t);var r=bh(t);r=lR(r),it.deepFreezeWhenDevMode(r);var i=new uE(r,e);return Fr("createRxSchema",i),i}function qe(t){return typeof t=="function"}function yR(t){return qe(t==null?void 0:t.lift)}function Sn(t){return function(e){if(yR(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}var bg=function(t){return t&&typeof t.length=="number"&&typeof t!="function"};function lE(t){return qe(t==null?void 0:t.then)}function Sg(t){var e=function(r){Error.call(r),r.stack=new Error().stack},n=t(e);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var nm=Sg(function(t){return function(n){t(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(r,i){return i+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function pd(t,e){if(t){var n=t.indexOf(e);0<=n&&t.splice(n,1)}}var su=function(){function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var e,n,r,i,s;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var a=$a(o),l=a.next();!l.done;l=a.next()){var f=l.value;f.remove(this)}}catch(E){e={error:E}}finally{try{l&&!l.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}else o.remove(this);var h=this.initialTeardown;if(qe(h))try{h()}catch(E){s=E instanceof nm?E.errors:[E]}var p=this._finalizers;if(p){this._finalizers=null;try{for(var y=$a(p),w=y.next();!w.done;w=y.next()){var I=w.value;try{R_(I)}catch(E){s=s??[],E instanceof nm?s=br(br([],nr(s)),nr(E.errors)):s.push(E)}}}catch(E){r={error:E}}finally{try{w&&!w.done&&(i=y.return)&&i.call(y)}finally{if(r)throw r.error}}}if(s)throw new nm(s)}},t.prototype.add=function(e){var n;if(e&&e!==this)if(this.closed)R_(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}},t.prototype._hasParent=function(e){var n=this._parentage;return n===e||Array.isArray(n)&&n.includes(e)},t.prototype._addParent=function(e){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e},t.prototype._removeParent=function(e){var n=this._parentage;n===e?this._parentage=null:Array.isArray(n)&&pd(n,e)},t.prototype.remove=function(e){var n=this._finalizers;n&&pd(n,e),e instanceof t&&e._removeParent(this)},t.EMPTY=function(){var e=new t;return e.closed=!0,e}(),t}(),cE=su.EMPTY;function fE(t){return t instanceof su||t&&"closed"in t&&qe(t.remove)&&qe(t.add)&&qe(t.unsubscribe)}function R_(t){qe(t)?t():t.unsubscribe()}var dE={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},xy={setTimeout:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=xy.delegate;return i!=null&&i.setTimeout?i.setTimeout.apply(i,br([t,e],nr(n))):setTimeout.apply(void 0,br([t,e],nr(n)))},clearTimeout:function(t){var e=xy.delegate;return((e==null?void 0:e.clearTimeout)||clearTimeout)(t)},delegate:void 0};function hE(t){xy.setTimeout(function(){throw t})}function Cy(){}function xf(t){t()}var Ig=function(t){pi(e,t);function e(n){var r=t.call(this)||this;return r.isStopped=!1,n?(r.destination=n,fE(n)&&n.add(r)):r.destination=_R,r}return e.create=function(n,r,i){return new Ka(n,r,i)},e.prototype.next=function(n){this.isStopped||this._next(n)},e.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(n){this.destination.next(n)},e.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(su),vR=Function.prototype.bind;function rm(t,e){return vR.call(t,e)}var gR=function(){function t(e){this.partialObserver=e}return t.prototype.next=function(e){var n=this.partialObserver;if(n.next)try{n.next(e)}catch(r){sf(r)}},t.prototype.error=function(e){var n=this.partialObserver;if(n.error)try{n.error(e)}catch(r){sf(r)}else sf(e)},t.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(n){sf(n)}},t}(),Ka=function(t){pi(e,t);function e(n,r,i){var s=t.call(this)||this,o;if(qe(n)||!n)o={next:n??void 0,error:r??void 0,complete:i??void 0};else{var a;s&&dE.useDeprecatedNextContext?(a=Object.create(n),a.unsubscribe=function(){return s.unsubscribe()},o={next:n.next&&rm(n.next,a),error:n.error&&rm(n.error,a),complete:n.complete&&rm(n.complete,a)}):o=n}return s.destination=new gR(o),s}return e}(Ig);function sf(t){hE(t)}function wR(t){throw t}var _R={closed:!0,next:Cy,error:wR,complete:Cy},Eg=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function Hs(t){return t}function bR(t){return t.length===0?Hs:t.length===1?t[0]:function(n){return t.reduce(function(r,i){return i(r)},n)}}var Ot=function(){function t(e){e&&(this._subscribe=e)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(e,n,r){var i=this,s=IR(e)?e:new Ka(e,n,r);return xf(function(){var o=i,a=o.operator,l=o.source;s.add(a?a.call(s,l):l?i._subscribe(s):i._trySubscribe(s))}),s},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(n){e.error(n)}},t.prototype.forEach=function(e,n){var r=this;return n=T_(n),new n(function(i,s){var o=new Ka({next:function(a){try{e(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:i});r.subscribe(o)})},t.prototype._subscribe=function(e){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(e)},t.prototype[Eg]=function(){return this},t.prototype.pipe=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return bR(e)(this)},t.prototype.toPromise=function(e){var n=this;return e=T_(e),new e(function(r,i){var s;n.subscribe(function(o){return s=o},function(o){return i(o)},function(){return r(s)})})},t.create=function(e){return new t(e)},t}();function T_(t){var e;return(e=t??dE.Promise)!==null&&e!==void 0?e:Promise}function SR(t){return t&&qe(t.next)&&qe(t.error)&&qe(t.complete)}function IR(t){return t&&t instanceof Ig||SR(t)&&fE(t)}function pE(t){return qe(t[Eg])}function mE(t){return Symbol.asyncIterator&&qe(t==null?void 0:t[Symbol.asyncIterator])}function yE(t){return new TypeError("You provided "+(t!==null&&typeof t=="object"?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function ER(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var vE=ER();function gE(t){return qe(t==null?void 0:t[vE])}function wE(t){return Ar(this,arguments,function(){var n,r,i,s;return GI(this,function(o){switch(o.label){case 0:n=t.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,ge(n.read())];case 3:return r=o.sent(),i=r.value,s=r.done,s?[4,ge(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,ge(i)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}function _E(t){return qe(t==null?void 0:t.getReader)}function jn(t){if(t instanceof Ot)return t;if(t!=null){if(pE(t))return OR(t);if(bg(t))return kR(t);if(lE(t))return DR(t);if(mE(t))return bE(t);if(gE(t))return xR(t);if(_E(t))return CR(t)}throw yE(t)}function OR(t){return new Ot(function(e){var n=t[Eg]();if(qe(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function kR(t){return new Ot(function(e){for(var n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function DR(t){return new Ot(function(e){t.then(function(n){e.closed||(e.next(n),e.complete())},function(n){return e.error(n)}).then(null,hE)})}function xR(t){return new Ot(function(e){var n,r;try{for(var i=$a(t),s=i.next();!s.done;s=i.next()){var o=s.value;if(e.next(o),e.closed)return}}catch(a){n={error:a}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}e.complete()})}function bE(t){return new Ot(function(e){AR(t,e).catch(function(n){return e.error(n)})})}function CR(t){return bE(wE(t))}function AR(t,e){var n,r,i,s;return ve(this,void 0,void 0,function(){var o,a;return GI(this,function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),n=Ds(t),l.label=1;case 1:return[4,n.next()];case 2:if(r=l.sent(),!!r.done)return[3,4];if(o=r.value,e.next(o),e.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=l.sent(),i={error:a},[3,11];case 6:return l.trys.push([6,,9,10]),r&&!r.done&&(s=n.return)?[4,s.call(n)]:[3,8];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function cn(t,e,n,r,i){return new PR(t,e,n,r,i)}var PR=function(t){pi(e,t);function e(n,r,i,s,o,a){var l=t.call(this,n)||this;return l.onFinalize=o,l.shouldUnsubscribe=a,l._next=r?function(f){try{r(f)}catch(h){n.error(h)}}:t.prototype._next,l._error=s?function(f){try{s(f)}catch(h){n.error(h)}finally{this.unsubscribe()}}:t.prototype._error,l._complete=i?function(){try{i()}catch(f){n.error(f)}finally{this.unsubscribe()}}:t.prototype._complete,l}return e.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;t.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},e}(Ig),RR=function(t){pi(e,t);function e(n,r){return t.call(this)||this}return e.prototype.schedule=function(n,r){return this},e}(su),md={setInterval:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=md.delegate;return i!=null&&i.setInterval?i.setInterval.apply(i,br([t,e],nr(n))):setInterval.apply(void 0,br([t,e],nr(n)))},clearInterval:function(t){var e=md.delegate;return((e==null?void 0:e.clearInterval)||clearInterval)(t)},delegate:void 0},TR=function(t){pi(e,t);function e(n,r){var i=t.call(this,n,r)||this;return i.scheduler=n,i.work=r,i.pending=!1,i}return e.prototype.schedule=function(n,r){var i;if(r===void 0&&(r=0),this.closed)return this;this.state=n;var s=this.id,o=this.scheduler;return s!=null&&(this.id=this.recycleAsyncId(o,s,r)),this.pending=!0,this.delay=r,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,r),this},e.prototype.requestAsyncId=function(n,r,i){return i===void 0&&(i=0),md.setInterval(n.flush.bind(n,this),i)},e.prototype.recycleAsyncId=function(n,r,i){if(i===void 0&&(i=0),i!=null&&this.delay===i&&this.pending===!1)return r;r!=null&&md.clearInterval(r)},e.prototype.execute=function(n,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(n,r);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(n,r){var i=!1,s;try{this.work(n)}catch(o){i=!0,s=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),s},e.prototype.unsubscribe=function(){if(!this.closed){var n=this,r=n.id,i=n.scheduler,s=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,pd(s,this),r!=null&&(this.id=this.recycleAsyncId(i,r,null)),this.delay=null,t.prototype.unsubscribe.call(this)}},e}(RR),Og={now:function(){return(Og.delegate||Date).now()},delegate:void 0},M_=function(){function t(e,n){n===void 0&&(n=t.now),this.schedulerActionCtor=e,this.now=n}return t.prototype.schedule=function(e,n,r){return n===void 0&&(n=0),new this.schedulerActionCtor(this,e).schedule(r,n)},t.now=Og.now,t}(),MR=function(t){pi(e,t);function e(n,r){r===void 0&&(r=M_.now);var i=t.call(this,n,r)||this;return i.actions=[],i._active=!1,i}return e.prototype.flush=function(n){var r=this.actions;if(this._active){r.push(n);return}var i;this._active=!0;do if(i=n.execute(n.state,n.delay))break;while(n=r.shift());if(this._active=!1,i){for(;n=r.shift();)n.unsubscribe();throw i}},e}(M_),NR=new MR(TR),BR=NR;function SE(t){return t&&qe(t.schedule)}function FR(t){return t instanceof Date&&!isNaN(t)}function IE(t,e,n){t===void 0&&(t=0),n===void 0&&(n=BR);var r=-1;return e!=null&&(SE(e)?n=e:r=e),new Ot(function(i){var s=FR(t)?+t-n.now():t;s<0&&(s=0);var o=0;return n.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}function kg(t){return t[t.length-1]}function EE(t){return qe(kg(t))?t.pop():void 0}function ou(t){return SE(kg(t))?t.pop():void 0}function OE(t,e){return typeof kg(t)=="number"?t.pop():e}function Ti(t,e,n,r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function kE(t){return Sn(function(e,n){var r=null,i=!1,s;r=e.subscribe(cn(n,void 0,void 0,function(o){s=jn(t(o,kE(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}var LR=Array.isArray,$R=Object.getPrototypeOf,jR=Object.prototype,UR=Object.keys;function zR(t){if(t.length===1){var e=t[0];if(LR(e))return{args:e,keys:null};if(VR(e)){var n=UR(e);return{args:n.map(function(r){return e[r]}),keys:n}}}return{args:t,keys:null}}function VR(t){return t&&typeof t=="object"&&$R(t)===jR}function DE(t,e){return e===void 0&&(e=0),Sn(function(n,r){n.subscribe(cn(r,function(i){return Ti(r,t,function(){return r.next(i)},e)},function(){return Ti(r,t,function(){return r.complete()},e)},function(i){return Ti(r,t,function(){return r.error(i)},e)}))})}function xE(t,e){return e===void 0&&(e=0),Sn(function(n,r){r.add(t.schedule(function(){return n.subscribe(r)},e))})}function KR(t,e){return jn(t).pipe(xE(e),DE(e))}function WR(t,e){return jn(t).pipe(xE(e),DE(e))}function qR(t,e){return new Ot(function(n){var r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function HR(t,e){return new Ot(function(n){var r;return Ti(n,e,function(){r=t[vE](),Ti(n,e,function(){var i,s,o;try{i=r.next(),s=i.value,o=i.done}catch(a){n.error(a);return}o?n.complete():n.next(s)},0,!0)}),function(){return qe(r==null?void 0:r.return)&&r.return()}})}function CE(t,e){if(!t)throw new Error("Iterable cannot be null");return new Ot(function(n){Ti(n,e,function(){var r=t[Symbol.asyncIterator]();Ti(n,e,function(){r.next().then(function(i){i.done?n.complete():n.next(i.value)})},0,!0)})})}function QR(t,e){return CE(wE(t),e)}function YR(t,e){if(t!=null){if(pE(t))return KR(t,e);if(bg(t))return qR(t,e);if(lE(t))return WR(t,e);if(mE(t))return CE(t,e);if(gE(t))return HR(t,e);if(_E(t))return QR(t,e)}throw yE(t)}function au(t,e){return e?YR(t,e):jn(t)}function Mt(t,e){return Sn(function(n,r){var i=0;n.subscribe(cn(r,function(s){r.next(t.call(e,s,i++))}))})}var GR=Array.isArray;function JR(t,e){return GR(e)?t.apply(void 0,br([],nr(e))):t(e)}function AE(t){return Mt(function(e){return JR(t,e)})}function XR(t,e){return t.reduce(function(n,r,i){return n[r]=e[i],n},{})}function PE(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=ou(t),r=EE(t),i=zR(t),s=i.args,o=i.keys;if(s.length===0)return au([],n);var a=new Ot(ZR(s,n,o?function(l){return XR(o,l)}:Hs));return r?a.pipe(AE(r)):a}function ZR(t,e,n){return n===void 0&&(n=Hs),function(r){N_(e,function(){for(var i=t.length,s=new Array(i),o=i,a=i,l=function(h){N_(e,function(){var p=au(t[h],e),y=!1;p.subscribe(cn(r,function(w){s[h]=w,y||(y=!0,a--),a||r.next(n(s.slice()))},function(){--o||r.complete()}))},r)},f=0;f<i;f++)l(f)},r)}}function N_(t,e,n){t?Ti(n,t,e):e()}function eT(t,e,n,r,i,s,o,a){var l=[],f=0,h=0,p=!1,y=function(){p&&!l.length&&!f&&e.complete()},w=function(E){return f<r?I(E):l.push(E)},I=function(E){s&&e.next(E),f++;var $=!1;jn(n(E,h++)).subscribe(cn(e,function(S){i==null||i(S),s?w(S):e.next(S)},function(){$=!0},void 0,function(){if($)try{f--;for(var S=function(){var _=l.shift();o?Ti(e,o,function(){return I(_)}):I(_)};l.length&&f<r;)S();y()}catch(_){e.error(_)}}))};return t.subscribe(cn(e,w,function(){p=!0,y()})),function(){a==null||a()}}function Lr(t,e,n){return n===void 0&&(n=1/0),qe(e)?Lr(function(r,i){return Mt(function(s,o){return e(r,s,i,o)})(jn(t(r,i)))},n):(typeof e=="number"&&(n=e),Sn(function(r,i){return eT(r,i,t,n)}))}var tT=Array.isArray;function nT(t){return t.length===1&&tT(t[0])?t[0]:t}function Dg(t){return t===void 0&&(t=1/0),Lr(Hs,t)}function rT(){return Dg(1)}var iT=Sg(function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Kt=function(t){pi(e,t);function e(){var n=t.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return e.prototype.lift=function(n){var r=new B_(this,this);return r.operator=n,r},e.prototype._throwIfClosed=function(){if(this.closed)throw new iT},e.prototype.next=function(n){var r=this;xf(function(){var i,s;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var o=$a(r.currentObservers),a=o.next();!a.done;a=o.next()){var l=a.value;l.next(n)}}catch(f){i={error:f}}finally{try{a&&!a.done&&(s=o.return)&&s.call(o)}finally{if(i)throw i.error}}}})},e.prototype.error=function(n){var r=this;xf(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=n;for(var i=r.observers;i.length;)i.shift().error(n)}})},e.prototype.complete=function(){var n=this;xf(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var r=n.observers;r.length;)r.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(n){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,n)},e.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},e.prototype._innerSubscribe=function(n){var r=this,i=this,s=i.hasError,o=i.isStopped,a=i.observers;return s||o?cE:(this.currentObservers=null,a.push(n),new su(function(){r.currentObservers=null,pd(a,n)}))},e.prototype._checkFinalizedStatuses=function(n){var r=this,i=r.hasError,s=r.thrownError,o=r.isStopped;i?n.error(s):o&&n.complete()},e.prototype.asObservable=function(){var n=new Ot;return n.source=this,n},e.create=function(n,r){return new B_(n,r)},e}(Ot),B_=function(t){pi(e,t);function e(n,r){var i=t.call(this)||this;return i.destination=n,i.source=r,i}return e.prototype.next=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.next)===null||i===void 0||i.call(r,n)},e.prototype.error=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.error)===null||i===void 0||i.call(r,n)},e.prototype.complete=function(){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||r===void 0||r.call(n)},e.prototype._subscribe=function(n){var r,i;return(i=(r=this.source)===null||r===void 0?void 0:r.subscribe(n))!==null&&i!==void 0?i:cE},e}(Kt);function F_(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return rT()(au(t,ou(t)))}var RE=new Ot(function(t){return t.complete()});function im(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=ou(t);return au(t,n)}function Ms(t,e){return e===void 0&&(e=Hs),t=t??sT,Sn(function(n,r){var i,s=!0;n.subscribe(cn(r,function(o){var a=e(o);(s||!t(i,a))&&(s=!1,i=a,r.next(o))}))})}function sT(t,e){return t===e}function lt(t,e){return Sn(function(n,r){var i=0;n.subscribe(cn(r,function(s){return t.call(e,s,i++)&&r.next(s)}))})}var TE=Sg(function(t){return function(){t(this),this.name="EmptyError",this.message="no elements in sequence"}});function oT(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=ou(t),r=OE(t,1/0);return t=nT(t),Sn(function(i,s){Dg(r)(au(br([i],nr(t)),n)).subscribe(s)})}function aT(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return oT.apply(void 0,br([],nr(t)))}var Cr=function(t){pi(e,t);function e(n){var r=t.call(this)||this;return r._value=n,r}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(n){var r=t.prototype._subscribe.call(this,n);return!r.closed&&n.next(this._value),r},e.prototype.getValue=function(){var n=this,r=n.hasError,i=n.thrownError,s=n._value;if(r)throw i;return this._throwIfClosed(),s},e.prototype.next=function(n){t.prototype.next.call(this,this._value=n)},e}(Kt),ME=function(t){pi(e,t);function e(n,r,i){n===void 0&&(n=1/0),r===void 0&&(r=1/0),i===void 0&&(i=Og);var s=t.call(this)||this;return s._bufferSize=n,s._windowTime=r,s._timestampProvider=i,s._buffer=[],s._infiniteTimeWindow=!0,s._infiniteTimeWindow=r===1/0,s._bufferSize=Math.max(1,n),s._windowTime=Math.max(1,r),s}return e.prototype.next=function(n){var r=this,i=r.isStopped,s=r._buffer,o=r._infiniteTimeWindow,a=r._timestampProvider,l=r._windowTime;i||(s.push(n),!o&&s.push(a.now()+l)),this._trimBuffer(),t.prototype.next.call(this,n)},e.prototype._subscribe=function(n){this._throwIfClosed(),this._trimBuffer();for(var r=this._innerSubscribe(n),i=this,s=i._infiniteTimeWindow,o=i._buffer,a=o.slice(),l=0;l<a.length&&!n.closed;l+=s?1:2)n.next(a[l]);return this._checkFinalizedStatuses(n),r},e.prototype._trimBuffer=function(){var n=this,r=n._bufferSize,i=n._timestampProvider,s=n._buffer,o=n._infiniteTimeWindow,a=(o?1:2)*r;if(r<1/0&&a<s.length&&s.splice(0,s.length-a),!o){for(var l=i.now(),f=0,h=1;h<s.length&&s[h]<=l;h+=2)f=h;f&&s.splice(0,f+1)}},e}(Kt);function uT(t){t===void 0&&(t=1/0);var e;t&&typeof t=="object"?e=t:e={count:t};var n=e.count,r=n===void 0?1/0:n,i=e.delay,s=e.resetOnSuccess,o=s===void 0?!1:s;return r<=0?Hs:Sn(function(a,l){var f=0,h,p=function(){var y=!1;h=a.subscribe(cn(l,function(w){o&&(f=0),l.next(w)},void 0,function(w){if(f++<r){var I=function(){h?(h.unsubscribe(),h=null,p()):y=!0};if(i!=null){var E=typeof i=="number"?IE(i):jn(i(w,f)),$=cn(l,function(){$.unsubscribe(),I()},function(){l.complete()});E.subscribe($)}else I()}else l.error(w)})),y&&(h.unsubscribe(),h=null,p())};p()})}function lT(t){t===void 0&&(t={});var e=t.connector,n=e===void 0?function(){return new Kt}:e,r=t.resetOnError,i=r===void 0?!0:r,s=t.resetOnComplete,o=s===void 0?!0:s,a=t.resetOnRefCountZero,l=a===void 0?!0:a;return function(f){var h,p,y,w=0,I=!1,E=!1,$=function(){p==null||p.unsubscribe(),p=void 0},S=function(){$(),h=y=void 0,I=E=!1},_=function(){var k=h;S(),k==null||k.unsubscribe()};return Sn(function(k,z){w++,!E&&!I&&$();var W=y=y??n();z.add(function(){w--,w===0&&!E&&!I&&(p=sm(_,l))}),W.subscribe(z),!h&&w>0&&(h=new Ka({next:function(Q){return W.next(Q)},error:function(Q){E=!0,$(),p=sm(S,i,Q),W.error(Q)},complete:function(){I=!0,$(),p=sm(S,o),W.complete()}}),jn(k).subscribe(h))})(f)}}function sm(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(e===!0){t();return}if(e!==!1){var i=new Ka({next:function(){i.unsubscribe(),t()}});return jn(e.apply(void 0,br([],nr(n)))).subscribe(i)}}function Pi(t,e,n){var r,i,s,o,a=!1;return t&&typeof t=="object"?(r=t.bufferSize,o=r===void 0?1/0:r,i=t.windowTime,e=i===void 0?1/0:i,s=t.refCount,a=s===void 0?!1:s,n=t.scheduler):o=t??1/0,lT({connector:function(){return new ME(o,e,n)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:a})}function Hl(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=ou(t);return Sn(function(r,i){(n?F_(t,r,n):F_(t,r)).subscribe(i)})}function Cl(t,e){return Sn(function(n,r){var i=null,s=0,o=!1,a=function(){return o&&!i&&r.complete()};n.subscribe(cn(r,function(l){i==null||i.unsubscribe();var f=0,h=s++;jn(t(l,h)).subscribe(i=cn(r,function(p){return r.next(e?e(l,p,h,f++):p)},function(){i=null,a()}))},function(){o=!0,a()}))})}function NE(t,e){return e===void 0&&(e=!1),Sn(function(n,r){var i=0;n.subscribe(cn(r,function(s){var o=t(s,i++);(o||e)&&r.next(s),!o&&r.complete()}))})}function Ay(t,e,n){var r=qe(t)||e||n?{next:t,error:e,complete:n}:t;return r?Sn(function(i,s){var o;(o=r.subscribe)===null||o===void 0||o.call(r);var a=!0;i.subscribe(cn(s,function(l){var f;(f=r.next)===null||f===void 0||f.call(r,l),s.next(l)},function(){var l;a=!1,(l=r.complete)===null||l===void 0||l.call(r),s.complete()},function(l){var f;a=!1,(f=r.error)===null||f===void 0||f.call(r,l),s.error(l)},function(){var l,f;a&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(f=r.finalize)===null||f===void 0||f.call(r)}))}):Hs}function cT(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=EE(t);return Sn(function(r,i){for(var s=t.length,o=new Array(s),a=t.map(function(){return!1}),l=!1,f=function(p){jn(t[p]).subscribe(cn(i,function(y){o[p]=y,!l&&!a[p]&&(a[p]=!0,(l=a.every(Hs))&&(a=null))},Cy))},h=0;h<s;h++)f(h);r.subscribe(cn(i,function(p){if(l){var y=br([p],nr(o));i.next(n?n.apply(void 0,br([],nr(y))):y)}}))})}function xg(t){return t.documentData?t.documentData:t.previousDocumentData}function fT(t){switch(t.operation){case"INSERT":return{operation:t.operation,id:t.documentId,doc:t.documentData,previous:null};case"UPDATE":return{operation:t.operation,id:t.documentId,doc:it.deepFreezeWhenDevMode(t.documentData),previous:t.previousDocumentData?t.previousDocumentData:"UNKNOWN"};case"DELETE":return{operation:t.operation,id:t.documentId,doc:null,previous:t.previousDocumentData}}}function dT(t){return!!t&&(t instanceof Ot||qe(t.lift)&&qe(t.subscribe))}function hT(t,e){var n=typeof e=="object";return new Promise(function(r,i){var s=!1,o;t.subscribe({next:function(a){o=a,s=!0},error:i,complete:function(){s?r(o):n?r(e.defaultValue):i(new TE)}})})}function As(t,e){var n=typeof e=="object";return new Promise(function(r,i){var s=new Ka({next:function(o){r(o),s.unsubscribe()},error:i,complete:function(){n?r(e.defaultValue):i(new TE)}});t.subscribe(s)})}function Py(t){return new Ot(function(e){jn(t()).subscribe(e)})}var pT=["addListener","removeListener"],mT=["addEventListener","removeEventListener"],yT=["on","off"];function Ry(t,e,n,r){if(qe(n)&&(r=n,n=void 0),r)return Ry(t,e,n).pipe(AE(r));var i=nr(wT(t)?mT.map(function(a){return function(l){return t[a](e,l,n)}}):vT(t)?pT.map(L_(t,e)):gT(t)?yT.map(L_(t,e)):[],2),s=i[0],o=i[1];if(!s&&bg(t))return Lr(function(a){return Ry(a,e,n)})(jn(t));if(!s)throw new TypeError("Invalid event target");return new Ot(function(a){var l=function(){for(var f=[],h=0;h<arguments.length;h++)f[h]=arguments[h];return a.next(1<f.length?f:f[0])};return s(l),function(){return o(l)}})}function L_(t,e){return function(n){return function(r){return t[n](e,r)}}}function vT(t){return qe(t.addListener)&&qe(t.removeListener)}function gT(t){return qe(t.on)&&qe(t.off)}function wT(t){return qe(t.addEventListener)&&qe(t.removeEventListener)}function _T(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=ou(t),r=OE(t,1/0),i=t;return i.length?i.length===1?jn(i[0]):Dg(r)(au(i,n)):RE}function Cg(t){return t[t.length-1]}function bT(t){const e=typeof t;return t!==null&&(e==="object"||e==="function")}function $_(t,e,n){if(Array.isArray(e)&&(e=e.join(".")),!bT(t)||typeof e!="string")return n===void 0?t:n;const r=e.split(".");if(r.length===0)return n;for(let i=0;i<r.length;i++){const s=r[i];if(ST(t,s)?t=i===r.length-1?void 0:null:t=t[s],t==null){if(i!==r.length-1)return n;break}}return t===void 0?n:t}function ST(t,e){if(typeof e!="number"&&Array.isArray(t)){const n=Number.parseInt(e,10);return Number.isInteger(n)&&t[n]===t[e]}return!1}const BE=t=>!!t.queryParams.limit,IT=t=>t.queryParams.limit===1,ET=t=>!!(t.queryParams.skip&&t.queryParams.skip>0),OT=t=>t.changeEvent.operation==="DELETE",kT=t=>t.changeEvent.operation==="INSERT",DT=t=>t.changeEvent.operation==="UPDATE",xT=t=>BE(t)&&t.previousResults.length>=t.queryParams.limit,CT=t=>{const e=t.queryParams.sortFields,n=t.changeEvent.previous,r=t.changeEvent.doc;if(!r)return!1;if(!n)return!0;for(let i=0;i<e.length;i++){const s=e[i],o=$_(n,s),a=$_(r,s);if(o!==a)return!0}return!1},AT=t=>{const e=t.changeEvent.id;if(t.keyDocumentMap)return t.keyDocumentMap.has(e);{const n=t.queryParams.primaryKey,r=t.previousResults;for(let i=0;i<r.length;i++)if(r[i][n]===e)return!0;return!1}},PT=t=>{const e=t.previousResults[0];return!!(e&&e[t.queryParams.primaryKey]===t.changeEvent.id)},RT=t=>{const e=Cg(t.previousResults);return!!(e&&e[t.queryParams.primaryKey]===t.changeEvent.id)},TT=t=>{const e=t.changeEvent.previous;if(!e)return!1;const n=t.previousResults[0];return n?n[t.queryParams.primaryKey]===t.changeEvent.id?!0:t.queryParams.sortComparator(e,n)<0:!1},MT=t=>{const e=t.changeEvent.previous;if(!e)return!1;const n=Cg(t.previousResults);return n?n[t.queryParams.primaryKey]===t.changeEvent.id?!0:t.queryParams.sortComparator(e,n)>0:!1},NT=t=>{const e=t.changeEvent.doc;if(!e)return!1;const n=t.previousResults[0];return n?n[t.queryParams.primaryKey]===t.changeEvent.id?!0:t.queryParams.sortComparator(e,n)<0:!1},BT=t=>{const e=t.changeEvent.doc;if(!e)return!1;const n=Cg(t.previousResults);return n?n[t.queryParams.primaryKey]===t.changeEvent.id?!0:t.queryParams.sortComparator(e,n)>0:!1},FT=t=>{const e=t.changeEvent.previous;return e?t.queryParams.queryMatcher(e):!1},LT=t=>{const e=t.changeEvent.doc;return e?t.queryParams.queryMatcher(e):!1},$T=t=>t.previousResults.length===0,jT={0:kT,1:DT,2:OT,3:BE,4:IT,5:ET,6:$T,7:xT,8:PT,9:RT,10:CT,11:AT,12:TT,13:MT,14:NT,15:BT,16:FT,17:LT};function FE(t,e,n,r){var i=t.length,s=i-1,o=0;if(i===0)return t.push(e),0;for(var a;r<=s;)o=r+(s-r>>1),a=t[o],n(a,e)<=0?r=o+1:s=o-1;return n(a,e)<=0&&o++,t.splice(o,0,e),o}const UT=t=>{},Ag=t=>{t.previousResults.unshift(t.changeEvent.doc),t.keyDocumentMap&&t.keyDocumentMap.set(t.changeEvent.id,t.changeEvent.doc)},Pg=t=>{t.previousResults.push(t.changeEvent.doc),t.keyDocumentMap&&t.keyDocumentMap.set(t.changeEvent.id,t.changeEvent.doc)},Rg=t=>{const e=t.previousResults.shift();t.keyDocumentMap&&e&&t.keyDocumentMap.delete(e[t.queryParams.primaryKey])},Tg=t=>{const e=t.previousResults.pop();t.keyDocumentMap&&e&&t.keyDocumentMap.delete(e[t.queryParams.primaryKey])},zT=t=>{Rg(t),Pg(t)},VT=t=>{Tg(t),Ag(t)},KT=t=>{Rg(t),Ag(t)},WT=t=>{Tg(t),Pg(t)},LE=t=>{t.keyDocumentMap&&t.keyDocumentMap.delete(t.changeEvent.id);const e=t.queryParams.primaryKey,n=t.previousResults;for(let r=0;r<n.length;r++)if(n[r][e]===t.changeEvent.id){n.splice(r,1);break}},qT=t=>{const e=t.changeEvent.doc,n=t.queryParams.primaryKey,r=t.previousResults;for(let i=0;i<r.length;i++)if(r[i][n]===t.changeEvent.id){r[i]=e,t.keyDocumentMap&&t.keyDocumentMap.set(t.changeEvent.id,e);break}},HT=t=>{const e={_id:"wrongHuman"+new Date().getTime()};t.previousResults.length=0,t.previousResults.push(e),t.keyDocumentMap&&(t.keyDocumentMap.clear(),t.keyDocumentMap.set(e._id,e))},$E=t=>{const e=t.changeEvent.id,n=t.changeEvent.doc;if(t.keyDocumentMap){if(t.keyDocumentMap.has(e))return;t.keyDocumentMap.set(e,n)}else if(t.previousResults.find(i=>i[t.queryParams.primaryKey]===e))return;FE(t.previousResults,n,t.queryParams.sortComparator,0)},QT=t=>{LE(t),$E(t)},YT=t=>{throw new Error("Action runFullQueryAgain must be implemented by yourself")},GT=t=>{throw new Error("Action unknownAction should never be called")},JT=["doNothing","insertFirst","insertLast","removeFirstItem","removeLastItem","removeFirstInsertLast","removeLastInsertFirst","removeFirstInsertFirst","removeLastInsertLast","removeExisting","replaceExisting","alwaysWrong","insertAtSortPosition","removeExistingAndInsertAtSortPosition","runFullQueryAgain","unknownAction"],XT={doNothing:UT,insertFirst:Ag,insertLast:Pg,removeFirstItem:Rg,removeLastItem:Tg,removeFirstInsertLast:zT,removeLastInsertFirst:VT,removeFirstInsertFirst:KT,removeLastInsertLast:WT,removeExisting:LE,replaceExisting:qT,alwaysWrong:HT,insertAtSortPosition:$E,removeExistingAndInsertAtSortPosition:QT,runFullQueryAgain:YT,unknownAction:GT},ZT=40;function om(t){return t.charCodeAt(0)-ZT}function eM(t){return t?"1":"0"}function j_(t,e){const n=[];for(let r=0,i=t.length;r<i;r+=e)n.push(t.substring(r,r+e));return n}function tM(t){const e=new Map,r=2+parseInt(t.charAt(0)+t.charAt(1),10)*2,i=t.substring(2,r),s=j_(i,2);for(let E=0;E<s.length;E++){const $=s[E],S=$.charAt(0),_=om($.charAt(1));e.set(S,_)}const o=t.substring(r,t.length-3),a=j_(o,4);for(let E=0;E<a.length;E++){const $=a[E],S=$.charAt(0),_=$.charAt(1),k=$.charAt(2),z=om($.charAt(3));if(!e.has(_))throw new Error("missing node with id "+_);if(!e.has(k))throw new Error("missing node with id "+k);const W=e.get(_),Q=e.get(k),H={l:z,0:W,1:Q};e.set(S,H)}const l=t.slice(-3),f=l.charAt(0),h=l.charAt(1),p=om(l.charAt(2)),y=e.get(f),w=e.get(h);return{l:p,0:y,1:w}}function nM(t,e,n){let r=t,i=t.l;for(;;){const s=e[i](n),o=eM(s);if(r=r[o],typeof r=="number"||typeof r=="string")return r;i=r.l}}const rM="14a1b,c+d2e5f0g/h.i4j*k-l)m(n6oeh6pnm6qen6ril6snh6tin6ubo9vce9wmh9xns9yne9zmi9{cm9|ad9}cp9~aq9ae9bf9bq9cg9ck9cn9nd9np9nq9nf9ng9nm9nk9mr9ms9mt9mj9mk9ml9mn9mc8{8}888mn88m8m4z4w4z44444m4v7yn77~777n777m77m7m7m5m5m55m555m55m5m552|2u2222x222|222222n2n222n2/an/bn/cn///////////,cn,,,,,,,ac0bc00000000000m-m-----------3333(((++++11*m*.";let am;function iM(){return am||(am=tM(rM)),am}const sM=t=>nM(iM(),jT,t);function oM(t){const e=sM(t);return JT[e]}function aM(t,e,n,r,i){const s=XT[t];return s({queryParams:e,changeEvent:n,previousResults:r,keyDocumentMap:i}),r}var Tr=String.fromCharCode(65535),ci=Number.MIN_SAFE_INTEGER;function uM(t,e){var n=e.selector,r=t.indexes?t.indexes.slice(0):[];e.index&&(r=[e.index]);var i=!!e.sort.find(h=>Object.values(h)[0]==="desc"),s=new Set;Object.keys(n).forEach(h=>{var p=zi(t,h);p&&p.type==="boolean"&&Object.prototype.hasOwnProperty.call(n[h],"$eq")&&s.add(h)});var o=e.sort.map(h=>Object.keys(h)[0]),a=o.filter(h=>!s.has(h)).join(","),l=-1,f;if(r.forEach(h=>{var p=!0,y=!0,w=h.map(_=>{var k=n[_],z=k?Object.keys(k):[],W={};if(!k||!z.length){var Q=y?ci:Tr;W={startKey:Q,endKey:p?Tr:ci,inclusiveStart:!0,inclusiveEnd:!0}}else z.forEach(H=>{if(Mg.has(H)){var X=k[H],U=dM(H,X);W=Object.assign(W,U)}});return typeof W.startKey>"u"&&(W.startKey=ci),typeof W.endKey>"u"&&(W.endKey=Tr),typeof W.inclusiveStart>"u"&&(W.inclusiveStart=!0),typeof W.inclusiveEnd>"u"&&(W.inclusiveEnd=!0),y&&!W.inclusiveStart&&(y=!1),p&&!W.inclusiveEnd&&(p=!1),W}),I=w.map(_=>_.startKey),E=w.map(_=>_.endKey),$={index:h,startKeys:I,endKeys:E,inclusiveEnd:p,inclusiveStart:y,sortSatisfiedByIndex:!i&&a===h.filter(_=>!s.has(_)).join(","),selectorSatisfiedByIndex:fM(h,e.selector,I,E)},S=hM(t,e,$);(S>=l||e.index)&&(l=S,f=$)}),!f)throw le("SNH",{query:e});return f}var Mg=new Set(["$eq","$gt","$gte","$lt","$lte"]),lM=new Set(["$eq","$gt","$gte"]),cM=new Set(["$eq","$lt","$lte"]);function fM(t,e,n,r){var i=Object.entries(e),s=i.find(([H,X])=>{if(!t.includes(H))return!0;var U=Object.entries(X).find(([ee,ce])=>!Mg.has(ee));return U});if(s||e.$and||e.$or)return!1;var o=[],a=new Set;for(var[l,f]of Object.entries(e)){if(!t.includes(l))return!1;var h=Object.keys(f).filter(H=>lM.has(H));if(h.length>1)return!1;var p=h[0];if(p&&a.add(l),p!=="$eq"){if(o.length>0)return!1;o.push(p)}}var y=[],w=new Set;for(var[I,E]of Object.entries(e)){if(!t.includes(I))return!1;var $=Object.keys(E).filter(H=>cM.has(H));if($.length>1)return!1;var S=$[0];if(S&&w.add(I),S!=="$eq"){if(y.length>0)return!1;y.push(S)}}var _=0;for(var k of t){for(var z of[a,w]){if(!z.has(k)&&z.size>0)return!1;z.delete(k)}var W=n[_],Q=r[_];if(W!==Q&&a.size>0&&w.size>0)return!1;_++}return!0}function dM(t,e){switch(t){case"$eq":return{startKey:e,endKey:e,inclusiveEnd:!0,inclusiveStart:!0};case"$lte":return{endKey:e,inclusiveEnd:!0};case"$gte":return{startKey:e,inclusiveStart:!0};case"$lt":return{endKey:e,inclusiveEnd:!1};case"$gt":return{startKey:e,inclusiveStart:!1};default:throw new Error("SNH")}}function hM(t,e,n){var r=0,i=h=>{h>0&&(r=r+h)},s=10,o=Xp(n.startKeys,h=>h!==ci&&h!==Tr);i(o*s);var a=Xp(n.startKeys,h=>h!==Tr&&h!==ci);i(a*s);var l=Xp(n.startKeys,(h,p)=>h===n.endKeys[p]);i(l*s*1.5);var f=n.sortSatisfiedByIndex?5:0;return i(f),r}const pM=2147483647,mM=-2147483648,yM=Number.MAX_SAFE_INTEGER,vM=Number.MIN_SAFE_INTEGER,Vi=Symbol("missing"),jE=Object.freeze(new Error("mingo: cycle detected while processing object/array")),gM=Object.getPrototypeOf([]),UE=Object.getPrototypeOf({}),wM="[object Object]",_M=/^\[object ([a-zA-Z0-9]+)\]$/;let Ng=class{};class Bg{}const Lo=t=>t===null?Ng:t===void 0?Bg:t.constructor,Ql=t=>{const e=DM(t);let n=0,r=e.length;for(;r;)n=(n<<5)-n^e.charCodeAt(--r);return n>>>0},zE=new Set(["null","undefined","boolean","number","string","date","regexp"]),U_=new Set([Bg,Ng,Boolean,String,Number]),Nu=t=>t.toString(),Er=t=>`${Lo(t).name}[${t.toString()}]`,$o=new Map([[Number,Nu],[Boolean,Nu],[RegExp,Nu],[Function,Nu],[Symbol,Nu],[Date,t=>t.toISOString()],[String,JSON.stringify],[Ng,t=>"null"],[Bg,t=>"undefined"],[Int8Array,Er],[Uint8Array,Er],[Uint8ClampedArray,Er],[Int16Array,Er],[Uint16Array,Er],[Int32Array,Er],[Uint32Array,Er],[Float32Array,Er],[Float64Array,Er]]);typeof BigInt<"u"&&$o.set(BigInt,t=>"0x"+t.toString(16));typeof BigInt64Array<"u"&&$o.set(BigInt64Array,Er);typeof BigUint64Array<"u"&&$o.set(BigUint64Array,Er);const bM={null:0,undefined:0,number:1,string:2,object:3,array:4,boolean:5,date:6,regexp:7,function:8},Bn=(t,e)=>{t===Vi&&(t=void 0),e===Vi&&(e=void 0);const[n,r]=[t,e].map(i=>bM[Al(i).toLowerCase()]);return n!==r?n-r:n===1||n===2||n===6?t<e?-1:t>e?1:0:Wi(t,e)?0:t<e?-1:t>e?1:0};function Yt(t,e){if(!t)throw new Error(e)}const SM=t=>{const e=Object.getPrototypeOf(Lo(t));return e&&e.name==="TypedArray"},Ty=t=>{if(U_.has(Lo(t)))return t;const e=new Set,n=r=>{if(e.has(r))throw jE;const i=Lo(r);if(U_.has(i))return r;try{if(Lt(r))return e.add(r),r.map(n);if(wt(r)){e.add(r);const s={};for(const o in r)s[o]=n(r[o]);return s}}finally{e.delete(r)}return i===Date||i===RegExp||SM(r)?new i(r):r};return n(t)},Al=t=>_M.exec(Object.prototype.toString.call(t))[1],um=t=>typeof t=="boolean",Ki=t=>typeof t=="string",Yn=t=>!isNaN(t)&&typeof t=="number",Lt=Array.isArray,wt=t=>{if(!t)return!1;const e=Object.getPrototypeOf(t);return(e===UE||e===null)&&wM===Object.prototype.toString.call(t)},Sh=t=>t===Object(t),My=t=>t instanceof Date,Cf=t=>t instanceof RegExp,Ih=t=>typeof t=="function",fn=t=>t==null,Wa=(t,e)=>t.includes(e),VE=(t,e)=>!Wa(t,e),IM=(t,e=!0)=>!!t||e&&t==="",uu=t=>fn(t)||Ki(t)&&!t||t instanceof Array&&t.length===0||wt(t)&&Object.keys(t).length===0,z_=t=>t===Vi,Yl=t=>t instanceof Array?t:[t],er=(t,e)=>!!t&&Object.prototype.hasOwnProperty.call(t,e),EM=(t,e)=>wt(t)&&wt(e)||Lt(t)&&Lt(e);function Ny(t,e,n){if(n=n||{flatten:!1},z_(t)||fn(t))return e;if(z_(e)||fn(e))return t;if(!EM(t,e)){if(n.skipValidation)return e||t;throw Error("mismatched types. must both be array or object")}if(n.skipValidation=!0,Lt(t)){const r=t,i=e;if(n.flatten){let s=0,o=0;for(;s<r.length&&o<i.length;)r[s]=Ny(r[s++],i[o++],n);for(;o<i.length;)r.push(e[o++])}else Gl(r,i)}else for(const r in e)t[r]=Ny(t[r],e[r],n);return t}function By(t,e=Ql){const n=new Map;return t.forEach((r,i)=>{const s=WE(r,e);n.has(s)?n.get(s).some(o=>Wi(t[o],r))||n.get(s).push(i):n.set(s,[i])}),n}function Fg(t,e=Ql){if(t.some(a=>a.length==0))return[];if(t.length===1)return Array.from(t);const n=xM(t.map((a,l)=>[l,a.length]),a=>a[1]),r=t[n[0][0]],i=By(r,e),s=new Map,o=new Array;return i.forEach((a,l)=>{const f=a.map(w=>r[w]),h=f.map(w=>0),p=f.map(w=>[n[0][0],0]);let y=!1;for(let w=1;w<t.length;w++){const[I,E]=n[w],$=t[I];if(s.has(w)||s.set(w,By($)),s.get(w).has(l)){const S=s.get(w).get(l).map(_=>$[_]);y=f.map((_,k)=>S.some((z,W)=>{const Q=h[k];return Wi(_,z)&&(h[k]++,I<p[k][0]&&(p[k]=[I,s.get(w).get(l)[W]])),Q<h[k]})).some(Boolean)}if(!y)return}y&&Gl(o,h.map((w,I)=>w===t.length-1?[f[I],p[I]]:Vi).filter(w=>w!==Vi))}),o.sort((a,l)=>{const[f,[h,p]]=a,[y,[w,I]]=l,E=Bn(h,w);return E!==0?E:Bn(p,I)}).map(a=>a[0])}function KE(t,e=0){const n=new Array;function r(i,s){for(let o=0,a=i.length;o<a;o++)Lt(i[o])&&(s>0||s<0)?r(i[o],Math.max(-1,s-1)):n.push(i[o])}return r(t,e),n}const OM=t=>{let[e,n]=[Object.getPrototypeOf(t),Object.getOwnPropertyNames(t)],r=e;for(;!n.length&&e!==UE&&e!==gM;)r=e,n=Object.getOwnPropertyNames(e),e=Object.getPrototypeOf(e);const i={};return n.forEach(s=>i[s]=t[s]),[i,r]};function Wi(t,e){const n=[[t,e]];for(;n.length>0;){if([t,e]=n.pop(),t===e)continue;const r=Lo(t);if(r!==Lo(e)||Ih(t))return!1;if($o.has(r)){const i=$o.get(r);if(i(t)!==i(e))return!1;continue}if(r===Array||r===Object){const i=Object.keys(t),s=Object.keys(e);if(i.length!==s.length||new Set(i.concat(s)).size!=i.length)return!1;for(const o of i)n.push([t[o],e[o]]);continue}return!1}return!n.length}function kM(t,e=Ql){const n=t.map(r=>Vi);return By(t,e).forEach((r,i)=>{r.forEach(s=>n[s]=t[s])}),n.filter(r=>r!==Vi)}function DM(t){const e=new Set,n=r=>{const i=Lo(r);if($o.has(i))return $o.get(i)(r);const s=i===Object?"":i.name;if(Ih(r.toJSON))return`${s}(${JSON.stringify(r)})`;if(e.has(r))throw jE;e.add(r);try{if(i===Array)return"["+r.map(n).join(",")+"]";if(i!==Object){const[a,l]=OM(r);if(Lt(r))return`${s}${n([...r,a])}`;r=a}const o=Object.keys(r);return o.sort(),`${s}{`+o.map(a=>`${a}:${n(r[a])}`).join(",")+"}"}finally{e.delete(r)}};return n(t)}function WE(t,e){return e=e||Ql,fn(t)?null:e(t).toString()}function xM(t,e,n=Bn){if(uu(t))return t;const r=new Array,i=new Array;for(let s=0;s<t.length;s++){const o=t[s],a=e(o,s);fn(a)?i.push(o):r.push([a,o])}return r.sort((s,o)=>n(s[0],o[0])),Gl(i,r.map(s=>s[1]))}function CM(t,e,n=Ql){if(t.length<1)return new Map;const r=new Map,i=new Map;for(let s=0;s<t.length;s++){const o=t[s],a=e(o,s),l=WE(a,n);if(l===null)i.has(null)?i.get(null).push(o):i.set(null,[o]);else{const f=r.has(l)?r.get(l).find(h=>Wi(h,a)):null;fn(f)?(i.set(a,[o]),r.has(l)?r.get(l).push(a):r.set(l,[a])):i.get(f).push(o)}}return i}const lm=5e4;function Gl(t,...e){return t instanceof Array?e.reduce((n,r)=>{let i=Math.ceil(r.length/lm),s=0;for(;i-- >0;)Array.prototype.push.apply(n,r.slice(s,s+lm)),s+=lm;return n},t):e.filter(Sh).reduce((n,r)=>(Object.assign(n,r),n),t)}function Fy(t,e){return Sh(t)?t[e]:void 0}function AM(t,e){if(e<1)return t;for(;e--&&t.length===1;)t=t[0];return t}function lu(t,e,n){let r=0;function i(o,a){let l=o;for(let f=0;f<a.length;f++){const h=a[f];if(/^\d+$/.exec(h)===null&&l instanceof Array){if(f===0&&r>0)break;r+=1;const y=a.slice(f);l=l.reduce((w,I)=>{const E=i(I,y);return E!==void 0&&w.push(E),w},[]);break}else l=Fy(l,h);if(l===void 0)break}return l}const s=zE.has(Al(t).toLowerCase())?t:i(t,e.split("."));return s instanceof Array&&(n!=null&&n.unwrapArray)?AM(s,r):s}function Af(t,e,n){const r=e.split("."),i=r[0],s=r.slice(1).join("."),o=/^\d+$/.exec(i)!==null,a=r.length>1;let l,f;if(t instanceof Array)if(o)l=Fy(t,Number(i)),a&&(l=Af(l,s,n)),l=[l];else{l=[];for(const h of t)f=Af(h,e,n),n!=null&&n.preserveMissing?(f===void 0&&(f=Vi),l.push(f)):f!==void 0&&l.push(f)}else{if(f=Fy(t,i),a&&(f=Af(f,s,n)),f===void 0)return;l=n!=null&&n.preserveKeys?Object.assign({},t):{},l[i]=f}return l}function Ly(t){if(t instanceof Array)for(let e=t.length-1;e>=0;e--)t[e]===Vi?t.splice(e,1):Ly(t[e]);else if(wt(t))for(const e in t)er(t,e)&&Ly(t[e])}const V_=/^\d+$/;function Pl(t,e,n,r){const i=e.split("."),s=i[0],o=i.slice(1).join(".");if(i.length===1)(wt(t)||Lt(t)&&V_.test(s))&&n(t,s);else{r!=null&&r.buildGraph&&fn(t[s])&&(t[s]={});const a=t[s];if(!a)return;const l=!!(i.length>1&&V_.test(i[1]));a instanceof Array&&(r!=null&&r.descendArray)&&!l?a.forEach(f=>Pl(f,o,n,r)):Pl(a,o,n,r)}}function PM(t,e,n){Pl(t,e,(r,i)=>{r[i]=Ih(n)?n(r[i]):n},{buildGraph:!0})}function K_(t,e,n){Pl(t,e,(r,i)=>{if(r instanceof Array){if(/^\d+$/.test(i))r.splice(parseInt(i),1);else if(n&&n.descendArray)for(const s of r)wt(s)&&delete s[i]}else wt(r)&&delete r[i]},n)}const RM=/^\$[a-zA-Z0-9_]+$/;function Ko(t){return RM.test(t)}function qE(t){if(zE.has(Al(t).toLowerCase()))return Cf(t)?{$regex:t}:{$eq:t};if(Sh(t)){if(!Object.keys(t).some(Ko))return{$eq:t};if(er(t,"$regex")){const n=Object.assign({},t);return n.$regex=new RegExp(t.$regex,t.$options),delete n.$options,n}}return t}var vs;(function(t){t.CLONE_ALL="CLONE_ALL",t.CLONE_INPUT="CLONE_INPUT",t.CLONE_OUTPUT="CLONE_OUTPUT",t.CLONE_OFF="CLONE_OFF"})(vs||(vs={}));class ko{constructor(e,n,r,i=Date.now()){this._opts=e,this._root=n,this._local=r,this.timestamp=i,this.update(n,r)}static init(e,n,r){return e instanceof ko?new ko(e._opts,fn(e.root)?n:e.root,Object.assign({},e.local,r)):new ko(e,n,r)}update(e,n){var r;return this._root=e,this._local=n&&Object.assign({},n,{variables:Object.assign({},(r=this._local)===null||r===void 0?void 0:r.variables,n==null?void 0:n.variables)}),this}getOptions(){return Object.freeze(Object.assign(Object.assign({},this._opts),{context:jo.from(this._opts.context)}))}get root(){return this._root}get local(){return this._local}get idKey(){return this._opts.idKey}get collation(){var e;return(e=this._opts)===null||e===void 0?void 0:e.collation}get processingMode(){var e;return((e=this._opts)===null||e===void 0?void 0:e.processingMode)||vs.CLONE_OFF}get useStrictMode(){var e;return(e=this._opts)===null||e===void 0?void 0:e.useStrictMode}get scriptEnabled(){var e;return(e=this._opts)===null||e===void 0?void 0:e.scriptEnabled}get useGlobalContext(){var e;return(e=this._opts)===null||e===void 0?void 0:e.useGlobalContext}get hashFunction(){var e;return(e=this._opts)===null||e===void 0?void 0:e.hashFunction}get collectionResolver(){var e;return(e=this._opts)===null||e===void 0?void 0:e.collectionResolver}get jsonSchemaValidator(){var e;return(e=this._opts)===null||e===void 0?void 0:e.jsonSchemaValidator}get variables(){var e;return(e=this._opts)===null||e===void 0?void 0:e.variables}get context(){var e;return(e=this._opts)===null||e===void 0?void 0:e.context}}function Lg(t){return t instanceof ko?t.getOptions():Object.freeze(Object.assign(Object.assign({idKey:"_id",scriptEnabled:!0,useStrictMode:!0,useGlobalContext:!0,processingMode:vs.CLONE_OFF},t),{context:t!=null&&t.context?jo.from(t==null?void 0:t.context):jo.init({})}))}var Ye;(function(t){t.ACCUMULATOR="accumulator",t.EXPRESSION="expression",t.PIPELINE="pipeline",t.PROJECTION="projection",t.QUERY="query",t.WINDOW="window"})(Ye||(Ye={}));class jo{constructor(e){this.operators={[Ye.ACCUMULATOR]:{},[Ye.EXPRESSION]:{},[Ye.PIPELINE]:{},[Ye.PROJECTION]:{},[Ye.QUERY]:{},[Ye.WINDOW]:{}};for(const[n,r]of Object.entries(e))this.addOperators(n,r)}static init(e={}){return new jo(e)}static from(e){return new jo(e.operators)}addOperators(e,n){for(const[r,i]of Object.entries(n))this.getOperator(e,r)||(this.operators[e][r]=i);return this}addAccumulatorOps(e){return this.addOperators(Ye.ACCUMULATOR,e)}addExpressionOps(e){return this.addOperators(Ye.EXPRESSION,e)}addQueryOps(e){return this.addOperators(Ye.QUERY,e)}addPipelineOps(e){return this.addOperators(Ye.PIPELINE,e)}addProjectionOps(e){return this.addOperators(Ye.PROJECTION,e)}addWindowOps(e){return this.addOperators(Ye.WINDOW,e)}getOperator(e,n){return e in this.operators&&this.operators[e][n]||null}}const ho=jo.init();function W_(t,e){for(const[n,r]of Object.entries(e)){Yt(Ih(r)&&Ko(n),`'${n}' is not a valid operator`);const i=Do(t,n,null);Yt(!i||r===i,`${n} already exists for '${t}' operators. Cannot change operator function once registered.`)}switch(t){case Ye.ACCUMULATOR:ho.addAccumulatorOps(e);break;case Ye.EXPRESSION:ho.addExpressionOps(e);break;case Ye.PIPELINE:ho.addPipelineOps(e);break;case Ye.PROJECTION:ho.addProjectionOps(e);break;case Ye.QUERY:ho.addQueryOps(e);break;case Ye.WINDOW:ho.addWindowOps(e);break}}function Do(t,e,n){const{context:r,useGlobalContext:i}=n||{},s=r?r.getOperator(t,e):null;return!s&&i?ho.getOperator(t,e):s}const q_={$$ROOT(t,e,n){return n.root},$$CURRENT(t,e,n){return t},$$REMOVE(t,e,n){},$$NOW(t,e,n){return new Date(n.timestamp)}},$y={$$KEEP(t,e,n){return t},$$PRUNE(t,e,n){},$$DESCEND(t,e,n){if(!er(e,"$cond"))return t;let r;for(const[i,s]of Object.entries(t))if(Sh(s)){if(s instanceof Array){const o=[];for(let a of s)wt(a)&&(a=H_(a,e,n.update(a))),fn(a)||o.push(a);r=o}else r=H_(s,e,n.update(s));fn(r)?delete t[i]:t[i]=r}return t}};function Zr(t,e,n,r){var i;const s=ko.init(r,t);if(n=n||"",Ko(n)){const o=Do(Ye.EXPRESSION,n,r);if(o)return o(t,e,s);const a=Do(Ye.ACCUMULATOR,n,r);if(a)return t instanceof Array||(t=Zr(t,e,null,s),e=null),Yt(t instanceof Array,`'${n}' target must be an array.`),a(t,e,s.update(null,s.local));throw new Error(`operator '${n}' is not registered`)}if(Ki(e)&&e.length>0&&e[0]==="$"){if(er($y,e))return e;let o=s.root;const a=e.split(".");if(er(q_,a[0]))o=q_[a[0]](t,null,s),e=e.slice(a[0].length+1);else if(a[0].slice(0,2)==="$$"){o=Object.assign({},s.variables,{this:t},(i=s.local)===null||i===void 0?void 0:i.variables);const l=a[0].slice(2);Yt(er(o,l),`Use of undefined variable: ${l}`),e=e.slice(2)}else e=e.slice(1);return e===""?o:lu(o,e)}if(Lt(e))return e.map(o=>Zr(t,o,null,s));if(wt(e)){const o={};for(const[a,l]of Object.entries(e))if(o[a]=Zr(t,l,a,s),[Ye.EXPRESSION,Ye.ACCUMULATOR].some(f=>!!Do(f,a,r)))return Yt(Object.keys(e).length===1,"Invalid aggregation expression '"+JSON.stringify(e)+"'"),o[a];return o}return e}function H_(t,e,n){const r=Zr(t,e,null,n);return er($y,r)?$y[r](t,e,n):r}function qa(t){return t instanceof Q_?t:new Q_(t)}function TM(...t){let e=0;return qa(()=>{for(;e<t.length;){const n=t[e].next();if(!n.done)return n;e++}return{done:!0}})}function MM(t){return!!t&&typeof t=="object"&&(t==null?void 0:t.next)instanceof Function}function NM(t,e){const n=t.slice(e+1);t.splice(e),Array.prototype.push.apply(t,n)}const jy=new Error;var oi;(function(t){t[t.MAP=0]="MAP",t[t.FILTER=1]="FILTER",t[t.TAKE=2]="TAKE",t[t.DROP=3]="DROP"})(oi||(oi={}));function BM(t,e,n){let r=!1,i=-1,s=0;return function(o){try{e:for(;!r;){let a=t();i++;let l=-1;const f=e.length;let h=!1;for(;++l<f;){const p=e[l];switch(p.action){case oi.MAP:a=p.func(a,i);break;case oi.FILTER:if(!p.func(a,i))continue e;break;case oi.TAKE:--p.count,p.count||(h=!0);break;case oi.DROP:--p.count,p.count||NM(e,l);continue e;default:break e}}if(r=h,o)n[s++]=a;else return{value:a,done:!1}}}catch(a){if(a!==jy)throw a}return r=!0,{done:r}}}class Q_{constructor(e){this.iteratees=[],this.yieldedValues=[],this.isDone=!1;let n;if(e instanceof Function&&(e={next:e}),MM(e)){const r=e;n=()=>{const i=r.next();if(i.done)throw jy;return i.value}}else if(e instanceof Array){const r=e,i=r.length;let s=0;n=()=>{if(s<i)return r[s++];throw jy}}else if(!(e instanceof Function))throw new Error("Lazy must be initialized with an array, generator, or function.");this.getNext=BM(n,this.iteratees,this.yieldedValues)}push(e,n){return typeof n=="function"?this.iteratees.push({action:e,func:n}):typeof n=="number"&&this.iteratees.push({action:e,count:n}),this}next(){return this.getNext()}map(e){return this.push(oi.MAP,e)}filter(e){return this.push(oi.FILTER,e)}take(e){return e>0?this.push(oi.TAKE,e):this}drop(e){return e>0?this.push(oi.DROP,e):this}transform(e){const n=this;let r;return qa(()=>(r||(r=qa(e(n.value()))),r.next()))}value(){return this.isDone||(this.isDone=this.getNext(!0).done),this.yieldedValues}each(e){for(;;){const n=this.next();if(n.done)break;if(e(n.value)===!1)return!1}return!0}reduce(e,n){let r=this.next();for(n===void 0&&!r.done&&(n=r.value,r=this.next());!r.done;)n=e(n,r.value),r=this.next();return n}size(){return this.reduce((e,n)=>++e,0)}[Symbol.iterator](){return this}}class FM{constructor(e,n){this.pipeline=e,this.options=Lg(n)}stream(e){let n=qa(e);const r=this.options.processingMode;(r==vs.CLONE_ALL||r==vs.CLONE_INPUT)&&n.map(Ty);const i=new Array;if(!uu(this.pipeline))for(const s of this.pipeline){const o=Object.keys(s),a=o[0],l=Do(Ye.PIPELINE,a,this.options);Yt(o.length===1&&!!l,`invalid pipeline operator ${a}`),i.push(a),n=l(n,s[a],this.options)}return(r==vs.CLONE_OUTPUT||r==vs.CLONE_ALL&&Fg([["$group","$unwind"],i]).length)&&n.map(Ty),n}run(e){return this.stream(e).value()}}class LM{constructor(e,n,r,i){this.source=e,this.predicate=n,this.projection=r,this.options=i,this.operators=[],this.result=null,this.buffer=[]}fetch(){return this.result?this.result:(wt(this.projection)&&this.operators.push({$project:this.projection}),this.result=qa(this.source).filter(this.predicate),this.operators.length>0&&(this.result=new FM(this.operators,this.options).stream(this.result)),this.result)}fetchAll(){const e=qa([...this.buffer]);return this.buffer=[],TM(e,this.fetch())}all(){return this.fetchAll().value()}count(){return this.all().length}skip(e){return this.operators.push({$skip:e}),this}limit(e){return this.operators.push({$limit:e}),this}sort(e){return this.operators.push({$sort:e}),this}collation(e){return this.options=Object.assign(Object.assign({},this.options),{collation:e}),this}next(){if(this.buffer.length>0)return this.buffer.pop();const e=this.fetch().next();if(!e.done)return e.value}hasNext(){if(this.buffer.length>0)return!0;const e=this.fetch().next();return e.done?!1:(this.buffer.push(e.value),!0)}map(e){return this.all().map(e)}forEach(e){this.all().forEach(e)}[Symbol.iterator](){return this.fetchAll()}}class Qs{constructor(e,n){this.condition=e,this.options=Lg(n),this.compiled=[],this.compile()}compile(){Yt(wt(this.condition),`query criteria must be an object: ${JSON.stringify(this.condition)}`);const e={};for(const[n,r]of Object.entries(this.condition)){if(n==="$where")Object.assign(e,{field:n,expr:r});else if(Wa(["$and","$or","$nor","$expr","$jsonSchema"],n))this.processOperator(n,n,r);else{Yt(!Ko(n),`unknown top level operator: ${n}`);for(const[i,s]of Object.entries(qE(r)))this.processOperator(n,i,s)}e.field&&this.processOperator(e.field,e.field,e.expr)}}processOperator(e,n,r){const i=Do(Ye.QUERY,n,this.options);if(!i)throw new Error(`unknown operator ${n}`);const s=i(e,r,this.options);this.compiled.push(s)}test(e){for(let n=0,r=this.compiled.length;n<r;n++)if(!this.compiled[n](e))return!1;return!0}find(e,n){return new LM(e,r=>this.test(r),n||{},this.options)}remove(e){return e.reduce((n,r)=>(this.test(r)||n.push(r),n),[])}}const $M=(t,e,n)=>{if(uu(e)||!wt(e))return t;let r=Bn;const i=n.collation;return wt(i)&&Ki(i.locale)&&(r=UM(i)),t.transform(s=>{const o=Object.keys(e);for(const a of o.reverse()){const l=CM(s,h=>lu(h,a),n.hashFunction),f=Array.from(l.keys()).sort(r);e[a]===-1&&f.reverse(),s=[],f.reduce((h,p)=>Gl(h,l.get(p)),s)}return s})},jM={1:"base",2:"accent",3:"variant"};function UM(t){const e={sensitivity:jM[t.strength||3],caseFirst:t.caseFirst==="off"?"false":t.caseFirst||"false",numeric:t.numericOrdering||!1,ignorePunctuation:t.alternate==="shifted"};(t.caseLevel||!1)===!0&&(e.sensitivity==="base"&&(e.sensitivity="case"),e.sensitivity==="accent"&&(e.sensitivity="variant"));const n=new Intl.Collator(t.locale,e);return(r,i)=>{if(!Ki(r)||!Ki(i))return Bn(r,i);const s=n.compare(r,i);return s<0?-1:s>0?1:0}}function In(t){const e=(n,r,i)=>{const s={unwrapArray:!0},o=Math.max(1,n.split(".").length-1);return a=>{const l=lu(a,n,s);return t(l,r,Object.assign(Object.assign({},i),{depth:o}))}};return e.op="query",e}function HE(t,e,n){if(Wi(t,e)||fn(t)&&fn(e))return!0;if(t instanceof Array){const r=Wi.bind(null,e);return t.some(r)||KE(t,n==null?void 0:n.depth).some(r)}return!1}function zM(t,e,n){return!HE(t,e,n)}function QE(t,e,n){return fn(t)?e.some(r=>r===null):Fg([Yl(t),e],n==null?void 0:n.hashFunction).length>0}function VM(t,e,n){return!QE(t,e,n)}function KM(t,e,n){return Eh(t,e,(r,i)=>Bn(r,i)<0)}function WM(t,e,n){return Eh(t,e,(r,i)=>Bn(r,i)<=0)}function qM(t,e,n){return Eh(t,e,(r,i)=>Bn(r,i)>0)}function HM(t,e,n){return Eh(t,e,(r,i)=>Bn(r,i)>=0)}function QM(t,e,n){return Yl(t).some(r=>e.length===2&&r%e[0]===e[1])}function YM(t,e,n){const r=Yl(t),i=s=>Ki(s)&&IM(e.exec(s),n==null?void 0:n.useStrictMode);return r.some(i)||KE(r,1).some(i)}function GM(t,e,n){return(e===!1||e===0)&&t===void 0||(e===!0||e===1)&&t!==void 0}function JM(t,e,n){if(!Lt(t)||!Lt(e)||!t.length||!e.length)return!1;let r=!0;for(const i of e){if(!r)break;wt(i)&&Wa(Object.keys(i),"$elemMatch")?r=YE(t,i.$elemMatch,n):i instanceof RegExp?r=t.some(s=>typeof s=="string"&&i.test(s)):r=t.some(s=>Wi(i,s))}return r}function XM(t,e,n){return Array.isArray(t)&&t.length===e}function ZM(t){return Ko(t)&&["$and","$or","$nor"].indexOf(t)===-1}function YE(t,e,n){if(Lt(t)&&!uu(t)){let r=o=>o,i=e;Object.keys(e).every(ZM)&&(i={temp:e},r=o=>({temp:o}));const s=new Qs(i,n);for(let o=0,a=t.length;o<a;o++)if(s.test(r(t[o])))return!0}return!1}const Y_=t=>t===null,G_=t=>Yn(t)&&t>=mM&&t<=pM&&t.toString().indexOf(".")===-1,J_=t=>Yn(t)&&t>=vM&&t<=yM&&t.toString().indexOf(".")===-1,e2={array:Lt,bool:um,boolean:um,date:My,decimal:Yn,double:Yn,int:G_,long:J_,number:Yn,null:Y_,object:wt,regex:Cf,regexp:Cf,string:Ki,undefined:fn,function:t=>{throw new Error("unsupported type key `function`.")},1:Yn,2:Ki,3:wt,4:Lt,6:fn,8:um,9:My,10:Y_,11:Cf,16:G_,18:J_,19:Yn};function X_(t,e,n){const r=e2[e];return r?r(t):!1}function t2(t,e,n){return Array.isArray(e)?e.findIndex(r=>X_(t,r))>=0:X_(t,e)}function Eh(t,e,n){return Yl(t).some(r=>Al(r)===Al(e)&&n(r,e))}const Z_=(t,e)=>{const n={};return t.split("").forEach((r,i)=>n[r]=e*(i+1)),n};Object.assign(Object.assign(Object.assign({},Z_("ABCDEFGHIKLM",1)),Z_("NOPQRSTUVWXY",-1)),{Z:0});const eb={undefined:null,null:null,NaN:NaN,Infinity:new Error,"-Infinity":new Error};function ar(t,e=eb){const n=Object.assign({},eb,e),r=new Set(Object.keys(n));return(i,s,o)=>{const a=Zr(i,s,null,o);if(r.has(`${a}`)){const l=n[`${a}`];if(l instanceof Error)throw new Error(`cannot apply $${t.name} to -inf, value must in (-inf,inf)`);return l}return t(a)}}ar(Math.acos,{Infinity:1/0,0:new Error});ar(Math.acosh,{Infinity:1/0,0:new Error});ar(Math.asin);ar(Math.asinh,{Infinity:1/0,"-Infinity":-1/0});ar(Math.atan);ar(Math.atanh,{1:1/0,"-1":-1/0});ar(Math.cos);ar(Math.cosh,{"-Infinity":1/0,Infinity:1/0});const n2=Math.PI/180;ar(t=>t*n2,{Infinity:1/0,"-Infinity":1/0});const r2=180/Math.PI;ar(t=>t*r2,{Infinity:1/0,"-Infinity":-1/0});ar(Math.sin);ar(Math.sinh,{"-Infinity":-1/0,Infinity:1/0});ar(Math.tan);const i2=(t,e,n)=>{if(uu(e))return t;let r=Object.keys(e),i=!1;GE(e,n);const s=n.idKey;if(Wa(r,s)){const a=e[s];(a===0||a===!1)&&(r=r.filter(VE.bind(null,[s])),i=r.length==0)}else r.push(s);const o=ko.init(n);return t.map(a=>Uy(a,e,o.update(a),r,i))};function Uy(t,e,n,r,i){let s={},o=!1,a=!1;const l=[];i&&l.push(n.idKey);for(const f of r){let h;const p=e[f];if(f!==n.idKey&&Wa([0,!1],p)&&(a=!0),f===n.idKey&&uu(p))h=t[f];else if(Ki(p))h=Zr(t,p,f,n);else if(!Wa([1,!0],p))if(p instanceof Array)h=p.map(w=>{const I=Zr(t,w,null,n);return fn(I)?null:I});else if(wt(p)){const w=p,I=Object.keys(p),E=I.length==1?I[0]:"",$=Do(Ye.PROJECTION,E,n);if($)E==="$slice"?Yl(w[E]).every(Yn)?(h=$(t,w[E],f,n),o=!0):h=Zr(t,w,f,n):h=$(t,w[E],f,n);else if(Ko(E))h=Zr(t,w[E],E,n);else if(er(t,f)){GE(w,n);let S=t[f];S instanceof Array?h=S.map(_=>Uy(_,w,n,I,!1)):(S=wt(S)?S:t,h=Uy(S,w,n,I,!1))}else h=Zr(t,p,null,n)}else{l.push(f);continue}const y=Af(t,f,{preserveMissing:!0});y!==void 0&&Ny(s,y,{flatten:!0}),VE([0,1,!1,!0],p)&&(h===void 0?K_(s,f,{descendArray:!0}):PM(s,f,h))}if(Ly(s),(o||a||i)&&(s=Gl({},t,s),l.length>0))for(const f of l)K_(s,f,{descendArray:!0});return s}function GE(t,e){const n=[!1,!1];for(const[r,i]of Object.entries(t)){if(r===(e==null?void 0:e.idKey))return;i===0||i===!1?n[0]=!0:(i===1||i===!0)&&(n[1]=!0),Yt(!(n[0]&&n[1]),"Projection cannot have a mix of inclusion and exclusion.")}}const s2=(t,e,n)=>{Yt(Lt(e),"Invalid expression: $and expects value to be an Array.");const r=e.map(i=>new Qs(i,n));return i=>r.every(s=>s.test(i))},JE=(t,e,n)=>{Yt(Lt(e),"Invalid expression. $or expects value to be an Array");const r=e.map(i=>new Qs(i,n));return i=>r.some(s=>s.test(i))},o2=(t,e,n)=>{Yt(Lt(e),"Invalid expression. $nor expects value to be an array.");const r=JE("$or",e,n);return i=>!r(i)},a2=(t,e,n)=>{const r={};r[t]=qE(e);const i=new Qs(r,n);return s=>!i.test(s)},u2=In(HE),l2=In(qM),c2=In(HM),f2=In(QE),d2=In(KM),h2=In(WM),p2=In(zM),m2=In(VM),y2=In(QM),v2=In(YM);In(JM);const g2=In(YE),w2=In(XM),_2=In(GM),b2=In(t2);var tb=!1;function S2(t){return tb||(W_(Ye.PIPELINE,{$sort:$M,$project:i2}),W_(Ye.QUERY,{$and:s2,$eq:u2,$elemMatch:g2,$exists:_2,$gt:l2,$gte:c2,$in:f2,$lt:d2,$lte:h2,$ne:p2,$nin:m2,$mod:y2,$nor:o2,$not:a2,$or:JE,$regex:v2,$size:w2,$type:b2}),tb=!0),new Qs(t)}function Rl(t,e){var n=$n(t.primaryKey);e=$e(e);var r=Mn(e);if(typeof r.skip!="number"&&(r.skip=0),r.selector?(r.selector=r.selector,Object.entries(r.selector).forEach(([f,h])=>{(typeof h!="object"||h===null)&&(r.selector[f]={$eq:h})})):r.selector={},r.index){var i=ja(r.index);i.includes(n)||i.push(n),r.index=i}if(r.sort){var l=r.sort.find(f=>TP(f)===n);l||(r.sort=r.sort.slice(0),r.sort.push({[n]:"asc"}))}else if(r.index)r.sort=r.index.map(f=>({[f]:"asc"}));else{if(t.indexes){var s=new Set;Object.entries(r.selector).forEach(([f,h])=>{var p=!1;typeof h=="object"&&h!==null?p=!!Object.keys(h).find(y=>Mg.has(y)):p=!0,p&&s.add(f)});var o=-1,a;t.indexes.forEach(f=>{var h=mg(f)?f:[f],p=h.findIndex(y=>!s.has(y));p>0&&p>o&&(o=p,a=h)}),a&&(r.sort=a.map(f=>({[f]:"asc"})))}r.sort||(r.sort=[{[n]:"asc"}])}return r}function $g(t,e){if(!e.sort)throw le("SNH",{query:e});var n=[];e.sort.forEach(i=>{var s=Object.keys(i)[0],o=Object.values(i)[0];n.push({key:s,direction:o,getValueFn:XI(s)})});var r=(i,s)=>{for(var o=0;o<n.length;++o){var a=n[o],l=a.getValueFn(i),f=a.getValueFn(s);if(l!==f){var h=a.direction==="asc"?Bn(l,f):Bn(f,l);return h}}};return r}function Oh(t,e){if(!e.sort)throw le("SNH",{query:e});var n=S2(e.selector),r=i=>n.test(i);return r}function I2(t,e){return!e.sort||e.sort.length===0?[t]:e.sort.map(n=>Object.keys(n)[0])}var E2=new WeakMap;function O2(t){return Br(E2,t,()=>{var e=t.collection,n=Rl(e.storageInstance.schema,Mn(t.mangoQuery)),r=e.schema.primaryPath,i=$g(e.schema.jsonSchema,n),s=(f,h)=>{var p={docA:f,docB:h,rxQuery:t};return i(p.docA,p.docB)},o=Oh(e.schema.jsonSchema,n),a=f=>{var h={doc:f,rxQuery:t};return o(h.doc)},l={primaryKey:t.collection.schema.primaryPath,skip:n.skip,limit:n.limit,sortFields:I2(r,n),sortComparator:s,queryMatcher:a};return l})}function k2(t,e){if(!t.collection.database.eventReduce)return{runFullQueryAgain:!0};var n=O2(t),r=ye(t._result).docsData.slice(0),i=ye(t._result).docsDataMap,s=!1,o=e.map(l=>fT(l)).filter(JI),a=o.find(l=>{var f={queryParams:n,changeEvent:l,previousResults:r,keyDocumentMap:i},h=oM(f);if(h==="runFullQueryAgain")return!0;if(h!=="doNothing")return s=!0,aM(h,n,l,r,i),!1});return a?{runFullQueryAgain:!0}:{runFullQueryAgain:!1,changed:s,newResults:r}}var D2=function(){function t(){this._map=new Map}var e=t.prototype;return e.getByQuery=function(r){var i=r.toString();return Br(this._map,i,()=>r)},t}();function x2(){return new D2}function nb(t,e){e.uncached=!0;var n=e.toString();t._map.delete(n)}function C2(t){return t.refCount$.observers.length}var A2=100,P2=30*1e3,R2=(t,e)=>(n,r)=>{if(!(r._map.size<t)){var i=Ft()-e,s=[],o=Array.from(r._map.values());for(var a of o)if(!(C2(a)>0)){if(a._lastEnsureEqual===0&&a._creationTime<i){nb(r,a);continue}s.push(a)}var l=s.length-t;if(!(l<=0)){var f=s.sort((p,y)=>p._lastEnsureEqual-y._lastEnsureEqual),h=f.slice(0,l);h.forEach(p=>nb(r,p))}}},XE=R2(A2,P2),cm=new WeakSet;function T2(t){cm.has(t)||(cm.add(t),QP().then(()=>GP(200)).then(()=>{t.destroyed||t.cacheReplacementPolicy(t,t._queryCache),cm.delete(t)}))}var ZE=function(){function t(n,r,i){this.cacheItemByDocId=new Map,this.registry=typeof FinalizationRegistry=="function"?new FinalizationRegistry(s=>{var o=s.docId,a=this.cacheItemByDocId.get(o);a&&(a.byRev.delete(s.revisionHeight),a.byRev.size===0&&this.cacheItemByDocId.delete(o))}):void 0,this.registerIdleTasks=[],this.primaryPath=n,this.changes$=r,this.documentCreator=i,r.subscribe(s=>{var o=s.documentId,a=this.cacheItemByDocId.get(o);if(a){var l=xg(s);a.last=l}})}var e=t.prototype;return e.getLatestDocumentData=function(r){var i=Bo(this.cacheItemByDocId,r);return i.last},e.getLatestDocumentDataIfExists=function(r){var i=this.cacheItemByDocId.get(r);if(i)return i.last},Ks(t,[{key:"getCachedRxDocument",get:function(){var n=M2(this);return xs(this,"getCachedRxDocument",n)}}]),t}();function M2(t){var e=t.primaryPath,n=t.cacheItemByDocId,r=t.registry,i=it.deepFreezeWhenDevMode,s=t.documentCreator,o=a=>{var l=a[e],f=C_(a._rev),h=Br(n,l,()=>N2(a)),p=h.byRev,y=p.get(f),w=y?y.deref():void 0;return w||(a=i(a),w=s(a),p.set(f,F2(w)),r&&(t.registerIdleTasks.push(w),t.registerIdlePromise||(t.registerIdlePromise=gg().then(()=>{t.registerIdlePromise=void 0;var I=t.registerIdleTasks;I.length!==0&&(t.registerIdleTasks=[],I.forEach(E=>{r.register(E,{docId:E.primary,revisionHeight:C_(E.revision)})}))})))),w};return o}function eO(t,e){for(var n=t.getCachedRxDocument,r=[],i=0;i<e.length;i++){var s=e[i],o=n(s);r.push(o)}return r}function N2(t){return{byRev:new Map,last:t}}var B2=typeof WeakRef=="function",F2=B2?L2:$2;function L2(t){return new WeakRef(t)}function $2(t){return{deref(){return t}}}var rb=function(){function t(e,n,r){this.time=Ft(),this.collection=e,this.count=r,this.documents=eO(this.collection._docCache,n)}return Ks(t,[{key:"docsData",get:function(){return xs(this,"docsData",this.documents.map(e=>e._data))}},{key:"docsDataMap",get:function(){var e=new Map;return this.documents.forEach(n=>{e.set(n.primary,n._data)}),xs(this,"docsDataMap",e)}},{key:"docsMap",get:function(){for(var e=new Map,n=this.documents,r=0;r<n.length;r++){var i=n[r];e.set(i.primary,i)}return xs(this,"docsMap",e)}}]),t}(),j2=0,U2=function(){return++j2},tO=function(){function t(n,r,i,s={}){this.id=U2(),this._execOverDatabaseCount=0,this._creationTime=Ft(),this._lastEnsureEqual=0,this.uncached=!1,this.refCount$=new Cr(null),this._result=null,this._latestChangeEvent=-1,this._lastExecStart=0,this._lastExecEnd=0,this._ensureEqualQueue=Xn,this.op=n,this.mangoQuery=r,this.collection=i,this.other=s,r||(this.mangoQuery=tl()),this.isFindOneByIdQuery=K2(this.collection.schema.primaryPath,r)}var e=t.prototype;return e._setResultData=function(r){if(typeof r=="number"){this._result=new rb(this.collection,[],r);return}else r instanceof Map&&(r=Array.from(r.values()));var i=new rb(this.collection,r,r.length);this._result=i},e._execOverDatabase=async function(){if(this._execOverDatabaseCount=this._execOverDatabaseCount+1,this._lastExecStart=Ft(),this.op==="count"){var r=this.getPreparedQuery(),i=await this.collection.storageInstance.count(r);if(i.mode==="slow"&&!this.collection.database.allowSlowCount)throw le("QU14",{collection:this.collection,queryObj:this.mangoQuery});return i.count}if(this.op==="findByIds"){var s=ye(this.mangoQuery.selector)[this.collection.schema.primaryPath].$in,o=new Map,a=[];if(s.forEach(h=>{var p=this.collection._docCache.getLatestDocumentDataIfExists(h);if(p){if(!p._deleted){var y=this.collection._docCache.getCachedRxDocument(p);o.set(h,y)}}else a.push(h)}),a.length>0){var l=await this.collection.storageInstance.findDocumentsById(a,!1);l.forEach(h=>{var p=this.collection._docCache.getCachedRxDocument(h);o.set(p.primary,p)})}return o}var f=rO(this);return f.then(h=>(this._lastExecEnd=Ft(),h))},e.exec=function(r){if(r&&this.op!=="findOne")throw le("QU9",{collection:this.collection.name,query:this.mangoQuery,op:this.op});return ib(this).then(()=>As(this.$)).then(i=>{if(!i&&r)throw le("QU10",{collection:this.collection.name,query:this.mangoQuery,op:this.op});return i})},e.toString=function(){var r=fd({op:this.op,query:this.mangoQuery,other:this.other},!0),i=JSON.stringify(r);return this.toString=()=>i,i},e.getPreparedQuery=function(){var r={rxQuery:this,mangoQuery:Rl(this.collection.schema.jsonSchema,this.mangoQuery)};r.mangoQuery.selector._deleted={$eq:!1},r.mangoQuery.index&&r.mangoQuery.index.unshift("_deleted"),Fr("prePrepareQuery",r);var i=Jl(this.collection.schema.jsonSchema,r.mangoQuery);return this.getPreparedQuery=()=>i,i},e.doesDocumentDataMatch=function(r){return r._deleted?!1:this.queryMatcher(r)},e.remove=function(){return this.exec().then(r=>Array.isArray(r)?Promise.all(r.map(i=>i.remove())):r.remove())},e.update=function(r){throw pt("update")},e.where=function(r){throw pt("query-builder")},e.sort=function(r){throw pt("query-builder")},e.skip=function(r){throw pt("query-builder")},e.limit=function(r){throw pt("query-builder")},Ks(t,[{key:"$",get:function(){if(!this._$){var n=this.collection.$.pipe(lt(r=>!r.isLocal),Hl(null),Lr(()=>ib(this)),Mt(()=>this._result),Pi(Ai),Ms((r,i)=>!!(r&&r.time===ye(i).time)),lt(r=>!!r),Mt(r=>{var i=ye(r);return this.op==="count"?i.count:this.op==="findOne"?i.documents.length===0?null:i.documents[0]:this.op==="findByIds"?i.docsMap:i.documents.slice(0)}));this._$=_T(n,this.refCount$.pipe(lt(()=>!1)))}return this._$}},{key:"$$",get:function(){var n=this.collection.database.getReactivityFactory();return n.fromObservable(this.$,void 0)}},{key:"queryMatcher",get:function(){var n=this.collection.schema.jsonSchema,r=Rl(this.collection.schema.jsonSchema,this.mangoQuery);return xs(this,"queryMatcher",Oh(n,r))}},{key:"asRxQuery",get:function(){return this}}]),t}();function tl(){return{selector:{}}}function z2(t){return t.collection._queryCache.getByQuery(t)}function na(t,e,n,r){Fr("preCreateRxQuery",{op:t,queryObj:e,collection:n,other:r});var i=new tO(t,e,n,r);return i=z2(i),T2(n),i}function nO(t){var e=t.asRxQuery.collection._changeEventBuffer.counter;return t._latestChangeEvent>=e}function ib(t){return t.collection.database.destroyed||nO(t)?Xn:(t._ensureEqualQueue=t._ensureEqualQueue.then(()=>V2(t)),t._ensureEqualQueue)}function V2(t){if(t._lastEnsureEqual=Ft(),t.collection.database.destroyed||nO(t))return Xn;var e=!1,n=!1;if(t._latestChangeEvent===-1&&(n=!0),!n){var r=t.asRxQuery.collection._changeEventBuffer.getFrom(t._latestChangeEvent+1);if(r===null)n=!0;else{t._latestChangeEvent=t.asRxQuery.collection._changeEventBuffer.counter;var i=t.asRxQuery.collection._changeEventBuffer.reduceByLastOfDoc(r);if(t.op==="count"){var s=ye(t._result).count,o=s;i.forEach(l=>{var f=l.previousDocumentData&&t.doesDocumentDataMatch(l.previousDocumentData),h=t.doesDocumentDataMatch(l.documentData);!f&&h&&o++,f&&!h&&o--}),o!==s&&(e=!0,t._setResultData(o))}else{var a=k2(t,i);a.runFullQueryAgain?n=!0:a.changed&&(e=!0,t._setResultData(a.newResults))}}}return n?t._execOverDatabase().then(l=>(t._latestChangeEvent=t.collection._changeEventBuffer.counter,typeof l=="number"?((!t._result||l!==t._result.count)&&(e=!0,t._setResultData(l)),e):((!t._result||!NP(t.collection.schema.primaryPath,l,t._result.docsData))&&(e=!0,t._setResultData(l)),e))):Promise.resolve(e)}function Jl(t,e){if(!e.sort)throw le("SNH",{query:e});var n=uM(t,e);return{query:e,queryPlan:n}}async function rO(t){var e=[],n=t.collection;if(t.isFindOneByIdQuery)if(Array.isArray(t.isFindOneByIdQuery)){var r=t.isFindOneByIdQuery;if(r=r.filter(h=>{var p=t.collection._docCache.getLatestDocumentDataIfExists(h);return p?(p._deleted||e.push(p),!1):!0}),r.length>0){var i=await n.storageInstance.findDocumentsById(r,!1);Ua(e,i)}}else{var s=t.isFindOneByIdQuery,o=t.collection._docCache.getLatestDocumentDataIfExists(s);if(!o){var a=await n.storageInstance.findDocumentsById([s],!1);a[0]&&(o=a[0])}o&&!o._deleted&&e.push(o)}else{var l=t.getPreparedQuery(),f=await n.storageInstance.query(l);e=f.documents}return e}function K2(t,e){if(!e.skip&&e.selector&&Object.keys(e.selector).length===1&&e.selector[t]){var n=e.selector[t];if(typeof n=="string")return n;if(Object.keys(n).length===1&&typeof n.$eq=="string"||Object.keys(n).length===1&&Array.isArray(n.$eq)&&!n.$eq.find(r=>typeof r!="string"))return n.$eq}return!1}var W2="_rxdb_internal";async function Xl(t,e){var n=await t.findDocumentsById([e],!1),r=n[0];if(r)return r}async function Tl(t,e,n){var r=await t.bulkWrite([e],n);if(r.error.length>0){var i=r.error[0];throw i}else{var s=r.success[0];return s}}function q2(t,e){var n=Xl(t,e),r=t.changeStream().pipe(Mt(i=>i.events.find(s=>s.documentId===e)),lt(i=>!!i),Mt(i=>Promise.resolve(ye(i).documentData)),Hl(n),Cl(i=>i),lt(i=>!!i));return r}function Ml(t){return Object.assign({},...t)}function iO(t,e,n){var r=e.documentData,i=e.previousDocumentData,s={documentId:e.documentId,collectionName:n?n.name:void 0,isLocal:t,operation:e.operation,documentData:it.deepFreezeWhenDevMode(r),previousDocumentData:it.deepFreezeWhenDevMode(i)};return s}function yd(t,e,n,r){if(r)throw r.status===409?le("CONFLICT",{collection:t.name,id:e,writeError:r,data:n}):r.status===422?le("VD2",{collection:t.name,id:e,writeError:r,data:n}):r}function sO(t,e,n,r,i,s,o){for(var a=!!t.schema.attachments,l=[],f=[],h=[],p=iu(10),y={id:p,events:[],checkpoint:null,context:i,startTime:Ft(),endTime:0},w=y.events,I=[],E=[],$=[],S=n.size>0,_,k=r.length,z=function(){var Q=r[W],H=Q.document,X=Q.previous,U=H[e],ee=H._deleted,ce=X&&X._deleted,de=void 0;S&&(de=n.get(U));var Pe;if(de){var Te=de._rev;if(!X||X&&Te!==X._rev){var Dt={isError:!0,status:409,documentId:U,writeRow:Q,documentInDb:de};return h.push(Dt),1}var G=a?fm(Q):Q;a&&(ee?X&&Object.keys(X._attachments).forEach(ft=>{E.push({documentId:U,attachmentId:ft,digest:ye(X)._attachments[ft].digest})}):(Object.entries(H._attachments).find(([ft,Ct])=>{var Vn=X?X._attachments[ft]:void 0;return!Vn&&!Ct.data&&(Pe={documentId:U,documentInDb:de,isError:!0,status:510,writeRow:Q,attachmentId:ft}),!0}),Pe||Object.entries(H._attachments).forEach(([ft,Ct])=>{var Vn=X?X._attachments[ft]:void 0;if(!Vn)I.push({documentId:U,attachmentId:ft,attachmentData:Ct,digest:Ct.digest});else{var tn=G.document._attachments[ft].digest;Ct.data&&Vn.digest!==tn&&$.push({documentId:U,attachmentId:ft,attachmentData:Ct,digest:Ct.digest})}}))),Pe?h.push(Pe):(a?(f.push(fm(G)),o&&o(H)):(f.push(G),o&&o(H)),_=G);var oe=null,ue=null,Re=null;if(ce&&!ee)Re="INSERT",oe=a?gs(H):H;else if(X&&!ce&&!ee)Re="UPDATE",oe=a?gs(H):H,ue=X;else if(ee)Re="DELETE",oe=ye(H),ue=X;else throw le("SNH",{args:{writeRow:Q}});var xt={documentId:U,documentData:oe,previousDocumentData:ue,operation:Re};w.push(xt)}else{var ot=!!ee;if(a&&Object.entries(H._attachments).forEach(([ft,Ct])=>{Ct.data?I.push({documentId:U,attachmentId:ft,attachmentData:Ct,digest:Ct.digest}):(Pe={documentId:U,isError:!0,status:510,writeRow:Q,attachmentId:ft},h.push(Pe))}),Pe||(a?(l.push(fm(Q)),s&&s(H)):(l.push(Q),s&&s(H)),_=Q),!ot){var ct={documentId:U,operation:"INSERT",documentData:a?gs(H):H,previousDocumentData:a&&X?gs(X):X};w.push(ct)}}},W=0;W<k;W++)z();return{bulkInsertDocs:l,bulkUpdateDocs:f,newestRow:_,errors:h,eventBulk:y,attachmentsAdd:I,attachmentsRemove:E,attachmentsUpdate:$}}function fm(t){return{previous:t.previous,document:gs(t.document)}}function H2(t){return atob(t).length}function Q2(t){var e=t.data;if(!e)return t;var n={length:H2(e),digest:t.digest,type:t.type};return n}function gs(t){if(!t._attachments||Object.keys(t._attachments).length===0)return t;var e=$e(t);return e._attachments={},Object.entries(t._attachments).forEach(([n,r])=>{e._attachments[n]=Q2(r)}),e}function jg(t){var e=$e(t);return e._meta=$e(t._meta),e}function Ug(t,e,n){it.deepFreezeWhenDevMode(n);var r=$n(n.primaryKey);function i(o){var a=$e(o.document);if(a._meta=$e(a._meta),it.isDevMode()){a=oE(r,n,a);try{typeof structuredClone=="function"?structuredClone(o):JSON.parse(JSON.stringify(o))}catch{throw le("DOC24",{collection:e.collectionName,document:o.document})}o.previous,o.previous&&Object.keys(o.previous._meta).forEach(l=>{if(!Object.prototype.hasOwnProperty.call(o.document._meta,l))throw le("SNH",{dataBefore:o.previous,dataAfter:o.document})})}return a._meta.lwt=Ft(),a._rev=Ui(t.token,o.previous),{document:a,previous:o.previous}}var s={originalStorageInstance:e,schema:e.schema,internals:e.internals,collectionName:e.collectionName,databaseName:e.databaseName,options:e.options,bulkWrite(o,a){var l=o.map(f=>i(f));return t.lockedRun(()=>e.bulkWrite(l,a)).then(f=>{var h={error:[],success:f.success.slice(0)},p=f.error.filter(w=>w.status===409&&!w.writeRow.previous&&!w.writeRow.document._deleted&&ye(w.documentInDb)._deleted?!0:(h.error.push(w),!1));if(p.length>0){var y=p.map(w=>({previous:w.documentInDb,document:Object.assign({},w.writeRow.document,{_rev:Ui(t.token,w.documentInDb)})}));return t.lockedRun(()=>e.bulkWrite(y,a)).then(w=>(Ua(h.error,w.error),Ua(h.success,w.success),h))}return f})},query(o){return t.lockedRun(()=>e.query(o))},count(o){return t.lockedRun(()=>e.count(o))},findDocumentsById(o,a){return t.lockedRun(()=>e.findDocumentsById(o,a))},getAttachmentData(o,a,l){return t.lockedRun(()=>e.getAttachmentData(o,a,l))},getChangedDocumentsSince:e.getChangedDocumentsSince?(o,a)=>t.lockedRun(()=>e.getChangedDocumentsSince(ye(o),a)):void 0,cleanup(o){return t.lockedRun(()=>e.cleanup(o))},remove(){return t.storageInstances.delete(s),t.lockedRun(()=>e.remove())},close(){return t.storageInstances.delete(s),t.lockedRun(()=>e.close())},changeStream(){return e.changeStream()},conflictResultionTasks(){return e.conflictResultionTasks()},resolveConflictResultionTask(o){if(o.output.isEqual)return e.resolveConflictResultionTask(o);var a=Object.assign({},o.output.documentData,{_meta:Ws(),_rev:Nn(),_attachments:{}}),l=$e(a);return delete l._meta,delete l._rev,delete l._attachments,e.resolveConflictResultionTask({id:o.id,output:{isEqual:!1,documentData:l}})}};return t.storageInstances.add(s),s}function oO(t){if(t.schema.keyCompression)throw le("UT5",{args:{params:t}});if(vd(t.schema))throw le("UT6",{args:{params:t}});if(t.schema.attachments&&t.schema.attachments.compression)throw le("UT7",{args:{params:t}})}function vd(t){return!!(t.encrypted&&t.encrypted.length>0||t.attachments&&t.attachments.encrypted)}function Y2(t,e,n){var r=$n(t.schema.primaryKey),i=n?n.lwt:yg,s=n?n.id:"";return Rl(t.schema,{selector:{$or:[{"_meta.lwt":{$gt:i}},{"_meta.lwt":{$eq:i},[r]:{$gt:n?s:""}}],"_meta.lwt":{$gte:i}},sort:[{"_meta.lwt":"asc"},{[r]:"asc"}],skip:0,limit:e})}async function aO(t,e,n){if(t.getChangedDocumentsSince)return t.getChangedDocumentsSince(e,n);var r=$n(t.schema.primaryKey),i=Jl(t.schema,Y2(t,e,n)),s=await t.query(i),o=s.documents,a=AP(o);return{documents:o,checkpoint:a?{id:a[r],lwt:a._meta.lwt}:n||{id:"",lwt:0}}}var uO=function(){function t(n,r,i,s){this.queueByDocId=new Map,this.isRunning=!1,this.storageInstance=n,this.primaryPath=r,this.preWrite=i,this.postWrite=s}var e=t.prototype;return e.addWrite=function(r,i){var s=r[this.primaryPath],o=Br(this.queueByDocId,s,()=>[]),a=new Promise((l,f)=>{var h={lastKnownDocumentState:r,modifier:i,resolve:l,reject:f};ye(o).push(h),this.triggerRun()});return a},e.triggerRun=async function(){if(!(this.isRunning===!0||this.queueByDocId.size===0)){this.isRunning=!0;var r=[],i=this.queueByDocId;this.queueByDocId=new Map,await Promise.all(Array.from(i.entries()).map(async([o,a])=>{var l=G2(a.map(p=>p.lastKnownDocumentState)),f=l;for(var h of a)try{f=await h.modifier(Mn(f))}catch(p){h.reject(p),h.reject=()=>{},h.resolve=()=>{}}try{await this.preWrite(f,l)}catch(p){a.forEach(y=>y.reject(p));return}r.push({previous:l,document:f})}));var s=r.length>0?await this.storageInstance.bulkWrite(r,"incremental-write"):{error:[],success:[]};return await Promise.all(s.success.map(o=>{var a=o[this.primaryPath];this.postWrite(o);var l=Bo(i,a);l.forEach(f=>f.resolve(o))})),s.error.forEach(o=>{var a=o.documentId,l=Bo(i,a),f=_h(o);if(f){var h=Br(this.queueByDocId,a,()=>[]);l.reverse().forEach(y=>{y.lastKnownDocumentState=ye(f.documentInDb),ye(h).unshift(y)})}else{var p=aR(o);l.forEach(y=>y.reject(p))}}),this.isRunning=!1,this.triggerRun()}},t}();function sb(t){var e=async n=>{var r=MP(n);r._deleted=n._deleted;var i=await t(r),s=Object.assign({},i,{_meta:n._meta,_attachments:n._attachments,_rev:n._rev,_deleted:typeof i._deleted<"u"?i._deleted:n._deleted});return typeof s._deleted>"u"&&(s._deleted=!1),s};return e}function G2(t){var e=t[0],n=za(e._rev).height;return t.forEach(r=>{var i=za(r._rev).height;i>n&&(e=r,n=i)}),e}var kh={get primaryPath(){var t=this;if(t.isInstanceOfRxDocument)return t.collection.schema.primaryPath},get primary(){var t=this;if(t.isInstanceOfRxDocument)return t._data[t.primaryPath]},get revision(){var t=this;if(t.isInstanceOfRxDocument)return t._data._rev},get deleted$(){var t=this;if(t.isInstanceOfRxDocument)return t.$.pipe(Mt(e=>e._data._deleted))},get deleted$$(){var t=this,e=t.collection.database.getReactivityFactory();return e.fromObservable(t.deleted$,t.getLatest().deleted)},get deleted(){var t=this;if(t.isInstanceOfRxDocument)return t._data._deleted},getLatest(){var t=this.collection._docCache.getLatestDocumentData(this.primary);return this.collection._docCache.getCachedRxDocument(t)},get $(){var t=this;return t.collection.$.pipe(lt(e=>!e.isLocal),lt(e=>e.documentId===this.primary),Mt(e=>xg(e)),Hl(t.collection._docCache.getLatestDocumentData(this.primary)),Ms((e,n)=>e._rev===n._rev),Mt(e=>this.collection._docCache.getCachedRxDocument(e)),Pi(Ai))},get $$(){var t=this,e=t.collection.database.getReactivityFactory();return e.fromObservable(t.$,t.getLatest()._data)},get$(t){if(it.isDevMode()){if(t.includes(".item."))throw le("DOC1",{path:t});if(t===this.primaryPath)throw le("DOC2");if(this.collection.schema.finalFields.includes(t))throw le("DOC3",{path:t});var e=zi(this.collection.schema.jsonSchema,t);if(!e)throw le("DOC4",{path:t})}return this.$.pipe(Mt(n=>Ts(n,t)),Ms())},get$$(t){var e=this.get$(t),n=this.collection.database.getReactivityFactory();return n.fromObservable(e,this.getLatest().get(t))},populate(t){var e=zi(this.collection.schema.jsonSchema,t),n=this.get(t);if(!n)return vg;if(!e)throw le("DOC5",{path:t});if(!e.ref)throw le("DOC6",{path:t,schemaObj:e});var r=this.collection.database.collections[e.ref];if(!r)throw le("DOC7",{ref:e.ref,path:t,schemaObj:e});return e.type==="array"?r.findByIds(n).exec().then(i=>{var s=i.values();return Array.from(s)}):r.findOne(n).exec()},get(t){return Br(this._propertyCache,t,()=>{var e=Ts(this._data,t);if(typeof e!="object"||e===null||Array.isArray(e))return it.deepFreezeWhenDevMode(e);var n=this,r=new Proxy($e(e),{get(i,s){if(typeof s!="string")return i[s];var o=s.charAt(s.length-1);if(s.endsWith("$$")){var a=s.slice(0,-2);return n.get$$(zu(t+"."+a))}else if(o==="$"){var l=s.slice(0,-1);return n.get$(zu(t+"."+l))}else if(o==="_"){var f=s.slice(0,-1);return n.populate(zu(t+"."+f))}else return n.get(zu(t+"."+s))}});return r})},toJSON(t=!1){if(t)return it.deepFreezeWhenDevMode(this._data);var e=$e(this._data);return delete e._rev,delete e._attachments,delete e._deleted,delete e._meta,it.deepFreezeWhenDevMode(e)},toMutableJSON(t=!1){return Mn(this.toJSON(t))},update(t){throw pt("update")},incrementalUpdate(t){throw pt("update")},updateCRDT(t){throw pt("crdt")},putAttachment(){throw pt("attachments")},getAttachment(){throw pt("attachments")},allAttachments(){throw pt("attachments")},get allAttachments$(){throw pt("attachments")},async modify(t,e){var n=this._data,r=await sb(t)(n);return this._saveData(r,n)},incrementalModify(t,e){return this.collection.incrementalWriteQueue.addWrite(this._data,sb(t)).then(n=>this.collection._docCache.getCachedRxDocument(n))},patch(t){var e=this._data,n=Mn(e);return Object.entries(t).forEach(([r,i])=>{n[r]=i}),this._saveData(n,e)},incrementalPatch(t){return this.incrementalModify(e=>(Object.entries(t).forEach(([n,r])=>{e[n]=r}),e))},async _saveData(t,e){if(t=$e(t),this._data._deleted)throw le("DOC11",{id:this.primary,document:this});await cO(this.collection,t,e);var n=await this.collection.storageInstance.bulkWrite([{previous:e,document:t}],"rx-document-save-data"),r=n.error[0];return yd(this.collection,this.primary,t,r),await this.collection._runHooks("post","save",t,this),this.collection._docCache.getCachedRxDocument(n.success[0])},remove(){var t=this.collection;if(this.deleted)return Promise.reject(le("DOC13",{document:this,id:this.primary}));var e=$e(this._data),n;return t._runHooks("pre","remove",e,this).then(async()=>{e._deleted=!0;var r=await t.storageInstance.bulkWrite([{previous:this._data,document:e}],"rx-document-remove"),i=r.error[0];return yd(t,this.primary,e,i),r.success[0]}).then(r=>(n=r,this.collection._runHooks("post","remove",e,this))).then(()=>this.collection._docCache.getCachedRxDocument(n))},incrementalRemove(){return this.incrementalModify(async t=>(await this.collection._runHooks("pre","remove",t,this),t._deleted=!0,t)).then(async t=>(await this.collection._runHooks("post","remove",t._data,t),t))},destroy(){throw le("DOC14")}};function lO(t=kh){var e=function(r,i){this.collection=r,this._data=i,this._propertyCache=new Map,this.isInstanceOfRxDocument=!0};return e.prototype=t,e}function J2(t,e,n){var r=new t(e,n);return Fr("createRxDocument",r),r}function cO(t,e,n){return e._meta=Object.assign({},n._meta,e._meta),it.isDevMode()&&t.schema.validateChange(n,e),t._runHooks("pre","save",e,n)}var xo="collection",zg="storage-token",Pf="rx-migration-status",X2="RxInternalDocument",Vg=bh({version:0,title:X2,primaryKey:{key:"id",fields:["context","key"],separator:"|"},type:"object",properties:{id:{type:"string",maxLength:200},key:{type:"string"},context:{type:"string",enum:[xo,zg,Pf,"OTHER"]},data:{type:"object",additionalProperties:!0}},indexes:[],required:["key","context","data"],additionalProperties:!1,sharding:{shards:1,mode:"collection"}});function Ha(t,e){return qs(Vg,{key:t,context:e})}async function Kg(t){var e=Jl(t.schema,{selector:{context:xo,_deleted:{$eq:!1}},sort:[{id:"asc"}],skip:0}),n=await t.query(e),r=n.documents;return r}var fO="storageToken",Z2=Ha(fO,zg);async function eN(t){var e=iu(10),n=t.password?await t.hashFunction(JSON.stringify(t.password)):void 0,r={id:Z2,context:zg,key:fO,data:{rxdbVersion:t.rxdbVersion,token:e,instanceToken:t.token,passwordHash:n},_deleted:!1,_meta:Ws(),_rev:Nn(),_attachments:{}},i=await t.internalStore.bulkWrite([{document:r}],"internal-add-storage-token");if(i.success[0])return i.success[0];var s=ye(i.error[0]);if(s.isError&&_h(s)){var o=s;if(!tN(o.documentInDb.data.rxdbVersion,t.rxdbVersion))throw le("DM5",{args:{database:t.name,databaseStateVersion:o.documentInDb.data.rxdbVersion,codeVersion:t.rxdbVersion}});if(n&&n!==o.documentInDb.data.passwordHash)throw le("DB1",{passwordHash:n,existingPasswordHash:o.documentInDb.data.passwordHash});var a=o.documentInDb;return ye(a)}throw s}function tN(t,e){if(!t||e.includes("beta")&&e!==t)return!1;var n=t.split(".")[0],r=e.split(".")[0];return n===r}async function dO(t,e,n){if(t.schema.version!==n.version)throw le("SNH",{schema:n,version:t.schema.version,name:t.name,collection:t,args:{storageCollectionName:e}});for(var r=zy(t.name,t.schema.jsonSchema),i=Ha(r,xo);;){var s=await Xl(t.database.internalStore,i),o=Mn(ye(s)),a=o.data.connectedStorages.find(l=>l.collectionName===e&&l.schema.version===n.version);if(a)return;o.data.connectedStorages.push({collectionName:e,schema:n});try{await Tl(t.database.internalStore,{previous:ye(s),document:o},"add-connected-storage-to-collection")}catch(l){if(!_h(l))throw l}}}function zy(t,e){return t+"-"+e.version}function dm(t,e){return e=$e(e),e=dR(t,e),e=oE(t.primaryPath,t.jsonSchema,e),e._meta=Ws(),Object.prototype.hasOwnProperty.call(e,"_deleted")||(e._deleted=!1),Object.prototype.hasOwnProperty.call(e,"_attachments")||(e._attachments={}),Object.prototype.hasOwnProperty.call(e,"_rev")||(e._rev=Nn()),e}async function nN(t,e){e.multiInstance=t.multiInstance;var n=await t.storage.createStorageInstance(e);return n}async function hO(t,e,n,r,i,s,o){var a=await Kg(e),l=a.filter(y=>y.data.name===i),f=[];l.forEach(y=>{f.push({collectionName:y.data.name,schema:y.data.schema,isCollection:!0}),y.data.connectedStorages.forEach(w=>f.push({collectionName:w.collectionName,isCollection:!1,schema:w.schema}))});var h=new Set;if(f=f.filter(y=>{var w=y.collectionName+"||"+y.schema.version;return h.has(w)?!1:(h.add(w),!0)}),await Promise.all(f.map(async y=>{var w=await t.createStorageInstance({collectionName:y.collectionName,databaseInstanceToken:n,databaseName:r,multiInstance:!1,options:{},schema:y.schema,password:s,devMode:it.isDevMode()});await w.remove(),y.isCollection&&await Fo("postRemoveRxCollection",{storage:t,databaseName:r,collectionName:i})})),o){var p=l.map(y=>{var w=jg(y);return w._deleted=!0,w._meta.lwt=Ft(),w._rev=Ui(n,y),{previous:y,document:w}});await e.bulkWrite(p,"rx-database-remove-collection-all")}}var rN=function(){function t(n){this.subs=[],this.limit=100,this.counter=0,this.eventCounterMap=new WeakMap,this.buffer=[],this.collection=n,this.subs.push(this.collection.$.pipe(lt(r=>!r.isLocal)).subscribe(r=>this._handleChangeEvent(r)))}var e=t.prototype;return e._handleChangeEvent=function(r){for(this.counter++,this.buffer.push(r),this.eventCounterMap.set(r,this.counter);this.buffer.length>this.limit;)this.buffer.shift()},e.getArrayIndexByPointer=function(r){var i=this.buffer[0],s=this.eventCounterMap.get(i);if(r<s)return null;var o=r-s;return o},e.getFrom=function(r){var i=[],s=this.getArrayIndexByPointer(r);if(s===null)return null;for(;;){var o=this.buffer[s];if(s++,o)i.push(o);else return i}},e.runFrom=function(r,i){var s=this.getFrom(r);if(s===null)throw new Error("out of bounds");s.forEach(o=>i(o))},e.reduceByLastOfDoc=function(r){return r.slice(0)},e.destroy=function(){this.subs.forEach(r=>r.unsubscribe())},t}();function iN(t){return new rN(t)}var sN=new WeakMap;function oN(t){var e=t.schema.getDocumentPrototype(),n=lN(t),r=kh,i={};return[e,n,r].forEach(s=>{var o=Object.getOwnPropertyNames(s);o.forEach(a=>{var l=Object.getOwnPropertyDescriptor(s,a),f=!0;(a.startsWith("_")||a.endsWith("_")||a.startsWith("$")||a.endsWith("$"))&&(f=!1),typeof l.value=="function"?Object.defineProperty(i,a,{get(){return l.value.bind(this)},enumerable:f,configurable:!1}):(l.enumerable=f,l.configurable=!1,l.writable&&(l.writable=!1),Object.defineProperty(i,a,l))})}),i}function aN(t){return Br(sN,t,()=>lO(oN(t)))}function uN(t,e){var n=J2(aN(t),t,it.deepFreezeWhenDevMode(e));return t._runHooksSync("post","create",e,n),Fr("postCreateRxDocument",n),n}function lN(t){var e={};return Object.entries(t.methods).forEach(([n,r])=>{e[n]=r}),e}async function gd(t,e){var n=qs(t.input.metaInstance.schema,{isCheckpoint:"1",itemId:e}),r=await t.input.metaInstance.findDocumentsById([n],!1),i=r[0];if(t.lastCheckpointDoc[e]=i,i)return i.checkpointData}async function wd(t,e,n){t.checkpointQueue=t.checkpointQueue.then(async()=>{var r=t.lastCheckpointDoc[e];if(n&&!t.events.canceled.getValue()&&(!r||JSON.stringify(r.checkpointData)!==JSON.stringify(n))){var i={id:"",isCheckpoint:"1",itemId:e,_deleted:!1,_attachments:{},checkpointData:n,_meta:Ws(),_rev:Nn()};for(i.id=qs(t.input.metaInstance.schema,i);!t.events.canceled.getValue();){if(r&&(i.checkpointData=Ml([r.checkpointData,i.checkpointData])),i._meta.lwt=Ft(),i._rev=Ui(await t.checkpointKey,r),t.events.canceled.getValue())return;var s=await t.input.metaInstance.bulkWrite([{previous:r,document:i}],"replication-set-checkpoint"),o=s.success[0];if(o){t.lastCheckpointDoc[e]=o;return}else{var a=s.error[0];if(a.status!==409)throw a;r=ye(a.documentInDb),i._rev=Ui(await t.checkpointKey,r)}}}}),await t.checkpointQueue}async function cN(t){var e=await t.hashFunction([t.identifier,t.forkInstance.databaseName,t.forkInstance.collectionName].join("||"));return"rx_storage_replication_"+e}function ob(t,e,n,r,i){var s=Object.assign({},r,{_attachments:e&&r._attachments?r._attachments:{},_meta:n?r._meta:{lwt:Ft()},_rev:n?r._rev:Nn()});return s._rev||(s._rev=Ui(t,i)),s}function cs(t,e,n){var r=$e(t);return e||delete r._attachments,n||(delete r._meta,delete r._rev),r}function Vy(t,e){return t.hasAttachments?e.map(n=>{var r=Mn(n.document);return r.docData=gs(r.docData),{document:r,previous:n.previous}}):e}function Ky(t){for(;;)if(t.underlyingPersistentStorage)t=t.underlyingPersistentStorage;else return t}var Rf="RxReplicationProtocolMetaData";function Wy(t,e){var n=uR(t),r={title:Rf,primaryKey:{key:"id",fields:["itemId","isCheckpoint"],separator:"|"},type:"object",version:t.version,additionalProperties:!1,properties:{id:{type:"string",minLength:1,maxLength:n+2},isCheckpoint:{type:"string",enum:["0","1"],minLength:1,maxLength:1},itemId:{type:"string",maxLength:n>4?n:4},checkpointData:{type:"object",additionalProperties:!0},docData:{type:"object",properties:t.properties},isResolvedConflict:{type:"string"}},keyCompression:t.keyCompression,required:["id","isCheckpoint","itemId"]};e&&(r.encrypted=["docData"]);var i=bh(r);return i}function pO(t,e){return t.input.metaInstance.findDocumentsById(e.map(n=>{var r=qs(t.input.metaInstance.schema,{itemId:n,isCheckpoint:"0"});return r}),!0).then(n=>{var r={};return Object.values(n).forEach(i=>{r[i.itemId]={docData:i.docData,metaDocument:i}}),r})}async function _d(t,e,n,r){var i=e[t.primaryPath],s=n?jg(n):{id:"",isCheckpoint:"0",itemId:i,docData:e,_attachments:{},_deleted:!1,_rev:Nn(),_meta:{lwt:0}};s.docData=e,r&&(s.isResolvedConflict=r),s._meta.lwt=Ft(),s.id=qs(t.input.metaInstance.schema,s),s._rev=Ui(await t.checkpointKey,n);var o={previous:n,document:s};return o}async function fN(t){if(t.input.initialCheckpoint&&t.input.initialCheckpoint.downstream){var e=await gd(t,"down");e||await wd(t,"down",t.input.initialCheckpoint.downstream)}var n=await t.input.hashFunction(t.input.identifier),r=t.input.replicationHandler,i=0,s=[];function o(I){t.stats.down.addNewTask=t.stats.down.addNewTask+1;var E={time:i++,task:I};s.push(E),t.streamQueue.down=t.streamQueue.down.then(()=>{for(var $=[];s.length>0;){t.events.active.down.next(!0);var S=ye(s.shift());if(!(S.time<l)){if(S.task==="RESYNC")if($.length===0){$.push(S.task);break}else break;$.push(S.task)}}if($.length!==0)return $[0]==="RESYNC"?f():h($)}).then(()=>{t.events.active.down.next(!1),!t.firstSyncDone.down.getValue()&&!t.events.canceled.getValue()&&t.firstSyncDone.down.next(!0)})}if(o("RESYNC"),!t.events.canceled.getValue()){var a=r.masterChangeStream$.pipe(Lr(async I=>(await As(t.events.active.up.pipe(lt(E=>!E))),I))).subscribe(I=>{t.stats.down.masterChangeStreamEmit=t.stats.down.masterChangeStreamEmit+1,o(I)});As(t.events.canceled.pipe(lt(I=>!!I))).then(()=>a.unsubscribe())}var l=-1;async function f(){if(t.stats.down.downstreamResyncOnce=t.stats.down.downstreamResyncOnce+1,!t.events.canceled.getValue()){t.checkpointQueue=t.checkpointQueue.then(()=>gd(t,"down"));for(var I=await t.checkpointQueue,E=[];!t.events.canceled.getValue();){l=i++;var $=await r.masterChangesSince(I,t.input.pullBatchSize);if($.documents.length===0||(I=Ml([I,$.checkpoint]),E.push(w($.documents,I)),$.documents.length<t.input.pullBatchSize))break}await Promise.all(E)}}function h(I){t.stats.down.downstreamProcessChanges=t.stats.down.downstreamProcessChanges+1;var E=[],$=null;return I.forEach(S=>{if(S==="RESYNC")throw new Error("SNH");Ua(E,S.documents),$=Ml([$,S.checkpoint])}),w(E,ye($))}var p=un,y={docs:{}};function w(I,E){var $=t.primaryPath;return t.stats.down.persistFromMaster=t.stats.down.persistFromMaster+1,I.forEach(S=>{var _=S[$];y.docs[_]=S}),y.checkpoint=E,p=p.then(()=>{var S=y.docs;y.docs={};var _=y.checkpoint,k=Object.keys(S);if(t.events.canceled.getValue()||k.length===0)return un;var z=[],W={},Q={},H=[];return Promise.all([t.input.forkInstance.findDocumentsById(k,!0),pO(t,k)]).then(([X,U])=>{var ee=new Map;return X.forEach(ce=>ee.set(ce[$],ce)),Promise.all(k.map(async ce=>{var de=ee.get(ce),Pe=de?cs(de,t.hasAttachments,!1):void 0,ot=S[ce],ct=U[ce];if(ct&&de&&ct.metaDocument.isResolvedConflict===de._rev)return un;var Te=!ct||!Pe?!1:await t.input.conflictHandler({realMasterState:ct.docData,newDocumentState:Pe},"downstream-check-if-equal-0").then(Re=>Re.isEqual);if(!Te&&ct&&ct.docData._rev&&de&&de._meta[t.input.identifier]&&za(de._rev).height===de._meta[t.input.identifier]&&(Te=!0),de&&ct&&Te===!1||de&&!ct)return un;var Dt=Pe?await t.input.conflictHandler({realMasterState:ot,newDocumentState:Pe},"downstream-check-if-equal-1").then(Re=>Re.isEqual):!1;if(Pe&&Dt)return(!ct||Te===!1)&&H.push(await _d(t,Pe,ct?ct.metaDocument:void 0)),un;var G=Object.assign({},ot,de?{_meta:$e(de._meta),_attachments:t.hasAttachments&&ot._attachments?ot._attachments:{},_rev:Nn()}:{_meta:{lwt:Ft()},_rev:Nn(),_attachments:t.hasAttachments&&ot._attachments?ot._attachments:{}});if(ot._rev){var oe=de?za(de._rev).height+1:1;G._meta[t.input.identifier]=oe,t.input.keepMeta&&(G._rev=ot._rev)}t.input.keepMeta&&ot._meta&&(G._meta=ot._meta);var ue={previous:de,document:G};ue.document._rev=ue.document._rev?ue.document._rev:Ui(n,ue.previous),z.push(ue),W[ce]=ue,Q[ce]=await _d(t,ot,ct?ct.metaDocument:void 0)}))}).then(async()=>{if(z.length>0)return t.input.forkInstance.bulkWrite(z,await t.downstreamBulkWriteFlag).then(X=>{X.success.forEach(U=>{var ee=U[$];t.events.processed.down.next(W[ee]),H.push(Q[ee])}),X.error.forEach(U=>{U.status!==409&&t.events.error.next(le("RC_PULL",{writeError:U}))})})}).then(()=>{if(H.length>0)return t.input.metaInstance.bulkWrite(Vy(t,H),"replication-down-write-meta").then(X=>{X.error.forEach(U=>{t.events.error.next(le("RC_PULL",{id:U.documentId,writeError:U}))})})}).then(()=>{wd(t,"down",_)})}).catch(S=>t.events.error.next(S)),p}}var bd=function(t,e){var n=gs(t.newDocumentState),r=gs(t.realMasterState);return Va(n,r)?Promise.resolve({isEqual:!0}):Promise.resolve({isEqual:!1,documentData:t.realMasterState})};async function dN(t,e,n){var r=t.input.conflictHandler,i=await r(e,"replication-resolve-conflict");if(!i.isEqual){var s=Object.assign({},i.documentData,{_meta:$e(n._meta),_rev:Nn(),_attachments:$e(n._attachments)});return s._meta.lwt=Ft(),s._rev=Ui(await t.checkpointKey,n),{resolvedDoc:s,output:i}}}async function qy(t,e,n,r){if(!n._attachments||r&&!r._attachments)throw new Error("_attachments missing");var i=n[t],s=new Set(r&&r._attachments?Object.keys(r._attachments):[]);return await Promise.all(Object.entries(n._attachments).map(async([o,a])=>{if((!s.has(o)||r&&ye(r._attachments)[o].digest!==a.digest)&&!a.data){var l=await e.getAttachmentData(i,o,a.digest);a.data=l}})),n}async function hN(t){if(t.input.initialCheckpoint&&t.input.initialCheckpoint.upstream){var e=await gd(t,"up");e||await wd(t,"up",t.input.initialCheckpoint.upstream)}var n=t.input.replicationHandler;t.streamQueue.up=t.streamQueue.up.then(()=>f().then(()=>{h()}));var r=0,i=-1,s=[],o=Xn,a={docs:{}},l=t.input.forkInstance.changeStream().subscribe(async y=>{if(y.context!==await t.downstreamBulkWriteFlag)return t.stats.up.forkChangeStreamEmit=t.stats.up.forkChangeStreamEmit+1,s.push({task:y,time:r++}),t.events.active.up.getValue()||t.events.active.up.next(!0),t.input.waitBeforePersist?t.input.waitBeforePersist().then(()=>h()):h()});As(t.events.canceled.pipe(lt(y=>!!y))).then(()=>l.unsubscribe());async function f(){if(t.stats.up.upstreamInitialSync=t.stats.up.upstreamInitialSync+1,!t.events.canceled.getValue()){t.checkpointQueue=t.checkpointQueue.then(()=>gd(t,"up"));for(var y=await t.checkpointQueue,w=new Set,I=async function(){i=r++,w.size>3&&await Promise.race(Array.from(w));var S=await aO(t.input.forkInstance,t.input.pushBatchSize,y);if(S.documents.length===0)return 1;y=Ml([y,S.checkpoint]);var _=p(S.documents,ye(y));w.add(_),_.catch().then(()=>w.delete(_))};!t.events.canceled.getValue()&&!await I(););var E=await Promise.all(w),$=E.find(S=>!!S);$?await f():!t.firstSyncDone.up.getValue()&&!t.events.canceled.getValue()&&t.firstSyncDone.up.next(!0)}}function h(){if(t.events.canceled.getValue()||s.length===0){t.events.active.up.next(!1);return}t.stats.up.processTasks=t.stats.up.processTasks+1,t.events.active.up.next(!0),t.streamQueue.up=t.streamQueue.up.then(()=>{for(var y=[],w={};s.length>0;){var I=ye(s.shift());I.time<i||(Ua(y,I.task.events.map($=>$.documentData)),w=Ml([w,I.task.checkpoint]))}var E=y.length===0?Xn:p(y,w);return E.then(()=>{s.length===0?t.events.active.up.next(!1):h()})})}function p(y,w){return t.stats.up.persistToMaster=t.stats.up.persistToMaster+1,y.forEach(I=>{var E=I[t.primaryPath];a.docs[E]=I}),a.checkpoint=w,o=o.then(async()=>{if(t.events.canceled.getValue())return!1;var I=a.docs;a.docs={};var E=a.checkpoint,$=Object.keys(I);if($.length===0)return!1;var S=await pO(t,$),_={},k=[],z={},W={};if(await Promise.all($.map(async Te=>{var Dt=I[Te];W[Te]=Dt;var G=cs(Dt,t.hasAttachments,!!t.input.keepMeta),oe=S[Te];oe&&oe.metaDocument.isResolvedConflict!==Dt._rev&&(await t.input.conflictHandler({realMasterState:oe.docData,newDocumentState:G},"upstream-check-if-equal")).isEqual||oe&&oe.docData._rev&&za(Dt._rev).height===Dt._meta[t.input.identifier]||(k.push(Te),_[Te]={assumedMasterState:oe?oe.docData:void 0,newDocumentState:G},z[Te]=await _d(t,G,oe?oe.metaDocument:void 0))})),k.length===0)return!1;var Q=Object.values(_),H=new Set,X={},U=PP(Q,t.input.pushBatchSize);await Promise.all(U.map(async Te=>{t.hasAttachments&&await Promise.all(Te.map(async G=>{G.newDocumentState=await qy(t.primaryPath,t.input.forkInstance,Mn(G.newDocumentState),G.assumedMasterState)}));var Dt=await n.masterWrite(Te);Dt.forEach(G=>{var oe=G[t.primaryPath];H.add(oe),X[oe]=G})}));var ee=[];if(k.forEach(Te=>{H.has(Te)||(t.events.processed.up.next(_[Te]),ee.push(z[Te]))}),t.events.canceled.getValue())return!1;ee.length>0&&await t.input.metaInstance.bulkWrite(Vy(t,ee),"replication-up-write-meta");var ce=!1;if(H.size>0){t.stats.up.persistToMasterHadConflicts=t.stats.up.persistToMasterHadConflicts+1;var de=[],Pe={};if(await Promise.all(Object.entries(X).map(([Te,Dt])=>{var G=_[Te],oe={newDocumentState:G.newDocumentState,assumedMasterState:G.assumedMasterState,realMasterState:Dt};return dN(t,oe,W[Te]).then(async ue=>{if(ue){t.events.resolvedConflicts.next({input:oe,output:ue.output}),de.push({previous:W[Te],document:ue.resolvedDoc});var Re=S[Te];Pe[Te]=await _d(t,ye(Dt),Re?Re.metaDocument:void 0,ue.resolvedDoc._rev)}})})),de.length>0){ce=!0,t.stats.up.persistToMasterConflictWrites=t.stats.up.persistToMasterConflictWrites+1;var ot=await t.input.forkInstance.bulkWrite(de,"replication-up-write-conflict"),ct=[];ot.success.forEach(Te=>{var Dt=Te[t.primaryPath];ct.push(Pe[Dt])}),ct.length>0&&await t.input.metaInstance.bulkWrite(Vy(t,ct),"replication-up-write-conflict-meta")}}return wd(t,"up",E),ce}).catch(I=>(t.events.error.next(I),!1)),o}}function mO(t){t=$e(t),t.forkInstance=Ky(t.forkInstance),t.metaInstance=Ky(t.metaInstance);var e=cN(t),n={primaryPath:$n(t.forkInstance.schema.primaryKey),hasAttachments:!!t.forkInstance.schema.attachments,input:t,checkpointKey:e,downstreamBulkWriteFlag:e.then(r=>"replication-downstream-"+r),events:{canceled:new Cr(!1),active:{down:new Cr(!0),up:new Cr(!0)},processed:{down:new Kt,up:new Kt},resolvedConflicts:new Kt,error:new Kt},stats:{down:{addNewTask:0,downstreamProcessChanges:0,downstreamResyncOnce:0,masterChangeStreamEmit:0,persistFromMaster:0},up:{forkChangeStreamEmit:0,persistToMaster:0,persistToMasterConflictWrites:0,persistToMasterHadConflicts:0,processTasks:0,upstreamInitialSync:0}},firstSyncDone:{down:new Cr(!1),up:new Cr(!1)},streamQueue:{down:un,up:un},checkpointQueue:un,lastCheckpointDoc:{}};return fN(n),hN(n),n}function Tf(t){return As(PE([t.firstSyncDone.down.pipe(lt(e=>!!e)),t.firstSyncDone.up.pipe(lt(e=>!!e))])).then(()=>{})}function ab(t){return Promise.all([t.streamQueue.up,t.streamQueue.down,t.checkpointQueue])}function pN(t,e,n,r=!1){t=Ky(t);var i=!!t.schema.attachments,s=$n(t.schema.primaryKey),o={masterChangeStream$:t.changeStream().pipe(Lr(async a=>{var l={checkpoint:a.checkpoint,documents:await Promise.all(a.events.map(async f=>{var h=cs(f.documentData,i,r);return i&&(h=await qy(s,t,Mn(h),void 0)),h}))};return l})),masterChangesSince(a,l){return aO(t,l,a).then(async f=>({checkpoint:f.documents.length>0?f.checkpoint:a,documents:await Promise.all(f.documents.map(async h=>{var p=cs(h,i,r);return i&&(p=await qy(s,t,Mn(p),void 0)),p}))}))},async masterWrite(a){var l={};a.forEach(E=>{var $=E.newDocumentState[s];l[$]=E});var f=Object.keys(l),h=await t.findDocumentsById(f,!0),p=new Map;h.forEach(E=>p.set(E[s],E));var y=[],w=[];if(await Promise.all(Object.entries(l).map(async([E,$])=>{var S=p.get(E);S?S&&!$.assumedMasterState?y.push(cs(S,i,r)):(await e({realMasterState:cs(S,i,r),newDocumentState:ye($.assumedMasterState)},"rxStorageInstanceToReplicationHandler-masterWrite")).isEqual===!0?w.push({previous:S,document:ob(n,i,r,$.newDocumentState,S)}):y.push(cs(S,i,r)):w.push({document:ob(n,i,r,$.newDocumentState)})})),w.length>0){var I=await t.bulkWrite(w,"replication-master-write");I.error.forEach(E=>{if(E.status!==409)throw new Error("non conflict error");y.push(cs(ye(E.documentInDb),i,r))})}return y}};return o}async function yO(t){t.events.canceled.next(!0),t.events.active.up.complete(),t.events.active.down.complete(),t.events.processed.up.complete(),t.events.processed.down.complete(),t.events.resolvedConflicts.complete(),t.events.canceled.complete(),await t.checkpointQueue}var vO=["pre","post"],gO=["insert","save","remove","create"],ub=!1,wO=function(){function t(n,r,i,s,o={},a={},l={},f={},h={},p=XE,y={},w=bd){this.storageInstance={},this.timeouts=new Set,this.incrementalWriteQueue={},this._incrementalUpsertQueues=new Map,this.synced=!1,this.hooks={},this._subs=[],this._docCache={},this._queryCache=x2(),this.$={},this.checkpoint$={},this._changeEventBuffer={},this.onDestroy=[],this.destroyed=!1,this.database=n,this.name=r,this.schema=i,this.internalStorageInstance=s,this.instanceCreationOptions=o,this.migrationStrategies=a,this.methods=l,this.attachments=f,this.options=h,this.cacheReplacementPolicy=p,this.statics=y,this.conflictHandler=w,mN(this.asRxCollection)}var e=t.prototype;return e.prepare=async function(){this.storageInstance=Ug(this.database,this.internalStorageInstance,this.schema.jsonSchema),this.incrementalWriteQueue=new uO(this.storageInstance,this.schema.primaryPath,(o,a)=>cO(this,o,a),o=>this._runHooks("post","save",o));var r=this.database.eventBulks$.pipe(lt(o=>o.collectionName===this.name));this.$=r.pipe(Lr(o=>o.events)),this.checkpoint$=r.pipe(Mt(o=>o.checkpoint)),this._changeEventBuffer=iN(this.asRxCollection),this._docCache=new ZE(this.schema.primaryPath,this.$.pipe(lt(o=>!o.isLocal)),o=>uN(this.asRxCollection,o));var i=await this.database.storageToken,s=this.storageInstance.changeStream().subscribe(o=>{var a={id:o.id,internal:!1,collectionName:this.name,storageToken:i,events:o.events.map(l=>iO(!1,l,this)),databaseToken:this.database.token,checkpoint:o.checkpoint,context:o.context,endTime:o.endTime,startTime:o.startTime};this.database.$emit(a)});return this._subs.push(s),this._subs.push(this.storageInstance.conflictResultionTasks().subscribe(o=>{this.conflictHandler(o.input,o.context).then(a=>{this.storageInstance.resolveConflictResultionTask({id:o.id,output:a})})})),un},e.cleanup=function(r){throw pt("cleanup")},e.migrationNeeded=function(){throw pt("migration-schema")},e.getMigrationState=function(){throw pt("migration-schema")},e.startMigration=function(r=10){return this.getMigrationState().startMigration(r)},e.migratePromise=function(r=10){return this.getMigrationState().migratePromise(r)},e.insert=async function(r){var i=await this.bulkInsert([r]),s=i.error[0];yd(this,r[this.schema.primaryPath],r,s);var o=ye(i.success[0]);return o},e.bulkInsert=async function(r){if(r.length===0)return{success:[],error:[]};var i=this.schema.primaryPath,s=r.map(p=>{var y=dm(this.schema,p);return y}),o=this.hasHooks("pre","insert")?await Promise.all(s.map(p=>this._runHooks("pre","insert",p).then(()=>p))):s,a=o.map(p=>{var y={document:p};return y}),l=await this.storageInstance.bulkWrite(a,"rx-collection-bulk-insert"),f=eO(this._docCache,l.success);if(this.hasHooks("post","insert")){var h=new Map;o.forEach(p=>{h.set(p[i],p)}),await Promise.all(f.map(p=>this._runHooks("post","insert",h.get(p.primary),p)))}return{success:f,error:l.error}},e.bulkRemove=async function(r){var i=this.schema.primaryPath;if(r.length===0)return{success:[],error:[]};var s=await this.findByIds(r).exec(),o=[],a=new Map;Array.from(s.values()).forEach(y=>{var w=y.toMutableJSON(!0);o.push(w),a.set(y.primary,w)}),await Promise.all(o.map(y=>{var w=y[this.schema.primaryPath];return this._runHooks("pre","remove",y,s.get(w))}));var l=o.map(y=>{var w=$e(y);return w._deleted=!0,{previous:y,document:w}}),f=await this.storageInstance.bulkWrite(l,"rx-collection-bulk-remove"),h=f.success.map(y=>y[i]);await Promise.all(h.map(y=>this._runHooks("post","remove",a.get(y),s.get(y))));var p=h.map(y=>Bo(s,y));return{success:p,error:f.error}},e.bulkUpsert=async function(r){var i=[],s=new Map;r.forEach(f=>{var h=dm(this.schema,f),p=h[this.schema.primaryPath];if(!p)throw le("COL3",{primaryPath:this.schema.primaryPath,data:h,schema:this.schema.jsonSchema});s.set(p,h),i.push(h)});var o=await this.bulkInsert(i),a=o.success.slice(0),l=[];return await Promise.all(o.error.map(async f=>{if(f.status!==409)l.push(f);else{var h=f.documentId,p=Bo(s,h),y=ye(f.documentInDb),w=this._docCache.getCachedRxDocument(y),I=await w.incrementalModify(()=>p);a.push(I)}})),{error:l,success:a}},e.upsert=async function(r){var i=await this.bulkUpsert([r]);return yd(this.asRxCollection,r[this.schema.primaryPath],r,i.error[0]),i.success[0]},e.incrementalUpsert=function(r){var i=dm(this.schema,r),s=i[this.schema.primaryPath];if(!s)throw le("COL4",{data:r});var o=this._incrementalUpsertQueues.get(s);return o||(o=un),o=o.then(()=>vN(this,s,i)).then(a=>a.inserted?a.doc:yN(a.doc,i)),this._incrementalUpsertQueues.set(s,o),o},e.find=function(r){if(typeof r=="string")throw le("COL5",{queryObj:r});r||(r=tl());var i=na("find",r,this);return i},e.findOne=function(r){if(typeof r=="number"||Array.isArray(r))throw el("COL6",{queryObj:r});var i;if(typeof r=="string")i=na("findOne",{selector:{[this.schema.primaryPath]:r},limit:1},this);else{if(r||(r=tl()),r.limit)throw le("QU6");r=$e(r),r.limit=1,i=na("findOne",r,this)}return i},e.count=function(r){r||(r=tl());var i=na("count",r,this);return i},e.findByIds=function(r){var i={selector:{[this.schema.primaryPath]:{$in:r.slice(0)}}},s=na("findByIds",i,this);return s},e.exportJSON=function(){throw pt("json-dump")},e.importJSON=function(r){throw pt("json-dump")},e.insertCRDT=function(r){throw pt("crdt")},e.addHook=function(r,i,s,o=!1){if(typeof s!="function")throw el("COL7",{key:i,when:r});if(!vO.includes(r))throw el("COL8",{key:i,when:r});if(!gO.includes(i))throw le("COL9",{key:i});if(r==="post"&&i==="create"&&o===!0)throw le("COL10",{when:r,key:i,parallel:o});var a=s.bind(this),l=o?"parallel":"series";this.hooks[i]=this.hooks[i]||{},this.hooks[i][r]=this.hooks[i][r]||{series:[],parallel:[]},this.hooks[i][r][l].push(a)},e.getHooks=function(r,i){return!this.hooks[i]||!this.hooks[i][r]?{series:[],parallel:[]}:this.hooks[i][r]},e.hasHooks=function(r,i){var s=this.getHooks(r,i);return s?s.series.length>0||s.parallel.length>0:!1},e._runHooks=function(r,i,s,o){var a=this.getHooks(r,i);if(!a)return un;var l=a.series.map(f=>()=>f(s,o));return JP(l).then(()=>Promise.all(a.parallel.map(f=>f(s,o))))},e._runHooksSync=function(r,i,s,o){var a=this.getHooks(r,i);a&&a.series.forEach(l=>l(s,o))},e.promiseWait=function(r){var i=new Promise(s=>{var o=setTimeout(()=>{this.timeouts.delete(o),s()},r);this.timeouts.add(o)});return i},e.destroy=function(){return this.destroyed?Xn:(this.destroyed=!0,Array.from(this.timeouts).forEach(r=>clearTimeout(r)),this._changeEventBuffer&&this._changeEventBuffer.destroy(),this.database.requestIdlePromise().then(()=>Promise.all(this.onDestroy.map(r=>r()))).then(()=>this.storageInstance.close()).then(()=>(this._subs.forEach(r=>r.unsubscribe()),delete this.database.collections[this.name],Fo("postDestroyRxCollection",this).then(()=>!0))))},e.remove=async function(){await this.destroy(),await hO(this.database.storage,this.database.internalStore,this.database.token,this.database.name,this.name,this.database.password,this.database.hashFunction)},Ks(t,[{key:"insert$",get:function(){return this.$.pipe(lt(n=>n.operation==="INSERT"))}},{key:"update$",get:function(){return this.$.pipe(lt(n=>n.operation==="UPDATE"))}},{key:"remove$",get:function(){return this.$.pipe(lt(n=>n.operation==="DELETE"))}},{key:"asRxCollection",get:function(){return this}}]),t}();function mN(t){if(!ub){ub=!0;var e=Object.getPrototypeOf(t);gO.forEach(n=>{vO.map(r=>{var i=r+eE(n);e[i]=function(s,o){return this.addHook(r,n,s,o)}})})}}function yN(t,e){return t.incrementalModify(n=>e)}function vN(t,e,n){var r=t._docCache.getLatestDocumentDataIfExists(e);return r?Promise.resolve({doc:t._docCache.getCachedRxDocument(r),inserted:!1}):t.findOne(e).exec().then(i=>i?{doc:i,inserted:!1}:t.insert(n).then(s=>({doc:s,inserted:!0})))}function gN({database:t,name:e,schema:n,instanceCreationOptions:r={},migrationStrategies:i={},autoMigrate:s=!0,statics:o={},methods:a={},attachments:l={},options:f={},localDocuments:h=!1,cacheReplacementPolicy:p=XE,conflictHandler:y=bd}){var w={databaseInstanceToken:t.token,databaseName:t.name,collectionName:e,schema:n.jsonSchema,options:r,multiInstance:t.multiInstance,password:t.password,devMode:it.isDevMode()};return Fr("preCreateRxStorageInstance",w),nN(t,w).then(I=>{var E=new wO(t,e,n,I,r,i,a,l,f,p,o,y);return E.prepare().then(()=>{Object.entries(o).forEach(([S,_])=>{Object.defineProperty(E,S,{get:()=>_.bind(E)})});var $=un;return s&&E.schema.version!==0&&($=E.migratePromise()),$}).then(()=>(Fr("createRxCollection",{collection:E,creator:{name:e,schema:n,storageInstance:I,instanceCreationOptions:r,migrationStrategies:i,methods:a,attachments:l,options:f,cacheReplacementPolicy:p,localDocuments:h,statics:o}}),E)).catch($=>I.close().then(()=>Promise.reject($)))})}var _O=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this._parallels=e||1,this._qC=0,this._iC=new Set,this._lHN=0,this._hPM=new Map,this._pHM=new Map};_O.prototype={isIdle:function(){return this._qC<this._parallels},lock:function(){this._qC++},unlock:function(){this._qC--,Hy(this)},wrapCall:function(e){var n=this;this.lock();var r;try{r=e()}catch(i){throw this.unlock(),i}return!r.then||typeof r.then!="function"?(this.unlock(),r):r.then(function(i){return n.unlock(),i}).catch(function(i){throw n.unlock(),i})},requestIdlePromise:function(e){var n=this;e=e||{};var r,i=new Promise(function(a){return r=a}),s=function(){hm(n,i),r()};if(i._manRes=s,e.timeout){var o=setTimeout(function(){i._manRes()},e.timeout);i._timeoutObj=o}return this._iC.add(i),Hy(this),i},cancelIdlePromise:function(e){hm(this,e)},requestIdleCallback:function(e,n){var r=this._lHN++,i=this.requestIdlePromise(n);return this._hPM.set(r,i),this._pHM.set(i,r),i.then(function(){return e()}),r},cancelIdleCallback:function(e){var n=this._hPM.get(e);this.cancelIdlePromise(n)},clear:function(){var e=this;this._iC.forEach(function(n){return hm(e,n)}),this._qC=0,this._iC.clear(),this._hPM=new Map,this._pHM=new Map}};function wN(t){if(t._iC.size!==0){var e=t._iC.values(),n=e.next().value;n._manRes(),setTimeout(function(){return Hy(t)},0)}}function hm(t,e){if(e){if(e._timeoutObj&&clearTimeout(e._timeoutObj),t._pHM.has(e)){var n=t._pHM.get(e);t._hPM.delete(n),t._pHM.delete(e)}t._iC.delete(e)}}function Hy(t){t._tryIR||t._iC.size===0||(t._tryIR=!0,setTimeout(function(){if(!t.isIdle()){t._tryIR=!1;return}setTimeout(function(){if(!t.isIdle()){t._tryIR=!1;return}wN(t),t._tryIR=!1},0)},0))}class Wg{constructor(e){jc(this,"ttl");jc(this,"map",new Map);jc(this,"_to",!1);this.ttl=e}has(e){return this.map.has(e)}add(e){this.map.set(e,bO()),this._to||(this._to=!0,setTimeout(()=>{this._to=!1,_N(this)},0))}clear(){this.map.clear()}}function _N(t){const e=bO()-t.ttl,n=t.map[Symbol.iterator]();for(;;){const r=n.next().value;if(!r)return;const i=r[0];if(r[1]<e)t.map.delete(i);else return}}function bO(){return Date.now()}var Sd=new Set,qg=function(){function t(n,r,i,s,o,a,l=!1,f={},h,p,y,w,I){this.idleQueue=new _O,this.rxdbVersion=wg,this.storageInstances=new Set,this._subs=[],this.startupErrors=[],this.onDestroy=[],this.destroyed=!1,this.collections={},this.eventBulks$=new Kt,this.observable$=this.eventBulks$.pipe(Lr(E=>E.events)),this.storageToken=Xn,this.storageTokenDocument=Xn,this.emittedEventBulkIds=new Wg(60*1e3),this.name=n,this.token=r,this.storage=i,this.instanceCreationOptions=s,this.password=o,this.multiInstance=a,this.eventReduce=l,this.options=f,this.internalStore=h,this.hashFunction=p,this.cleanupPolicy=y,this.allowSlowCount=w,this.reactivity=I,this.name!=="pseudoInstance"&&(this.internalStore=Ug(this.asRxDatabase,h,Vg),this.storageTokenDocument=eN(this.asRxDatabase).catch(E=>this.startupErrors.push(E)),this.storageToken=this.storageTokenDocument.then(E=>E.data.token).catch(E=>this.startupErrors.push(E)))}var e=t.prototype;return e.getReactivityFactory=function(){if(!this.reactivity)throw le("DB14",{database:this.name});return this.reactivity},e.$emit=function(r){this.emittedEventBulkIds.has(r.id)||(this.emittedEventBulkIds.add(r.id),this.eventBulks$.next(r))},e.removeCollectionDoc=async function(r,i){var s=await Xl(this.internalStore,Ha(zy(r,i),xo));if(!s)throw le("SNH",{name:r,schema:i});var o=jg(s);o._deleted=!0,await this.internalStore.bulkWrite([{document:o,previous:s}],"rx-database-remove-collection")},e.addCollections=async function(r){var i={},s={},o=[],a={};await Promise.all(Object.entries(r).map(async([h,p])=>{var y=h,w=p.schema;i[y]=w;var I=mR(w,this.hashFunction);if(s[y]=I,this.collections[h])throw le("DB3",{name:h});var E=zy(h,w),$={id:Ha(E,xo),key:E,context:xo,data:{name:y,schemaHash:await I.hash,schema:I.jsonSchema,version:I.version,connectedStorages:[]},_deleted:!1,_meta:Ws(),_rev:Nn(),_attachments:{}};o.push({document:$});var S=Object.assign({},p,{name:y,schema:I,database:this}),_=$e(p);_.database=this,_.name=h,Fr("preCreateRxCollection",_),S.conflictHandler=_.conflictHandler,a[y]=S}));var l=await this.internalStore.bulkWrite(o,"rx-database-add-collection");await EN(this),await Promise.all(l.error.map(async h=>{if(h.status!==409)throw le("DB12",{database:this.name,writeError:h});var p=ye(h.documentInDb),y=p.data.name,w=s[y];if(p.data.schemaHash!==await w.hash)throw le("DB6",{database:this.name,collection:y,previousSchemaHash:p.data.schemaHash,schemaHash:await w.hash,previousSchema:p.data.schema,schema:ye(i[y])})}));var f={};return await Promise.all(Object.keys(r).map(async h=>{var p=a[h],y=await gN(p);f[h]=y,this.collections[h]=y,this[h]||Object.defineProperty(this,h,{get:()=>this.collections[h]})})),f},e.lockedRun=function(r){return this.idleQueue.wrapCall(r)},e.requestIdlePromise=function(){return this.idleQueue.requestIdlePromise()},e.exportJSON=function(r){throw pt("json-dump")},e.importJSON=function(r){throw pt("json-dump")},e.backup=function(r){throw pt("backup")},e.leaderElector=function(){throw pt("leader-election")},e.isLeader=function(){throw pt("leader-election")},e.waitForLeadership=function(){throw pt("leader-election")},e.migrationStates=function(){throw pt("migration-schema")},e.destroy=async function(){return this.destroyed||(this.destroyed=!0,await Fo("preDestroyRxDatabase",this),this.eventBulks$.complete(),this._subs.map(r=>r.unsubscribe()),this.name==="pseudoInstance")?Xn:this.requestIdlePromise().then(()=>Promise.all(this.onDestroy.map(r=>r()))).then(()=>Promise.all(Object.keys(this.collections).map(r=>this.collections[r]).map(r=>r.destroy()))).then(()=>this.internalStore.close()).then(()=>Sd.delete(this.storage.name+"|"+this.name)).then(()=>!0)},e.remove=function(){return this.destroy().then(()=>IO(this.name,this.storage,this.password))},Ks(t,[{key:"$",get:function(){return this.observable$}},{key:"asRxDatabase",get:function(){return this}}]),t}();function bN(t,e){var n=e.name+"|"+t;if(Sd.has(n))throw le("DB8",{name:t,storage:e.name,link:"https://rxdb.info/rx-database.html#ignoreduplicate"})}async function SO(t,e,n,r,i,s){var o=await e.createStorageInstance({databaseInstanceToken:t,databaseName:n,collectionName:W2,schema:Vg,options:r,multiInstance:i,password:s,devMode:it.isDevMode()});return o}function SN({storage:t,instanceCreationOptions:e,name:n,password:r,multiInstance:i=!0,eventReduce:s=!0,ignoreDuplicate:o=!1,options:a={},cleanupPolicy:l,allowSlowCount:f=!1,localDocuments:h=!1,hashFunction:p=HP,reactivity:y}){Fr("preCreateRxDatabase",{storage:t,instanceCreationOptions:e,name:n,password:r,multiInstance:i,eventReduce:s,ignoreDuplicate:o,options:a,localDocuments:h}),o||bN(n,t),Sd.add(t.name+"|"+n);var w=iu(10);return SO(w,t,n,e,i,r).catch(I=>{throw Sd.delete(t.name+"|"+n),I}).then(I=>{var E=new qg(n,w,t,e,r,i,s,a,I,p,l,f,y);return Fo("createRxDatabase",{database:E,creator:{storage:t,instanceCreationOptions:e,name:n,password:r,multiInstance:i,eventReduce:s,ignoreDuplicate:o,options:a,localDocuments:h}}).then(()=>E)})}async function IO(t,e,n){var r=iu(10),i=await SO(r,e,t,{},!1,n),s=await Kg(i),o=new Set;s.forEach(l=>o.add(l.data.name));var a=Array.from(o);return await Promise.all(a.map(l=>hO(e,i,r,t,l,n))),await Fo("postRemoveRxDatabase",{databaseName:t,storage:e}),await i.remove(),a}function IN(t){return t instanceof qg}async function EO(t){var e=await t.storageTokenDocument;return e.data.instanceToken===t.token}async function EN(t){if(await t.storageToken,t.startupErrors[0])throw t.startupErrors[0]}var ON={RxSchema:uE.prototype,RxDocument:kh,RxQuery:tO.prototype,RxCollection:wO.prototype,RxDatabase:qg.prototype},pm=new Set,lb=new Set;function gi(t){if(Fr("preAddRxPlugin",{plugin:t,plugins:pm}),!pm.has(t)){{if(lb.has(t.name))throw le("PL3",{name:t.name,plugin:t});pm.add(t),lb.add(t.name)}if(!t.rxdb)throw el("PL1",{plugin:t});t.init&&t.init(),t.prototypes&&Object.entries(t.prototypes).forEach(([e,n])=>n(ON[e])),t.overwritable&&Object.assign(it,t.overwritable),t.hooks&&Object.entries(t.hooks).forEach(([e,n])=>{n.after&&xl[e].push(n.after),n.before&&xl[e].unshift(n.before)})}}function kN(t){return t&&typeof t.then=="function"}Promise.resolve(!1);var DN=Promise.resolve(!0),Mi=Promise.resolve();function vo(t,e){return t||(t=0),new Promise(function(n){return setTimeout(function(){return n(e)},t)})}function xN(t,e){return Math.floor(Math.random()*(e-t+1)+t)}function Zl(){return Math.random().toString(36).substring(2)}var mm=0;function ec(){var t=Date.now()*1e3;return t<=mm&&(t=mm+1),mm=t,t}function CN(){return typeof navigator<"u"&&typeof navigator.locks<"u"&&typeof navigator.locks.request=="function"}var AN=ec,PN="native";function RN(t){var e={time:ec(),messagesCallback:null,bc:new BroadcastChannel(t),subFns:[]};return e.bc.onmessage=function(n){e.messagesCallback&&e.messagesCallback(n.data)},e}function TN(t){t.bc.close(),t.subFns=[]}function MN(t,e){try{return t.bc.postMessage(e,!1),Mi}catch(n){return Promise.reject(n)}}function NN(t,e){t.messagesCallback=e}function BN(){if(typeof globalThis<"u"&&globalThis.Deno&&globalThis.Deno.args)return!0;if((typeof window<"u"||typeof self<"u")&&typeof BroadcastChannel=="function"){if(BroadcastChannel._pubkey)throw new Error("BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill");return!0}else return!1}function FN(){return 150}var LN={create:RN,close:TN,onMessage:NN,postMessage:MN,canBeUsed:BN,type:PN,averageResponseTime:FN,microSeconds:AN};function Hg(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=JSON.parse(JSON.stringify(t));return typeof e.webWorkerSupport>"u"&&(e.webWorkerSupport=!0),e.idb||(e.idb={}),e.idb.ttl||(e.idb.ttl=1e3*45),e.idb.fallbackInterval||(e.idb.fallbackInterval=150),t.idb&&typeof t.idb.onclose=="function"&&(e.idb.onclose=t.idb.onclose),e.localstorage||(e.localstorage={}),e.localstorage.removeTimeout||(e.localstorage.removeTimeout=1e3*60),t.methods&&(e.methods=t.methods),e.node||(e.node={}),e.node.ttl||(e.node.ttl=1e3*60*2),e.node.maxParallelWrites||(e.node.maxParallelWrites=2048),typeof e.node.useFastPath>"u"&&(e.node.useFastPath=!0),e}var $N=ec,jN="pubkey.broadcast-channel-0-",qi="messages",Dh={durability:"relaxed"},UN="idb";function OO(){if(typeof indexedDB<"u")return indexedDB;if(typeof window<"u"){if(typeof window.mozIndexedDB<"u")return window.mozIndexedDB;if(typeof window.webkitIndexedDB<"u")return window.webkitIndexedDB;if(typeof window.msIndexedDB<"u")return window.msIndexedDB}return!1}function Qg(t){t.commit&&t.commit()}function zN(t){var e=OO(),n=jN+t,r=e.open(n);return r.onupgradeneeded=function(i){var s=i.target.result;s.createObjectStore(qi,{keyPath:"id",autoIncrement:!0})},new Promise(function(i,s){r.onerror=function(o){return s(o)},r.onsuccess=function(){i(r.result)}})}function VN(t,e,n){var r=Date.now(),i={uuid:e,time:r,data:n},s=t.transaction([qi],"readwrite",Dh);return new Promise(function(o,a){s.oncomplete=function(){return o()},s.onerror=function(f){return a(f)};var l=s.objectStore(qi);l.add(i),Qg(s)})}function KN(t,e){var n=t.transaction(qi,"readonly",Dh),r=n.objectStore(qi),i=[],s=IDBKeyRange.bound(e+1,1/0);if(r.getAll){var o=r.getAll(s);return new Promise(function(l,f){o.onerror=function(h){return f(h)},o.onsuccess=function(h){l(h.target.result)}})}function a(){try{return s=IDBKeyRange.bound(e+1,1/0),r.openCursor(s)}catch{return r.openCursor()}}return new Promise(function(l,f){var h=a();h.onerror=function(p){return f(p)},h.onsuccess=function(p){var y=p.target.result;y?y.value.id<e+1?y.continue(e+1):(i.push(y.value),y.continue()):(Qg(n),l(i))}})}function WN(t,e){if(t.closed)return Promise.resolve([]);var n=t.db.transaction(qi,"readwrite",Dh),r=n.objectStore(qi);return Promise.all(e.map(function(i){var s=r.delete(i);return new Promise(function(o){s.onsuccess=function(){return o()}})}))}function qN(t,e){var n=Date.now()-e,r=t.transaction(qi,"readonly",Dh),i=r.objectStore(qi),s=[];return new Promise(function(o){i.openCursor().onsuccess=function(a){var l=a.target.result;if(l){var f=l.value;f.time<n?(s.push(f),l.continue()):(Qg(r),o(s))}else o(s)}})}function HN(t){return qN(t.db,t.options.idb.ttl).then(function(e){return WN(t,e.map(function(n){return n.id}))})}function QN(t,e){return e=Hg(e),zN(t).then(function(n){var r={closed:!1,lastCursorId:0,channelName:t,options:e,uuid:Zl(),eMIs:new Wg(e.idb.ttl*2),writeBlockPromise:Mi,messagesCallback:null,readQueuePromises:[],db:n};return n.onclose=function(){r.closed=!0,e.idb.onclose&&e.idb.onclose()},kO(r),r})}function kO(t){t.closed||DO(t).then(function(){return vo(t.options.idb.fallbackInterval)}).then(function(){return kO(t)})}function YN(t,e){return!(t.uuid===e.uuid||e.eMIs.has(t.id)||t.data.time<e.messagesCallbackTime)}function DO(t){return t.closed||!t.messagesCallback?Mi:KN(t.db,t.lastCursorId).then(function(e){var n=e.filter(function(r){return!!r}).map(function(r){return r.id>t.lastCursorId&&(t.lastCursorId=r.id),r}).filter(function(r){return YN(r,t)}).sort(function(r,i){return r.time-i.time});return n.forEach(function(r){t.messagesCallback&&(t.eMIs.add(r.id),t.messagesCallback(r.data))}),Mi})}function GN(t){t.closed=!0,t.db.close()}function JN(t,e){return t.writeBlockPromise=t.writeBlockPromise.then(function(){return VN(t.db,t.uuid,e)}).then(function(){xN(0,10)===0&&HN(t)}),t.writeBlockPromise}function XN(t,e,n){t.messagesCallbackTime=n,t.messagesCallback=e,DO(t)}function ZN(){return!!OO()}function eB(t){return t.idb.fallbackInterval*2}var tB={create:QN,close:GN,onMessage:XN,postMessage:JN,canBeUsed:ZN,type:UN,averageResponseTime:eB,microSeconds:$N},nB=ec,rB="pubkey.broadcastChannel-",iB="localstorage";function xO(){var t;if(typeof window>"u")return null;try{t=window.localStorage,t=window["ie8-eventlistener/storage"]||window.localStorage}catch{}return t}function CO(t){return rB+t}function sB(t,e){return new Promise(function(n){vo().then(function(){var r=CO(t.channelName),i={token:Zl(),time:Date.now(),data:e,uuid:t.uuid},s=JSON.stringify(i);xO().setItem(r,s);var o=document.createEvent("Event");o.initEvent("storage",!0,!0),o.key=r,o.newValue=s,window.dispatchEvent(o),n()})})}function oB(t,e){var n=CO(t),r=function(s){s.key===n&&e(JSON.parse(s.newValue))};return window.addEventListener("storage",r),r}function aB(t){window.removeEventListener("storage",t)}function uB(t,e){if(e=Hg(e),!AO())throw new Error("BroadcastChannel: localstorage cannot be used");var n=Zl(),r=new Wg(e.localstorage.removeTimeout),i={channelName:t,uuid:n,eMIs:r};return i.listener=oB(t,function(s){i.messagesCallback&&s.uuid!==n&&(!s.token||r.has(s.token)||s.data.time&&s.data.time<i.messagesCallbackTime||(r.add(s.token),i.messagesCallback(s.data)))}),i}function lB(t){aB(t.listener)}function cB(t,e,n){t.messagesCallbackTime=n,t.messagesCallback=e}function AO(){var t=xO();if(!t)return!1;try{var e="__broadcastchannel_check";t.setItem(e,"works"),t.removeItem(e)}catch{return!1}return!0}function fB(){var t=120,e=navigator.userAgent.toLowerCase();return e.includes("safari")&&!e.includes("chrome")?t*2:t}var dB={create:uB,close:lB,onMessage:cB,postMessage:sB,canBeUsed:AO,type:iB,averageResponseTime:fB,microSeconds:nB},PO=ec,hB="simulate",Yg=new Set;function pB(t){var e={time:PO(),name:t,messagesCallback:null};return Yg.add(e),e}function mB(t){Yg.delete(t)}var RO=5;function yB(t,e){return new Promise(function(n){return setTimeout(function(){var r=Array.from(Yg);r.forEach(function(i){i.name===t.name&&i!==t&&i.messagesCallback&&i.time<e.time&&i.messagesCallback(e)}),n()},RO)})}function vB(t,e){t.messagesCallback=e}function gB(){return!0}function wB(){return RO}var _B={create:pB,close:mB,onMessage:vB,postMessage:yB,canBeUsed:gB,type:hB,averageResponseTime:wB,microSeconds:PO},cb=[LN,tB,dB];function bB(t){var e=[].concat(t.methods,cb).filter(Boolean);if(t.type){if(t.type==="simulate")return _B;var n=e.find(function(i){return i.type===t.type});if(n)return n;throw new Error("method-type "+t.type+" not found")}t.webWorkerSupport||(e=e.filter(function(i){return i.type!=="idb"}));var r=e.find(function(i){return i.canBeUsed()});if(r)return r;throw new Error("No usable method found in "+JSON.stringify(cb.map(function(i){return i.type})))}var TO=new Set,SB=0,xh=function(e,n){this.id=SB++,TO.add(this),this.name=e,fb&&(n=fb),this.options=Hg(n),this.method=bB(this.options),this._iL=!1,this._onML=null,this._addEL={message:[],internal:[]},this._uMP=new Set,this._befC=[],this._prepP=null,IB(this)};xh._pubkey=!0;var fb;xh.prototype={postMessage:function(e){if(this.closed)throw new Error("BroadcastChannel.postMessage(): Cannot post message after channel has closed "+JSON.stringify(e));return db(this,"message",e)},postInternal:function(e){return db(this,"internal",e)},set onmessage(t){var e=this.method.microSeconds(),n={time:e,fn:t};pb(this,"message",this._onML),t&&typeof t=="function"?(this._onML=n,hb(this,"message",n)):this._onML=null},addEventListener:function(e,n){var r=this.method.microSeconds(),i={time:r,fn:n};hb(this,e,i)},removeEventListener:function(e,n){var r=this._addEL[e].find(function(i){return i.fn===n});pb(this,e,r)},close:function(){var e=this;if(!this.closed){TO.delete(this),this.closed=!0;var n=this._prepP?this._prepP:Mi;return this._onML=null,this._addEL.message=[],n.then(function(){return Promise.all(Array.from(e._uMP))}).then(function(){return Promise.all(e._befC.map(function(r){return r()}))}).then(function(){return e.method.close(e._state)})}},get type(){return this.method.type},get isClosed(){return this.closed}};function db(t,e,n){var r=t.method.microSeconds(),i={time:r,type:e,data:n},s=t._prepP?t._prepP:Mi;return s.then(function(){var o=t.method.postMessage(t._state,i);return t._uMP.add(o),o.catch().then(function(){return t._uMP.delete(o)}),o})}function IB(t){var e=t.method.create(t.name,t.options);kN(e)?(t._prepP=e,e.then(function(n){t._state=n})):t._state=e}function MO(t){return t._addEL.message.length>0||t._addEL.internal.length>0}function hb(t,e,n){t._addEL[e].push(n),EB(t)}function pb(t,e,n){t._addEL[e]=t._addEL[e].filter(function(r){return r!==n}),OB(t)}function EB(t){if(!t._iL&&MO(t)){var e=function(i){t._addEL[i.type].forEach(function(s){i.time>=s.time&&s.fn(i.data)})},n=t.method.microSeconds();t._prepP?t._prepP.then(function(){t._iL=!0,t.method.onMessage(t._state,e,n)}):(t._iL=!0,t.method.onMessage(t._state,e,n))}}function OB(t){if(t._iL&&!MO(t)){t._iL=!1;var e=t.method.microSeconds();t.method.onMessage(t._state,null,e)}}function kB(t){if(typeof WorkerGlobalScope=="function"&&self instanceof WorkerGlobalScope){var e=self.close.bind(self);self.close=function(){return t(),e()}}else{if(typeof window.addEventListener!="function")return;window.addEventListener("beforeunload",function(){t()},!0),window.addEventListener("unload",function(){t()},!0)}}function DB(t){process.on("exit",function(){return t()}),process.on("beforeExit",function(){return t().then(function(){return process.exit()})}),process.on("SIGINT",function(){return t().then(function(){return process.exit()})}),process.on("uncaughtException",function(e){return t().then(function(){console.trace(e),process.exit(101)})})}var xB=Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]",CB=xB?DB:kB,nl=new Set,mb=!1;function AB(){mb||(mb=!0,CB(RB))}function PB(t){if(AB(),typeof t!="function")throw new Error("Listener is no function");nl.add(t);var e={remove:function(){return nl.delete(t)},run:function(){return nl.delete(t),t()}};return e}function RB(){var t=[];return nl.forEach(function(e){t.push(e()),nl.delete(e)}),Promise.all(t)}function Co(t,e){var n={context:"leader",action:e,token:t.token};return t.broadcastChannel.postInternal(n)}function NO(t){t.isLeader=!0,t._hasLeader=!0;var e=PB(function(){return t.die()});t._unl.push(e);var n=function(i){i.context==="leader"&&i.action==="apply"&&Co(t,"tell"),i.context==="leader"&&i.action==="tell"&&!t._dpLC&&(t._dpLC=!0,t._dpL(),Co(t,"tell"))};return t.broadcastChannel.addEventListener("internal",n),t._lstns.push(n),Co(t,"tell")}var BO=function(e,n){var r=this;this.broadcastChannel=e,e._befC.push(function(){return r.die()}),this._options=n,this.isLeader=!1,this.isDead=!1,this.token=Zl(),this._lstns=[],this._unl=[],this._dpL=function(){},this._dpLC=!1,this._wKMC={},this.lN="pubkey-bc||"+e.method.type+"||"+e.name};BO.prototype={hasLeader:function(){var e=this;return navigator.locks.query().then(function(n){var r=n.held?n.held.filter(function(i){return i.name===e.lN}):[];return!!(r&&r.length>0)})},awaitLeadership:function(){var e=this;if(!this._wLMP){this._wKMC.c=new AbortController;var n=new Promise(function(r,i){e._wKMC.res=r,e._wKMC.rej=i});this._wLMP=new Promise(function(r){navigator.locks.request(e.lN,{signal:e._wKMC.c.signal},function(){return e._wKMC.c=void 0,NO(e),r(),n}).catch(function(){})})}return this._wLMP},set onduplicate(t){},die:function(){var e=this;return this._lstns.forEach(function(n){return e.broadcastChannel.removeEventListener("internal",n)}),this._lstns=[],this._unl.forEach(function(n){return n.remove()}),this._unl=[],this.isLeader&&(this.isLeader=!1),this.isDead=!0,this._wKMC.res&&this._wKMC.res(),this._wKMC.c&&this._wKMC.c.abort("LeaderElectionWebLock.die() called"),Co(this,"death")}};var FO=function(e,n){var r=this;this.broadcastChannel=e,this._options=n,this.isLeader=!1,this._hasLeader=!1,this.isDead=!1,this.token=Zl(),this._aplQ=Mi,this._aplQC=0,this._unl=[],this._lstns=[],this._dpL=function(){},this._dpLC=!1;var i=function(o){o.context==="leader"&&(o.action==="death"&&(r._hasLeader=!1),o.action==="tell"&&(r._hasLeader=!0))};this.broadcastChannel.addEventListener("internal",i),this._lstns.push(i)};FO.prototype={hasLeader:function(){return Promise.resolve(this._hasLeader)},applyOnce:function(e){var n=this;if(this.isLeader)return vo(0,!0);if(this.isDead)return vo(0,!1);if(this._aplQC>1)return this._aplQ;var r=function(){if(n.isLeader)return DN;var s=!1,o,a=new Promise(function(h){o=function(){s=!0,h()}}),l=function(p){p.context==="leader"&&p.token!=n.token&&(p.action==="apply"&&p.token>n.token&&o(),p.action==="tell"&&(o(),n._hasLeader=!0))};n.broadcastChannel.addEventListener("internal",l);var f=e?n._options.responseTime*4:n._options.responseTime;return Co(n,"apply").then(function(){return Promise.race([vo(f),a.then(function(){return Promise.reject(new Error)})])}).then(function(){return Co(n,"apply")}).then(function(){return Promise.race([vo(f),a.then(function(){return Promise.reject(new Error)})])}).catch(function(){}).then(function(){return n.broadcastChannel.removeEventListener("internal",l),s?!1:NO(n).then(function(){return!0})})};return this._aplQC=this._aplQC+1,this._aplQ=this._aplQ.then(function(){return r()}).then(function(){n._aplQC=n._aplQC-1}),this._aplQ.then(function(){return n.isLeader})},awaitLeadership:function(){return this._aLP||(this._aLP=TB(this)),this._aLP},set onduplicate(t){this._dpL=t},die:function(){var e=this;return this._lstns.forEach(function(n){return e.broadcastChannel.removeEventListener("internal",n)}),this._lstns=[],this._unl.forEach(function(n){return n.remove()}),this._unl=[],this.isLeader&&(this._hasLeader=!1,this.isLeader=!1),this.isDead=!0,Co(this,"death")}};function TB(t){return t.isLeader?Mi:new Promise(function(e){var n=!1;function r(){n||(n=!0,t.broadcastChannel.removeEventListener("internal",s),e(!0))}t.applyOnce().then(function(){t.isLeader&&r()});var i=function o(){return vo(t._options.fallbackInterval).then(function(){if(!(t.isDead||n))if(t.isLeader)r();else return t.applyOnce(!0).then(function(){t.isLeader?r():o()})})};i();var s=function(a){a.context==="leader"&&a.action==="death"&&(t._hasLeader=!1,t.applyOnce().then(function(){t.isLeader&&r()}))};t.broadcastChannel.addEventListener("internal",s),t._lstns.push(s)})}function MB(t,e){return t||(t={}),t=JSON.parse(JSON.stringify(t)),t.fallbackInterval||(t.fallbackInterval=3e3),t.responseTime||(t.responseTime=e.method.averageResponseTime(e.options)),t}function NB(t,e){if(t._leaderElector)throw new Error("BroadcastChannel already has a leader-elector");e=MB(e,t);var n=CN()?new BO(t,e):new FO(t,e);return t._befC.push(function(){return n.die()}),t._leaderElector=n,n}var Id=new Map;function BB(t,e,n,r){var i=Id.get(e);return i||(i={bc:new xh(["RxDB:",t,n].join("|")),refs:new Set},Id.set(e,i)),i.refs.add(r),i.bc}function yb(t,e){var n=Id.get(t);if(n&&(n.refs.delete(e),n.refs.size===0))return Id.delete(t),n.bc.close()}function FB(t,e,n,r){if(e.multiInstance){var i=r||BB(t,e.databaseInstanceToken,n.databaseName,n),s=new Kt,o=y=>{y.storageName===t&&y.databaseName===e.databaseName&&y.collectionName===e.collectionName&&y.version===e.schema.version&&s.next(y.eventBulk)};i.addEventListener("message",o);var a=n.changeStream(),l=!1,f=a.subscribe(y=>{l||i.postMessage({storageName:t,databaseName:e.databaseName,collectionName:e.collectionName,version:e.schema.version,eventBulk:y})});n.changeStream=function(){return s.asObservable().pipe(aT(a))};var h=n.close.bind(n);n.close=async function(){return l=!0,f.unsubscribe(),i.removeEventListener("message",o),r||await yb(e.databaseInstanceToken,n),h()};var p=n.remove.bind(n);n.remove=async function(){return l=!0,f.unsubscribe(),i.removeEventListener("message",o),r||await yb(e.databaseInstanceToken,n),p()}}}function LB(t,e){var n=e.map(r=>{var i=zi(t,r);if(!i)throw new Error("not in schema: "+r);var s=i.type,o;(s==="number"||s==="integer")&&(o=Gg(i));var a=XI(r),l=i.maxLength?i.maxLength:0,f;s==="string"?f=p=>{var y=a(p);return y||(y=""),y.padEnd(l," ")}:s==="boolean"?f=p=>{var y=a(p);return y?"1":"0"}:f=p=>{var y=a(p);return Ed(o,y)};var h={fieldName:r,schemaPart:i,parsedLengths:o,getValue:a,getIndexStringPart:f};return h});return n}function $B(t,e){var n=LB(t,e),r=n.length,i=n.map(o=>o.getIndexStringPart),s=function(o){for(var a="",l=0;l<r;++l)a+=i[l](o);return a};return s}function Gg(t){var e=Math.floor(t.minimum),n=Math.ceil(t.maximum),r=t.multipleOf,i=n-e,s=i.toString().length,o=r.toString().split("."),a=0;return o.length>1&&(a=o[1].length),{minimum:e,maximum:n,nonDecimals:s,decimals:a,roundedMinimum:e}}function Ed(t,e){typeof e>"u"&&(e=0),e<t.minimum&&(e=t.minimum),e>t.maximum&&(e=t.maximum);var n=(Math.floor(e)-t.roundedMinimum).toString(),r=n.padStart(t.nonDecimals,"0");if(t.decimals>0){var i=e.toString().split("."),s=i.length>1?i[1]:"0";r+=s.padEnd(t.decimals,"0")}return r}function vb(t,e,n){var r="";return e.forEach((i,s)=>{var o=zi(t,i),a=n[s],l=o.type;switch(l){case"string":var f=ye(o.maxLength,"maxLength not set");typeof a=="string"?r+=a.padEnd(f," "):r+="".padEnd(f," ");break;case"boolean":if(a===null)r+="0";else if(a===ci)r+="0";else if(a===Tr)r+="1";else{var h=a?"1":"0";r+=h}break;case"number":case"integer":var p=Gg(o);if(a===null||a===ci){var y="0";r+=y.repeat(p.nonDecimals+p.decimals)}else if(a===Tr)r+=Ed(p,p.maximum);else{var w=Ed(p,a);r+=w}break;default:throw new Error("unknown index type "+l)}}),r}function jB(t,e,n){var r="";return e.forEach((i,s)=>{var o=zi(t,i),a=n[s],l=o.type;switch(l){case"string":var f=ye(o.maxLength,"maxLength not set");typeof a=="string"&&a!==Tr?r+=a.padEnd(f," "):a===ci?r+="".padEnd(f," "):r+="".padEnd(f,Tr);break;case"boolean":if(a===null)r+="1";else{var h=a?"1":"0";r+=h}break;case"number":case"integer":var p=Gg(o);if(a===null||a===Tr){var y="9";r+=y.repeat(p.nonDecimals+p.decimals)}else if(a===ci){var w="0";r+=w.repeat(p.nonDecimals+p.decimals)}else r+=Ed(p,a);break;default:throw new Error("unknown index type "+l)}}),r}var gb=t=>Promise.resolve(t);function wb(t,e){if(t==="_deleted")return e;e=$e(e);var n=!!e._deleted;return e[t]=n,delete e._deleted,e}function ym(t,e,n){return n.map(r=>{var i=$e(r);if(e!=="_deleted"){var s=!!i[e];i._deleted=s,delete i[e]}else i._deleted=!!i._deleted;var o=t.schema.primaryPath;return i[o]=qs(t.schema.jsonSchema,i),i})}function _b(t,e){if(typeof window>"u"||typeof window!="object"||typeof window.addEventListener>"u"||navigator.onLine)return t.promiseWait(e);var n,r=new Promise(i=>{n=()=>{window.removeEventListener("online",n),i()},window.addEventListener("online",n)});return Promise.race([r,t.promiseWait(e)]).then(()=>{window.removeEventListener("online",n)})}var LO=new WeakMap,UB=function(){function t(n,r,i,s,o,a,l,f){this.subs=[],this.subjects={received:new Kt,sent:new Kt,error:new Kt,canceled:new Cr(!1),active:new Cr(!1)},this.received$=this.subjects.received.asObservable(),this.sent$=this.subjects.sent.asObservable(),this.error$=this.subjects.error.asObservable(),this.canceled$=this.subjects.canceled.asObservable(),this.active$=this.subjects.active.asObservable(),this.onCancel=[],this.callOnStart=void 0,this.remoteEvents$=new Kt,this.replicationIdentifier=n,this.collection=r,this.deletedField=i,this.pull=s,this.push=o,this.live=a,this.retryTime=l,this.autoStart=f;var h=Br(LO,r,()=>[]);h.push(this),this.collection.onDestroy.push(()=>this.cancel()),Object.keys(this.subjects).forEach(y=>{Object.defineProperty(this,y+"$",{get:function(){return this.subjects[y].asObservable()}})});var p=new Promise(y=>{this.callOnStart=y});this.startPromise=p}var e=t.prototype;return e.start=async function(){if(!this.isStopped()){var r=this.pull&&this.pull.modifier?this.pull.modifier:gb,i=this.push&&this.push.modifier?this.push.modifier:gb,s=this.collection.database,o="rx-replication-meta-"+await s.hashFunction([this.collection.name,this.replicationIdentifier].join("-")),a=Wy(this.collection.schema.jsonSchema,vd(this.collection.schema.jsonSchema)),[l]=await Promise.all([this.collection.database.storage.createStorageInstance({databaseName:s.name,collectionName:o,databaseInstanceToken:s.token,multiInstance:s.multiInstance,options:{},schema:a,password:s.password,devMode:it.isDevMode()}),dO(this.collection,o,a)]);this.metaInstance=l,this.internalReplicationState=mO({pushBatchSize:this.push&&this.push.batchSize?this.push.batchSize:100,pullBatchSize:this.pull&&this.pull.batchSize?this.pull.batchSize:100,initialCheckpoint:{upstream:this.push?this.push.initialCheckpoint:void 0,downstream:this.pull?this.pull.initialCheckpoint:void 0},forkInstance:this.collection.storageInstance,metaInstance:this.metaInstance,hashFunction:s.hashFunction,identifier:"rxdbreplication"+this.replicationIdentifier,conflictHandler:this.collection.conflictHandler,replicationHandler:{masterChangeStream$:this.remoteEvents$.asObservable().pipe(lt(f=>!!this.pull),Lr(async f=>{if(f==="RESYNC")return f;var h=$e(f);return h.documents=ym(this.collection,this.deletedField,h.documents),h.documents=await Promise.all(h.documents.map(p=>r(p))),h})),masterChangesSince:async(f,h)=>{if(!this.pull)return{checkpoint:null,documents:[]};for(var p=!1,y={};!p&&!this.isStopped();)try{y=await this.pull.handler(f,h),p=!0}catch(E){var w=le("RC_PULL",{checkpoint:f,errors:ja(E).map($=>ky($)),direction:"pull"});this.subjects.error.next(w),await _b(this.collection,ye(this.retryTime))}if(this.isStopped())return{checkpoint:null,documents:[]};var I=$e(y);return I.documents=ym(this.collection,this.deletedField,I.documents),I.documents=await Promise.all(I.documents.map(E=>r(E))),I},masterWrite:async f=>{if(!this.push)return[];var h=!1;await Fo("preReplicationMasterWrite",{rows:f,collection:this.collection});var p=await Promise.all(f.map(async $=>($.newDocumentState=await i($.newDocumentState),$.newDocumentState===null?null:($.assumedMasterState&&($.assumedMasterState=await i($.assumedMasterState)),this.deletedField!=="_deleted"&&($.newDocumentState=wb(this.deletedField,$.newDocumentState),$.assumedMasterState&&($.assumedMasterState=wb(this.deletedField,$.assumedMasterState))),$)))),y=p.filter(JI),w=null;for(y.length===0&&(h=!0,w=[]);!h&&!this.isStopped();)try{if(w=await this.push.handler(y),!Array.isArray(w))throw le("RC_PUSH_NO_AR",{pushRows:f,direction:"push",args:{result:w}});h=!0}catch($){var I=$.rxdb?$:le("RC_PUSH",{pushRows:f,errors:ja($).map(S=>ky(S)),direction:"push"});this.subjects.error.next(I),await _b(this.collection,ye(this.retryTime))}if(this.isStopped())return[];await Fo("preReplicationMasterWriteDocumentsHandle",{result:w,collection:this.collection});var E=ym(this.collection,this.deletedField,ye(w));return E}}}),this.subs.push(this.internalReplicationState.events.error.subscribe(f=>{this.subjects.error.next(f)}),this.internalReplicationState.events.processed.down.subscribe(f=>this.subjects.received.next(f.document)),this.internalReplicationState.events.processed.up.subscribe(f=>{this.subjects.sent.next(f.newDocumentState)}),PE([this.internalReplicationState.events.active.down,this.internalReplicationState.events.active.up]).subscribe(([f,h])=>{var p=f||h;this.subjects.active.next(p)})),this.pull&&this.pull.stream$&&this.live&&this.subs.push(this.pull.stream$.subscribe({next:f=>{this.remoteEvents$.next(f)},error:f=>{this.subjects.error.next(f)}})),this.live||(await Tf(this.internalReplicationState),await ab(this.internalReplicationState),await this.cancel()),this.callOnStart()}},e.isStopped=function(){return!!this.subjects.canceled.getValue()},e.awaitInitialReplication=async function(){return await this.startPromise,Tf(ye(this.internalReplicationState))},e.awaitInSync=async function(){await this.startPromise,await Tf(ye(this.internalReplicationState));for(var r=2;r>0;)r--,await this.collection.database.requestIdlePromise(),await ab(ye(this.internalReplicationState));return!0},e.reSync=function(){this.remoteEvents$.next("RESYNC")},e.emitEvent=function(r){this.remoteEvents$.next(r)},e.cancel=async function(){if(this.isStopped())return Xn;var r=this.onCancel.map(i=>ZI(i()));return this.internalReplicationState&&await yO(this.internalReplicationState),this.metaInstance&&r.push(ye(this.internalReplicationState).checkpointQueue.then(()=>ye(this.metaInstance).close())),this.subs.forEach(i=>i.unsubscribe()),this.subjects.canceled.next(!0),this.subjects.active.complete(),this.subjects.canceled.complete(),this.subjects.error.complete(),this.subjects.received.complete(),this.subjects.sent.complete(),Promise.all(r)},t}(),$r;(function(t){function e(U){return Array.isArray(U)?U.slice():t.isObject(U)?{...U}:U}t.clone=e;function n(U){let ee=r(U);return Array.isArray(U)&&(ee=ee.filter(ce=>ce!=="length")),ee}t.keys=n;function r(U){return U?Object.getOwnPropertyNames(U):[]}t.keysOfNonArray=r;function i(U,ee){return a(n(U),ce=>ee(U[ce],ce)),U}t.forOwn=i;function s(U,ee){return a(r(U),ce=>ee(U[ce],ce)),U}t.forOwnOfNonArray=s;function o(U,ee){return Array.isArray(U)?a(U,ee):s(U,ee),U}t.forEach=o;function a(U,ee){for(let ce=0,de=U.length;ce<de&&ee(U[ce],ce)!==!1;++ce);}t.forEachOfArray=a;function l(U,...ee){for(const ce of ee)o(ce,(de,Pe)=>{const ot=U[Pe];ot instanceof Object&&(de=l(e(ot),de)),U[Pe]=de});return U}t.merge=l;function f(U){return Array.isArray(U)||(U=r(U)),U.length===0}t.isEmpty=f,t.isFunction=U=>typeof U=="function",t.isUndefined=U=>U===void 0||U==="undefined";function h(U){return U==null||U==="undefined"||U==="null"}t.isNullOrUndefined=h,t.isObject=U=>Object.prototype.toString.call(U)==="[object Object]",t.isEmptyObject=U=>h(U)||t.isObject(U)&&f(U);function p(){return typeof globalThis.ngDevMode>"u"||!!globalThis.ngDevMode}t.isDevMode=p;function y(U){return typeof U=="number"&&!isNaN(U)}t.isValidNumber=y;function w(){}t.noop=w;function I(U){return U}t.identity=I;function E(U,ee){const ce=[];for(let de=0;de<U;++de)ce[de]=ee(de);return ce}t.times=E;function $(U,ee,ce){return t.isUndefined(ee)&&(ee=U,U=0),t.isUndefined(ce)&&(ce=ee<U?-1:1),E(Math.abs((ee-U)/(ce||1)),de=>U+ce*de)}t.range=$;function S(U){return t.isObject(U)?U._id:String(U)}t.getMaybeId=S;function _(U){return U.filter(I)}t.compact=_;function k(U){return f(U)?U:Array.isArray(U)?_(U):Object.entries(U).filter(([,ee])=>!h(ee)&&!f(ee)).reduce((ee,[ce,de])=>({...ee,[ce]:de}),{})}t.compactObject=k;function z(){var U;return(U=localStorage.debug)==null?void 0:U.includes("@ngx-odm/rxdb")}t.isDevModeForced=z;function W(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}t.isTestEnvironment=W,t.logger={log:function(){const U="#8d2089";return W()||!p()||!z()?w:console.log.bind(console,"%c[DEBUG::@ngx-odm/rxdb]",`background:${U};color:#fff;padding:2px;font-size:normal;`)}(),table:function(){return W()||!p()||!z()?w:console.table.bind(console)}()};function Q(U="Event"){return function(ce){return p()?ce.pipe(Ay({next(de){t.logger.log(`observable:${U}:next:`,de)},error(de){t.logger.log(`observable:${U}:error:`,de.message)},complete(){t.logger.log(`observable:${U}:complete`)}})):ce}}t.debug=Q;function H(U=3,ee=1e4){return ce=>ce.pipe(uT({count:U,delay:(de,Pe)=>{const ot=Math.pow(2,Pe-1)*ee;return t.logger.log("replication:kinto:longpoll:retry",Pe,ot),IE(ot)}}))}t.retryWithBackoff=H,t.tapOnce=U=>ee=>Py(()=>(U(),ee)),t.deferUntil=U=>ee=>Py(()=>U.pipe(Cl(()=>ee))),t.getDefaultQuery=()=>({selector:{_deleted:{$eq:!1}},skip:0,sort:[{id:"asc"}]});const X={properties:{id:{type:"string"},_deleted:{type:"boolean"}},primaryKey:"id",indexes:[["_deleted","id"]]};t.getDefaultQuery(),t.getDefaultPreparedQuery=()=>Jl(X,t.getDefaultQuery())})($r||($r={}));const $O=()=>typeof window=="object"&&"fetch"in window?window.fetch.bind(window):fetch;function bb(t){return t&&t instanceof UB}function Sb(t=!1){return Mt(e=>(Array.isArray(e)?e:[...e.values()]).map(n=>{const r={...n._data};return t||(delete r._rev,delete r._attachments,delete r._deleted,delete r._meta),r}))}const{debug:zB,isEmptyObject:VB,isFunction:KB}=$r;function WB(t){return!VB(t)&&KB(t.run)}function Bu(t){return WB(t)?e=>new Ot(n=>e.subscribe(r=>t.run(()=>n.next(r)),r=>t.run(()=>n.error(r)),()=>t.run(()=>n.complete()))):e=>e}function tc(){return function(t,e,n){const r=n.value;return n.value=function(...i){return Py(()=>this.initialized$.pipe(Cl(()=>r.apply(this,i)),zB(`collection.${e}`)))},n}}function kt(){return function(t,e,n){const r=n.value;return n.value=async function(...i){return await hT(this.initialized$).catch(()=>{throw new Error(`Collection "${this.config.name}" was not initialized. Please check RxDB errors.`)}),r.apply(this,i)},n}}var Ib,Eb,Ob,kb,Db,xb;const{getMaybeId:qB,logger:vm,debug:HB,noop:QB}=$r;class Je{get initialized$(){return this._init$.asObservable()}get collection(){return this._collection}get db(){return this.dbService.db}get dbOptions(){return this.dbService.dbOptions}get replicationState(){return this._replicationState}get queryParams$(){var e;return(e=this.config.options)!=null&&e.useQueryParams?this.initialized$.pipe(Cl(()=>this.collection.queryParams.$)):im({})}constructor(e,n,r={},i=im(""),s=QB){this.config=e,this.dbService=n,this.ngZone=r,this.currentUrl$=i,this.updateQueryParamsFn=s,this._replicationState=null,this._init$=new ME,this.init(e)}destroy(){var e;(e=this.collection)==null||e.destroy()}setQueryParams(e){var n;(n=this.collection.queryParams)==null||n.set(e)}patchQueryParams(e){var n;(n=this.collection.queryParams)==null||n.patch(e)}async sync(){var e;if(bb(this.replicationState)){this.replicationState.reSync();return}if(typeof((e=this.config.options)==null?void 0:e.replicationStateFactory)=="function"){try{this._replicationState=this.config.options.replicationStateFactory(this.collection)}catch(n){vm.log("replicationState has error, ignore replication"),vm.log(n.message)}if(bb(this.replicationState))return this.replicationState.autoStart||this.replicationState.reSync(),Ry(window,"online").pipe(HB("online"),NE(()=>!this.replicationState.isStopped())).subscribe(()=>{this._replicationState.reSync()}),this.replicationState.startPromise}}async info(){return this.collection.getMetadata()}async import(e){const n=await this.collection.schema.hash,r={name:this.collection.name,schemaHash:n,docs:e};this.collection.importJSON(r)}async export(){return this.collection.exportJSON()}docs(e,n=!1){return(dT(e)?e:im(e)).pipe(Cl(r=>this.collection.find(r).$),Sb(n),Bu(this.ngZone),Pi(Ai))}docsByIds(e,n=!1){return this.collection.findByIds(e).$.pipe(Sb(n),Bu(this.ngZone),Pi(Ai))}count(e){return this.collection.count(e).$.pipe(Bu(this.ngZone),Pi(Ai))}get(e,n=!1){return this.collection.findOne(e).$.pipe(Mt(r=>r?r.toMutableJSON(n):null),Bu(this.ngZone),Pi(Ai))}async insert(e){return this.collection.insert(e)}async insertBulk(e){return this.collection.bulkInsert(e)}async upsert(e){return this.collection.upsert(e)}async upsertBulk(e){return this.collection.bulkUpsert(e)}async set(e,n){return this.collection.findOne(e).update({$set:n})}async updateBulk(e,n){return this.collection.find(e).update({$set:n})}async remove(e){const n=qB(e);return this.collection.findOne(n).remove()}async removeBulk(e){return Array.isArray(e)?this.collection.bulkRemove(e):{success:[...(await this.collection.find(e).remove().catch(()=>new Map)).values()],error:[]}}async clear(){return this.collection.remove()}async getAttachments(e){const n=await this.collection.findOne(e).exec();if(!n)return null;const r=n.allAttachments().map(i=>i.getData());return Promise.all(r)}async getAttachmentById(e,n){const r=await this.collection.findOne(e).exec();if(!r)return null;const i=r.getAttachment(n);return i?i.getData():null}async putAttachment(e,n){const r=await this.collection.findOne(e).exec();r&&await r.putAttachment(n)}async removeAttachment(e,n){const r=await this.collection.findOne(e).exec();if(!r)return;const i=r.getAttachment(n);i&&await i.remove()}async addHook(e,n,r=!1){this.collection[e](n,r)}async getLocal(e,n){const r=await this.collection.getLocal(e);return r?n?r==null?void 0:r.get(n):r==null?void 0:r.toJSON().data:null}getLocal$(e,n){return this.collection.getLocal$(e).pipe(Mt(r=>r?n?r.get(n):r.toJSON().data:null),Ms(),Bu(this.ngZone))}async insertLocal(e,n){await this.collection.insertLocal(e,n)}async upsertLocal(e,n){await this.collection.upsertLocal(e,n)}async setLocal(e,n,r){var s,o;const i=await this.collection.getLocal(e);await this.collection.upsertLocal(e,{...((o=(s=i==null?void 0:i.toJSON)==null?void 0:s.call(i))==null?void 0:o.data)||{},[n]:r})}async removeLocal(e){const n=await this.collection.getLocal(e);await(n==null?void 0:n.remove())}async init(e){var i,s,o,a;const{name:n,options:r}=e;try{await this.dbService.initCollections({[n]:e}),this._collection=this.db.collections[n],r!=null&&r.useQueryParams&&this.collection.queryParamsInit(this.currentUrl$,this.updateQueryParamsFn),this._init$.next(!0),this._init$.complete()}catch(l){if(l.message.includes("DM5")||l.message.includes("DB6")&&((i=l.parameters.previousSchema)==null?void 0:i.version)===((s=l.parameters.schema)==null?void 0:s.version))vm.log("Reload the page to fix the issue. The database is in a state where it can not be used."),await IO(this.db.name,this.db.storage),(a=(o=window==null?void 0:window.location)==null?void 0:o.reload)==null||a.call(o);else throw this._init$.complete(),l}}}tt([kt(),re("design:type",Function),re("design:paramtypes",[]),re("design:returntype",Promise)],Je.prototype,"sync",null);tt([kt(),re("design:type",Function),re("design:paramtypes",[]),re("design:returntype",Promise)],Je.prototype,"info",null);tt([kt(),re("design:type",Function),re("design:paramtypes",[Array]),re("design:returntype",Promise)],Je.prototype,"import",null);tt([kt(),re("design:type",Function),re("design:paramtypes",[]),re("design:returntype",Promise)],Je.prototype,"export",null);tt([tc(),re("design:type",Function),re("design:paramtypes",[Object,Object]),re("design:returntype",Ot)],Je.prototype,"docs",null);tt([tc(),re("design:type",Function),re("design:paramtypes",[Array,Object]),re("design:returntype",Ot)],Je.prototype,"docsByIds",null);tt([tc(),re("design:type",Function),re("design:paramtypes",[Object]),re("design:returntype",Ot)],Je.prototype,"count",null);tt([tc(),re("design:type",Function),re("design:paramtypes",[String,Object]),re("design:returntype",Ot)],Je.prototype,"get",null);tt([kt(),re("design:type",Function),re("design:paramtypes",[Object]),re("design:returntype",Promise)],Je.prototype,"insert",null);tt([kt(),re("design:type",Function),re("design:paramtypes",[Array]),re("design:returntype",Promise)],Je.prototype,"insertBulk",null);tt([kt(),re("design:type",Function),re("design:paramtypes",[Object]),re("design:returntype",Promise)],Je.prototype,"upsert",null);tt([kt(),re("design:type",Function),re("design:paramtypes",[Array]),re("design:returntype",Promise)],Je.prototype,"upsertBulk",null);tt([kt(),re("design:type",Function),re("design:paramtypes",[String,Object]),re("design:returntype",Promise)],Je.prototype,"set",null);tt([kt(),re("design:type",Function),re("design:paramtypes",[Object,Object]),re("design:returntype",Promise)],Je.prototype,"updateBulk",null);tt([kt(),re("design:type",Function),re("design:paramtypes",[Object]),re("design:returntype",Promise)],Je.prototype,"remove",null);tt([kt(),re("design:type",Function),re("design:paramtypes",[Object]),re("design:returntype",Promise)],Je.prototype,"removeBulk",null);tt([kt(),re("design:type",Function),re("design:paramtypes",[]),re("design:returntype",Promise)],Je.prototype,"clear",null);tt([kt(),re("design:type",Function),re("design:paramtypes",[String]),re("design:returntype",Promise)],Je.prototype,"getAttachments",null);tt([kt(),re("design:type",Function),re("design:paramtypes",[String,String]),re("design:returntype",Promise)],Je.prototype,"getAttachmentById",null);tt([kt(),re("design:type",Function),re("design:paramtypes",[String,Object]),re("design:returntype",Promise)],Je.prototype,"putAttachment",null);tt([kt(),re("design:type",Function),re("design:paramtypes",[String,String]),re("design:returntype",Promise)],Je.prototype,"removeAttachment",null);tt([kt(),re("design:type",Function),re("design:paramtypes",[typeof(Ib=typeof Hook<"u"&&Hook)=="function"?Ib:Object,Object,Object]),re("design:returntype",Promise)],Je.prototype,"addHook",null);tt([kt(),re("design:type",Function),re("design:paramtypes",[String,typeof(Eb=typeof K<"u"&&K)=="function"?Eb:Object]),re("design:returntype",Promise)],Je.prototype,"getLocal",null);tt([tc(),re("design:type",Function),re("design:paramtypes",[String,typeof(Ob=typeof K<"u"&&K)=="function"?Ob:Object]),re("design:returntype",Ot)],Je.prototype,"getLocal$",null);tt([kt(),re("design:type",Function),re("design:paramtypes",[String,typeof(kb=typeof L<"u"&&L)=="function"?kb:Object]),re("design:returntype",Promise)],Je.prototype,"insertLocal",null);tt([kt(),re("design:type",Function),re("design:paramtypes",[String,typeof(Db=typeof L<"u"&&L)=="function"?Db:Object]),re("design:returntype",Promise)],Je.prototype,"upsertLocal",null);tt([kt(),re("design:type",Function),re("design:paramtypes",[String,typeof(xb=typeof K<"u"&&K)=="function"?xb:Object,Object]),re("design:returntype",Promise)],Je.prototype,"setLocal",null);tt([kt(),re("design:type",Function),re("design:paramtypes",[String]),re("design:returntype",Promise)],Je.prototype,"removeLocal",null);var jO={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(gw,function(){var n=function(u,c){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,m){d.__proto__=m}||function(d,m){for(var v in m)Object.prototype.hasOwnProperty.call(m,v)&&(d[v]=m[v])})(u,c)},r=function(){return(r=Object.assign||function(u){for(var c,d=1,m=arguments.length;d<m;d++)for(var v in c=arguments[d])Object.prototype.hasOwnProperty.call(c,v)&&(u[v]=c[v]);return u}).apply(this,arguments)};function i(u,c,d){if(d||arguments.length===2)for(var m,v=0,g=c.length;v<g;v++)!m&&v in c||((m=m||Array.prototype.slice.call(c,0,v))[v]=c[v]);return u.concat(m||Array.prototype.slice.call(c))}var s=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:gw,o=Object.keys,a=Array.isArray;function l(u,c){return typeof c!="object"||o(c).forEach(function(d){u[d]=c[d]}),u}typeof Promise>"u"||s.Promise||(s.Promise=Promise);var f=Object.getPrototypeOf,h={}.hasOwnProperty;function p(u,c){return h.call(u,c)}function y(u,c){typeof c=="function"&&(c=c(f(u))),(typeof Reflect>"u"?o:Reflect.ownKeys)(c).forEach(function(d){I(u,d,c[d])})}var w=Object.defineProperty;function I(u,c,d,m){w(u,c,l(d&&p(d,"get")&&typeof d.get=="function"?{get:d.get,set:d.set,configurable:!0}:{value:d,configurable:!0,writable:!0},m))}function E(u){return{from:function(c){return u.prototype=Object.create(c.prototype),I(u.prototype,"constructor",u),{extend:y.bind(null,u.prototype)}}}}var $=Object.getOwnPropertyDescriptor,S=[].slice;function _(u,c,d){return S.call(u,c,d)}function k(u,c){return c(u)}function z(u){if(!u)throw new Error("Assertion Failed")}function W(u){s.setImmediate?setImmediate(u):setTimeout(u,0)}function Q(u,c){if(typeof c=="string"&&p(u,c))return u[c];if(!c)return u;if(typeof c!="string"){for(var d=[],m=0,v=c.length;m<v;++m){var g=Q(u,c[m]);d.push(g)}return d}var b=c.indexOf(".");if(b!==-1){var O=u[c.substr(0,b)];return O==null?void 0:Q(O,c.substr(b+1))}}function H(u,c,d){if(u&&c!==void 0&&!("isFrozen"in Object&&Object.isFrozen(u)))if(typeof c!="string"&&"length"in c){z(typeof d!="string"&&"length"in d);for(var m=0,v=c.length;m<v;++m)H(u,c[m],d[m])}else{var g,b,O=c.indexOf(".");O!==-1?(g=c.substr(0,O),(b=c.substr(O+1))===""?d===void 0?a(u)&&!isNaN(parseInt(g))?u.splice(g,1):delete u[g]:u[g]=d:H(O=!(O=u[g])||!p(u,g)?u[g]={}:O,b,d)):d===void 0?a(u)&&!isNaN(parseInt(c))?u.splice(c,1):delete u[c]:u[c]=d}}function X(u){var c,d={};for(c in u)p(u,c)&&(d[c]=u[c]);return d}var U=[].concat;function ee(u){return U.apply([],u)}var Vr="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(ee([8,16,32,64].map(function(u){return["Int","Uint","Float"].map(function(c){return c+u+"Array"})}))).filter(function(u){return s[u]}),ce=new Set(Vr.map(function(u){return s[u]})),de=null;function Pe(u){return de=new WeakMap,u=function c(d){if(!d||typeof d!="object")return d;var m=de.get(d);if(m)return m;if(a(d)){m=[],de.set(d,m);for(var v=0,g=d.length;v<g;++v)m.push(c(d[v]))}else if(ce.has(d.constructor))m=d;else{var b,O=f(d);for(b in m=O===Object.prototype?{}:Object.create(O),de.set(d,m),d)p(d,b)&&(m[b]=c(d[b]))}return m}(u),de=null,u}var ot={}.toString;function ct(u){return ot.call(u).slice(8,-1)}var Te=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Dt=typeof Te=="symbol"?function(u){var c;return u!=null&&(c=u[Te])&&c.apply(u)}:function(){return null};function G(u,c){return c=u.indexOf(c),0<=c&&u.splice(c,1),0<=c}var oe={};function ue(u){var c,d,m,v;if(arguments.length===1){if(a(u))return u.slice();if(this===oe&&typeof u=="string")return[u];if(v=Dt(u)){for(d=[];!(m=v.next()).done;)d.push(m.value);return d}if(u==null)return[u];if(typeof(c=u.length)!="number")return[u];for(d=new Array(c);c--;)d[c]=u[c];return d}for(c=arguments.length,d=new Array(c);c--;)d[c]=arguments[c];return d}var Re=typeof Symbol<"u"?function(u){return u[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},mu=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],cr=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(mu),xt={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ft(u,c){this.name=u,this.message=c}function Ct(u,c){return u+". Errors: "+Object.keys(c).map(function(d){return c[d].toString()}).filter(function(d,m,v){return v.indexOf(d)===m}).join(`
`)}function Vn(u,c,d,m){this.failures=c,this.failedKeys=m,this.successCount=d,this.message=Ct(u,c)}function tn(u,c){this.name="BulkError",this.failures=Object.keys(c).map(function(d){return c[d]}),this.failuresByPos=c,this.message=Ct(u,this.failures)}E(ft).from(Error).extend({toString:function(){return this.name+": "+this.message}}),E(Vn).from(ft),E(tn).from(ft);var Xi=cr.reduce(function(u,c){return u[c]=c+"Error",u},{}),Ix=ft,pe=cr.reduce(function(u,c){var d=c+"Error";function m(v,g){this.name=d,v?typeof v=="string"?(this.message="".concat(v).concat(g?`
 `+g:""),this.inner=g||null):typeof v=="object"&&(this.message="".concat(v.name," ").concat(v.message),this.inner=v):(this.message=xt[c]||d,this.inner=null)}return E(m).from(Ix),u[c]=m,u},{});pe.Syntax=SyntaxError,pe.Type=TypeError,pe.Range=RangeError;var j0=mu.reduce(function(u,c){return u[c+"Error"]=pe[c],u},{}),hc=cr.reduce(function(u,c){return["Syntax","Type","Range"].indexOf(c)===-1&&(u[c+"Error"]=pe[c]),u},{});function et(){}function hu(u){return u}function Ex(u,c){return u==null||u===hu?c:function(d){return c(u(d))}}function Xs(u,c){return function(){u.apply(this,arguments),c.apply(this,arguments)}}function Ox(u,c){return u===et?c:function(){var d=u.apply(this,arguments);d!==void 0&&(arguments[0]=d);var m=this.onsuccess,v=this.onerror;this.onsuccess=null,this.onerror=null;var g=c.apply(this,arguments);return m&&(this.onsuccess=this.onsuccess?Xs(m,this.onsuccess):m),v&&(this.onerror=this.onerror?Xs(v,this.onerror):v),g!==void 0?g:d}}function kx(u,c){return u===et?c:function(){u.apply(this,arguments);var d=this.onsuccess,m=this.onerror;this.onsuccess=this.onerror=null,c.apply(this,arguments),d&&(this.onsuccess=this.onsuccess?Xs(d,this.onsuccess):d),m&&(this.onerror=this.onerror?Xs(m,this.onerror):m)}}function Dx(u,c){return u===et?c:function(d){var m=u.apply(this,arguments);l(d,m);var v=this.onsuccess,g=this.onerror;return this.onsuccess=null,this.onerror=null,d=c.apply(this,arguments),v&&(this.onsuccess=this.onsuccess?Xs(v,this.onsuccess):v),g&&(this.onerror=this.onerror?Xs(g,this.onerror):g),m===void 0?d===void 0?void 0:d:l(m,d)}}function xx(u,c){return u===et?c:function(){return c.apply(this,arguments)!==!1&&u.apply(this,arguments)}}function Vh(u,c){return u===et?c:function(){var d=u.apply(this,arguments);if(d&&typeof d.then=="function"){for(var m=this,v=arguments.length,g=new Array(v);v--;)g[v]=arguments[v];return d.then(function(){return c.apply(m,g)})}return c.apply(this,arguments)}}hc.ModifyError=Vn,hc.DexieError=ft,hc.BulkError=tn;var zr=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function U0(u){zr=u}var pu={},z0=100,Vr=typeof Promise>"u"?[]:function(){var u=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[u,f(u),u];var c=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[c,f(c),u]}(),mu=Vr[0],cr=Vr[1],Vr=Vr[2],cr=cr&&cr.then,yu=mu&&mu.constructor,Kh=!!Vr,vu=function(u,c){gu.push([u,c]),pc&&(queueMicrotask(Ax),pc=!1)},Wh=!0,pc=!0,Zs=[],mc=[],qh=hu,Zi={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:et,pgp:!1,env:{},finalize:et},fe=Zi,gu=[],eo=0,yc=[];function se(u){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var c=this._PSD=fe;if(typeof u!="function"){if(u!==pu)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Qh(this,this._value))}this._state=null,this._value=null,++c.ref,function d(m,v){try{v(function(g){if(m._state===null){if(g===m)throw new TypeError("A promise cannot be resolved with itself.");var b=m._lib&&qo();g&&typeof g.then=="function"?d(m,function(O,A){g instanceof se?g._then(O,A):g.then(O,A)}):(m._state=!0,m._value=g,K0(m)),b&&Ho()}},Qh.bind(null,m))}catch(g){Qh(m,g)}}(this,u)}var Hh={get:function(){var u=fe,c=_c;function d(m,v){var g=this,b=!u.global&&(u!==fe||c!==_c),O=b&&!ts(),A=new se(function(x,M){Yh(g,new V0(q0(m,u,b,O),q0(v,u,b,O),x,M,u))});return this._consoleTask&&(A._consoleTask=this._consoleTask),A}return d.prototype=pu,d},set:function(u){I(this,"then",u&&u.prototype===pu?Hh:{get:function(){return u},set:Hh.set})}};function V0(u,c,d,m,v){this.onFulfilled=typeof u=="function"?u:null,this.onRejected=typeof c=="function"?c:null,this.resolve=d,this.reject=m,this.psd=v}function Qh(u,c){var d,m;mc.push(c),u._state===null&&(d=u._lib&&qo(),c=qh(c),u._state=!1,u._value=c,m=u,Zs.some(function(v){return v._value===m._value})||Zs.push(m),K0(u),d&&Ho())}function K0(u){var c=u._listeners;u._listeners=[];for(var d=0,m=c.length;d<m;++d)Yh(u,c[d]);var v=u._PSD;--v.ref||v.finalize(),eo===0&&(++eo,vu(function(){--eo==0&&Gh()},[]))}function Yh(u,c){if(u._state!==null){var d=u._state?c.onFulfilled:c.onRejected;if(d===null)return(u._state?c.resolve:c.reject)(u._value);++c.psd.ref,++eo,vu(Cx,[d,u,c])}else u._listeners.push(c)}function Cx(u,c,d){try{var m,v=c._value;!c._state&&mc.length&&(mc=[]),m=zr&&c._consoleTask?c._consoleTask.run(function(){return u(v)}):u(v),c._state||mc.indexOf(v)!==-1||function(g){for(var b=Zs.length;b;)if(Zs[--b]._value===g._value)return Zs.splice(b,1)}(c),d.resolve(m)}catch(g){d.reject(g)}finally{--eo==0&&Gh(),--d.psd.ref||d.psd.finalize()}}function Ax(){to(Zi,function(){qo()&&Ho()})}function qo(){var u=Wh;return pc=Wh=!1,u}function Ho(){var u,c,d;do for(;0<gu.length;)for(u=gu,gu=[],d=u.length,c=0;c<d;++c){var m=u[c];m[0].apply(null,m[1])}while(0<gu.length);pc=Wh=!0}function Gh(){var u=Zs;Zs=[],u.forEach(function(m){m._PSD.onunhandled.call(null,m._value,m)});for(var c=yc.slice(0),d=c.length;d;)c[--d]()}function vc(u){return new se(pu,!1,u)}function vt(u,c){var d=fe;return function(){var m=qo(),v=fe;try{return ns(d,!0),u.apply(this,arguments)}catch(g){c&&c(g)}finally{ns(v,!1),m&&Ho()}}}y(se.prototype,{then:Hh,_then:function(u,c){Yh(this,new V0(null,null,u,c,fe))},catch:function(u){if(arguments.length===1)return this.then(null,u);var c=u,d=arguments[1];return typeof c=="function"?this.then(null,function(m){return(m instanceof c?d:vc)(m)}):this.then(null,function(m){return(m&&m.name===c?d:vc)(m)})},finally:function(u){return this.then(function(c){return se.resolve(u()).then(function(){return c})},function(c){return se.resolve(u()).then(function(){return vc(c)})})},timeout:function(u,c){var d=this;return u<1/0?new se(function(m,v){var g=setTimeout(function(){return v(new pe.Timeout(c))},u);d.then(m,v).finally(clearTimeout.bind(null,g))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&I(se.prototype,Symbol.toStringTag,"Dexie.Promise"),Zi.env=W0(),y(se,{all:function(){var u=ue.apply(null,arguments).map(bc);return new se(function(c,d){u.length===0&&c([]);var m=u.length;u.forEach(function(v,g){return se.resolve(v).then(function(b){u[g]=b,--m||c(u)},d)})})},resolve:function(u){return u instanceof se?u:u&&typeof u.then=="function"?new se(function(c,d){u.then(c,d)}):new se(pu,!0,u)},reject:vc,race:function(){var u=ue.apply(null,arguments).map(bc);return new se(function(c,d){u.map(function(m){return se.resolve(m).then(c,d)})})},PSD:{get:function(){return fe},set:function(u){return fe=u}},totalEchoes:{get:function(){return _c}},newPSD:es,usePSD:to,scheduler:{get:function(){return vu},set:function(u){vu=u}},rejectionMapper:{get:function(){return qh},set:function(u){qh=u}},follow:function(u,c){return new se(function(d,m){return es(function(v,g){var b=fe;b.unhandleds=[],b.onunhandled=g,b.finalize=Xs(function(){var O,A=this;O=function(){A.unhandleds.length===0?v():g(A.unhandleds[0])},yc.push(function x(){O(),yc.splice(yc.indexOf(x),1)}),++eo,vu(function(){--eo==0&&Gh()},[])},b.finalize),u()},c,d,m)})}}),yu&&(yu.allSettled&&I(se,"allSettled",function(){var u=ue.apply(null,arguments).map(bc);return new se(function(c){u.length===0&&c([]);var d=u.length,m=new Array(d);u.forEach(function(v,g){return se.resolve(v).then(function(b){return m[g]={status:"fulfilled",value:b}},function(b){return m[g]={status:"rejected",reason:b}}).then(function(){return--d||c(m)})})})}),yu.any&&typeof AggregateError<"u"&&I(se,"any",function(){var u=ue.apply(null,arguments).map(bc);return new se(function(c,d){u.length===0&&d(new AggregateError([]));var m=u.length,v=new Array(m);u.forEach(function(g,b){return se.resolve(g).then(function(O){return c(O)},function(O){v[b]=O,--m||d(new AggregateError(v))})})})}));var Wt={awaits:0,echoes:0,id:0},Px=0,gc=[],wc=0,_c=0,Rx=0;function es(u,c,d,m){var v=fe,g=Object.create(v);return g.parent=v,g.ref=0,g.global=!1,g.id=++Rx,Zi.env,g.env=Kh?{Promise:se,PromiseProp:{value:se,configurable:!0,writable:!0},all:se.all,race:se.race,allSettled:se.allSettled,any:se.any,resolve:se.resolve,reject:se.reject}:{},c&&l(g,c),++v.ref,g.finalize=function(){--this.parent.ref||this.parent.finalize()},m=to(g,u,d,m),g.ref===0&&g.finalize(),m}function Qo(){return Wt.id||(Wt.id=++Px),++Wt.awaits,Wt.echoes+=z0,Wt.id}function ts(){return!!Wt.awaits&&(--Wt.awaits==0&&(Wt.id=0),Wt.echoes=Wt.awaits*z0,!0)}function bc(u){return Wt.echoes&&u&&u.constructor===yu?(Qo(),u.then(function(c){return ts(),c},function(c){return ts(),Pt(c)})):u}function Tx(){var u=gc[gc.length-1];gc.pop(),ns(u,!1)}function ns(u,c){var d,m=fe;(c?!Wt.echoes||wc++&&u===fe:!wc||--wc&&u===fe)||queueMicrotask(c?(function(v){++_c,Wt.echoes&&--Wt.echoes!=0||(Wt.echoes=Wt.awaits=Wt.id=0),gc.push(fe),ns(v,!0)}).bind(null,u):Tx),u!==fe&&(fe=u,m===Zi&&(Zi.env=W0()),Kh&&(d=Zi.env.Promise,c=u.env,(m.global||u.global)&&(Object.defineProperty(s,"Promise",c.PromiseProp),d.all=c.all,d.race=c.race,d.resolve=c.resolve,d.reject=c.reject,c.allSettled&&(d.allSettled=c.allSettled),c.any&&(d.any=c.any))))}function W0(){var u=s.Promise;return Kh?{Promise:u,PromiseProp:Object.getOwnPropertyDescriptor(s,"Promise"),all:u.all,race:u.race,allSettled:u.allSettled,any:u.any,resolve:u.resolve,reject:u.reject}:{}}function to(u,c,d,m,v){var g=fe;try{return ns(u,!0),c(d,m,v)}finally{ns(g,!1)}}function q0(u,c,d,m){return typeof u!="function"?u:function(){var v=fe;d&&Qo(),ns(c,!0);try{return u.apply(this,arguments)}finally{ns(v,!1),m&&queueMicrotask(ts)}}}function Jh(u){Promise===yu&&Wt.echoes===0?wc===0?u():enqueueNativeMicroTask(u):setTimeout(u,0)}(""+cr).indexOf("[native code]")===-1&&(Qo=ts=et);var Pt=se.reject,Vr="4.0.1-beta.11",no=String.fromCharCode(65535),mi="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",H0="String expected.",Yo=[],Sc="__dbnames",Xh="readonly",Zh="readwrite";function ro(u,c){return u?c?function(){return u.apply(this,arguments)&&c.apply(this,arguments)}:u:c}var Q0={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Ic(u){return typeof u!="string"||/\./.test(u)?function(c){return c}:function(c){return c[u]===void 0&&u in c&&delete(c=Pe(c))[u],c}}function Y0(){throw pe.Type()}function je(u,c){try{var d=G0(u),m=G0(c);if(d!==m)return d==="Array"?1:m==="Array"?-1:d==="binary"?1:m==="binary"?-1:d==="string"?1:m==="string"?-1:d==="Date"?1:m!=="Date"?NaN:-1;switch(d){case"number":case"Date":case"string":return c<u?1:u<c?-1:0;case"binary":return function(v,g){for(var b=v.length,O=g.length,A=b<O?b:O,x=0;x<A;++x)if(v[x]!==g[x])return v[x]<g[x]?-1:1;return b===O?0:b<O?-1:1}(J0(u),J0(c));case"Array":return function(v,g){for(var b=v.length,O=g.length,A=b<O?b:O,x=0;x<A;++x){var M=je(v[x],g[x]);if(M!==0)return M}return b===O?0:b<O?-1:1}(u,c)}}catch{}return NaN}function G0(u){var c=typeof u;return c!="object"?c:ArrayBuffer.isView(u)?"binary":(u=ct(u),u==="ArrayBuffer"?"binary":u)}function J0(u){return u instanceof Uint8Array?u:ArrayBuffer.isView(u)?new Uint8Array(u.buffer,u.byteOffset,u.byteLength):new Uint8Array(u)}var X0=(dt.prototype._trans=function(u,c,d){var m=this._tx||fe.trans,v=this.name,g=zr&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(u==="readonly"?"read":"write"," ").concat(this.name));function b(x,M,D){if(!D.schema[v])throw new pe.NotFound("Table "+v+" not part of transaction");return c(D.idbtrans,D)}var O=qo();try{var A=m&&m.db._novip===this.db._novip?m===fe.trans?m._promise(u,b,d):es(function(){return m._promise(u,b,d)},{trans:m,transless:fe.transless||fe}):function x(M,D,C,P){if(M.idbdb&&(M._state.openComplete||fe.letThrough||M._vip)){var T=M._createTransaction(D,C,M._dbSchema);try{T.create(),M._state.PR1398_maxLoop=3}catch(B){return B.name===Xi.InvalidState&&M.isOpen()&&0<--M._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),M.close({disableAutoOpen:!1}),M.open().then(function(){return x(M,D,C,P)})):Pt(B)}return T._promise(D,function(B,R){return es(function(){return fe.trans=T,P(B,R,T)})}).then(function(B){if(D==="readwrite")try{T.idbtrans.commit()}catch{}return D==="readonly"?B:T._completion.then(function(){return B})})}if(M._state.openComplete)return Pt(new pe.DatabaseClosed(M._state.dbOpenError));if(!M._state.isBeingOpened){if(!M._state.autoOpen)return Pt(new pe.DatabaseClosed);M.open().catch(et)}return M._state.dbReadyPromise.then(function(){return x(M,D,C,P)})}(this.db,u,[this.name],b);return g&&(A._consoleTask=g,A=A.catch(function(x){return console.trace(x),Pt(x)})),A}finally{O&&Ho()}},dt.prototype.get=function(u,c){var d=this;return u&&u.constructor===Object?this.where(u).first(c):u==null?Pt(new pe.Type("Invalid argument to Table.get()")):this._trans("readonly",function(m){return d.core.get({trans:m,key:u}).then(function(v){return d.hook.reading.fire(v)})}).then(c)},dt.prototype.where=function(u){if(typeof u=="string")return new this.db.WhereClause(this,u);if(a(u))return new this.db.WhereClause(this,"[".concat(u.join("+"),"]"));var c=o(u);if(c.length===1)return this.where(c[0]).equals(u[c[0]]);var d=this.schema.indexes.concat(this.schema.primKey).filter(function(A){if(A.compound&&c.every(function(M){return 0<=A.keyPath.indexOf(M)})){for(var x=0;x<c.length;++x)if(c.indexOf(A.keyPath[x])===-1)return!1;return!0}return!1}).sort(function(A,x){return A.keyPath.length-x.keyPath.length})[0];if(d&&this.db._maxKey!==no){var b=d.keyPath.slice(0,c.length);return this.where(b).equals(b.map(function(x){return u[x]}))}!d&&zr&&console.warn("The query ".concat(JSON.stringify(u)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(c.join("+"),"]"));var m=this.schema.idxByName,v=this.db._deps.indexedDB;function g(A,x){return v.cmp(A,x)===0}var O=c.reduce(function(C,x){var M=C[0],D=C[1],C=m[x],P=u[x];return[M||C,M||!C?ro(D,C&&C.multi?function(T){return T=Q(T,x),a(T)&&T.some(function(B){return g(P,B)})}:function(T){return g(P,Q(T,x))}):D]},[null,null]),b=O[0],O=O[1];return b?this.where(b.name).equals(u[b.keyPath]).filter(O):d?this.filter(O):this.where(c).equals("")},dt.prototype.filter=function(u){return this.toCollection().and(u)},dt.prototype.count=function(u){return this.toCollection().count(u)},dt.prototype.offset=function(u){return this.toCollection().offset(u)},dt.prototype.limit=function(u){return this.toCollection().limit(u)},dt.prototype.each=function(u){return this.toCollection().each(u)},dt.prototype.toArray=function(u){return this.toCollection().toArray(u)},dt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},dt.prototype.orderBy=function(u){return new this.db.Collection(new this.db.WhereClause(this,a(u)?"[".concat(u.join("+"),"]"):u))},dt.prototype.reverse=function(){return this.toCollection().reverse()},dt.prototype.mapToClass=function(u){var c,d=this.db,m=this.name;function v(){return c!==null&&c.apply(this,arguments)||this}(this.schema.mappedClass=u).prototype instanceof Y0&&(function(A,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");function M(){this.constructor=A}n(A,x),A.prototype=x===null?Object.create(x):(M.prototype=x.prototype,new M)}(v,c=u),Object.defineProperty(v.prototype,"db",{get:function(){return d},enumerable:!1,configurable:!0}),v.prototype.table=function(){return m},u=v);for(var g=new Set,b=u.prototype;b;b=f(b))Object.getOwnPropertyNames(b).forEach(function(A){return g.add(A)});function O(A){if(!A)return A;var x,M=Object.create(u.prototype);for(x in A)if(!g.has(x))try{M[x]=A[x]}catch{}return M}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=O,this.hook("reading",O),u},dt.prototype.defineClass=function(){return this.mapToClass(function(u){l(this,u)})},dt.prototype.add=function(u,c){var d=this,m=this.schema.primKey,v=m.auto,g=m.keyPath,b=u;return g&&v&&(b=Ic(g)(u)),this._trans("readwrite",function(O){return d.core.mutate({trans:O,type:"add",keys:c!=null?[c]:null,values:[b]})}).then(function(O){return O.numFailures?se.reject(O.failures[0]):O.lastResult}).then(function(O){if(g)try{H(u,g,O)}catch{}return O})},dt.prototype.update=function(u,c){return typeof u!="object"||a(u)?this.where(":id").equals(u).modify(c):(u=Q(u,this.schema.primKey.keyPath),u===void 0?Pt(new pe.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(u).modify(c))},dt.prototype.put=function(u,c){var d=this,m=this.schema.primKey,v=m.auto,g=m.keyPath,b=u;return g&&v&&(b=Ic(g)(u)),this._trans("readwrite",function(O){return d.core.mutate({trans:O,type:"put",values:[b],keys:c!=null?[c]:null})}).then(function(O){return O.numFailures?se.reject(O.failures[0]):O.lastResult}).then(function(O){if(g)try{H(u,g,O)}catch{}return O})},dt.prototype.delete=function(u){var c=this;return this._trans("readwrite",function(d){return c.core.mutate({trans:d,type:"delete",keys:[u]})}).then(function(d){return d.numFailures?se.reject(d.failures[0]):void 0})},dt.prototype.clear=function(){var u=this;return this._trans("readwrite",function(c){return u.core.mutate({trans:c,type:"deleteRange",range:Q0})}).then(function(c){return c.numFailures?se.reject(c.failures[0]):void 0})},dt.prototype.bulkGet=function(u){var c=this;return this._trans("readonly",function(d){return c.core.getMany({keys:u,trans:d}).then(function(m){return m.map(function(v){return c.hook.reading.fire(v)})})})},dt.prototype.bulkAdd=function(u,c,d){var m=this,v=Array.isArray(c)?c:void 0,g=(d=d||(v?void 0:c))?d.allKeys:void 0;return this._trans("readwrite",function(b){var x=m.schema.primKey,O=x.auto,x=x.keyPath;if(x&&v)throw new pe.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(v&&v.length!==u.length)throw new pe.InvalidArgument("Arguments objects and keys must have the same length");var A=u.length,x=x&&O?u.map(Ic(x)):u;return m.core.mutate({trans:b,type:"add",keys:v,values:x,wantResults:g}).then(function(T){var D=T.numFailures,C=T.results,P=T.lastResult,T=T.failures;if(D===0)return g?C:P;throw new tn("".concat(m.name,".bulkAdd(): ").concat(D," of ").concat(A," operations failed"),T)})})},dt.prototype.bulkPut=function(u,c,d){var m=this,v=Array.isArray(c)?c:void 0,g=(d=d||(v?void 0:c))?d.allKeys:void 0;return this._trans("readwrite",function(b){var x=m.schema.primKey,O=x.auto,x=x.keyPath;if(x&&v)throw new pe.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(v&&v.length!==u.length)throw new pe.InvalidArgument("Arguments objects and keys must have the same length");var A=u.length,x=x&&O?u.map(Ic(x)):u;return m.core.mutate({trans:b,type:"put",keys:v,values:x,wantResults:g}).then(function(T){var D=T.numFailures,C=T.results,P=T.lastResult,T=T.failures;if(D===0)return g?C:P;throw new tn("".concat(m.name,".bulkPut(): ").concat(D," of ").concat(A," operations failed"),T)})})},dt.prototype.bulkUpdate=function(u){var c=this,d=this.core,m=u.map(function(b){return b.key}),v=u.map(function(b){return b.changes}),g=[];return this._trans("readwrite",function(b){return d.getMany({trans:b,keys:m,cache:"clone"}).then(function(O){var A=[],x=[];u.forEach(function(D,C){var P=D.key,T=D.changes,B=O[C];if(B){for(var R=0,F=Object.keys(T);R<F.length;R++){var j=F[R],V=T[j];if(j===c.schema.primKey.keyPath){if(je(V,P)!==0)throw new pe.Constraint("Cannot update primary key in bulkUpdate()")}else H(B,j,V)}g.push(C),A.push(P),x.push(B)}});var M=A.length;return d.mutate({trans:b,type:"put",keys:A,values:x,updates:{keys:m,changeSpecs:v}}).then(function(D){var C=D.numFailures,P=D.failures;if(C===0)return M;for(var T=0,B=Object.keys(P);T<B.length;T++){var R,F=B[T],j=g[Number(F)];j!=null&&(R=P[F],delete P[F],P[j]=R)}throw new tn("".concat(c.name,".bulkUpdate(): ").concat(C," of ").concat(M," operations failed"),P)})})})},dt.prototype.bulkDelete=function(u){var c=this,d=u.length;return this._trans("readwrite",function(m){return c.core.mutate({trans:m,type:"delete",keys:u})}).then(function(b){var v=b.numFailures,g=b.lastResult,b=b.failures;if(v===0)return g;throw new tn("".concat(c.name,".bulkDelete(): ").concat(v," of ").concat(d," operations failed"),b)})},dt);function dt(){}function wu(u){function c(b,O){if(O){for(var A=arguments.length,x=new Array(A-1);--A;)x[A-1]=arguments[A];return d[b].subscribe.apply(null,x),u}if(typeof b=="string")return d[b]}var d={};c.addEventType=g;for(var m=1,v=arguments.length;m<v;++m)g(arguments[m]);return c;function g(b,O,A){if(typeof b!="object"){var x;O=O||xx;var M={subscribers:[],fire:A=A||et,subscribe:function(D){M.subscribers.indexOf(D)===-1&&(M.subscribers.push(D),M.fire=O(M.fire,D))},unsubscribe:function(D){M.subscribers=M.subscribers.filter(function(C){return C!==D}),M.fire=M.subscribers.reduce(O,A)}};return d[b]=c[b]=M}o(x=b).forEach(function(D){var C=x[D];if(a(C))g(D,x[D][0],x[D][1]);else{if(C!=="asap")throw new pe.InvalidArgument("Invalid event config");var P=g(D,hu,function(){for(var T=arguments.length,B=new Array(T);T--;)B[T]=arguments[T];P.subscribers.forEach(function(R){W(function(){R.apply(null,B)})})})}})}}function _u(u,c){return E(c).from({prototype:u}),c}function Go(u,c){return!(u.filter||u.algorithm||u.or)&&(c?u.justLimit:!u.replayFilter)}function ep(u,c){u.filter=ro(u.filter,c)}function tp(u,c,d){var m=u.replayFilter;u.replayFilter=m?function(){return ro(m(),c())}:c,u.justLimit=d&&!m}function Ec(u,c){if(u.isPrimKey)return c.primaryKey;var d=c.getIndexByKeyPath(u.index);if(!d)throw new pe.Schema("KeyPath "+u.index+" on object store "+c.name+" is not indexed");return d}function Z0(u,c,d){var m=Ec(u,c.schema);return c.openCursor({trans:d,values:!u.keysOnly,reverse:u.dir==="prev",unique:!!u.unique,query:{index:m,range:u.range}})}function Oc(u,c,d,m){var v=u.replayFilter?ro(u.filter,u.replayFilter()):u.filter;if(u.or){var g={},b=function(O,A,x){var M,D;v&&!v(A,x,function(C){return A.stop(C)},function(C){return A.fail(C)})||((D=""+(M=A.primaryKey))=="[object ArrayBuffer]"&&(D=""+new Uint8Array(M)),p(g,D)||(g[D]=!0,c(O,A,x)))};return Promise.all([u.or._iterate(b,d),ew(Z0(u,m,d),u.algorithm,b,!u.keysOnly&&u.valueMapper)])}return ew(Z0(u,m,d),ro(u.algorithm,v),c,!u.keysOnly&&u.valueMapper)}function ew(u,c,d,m){var v=vt(m?function(g,b,O){return d(m(g),b,O)}:d);return u.then(function(g){if(g)return g.start(function(){var b=function(){return g.continue()};c&&!c(g,function(O){return b=O},function(O){g.stop(O),b=et},function(O){g.fail(O),b=et})||v(g.value,g,function(O){return b=O}),b()})})}var Mx=(Le.prototype._read=function(u,c){var d=this._ctx;return d.error?d.table._trans(null,Pt.bind(null,d.error)):d.table._trans("readonly",u).then(c)},Le.prototype._write=function(u){var c=this._ctx;return c.error?c.table._trans(null,Pt.bind(null,c.error)):c.table._trans("readwrite",u,"locked")},Le.prototype._addAlgorithm=function(u){var c=this._ctx;c.algorithm=ro(c.algorithm,u)},Le.prototype._iterate=function(u,c){return Oc(this._ctx,u,c,this._ctx.table.core)},Le.prototype.clone=function(u){var c=Object.create(this.constructor.prototype),d=Object.create(this._ctx);return u&&l(d,u),c._ctx=d,c},Le.prototype.raw=function(){return this._ctx.valueMapper=null,this},Le.prototype.each=function(u){var c=this._ctx;return this._read(function(d){return Oc(c,u,d,c.table.core)})},Le.prototype.count=function(u){var c=this;return this._read(function(d){var m=c._ctx,v=m.table.core;if(Go(m,!0))return v.count({trans:d,query:{index:Ec(m,v.schema),range:m.range}}).then(function(b){return Math.min(b,m.limit)});var g=0;return Oc(m,function(){return++g,!1},d,v).then(function(){return g})}).then(u)},Le.prototype.sortBy=function(u,c){var d=u.split(".").reverse(),m=d[0],v=d.length-1;function g(A,x){return x?g(A[d[x]],x-1):A[m]}var b=this._ctx.dir==="next"?1:-1;function O(A,x){return A=g(A,v),x=g(x,v),A<x?-b:x<A?b:0}return this.toArray(function(A){return A.sort(O)}).then(c)},Le.prototype.toArray=function(u){var c=this;return this._read(function(d){var m=c._ctx;if(m.dir==="next"&&Go(m,!0)&&0<m.limit){var v=m.valueMapper,g=Ec(m,m.table.core.schema);return m.table.core.query({trans:d,limit:m.limit,values:!0,query:{index:g,range:m.range}}).then(function(O){return O=O.result,v?O.map(v):O})}var b=[];return Oc(m,function(O){return b.push(O)},d,m.table.core).then(function(){return b})},u)},Le.prototype.offset=function(u){var c=this._ctx;return u<=0||(c.offset+=u,Go(c)?tp(c,function(){var d=u;return function(m,v){return d===0||(d===1?--d:v(function(){m.advance(d),d=0}),!1)}}):tp(c,function(){var d=u;return function(){return--d<0}})),this},Le.prototype.limit=function(u){return this._ctx.limit=Math.min(this._ctx.limit,u),tp(this._ctx,function(){var c=u;return function(d,m,v){return--c<=0&&m(v),0<=c}},!0),this},Le.prototype.until=function(u,c){return ep(this._ctx,function(d,m,v){return!u(d.value)||(m(v),c)}),this},Le.prototype.first=function(u){return this.limit(1).toArray(function(c){return c[0]}).then(u)},Le.prototype.last=function(u){return this.reverse().first(u)},Le.prototype.filter=function(u){var c;return ep(this._ctx,function(d){return u(d.value)}),(c=this._ctx).isMatch=ro(c.isMatch,u),this},Le.prototype.and=function(u){return this.filter(u)},Le.prototype.or=function(u){return new this.db.WhereClause(this._ctx.table,u,this)},Le.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Le.prototype.desc=function(){return this.reverse()},Le.prototype.eachKey=function(u){var c=this._ctx;return c.keysOnly=!c.isMatch,this.each(function(d,m){u(m.key,m)})},Le.prototype.eachUniqueKey=function(u){return this._ctx.unique="unique",this.eachKey(u)},Le.prototype.eachPrimaryKey=function(u){var c=this._ctx;return c.keysOnly=!c.isMatch,this.each(function(d,m){u(m.primaryKey,m)})},Le.prototype.keys=function(u){var c=this._ctx;c.keysOnly=!c.isMatch;var d=[];return this.each(function(m,v){d.push(v.key)}).then(function(){return d}).then(u)},Le.prototype.primaryKeys=function(u){var c=this._ctx;if(c.dir==="next"&&Go(c,!0)&&0<c.limit)return this._read(function(m){var v=Ec(c,c.table.core.schema);return c.table.core.query({trans:m,values:!1,limit:c.limit,query:{index:v,range:c.range}})}).then(function(m){return m.result}).then(u);c.keysOnly=!c.isMatch;var d=[];return this.each(function(m,v){d.push(v.primaryKey)}).then(function(){return d}).then(u)},Le.prototype.uniqueKeys=function(u){return this._ctx.unique="unique",this.keys(u)},Le.prototype.firstKey=function(u){return this.limit(1).keys(function(c){return c[0]}).then(u)},Le.prototype.lastKey=function(u){return this.reverse().firstKey(u)},Le.prototype.distinct=function(){var u=this._ctx,u=u.index&&u.table.schema.idxByName[u.index];if(!u||!u.multi)return this;var c={};return ep(this._ctx,function(v){var m=v.primaryKey.toString(),v=p(c,m);return c[m]=!0,!v}),this},Le.prototype.modify=function(u){var c=this,d=this._ctx;return this._write(function(m){var v,g,b;b=typeof u=="function"?u:(v=o(u),g=v.length,function(R){for(var F=!1,j=0;j<g;++j){var V=v[j],q=u[V];Q(R,V)!==q&&(H(R,V,q),F=!0)}return F});function O(R,V){var j=V.failures,V=V.numFailures;T+=R-V;for(var q=0,Y=o(j);q<Y.length;q++){var ne=Y[q];P.push(j[ne])}}var A=d.table.core,x=A.schema.primaryKey,M=x.outbound,D=x.extractKey,C=c.db._options.modifyChunkSize||200,P=[],T=0,B=[];return c.clone().primaryKeys().then(function(R){function F(j){var V=Math.min(C,R.length-j);return A.getMany({trans:m,keys:R.slice(j,j+V),cache:"immutable"}).then(function(q){for(var Y=[],ne=[],J=M?[]:null,ie=[],te=0;te<V;++te){var he=q[te],me={value:Pe(he),primKey:R[j+te]};b.call(me,me.value,me)!==!1&&(me.value==null?ie.push(R[j+te]):M||je(D(he),D(me.value))===0?(ne.push(me.value),M&&J.push(R[j+te])):(ie.push(R[j+te]),Y.push(me.value)))}var He=Go(d)&&d.limit===1/0&&(typeof u!="function"||u===np)&&{index:d.index,range:d.range};return Promise.resolve(0<Y.length&&A.mutate({trans:m,type:"add",values:Y}).then(function(Ce){for(var nt in Ce.failures)ie.splice(parseInt(nt),1);O(Y.length,Ce)})).then(function(){return(0<ne.length||He&&typeof u=="object")&&A.mutate({trans:m,type:"put",keys:J,values:ne,criteria:He,changeSpec:typeof u!="function"&&u}).then(function(Ce){return O(ne.length,Ce)})}).then(function(){return(0<ie.length||He&&u===np)&&A.mutate({trans:m,type:"delete",keys:ie,criteria:He}).then(function(Ce){return O(ie.length,Ce)})}).then(function(){return R.length>j+V&&F(j+C)})})}return F(0).then(function(){if(0<P.length)throw new Vn("Error modifying one or more objects",P,T,B);return R.length})})})},Le.prototype.delete=function(){var u=this._ctx,c=u.range;return Go(u)&&(u.isPrimKey||c.type===3)?this._write(function(d){var m=u.table.core.schema.primaryKey,v=c;return u.table.core.count({trans:d,query:{index:m,range:v}}).then(function(g){return u.table.core.mutate({trans:d,type:"deleteRange",range:v}).then(function(b){var O=b.failures;if(b.lastResult,b.results,b=b.numFailures,b)throw new Vn("Could not delete some values",Object.keys(O).map(function(A){return O[A]}),g-b);return g-b})})}):this.modify(np)},Le);function Le(){}var np=function(u,c){return c.value=null};function Nx(u,c){return u<c?-1:u===c?0:1}function Bx(u,c){return c<u?-1:u===c?0:1}function Kn(u,c,d){return u=u instanceof nw?new u.Collection(u):u,u._ctx.error=new(d||TypeError)(c),u}function Jo(u){return new u.Collection(u,function(){return tw("")}).limit(0)}function kc(u,c,d,m){var v,g,b,O,A,x,M,D=d.length;if(!d.every(function(T){return typeof T=="string"}))return Kn(u,H0);function C(T){v=T==="next"?function(R){return R.toUpperCase()}:function(R){return R.toLowerCase()},g=T==="next"?function(R){return R.toLowerCase()}:function(R){return R.toUpperCase()},b=T==="next"?Nx:Bx;var B=d.map(function(R){return{lower:g(R),upper:v(R)}}).sort(function(R,F){return b(R.lower,F.lower)});O=B.map(function(R){return R.upper}),A=B.map(function(R){return R.lower}),M=(x=T)==="next"?"":m}C("next"),u=new u.Collection(u,function(){return rs(O[0],A[D-1]+m)}),u._ondirectionchange=function(T){C(T)};var P=0;return u._addAlgorithm(function(T,B,R){var F=T.key;if(typeof F!="string")return!1;var j=g(F);if(c(j,A,P))return!0;for(var V=null,q=P;q<D;++q){var Y=function(ne,J,ie,te,he,me){for(var He=Math.min(ne.length,te.length),Ce=-1,nt=0;nt<He;++nt){var Wn=J[nt];if(Wn!==te[nt])return he(ne[nt],ie[nt])<0?ne.substr(0,nt)+ie[nt]+ie.substr(nt+1):he(ne[nt],te[nt])<0?ne.substr(0,nt)+te[nt]+ie.substr(nt+1):0<=Ce?ne.substr(0,Ce)+J[Ce]+ie.substr(Ce+1):null;he(ne[nt],Wn)<0&&(Ce=nt)}return He<te.length&&me==="next"?ne+ie.substr(ne.length):He<ne.length&&me==="prev"?ne.substr(0,ie.length):Ce<0?null:ne.substr(0,Ce)+te[Ce]+ie.substr(Ce+1)}(F,j,O[q],A[q],b,x);Y===null&&V===null?P=q+1:(V===null||0<b(V,Y))&&(V=Y)}return B(V!==null?function(){T.continue(V+M)}:R),!1}),u}function rs(u,c,d,m){return{type:2,lower:u,upper:c,lowerOpen:d,upperOpen:m}}function tw(u){return{type:1,lower:u,upper:u}}var nw=(Object.defineProperty(qt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),qt.prototype.between=function(u,c,d,m){d=d!==!1,m=m===!0;try{return 0<this._cmp(u,c)||this._cmp(u,c)===0&&(d||m)&&(!d||!m)?Jo(this):new this.Collection(this,function(){return rs(u,c,!d,!m)})}catch{return Kn(this,mi)}},qt.prototype.equals=function(u){return u==null?Kn(this,mi):new this.Collection(this,function(){return tw(u)})},qt.prototype.above=function(u){return u==null?Kn(this,mi):new this.Collection(this,function(){return rs(u,void 0,!0)})},qt.prototype.aboveOrEqual=function(u){return u==null?Kn(this,mi):new this.Collection(this,function(){return rs(u,void 0,!1)})},qt.prototype.below=function(u){return u==null?Kn(this,mi):new this.Collection(this,function(){return rs(void 0,u,!1,!0)})},qt.prototype.belowOrEqual=function(u){return u==null?Kn(this,mi):new this.Collection(this,function(){return rs(void 0,u)})},qt.prototype.startsWith=function(u){return typeof u!="string"?Kn(this,H0):this.between(u,u+no,!0,!0)},qt.prototype.startsWithIgnoreCase=function(u){return u===""?this.startsWith(u):kc(this,function(c,d){return c.indexOf(d[0])===0},[u],no)},qt.prototype.equalsIgnoreCase=function(u){return kc(this,function(c,d){return c===d[0]},[u],"")},qt.prototype.anyOfIgnoreCase=function(){var u=ue.apply(oe,arguments);return u.length===0?Jo(this):kc(this,function(c,d){return d.indexOf(c)!==-1},u,"")},qt.prototype.startsWithAnyOfIgnoreCase=function(){var u=ue.apply(oe,arguments);return u.length===0?Jo(this):kc(this,function(c,d){return d.some(function(m){return c.indexOf(m)===0})},u,no)},qt.prototype.anyOf=function(){var u=this,c=ue.apply(oe,arguments),d=this._cmp;try{c.sort(d)}catch{return Kn(this,mi)}if(c.length===0)return Jo(this);var m=new this.Collection(this,function(){return rs(c[0],c[c.length-1])});m._ondirectionchange=function(g){d=g==="next"?u._ascending:u._descending,c.sort(d)};var v=0;return m._addAlgorithm(function(g,b,O){for(var A=g.key;0<d(A,c[v]);)if(++v===c.length)return b(O),!1;return d(A,c[v])===0||(b(function(){g.continue(c[v])}),!1)}),m},qt.prototype.notEqual=function(u){return this.inAnyRange([[-1/0,u],[u,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},qt.prototype.noneOf=function(){var u=ue.apply(oe,arguments);if(u.length===0)return new this.Collection(this);try{u.sort(this._ascending)}catch{return Kn(this,mi)}var c=u.reduce(function(d,m){return d?d.concat([[d[d.length-1][1],m]]):[[-1/0,m]]},null);return c.push([u[u.length-1],this.db._maxKey]),this.inAnyRange(c,{includeLowers:!1,includeUppers:!1})},qt.prototype.inAnyRange=function(F,c){var d=this,m=this._cmp,v=this._ascending,g=this._descending,b=this._min,O=this._max;if(F.length===0)return Jo(this);if(!F.every(function(j){return j[0]!==void 0&&j[1]!==void 0&&v(j[0],j[1])<=0}))return Kn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",pe.InvalidArgument);var A=!c||c.includeLowers!==!1,x=c&&c.includeUppers===!0,M,D=v;function C(j,V){return D(j[0],V[0])}try{(M=F.reduce(function(j,V){for(var q=0,Y=j.length;q<Y;++q){var ne=j[q];if(m(V[0],ne[1])<0&&0<m(V[1],ne[0])){ne[0]=b(ne[0],V[0]),ne[1]=O(ne[1],V[1]);break}}return q===Y&&j.push(V),j},[])).sort(C)}catch{return Kn(this,mi)}var P=0,T=x?function(j){return 0<v(j,M[P][1])}:function(j){return 0<=v(j,M[P][1])},B=A?function(j){return 0<g(j,M[P][0])}:function(j){return 0<=g(j,M[P][0])},R=T,F=new this.Collection(this,function(){return rs(M[0][0],M[M.length-1][1],!A,!x)});return F._ondirectionchange=function(j){D=j==="next"?(R=T,v):(R=B,g),M.sort(C)},F._addAlgorithm(function(j,V,q){for(var Y,ne=j.key;R(ne);)if(++P===M.length)return V(q),!1;return!T(Y=ne)&&!B(Y)||(d._cmp(ne,M[P][1])===0||d._cmp(ne,M[P][0])===0||V(function(){D===v?j.continue(M[P][0]):j.continue(M[P][1])}),!1)}),F},qt.prototype.startsWithAnyOf=function(){var u=ue.apply(oe,arguments);return u.every(function(c){return typeof c=="string"})?u.length===0?Jo(this):this.inAnyRange(u.map(function(c){return[c,c+no]})):Kn(this,"startsWithAnyOf() only works with strings")},qt);function qt(){}function Kr(u){return vt(function(c){return bu(c),u(c.target.error),!1})}function bu(u){u.stopPropagation&&u.stopPropagation(),u.preventDefault&&u.preventDefault()}var Su="storagemutated",rp="x-storagemutated-1",is=wu(null,Su),Fx=(Wr.prototype._lock=function(){return z(!fe.global),++this._reculock,this._reculock!==1||fe.global||(fe.lockOwnerFor=this),this},Wr.prototype._unlock=function(){if(z(!fe.global),--this._reculock==0)for(fe.global||(fe.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var u=this._blockedFuncs.shift();try{to(u[1],u[0])}catch{}}return this},Wr.prototype._locked=function(){return this._reculock&&fe.lockOwnerFor!==this},Wr.prototype.create=function(u){var c=this;if(!this.mode)return this;var d=this.db.idbdb,m=this.db._state.dbOpenError;if(z(!this.idbtrans),!u&&!d)switch(m&&m.name){case"DatabaseClosedError":throw new pe.DatabaseClosed(m);case"MissingAPIError":throw new pe.MissingAPI(m.message,m);default:throw new pe.OpenFailed(m)}if(!this.active)throw new pe.TransactionInactive;return z(this._completion._state===null),(u=this.idbtrans=u||(this.db.core||d).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=vt(function(v){bu(v),c._reject(u.error)}),u.onabort=vt(function(v){bu(v),c.active&&c._reject(new pe.Abort(u.error)),c.active=!1,c.on("abort").fire(v)}),u.oncomplete=vt(function(){c.active=!1,c._resolve(),"mutatedParts"in u&&is.storagemutated.fire(u.mutatedParts)}),this},Wr.prototype._promise=function(u,c,d){var m=this;if(u==="readwrite"&&this.mode!=="readwrite")return Pt(new pe.ReadOnly("Transaction is readonly"));if(!this.active)return Pt(new pe.TransactionInactive);if(this._locked())return new se(function(g,b){m._blockedFuncs.push([function(){m._promise(u,c,d).then(g,b)},fe])});if(d)return es(function(){var g=new se(function(b,O){m._lock();var A=c(b,O,m);A&&A.then&&A.then(b,O)});return g.finally(function(){return m._unlock()}),g._lib=!0,g});var v=new se(function(g,b){var O=c(g,b,m);O&&O.then&&O.then(g,b)});return v._lib=!0,v},Wr.prototype._root=function(){return this.parent?this.parent._root():this},Wr.prototype.waitFor=function(u){var c,d=this._root(),m=se.resolve(u);d._waitingFor?d._waitingFor=d._waitingFor.then(function(){return m}):(d._waitingFor=m,d._waitingQueue=[],c=d.idbtrans.objectStore(d.storeNames[0]),function g(){for(++d._spinCount;d._waitingQueue.length;)d._waitingQueue.shift()();d._waitingFor&&(c.get(-1/0).onsuccess=g)}());var v=d._waitingFor;return new se(function(g,b){m.then(function(O){return d._waitingQueue.push(vt(g.bind(null,O)))},function(O){return d._waitingQueue.push(vt(b.bind(null,O)))}).finally(function(){d._waitingFor===v&&(d._waitingFor=null)})})},Wr.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new pe.Abort))},Wr.prototype.table=function(u){var c=this._memoizedTables||(this._memoizedTables={});if(p(c,u))return c[u];var d=this.schema[u];if(!d)throw new pe.NotFound("Table "+u+" not part of transaction");return d=new this.db.Table(u,d,this),d.core=this.db.core.table(u),c[u]=d},Wr);function Wr(){}function ip(u,c,d,m,v,g,b){return{name:u,keyPath:c,unique:d,multi:m,auto:v,compound:g,src:(d&&!b?"&":"")+(m?"*":"")+(v?"++":"")+rw(c)}}function rw(u){return typeof u=="string"?u:u?"["+[].join.call(u,"+")+"]":""}function sp(u,c,d){return{name:u,primKey:c,indexes:d,mappedClass:null,idxByName:(m=function(v){return[v.name,v]},d.reduce(function(v,g,b){return b=m(g,b),b&&(v[b[0]]=b[1]),v},{}))};var m}var Iu=function(u){try{return u.only([[]]),Iu=function(){return[[]]},[[]]}catch{return Iu=function(){return no},no}};function op(u){return u==null?function(){}:typeof u=="string"?(c=u).split(".").length===1?function(d){return d[c]}:function(d){return Q(d,c)}:function(d){return Q(d,u)};var c}function iw(u){return[].slice.call(u)}var Lx=0;function Eu(u){return u==null?":id":typeof u=="string"?u:"[".concat(u.join("+"),"]")}function $x(u,c,A){function m(R){if(R.type===3)return null;if(R.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var P=R.lower,T=R.upper,B=R.lowerOpen,R=R.upperOpen;return P===void 0?T===void 0?null:c.upperBound(T,!!R):T===void 0?c.lowerBound(P,!!B):c.bound(P,T,!!B,!!R)}function v(C){var P,T=C.name;return{name:T,schema:C,mutate:function(B){var R=B.trans,F=B.type,j=B.keys,V=B.values,q=B.range;return new Promise(function(Y,ne){Y=vt(Y);var J=R.objectStore(T),ie=J.keyPath==null,te=F==="put"||F==="add";if(!te&&F!=="delete"&&F!=="deleteRange")throw new Error("Invalid operation type: "+F);var he,me=(j||V||{length:1}).length;if(j&&V&&j.length!==V.length)throw new Error("Given keys array must have same length as given values array.");if(me===0)return Y({numFailures:0,failures:{},results:[],lastResult:void 0});function He(dn){++Wn,bu(dn)}var Ce=[],nt=[],Wn=0;if(F==="deleteRange"){if(q.type===4)return Y({numFailures:Wn,failures:nt,results:[],lastResult:void 0});q.type===3?Ce.push(he=J.clear()):Ce.push(he=J.delete(m(q)))}else{var ie=te?ie?[V,j]:[V,null]:[j,null],De=ie[0],vi=ie[1];if(te)for(var rn=0;rn<me;++rn)Ce.push(he=vi&&vi[rn]!==void 0?J[F](De[rn],vi[rn]):J[F](De[rn])),he.onerror=He;else for(rn=0;rn<me;++rn)Ce.push(he=J[F](De[rn])),he.onerror=He}function $c(dn){dn=dn.target.result,Ce.forEach(function(oo,Op){return oo.error!=null&&(nt[Op]=oo.error)}),Y({numFailures:Wn,failures:nt,results:F==="delete"?j:Ce.map(function(oo){return oo.result}),lastResult:dn})}he.onerror=function(dn){He(dn),$c(dn)},he.onsuccess=$c})},getMany:function(B){var R=B.trans,F=B.keys;return new Promise(function(j,V){j=vt(j);for(var q,Y=R.objectStore(T),ne=F.length,J=new Array(ne),ie=0,te=0,he=function(Ce){Ce=Ce.target,J[Ce._pos]=Ce.result,++te===ie&&j(J)},me=Kr(V),He=0;He<ne;++He)F[He]!=null&&((q=Y.get(F[He]))._pos=He,q.onsuccess=he,q.onerror=me,++ie);ie===0&&j(J)})},get:function(B){var R=B.trans,F=B.key;return new Promise(function(j,V){j=vt(j);var q=R.objectStore(T).get(F);q.onsuccess=function(Y){return j(Y.target.result)},q.onerror=Kr(V)})},query:(P=x,function(B){return new Promise(function(R,F){R=vt(R);var j,V,q,ie=B.trans,Y=B.values,ne=B.limit,he=B.query,J=ne===1/0?void 0:ne,te=he.index,he=he.range,ie=ie.objectStore(T),te=te.isPrimaryKey?ie:ie.index(te.name),he=m(he);if(ne===0)return R({result:[]});P?((J=Y?te.getAll(he,J):te.getAllKeys(he,J)).onsuccess=function(me){return R({result:me.target.result})},J.onerror=Kr(F)):(j=0,V=!Y&&"openKeyCursor"in te?te.openKeyCursor(he):te.openCursor(he),q=[],V.onsuccess=function(me){var He=V.result;return He?(q.push(Y?He.value:He.primaryKey),++j===ne?R({result:q}):void He.continue()):R({result:q})},V.onerror=Kr(F))})}),openCursor:function(B){var R=B.trans,F=B.values,j=B.query,V=B.reverse,q=B.unique;return new Promise(function(Y,ne){Y=vt(Y);var te=j.index,J=j.range,ie=R.objectStore(T),ie=te.isPrimaryKey?ie:ie.index(te.name),te=V?q?"prevunique":"prev":q?"nextunique":"next",he=!F&&"openKeyCursor"in ie?ie.openKeyCursor(m(J),te):ie.openCursor(m(J),te);he.onerror=Kr(ne),he.onsuccess=vt(function(me){var He,Ce,nt,Wn,De=he.result;De?(De.___id=++Lx,De.done=!1,He=De.continue.bind(De),Ce=(Ce=De.continuePrimaryKey)&&Ce.bind(De),nt=De.advance.bind(De),Wn=function(){throw new Error("Cursor not stopped")},De.trans=R,De.stop=De.continue=De.continuePrimaryKey=De.advance=function(){throw new Error("Cursor not started")},De.fail=vt(ne),De.next=function(){var vi=this,rn=1;return this.start(function(){return rn--?vi.continue():vi.stop()}).then(function(){return vi})},De.start=function(vi){function rn(){if(he.result)try{vi()}catch(dn){De.fail(dn)}else De.done=!0,De.start=function(){throw new Error("Cursor behind last entry")},De.stop()}var $c=new Promise(function(dn,oo){dn=vt(dn),he.onerror=Kr(oo),De.fail=oo,De.stop=function(Op){De.stop=De.continue=De.continuePrimaryKey=De.advance=Wn,dn(Op)}});return he.onsuccess=vt(function(dn){he.onsuccess=rn,rn()}),De.continue=He,De.continuePrimaryKey=Ce,De.advance=nt,rn(),$c},Y(De)):Y(null)},ne)})},count:function(B){var R=B.query,F=B.trans,j=R.index,V=R.range;return new Promise(function(q,Y){var ne=F.objectStore(T),J=j.isPrimaryKey?ne:ne.index(j.name),ne=m(V),J=ne?J.count(ne):J.count();J.onsuccess=vt(function(ie){return q(ie.target.result)}),J.onerror=Kr(Y)})}}}var g,b,O,M=(b=A,O=iw((g=u).objectStoreNames),{schema:{name:g.name,tables:O.map(function(C){return b.objectStore(C)}).map(function(C){var P=C.keyPath,R=C.autoIncrement,T=a(P),B={},R={name:C.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:P==null,compound:T,keyPath:P,autoIncrement:R,unique:!0,extractKey:op(P)},indexes:iw(C.indexNames).map(function(F){return C.index(F)}).map(function(q){var j=q.name,V=q.unique,Y=q.multiEntry,q=q.keyPath,Y={name:j,compound:a(q),keyPath:q,unique:V,multiEntry:Y,extractKey:op(q)};return B[Eu(q)]=Y}),getIndexByKeyPath:function(F){return B[Eu(F)]}};return B[":id"]=R.primaryKey,P!=null&&(B[Eu(P)]=R.primaryKey),R})},hasGetAll:0<O.length&&"getAll"in b.objectStore(O[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),A=M.schema,x=M.hasGetAll,M=A.tables.map(v),D={};return M.forEach(function(C){return D[C.name]=C}),{stack:"dbcore",transaction:u.transaction.bind(u),table:function(C){if(!D[C])throw new Error("Table '".concat(C,"' not found"));return D[C]},MIN_KEY:-1/0,MAX_KEY:Iu(c),schema:A}}function jx(u,c,d,m){var v=d.IDBKeyRange;return d.indexedDB,{dbcore:(m=$x(c,v,m),u.dbcore.reduce(function(g,b){return b=b.create,r(r({},g),b(g))},m))}}function Dc(u,m){var d=m.db,m=jx(u._middlewares,d,u._deps,m);u.core=m.dbcore,u.tables.forEach(function(v){var g=v.name;u.core.schema.tables.some(function(b){return b.name===g})&&(v.core=u.core.table(g),u[g]instanceof u.Table&&(u[g].core=v.core))})}function xc(u,c,d,m){d.forEach(function(v){var g=m[v];c.forEach(function(b){var O=function A(x,M){return $(x,M)||(x=f(x))&&A(x,M)}(b,v);(!O||"value"in O&&O.value===void 0)&&(b===u.Transaction.prototype||b instanceof u.Transaction?I(b,v,{get:function(){return this.table(v)},set:function(A){w(this,v,{value:A,writable:!0,configurable:!0,enumerable:!0})}}):b[v]=new u.Table(v,g))})})}function ap(u,c){c.forEach(function(d){for(var m in d)d[m]instanceof u.Table&&delete d[m]})}function Ux(u,c){return u._cfg.version-c._cfg.version}function zx(u,c,d,m){var v=u._dbSchema;d.objectStoreNames.contains("$meta")&&!v.$meta&&(v.$meta=sp("$meta",ow("")[0],[]),u._storeNames.push("$meta"));var g=u._createTransaction("readwrite",u._storeNames,v);g.create(d),g._completion.catch(m);var b=g._reject.bind(g),O=fe.transless||fe;es(function(){return fe.trans=g,fe.transless=O,c!==0?(Dc(u,d),x=c,((A=g).storeNames.includes("$meta")?A.table("$meta").get("version").then(function(M){return M??x}):se.resolve(x)).then(function(M){return C=M,P=g,T=d,B=[],M=(D=u)._versions,R=D._dbSchema=Ac(0,D.idbdb,T),(M=M.filter(function(F){return F._cfg.version>=C})).length!==0?(M.forEach(function(F){B.push(function(){var j=R,V=F._cfg.dbschema;Pc(D,j,T),Pc(D,V,T),R=D._dbSchema=V;var q=up(j,V);q.add.forEach(function(te){lp(T,te[0],te[1].primKey,te[1].indexes)}),q.change.forEach(function(te){if(te.recreate)throw new pe.Upgrade("Not yet support for changing primary key");var he=T.objectStore(te.name);te.add.forEach(function(me){return Cc(he,me)}),te.change.forEach(function(me){he.deleteIndex(me.name),Cc(he,me)}),te.del.forEach(function(me){return he.deleteIndex(me)})});var Y=F._cfg.contentUpgrade;if(Y&&F._cfg.version>C){Dc(D,T),P._memoizedTables={};var ne=X(V);q.del.forEach(function(te){ne[te]=j[te]}),ap(D,[D.Transaction.prototype]),xc(D,[D.Transaction.prototype],o(ne),ne),P.schema=ne;var J,ie=Re(Y);return ie&&Qo(),q=se.follow(function(){var te;(J=Y(P))&&ie&&(te=ts.bind(null,null),J.then(te,te))}),J&&typeof J.then=="function"?se.resolve(J):q.then(function(){return J})}}),B.push(function(j){var V,q,Y=F._cfg.dbschema;V=Y,q=j,[].slice.call(q.db.objectStoreNames).forEach(function(ne){return V[ne]==null&&q.db.deleteObjectStore(ne)}),ap(D,[D.Transaction.prototype]),xc(D,[D.Transaction.prototype],D._storeNames,D._dbSchema),P.schema=D._dbSchema}),B.push(function(j){D.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(D.idbdb.version/10)===F._cfg.version?(D.idbdb.deleteObjectStore("$meta"),delete D._dbSchema.$meta,D._storeNames=D._storeNames.filter(function(V){return V!=="$meta"})):j.objectStore("$meta").put(F._cfg.version,"version"))})}),function F(){return B.length?se.resolve(B.shift()(P.idbtrans)).then(F):se.resolve()}().then(function(){sw(R,T)})):se.resolve();var D,C,P,T,B,R}).catch(b)):(o(v).forEach(function(M){lp(d,M,v[M].primKey,v[M].indexes)}),Dc(u,d),void se.follow(function(){return u.on.populate.fire(g)}).catch(b));var A,x})}function Vx(u,c){sw(u._dbSchema,c),c.db.version%10!=0||c.objectStoreNames.contains("$meta")||c.db.createObjectStore("$meta").add(Math.ceil(c.db.version/10-1),"version");var d=Ac(0,u.idbdb,c);Pc(u,u._dbSchema,c);for(var m=0,v=up(d,u._dbSchema).change;m<v.length;m++){var g=function(b){if(b.change.length||b.recreate)return console.warn("Unable to patch indexes of table ".concat(b.name," because it has changes on the type of index or primary key.")),{value:void 0};var O=c.objectStore(b.name);b.add.forEach(function(A){zr&&console.debug("Dexie upgrade patch: Creating missing index ".concat(b.name,".").concat(A.src)),Cc(O,A)})}(v[m]);if(typeof g=="object")return g.value}}function up(u,c){var d,m={del:[],add:[],change:[]};for(d in u)c[d]||m.del.push(d);for(d in c){var v=u[d],g=c[d];if(v){var b={name:d,def:g,recreate:!1,del:[],add:[],change:[]};if(""+(v.primKey.keyPath||"")!=""+(g.primKey.keyPath||"")||v.primKey.auto!==g.primKey.auto)b.recreate=!0,m.change.push(b);else{var O=v.idxByName,A=g.idxByName,x=void 0;for(x in O)A[x]||b.del.push(x);for(x in A){var M=O[x],D=A[x];M?M.src!==D.src&&b.change.push(D):b.add.push(D)}(0<b.del.length||0<b.add.length||0<b.change.length)&&m.change.push(b)}}else m.add.push([d,g])}return m}function lp(u,c,d,m){var v=u.db.createObjectStore(c,d.keyPath?{keyPath:d.keyPath,autoIncrement:d.auto}:{autoIncrement:d.auto});return m.forEach(function(g){return Cc(v,g)}),v}function sw(u,c){o(u).forEach(function(d){c.db.objectStoreNames.contains(d)||(zr&&console.debug("Dexie: Creating missing table",d),lp(c,d,u[d].primKey,u[d].indexes))})}function Cc(u,c){u.createIndex(c.name,c.keyPath,{unique:c.unique,multiEntry:c.multi})}function Ac(u,c,d){var m={};return _(c.objectStoreNames,0).forEach(function(v){for(var g=d.objectStore(v),b=ip(rw(x=g.keyPath),x||"",!0,!1,!!g.autoIncrement,x&&typeof x!="string",!0),O=[],A=0;A<g.indexNames.length;++A){var M=g.index(g.indexNames[A]),x=M.keyPath,M=ip(M.name,x,!!M.unique,!!M.multiEntry,!1,x&&typeof x!="string",!1);O.push(M)}m[v]=sp(v,b,O)}),m}function Pc(u,c,d){for(var m=d.db.objectStoreNames,v=0;v<m.length;++v){var g=m[v],b=d.objectStore(g);u._hasGetAll="getAll"in b;for(var O=0;O<b.indexNames.length;++O){var A=b.indexNames[O],x=b.index(A).keyPath,M=typeof x=="string"?x:"["+_(x).join("+")+"]";!c[g]||(x=c[g].idxByName[M])&&(x.name=A,delete c[g].idxByName[M],c[g].idxByName[A]=x)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&s.WorkerGlobalScope&&s instanceof s.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(u._hasGetAll=!1)}function ow(u){return u.split(",").map(function(c,d){var m=(c=c.trim()).replace(/([&*]|\+\+)/g,""),v=/^\[/.test(m)?m.match(/^\[(.*)\]$/)[1].split("+"):m;return ip(m,v||null,/\&/.test(c),/\*/.test(c),/\+\+/.test(c),a(v),d===0)})}var Kx=(Rc.prototype._parseStoresSpec=function(u,c){o(u).forEach(function(d){if(u[d]!==null){var m=ow(u[d]),v=m.shift();if(v.unique=!0,v.multi)throw new pe.Schema("Primary key cannot be multi-valued");m.forEach(function(g){if(g.auto)throw new pe.Schema("Only primary key can be marked as autoIncrement (++)");if(!g.keyPath)throw new pe.Schema("Index must have a name and cannot be an empty string")}),c[d]=sp(d,v,m)}})},Rc.prototype.stores=function(d){var c=this.db;this._cfg.storesSource=this._cfg.storesSource?l(this._cfg.storesSource,d):d;var d=c._versions,m={},v={};return d.forEach(function(g){l(m,g._cfg.storesSource),v=g._cfg.dbschema={},g._parseStoresSpec(m,v)}),c._dbSchema=v,ap(c,[c._allTables,c,c.Transaction.prototype]),xc(c,[c._allTables,c,c.Transaction.prototype,this._cfg.tables],o(v),v),c._storeNames=o(v),this},Rc.prototype.upgrade=function(u){return this._cfg.contentUpgrade=Vh(this._cfg.contentUpgrade||et,u),this},Rc);function Rc(){}function cp(u,c){var d=u._dbNamesDB;return d||(d=u._dbNamesDB=new yi(Sc,{addons:[],indexedDB:u,IDBKeyRange:c})).version(1).stores({dbnames:"name"}),d.table("dbnames")}function fp(u){return u&&typeof u.databases=="function"}function dp(u){return es(function(){return fe.letThrough=!0,u()})}function hp(u){return!("from"in u)}var nn=function(u,c){if(!this){var d=new nn;return u&&"d"in u&&l(d,u),d}l(this,arguments.length?{d:1,from:u,to:1<arguments.length?c:u}:{d:0})};function Ou(u,c,d){var m=je(c,d);if(!isNaN(m)){if(0<m)throw RangeError();if(hp(u))return l(u,{from:c,to:d,d:1});var v=u.l,m=u.r;if(je(d,u.from)<0)return v?Ou(v,c,d):u.l={from:c,to:d,d:1,l:null,r:null},aw(u);if(0<je(c,u.to))return m?Ou(m,c,d):u.r={from:c,to:d,d:1,l:null,r:null},aw(u);je(c,u.from)<0&&(u.from=c,u.l=null,u.d=m?m.d+1:1),0<je(d,u.to)&&(u.to=d,u.r=null,u.d=u.l?u.l.d+1:1),d=!u.r,v&&!u.l&&ku(u,v),m&&d&&ku(u,m)}}function ku(u,c){hp(c)||function d(m,A){var g=A.from,b=A.to,O=A.l,A=A.r;Ou(m,g,b),O&&d(m,O),A&&d(m,A)}(u,c)}function Tc(u,c){var d=pp(c),m=d.next();if(m.done)return!1;for(var v=m.value,g=pp(u),b=g.next(v.from),O=b.value;!m.done&&!b.done;){if(je(O.from,v.to)<=0&&0<=je(O.to,v.from))return!0;je(v.from,O.from)<0?v=(m=d.next(O.from)).value:O=(b=g.next(v.from)).value}return!1}function pp(u){var c=hp(u)?null:{s:0,n:u};return{next:function(d){for(var m=0<arguments.length;c;)switch(c.s){case 0:if(c.s=1,m)for(;c.n.l&&je(d,c.n.from)<0;)c={up:c,n:c.n.l,s:1};else for(;c.n.l;)c={up:c,n:c.n.l,s:1};case 1:if(c.s=2,!m||je(d,c.n.to)<=0)return{value:c.n,done:!1};case 2:if(c.n.r){c.s=3,c={up:c,n:c.n.r,s:0};continue}case 3:c=c.up}return{done:!0}}}}function aw(u){var c,d,m=(((c=u.r)===null||c===void 0?void 0:c.d)||0)-(((d=u.l)===null||d===void 0?void 0:d.d)||0),v=1<m?"r":m<-1?"l":"";v&&(c=v=="r"?"l":"r",d=r({},u),m=u[v],u.from=m.from,u.to=m.to,u[v]=m[v],d[v]=m[c],(u[c]=d).d=uw(d)),u.d=uw(u)}function uw(d){var c=d.r,d=d.l;return(c?d?Math.max(c.d,d.d):c.d:d?d.d:0)+1}function Mc(u,c){return o(c).forEach(function(d){u[d]?ku(u[d],c[d]):u[d]=function m(v){var g,b,O={};for(g in v)p(v,g)&&(b=v[g],O[g]=!b||typeof b!="object"||ce.has(b.constructor)?b:m(b));return O}(c[d])}),u}function mp(u,c){return u.all||c.all||Object.keys(u).some(function(d){return c[d]&&Tc(c[d],u[d])})}y(nn.prototype,((cr={add:function(u){return ku(this,u),this},addKey:function(u){return Ou(this,u,u),this},addKeys:function(u){var c=this;return u.forEach(function(d){return Ou(c,d,d)}),this}})[Te]=function(){return pp(this)},cr));var io={},yp={},vp=!1;function Nc(u){Mc(yp,u),vp||(vp=!0,setTimeout(function(){vp=!1,gp(yp,!(yp={}))},0))}function gp(u,c){c===void 0&&(c=!1);var d=new Set;if(u.all)for(var m=0,v=Object.values(io);m<v.length;m++)lw(b=v[m],u,d,c);else for(var g in u){var b,O=/^idb\:\/\/(.*)\/(.*)\//.exec(g);O&&(g=O[1],O=O[2],(b=io["idb://".concat(g,"/").concat(O)])&&lw(b,u,d,c))}d.forEach(function(A){return A()})}function lw(u,c,d,m){for(var v=[],g=0,b=Object.entries(u.queries.query);g<b.length;g++){for(var O=b[g],A=O[0],x=[],M=0,D=O[1];M<D.length;M++){var C=D[M];mp(c,C.obsSet)?C.subscribers.forEach(function(R){return d.add(R)}):m&&x.push(C)}m&&v.push([A,x])}if(m)for(var P=0,T=v;P<T.length;P++){var B=T[P],A=B[0],x=B[1];u.queries.query[A]=x}}function Wx(u){var c=u._state,d=u._deps.indexedDB;if(c.isBeingOpened||u.idbdb)return c.dbReadyPromise.then(function(){return c.dbOpenError?Pt(c.dbOpenError):u});c.isBeingOpened=!0,c.dbOpenError=null,c.openComplete=!1;var m=c.openCanceller,v=Math.round(10*u.verno),g=!1;function b(){if(c.openCanceller!==m)throw new pe.DatabaseClosed("db.open() was cancelled")}function O(){return new se(function(C,P){if(b(),!d)throw new pe.MissingAPI;var T=u.name,B=c.autoSchema||!v?d.open(T):d.open(T,v);if(!B)throw new pe.MissingAPI;B.onerror=Kr(P),B.onblocked=vt(u._fireOnBlocked),B.onupgradeneeded=vt(function(R){var F;M=B.transaction,c.autoSchema&&!u._options.allowEmptyDB?(B.onerror=bu,M.abort(),B.result.close(),(F=d.deleteDatabase(T)).onsuccess=F.onerror=vt(function(){P(new pe.NoSuchDatabase("Database ".concat(T," doesnt exist")))})):(M.onerror=Kr(P),R=R.oldVersion>Math.pow(2,62)?0:R.oldVersion,D=R<1,u.idbdb=B.result,g&&Vx(u,M),zx(u,R/10,M,P))},P),B.onsuccess=vt(function(){M=null;var R,F,j,V,q,Y=u.idbdb=B.result,ne=_(Y.objectStoreNames);if(0<ne.length)try{var J=Y.transaction((V=ne).length===1?V[0]:V,"readonly");if(c.autoSchema)F=Y,j=J,(R=u).verno=F.version/10,j=R._dbSchema=Ac(0,F,j),R._storeNames=_(F.objectStoreNames,0),xc(R,[R._allTables],o(j),j);else if(Pc(u,u._dbSchema,J),((q=up(Ac(0,(q=u).idbdb,J),q._dbSchema)).add.length||q.change.some(function(ie){return ie.add.length||ie.change.length}))&&!g)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Y.close(),v=Y.version+1,g=!0,C(O());Dc(u,J)}catch{}Yo.push(u),Y.onversionchange=vt(function(ie){c.vcFired=!0,u.on("versionchange").fire(ie)}),Y.onclose=vt(function(ie){u.on("close").fire(ie)}),D&&(q=u._deps,J=T,Y=q.indexedDB,q=q.IDBKeyRange,fp(Y)||J===Sc||cp(Y,q).put({name:J}).catch(et)),C()},P)}).catch(function(C){switch(C==null?void 0:C.name){case"UnknownError":if(0<c.PR1398_maxLoop)return c.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),O();break;case"VersionError":if(0<v)return v=0,O()}return se.reject(C)})}var A,x=c.dbReadyResolve,M=null,D=!1;return se.race([m,(typeof navigator>"u"?se.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(C){function P(){return indexedDB.databases().finally(C)}A=setInterval(P,100),P()}).finally(function(){return clearInterval(A)}):Promise.resolve()).then(O)]).then(function(){return b(),c.onReadyBeingFired=[],se.resolve(dp(function(){return u.on.ready.fire(u.vip)})).then(function C(){if(0<c.onReadyBeingFired.length){var P=c.onReadyBeingFired.reduce(Vh,et);return c.onReadyBeingFired=[],se.resolve(dp(function(){return P(u.vip)})).then(C)}})}).finally(function(){c.openCanceller===m&&(c.onReadyBeingFired=null,c.isBeingOpened=!1)}).catch(function(C){c.dbOpenError=C;try{M&&M.abort()}catch{}return m===c.openCanceller&&u._close(),Pt(C)}).finally(function(){c.openComplete=!0,x()}).then(function(){var C;return D&&(C={},u.tables.forEach(function(P){P.schema.indexes.forEach(function(T){T.name&&(C["idb://".concat(u.name,"/").concat(P.name,"/").concat(T.name)]=new nn(-1/0,[[[]]]))}),C["idb://".concat(u.name,"/").concat(P.name,"/")]=C["idb://".concat(u.name,"/").concat(P.name,"/:dels")]=new nn(-1/0,[[[]]])}),is(Su).fire(C),gp(C,!0)),u})}function wp(u){function c(g){return u.next(g)}var d=v(c),m=v(function(g){return u.throw(g)});function v(g){return function(A){var O=g(A),A=O.value;return O.done?A:A&&typeof A.then=="function"?A.then(d,m):a(A)?Promise.all(A).then(d,m):d(A)}}return v(c)()}function Bc(u,c,d){for(var m=a(u)?u.slice():[u],v=0;v<d;++v)m.push(c);return m}var qx={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(u){return r(r({},u),{table:function(c){var d=u.table(c),m=d.schema,v={},g=[];function b(D,C,P){var T=Eu(D),B=v[T]=v[T]||[],R=D==null?0:typeof D=="string"?1:D.length,F=0<C,F=r(r({},P),{name:F?"".concat(T,"(virtual-from:").concat(P.name,")"):P.name,lowLevelIndex:P,isVirtual:F,keyTail:C,keyLength:R,extractKey:op(D),unique:!F&&P.unique});return B.push(F),F.isPrimaryKey||g.push(F),1<R&&b(R===2?D[0]:D.slice(0,R-1),C+1,P),B.sort(function(j,V){return j.keyTail-V.keyTail}),F}c=b(m.primaryKey.keyPath,0,m.primaryKey),v[":id"]=[c];for(var O=0,A=m.indexes;O<A.length;O++){var x=A[O];b(x.keyPath,0,x)}function M(D){var C,P=D.query.index;return P.isVirtual?r(r({},D),{query:{index:P.lowLevelIndex,range:(C=D.query.range,P=P.keyTail,{type:C.type===1?2:C.type,lower:Bc(C.lower,C.lowerOpen?u.MAX_KEY:u.MIN_KEY,P),lowerOpen:!0,upper:Bc(C.upper,C.upperOpen?u.MIN_KEY:u.MAX_KEY,P),upperOpen:!0})}}):D}return r(r({},d),{schema:r(r({},m),{primaryKey:c,indexes:g,getIndexByKeyPath:function(D){return(D=v[Eu(D)])&&D[0]}}),count:function(D){return d.count(M(D))},query:function(D){return d.query(M(D))},openCursor:function(D){var C=D.query.index,P=C.keyTail,T=C.isVirtual,B=C.keyLength;return T?d.openCursor(M(D)).then(function(F){return F&&R(F)}):d.openCursor(D);function R(F){return Object.create(F,{continue:{value:function(j){j!=null?F.continue(Bc(j,D.reverse?u.MAX_KEY:u.MIN_KEY,P)):D.unique?F.continue(F.key.slice(0,B).concat(D.reverse?u.MIN_KEY:u.MAX_KEY,P)):F.continue()}},continuePrimaryKey:{value:function(j,V){F.continuePrimaryKey(Bc(j,u.MAX_KEY,P),V)}},primaryKey:{get:function(){return F.primaryKey}},key:{get:function(){var j=F.key;return B===1?j[0]:j.slice(0,B)}},value:{get:function(){return F.value}}})}}})}})}};function _p(u,c,d,m){return d=d||{},m=m||"",o(u).forEach(function(v){var g,b,O;p(c,v)?(g=u[v],b=c[v],typeof g=="object"&&typeof b=="object"&&g&&b?(O=ct(g))!==ct(b)?d[m+v]=c[v]:O==="Object"?_p(g,b,d,m+v+"."):g!==b&&(d[m+v]=c[v]):g!==b&&(d[m+v]=c[v])):d[m+v]=void 0}),o(c).forEach(function(v){p(u,v)||(d[m+v]=c[v])}),d}function bp(u,c){return c.type==="delete"?c.keys:c.keys||c.values.map(u.extractKey)}var Hx={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(u){return r(r({},u),{table:function(c){var d=u.table(c),m=d.schema.primaryKey;return r(r({},d),{mutate:function(v){var g=fe.trans,b=g.table(c).hook,O=b.deleting,A=b.creating,x=b.updating;switch(v.type){case"add":if(A.fire===et)break;return g._promise("readwrite",function(){return M(v)},!0);case"put":if(A.fire===et&&x.fire===et)break;return g._promise("readwrite",function(){return M(v)},!0);case"delete":if(O.fire===et)break;return g._promise("readwrite",function(){return M(v)},!0);case"deleteRange":if(O.fire===et)break;return g._promise("readwrite",function(){return function D(C,P,T){return d.query({trans:C,values:!1,query:{index:m,range:P},limit:T}).then(function(B){var R=B.result;return M({type:"delete",keys:R,trans:C}).then(function(F){return 0<F.numFailures?Promise.reject(F.failures[0]):R.length<T?{failures:[],numFailures:0,lastResult:void 0}:D(C,r(r({},P),{lower:R[R.length-1],lowerOpen:!0}),T)})})}(v.trans,v.range,1e4)},!0)}return d.mutate(v);function M(D){var C,P,T,B=fe.trans,R=D.keys||bp(m,D);if(!R)throw new Error("Keys missing");return(D=D.type==="add"||D.type==="put"?r(r({},D),{keys:R}):r({},D)).type!=="delete"&&(D.values=i([],D.values,!0)),D.keys&&(D.keys=i([],D.keys,!0)),C=d,T=R,((P=D).type==="add"?Promise.resolve([]):C.getMany({trans:P.trans,keys:T,cache:"immutable"})).then(function(F){var j=R.map(function(V,q){var Y,ne,J,ie=F[q],te={onerror:null,onsuccess:null};return D.type==="delete"?O.fire.call(te,V,ie,B):D.type==="add"||ie===void 0?(Y=A.fire.call(te,V,D.values[q],B),V==null&&Y!=null&&(D.keys[q]=V=Y,m.outbound||H(D.values[q],m.keyPath,V))):(Y=_p(ie,D.values[q]),(ne=x.fire.call(te,Y,V,ie,B))&&(J=D.values[q],Object.keys(ne).forEach(function(he){p(J,he)?J[he]=ne[he]:H(J,he,ne[he])}))),te});return d.mutate(D).then(function(V){for(var q=V.failures,Y=V.results,ne=V.numFailures,V=V.lastResult,J=0;J<R.length;++J){var ie=(Y||R)[J],te=j[J];ie==null?te.onerror&&te.onerror(q[J]):te.onsuccess&&te.onsuccess(D.type==="put"&&F[J]?D.values[J]:ie)}return{failures:q,results:Y,numFailures:ne,lastResult:V}}).catch(function(V){return j.forEach(function(q){return q.onerror&&q.onerror(V)}),Promise.reject(V)})})}}})}})}};function cw(u,c,d){try{if(!c||c.keys.length<u.length)return null;for(var m=[],v=0,g=0;v<c.keys.length&&g<u.length;++v)je(c.keys[v],u[g])===0&&(m.push(d?Pe(c.values[v]):c.values[v]),++g);return m.length===u.length?m:null}catch{return null}}var Qx={stack:"dbcore",level:-1,create:function(u){return{table:function(c){var d=u.table(c);return r(r({},d),{getMany:function(m){if(!m.cache)return d.getMany(m);var v=cw(m.keys,m.trans._cache,m.cache==="clone");return v?se.resolve(v):d.getMany(m).then(function(g){return m.trans._cache={keys:m.keys,values:m.cache==="clone"?Pe(g):g},g})},mutate:function(m){return m.type!=="add"&&(m.trans._cache=null),d.mutate(m)}})}}}};function fw(u,c){return u.trans.mode==="readonly"&&!!u.subscr&&!u.trans.explicit&&u.trans.db._options.cache!=="disabled"&&!c.schema.primaryKey.outbound}function dw(u,c){switch(u){case"query":return c.values&&!c.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Yx={stack:"dbcore",level:0,name:"Observability",create:function(u){var c=u.schema.name,d=new nn(u.MIN_KEY,u.MAX_KEY);return r(r({},u),{transaction:function(m,v,g){if(fe.subscr&&v!=="readonly")throw new pe.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(fe.querier));return u.transaction(m,v,g)},table:function(m){function v(P){var P=(T=P.query).index,T=T.range;return[P,new nn((P=T.lower)!==null&&P!==void 0?P:u.MIN_KEY,(T=T.upper)!==null&&T!==void 0?T:u.MAX_KEY)]}var g=u.table(m),b=g.schema,O=b.primaryKey,A=O.extractKey,x=O.outbound,M=r(r({},g),{mutate:function(C){function P(te){return te="idb://".concat(c,"/").concat(m,"/").concat(te),j[te]||(j[te]=new nn)}var T,B,R,F=C.trans,j=C.mutatedParts||(C.mutatedParts={}),V=P(""),q=P(":dels"),Y=C.type,ie=C.type==="deleteRange"?[C.range]:C.type==="delete"?[C.keys]:C.values.length<50?[bp(O,C).filter(function(te){return te}),C.values]:[],ne=ie[0],J=ie[1],ie=C.trans._cache;return a(ne)?(V.addKeys(ne),(ie=Y==="delete"||ne.length===J.length?cw(ne,ie):null)||q.addKeys(ne),(ie||J)&&(T=P,B=ie,R=J,b.indexes.forEach(function(te){var he=T(te.name||"");function me(Ce){return Ce!=null?te.extractKey(Ce):null}function He(Ce){return te.multiEntry&&a(Ce)?Ce.forEach(function(nt){return he.addKey(nt)}):he.addKey(Ce)}(B||R).forEach(function(Ce,De){var Wn=B&&me(B[De]),De=R&&me(R[De]);je(Wn,De)!==0&&(Wn!=null&&He(Wn),De!=null&&He(De))})}))):ne?(J={from:ne.lower,to:ne.upper},q.add(J),V.add(J)):(V.add(d),q.add(d),b.indexes.forEach(function(te){return P(te.name).add(d)})),g.mutate(C).then(function(te){return!ne||C.type!=="add"&&C.type!=="put"||V.addKeys(te.results),F.mutatedParts=Mc(F.mutatedParts||{},j),te})}}),D={get:function(C){return[O,new nn(C.key)]},getMany:function(C){return[O,new nn().addKeys(C.keys)]},count:v,query:v,openCursor:v};return o(D).forEach(function(C){M[C]=function(P){var T=fe.subscr,B=!!T,R=fw(fe,g)&&dw(C,P)?P.obsSet={}:T;if(B){var F=function(J){return J="idb://".concat(c,"/").concat(m,"/").concat(J),R[J]||(R[J]=new nn)},j=F(""),V=F(":dels"),T=D[C](P),B=T[0],T=T[1];if((C==="query"&&B.isPrimaryKey&&!P.values?V:F(B.name||"")).add(T),!B.isPrimaryKey){if(C!=="count"){var q=C==="query"&&x&&P.values&&g.query(r(r({},P),{values:!1}));return g[C].apply(this,arguments).then(function(J){if(C==="query"){if(x&&P.values)return q.then(function(me){return me=me.result,j.addKeys(me),J});var ie=P.values?J.result.map(A):J.result;(P.values?j:V).addKeys(ie)}else if(C==="openCursor"){var te=J,he=P.values;return te&&Object.create(te,{key:{get:function(){return V.addKey(te.primaryKey),te.key}},primaryKey:{get:function(){var me=te.primaryKey;return V.addKey(me),me}},value:{get:function(){return he&&j.addKey(te.primaryKey),te.value}}})}return J})}V.add(d)}}return g[C].apply(this,arguments)}}),M}})}};function hw(u,c,d){if(d.numFailures===0)return c;if(c.type==="deleteRange")return null;var m=c.keys?c.keys.length:"values"in c&&c.values?c.values.length:1;return d.numFailures===m?null:(c=r({},c),a(c.keys)&&(c.keys=c.keys.filter(function(v,g){return!(g in d.failures)})),"values"in c&&a(c.values)&&(c.values=c.values.filter(function(v,g){return!(g in d.failures)})),c)}function Sp(u,c){return d=u,((m=c).lower===void 0||(m.lowerOpen?0<je(d,m.lower):0<=je(d,m.lower)))&&(u=u,(c=c).upper===void 0||(c.upperOpen?je(u,c.upper)<0:je(u,c.upper)<=0));var d,m}function pw(u,c,C,m,v,g){if(!C||C.length===0)return u;var b=c.query.index,O=b.multiEntry,A=c.query.range,x=m.schema.primaryKey.extractKey,M=b.extractKey,D=(b.lowLevelIndex||b).extractKey,C=C.reduce(function(P,T){var B=P,R=T.type==="add"||T.type==="put"?T.values.filter(function(q){return q=M(q),O&&a(q)?q.some(function(Y){return Sp(Y,A)}):Sp(q,A)}).map(function(q){return q=Pe(q),g&&Object.freeze(q),q}):[];switch(T.type){case"add":B=P.concat(c.values?R:R.map(function(Y){return x(Y)}));break;case"put":var F=new nn().addKeys(T.values.map(function(Y){return x(Y)})),B=P.filter(function(Y){return Y=c.values?x(Y):Y,!Tc(new nn(Y),F)}).concat(c.values?R:R.map(function(Y){return x(Y)}));break;case"delete":var j=new nn().addKeys(T.keys);B=P.filter(function(Y){return Y=c.values?x(Y):Y,!Tc(new nn(Y),j)});break;case"deleteRange":var V=T.range;B=P.filter(function(Y){return!Sp(x(Y),V)})}return B},u);return C===u?u:(C.sort(function(P,T){return je(D(P),D(T))||je(x(P),x(T))}),c.limit&&c.limit<1/0&&(C.length>c.limit?C.length=c.limit:u.length===c.limit&&C.length<c.limit&&(v.dirty=!0)),g?Object.freeze(C):C)}function mw(u,c){return je(u.lower,c.lower)===0&&je(u.upper,c.upper)===0&&!!u.lowerOpen==!!c.lowerOpen&&!!u.upperOpen==!!c.upperOpen}function Gx(u,c){return function(d,m,v,g){if(d===void 0)return m!==void 0?-1:0;if(m===void 0)return 1;if((m=je(d,m))===0){if(v&&g)return 0;if(v)return 1;if(g)return-1}return m}(u.lower,c.lower,u.lowerOpen,c.lowerOpen)<=0&&0<=function(d,m,v,g){if(d===void 0)return m!==void 0?1:0;if(m===void 0)return-1;if((m=je(d,m))===0){if(v&&g)return 0;if(v)return-1;if(g)return 1}return m}(u.upper,c.upper,u.upperOpen,c.upperOpen)}function Jx(u,c,d,m){u.subscribers.add(d),m.addEventListener("abort",function(){var v,g;u.subscribers.delete(d),u.subscribers.size===0&&(v=u,g=c,setTimeout(function(){v.subscribers.size===0&&G(g,v)},3e3))})}var Xx={stack:"dbcore",level:0,name:"Cache",create:function(u){var c=u.schema.name;return r(r({},u),{transaction:function(d,m,v){var g,b,O=u.transaction(d,m,v);return m==="readwrite"&&(b=(g=new AbortController).signal,v=function(A){return function(){if(g.abort(),m==="readwrite"){for(var x=new Set,M=0,D=d;M<D.length;M++){var C=D[M],P=io["idb://".concat(c,"/").concat(C)];if(P){var T=u.table(C),B=P.optimisticOps.filter(function(me){return me.trans===O});if(O._explicit&&A&&O.mutatedParts)for(var R=0,F=Object.values(P.queries.query);R<F.length;R++)for(var j=0,V=(ne=F[R]).slice();j<V.length;j++)mp((J=V[j]).obsSet,O.mutatedParts)&&(G(ne,J),J.subscribers.forEach(function(me){return x.add(me)}));else if(0<B.length){P.optimisticOps=P.optimisticOps.filter(function(me){return me.trans!==O});for(var q=0,Y=Object.values(P.queries.query);q<Y.length;q++)for(var ne,J,ie,te=0,he=(ne=Y[q]).slice();te<he.length;te++)(J=he[te]).res!=null&&O.mutatedParts&&(A&&!J.dirty?(ie=Object.isFrozen(J.res),ie=pw(J.res,J.req,B,T,J,ie),J.dirty?(G(ne,J),J.subscribers.forEach(function(me){return x.add(me)})):ie!==J.res&&(J.res=ie,J.promise=se.resolve({result:ie}))):(J.dirty&&G(ne,J),J.subscribers.forEach(function(me){return x.add(me)})))}}}x.forEach(function(me){return me()})}}},O.addEventListener("abort",v(!1),{signal:b}),O.addEventListener("error",v(!1),{signal:b}),O.addEventListener("complete",v(!0),{signal:b})),O},table:function(d){var m=u.table(d),v=m.schema.primaryKey;return r(r({},m),{mutate:function(g){var b=fe.trans;if(v.outbound||b.db._options.cache==="disabled"||b.explicit)return m.mutate(g);var O=io["idb://".concat(c,"/").concat(d)];return O?(b=m.mutate(g),g.type!=="add"&&g.type!=="put"||!(50<=g.values.length||bp(v,g).some(function(A){return A==null}))?(O.optimisticOps.push(g),g.mutatedParts&&Nc(g.mutatedParts),b.then(function(A){0<A.numFailures&&(G(O.optimisticOps,g),(A=hw(0,g,A))&&O.optimisticOps.push(A),g.mutatedParts&&Nc(g.mutatedParts))}),b.catch(function(){G(O.optimisticOps,g),g.mutatedParts&&Nc(g.mutatedParts)})):b.then(function(A){var x=hw(0,r(r({},g),{values:g.values.map(function(P,D){var C,P=(C=v.keyPath)!==null&&C!==void 0&&C.includes(".")?Pe(P):r({},P);return H(P,v.keyPath,A.results[D]),P})}),A);O.optimisticOps.push(x),queueMicrotask(function(){return g.mutatedParts&&Nc(g.mutatedParts)})}),b):m.mutate(g)},query:function(g){if(!fw(fe,m)||!dw("query",g))return m.query(g);var b=((x=fe.trans)===null||x===void 0?void 0:x.db._options.cache)==="immutable",D=fe,O=D.requery,A=D.signal,x=function(T,B,R,F){var j=io["idb://".concat(T,"/").concat(B)];if(!j)return[];if(!(B=j.queries[R]))return[null,!1,j,null];var V=B[(F.query?F.query.index.name:null)||""];if(!V)return[null,!1,j,null];switch(R){case"query":var q=V.find(function(Y){return Y.req.limit===F.limit&&Y.req.values===F.values&&mw(Y.req.query.range,F.query.range)});return q?[q,!0,j,V]:[V.find(function(Y){return("limit"in Y.req?Y.req.limit:1/0)>=F.limit&&(!F.values||Y.req.values)&&Gx(Y.req.query.range,F.query.range)}),!1,j,V];case"count":return q=V.find(function(Y){return mw(Y.req.query.range,F.query.range)}),[q,!!q,j,V]}}(c,d,"query",g),M=x[0],D=x[1],C=x[2],P=x[3];return M&&D?M.obsSet=g.obsSet:(D=m.query(g).then(function(T){var B=T.result;if(M&&(M.res=B),b){for(var R=0,F=B.length;R<F;++R)Object.freeze(B[R]);Object.freeze(B)}else T.result=Pe(B);return T}).catch(function(T){return P&&M&&G(P,M),Promise.reject(T)}),M={obsSet:g.obsSet,promise:D,subscribers:new Set,type:"query",req:g,dirty:!1},P?P.push(M):(P=[M],(C=C||(io["idb://".concat(c,"/").concat(d)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[g.query.index.name||""]=P)),Jx(M,P,O,A),M.promise.then(function(T){return{result:pw(T.result,g,C==null?void 0:C.optimisticOps,m,M,b)}})}})}})}};function Fc(u,c){return new Proxy(u,{get:function(d,m,v){return m==="db"?c:Reflect.get(d,m,v)}})}var yi=(Rt.prototype.version=function(u){if(isNaN(u)||u<.1)throw new pe.Type("Given version is not a positive number");if(u=Math.round(10*u)/10,this.idbdb||this._state.isBeingOpened)throw new pe.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,u);var c=this._versions,d=c.filter(function(m){return m._cfg.version===u})[0];return d||(d=new this.Version(u),c.push(d),c.sort(Ux),d.stores({}),this._state.autoSchema=!1,d)},Rt.prototype._whenReady=function(u){var c=this;return this.idbdb&&(this._state.openComplete||fe.letThrough||this._vip)?u():new se(function(d,m){if(c._state.openComplete)return m(new pe.DatabaseClosed(c._state.dbOpenError));if(!c._state.isBeingOpened){if(!c._state.autoOpen)return void m(new pe.DatabaseClosed);c.open().catch(et)}c._state.dbReadyPromise.then(d,m)}).then(u)},Rt.prototype.use=function(u){var c=u.stack,d=u.create,m=u.level,v=u.name;return v&&this.unuse({stack:c,name:v}),u=this._middlewares[c]||(this._middlewares[c]=[]),u.push({stack:c,create:d,level:m??10,name:v}),u.sort(function(g,b){return g.level-b.level}),this},Rt.prototype.unuse=function(u){var c=u.stack,d=u.name,m=u.create;return c&&this._middlewares[c]&&(this._middlewares[c]=this._middlewares[c].filter(function(v){return m?v.create!==m:!!d&&v.name!==d})),this},Rt.prototype.open=function(){var u=this;return to(Zi,function(){return Wx(u)})},Rt.prototype._close=function(){var u=this._state,c=Yo.indexOf(this);if(0<=c&&Yo.splice(c,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}u.isBeingOpened||(u.dbReadyPromise=new se(function(d){u.dbReadyResolve=d}),u.openCanceller=new se(function(d,m){u.cancelOpen=m}))},Rt.prototype.close=function(d){var c=(d===void 0?{disableAutoOpen:!0}:d).disableAutoOpen,d=this._state;c?(d.isBeingOpened&&d.cancelOpen(new pe.DatabaseClosed),this._close(),d.autoOpen=!1,d.dbOpenError=new pe.DatabaseClosed):(this._close(),d.autoOpen=this._options.autoOpen||d.isBeingOpened,d.openComplete=!1,d.dbOpenError=null)},Rt.prototype.delete=function(u){var c=this;u===void 0&&(u={disableAutoOpen:!0});var d=0<arguments.length&&typeof arguments[0]!="object",m=this._state;return new se(function(v,g){function b(){c.close(u);var O=c._deps.indexedDB.deleteDatabase(c.name);O.onsuccess=vt(function(){var A,x,M;A=c._deps,x=c.name,M=A.indexedDB,A=A.IDBKeyRange,fp(M)||x===Sc||cp(M,A).delete(x).catch(et),v()}),O.onerror=Kr(g),O.onblocked=c._fireOnBlocked}if(d)throw new pe.InvalidArgument("Invalid closeOptions argument to db.delete()");m.isBeingOpened?m.dbReadyPromise.then(b):b()})},Rt.prototype.backendDB=function(){return this.idbdb},Rt.prototype.isOpen=function(){return this.idbdb!==null},Rt.prototype.hasBeenClosed=function(){var u=this._state.dbOpenError;return u&&u.name==="DatabaseClosed"},Rt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Rt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Rt.prototype,"tables",{get:function(){var u=this;return o(this._allTables).map(function(c){return u._allTables[c]})},enumerable:!1,configurable:!0}),Rt.prototype.transaction=function(){var u=(function(c,d,m){var v=arguments.length;if(v<2)throw new pe.InvalidArgument("Too few arguments");for(var g=new Array(v-1);--v;)g[v-1]=arguments[v];return m=g.pop(),[c,ee(g),m]}).apply(this,arguments);return this._transaction.apply(this,u)},Rt.prototype._transaction=function(u,c,d){var m=this,v=fe.trans;v&&v.db===this&&u.indexOf("!")===-1||(v=null);var g,b,O=u.indexOf("?")!==-1;u=u.replace("!","").replace("?","");try{if(b=c.map(function(x){if(x=x instanceof m.Table?x.name:x,typeof x!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return x}),u=="r"||u===Xh)g=Xh;else{if(u!="rw"&&u!=Zh)throw new pe.InvalidArgument("Invalid transaction mode: "+u);g=Zh}if(v){if(v.mode===Xh&&g===Zh){if(!O)throw new pe.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");v=null}v&&b.forEach(function(x){if(v&&v.storeNames.indexOf(x)===-1){if(!O)throw new pe.SubTransaction("Table "+x+" not included in parent transaction.");v=null}}),O&&v&&!v.active&&(v=null)}}catch(x){return v?v._promise(null,function(M,D){D(x)}):Pt(x)}var A=(function x(M,D,C,P,T){return se.resolve().then(function(){var B=fe.transless||fe,R=M._createTransaction(D,C,M._dbSchema,P);if(R.explicit=!0,B={trans:R,transless:B},P)R.idbtrans=P.idbtrans;else try{R.create(),R.idbtrans._explicit=!0,M._state.PR1398_maxLoop=3}catch(V){return V.name===Xi.InvalidState&&M.isOpen()&&0<--M._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),M.close({disableAutoOpen:!1}),M.open().then(function(){return x(M,D,C,null,T)})):Pt(V)}var F,j=Re(T);return j&&Qo(),B=se.follow(function(){var V;(F=T.call(R,R))&&(j?(V=ts.bind(null,null),F.then(V,V)):typeof F.next=="function"&&typeof F.throw=="function"&&(F=wp(F)))},B),(F&&typeof F.then=="function"?se.resolve(F).then(function(V){return R.active?V:Pt(new pe.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):B.then(function(){return F})).then(function(V){return P&&R._resolve(),R._completion.then(function(){return V})}).catch(function(V){return R._reject(V),Pt(V)})})}).bind(null,this,g,b,v,d);return v?v._promise(g,A,"lock"):fe.trans?to(fe.transless,function(){return m._whenReady(A)}):this._whenReady(A)},Rt.prototype.table=function(u){if(!p(this._allTables,u))throw new pe.InvalidTable("Table ".concat(u," does not exist"));return this._allTables[u]},Rt);function Rt(u,c){var d=this;this._middlewares={},this.verno=0;var m=Rt.dependencies;this._options=c=r({addons:Rt.addons,autoOpen:!0,indexedDB:m.indexedDB,IDBKeyRange:m.IDBKeyRange,cache:"cloned"},c),this._deps={indexedDB:c.indexedDB,IDBKeyRange:c.IDBKeyRange},m=c.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var v,g,b,O,A,x={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:et,dbReadyPromise:null,cancelOpen:et,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:c.autoOpen};x.dbReadyPromise=new se(function(D){x.dbReadyResolve=D}),x.openCanceller=new se(function(D,C){x.cancelOpen=C}),this._state=x,this.name=u,this.on=wu(this,"populate","blocked","versionchange","close",{ready:[Vh,et]}),this.on.ready.subscribe=k(this.on.ready.subscribe,function(D){return function(C,P){Rt.vip(function(){var T,B=d._state;B.openComplete?(B.dbOpenError||se.resolve().then(C),P&&D(C)):B.onReadyBeingFired?(B.onReadyBeingFired.push(C),P&&D(C)):(D(C),T=d,P||D(function R(){T.on.ready.unsubscribe(C),T.on.ready.unsubscribe(R)}))})}}),this.Collection=(v=this,_u(Mx.prototype,function(F,R){this.db=v;var P=Q0,T=null;if(R)try{P=R()}catch(j){T=j}var B=F._ctx,R=B.table,F=R.hook.reading.fire;this._ctx={table:R,index:B.index,isPrimKey:!B.index||R.schema.primKey.keyPath&&B.index===R.schema.primKey.name,range:P,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:T,or:B.or,valueMapper:F!==hu?F:null}})),this.Table=(g=this,_u(X0.prototype,function(D,C,P){this.db=g,this._tx=P,this.name=D,this.schema=C,this.hook=g._allTables[D]?g._allTables[D].hook:wu(null,{creating:[Ox,et],reading:[Ex,hu],updating:[Dx,et],deleting:[kx,et]})})),this.Transaction=(b=this,_u(Fx.prototype,function(D,C,P,T,B){var R=this;this.db=b,this.mode=D,this.storeNames=C,this.schema=P,this.chromeTransactionDurability=T,this.idbtrans=null,this.on=wu(this,"complete","error","abort"),this.parent=B||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new se(function(F,j){R._resolve=F,R._reject=j}),this._completion.then(function(){R.active=!1,R.on.complete.fire()},function(F){var j=R.active;return R.active=!1,R.on.error.fire(F),R.parent?R.parent._reject(F):j&&R.idbtrans&&R.idbtrans.abort(),Pt(F)})})),this.Version=(O=this,_u(Kx.prototype,function(D){this.db=O,this._cfg={version:D,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(A=this,_u(nw.prototype,function(D,C,P){if(this.db=A,this._ctx={table:D,index:C===":id"?null:C,or:P},this._cmp=this._ascending=je,this._descending=function(T,B){return je(B,T)},this._max=function(T,B){return 0<je(T,B)?T:B},this._min=function(T,B){return je(T,B)<0?T:B},this._IDBKeyRange=A._deps.IDBKeyRange,!this._IDBKeyRange)throw new pe.MissingAPI})),this.on("versionchange",function(D){0<D.newVersion?console.warn("Another connection wants to upgrade database '".concat(d.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(d.name,"'. Closing db now to resume the delete request.")),d.close({disableAutoOpen:!1})}),this.on("blocked",function(D){!D.newVersion||D.newVersion<D.oldVersion?console.warn("Dexie.delete('".concat(d.name,"') was blocked")):console.warn("Upgrade '".concat(d.name,"' blocked by other connection holding version ").concat(D.oldVersion/10))}),this._maxKey=Iu(c.IDBKeyRange),this._createTransaction=function(D,C,P,T){return new d.Transaction(D,C,P,d._options.chromeTransactionDurability,T)},this._fireOnBlocked=function(D){d.on("blocked").fire(D),Yo.filter(function(C){return C.name===d.name&&C!==d&&!C._state.vcFired}).map(function(C){return C.on("versionchange").fire(D)})},this.use(Qx),this.use(Xx),this.use(Yx),this.use(qx),this.use(Hx);var M=new Proxy(this,{get:function(D,C,P){if(C==="_vip")return!0;if(C==="table")return function(B){return Fc(d.table(B),M)};var T=Reflect.get(D,C,P);return T instanceof X0?Fc(T,M):C==="tables"?T.map(function(B){return Fc(B,M)}):C==="_createTransaction"?function(){return Fc(T.apply(this,arguments),M)}:T}});this.vip=M,m.forEach(function(D){return D(d)})}var Lc,cr=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Zx=(Ip.prototype.subscribe=function(u,c,d){return this._subscribe(u&&typeof u!="function"?u:{next:u,error:c,complete:d})},Ip.prototype[cr]=function(){return this},Ip);function Ip(u){this._subscribe=u}try{Lc={indexedDB:s.indexedDB||s.mozIndexedDB||s.webkitIndexedDB||s.msIndexedDB,IDBKeyRange:s.IDBKeyRange||s.webkitIDBKeyRange}}catch{Lc={indexedDB:null,IDBKeyRange:null}}function yw(u){var c,d=!1,m=new Zx(function(v){var g=Re(u),b,O=!1,A={},x={},M={get closed(){return O},unsubscribe:function(){O||(O=!0,b&&b.abort(),D&&is.storagemutated.unsubscribe(P))}};v.start&&v.start(M);var D=!1,C=function(){return Jh(T)},P=function(B){Mc(A,B),mp(x,A)&&C()},T=function(){var B,R,F;!O&&Lc.indexedDB&&(A={},B={},b&&b.abort(),b=new AbortController,F=function(j){var V=qo();try{g&&Qo();var q=es(u,j);return q=g?q.finally(ts):q}finally{V&&Ho()}}(R={subscr:B,signal:b.signal,requery:C,querier:u,trans:null}),Promise.resolve(F).then(function(j){d=!0,c=j,O||R.signal.aborted||(A={},function(V){for(var q in V)if(p(V,q))return;return 1}(x=B)||D||(is(Su,P),D=!0),Jh(function(){return!O&&v.next&&v.next(j)}))},function(j){d=!1,["DatabaseClosedError","AbortError"].includes(j==null?void 0:j.name)||O||Jh(function(){O||v.error&&v.error(j)})}))};return setTimeout(C,0),M});return m.hasValue=function(){return d},m.getValue=function(){return c},m}var so=yi;function Ep(u){var c=ss;try{ss=!0,is.storagemutated.fire(u),gp(u,!0)}finally{ss=c}}y(so,r(r({},hc),{delete:function(u){return new so(u,{addons:[]}).delete()},exists:function(u){return new so(u,{addons:[]}).open().then(function(c){return c.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(u){try{return c=so.dependencies,d=c.indexedDB,c=c.IDBKeyRange,(fp(d)?Promise.resolve(d.databases()).then(function(m){return m.map(function(v){return v.name}).filter(function(v){return v!==Sc})}):cp(d,c).toCollection().primaryKeys()).then(u)}catch{return Pt(new pe.MissingAPI)}var c,d},defineClass:function(){return function(u){l(this,u)}},ignoreTransaction:function(u){return fe.trans?to(fe.transless,u):u()},vip:dp,async:function(u){return function(){try{var c=wp(u.apply(this,arguments));return c&&typeof c.then=="function"?c:se.resolve(c)}catch(d){return Pt(d)}}},spawn:function(u,c,d){try{var m=wp(u.apply(d,c||[]));return m&&typeof m.then=="function"?m:se.resolve(m)}catch(v){return Pt(v)}},currentTransaction:{get:function(){return fe.trans||null}},waitFor:function(u,c){return c=se.resolve(typeof u=="function"?so.ignoreTransaction(u):u).timeout(c||6e4),fe.trans?fe.trans.waitFor(c):c},Promise:se,debug:{get:function(){return zr},set:function(u){U0(u)}},derive:E,extend:l,props:y,override:k,Events:wu,on:is,liveQuery:yw,extendObservabilitySet:Mc,getByKeyPath:Q,setByKeyPath:H,delByKeyPath:function(u,c){typeof c=="string"?H(u,c,void 0):"length"in c&&[].map.call(c,function(d){H(u,d,void 0)})},shallowClone:X,deepClone:Pe,getObjectDiff:_p,cmp:je,asap:W,minKey:-1/0,addons:[],connections:Yo,errnames:Xi,dependencies:Lc,cache:io,semVer:Vr,version:Vr.split(".").map(function(u){return parseInt(u)}).reduce(function(u,c,d){return u+c/Math.pow(10,2*d)})})),so.maxKey=Iu(so.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(is(Su,function(u){ss||(u=new CustomEvent(rp,{detail:u}),ss=!0,dispatchEvent(u),ss=!1)}),addEventListener(rp,function(u){u=u.detail,ss||Ep(u)}));var Xo,ss=!1,vw=function(){};return typeof BroadcastChannel<"u"&&((vw=function(){(Xo=new BroadcastChannel(rp)).onmessage=function(u){return u.data&&Ep(u.data)}})(),typeof Xo.unref=="function"&&Xo.unref(),is(Su,function(u){ss||Xo.postMessage(u)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(u){if(!yi.disableBfCache&&u.persisted){zr&&console.debug("Dexie: handling persisted pagehide"),Xo!=null&&Xo.close();for(var c=0,d=Yo;c<d.length;c++)d[c].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(u){!yi.disableBfCache&&u.persisted&&(zr&&console.debug("Dexie: handling persisted pageshow"),vw(),Ep({all:new nn(-1/0,[[]])}))})),se.rejectionMapper=function(u,c){return!u||u instanceof ft||u instanceof TypeError||u instanceof SyntaxError||!u.name||!j0[u.name]?u:(c=new j0[u.name](c||u.message,u),"stack"in u&&I(c,"stack",{get:function(){return this.inner.stack}}),c)},U0(zr),r(yi,Object.freeze({__proto__:null,Dexie:yi,liveQuery:yw,Entity:Y0,cmp:je,default:yi,RangeSet:nn,mergeRanges:ku,rangesOverlap:Tc}),{default:yi}),yi})})(jO);var YB=jO.exports;const Qy=rh(YB),Cb=Symbol.for("Dexie"),Yy=globalThis[Cb]||(globalThis[Cb]=Qy);if(Qy.semVer!==Yy.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Qy.semVer} and ${Yy.semVer}`);var Od="docs",GB="changes",Ab="attachments",UO="dexie",Pb=new Map,Mf=new Map;function JB(t,e,n,r){var i="rxdb-dexie-"+t+"--"+r.version+"--"+e,s=Br(Pb,i,()=>{var o=(async()=>{var a=$e(n);a.autoOpen=!1;var l=new Yy(i,a),f={[Od]:eF(r),[GB]:"++sequence, id",[Ab]:"id"};return l.version(1).stores(f),await l.open(),{dexieDb:l,dexieTable:l[Od],dexieAttachmentsTable:l[Ab],booleanIndexes:tF(r)}})();return Pb.set(i,s),Mf.set(s,0),o});return s}async function XB(t){var e=await t,n=Mf.get(t),r=n-1;r===0?(e.dexieDb.close(),Mf.delete(t)):Mf.set(t,r)}var Gy="__";function nc(t){var e=t.split(".");if(e.length>1)return e.map(r=>nc(r)).join(".");if(t.startsWith("|")){var n=t.substring(1);return Gy+n}else return t}function zO(t){var e=t.split(".");if(e.length>1)return e.map(r=>zO(r)).join(".");if(t.startsWith(Gy)){var n=t.substring(Gy.length);return"|"+n}else return t}function ZB(t,e){return e&&(e=$e(e),e=Jy(e),t.forEach(n=>{var r=Ts(e,n),i=r?"1":"0";rE(e,n,i)}),e)}function VO(t,e){return e&&(e=$e(e),e=Xy(e),t.forEach(n=>{var r=Ts(e,n),i=r==="1";rE(e,n,i)}),e)}function Jy(t){if(!t||typeof t=="string"||typeof t=="number"||typeof t=="boolean")return t;if(Array.isArray(t))return t.map(n=>Jy(n));if(typeof t=="object"){var e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="object"&&(r=Jy(r)),e[nc(n)]=r}),e}}function Xy(t){if(!t||typeof t=="string"||typeof t=="number"||typeof t=="boolean")return t;if(Array.isArray(t))return t.map(n=>Xy(n));if(typeof t=="object"){var e={};return Object.entries(t).forEach(([n,r])=>{(typeof r=="object"||Array.isArray(t))&&(r=Xy(r)),e[zO(n)]=r}),e}}function eF(t){var e=[],n=$n(t.primaryKey);e.push([n]),e.push(["_deleted",n]),t.indexes&&t.indexes.forEach(s=>{var o=ja(s);e.push(o)}),e.push(["_meta.lwt",n]),e.push(["_meta.lwt"]),e=e.map(s=>s.map(o=>nc(o)));var r=e.map(s=>s.length===1?s[0]:"["+s.join("+")+"]");r=r.filter((s,o,a)=>a.indexOf(s)===o);var i=r.join(", ");return i}async function Rb(t,e){var n=await t,r=await n.dexieTable.bulkGet(e);return r.map(i=>VO(n.booleanIndexes,i))}function of(t,e){return t+"||"+e}function tF(t){var e=new Set,n=[];return t.indexes?(t.indexes.forEach(r=>{var i=ja(r);i.forEach(s=>{if(!e.has(s)){e.add(s);var o=zi(t,s);o.type==="boolean"&&n.push(s)}})}),n.push("_deleted"),RP(n)):n}function Tb(t){return t===ci?-1/0:t}function Mb(t,e,n){if(t.includes(e)){var r=n===Tr||n===!0?"1":"0";return r}else return n}function KO(t,e,n){if(!n){if(typeof window>"u")throw new Error("IDBKeyRange missing");n=window.IDBKeyRange}var r=e.startKeys.map((o,a)=>{var l=e.index[a];return Mb(t,l,o)}).map(Tb),i=e.endKeys.map((o,a)=>{var l=e.index[a];return Mb(t,l,o)}).map(Tb),s=n.bound(r,i,!e.inclusiveStart,!e.inclusiveEnd);return s}async function Nb(t,e){var n=await t.internals,r=e.query,i=r.skip?r.skip:0,s=r.limit?r.limit:1/0,o=i+s,a=e.queryPlan,l=!1;a.selectorSatisfiedByIndex||(l=Oh(t.schema,e.query));var f=KO(n.booleanIndexes,a,n.dexieDb._options.IDBKeyRange),h=a.index,p=[];if(await n.dexieDb.transaction("r",n.dexieTable,async w=>{var I=w.idbtrans,E=I.objectStore(Od),$,S;S="["+h.map(k=>nc(k)).join("+")+"]",$=E.index(S);var _=$.openCursor(f);await new Promise(k=>{_.onsuccess=function(z){var W=z.target.result;if(W){var Q=VO(n.booleanIndexes,W.value);(!l||l(Q))&&p.push(Q),a.sortSatisfiedByIndex&&p.length===o?k():W.continue()}else k()}})}),!a.sortSatisfiedByIndex){var y=$g(t.schema,e.query);p=p.sort(y)}return p=p.slice(i,o),{documents:p}}async function nF(t,e){var n=await t.internals,r=e.queryPlan,i=r.index,s=KO(n.booleanIndexes,r,n.dexieDb._options.IDBKeyRange),o=-1;return await n.dexieDb.transaction("r",n.dexieTable,async a=>{var l=a.idbtrans,f=l.objectStore(Od),h,p;p="["+i.map(w=>nc(w)).join("+")+"]",h=f.index(p);var y=h.count(s);o=await new Promise((w,I)=>{y.onsuccess=function(){w(y.result)},y.onerror=E=>I(E)})}),o}var rF=Ft(),iF=function(){function t(n,r,i,s,o,a,l){this.changes$=new Kt,this.instanceId=rF++,this.storage=n,this.databaseName=r,this.collectionName=i,this.schema=s,this.internals=o,this.options=a,this.settings=l,this.primaryPath=$n(this.schema.primaryKey)}var e=t.prototype;return e.bulkWrite=async function(r,i){uo(this),r.forEach(h=>{if(!h.document._rev||h.previous&&!h.previous._rev)throw le("SNH",{args:{row:h}})});var s=await this.internals,o={success:[],error:[]},a=r.map(h=>h.document[this.primaryPath]),l;if(await s.dexieDb.transaction("rw",s.dexieTable,s.dexieAttachmentsTable,async()=>{var h=new Map,p=await Rb(this.internals,a);p.forEach(I=>{var E=I;return E&&h.set(E[this.primaryPath],E),E}),l=sO(this,this.primaryPath,h,r,i),o.error=l.errors;var y=[];l.bulkInsertDocs.forEach(I=>{o.success.push(I.document),y.push(I.document)}),l.bulkUpdateDocs.forEach(I=>{o.success.push(I.document),y.push(I.document)}),y=y.map(I=>ZB(s.booleanIndexes,I)),y.length>0&&await s.dexieTable.bulkPut(y);var w=[];l.attachmentsAdd.forEach(I=>{w.push({id:of(I.documentId,I.attachmentId),data:I.attachmentData.data})}),l.attachmentsUpdate.forEach(I=>{w.push({id:of(I.documentId,I.attachmentId),data:I.attachmentData.data})}),await s.dexieAttachmentsTable.bulkPut(w),await s.dexieAttachmentsTable.bulkDelete(l.attachmentsRemove.map(I=>of(I.documentId,I.attachmentId)))}),l=ye(l),l.eventBulk.events.length>0){var f=ye(l.newestRow).document;l.eventBulk.checkpoint={id:f[this.primaryPath],lwt:f._meta.lwt},l.eventBulk.endTime=Ft(),this.changes$.next(l.eventBulk)}return o},e.findDocumentsById=async function(r,i){uo(this);var s=await this.internals,o=[];return await s.dexieDb.transaction("r",s.dexieTable,async()=>{var a=await Rb(this.internals,r);a.forEach(l=>{l&&(!l._deleted||i)&&o.push(l)})}),o},e.query=function(r){return uo(this),Nb(this,r)},e.count=async function(r){if(r.queryPlan.selectorSatisfiedByIndex){var i=await nF(this,r);return{count:i,mode:"fast"}}else{var s=await Nb(this,r);return{count:s.documents.length,mode:"slow"}}},e.changeStream=function(){return uo(this),this.changes$.asObservable()},e.cleanup=async function(r){uo(this);var i=await this.internals;return await i.dexieDb.transaction("rw",i.dexieTable,async()=>{var s=Ft()-r,o=await i.dexieTable.where("_meta.lwt").below(s).toArray(),a=[];o.forEach(l=>{l._deleted==="1"&&a.push(l[this.primaryPath])}),await i.dexieTable.bulkDelete(a)}),!0},e.getAttachmentData=async function(r,i,s){uo(this);var o=await this.internals,a=of(r,i);return await o.dexieDb.transaction("r",o.dexieAttachmentsTable,async()=>{var l=await o.dexieAttachmentsTable.get(a);if(l)return l.data;throw new Error("attachment missing documentId: "+r+" attachmentId: "+i)})},e.remove=async function(){uo(this);var r=await this.internals;return await r.dexieTable.clear(),this.close()},e.close=function(){return this.closed?this.closed:(this.closed=(async()=>{this.changes$.complete(),await XB(this.internals)})(),this.closed)},e.conflictResultionTasks=function(){return new Kt},e.resolveConflictResultionTask=async function(r){},t}();async function sF(t,e,n){var r=JB(e.databaseName,e.collectionName,n,e.schema),i=new iF(t,e.databaseName,e.collectionName,e.schema,r,e.options,n);return await FB(UO,e,i),Promise.resolve(i)}function uo(t){if(t.closed)throw new Error("RxStorageInstanceDexie is closed "+t.databaseName+"-"+t.collectionName)}var oF=function(){function t(n){this.name=UO,this.rxdbVersion=wg,this.settings=n}var e=t.prototype;return e.createStorageInstance=function(r){return oO(r),sF(this,r,this.settings)},t}();function aF(t={}){var e=new oF(t);return e}function uF(t,e,n,r,i){for(var s=i+1;r<=i;){var o=r+i>>>1,a=t[o],l=n!==void 0?n(a,e):a-e;l>=0?(s=o,i=o-1):r=o+1}return s}function lF(t,e,n,r,i){for(var s=i+1;r<=i;){var o=r+i>>>1,a=t[o],l=n!==void 0?n(a,e):a-e;l>0?(s=o,i=o-1):r=o+1}return s}function cF(t,e,n,r,i){for(var s=r-1;r<=i;){var o=r+i>>>1,a=t[o],l=n!==void 0?n(a,e):a-e;l<0?(s=o,r=o+1):i=o-1}return s}function fF(t,e,n,r,i){for(var s=r-1;r<=i;){var o=r+i>>>1,a=t[o],l=n!==void 0?n(a,e):a-e;l<=0?(s=o,r=o+1):i=o-1}return s}function dF(t,e,n,r,i){for(;r<=i;){var s=r+i>>>1,o=t[s],a=n!==void 0?n(o,e):o-e;if(a===0)return s;a<=0?r=s+1:i=s-1}return-1}function rc(t,e,n,r,i,s){return typeof n=="function"?s(t,e,n,r===void 0?0:r|0,i===void 0?t.length-1:i|0):s(t,e,void 0,n===void 0?0:n|0,r===void 0?t.length-1:r|0)}function hF(t,e,n,r,i){return rc(t,e,n,r,i,uF)}function Bb(t,e,n,r,i){return rc(t,e,n,r,i,lF)}function pF(t,e,n,r,i){return rc(t,e,n,r,i,cF)}function mF(t,e,n,r,i){return rc(t,e,n,r,i,fF)}function WO(t,e,n,r,i){return rc(t,e,n,r,i,dF)}function qO(t,e,n){return[t,e,n].join("--memory--")}function af(t){if(t.internals.removed)throw new Error("removed")}function uf(t,e){return t+"||"+e}function yF(t,e){return t.indexString<e.indexString?-1:1}function Fb(t,e,n,r,i){var s=r.document;e.documents.set(t,s);for(var o=0;o<n.length;++o){var a=n[o],l=a.docsWithIndex,f=a.getIndexableString,h=f(s),p=FE(l,{id:t,doc:s,indexString:h},yF,0);if(i){var y=f(i);if(y===h){var w=l[p-1];if(w&&w.id===t)l.splice(p-1,1);else{var I=l[p+1];if(I.id===t)l.splice(p+1,1);else throw le("SNH",{args:{row:r,byIndex:a}})}}else{var E=WO(l,{indexString:y},rl);l.splice(E,1)}}}}function vF(t,e,n,r){var i=r[t];n.documents.delete(i),Object.values(n.byIndex).forEach(s=>{var o=s.docsWithIndex,a=s.getIndexableString(r),l=WO(o,{indexString:a},rl);o.splice(l,1)})}function rl(t,e){var n=t.indexString,r=e.indexString;return n<r?-1:n===r?0:1}function gF(t,e){var n=$n(e.primaryKey),r=e.indexes?e.indexes.map(i=>ja(i)):[];r.push(["_deleted","_meta.lwt",n]),r.forEach(i=>{t.byIndex[Zy(i)]={index:i,docsWithIndex:[],getIndexableString:$B(e,i)}})}function Zy(t){return t.join(",")}var Lb=new Set,wF=function(){function t(n,r,i,s,o,a,l){this.closed=!1,this.storage=n,this.databaseName=r,this.collectionName=i,this.schema=s,this.internals=o,this.options=a,this.settings=l,Lb.add(this),this.primaryPath=$n(this.schema.primaryKey)}var e=t.prototype;return e.bulkWrite=function(r,i){this.ensurePersistence(),af(this);for(var s=this.internals,o=this.internals.documents,a=this.primaryPath,l=sO(this,a,o,r,i),f=l.errors,h=new Array(l.bulkInsertDocs.length),p=l.bulkInsertDocs,y=0;y<p.length;++y){var w=p[y],I=w.document;h[y]=I}for(var E=l.bulkUpdateDocs,$=0;$<E.length;++$){var S=E[$],_=S.document;h.push(_)}if(this.internals.ensurePersistenceTask=l,this.internals.ensurePersistenceIdlePromise||(this.internals.ensurePersistenceIdlePromise=gg().then(()=>{this.internals.ensurePersistenceIdlePromise=void 0,this.ensurePersistence()})),l.eventBulk.events.length>0){var k=ye(l.newestRow).document;l.eventBulk.checkpoint={id:k[a],lwt:k._meta.lwt},l.eventBulk.endTime=Ft(),dd.then(()=>{s.changes$.next(l.eventBulk)})}var z=Promise.resolve({success:h,error:f});return z},e.ensurePersistence=function(){if(this.internals.ensurePersistenceTask){var r=this.internals,i=this.internals.documents,s=this.primaryPath,o=this.internals.ensurePersistenceTask;this.internals.ensurePersistenceTask=void 0;for(var a=Object.values(this.internals.byIndex),l=o.bulkInsertDocs,f=0;f<l.length;++f){var h=l[f],p=h.document,y=p[s];Fb(y,r,a,h,void 0)}for(var w=o.bulkUpdateDocs,I=0;I<w.length;++I){var E=w[I],$=E.document,S=$[s];Fb(S,r,a,E,i.get(S))}if(this.schema.attachments){var _=r.attachments;o.attachmentsAdd.forEach(k=>{_.set(uf(k.documentId,k.attachmentId),{writeData:k.attachmentData,digest:k.digest})}),this.schema.attachments&&(o.attachmentsUpdate.forEach(k=>{_.set(uf(k.documentId,k.attachmentId),{writeData:k.attachmentData,digest:k.digest})}),o.attachmentsRemove.forEach(k=>{_.delete(uf(k.documentId,k.attachmentId))}))}}},e.findDocumentsById=function(r,i){this.ensurePersistence();var s=this.internals.documents,o=[];if(s.size===0)return Promise.resolve(o);for(var a=0;a<r.length;++a){var l=r[a],f=s.get(l);f&&(!f._deleted||i)&&o.push(f)}return Promise.resolve(o)},e.query=function(r){this.ensurePersistence();var i=r.queryPlan,s=r.query,o=s.skip?s.skip:0,a=s.limit?s.limit:1/0,l=o+a,f=!1;i.selectorSatisfiedByIndex||(f=Oh(this.schema,r.query));var h=i.index,p=!i.sortSatisfiedByIndex,y=h,w=i.startKeys,I=vb(this.schema,y,w),E=i.endKeys;E=E;var $=jB(this.schema,y,E),S=Zy(y);if(!this.internals.byIndex[S])throw new Error("index does not exist "+S);for(var _=this.internals.byIndex[S].docsWithIndex,k=(i.inclusiveStart?hF:Bb)(_,{indexString:I},rl),z=(i.inclusiveEnd?mF:pF)(_,{indexString:$},rl),W=[],Q=!1;!Q;){var H=_[k];if(!H||k>z)break;var X=H.doc;(!f||f(X))&&W.push(X),W.length>=l&&!p&&(Q=!0),k++}if(p){var U=$g(this.schema,r.query);W=W.sort(U)}return W=W.slice(o,l),Promise.resolve({documents:W})},e.count=async function(r){this.ensurePersistence();var i=await this.query(r);return{count:i.documents.length,mode:"fast"}},e.cleanup=function(r){this.ensurePersistence();for(var i=Ft()-r,s=["_deleted","_meta.lwt",this.primaryPath],o=Zy(s),a=this.internals.byIndex[o].docsWithIndex,l=vb(this.schema,s,[!0,0,""]),f=Bb(a,{indexString:l},rl),h=!1;!h;){var p=a[f];!p||p.doc._meta.lwt>i?h=!0:(vF(this.primaryPath,this.schema,this.internals,p.doc),f++)}return dd},e.getAttachmentData=function(r,i,s){this.ensurePersistence(),af(this);var o=uf(r,i),a=this.internals.attachments.get(o);if(!s||!a||a.digest!==s)throw new Error("attachment does not exist: "+o);return Promise.resolve(a.writeData.data)},e.changeStream=function(){return af(this),this.internals.changes$.asObservable()},e.remove=async function(){if(this.closed)throw new Error("closed");this.ensurePersistence(),af(this),this.internals.removed=!0,this.storage.collectionStates.delete(qO(this.databaseName,this.collectionName,this.schema.version)),await this.close()},e.close=function(){return Lb.delete(this),this.ensurePersistence(),this.closed||(this.closed=!0,this.internals.refCount=this.internals.refCount-1),un},e.conflictResultionTasks=function(){return this.internals.conflictResultionTasks$.asObservable()},e.resolveConflictResultionTask=function(r){return un},t}();function _F(t,e,n){var r=qO(e.databaseName,e.collectionName,e.schema.version),i=t.collectionStates.get(r);if(!i)i={id:iu(5),schema:e.schema,removed:!1,refCount:1,documents:new Map,attachments:e.schema.attachments?new Map:void 0,byIndex:{},conflictResultionTasks$:new Kt,changes$:new Kt},gF(i,e.schema),t.collectionStates.set(r,i);else{if(e.devMode&&!Va(i.schema,e.schema))throw new Error("storage was already created with a different schema");i.refCount=i.refCount+1}var s=new wF(t,e.databaseName,e.collectionName,e.schema,i,e.options,n);return Promise.resolve(s)}var bF=new Map;function $b(t={}){var e={name:"memory",rxdbVersion:wg,collectionStates:bF,createStorageInstance(n){oO(n);var r=Object.assign({},t,n.options);return _F(this,n,r)}};return e}function SF(t){let{name:e,options:n,storage:r,...i}=t;if(!r)switch(n.storageType){case"dexie":r=aF(n.storageOptions);break;case"memory":r=$b(n.storageOptions);break;default:r=$b(n.storageOptions);break}return{name:e,storage:r,options:n,...i}}const IF=/^[v^~<>=]*?(\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+))?(?:-([\da-z\-]+(?:\.[\da-z\-]+)*))?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i,jb=t=>{if(typeof t!="string")throw new TypeError("Invalid argument expected string");const e=t.match(IF);if(!e)throw new Error(`Invalid argument not valid semver ('${t}' received)`);return e.shift(),e},Ub=t=>t==="*"||t==="x"||t==="X",zb=t=>{const e=parseInt(t,10);return isNaN(e)?t:e},EF=(t,e)=>typeof t!=typeof e?[String(t),String(e)]:[t,e],OF=(t,e)=>{if(Ub(t)||Ub(e))return 0;const[n,r]=EF(zb(t),zb(e));return n>r?1:n<r?-1:0},Vb=(t,e)=>{for(let n=0;n<Math.max(t.length,e.length);n++){const r=OF(t[n]||"0",e[n]||"0");if(r!==0)return r}return 0},kF=(t,e)=>{const n=jb(t),r=jb(e),i=n.pop(),s=r.pop(),o=Vb(n,r);return o!==0?o:i&&s?Vb(i.split("."),s.split(".")):i||s?i?-1:1:0},DF=(t,e,n)=>{xF(n);const r=kF(t,e);return HO[n].includes(r)},HO={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1],"!=":[-1,1]},Kb=Object.keys(HO),xF=t=>{if(typeof t!="string")throw new TypeError(`Invalid operator type, expected string but got ${typeof t}`);if(Kb.indexOf(t)===-1)throw new Error(`Invalid operator, expected one of ${Kb.join("|")}`)},{logger:Jr,getDefaultPreparedQuery:CF}=$r,Wb="storage-token|storageToken",Jg=async t=>{let e;try{const r=await $O()(t);if(r.ok)e=await r.json();else throw new Error(`Failed to fetch schema from "${t}", status: ${r.status}`)}catch{throw new Error(`Failed to fetch schema from "${t}"`)}return e},AF=async t=>{var e;try{const n={};for(const r in t){const i=t[r];!i.schema&&((e=i.options)!=null&&e.schemaUrl)&&(i.schema=await Jg(i.options.schemaUrl)),n[i.name]=i}return n}catch(n){throw new Error(n.message)}},PF=async(t,e)=>{let n;const i=await $O()(t);if(i.ok)n=await i.json();else throw new Error(`Failed to fetch db dump from "${t}", status: ${i.status}`);if(!e||!Object.keys(e).length)throw new Error("collections must be initialized before importing");for(const s of n.collections){const o=e[s.name];if(o)s.schemaHash=o.schema._hash;else throw new Error("no such collection as provided in dump")}return n},RF=async(t,e,n)=>{var s,o;let r={};if(t.name!=="dexie")return;const i=(s=await e.internals)==null?void 0:s.dexieTable;if(r=(o=await i.get(Wb))==null?void 0:o.data,!(r!=null&&r.rxdbVersion)||DF(n,r.rxdbVersion,">"))try{await i.update(Wb,{data:{...r,rxdbVersion:n}}),Jr.log("prepare-plugin: migrated internal storage to",n)}catch{throw new Error("prepare-plugin: unable to migrate internal storage")}},TF=async({database:t,creator:e})=>{var o;const n=await EO(t);Jr.log("prepare-plugin: hook:createRxDatabase:after");const{storage:r,internalStore:i,rxdbVersion:s}=t;if(await RF(r,i,s),!(!((o=e.options)!=null&&o.dumpPath)||!n))try{const a=await PF(e.options.dumpPath,t.collections);await t.importJSON(a),Jr.log(`prepare-plugin: imported dump for db "${t.name}"`)}catch(a){Jr.log("prepare-plugin: imported dump error",a)}},MF=async t=>{if(typeof t=="string"){const e=await Jg(t);if(!e)throw new Error(`Failed to fetch schema from "${t}"`);t=e}},NF=async({collection:t,creator:e})=>{var l,f,h;Jr.log("prepare-plugin: hook:createRxCollection:before");const n=await t.getMetadata();Jr.log("prepare-plugin: hook:createRxCollection:before",n);const r=((l=e.options)==null?void 0:l.initialDocs)||[],i=await a();if(!r.length)return;if(i||!n.isFirstTimeInstantiated){if(!((f=e.options)!=null&&f.recreate)||(h=e.options)!=null&&h.replication)return;Jr.log(`prepare-plugin: collection "${t.name}" already has ${i} docs (including _deleted), but recreate option is set`)}const s=await t.schema.hash,o={name:t.name,schemaHash:s,docs:r};try{const{success:p,error:y}=await t.importJSON(o),w=await a();Jr.log(`prepare-plugin: imported ${p.length} docs for collection "${t.name}", errors count ${y.length}, current docs count ${w}`),Jr.table(p)}catch(p){Jr.log("prepare-plugin: imported dump error",p)}return;async function a(){const{count:p}=await t.storageInstance.count(CF()).catch(()=>({count:0}));return p}},BF={name:"prepare-plugin",rxdb:!0,prototypes:{RxDatabase:t=>{Object.assign(t,{fetchSchema:Jg})},RxCollection:t=>{Object.assign(t,{getMetadata:async function(){const n=await EO(this.database),r=await Kg(this.database.internalStore),{id:i,data:s,_meta:o,_rev:a}=r.filter(l=>l.data.name===this.name).at(0)||{};return{id:i||this.name,databaseName:this.database.name,collectionName:(s==null?void 0:s.name)||this.name,storageName:this.storageInstance.originalStorageInstance.storage.name,last_modified:o!=null&&o.lwt?Math.floor(o==null?void 0:o.lwt):Date.now(),rev:a?Number(a==null?void 0:a.at(0)):1,isFirstTimeInstantiated:n}}})}},hooks:{createRxDatabase:{after:TF},preCreateRxSchema:{before:MF},createRxCollection:{after:NF}}};function QO(t,e){const n={};if(Array.isArray(e))for(const r of e){const i=Object.getOwnPropertyDescriptor(t,r);i!=null&&i.enumerable&&Object.defineProperty(n,r,i)}else for(const r of Reflect.ownKeys(t)){const i=Object.getOwnPropertyDescriptor(t,r);if(i.enumerable){const s=t[r];e(r,s,t)&&Object.defineProperty(n,r,i)}}return n}const YO="%[a-f0-9]{2}",qb=new RegExp("("+YO+")|([^%]+?)","gi"),Hb=new RegExp("("+YO+")+","gi");function ev(t,e){try{return[decodeURIComponent(t.join(""))]}catch{}if(t.length===1)return t;e=e||1;const n=t.slice(0,e),r=t.slice(e);return Array.prototype.concat.call([],ev(n),ev(r))}function FF(t){try{return decodeURIComponent(t)}catch{let e=t.match(qb)||[];for(let n=1;n<e.length;n++)t=ev(e,n).join(""),e=t.match(qb)||[];return t}}function LF(t){const e={"%FE%FF":"","%FF%FE":""};let n=Hb.exec(t);for(;n;){try{e[n[0]]=decodeURIComponent(n[0])}catch{const i=FF(n[0]);i!==n[0]&&(e[n[0]]=i)}n=Hb.exec(t)}e["%C2"]="";const r=Object.keys(e);for(const i of r)t=t.replace(new RegExp(i,"g"),e[i]);return t}function $F(t){if(typeof t!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return decodeURIComponent(t)}catch{return LF(t)}}function GO(t,e){if(!(typeof t=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(t===""||e==="")return[];const n=t.indexOf(e);return n===-1?[]:[t.slice(0,n),t.slice(n+e.length)]}const jF=t=>t==null,UF=t=>encodeURIComponent(t).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),tv=Symbol("encodeFragmentIdentifier");function zF(t){switch(t.arrayFormat){case"index":return e=>(n,r)=>{const i=n.length;return r===void 0||t.skipNull&&r===null||t.skipEmptyString&&r===""?n:r===null?[...n,[Nt(e,t),"[",i,"]"].join("")]:[...n,[Nt(e,t),"[",Nt(i,t),"]=",Nt(r,t)].join("")]};case"bracket":return e=>(n,r)=>r===void 0||t.skipNull&&r===null||t.skipEmptyString&&r===""?n:r===null?[...n,[Nt(e,t),"[]"].join("")]:[...n,[Nt(e,t),"[]=",Nt(r,t)].join("")];case"colon-list-separator":return e=>(n,r)=>r===void 0||t.skipNull&&r===null||t.skipEmptyString&&r===""?n:r===null?[...n,[Nt(e,t),":list="].join("")]:[...n,[Nt(e,t),":list=",Nt(r,t)].join("")];case"comma":case"separator":case"bracket-separator":{const e=t.arrayFormat==="bracket-separator"?"[]=":"=";return n=>(r,i)=>i===void 0||t.skipNull&&i===null||t.skipEmptyString&&i===""?r:(i=i===null?"":i,r.length===0?[[Nt(n,t),e,Nt(i,t)].join("")]:[[r,Nt(i,t)].join(t.arrayFormatSeparator)])}default:return e=>(n,r)=>r===void 0||t.skipNull&&r===null||t.skipEmptyString&&r===""?n:r===null?[...n,Nt(e,t)]:[...n,[Nt(e,t),"=",Nt(r,t)].join("")]}}function VF(t){let e;switch(t.arrayFormat){case"index":return(n,r,i)=>{if(e=/\[(\d*)]$/.exec(n),n=n.replace(/\[\d*]$/,""),!e){i[n]=r;return}i[n]===void 0&&(i[n]={}),i[n][e[1]]=r};case"bracket":return(n,r,i)=>{if(e=/(\[])$/.exec(n),n=n.replace(/\[]$/,""),!e){i[n]=r;return}if(i[n]===void 0){i[n]=[r];return}i[n]=[...i[n],r]};case"colon-list-separator":return(n,r,i)=>{if(e=/(:list)$/.exec(n),n=n.replace(/:list$/,""),!e){i[n]=r;return}if(i[n]===void 0){i[n]=[r];return}i[n]=[...i[n],r]};case"comma":case"separator":return(n,r,i)=>{const s=typeof r=="string"&&r.includes(t.arrayFormatSeparator),o=typeof r=="string"&&!s&&Oi(r,t).includes(t.arrayFormatSeparator);r=o?Oi(r,t):r;const a=s||o?r.split(t.arrayFormatSeparator).map(l=>Oi(l,t)):r===null?r:Oi(r,t);i[n]=a};case"bracket-separator":return(n,r,i)=>{const s=/(\[])$/.test(n);if(n=n.replace(/\[]$/,""),!s){i[n]=r&&Oi(r,t);return}const o=r===null?[]:r.split(t.arrayFormatSeparator).map(a=>Oi(a,t));if(i[n]===void 0){i[n]=o;return}i[n]=[...i[n],...o]};default:return(n,r,i)=>{if(i[n]===void 0){i[n]=r;return}i[n]=[...[i[n]].flat(),r]}}}function JO(t){if(typeof t!="string"||t.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function Nt(t,e){return e.encode?e.strict?UF(t):encodeURIComponent(t):t}function Oi(t,e){return e.decode?$F(t):t}function XO(t){return Array.isArray(t)?t.sort():typeof t=="object"?XO(Object.keys(t)).sort((e,n)=>Number(e)-Number(n)).map(e=>t[e]):t}function ZO(t){const e=t.indexOf("#");return e!==-1&&(t=t.slice(0,e)),t}function KF(t){let e="";const n=t.indexOf("#");return n!==-1&&(e=t.slice(n)),e}function Qb(t,e){return e.parseNumbers&&!Number.isNaN(Number(t))&&typeof t=="string"&&t.trim()!==""?t=Number(t):e.parseBooleans&&t!==null&&(t.toLowerCase()==="true"||t.toLowerCase()==="false")&&(t=t.toLowerCase()==="true"),t}function Xg(t){t=ZO(t);const e=t.indexOf("?");return e===-1?"":t.slice(e+1)}function Zg(t,e){e={decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1,...e},JO(e.arrayFormatSeparator);const n=VF(e),r=Object.create(null);if(typeof t!="string"||(t=t.trim().replace(/^[?#&]/,""),!t))return r;for(const i of t.split("&")){if(i==="")continue;const s=e.decode?i.replace(/\+/g," "):i;let[o,a]=GO(s,"=");o===void 0&&(o=s),a=a===void 0?null:["comma","separator","bracket-separator"].includes(e.arrayFormat)?a:Oi(a,e),n(Oi(o,e),a,r)}for(const[i,s]of Object.entries(r))if(typeof s=="object"&&s!==null)for(const[o,a]of Object.entries(s))s[o]=Qb(a,e);else r[i]=Qb(s,e);return e.sort===!1?r:(e.sort===!0?Object.keys(r).sort():Object.keys(r).sort(e.sort)).reduce((i,s)=>{const o=r[s];return o&&typeof o=="object"&&!Array.isArray(o)?i[s]=XO(o):i[s]=o,i},Object.create(null))}function ek(t,e){if(!t)return"";e={encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:",",...e},JO(e.arrayFormatSeparator);const n=o=>e.skipNull&&jF(t[o])||e.skipEmptyString&&t[o]==="",r=zF(e),i={};for(const[o,a]of Object.entries(t))n(o)||(i[o]=a);const s=Object.keys(i);return e.sort!==!1&&s.sort(e.sort),s.map(o=>{const a=t[o];return a===void 0?"":a===null?Nt(o,e):Array.isArray(a)?a.length===0&&e.arrayFormat==="bracket-separator"?Nt(o,e)+"[]":a.reduce(r(o),[]).join("&"):Nt(o,e)+"="+Nt(a,e)}).filter(o=>o.length>0).join("&")}function tk(t,e){var i;e={decode:!0,...e};let[n,r]=GO(t,"#");return n===void 0&&(n=t),{url:((i=n==null?void 0:n.split("?"))==null?void 0:i[0])??"",query:Zg(Xg(t),e),...e&&e.parseFragmentIdentifier&&r?{fragmentIdentifier:Oi(r,e)}:{}}}function nk(t,e){e={encode:!0,strict:!0,[tv]:!0,...e};const n=ZO(t.url).split("?")[0]||"",r=Xg(t.url),i={...Zg(r,{sort:!1}),...t.query};let s=ek(i,e);s&&(s=`?${s}`);let o=KF(t.url);if(t.fragmentIdentifier){const a=new URL(n);a.hash=t.fragmentIdentifier,o=e[tv]?a.hash:`#${t.fragmentIdentifier}`}return`${n}${s}${o}`}function rk(t,e,n){n={parseFragmentIdentifier:!0,[tv]:!1,...n};const{url:r,query:i,fragmentIdentifier:s}=tk(t,n);return nk({url:r,query:QO(i,e),fragmentIdentifier:s},n)}function WF(t,e,n){const r=Array.isArray(e)?i=>!e.includes(i):(i,s)=>!e(i,s);return rk(t,r,n)}const gm=Object.freeze(Object.defineProperty({__proto__:null,exclude:WF,extract:Xg,parse:Zg,parseUrl:tk,pick:rk,stringify:ek,stringifyUrl:nk},Symbol.toStringTag,{value:"Module"})),{keys:Yb,isEmpty:Gb,isNullOrUndefined:nv}=$r,qF=({selector:t,sort:e,limit:n,skip:r},i)=>{const s=Yb(i.jsonSchema.properties);return Gb(t)||(t=QO(t,o=>!o.startsWith("$")&&!o.includes(".")&&s.includes(o))),Gb(e)||(e=e==null?void 0:e.filter(o=>s.includes(Yb(o)[0]))),(nv(n)||isNaN(n))&&(n=void 0),(nv(r)||isNaN(r))&&(r=void 0),{selector:t,sort:e,limit:n,skip:r}},Jb=(t,e)=>{t=gm.extract(t);const n=gm.pick(t,["selector","sort","limit","skip"]),r=gm.parse(n,{parseNumbers:!0,parseBooleans:!0}),{selector:i,sort:s,limit:o,skip:a}=r,l=i?JSON.parse(i):void 0,f=s?JSON.parse(s):void 0;return qF({selector:l,sort:f,limit:o,skip:a},e)},lf=t=>nv(t)?"":JSON.stringify(t),{logger:Xb,compactObject:HF}=$r,QF={name:"query-params-plugin",rxdb:!0,prototypes:{RxCollection:t=>{const e=new Cr({});let n=!1,r,i=!1,s="",o=()=>Promise.resolve(!1);function a(h=RE,p){var y;n=!!((y=this.options)!=null&&y.useQueryParams),r=this.schema,!(!n||i)&&(o=p,h.pipe(Ms(),Ay(w=>{s=w}),Mt(w=>Jb(w,r)),kE(w=>(Xb.log("Error in parsing url to mango query",w),e)),Ay(w=>{Xb.log("queryParams",w)}),NE(()=>!this.destroyed)).subscribe(e),i=!0)}function l(h){if(!n)return;const{selector:p,sort:y,limit:w,skip:I}=h,E={limit:w,skip:I};p&&(E.selector=lf(h.selector)),y&&(E.sort=lf(h.sort)),o(E)}function f(h){if(!n)return;const p=Jb(s,r),y={selector:lf(h.selector||p.selector),sort:lf(h.sort||p.sort),limit:h.limit||p.limit,skip:h.skip||p.skip};o(HF(y))}Object.assign(t,{queryParams:{$:e.asObservable(),get:()=>e.getValue(),set:l,patch:f}},{queryParamsInit:a})}},hooks:{createRxCollection:{}}};var ik={minimumDeletedTime:1e3*60*60*24*31,minimumCollectionAge:1e3*60,runEach:1e3*60*5,awaitReplicationsInSync:!0,waitForLeadership:!0},wm=dd;async function YF(t){var e=t.database,n=Object.assign({},ik,e.cleanupPolicy?e.cleanupPolicy:{});await t.promiseWait(n.minimumCollectionAge),!t.destroyed&&(n.waitForLeadership&&await e.waitForLeadership(),!t.destroyed&&(await sk(t,n),await GF(t,n)))}async function sk(t,e){for(var n=t.database,r=t.storageInstance,i=!1;!i&&!t.destroyed;){if(e.awaitReplicationsInSync){var s=LO.get(t);s&&await Promise.all(s.map(o=>{if(!o.isStopped())return o.awaitInSync()}))}if(await n.requestIdlePromise(),t.destroyed)return;wm=wm.then(()=>t.destroyed?!0:r.cleanup(e.minimumDeletedTime)),i=await wm}}async function GF(t,e){for(;!t.destroyed;){if(await t.promiseWait(e.runEach),t.destroyed)return;await sk(t,e)}}var JF={name:"cleanup",rxdb:!0,prototypes:{RxCollection:t=>{t.cleanup=async function(e){var n=Object.assign({},ik,this.database.cleanupPolicy?this.database.cleanupPolicy:{});typeof e>"u"&&(e=n.minimumDeletedTime);for(var r=!1;!r&&!this.destroyed;)r=await this.storageInstance.cleanup(e)}}},hooks:{createRxCollection:{after:t=>{YF(t.collection)}}}};function XF(t){var e={name:this.name,instanceToken:this.token,collections:[]},n=Object.keys(this.collections).filter(r=>!t||t.includes(r)).filter(r=>r.charAt(0)!=="_").map(r=>this.collections[r]);return Promise.all(n.map(r=>r.exportJSON())).then(r=>(e.collections=r,e))}var ZF=function(t){var e=t.collections.filter(n=>!this.collections[n.name]).map(n=>n.name);if(e.length>0)throw le("JD1",{missingCollections:e});return Promise.all(t.collections.map(n=>this.collections[n.name].importJSON(n)))},eL=async function(){var t={name:this.name,schemaHash:await this.schema.hash,docs:[]},e=na("find",tl(),this);return rO(e).then(n=>(t.docs=n.map(r=>(r=$e(r),delete r._rev,delete r._attachments,r)),t))};async function tL(t){if(t.schemaHash!==await this.schema.hash)throw le("JD2",{schemaHash:t.schemaHash,own:this.schema.hash});var e=t.docs;return this.storageInstance.bulkWrite(e.map(n=>{var r=Object.assign({},n,{_meta:{lwt:Ft()},_rev:Nn(),_attachments:{},_deleted:!1});return{document:r}}),"json-dump-import")}var nL={name:"json-dump",rxdb:!0,prototypes:{RxDatabase:t=>{t.exportJSON=XF,t.importJSON=ZF},RxCollection:t=>{t.exportJSON=eL,t.importJSON=tL}},overwritable:{}},rL=lO(),iL=function(t){_g(e,t);function e(n,r,i){var s;return s=t.call(this,null,r)||this,s.id=n,s.parent=i,s}return e}(rL),il={get isLocal(){return!0},get allAttachments$(){throw le("LD1",{document:this})},get primaryPath(){return"id"},get primary(){return this.id},get $(){var t=this,e=Bo(rv,this.parent);return t.parent.$.pipe(lt(n=>n.documentId===this.primary),lt(n=>n.isLocal),Mt(n=>xg(n)),Hl(e.docCache.getLatestDocumentData(this.primary)),Ms((n,r)=>n._rev===r._rev),Mt(n=>e.docCache.getCachedRxDocument(n)),Pi(Ai))},get $$(){var t=this,e=_m(t),n=e.getReactivityFactory();return n.fromObservable(t.$,t.getLatest()._data)},get deleted$$(){var t=this,e=_m(t),n=e.getReactivityFactory();return n.fromObservable(t.deleted$,t.getLatest().deleted)},getLatest(){var t=Bo(rv,this.parent),e=t.docCache.getLatestDocumentData(this.primary);return t.docCache.getCachedRxDocument(e)},get(t){if(t="data."+t,!!this._data){if(typeof t!="string")throw el("LD2",{objPath:t});var e=Ts(this._data,t);return e=it.deepFreezeWhenDevMode(e),e}},get$(t){if(t="data."+t,it.isDevMode()){if(t.includes(".item."))throw le("LD3",{objPath:t});if(t===this.primaryPath)throw le("LD4")}return this.$.pipe(Mt(e=>e._data),Mt(e=>Ts(e,t)),Ms())},get$$(t){var e=_m(this),n=e.getReactivityFactory();return n.fromObservable(this.get$(t),this.getLatest().get(t))},async incrementalModify(t){var e=await sl(this.parent);return e.incrementalWriteQueue.addWrite(this._data,async n=>(n.data=await t(n.data,this),n)).then(n=>e.docCache.getCachedRxDocument(n))},incrementalPatch(t){return this.incrementalModify(e=>(Object.entries(t).forEach(([n,r])=>{e[n]=r}),e))},async _saveData(t){var e=await sl(this.parent),n=this._data;return t.id=this.id,e.storageInstance.bulkWrite([{previous:n,document:t}],"local-document-save-data").then(r=>{var i=r.success[0];if(!i)throw r.error[0];t=$e(t),t._rev=i._rev})},async remove(){var t=await sl(this.parent),e={id:this._data.id,data:{},_deleted:!0,_meta:Ws(),_rev:Nn(),_attachments:{}};return Tl(t.storageInstance,{previous:this._data,document:e},"local-document-remove").then(n=>t.docCache.getCachedRxDocument(n))}},Zb=!1,sL=()=>{if(!Zb){Zb=!0;var t=kh,e=Object.getOwnPropertyNames(t);e.forEach(r=>{var i=Object.getOwnPropertyDescriptor(il,r);if(!i){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(il,r,s)}});var n=r=>()=>{throw le("LD6",{functionName:r})};["populate","update","putAttachment","getAttachment","allAttachments"].forEach(r=>il[r]=n(r))}};function oL(t,e){sL();var n=new iL(t.id,t,e);return Object.setPrototypeOf(n,il),n.prototype=il,n}function _m(t){var e=t.parent;return IN(e)?e:e.database}var kd=new WeakMap,rv=new WeakMap;function e1(t){var e=t.database?t.database:t,n=t.database?t.name:"",r=(async()=>{var i=await ok(e.token,e.storage,e.name,n,e.instanceCreationOptions,e.multiInstance);i=Ug(e,i,ak);var s=new ZE("id",t.$.pipe(lt(h=>h.isLocal)),h=>oL(h,t)),o=new uO(i,"id",()=>{},()=>{}),a=await e.storageToken,l=i.changeStream().subscribe(h=>{var p={id:h.id,internal:!1,collectionName:t.database?t.name:void 0,storageToken:a,events:h.events.map(y=>iO(!0,y,t.database?t:void 0)),databaseToken:e.token,checkpoint:h.checkpoint,context:h.context,endTime:h.endTime,startTime:h.startTime};e.$emit(p)});t._subs.push(l);var f={database:e,parent:t,storageInstance:i,docCache:s,incrementalWriteQueue:o};return rv.set(t,f),f})();kd.set(t,r)}function sl(t){var e=kd.get(t);if(!e){var n=t.database?t.database:t,r=t.database?t.name:"";throw le("LD8",{database:n.name,collection:r})}return e}function ok(t,e,n,r,i,s){return e.createStorageInstance({databaseInstanceToken:t,databaseName:n,collectionName:aL(r),schema:ak,options:i,multiInstance:s,devMode:it.isDevMode()})}function t1(t){var e=kd.get(t);if(e)return kd.delete(t),e.then(n=>n.storageInstance.close())}async function n1(t,e,n){var r=iu(10),i=await ok(r,t,e,n,{},!1);await i.remove()}function aL(t){return"plugin-local-documents-"+t}var ak=bh({title:"RxLocalDocument",version:0,primaryKey:"id",type:"object",properties:{id:{type:"string",maxLength:128},data:{type:"object",additionalProperties:!0}},required:["id","data"]});async function r1(t,e){var n=await sl(this),r={id:t,data:e,_deleted:!1,_meta:Ws(),_rev:Nn(),_attachments:{}};return Tl(n.storageInstance,{document:r},"local-document-insert").then(i=>n.docCache.getCachedRxDocument(i))}function i1(t,e){return this.getLocal(t).then(n=>{if(n)return n.incrementalModify(()=>e);var r=this.insertLocal(t,e);return r})}async function s1(t){var e=await sl(this),n=e.docCache,r=n.getLatestDocumentDataIfExists(t);return r?Promise.resolve(n.getCachedRxDocument(r)):Xl(e.storageInstance,t).then(i=>i?e.docCache.getCachedRxDocument(i):null)}function o1(t){return this.$.pipe(Hl(null),Lr(async e=>{if(e)return{changeEvent:e};var n=await this.getLocal(t);return{doc:n}}),Lr(async e=>{if(e.changeEvent){var n=e.changeEvent;if(!n.isLocal||n.documentId!==t)return{use:!1};var r=await this.getLocal(t);return{use:!0,doc:r}}else return{use:!0,doc:e.doc}}),lt(e=>e.use),Mt(e=>e.doc))}var uk={name:"local-documents",rxdb:!0,prototypes:{RxCollection:t=>{t.insertLocal=r1,t.upsertLocal=i1,t.getLocal=s1,t.getLocal$=o1},RxDatabase:t=>{t.insertLocal=r1,t.upsertLocal=i1,t.getLocal=s1,t.getLocal$=o1}},hooks:{createRxDatabase:{before:t=>{t.creator.localDocuments&&e1(t.database)}},createRxCollection:{before:t=>{t.creator.localDocuments&&e1(t.collection)}},preDestroyRxDatabase:{after:t=>t1(t)},postDestroyRxCollection:{after:t=>t1(t)},postRemoveRxDatabase:{after:t=>n1(t.storage,t.databaseName,"")},postRemoveRxCollection:{after:t=>n1(t.storage,t.databaseName,t.collectionName)}},overwritable:{}};async function lk(t){var e=pR(t.collection.schema.jsonSchema).map(r=>t.collection.name+"-"+r),n=await t.database.internalStore.findDocumentsById(e.map(r=>Ha(r,xo)),!1);if(n.length>1)throw new Error("more the one old collection meta found");return n[0]}function uL(t,e,n){var r=$e(n._attachments),i=Mn(n),s=i._meta;delete i._meta,i._attachments=r;for(var o=e+1,a=Promise.resolve(i),l=function(){var f=o;a=a.then(h=>lL(t,f,h)),o++};o<=t.schema.version;)l();return a.then(f=>f===null?vg:(f._meta=s,f))}function lL(t,e,n){if(n===null)return vg;var r=t.migrationStrategies[e](n,t),i=ZI(r);return i}async function ck(t){if(t.collection.schema.version===0)return Xn;var e=await lk(t);return!!e}var cL=200,fk=new WeakMap;function fL(t){var e=dk(t.database),n=e.getValue().slice(0);n.push(t),e.next(n)}function dk(t){return Br(fk,t,()=>new Cr([]))}function dL(t){var e=fk.get(t);e&&e.complete()}var hL=function(){function t(n,r,i=[n.name,"v",n.schema.version].join("-")){this.started=!1,this.updateStatusHandlers=[],this.updateStatusQueue=dd,this.collection=n,this.migrationStrategies=r,this.statusDocKey=i,this.database=n.database,this.oldCollectionMeta=lk(this),this.mustMigrate=ck(this),this.statusDocId=Ha(this.statusDocKey,Pf),fL(this),this.$=q2(this.database.internalStore,this.statusDocId).pipe(lt(s=>!!s),Mt(s=>ye(s).data),Pi(Ai))}var e=t.prototype;return e.getStatus=function(){return As(this.$)},e.startMigration=async function(r=cL){var i=await this.mustMigrate;if(i){if(this.started)throw le("DM1");this.started=!0;var s=void 0;if(this.database.multiInstance){s=new xh(["rx-migration-state",this.database.name,this.collection.name,this.collection.schema.version].join("|"));var o=NB(s);await o.awaitLeadership()}var a=await this.oldCollectionMeta,l=await this.database.storage.createStorageInstance({databaseName:this.database.name,collectionName:this.collection.name,databaseInstanceToken:this.database.token,multiInstance:this.database.multiInstance,options:{},schema:a.data.schema,password:this.database.password,devMode:it.isDevMode()}),f=await this.getConnectedStorageInstances(),h=await this.countAllDoucments([l].concat(f.map(p=>p.oldStorage)));await this.updateStatus(p=>(p.count.total=h,p));try{await Promise.all(f.map(async p=>{await dO(this.collection,p.newStorage.collectionName,p.newStorage.schema),await this.migrateStorage(p.oldStorage,p.newStorage,r),await p.newStorage.close()})),await this.migrateStorage(l,this.collection.storageInstance.originalStorageInstance,r)}catch(p){await l.close(),await this.updateStatus(y=>(y.status="ERROR",y.error=ky(p),y));return}await Tl(this.database.internalStore,{previous:a,document:Object.assign({},a,{_deleted:!0})},"rx-migration-remove-collection-meta"),await this.updateStatus(p=>(p.status="DONE",p)),s&&await s.close()}},e.updateStatus=function(r){return this.updateStatusHandlers.push(r),this.updateStatusQueue=this.updateStatusQueue.then(async()=>{if(this.updateStatusHandlers.length!==0){var i=this.updateStatusHandlers;for(this.updateStatusHandlers=[];;){var s=await Xl(this.database.internalStore,this.statusDocId),o=Mn(s);s||(o={id:this.statusDocId,key:this.statusDocKey,context:Pf,data:{collectionName:this.collection.name,status:"RUNNING",count:{total:0,handled:0,percent:0}},_deleted:!1,_meta:Ws(),_rev:Nn(),_attachments:{}});var a=ye(o).data;for(var l of i)a=l(a);if(a.count.percent=Math.round(a.count.handled/a.count.total*100),o&&s&&Va(o.data,s.data))break;try{await Tl(this.database.internalStore,{previous:s,document:ye(o)},Pf);break}catch(f){if(!_h(f))throw f}}}}),this.updateStatusQueue},e.migrateStorage=async function(r,i,s){var o=await this.database.storage.createStorageInstance({databaseName:this.database.name,collectionName:"rx-migration-state-meta-"+this.collection.name+"-"+this.collection.schema.version,databaseInstanceToken:this.database.token,multiInstance:this.database.multiInstance,options:{},schema:Wy(r.schema,vd(r.schema)),password:this.database.password,devMode:it.isDevMode()}),a=pN(i,bd,this.database.token,!0),l=mO({keepMeta:!0,identifier:["rx-migration-state",this.collection.name,r.schema.version,this.collection.schema.version].join("-"),replicationHandler:{masterChangesSince(){return Promise.resolve({checkpoint:null,documents:[]})},masterWrite:async h=>{h=await Promise.all(h.map(async y=>{var w=y.newDocumentState;if(i.schema.title===Rf&&(w=y.newDocumentState.docData,y.newDocumentState.isCheckpoint==="1"))return{assumedMasterState:void 0,newDocumentState:y.newDocumentState};var I=await uL(this.collection,r.schema.version,w),E={assumedMasterState:void 0,newDocumentState:i.schema.title===Rf?Object.assign({},y.newDocumentState,{docData:I}):I};return E})),h=h.filter(y=>!!y.newDocumentState);var p=await a.masterWrite(h);return p},masterChangeStream$:new Kt().asObservable()},forkInstance:r,metaInstance:o,pushBatchSize:s,pullBatchSize:0,conflictHandler:bd,hashFunction:this.database.hashFunction}),f=!1;if(l.events.error.subscribe(h=>f=h),l.events.processed.up.subscribe(()=>{this.updateStatus(h=>(h.count.handled=h.count.handled+1,h))}),await Tf(l),await yO(l),await this.updateStatusQueue,f)throw await o.close(),f;await Promise.all([r.remove(),o.remove()])},e.countAllDoucments=async function(r){var i=0;return await Promise.all(r.map(async s=>{var o=Jl(s.schema,Rl(s.schema,{selector:{}})),a=await s.count(o);i+=a.count})),i},e.getConnectedStorageInstances=async function(){var r=await this.oldCollectionMeta,i=[];return await Promise.all(await Promise.all(r.data.connectedStorages.map(async s=>{if(s.schema.title!==Rf)throw new Error("unknown migration handling for schema");var o=Wy(Mn(this.collection.schema.jsonSchema),vd(s.schema));o.version=this.collection.schema.version;var[a,l]=await Promise.all([this.database.storage.createStorageInstance({databaseInstanceToken:this.database.token,databaseName:this.database.name,devMode:it.isDevMode(),multiInstance:this.database.multiInstance,options:{},schema:s.schema,password:this.database.password,collectionName:s.collectionName}),this.database.storage.createStorageInstance({databaseInstanceToken:this.database.token,databaseName:this.database.name,devMode:it.isDevMode(),multiInstance:this.database.multiInstance,options:{},schema:o,password:this.database.password,collectionName:s.collectionName})]);i.push({oldStorage:a,newStorage:l})}))),i},e.migratePromise=async function(r){this.startMigration(r);var i=await this.mustMigrate;if(!i)return{status:"DONE",collectionName:this.collection.name,count:{handled:0,percent:0,total:0}};var s=await Promise.race([As(this.$.pipe(lt(o=>o.status==="DONE"))),As(this.$.pipe(lt(o=>o.status==="ERROR")))]);if(s.status==="ERROR")throw le("DM4",{collection:this.collection.name,error:s.error});return s},t}(),pL=new WeakMap,mL={name:"migration-schema",rxdb:!0,init(){gi(uk)},hooks:{preDestroyRxDatabase:{after:dL}},prototypes:{RxDatabase:t=>{t.migrationStates=function(){return dk(this).pipe(Pi(Ai))}},RxCollection:t=>{t.getMigrationState=function(){return Br(pL,this,()=>new hL(this.asRxCollection,this.migrationStrategies))},t.migrationNeeded=function(){return this.schema.version===0?Xn:ck(this.getMigrationState())}}}};const e0=(t,e)=>{switch(t){case"deep":return Ty(e);case"copy":return My(e)?new Date(e):Lt(e)?[...e]:wt(e)?Object.assign({},e):e;default:return e}},yL=/^[a-z]+[a-zA-Z0-9]*$/;function hk(t){if(!t.includes(".$"))return[{parent:t,selector:t},[]];const e=t.indexOf(".$"),n=t.indexOf("]"),r=t.substring(0,e),i=t.substring(e+3,n);Yt(i===""||yL.test(i),"The filter <identifier> must begin with a lowercase letter and contain only alphanumeric characters.");const s=t.substring(n+2),[o,a]=s?hk(s):[];return[{selector:t,parent:r,child:i||"$",next:o},[i,...a||[]].filter(Boolean)]}const Un=(t,e,n,r,i)=>{const{parent:s,child:o,next:a}=e;if(!o){let f=!1;return Pl(t,s,(p,y)=>f=!!r(p,y)||f,i),f}const l=lu(t,s);return Lt(l)?l.map((f,h)=>n[o]&&!n[o].test({[o]:f})?!1:a?Un(f,a,n,r,i):r(l,h)).some(Boolean):!1};function ur(t,e,n,r){const i=[];for(const[s,o]of Object.entries(t)){const[a,l]=hk(s);if(!l.length)r(o,a,{})&&i.push(a.parent);else{const f={};e.forEach(p=>{Object.keys(p).forEach(y=>{l.forEach(w=>{(y===w||y.startsWith(w+"."))&&(f[w]=f[w]||{},Object.assign(f[w],{[y]:p[y]}))})})});const h={};for(const[p,y]of Object.entries(f))h[p]=new Qs(y,n.queryOptions);r(o,a,h)&&i.push(a.parent)}}return i}const vL=(t,e,n=[],r={})=>ur(e,n,r,(i,s,o)=>{const a={$each:[i]};return wt(i)&&er(i,"$each")&&Object.assign(a,i),Un(t,s,o,(l,f)=>{const h=l[f]||(l[f]=[]);return Fg([h,a.$each]).length===a.$each.length?!1:(l[f]=e0(r.cloneMode,kM(h.concat(a.$each))),!0)},{buildGraph:!0})}),gL=new Set(["and","or","xor"]),wL=(t,e,n=[],r={})=>ur(e,n,r,(i,s,o)=>{const a=Object.keys(i);return Yt(a.length===1&&gL.has(a[0]),`Invalid bit operator '${a[0]}'. Must be one of 'and', 'or', or 'xor'.`),Un(t,s,o,(l,f)=>{let h=l[f];const p=i[a[0]];if(h!==void 0&&!(Yn(h)&&Yn(p)))return!1;switch(h=h||0,a[0]){case"and":l[f]=h&p;break;case"or":l[f]=h|p;break;case"xor":l[f]=h^p;break}return l[f]!==h},{buildGraph:!0})}),_L=(t,e,n=[],r={})=>{const i=Date.now();return ur(e,n,r,(s,o,a)=>Un(t,o,a,(l,f)=>(l[f]=i,!0),{buildGraph:!0}))},bL=(t,e,n=[],r={})=>ur(e,n,r,(i,s,o)=>{if(!s.child){const a=lu(t,s.parent);Yt(a===void 0||Yn(a),"cannot apply $inc to a value of non-numeric type")}return Un(t,s,o,(a,l)=>(a[l]=(a[l]||(a[l]=0))+i,!0),{buildGraph:!0})}),SL=(t,e,n=[],r={})=>ur(e,n,r,(i,s,o)=>Un(t,s,o,(a,l)=>a[l]!==void 0&&Bn(a[l],i)>-1?!1:(a[l]=i,!0),{buildGraph:!0})),IL=(t,e,n=[],r={})=>ur(e,n,r,(i,s,o)=>Un(t,s,o,(a,l)=>a[l]!==void 0&&Bn(a[l],i)<1?!1:(a[l]=i,!0),{buildGraph:!0})),EL=(t,e,n=[],r={})=>ur(e,n,r,(i,s,o)=>Un(t,s,o,(a,l)=>{const f=a[l];return a[l]=a[l]===void 0?0:a[l]*i,a[l]!==f},{buildGraph:!0})),OL=(t,e,n=[],r={})=>ur(e,n,r,(i,s,o)=>Un(t,s,o,(a,l)=>{const f=a[l];return Yt(Lt(f),`path '${s.selector}' contains an element of non-array type.`),f.length?(i===-1?f.splice(0,1):f.pop(),!0):!1})),pk=(t,e,n=[],r={})=>ur(e,n,r,(i,s,o)=>{const a=!wt(i)||Object.keys(i).some(Ko),l=new Qs(a?{k:i}:i,r.queryOptions),f=a?h=>l.test({k:h}):h=>l.test(h);return Un(t,s,o,(h,p)=>{const y=h[p],w=new Array;return y.map(E=>{const $=f(E);return $||w.push(E),$}).some(Boolean)?(h[p]=w,!0):!1})}),kL=(t,e,n=[],r={})=>{const i={};return Object.entries(e).forEach(([s,o])=>{i[s]={$in:o}}),pk(t,i,n,r)},DL=Object.freeze(["$each","$slice","$sort","$position"]),xL=(t,e,n=[],r={})=>ur(e,n,r,(i,s,o)=>{const a={$each:[i]};return wt(i)&&DL.some(l=>er(i,l))&&Object.assign(a,i),Un(t,s,o,(l,f)=>{const h=l[f]||(l[f]=[]),p=h.slice(0,a.$slice||h.length),y=h.length,w=Yn(a.$position)?a.$position:h.length;if(h.splice(w,0,...e0(r.cloneMode,a.$each)),a.$sort){const I=wt(a.$sort)?Object.keys(a.$sort||{}).pop():"",E=I?a.$sort[I]:a.$sort,$=I?S=>lu(S,I):S=>S;h.sort((S,_)=>E*Bn($(S),$(_)))}return Yn(a.$slice)&&(a.$slice<0?h.splice(0,h.length+a.$slice):h.splice(a.$slice)),y!=h.length||!Wi(p,h)},{descendArray:!0,buildGraph:!0})}),mk=(t,e,n=[],r={})=>ur(e,n,r,(i,s,o)=>Un(t,s,o,(a,l)=>Wi(a[l],i)?!1:(a[l]=e0(r.cloneMode,i),!0),{buildGraph:!0})),CL=(t,e,n=[],r={})=>{const i=[],s=ur(e,n,r,(o,a,l)=>Un(t,a,l,(f,h)=>er(f,h)?(i.push(...mk(t,{[o]:f[h]},n,r)),delete f[h],!0):!1));return Array.from(new Set(s.concat(i)))},AL=(t,e,n=[],r={})=>ur(e,n,r,(i,s,o)=>Un(t,s,o,(a,l)=>er(a,l)?(Lt(a)?a[l]=null:delete a[l],!0):!1)),a1=Object.freeze(Object.defineProperty({__proto__:null,$addToSet:vL,$bit:wL,$currentDate:_L,$inc:bL,$max:SL,$min:IL,$mul:EL,$pop:OL,$pull:pk,$pullAll:kL,$push:xL,$rename:CL,$set:mk,$unset:AL},Symbol.toStringTag,{value:"Module"}));function PL(t){return(e,n,r=[],i={},s={})=>{const o=Object.assign({cloneMode:"copy"},t,s);Object.assign(o,{queryOptions:Lg(Object.assign({useStrictMode:!1},o==null?void 0:o.queryOptions))}),r=r||[],i=i||{};const a=Object.entries(n);Yt(a.length===1,"Update expression must contain only one operator.");const[l,f]=a[0];Yt(er(a1,l),`Update operator '${l}' is not supported.`);const h=a1[l];return Object.keys(i).length&&!new Qs(i,o.queryOptions).test(e)?[]:h(e,f,r,o)}}var bm;function yk(t,e){if(!bm){var n=PL({cloneMode:"none"});bm=(r,i)=>{var s=Mn(r);return n(s,i),s}}return bm(t,e)}function RL(t){return this.incrementalModify(e=>{var n=yk(e,t);return n})}function TL(t){var e=this._data,n=yk(e,t);return this._saveData(n,e)}function ML(t){return this.exec().then(e=>e?Array.isArray(e)?Promise.all(e.map(n=>n.update(t))).then(()=>e):e.update(t).then(()=>e):null)}var NL={name:"update",rxdb:!0,prototypes:{RxDocument:t=>{t.update=TL,t.incrementalUpdate=RL},RxQuery:t=>{t.update=ML}}};const{logger:BL}=$r;async function FL(t=[]){try{gi(uk),gi(nL),gi(mL),gi(NL),gi(JF),gi(BF),gi(QF);for(const e of t)gi(e);BL.log("rxdb plugins loaded")}catch(e){throw new Error(e.message??e)}}const{logger:ea}=$r;class LL{get db(){return this.dbInstance}get dbOptions(){return this.options}get collections(){return this.db.collections}async destroyDb(){try{await this.db.remove(),await this.db.destroy(),this.dbInstance=null,ea.log("database destroy")}catch{ea.log("database destroy error")}}async initDb(e){var n,r;if(!this.dbInstance)try{if(await FL((n=e.options)==null?void 0:n.plugins),this.dbInstance=await SN(e),this.options=e,ea.log(`created database "${this.db.name}" with config "${JSON.stringify(e)}"`),(r=e==null?void 0:e.options)!=null&&r.schemas){const i=await this.initCollections(e.options.schemas);ea.log(`created ${Object.keys(i).length} collections bulk: ${Object.keys(i)}`)}}catch(i){throw ea.log("Error initializing the database:",i),i}}async initCollections(e){try{const n=await AF(e);return await this.db.addCollections(n)}catch(n){throw ea.log("Error initializing collection(s)",n),n}}}var vk={exports:{}},Xe={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gt=typeof Symbol=="function"&&Symbol.for,t0=Gt?Symbol.for("react.element"):60103,n0=Gt?Symbol.for("react.portal"):60106,Ch=Gt?Symbol.for("react.fragment"):60107,Ah=Gt?Symbol.for("react.strict_mode"):60108,Ph=Gt?Symbol.for("react.profiler"):60114,Rh=Gt?Symbol.for("react.provider"):60109,Th=Gt?Symbol.for("react.context"):60110,r0=Gt?Symbol.for("react.async_mode"):60111,Mh=Gt?Symbol.for("react.concurrent_mode"):60111,Nh=Gt?Symbol.for("react.forward_ref"):60112,Bh=Gt?Symbol.for("react.suspense"):60113,$L=Gt?Symbol.for("react.suspense_list"):60120,Fh=Gt?Symbol.for("react.memo"):60115,Lh=Gt?Symbol.for("react.lazy"):60116,jL=Gt?Symbol.for("react.block"):60121,UL=Gt?Symbol.for("react.fundamental"):60117,zL=Gt?Symbol.for("react.responder"):60118,VL=Gt?Symbol.for("react.scope"):60119;function lr(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case t0:switch(t=t.type,t){case r0:case Mh:case Ch:case Ph:case Ah:case Bh:return t;default:switch(t=t&&t.$$typeof,t){case Th:case Nh:case Lh:case Fh:case Rh:return t;default:return e}}case n0:return e}}}function gk(t){return lr(t)===Mh}Xe.AsyncMode=r0;Xe.ConcurrentMode=Mh;Xe.ContextConsumer=Th;Xe.ContextProvider=Rh;Xe.Element=t0;Xe.ForwardRef=Nh;Xe.Fragment=Ch;Xe.Lazy=Lh;Xe.Memo=Fh;Xe.Portal=n0;Xe.Profiler=Ph;Xe.StrictMode=Ah;Xe.Suspense=Bh;Xe.isAsyncMode=function(t){return gk(t)||lr(t)===r0};Xe.isConcurrentMode=gk;Xe.isContextConsumer=function(t){return lr(t)===Th};Xe.isContextProvider=function(t){return lr(t)===Rh};Xe.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===t0};Xe.isForwardRef=function(t){return lr(t)===Nh};Xe.isFragment=function(t){return lr(t)===Ch};Xe.isLazy=function(t){return lr(t)===Lh};Xe.isMemo=function(t){return lr(t)===Fh};Xe.isPortal=function(t){return lr(t)===n0};Xe.isProfiler=function(t){return lr(t)===Ph};Xe.isStrictMode=function(t){return lr(t)===Ah};Xe.isSuspense=function(t){return lr(t)===Bh};Xe.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Ch||t===Mh||t===Ph||t===Ah||t===Bh||t===$L||typeof t=="object"&&t!==null&&(t.$$typeof===Lh||t.$$typeof===Fh||t.$$typeof===Rh||t.$$typeof===Th||t.$$typeof===Nh||t.$$typeof===UL||t.$$typeof===zL||t.$$typeof===VL||t.$$typeof===jL)};Xe.typeOf=lr;vk.exports=Xe;var KL=vk.exports,i0=KL,WL={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},qL={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},HL={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},wk={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s0={};s0[i0.ForwardRef]=HL;s0[i0.Memo]=wk;function u1(t){return i0.isMemo(t)?wk:s0[t.$$typeof]||WL}var QL=Object.defineProperty,YL=Object.getOwnPropertyNames,l1=Object.getOwnPropertySymbols,GL=Object.getOwnPropertyDescriptor,JL=Object.getPrototypeOf,c1=Object.prototype;function _k(t,e,n){if(typeof e!="string"){if(c1){var r=JL(e);r&&r!==c1&&_k(t,r,n)}var i=YL(e);l1&&(i=i.concat(l1(e)));for(var s=u1(t),o=u1(e),a=0;a<i.length;++a){var l=i[a];if(!qL[l]&&!(n&&n[l])&&!(o&&o[l])&&!(s&&s[l])){var f=GL(e,l);try{QL(t,l,f)}catch{}}}}return t}var XL=_k;const ZL=rh(XL);var bk={exports:{}},Ze={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var f1=Object.getOwnPropertySymbols,e3=Object.prototype.hasOwnProperty,t3=Object.prototype.propertyIsEnumerable;function n3(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function r3(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de",Object.getOwnPropertyNames(t)[0]==="5")return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(e).map(function(s){return e[s]});if(r.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(s){i[s]=s}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var i3=r3()?Object.assign:function(t,e){for(var n,r=n3(t),i,s=1;s<arguments.length;s++){n=Object(arguments[s]);for(var o in n)e3.call(n,o)&&(r[o]=n[o]);if(f1){i=f1(n);for(var a=0;a<i.length;a++)t3.call(n,i[a])&&(r[i[a]]=n[i[a]])}}return r};/** @license React v16.14.0
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o0=i3,jr=typeof Symbol=="function"&&Symbol.for,ic=jr?Symbol.for("react.element"):60103,s3=jr?Symbol.for("react.portal"):60106,o3=jr?Symbol.for("react.fragment"):60107,a3=jr?Symbol.for("react.strict_mode"):60108,u3=jr?Symbol.for("react.profiler"):60114,l3=jr?Symbol.for("react.provider"):60109,c3=jr?Symbol.for("react.context"):60110,f3=jr?Symbol.for("react.forward_ref"):60112,d3=jr?Symbol.for("react.suspense"):60113,h3=jr?Symbol.for("react.memo"):60115,p3=jr?Symbol.for("react.lazy"):60116,d1=typeof Symbol=="function"&&Symbol.iterator;function sc(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Sk={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ik={};function cu(t,e,n){this.props=t,this.context=e,this.refs=Ik,this.updater=n||Sk}cu.prototype.isReactComponent={};cu.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error(sc(85));this.updater.enqueueSetState(this,t,e,"setState")};cu.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Ek(){}Ek.prototype=cu.prototype;function a0(t,e,n){this.props=t,this.context=e,this.refs=Ik,this.updater=n||Sk}var u0=a0.prototype=new Ek;u0.constructor=a0;o0(u0,cu.prototype);u0.isPureReactComponent=!0;var l0={current:null},Ok=Object.prototype.hasOwnProperty,kk={key:!0,ref:!0,__self:!0,__source:!0};function Dk(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Ok.call(e,r)&&!kk.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),f=0;f<a;f++)l[f]=arguments[f+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:ic,type:t,key:s,ref:o,props:i,_owner:l0.current}}function m3(t,e){return{$$typeof:ic,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function c0(t){return typeof t=="object"&&t!==null&&t.$$typeof===ic}function y3(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,function(n){return e[n]})}var xk=/\/+/g,Dd=[];function Ck(t,e,n,r){if(Dd.length){var i=Dd.pop();return i.result=t,i.keyPrefix=e,i.func=n,i.context=r,i.count=0,i}return{result:t,keyPrefix:e,func:n,context:r,count:0}}function Ak(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,10>Dd.length&&Dd.push(t)}function iv(t,e,n,r){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case ic:case s3:s=!0}}if(s)return n(r,t,e===""?"."+Sm(t,0):e),1;if(s=0,e=e===""?".":e+":",Array.isArray(t))for(var o=0;o<t.length;o++){i=t[o];var a=e+Sm(i,o);s+=iv(i,a,n,r)}else if(t===null||typeof t!="object"?a=null:(a=d1&&t[d1]||t["@@iterator"],a=typeof a=="function"?a:null),typeof a=="function")for(t=a.call(t),o=0;!(i=t.next()).done;)i=i.value,a=e+Sm(i,o++),s+=iv(i,a,n,r);else if(i==="object")throw n=""+t,Error(sc(31,n==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":n,""));return s}function sv(t,e,n){return t==null?0:iv(t,"",e,n)}function Sm(t,e){return typeof t=="object"&&t!==null&&t.key!=null?y3(t.key):e.toString(36)}function v3(t,e){t.func.call(t.context,e,t.count++)}function g3(t,e,n){var r=t.result,i=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?ov(t,r,n,function(s){return s}):t!=null&&(c0(t)&&(t=m3(t,i+(!t.key||e&&e.key===t.key?"":(""+t.key).replace(xk,"$&/")+"/")+n)),r.push(t))}function ov(t,e,n,r,i){var s="";n!=null&&(s=(""+n).replace(xk,"$&/")+"/"),e=Ck(e,s,r,i),sv(t,g3,e),Ak(e)}var Pk={current:null};function Yi(){var t=Pk.current;if(t===null)throw Error(sc(321));return t}var w3={ReactCurrentDispatcher:Pk,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:l0,IsSomeRendererActing:{current:!1},assign:o0};Ze.Children={map:function(t,e,n){if(t==null)return t;var r=[];return ov(t,r,null,e,n),r},forEach:function(t,e,n){if(t==null)return t;e=Ck(null,null,e,n),sv(t,v3,e),Ak(e)},count:function(t){return sv(t,function(){return null},null)},toArray:function(t){var e=[];return ov(t,e,null,function(n){return n}),e},only:function(t){if(!c0(t))throw Error(sc(143));return t}};Ze.Component=cu;Ze.Fragment=o3;Ze.Profiler=u3;Ze.PureComponent=a0;Ze.StrictMode=a3;Ze.Suspense=d3;Ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=w3;Ze.cloneElement=function(t,e,n){if(t==null)throw Error(sc(267,t));var r=o0({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=l0.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Ok.call(e,l)&&!kk.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var f=0;f<l;f++)a[f]=arguments[f+2];r.children=a}return{$$typeof:ic,type:t.type,key:i,ref:s,props:r,_owner:o}};Ze.createContext=function(t,e){return e===void 0&&(e=null),t={$$typeof:c3,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider={$$typeof:l3,_context:t},t.Consumer=t};Ze.createElement=Dk;Ze.createFactory=function(t){var e=Dk.bind(null,t);return e.type=t,e};Ze.createRef=function(){return{current:null}};Ze.forwardRef=function(t){return{$$typeof:f3,render:t}};Ze.isValidElement=c0;Ze.lazy=function(t){return{$$typeof:p3,_ctor:t,_status:-1,_result:null}};Ze.memo=function(t,e){return{$$typeof:h3,type:t,compare:e===void 0?null:e}};Ze.useCallback=function(t,e){return Yi().useCallback(t,e)};Ze.useContext=function(t,e){return Yi().useContext(t,e)};Ze.useDebugValue=function(){};Ze.useEffect=function(t,e){return Yi().useEffect(t,e)};Ze.useImperativeHandle=function(t,e,n){return Yi().useImperativeHandle(t,e,n)};Ze.useLayoutEffect=function(t,e){return Yi().useLayoutEffect(t,e)};Ze.useMemo=function(t,e){return Yi().useMemo(t,e)};Ze.useReducer=function(t,e,n){return Yi().useReducer(t,e,n)};Ze.useRef=function(t){return Yi().useRef(t)};Ze.useState=function(t){return Yi().useState(t)};Ze.version="16.14.0";bk.exports=Ze;var _3=bk.exports;const ra=rh(_3),b3=new TextDecoder("utf-8"),av=t=>b3.decode(t),S3=new TextEncoder,f0=t=>S3.encode(t),[I4,I3]=(()=>{const t=()=>{throw new Error("BigInt is not available in this environment")};function e(){throw t()}return e.asIntN=()=>{throw t()},e.asUintN=()=>{throw t()},typeof BigInt<"u"?[BigInt,!0]:[e,!1]})(),[oc,E4]=(()=>{const t=()=>{throw new Error("BigInt64Array is not available in this environment")};class e{static get BYTES_PER_ELEMENT(){return 8}static of(){throw t()}static from(){throw t()}constructor(){throw t()}}return typeof BigInt64Array<"u"?[BigInt64Array,!0]:[e,!1]})(),[ac,O4]=(()=>{const t=()=>{throw new Error("BigUint64Array is not available in this environment")};class e{static get BYTES_PER_ELEMENT(){return 8}static of(){throw t()}static from(){throw t()}constructor(){throw t()}}return typeof BigUint64Array<"u"?[BigUint64Array,!0]:[e,!1]})(),E3=t=>typeof t=="number",Rk=t=>typeof t=="boolean",Ut=t=>typeof t=="function",Fn=t=>t!=null&&Object(t)===t,Ns=t=>Fn(t)&&Ut(t.then),uc=t=>Fn(t)&&Ut(t[Symbol.iterator]),fu=t=>Fn(t)&&Ut(t[Symbol.asyncIterator]),uv=t=>Fn(t)&&Fn(t.schema),Tk=t=>Fn(t)&&"done"in t&&"value"in t,Mk=t=>Fn(t)&&Ut(t.stat)&&E3(t.fd),Nk=t=>Fn(t)&&d0(t.body),$h=t=>"_getDOMStream"in t&&"_getNodeStream"in t,O3=t=>Fn(t)&&Ut(t.abort)&&Ut(t.getWriter)&&!$h(t),d0=t=>Fn(t)&&Ut(t.cancel)&&Ut(t.getReader)&&!$h(t),k3=t=>Fn(t)&&Ut(t.end)&&Ut(t.write)&&Rk(t.writable)&&!$h(t),Bk=t=>Fn(t)&&Ut(t.read)&&Ut(t.pipe)&&Rk(t.readable)&&!$h(t),D3=t=>Fn(t)&&Ut(t.clear)&&Ut(t.bytes)&&Ut(t.position)&&Ut(t.setPosition)&&Ut(t.capacity)&&Ut(t.getBufferIdentifier)&&Ut(t.createLong),h0=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function x3(t){const e=t[0]?[t[0]]:[];let n,r,i,s;for(let o,a,l=0,f=0,h=t.length;++l<h;){if(o=e[f],a=t[l],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(e[++f]=a);continue}if({byteOffset:n,byteLength:i}=o,{byteOffset:r,byteLength:s}=a,n+i<r||r+s<n){a&&(e[++f]=a);continue}e[f]=new Uint8Array(o.buffer,n,r-n+s)}return e}function h1(t,e,n=0,r=e.byteLength){const i=t.byteLength,s=new Uint8Array(t.buffer,t.byteOffset,i),o=new Uint8Array(e.buffer,e.byteOffset,Math.min(r,i));return s.set(o,n),t}function fi(t,e){const n=x3(t),r=n.reduce((h,p)=>h+p.byteLength,0);let i,s,o,a=0,l=-1;const f=Math.min(e||Number.POSITIVE_INFINITY,r);for(const h=n.length;++l<h;){if(i=n[l],s=i.subarray(0,Math.min(i.length,f-a)),f<=a+s.length){s.length<i.length?n[l]=i.subarray(s.length):s.length===i.length&&l++,o?h1(o,s,a):o=s;break}h1(o||(o=new Uint8Array(f)),s,a),a+=s.length}return[o||new Uint8Array(0),n.slice(l),r-(o?o.byteLength:0)]}function rt(t,e){let n=Tk(e)?e.value:e;return n instanceof t?t===Uint8Array?new t(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=f0(n)),n instanceof ArrayBuffer?new t(n):n instanceof h0?new t(n):D3(n)?rt(t,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new t(0):new t(n.buffer,n.byteOffset,n.byteLength/t.BYTES_PER_ELEMENT):t.from(n)):new t(0)}const Fu=t=>rt(Int32Array,t),Ue=t=>rt(Uint8Array,t),lv=t=>(t.next(),t);function*C3(t,e){const n=function*(i){yield i},r=typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof h0?n(e):uc(e)?e:n(e);return yield*lv(function*(i){let s=null;do s=i.next(yield rt(t,s));while(!s.done)}(r[Symbol.iterator]())),new t}const A3=t=>C3(Uint8Array,t);function Fk(t,e){return Ar(this,arguments,function*(){if(Ns(e))return yield ge(yield ge(yield*Df(Ds(Fk(t,yield ge(e))))));const r=function(o){return Ar(this,arguments,function*(){yield yield ge(yield ge(o))})},i=function(o){return Ar(this,arguments,function*(){yield ge(yield*Df(Ds(lv(function*(a){let l=null;do l=a.next(yield l==null?void 0:l.value);while(!l.done)}(o[Symbol.iterator]())))))})},s=typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof h0?r(e):uc(e)?i(e):fu(e)?e:r(e);return yield ge(yield*Df(Ds(lv(function(o){return Ar(this,arguments,function*(){let a=null;do a=yield ge(o.next(yield yield ge(rt(t,a))));while(!a.done)})}(s[Symbol.asyncIterator]()))))),yield ge(new t)})}const P3=t=>Fk(Uint8Array,t);function p0(t,e,n){if(t!==0){n=n.slice(0,e+1);for(let r=-1;++r<=e;)n[r]+=t}return n}function R3(t,e){let n=0;const r=t.length;if(r!==e.length)return!1;if(r>0)do if(t[n]!==e[n])return!1;while(++n<r);return!0}const dr={fromIterable(t){return cf(T3(t))},fromAsyncIterable(t){return cf(M3(t))},fromDOMStream(t){return cf(N3(t))},fromNodeStream(t){return cf(F3(t))},toDOMStream(t,e){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(t,e){throw new Error('"toNodeStream" not available in this environment')}},cf=t=>(t.next(),t);function*T3(t){let e,n=!1,r=[],i,s,o,a=0;function l(){return s==="peek"?fi(r,o)[0]:([i,r,a]=fi(r,o),i)}({cmd:s,size:o}=yield null);const f=A3(t)[Symbol.iterator]();try{do if({done:e,value:i}=Number.isNaN(o-a)?f.next():f.next(o-a),!e&&i.byteLength>0&&(r.push(i),a+=i.byteLength),e||o<=a)do({cmd:s,size:o}=yield l());while(o<a);while(!e)}catch(h){(n=!0)&&typeof f.throw=="function"&&f.throw(h)}finally{n===!1&&typeof f.return=="function"&&f.return(null)}return null}function M3(t){return Ar(this,arguments,function*(){let n,r=!1,i=[],s,o,a,l=0;function f(){return o==="peek"?fi(i,a)[0]:([s,i,l]=fi(i,a),s)}({cmd:o,size:a}=yield yield ge(null));const h=P3(t)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(a-l)?yield ge(h.next()):yield ge(h.next(a-l)),!n&&s.byteLength>0&&(i.push(s),l+=s.byteLength),n||a<=l)do({cmd:o,size:a}=yield yield ge(f()));while(a<l);while(!n)}catch(p){(r=!0)&&typeof h.throw=="function"&&(yield ge(h.throw(p)))}finally{r===!1&&typeof h.return=="function"&&(yield ge(h.return(new Uint8Array(0))))}return yield ge(null)})}function N3(t){return Ar(this,arguments,function*(){let n=!1,r=!1,i=[],s,o,a,l=0;function f(){return o==="peek"?fi(i,a)[0]:([s,i,l]=fi(i,a),s)}({cmd:o,size:a}=yield yield ge(null));const h=new B3(t);try{do if({done:n,value:s}=Number.isNaN(a-l)?yield ge(h.read()):yield ge(h.read(a-l)),!n&&s.byteLength>0&&(i.push(Ue(s)),l+=s.byteLength),n||a<=l)do({cmd:o,size:a}=yield yield ge(f()));while(a<l);while(!n)}catch(p){(r=!0)&&(yield ge(h.cancel(p)))}finally{r===!1?yield ge(h.cancel()):t.locked&&h.releaseLock()}return yield ge(null)})}class B3{constructor(e){this.source=e,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(e){return ve(this,void 0,void 0,function*(){const{reader:n,source:r}=this;n&&(yield n.cancel(e).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(e){return ve(this,void 0,void 0,function*(){if(e===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=Ue(n)),n})}}const Im=(t,e)=>{const n=i=>r([e,i]);let r;return[e,n,new Promise(i=>(r=i)&&t.once(e,n))]};function F3(t){return Ar(this,arguments,function*(){const n=[];let r="error",i=!1,s=null,o,a,l=0,f=[],h;function p(){return o==="peek"?fi(f,a)[0]:([h,f,l]=fi(f,a),h)}if({cmd:o,size:a}=yield yield ge(null),t.isTTY)return yield yield ge(new Uint8Array(0)),yield ge(null);try{n[0]=Im(t,"end"),n[1]=Im(t,"error");do{if(n[2]=Im(t,"readable"),[r,s]=yield ge(Promise.race(n.map(w=>w[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(a-l)?(h=Ue(t.read(a-l)),h.byteLength<a-l&&(h=Ue(t.read()))):h=Ue(t.read()),h.byteLength>0&&(f.push(h),l+=h.byteLength)),i||a<=l)do({cmd:o,size:a}=yield yield ge(p()));while(a<l)}while(!i)}finally{yield ge(y(n,r==="error"?s:null))}return yield ge(null);function y(w,I){return h=f=null,new Promise((E,$)=>{for(const[S,_]of w)t.off(S,_);try{const S=t.destroy;S&&S.call(t,I),I=void 0}catch(S){I=S||I}finally{I!=null?$(I):E()}})}})}var Gn;(function(t){t[t.V1=0]="V1",t[t.V2=1]="V2",t[t.V3=2]="V3",t[t.V4=3]="V4",t[t.V5=4]="V5"})(Gn||(Gn={}));var rr;(function(t){t[t.Sparse=0]="Sparse",t[t.Dense=1]="Dense"})(rr||(rr={}));var Tn;(function(t){t[t.HALF=0]="HALF",t[t.SINGLE=1]="SINGLE",t[t.DOUBLE=2]="DOUBLE"})(Tn||(Tn={}));var Hi;(function(t){t[t.DAY=0]="DAY",t[t.MILLISECOND=1]="MILLISECOND"})(Hi||(Hi={}));var ze;(function(t){t[t.SECOND=0]="SECOND",t[t.MILLISECOND=1]="MILLISECOND",t[t.MICROSECOND=2]="MICROSECOND",t[t.NANOSECOND=3]="NANOSECOND"})(ze||(ze={}));var Bs;(function(t){t[t.YEAR_MONTH=0]="YEAR_MONTH",t[t.DAY_TIME=1]="DAY_TIME",t[t.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(Bs||(Bs={}));var Ve;(function(t){t[t.NONE=0]="NONE",t[t.Schema=1]="Schema",t[t.DictionaryBatch=2]="DictionaryBatch",t[t.RecordBatch=3]="RecordBatch",t[t.Tensor=4]="Tensor",t[t.SparseTensor=5]="SparseTensor"})(Ve||(Ve={}));var N;(function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.Float=3]="Float",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct=13]="Struct",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Dictionary=-1]="Dictionary",t[t.Int8=-2]="Int8",t[t.Int16=-3]="Int16",t[t.Int32=-4]="Int32",t[t.Int64=-5]="Int64",t[t.Uint8=-6]="Uint8",t[t.Uint16=-7]="Uint16",t[t.Uint32=-8]="Uint32",t[t.Uint64=-9]="Uint64",t[t.Float16=-10]="Float16",t[t.Float32=-11]="Float32",t[t.Float64=-12]="Float64",t[t.DateDay=-13]="DateDay",t[t.DateMillisecond=-14]="DateMillisecond",t[t.TimestampSecond=-15]="TimestampSecond",t[t.TimestampMillisecond=-16]="TimestampMillisecond",t[t.TimestampMicrosecond=-17]="TimestampMicrosecond",t[t.TimestampNanosecond=-18]="TimestampNanosecond",t[t.TimeSecond=-19]="TimeSecond",t[t.TimeMillisecond=-20]="TimeMillisecond",t[t.TimeMicrosecond=-21]="TimeMicrosecond",t[t.TimeNanosecond=-22]="TimeNanosecond",t[t.DenseUnion=-23]="DenseUnion",t[t.SparseUnion=-24]="SparseUnion",t[t.IntervalDayTime=-25]="IntervalDayTime",t[t.IntervalYearMonth=-26]="IntervalYearMonth"})(N||(N={}));var bi;(function(t){t[t.OFFSET=0]="OFFSET",t[t.DATA=1]="DATA",t[t.VALIDITY=2]="VALIDITY",t[t.TYPE=3]="TYPE"})(bi||(bi={}));const L3=void 0;function Nl(t){if(t===null)return"null";if(t===L3)return"undefined";switch(typeof t){case"number":return`${t}`;case"bigint":return`${t}`;case"string":return`"${t}"`}return typeof t[Symbol.toPrimitive]=="function"?t[Symbol.toPrimitive]("string"):ArrayBuffer.isView(t)?t instanceof oc||t instanceof ac?`[${[...t].map(e=>Nl(e))}]`:`[${t}]`:ArrayBuffer.isView(t)?`[${t}]`:JSON.stringify(t,(e,n)=>typeof n=="bigint"?`${n}`:n)}const $3=Symbol.for("isArrowBigNum");function Ur(t,...e){return e.length===0?Object.setPrototypeOf(rt(this.TypedArray,t),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(t,...e),this.constructor.prototype)}Ur.prototype[$3]=!0;Ur.prototype.toJSON=function(){return`"${Ao(this)}"`};Ur.prototype.valueOf=function(){return Lk(this)};Ur.prototype.toString=function(){return Ao(this)};Ur.prototype[Symbol.toPrimitive]=function(t="default"){switch(t){case"number":return Lk(this);case"string":return Ao(this);case"default":return cv(this)}return Ao(this)};function Da(...t){return Ur.apply(this,t)}function xa(...t){return Ur.apply(this,t)}function Bl(...t){return Ur.apply(this,t)}Object.setPrototypeOf(Da.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(xa.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(Bl.prototype,Object.create(Uint32Array.prototype));Object.assign(Da.prototype,Ur.prototype,{constructor:Da,signed:!0,TypedArray:Int32Array,BigIntArray:oc});Object.assign(xa.prototype,Ur.prototype,{constructor:xa,signed:!1,TypedArray:Uint32Array,BigIntArray:ac});Object.assign(Bl.prototype,Ur.prototype,{constructor:Bl,signed:!0,TypedArray:Uint32Array,BigIntArray:ac});function Lk(t){const{buffer:e,byteOffset:n,length:r,signed:i}=t,s=new ac(e,n,r),o=i&&s[s.length-1]&BigInt(1)<<BigInt(63);let a=BigInt(o?1:0),l=BigInt(0);if(o){for(const f of s)a+=~f*(BigInt(1)<<BigInt(32)*l++);a*=BigInt(-1)}else for(const f of s)a+=f*(BigInt(1)<<BigInt(32)*l++);return a}let Ao,cv;I3?(cv=t=>t.byteLength===8?new t.BigIntArray(t.buffer,t.byteOffset,1)[0]:Em(t),Ao=t=>t.byteLength===8?`${new t.BigIntArray(t.buffer,t.byteOffset,1)[0]}`:Em(t)):(Ao=Em,cv=Ao);function Em(t){let e="";const n=new Uint32Array(2);let r=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let s=-1;const o=r.length-1;do{for(n[0]=r[s=0];s<o;)r[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+r[s];r[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,e=`${n[0]}${e}`}while(i[0]||i[1]||i[2]||i[3]);return e??"0"}class m0{static new(e,n){switch(n){case!0:return new Da(e);case!1:return new xa(e)}switch(e.constructor){case Int8Array:case Int16Array:case Int32Array:case oc:return new Da(e)}return e.byteLength===16?new Bl(e):new xa(e)}static signed(e){return new Da(e)}static unsigned(e){return new xa(e)}static decimal(e){return new Bl(e)}constructor(e,n){return m0.new(e,n)}}var $k,jk,Uk,zk,Vk,Kk,Wk,qk,Hk,Qk,Yk,Gk,Jk,Xk,Zk,eD,tD,nD,rD;class we{static isNull(e){return(e==null?void 0:e.typeId)===N.Null}static isInt(e){return(e==null?void 0:e.typeId)===N.Int}static isFloat(e){return(e==null?void 0:e.typeId)===N.Float}static isBinary(e){return(e==null?void 0:e.typeId)===N.Binary}static isUtf8(e){return(e==null?void 0:e.typeId)===N.Utf8}static isBool(e){return(e==null?void 0:e.typeId)===N.Bool}static isDecimal(e){return(e==null?void 0:e.typeId)===N.Decimal}static isDate(e){return(e==null?void 0:e.typeId)===N.Date}static isTime(e){return(e==null?void 0:e.typeId)===N.Time}static isTimestamp(e){return(e==null?void 0:e.typeId)===N.Timestamp}static isInterval(e){return(e==null?void 0:e.typeId)===N.Interval}static isList(e){return(e==null?void 0:e.typeId)===N.List}static isStruct(e){return(e==null?void 0:e.typeId)===N.Struct}static isUnion(e){return(e==null?void 0:e.typeId)===N.Union}static isFixedSizeBinary(e){return(e==null?void 0:e.typeId)===N.FixedSizeBinary}static isFixedSizeList(e){return(e==null?void 0:e.typeId)===N.FixedSizeList}static isMap(e){return(e==null?void 0:e.typeId)===N.Map}static isDictionary(e){return(e==null?void 0:e.typeId)===N.Dictionary}static isDenseUnion(e){return we.isUnion(e)&&e.mode===rr.Dense}static isSparseUnion(e){return we.isUnion(e)&&e.mode===rr.Sparse}get typeId(){return N.NONE}}$k=Symbol.toStringTag;we[$k]=(t=>(t.children=null,t.ArrayType=Array,t[Symbol.toStringTag]="DataType"))(we.prototype);let Fs=class extends we{toString(){return"Null"}get typeId(){return N.Null}};jk=Symbol.toStringTag;Fs[jk]=(t=>t[Symbol.toStringTag]="Null")(Fs.prototype);class Ls extends we{constructor(e,n){super(),this.isSigned=e,this.bitWidth=n}get typeId(){return N.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?oc:ac}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}Uk=Symbol.toStringTag;Ls[Uk]=(t=>(t.isSigned=null,t.bitWidth=null,t[Symbol.toStringTag]="Int"))(Ls.prototype);class Fl extends Ls{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}Object.defineProperty(Fl.prototype,"ArrayType",{value:Int32Array});class Ll extends we{constructor(e){super(),this.precision=e}get typeId(){return N.Float}get ArrayType(){switch(this.precision){case Tn.HALF:return Uint16Array;case Tn.SINGLE:return Float32Array;case Tn.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}zk=Symbol.toStringTag;Ll[zk]=(t=>(t.precision=null,t[Symbol.toStringTag]="Float"))(Ll.prototype);let xd=class extends we{constructor(){super()}get typeId(){return N.Binary}toString(){return"Binary"}};Vk=Symbol.toStringTag;xd[Vk]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Binary"))(xd.prototype);let Cd=class extends we{constructor(){super()}get typeId(){return N.Utf8}toString(){return"Utf8"}};Kk=Symbol.toStringTag;Cd[Kk]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Utf8"))(Cd.prototype);let Ad=class extends we{constructor(){super()}get typeId(){return N.Bool}toString(){return"Bool"}};Wk=Symbol.toStringTag;Ad[Wk]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Bool"))(Ad.prototype);let Pd=class extends we{constructor(e,n,r=128){super(),this.scale=e,this.precision=n,this.bitWidth=r}get typeId(){return N.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};qk=Symbol.toStringTag;Pd[qk]=(t=>(t.scale=null,t.precision=null,t.ArrayType=Uint32Array,t[Symbol.toStringTag]="Decimal"))(Pd.prototype);class Rd extends we{constructor(e){super(),this.unit=e}get typeId(){return N.Date}toString(){return`Date${(this.unit+1)*32}<${Hi[this.unit]}>`}}Hk=Symbol.toStringTag;Rd[Hk]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Date"))(Rd.prototype);class $l extends we{constructor(e,n){super(),this.unit=e,this.bitWidth=n}get typeId(){return N.Time}toString(){return`Time${this.bitWidth}<${ze[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return oc}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}Qk=Symbol.toStringTag;$l[Qk]=(t=>(t.unit=null,t.bitWidth=null,t[Symbol.toStringTag]="Time"))($l.prototype);class Td extends we{constructor(e,n){super(),this.unit=e,this.timezone=n}get typeId(){return N.Timestamp}toString(){return`Timestamp<${ze[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}Yk=Symbol.toStringTag;Td[Yk]=(t=>(t.unit=null,t.timezone=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Timestamp"))(Td.prototype);class Md extends we{constructor(e){super(),this.unit=e}get typeId(){return N.Interval}toString(){return`Interval<${Bs[this.unit]}>`}}Gk=Symbol.toStringTag;Md[Gk]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Interval"))(Md.prototype);let Nd=class extends we{constructor(e){super(),this.children=[e]}get typeId(){return N.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};Jk=Symbol.toStringTag;Nd[Jk]=(t=>(t.children=null,t[Symbol.toStringTag]="List"))(Nd.prototype);class vn extends we{constructor(e){super(),this.children=e}get typeId(){return N.Struct}toString(){return`Struct<{${this.children.map(e=>`${e.name}:${e.type}`).join(", ")}}>`}}Xk=Symbol.toStringTag;vn[Xk]=(t=>(t.children=null,t[Symbol.toStringTag]="Struct"))(vn.prototype);class Bd extends we{constructor(e,n,r){super(),this.mode=e,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((i,s,o)=>(i[s]=o)&&i||i,Object.create(null))}get typeId(){return N.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(e=>`${e.type}`).join(" | ")}>`}}Zk=Symbol.toStringTag;Bd[Zk]=(t=>(t.mode=null,t.typeIds=null,t.children=null,t.typeIdToChildIndex=null,t.ArrayType=Int8Array,t[Symbol.toStringTag]="Union"))(Bd.prototype);let Fd=class extends we{constructor(e){super(),this.byteWidth=e}get typeId(){return N.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};eD=Symbol.toStringTag;Fd[eD]=(t=>(t.byteWidth=null,t.ArrayType=Uint8Array,t[Symbol.toStringTag]="FixedSizeBinary"))(Fd.prototype);let Ld=class extends we{constructor(e,n){super(),this.listSize=e,this.children=[n]}get typeId(){return N.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};tD=Symbol.toStringTag;Ld[tD]=(t=>(t.children=null,t.listSize=null,t[Symbol.toStringTag]="FixedSizeList"))(Ld.prototype);class $d extends we{constructor(e,n=!1){super(),this.children=[e],this.keysSorted=n}get typeId(){return N.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(e=>`${e.name}:${e.type}`).join(", ")}}>`}}nD=Symbol.toStringTag;$d[nD]=(t=>(t.children=null,t.keysSorted=null,t[Symbol.toStringTag]="Map_"))($d.prototype);const j3=(t=>()=>++t)(-1);class Qa extends we{constructor(e,n,r,i){super(),this.indices=n,this.dictionary=e,this.isOrdered=i||!1,this.id=r==null?j3():typeof r=="number"?r:r.low}get typeId(){return N.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}rD=Symbol.toStringTag;Qa[rD]=(t=>(t.id=null,t.indices=null,t.isOrdered=null,t.dictionary=null,t[Symbol.toStringTag]="Dictionary"))(Qa.prototype);function Si(t){const e=t;switch(t.typeId){case N.Decimal:return t.bitWidth/32;case N.Timestamp:return 2;case N.Date:return 1+e.unit;case N.Interval:return 1+e.unit;case N.FixedSizeList:return e.listSize;case N.FixedSizeBinary:return e.byteWidth;default:return 1}}class Be{visitMany(e,...n){return e.map((r,i)=>this.visit(r,...n.map(s=>s[i])))}visit(...e){return this.getVisitFn(e[0],!1).apply(this,e)}getVisitFn(e,n=!0){return U3(this,e,n)}getVisitFnByTypeId(e,n=!0){return ia(this,e,n)}visitNull(e,...n){return null}visitBool(e,...n){return null}visitInt(e,...n){return null}visitFloat(e,...n){return null}visitUtf8(e,...n){return null}visitBinary(e,...n){return null}visitFixedSizeBinary(e,...n){return null}visitDate(e,...n){return null}visitTimestamp(e,...n){return null}visitTime(e,...n){return null}visitDecimal(e,...n){return null}visitList(e,...n){return null}visitStruct(e,...n){return null}visitUnion(e,...n){return null}visitDictionary(e,...n){return null}visitInterval(e,...n){return null}visitFixedSizeList(e,...n){return null}visitMap(e,...n){return null}}function U3(t,e,n=!0){return typeof e=="number"?ia(t,e,n):typeof e=="string"&&e in N?ia(t,N[e],n):e&&e instanceof we?ia(t,p1(e),n):e!=null&&e.type&&e.type instanceof we?ia(t,p1(e.type),n):ia(t,N.NONE,n)}function ia(t,e,n=!0){let r=null;switch(e){case N.Null:r=t.visitNull;break;case N.Bool:r=t.visitBool;break;case N.Int:r=t.visitInt;break;case N.Int8:r=t.visitInt8||t.visitInt;break;case N.Int16:r=t.visitInt16||t.visitInt;break;case N.Int32:r=t.visitInt32||t.visitInt;break;case N.Int64:r=t.visitInt64||t.visitInt;break;case N.Uint8:r=t.visitUint8||t.visitInt;break;case N.Uint16:r=t.visitUint16||t.visitInt;break;case N.Uint32:r=t.visitUint32||t.visitInt;break;case N.Uint64:r=t.visitUint64||t.visitInt;break;case N.Float:r=t.visitFloat;break;case N.Float16:r=t.visitFloat16||t.visitFloat;break;case N.Float32:r=t.visitFloat32||t.visitFloat;break;case N.Float64:r=t.visitFloat64||t.visitFloat;break;case N.Utf8:r=t.visitUtf8;break;case N.Binary:r=t.visitBinary;break;case N.FixedSizeBinary:r=t.visitFixedSizeBinary;break;case N.Date:r=t.visitDate;break;case N.DateDay:r=t.visitDateDay||t.visitDate;break;case N.DateMillisecond:r=t.visitDateMillisecond||t.visitDate;break;case N.Timestamp:r=t.visitTimestamp;break;case N.TimestampSecond:r=t.visitTimestampSecond||t.visitTimestamp;break;case N.TimestampMillisecond:r=t.visitTimestampMillisecond||t.visitTimestamp;break;case N.TimestampMicrosecond:r=t.visitTimestampMicrosecond||t.visitTimestamp;break;case N.TimestampNanosecond:r=t.visitTimestampNanosecond||t.visitTimestamp;break;case N.Time:r=t.visitTime;break;case N.TimeSecond:r=t.visitTimeSecond||t.visitTime;break;case N.TimeMillisecond:r=t.visitTimeMillisecond||t.visitTime;break;case N.TimeMicrosecond:r=t.visitTimeMicrosecond||t.visitTime;break;case N.TimeNanosecond:r=t.visitTimeNanosecond||t.visitTime;break;case N.Decimal:r=t.visitDecimal;break;case N.List:r=t.visitList;break;case N.Struct:r=t.visitStruct;break;case N.Union:r=t.visitUnion;break;case N.DenseUnion:r=t.visitDenseUnion||t.visitUnion;break;case N.SparseUnion:r=t.visitSparseUnion||t.visitUnion;break;case N.Dictionary:r=t.visitDictionary;break;case N.Interval:r=t.visitInterval;break;case N.IntervalDayTime:r=t.visitIntervalDayTime||t.visitInterval;break;case N.IntervalYearMonth:r=t.visitIntervalYearMonth||t.visitInterval;break;case N.FixedSizeList:r=t.visitFixedSizeList;break;case N.Map:r=t.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${N[e]}'`)}function p1(t){switch(t.typeId){case N.Null:return N.Null;case N.Int:{const{bitWidth:e,isSigned:n}=t;switch(e){case 8:return n?N.Int8:N.Uint8;case 16:return n?N.Int16:N.Uint16;case 32:return n?N.Int32:N.Uint32;case 64:return n?N.Int64:N.Uint64}return N.Int}case N.Float:switch(t.precision){case Tn.HALF:return N.Float16;case Tn.SINGLE:return N.Float32;case Tn.DOUBLE:return N.Float64}return N.Float;case N.Binary:return N.Binary;case N.Utf8:return N.Utf8;case N.Bool:return N.Bool;case N.Decimal:return N.Decimal;case N.Time:switch(t.unit){case ze.SECOND:return N.TimeSecond;case ze.MILLISECOND:return N.TimeMillisecond;case ze.MICROSECOND:return N.TimeMicrosecond;case ze.NANOSECOND:return N.TimeNanosecond}return N.Time;case N.Timestamp:switch(t.unit){case ze.SECOND:return N.TimestampSecond;case ze.MILLISECOND:return N.TimestampMillisecond;case ze.MICROSECOND:return N.TimestampMicrosecond;case ze.NANOSECOND:return N.TimestampNanosecond}return N.Timestamp;case N.Date:switch(t.unit){case Hi.DAY:return N.DateDay;case Hi.MILLISECOND:return N.DateMillisecond}return N.Date;case N.Interval:switch(t.unit){case Bs.DAY_TIME:return N.IntervalDayTime;case Bs.YEAR_MONTH:return N.IntervalYearMonth}return N.Interval;case N.Map:return N.Map;case N.List:return N.List;case N.Struct:return N.Struct;case N.Union:switch(t.mode){case rr.Dense:return N.DenseUnion;case rr.Sparse:return N.SparseUnion}return N.Union;case N.FixedSizeBinary:return N.FixedSizeBinary;case N.FixedSizeList:return N.FixedSizeList;case N.Dictionary:return N.Dictionary}throw new Error(`Unrecognized type '${N[t.typeId]}'`)}Be.prototype.visitInt8=null;Be.prototype.visitInt16=null;Be.prototype.visitInt32=null;Be.prototype.visitInt64=null;Be.prototype.visitUint8=null;Be.prototype.visitUint16=null;Be.prototype.visitUint32=null;Be.prototype.visitUint64=null;Be.prototype.visitFloat16=null;Be.prototype.visitFloat32=null;Be.prototype.visitFloat64=null;Be.prototype.visitDateDay=null;Be.prototype.visitDateMillisecond=null;Be.prototype.visitTimestampSecond=null;Be.prototype.visitTimestampMillisecond=null;Be.prototype.visitTimestampMicrosecond=null;Be.prototype.visitTimestampNanosecond=null;Be.prototype.visitTimeSecond=null;Be.prototype.visitTimeMillisecond=null;Be.prototype.visitTimeMicrosecond=null;Be.prototype.visitTimeNanosecond=null;Be.prototype.visitDenseUnion=null;Be.prototype.visitSparseUnion=null;Be.prototype.visitIntervalDayTime=null;Be.prototype.visitIntervalYearMonth=null;const iD=new Float64Array(1),ta=new Uint32Array(iD.buffer);function sD(t){const e=(t&31744)>>10,n=(t&1023)/1024,r=Math.pow(-1,(t&32768)>>15);switch(e){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,e-15)*(1+n)}function z3(t){if(t!==t)return 32256;iD[0]=t;const e=(ta[1]&2147483648)>>16&65535;let n=ta[1]&2146435072,r=0;return n>=1089470464?ta[0]>0?n=31744:(n=(n&2080374784)>>16,r=(ta[1]&1048575)>>10):n<=1056964608?(r=1048576+(ta[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=(ta[1]&1048575)+512>>10),e|n|r&65535}class Ee extends Be{}function xe(t){return(e,n,r)=>{if(e.setValid(n,r!=null))return t(e,n,r)}}const V3=(t,e,n)=>{t[e]=Math.trunc(n/864e5)},y0=(t,e,n)=>{t[e]=Math.trunc(n%4294967296),t[e+1]=Math.trunc(n/4294967296)},K3=(t,e,n)=>{t[e]=Math.trunc(n*1e3%4294967296),t[e+1]=Math.trunc(n*1e3/4294967296)},W3=(t,e,n)=>{t[e]=Math.trunc(n*1e6%4294967296),t[e+1]=Math.trunc(n*1e6/4294967296)},oD=(t,e,n,r)=>{if(n+1<e.length){const{[n]:i,[n+1]:s}=e;t.set(r.subarray(0,s-i),i)}},q3=({offset:t,values:e},n,r)=>{const i=t+n;r?e[i>>3]|=1<<i%8:e[i>>3]&=~(1<<i%8)},Gi=({values:t},e,n)=>{t[e]=n},v0=({values:t},e,n)=>{t[e]=n},aD=({values:t},e,n)=>{t[e]=z3(n)},H3=(t,e,n)=>{switch(t.type.precision){case Tn.HALF:return aD(t,e,n);case Tn.SINGLE:case Tn.DOUBLE:return v0(t,e,n)}},uD=({values:t},e,n)=>{V3(t,e,n.valueOf())},lD=({values:t},e,n)=>{y0(t,e*2,n.valueOf())},Q3=({stride:t,values:e},n,r)=>{e.set(r.subarray(0,t),t*n)},Y3=({values:t,valueOffsets:e},n,r)=>oD(t,e,n,r),G3=({values:t,valueOffsets:e},n,r)=>{oD(t,e,n,f0(r))},J3=(t,e,n)=>{t.type.unit===Hi.DAY?uD(t,e,n):lD(t,e,n)},cD=({values:t},e,n)=>y0(t,e*2,n/1e3),fD=({values:t},e,n)=>y0(t,e*2,n),dD=({values:t},e,n)=>K3(t,e*2,n),hD=({values:t},e,n)=>W3(t,e*2,n),X3=(t,e,n)=>{switch(t.type.unit){case ze.SECOND:return cD(t,e,n);case ze.MILLISECOND:return fD(t,e,n);case ze.MICROSECOND:return dD(t,e,n);case ze.NANOSECOND:return hD(t,e,n)}},pD=({values:t},e,n)=>{t[e]=n},mD=({values:t},e,n)=>{t[e]=n},yD=({values:t},e,n)=>{t[e]=n},vD=({values:t},e,n)=>{t[e]=n},Z3=(t,e,n)=>{switch(t.type.unit){case ze.SECOND:return pD(t,e,n);case ze.MILLISECOND:return mD(t,e,n);case ze.MICROSECOND:return yD(t,e,n);case ze.NANOSECOND:return vD(t,e,n)}},e$=({values:t,stride:e},n,r)=>{t.set(r.subarray(0,e),e*n)},t$=(t,e,n)=>{const r=t.children[0],i=t.valueOffsets,s=Sr.getVisitFn(r);if(Array.isArray(n))for(let o=-1,a=i[e],l=i[e+1];a<l;)s(r,a++,n[++o]);else for(let o=-1,a=i[e],l=i[e+1];a<l;)s(r,a++,n.get(++o))},n$=(t,e,n)=>{const r=t.children[0],{valueOffsets:i}=t,s=Sr.getVisitFn(r);let{[e]:o,[e+1]:a}=i;const l=n instanceof Map?n.entries():Object.entries(n);for(const f of l)if(s(r,o,f),++o>=a)break},r$=(t,e)=>(n,r,i,s)=>r&&n(r,t,e[s]),i$=(t,e)=>(n,r,i,s)=>r&&n(r,t,e.get(s)),s$=(t,e)=>(n,r,i,s)=>r&&n(r,t,e.get(i.name)),o$=(t,e)=>(n,r,i,s)=>r&&n(r,t,e[i.name]),a$=(t,e,n)=>{const r=t.type.children.map(s=>Sr.getVisitFn(s.type)),i=n instanceof Map?s$(e,n):n instanceof Ke?i$(e,n):Array.isArray(n)?r$(e,n):o$(e,n);t.type.children.forEach((s,o)=>i(r[o],t.children[o],s,o))},u$=(t,e,n)=>{t.type.mode===rr.Dense?gD(t,e,n):wD(t,e,n)},gD=(t,e,n)=>{const r=t.type.typeIdToChildIndex[t.typeIds[e]],i=t.children[r];Sr.visit(i,t.valueOffsets[e],n)},wD=(t,e,n)=>{const r=t.type.typeIdToChildIndex[t.typeIds[e]],i=t.children[r];Sr.visit(i,e,n)},l$=(t,e,n)=>{var r;(r=t.dictionary)===null||r===void 0||r.set(t.values[e],n)},c$=(t,e,n)=>{t.type.unit===Bs.DAY_TIME?_D(t,e,n):bD(t,e,n)},_D=({values:t},e,n)=>{t.set(n.subarray(0,2),2*e)},bD=({values:t},e,n)=>{t[e]=n[0]*12+n[1]%12},f$=(t,e,n)=>{const{stride:r}=t,i=t.children[0],s=Sr.getVisitFn(i);if(Array.isArray(n))for(let o=-1,a=e*r;++o<r;)s(i,a+o,n[o]);else for(let o=-1,a=e*r;++o<r;)s(i,a+o,n.get(o))};Ee.prototype.visitBool=xe(q3);Ee.prototype.visitInt=xe(Gi);Ee.prototype.visitInt8=xe(Gi);Ee.prototype.visitInt16=xe(Gi);Ee.prototype.visitInt32=xe(Gi);Ee.prototype.visitInt64=xe(Gi);Ee.prototype.visitUint8=xe(Gi);Ee.prototype.visitUint16=xe(Gi);Ee.prototype.visitUint32=xe(Gi);Ee.prototype.visitUint64=xe(Gi);Ee.prototype.visitFloat=xe(H3);Ee.prototype.visitFloat16=xe(aD);Ee.prototype.visitFloat32=xe(v0);Ee.prototype.visitFloat64=xe(v0);Ee.prototype.visitUtf8=xe(G3);Ee.prototype.visitBinary=xe(Y3);Ee.prototype.visitFixedSizeBinary=xe(Q3);Ee.prototype.visitDate=xe(J3);Ee.prototype.visitDateDay=xe(uD);Ee.prototype.visitDateMillisecond=xe(lD);Ee.prototype.visitTimestamp=xe(X3);Ee.prototype.visitTimestampSecond=xe(cD);Ee.prototype.visitTimestampMillisecond=xe(fD);Ee.prototype.visitTimestampMicrosecond=xe(dD);Ee.prototype.visitTimestampNanosecond=xe(hD);Ee.prototype.visitTime=xe(Z3);Ee.prototype.visitTimeSecond=xe(pD);Ee.prototype.visitTimeMillisecond=xe(mD);Ee.prototype.visitTimeMicrosecond=xe(yD);Ee.prototype.visitTimeNanosecond=xe(vD);Ee.prototype.visitDecimal=xe(e$);Ee.prototype.visitList=xe(t$);Ee.prototype.visitStruct=xe(a$);Ee.prototype.visitUnion=xe(u$);Ee.prototype.visitDenseUnion=xe(gD);Ee.prototype.visitSparseUnion=xe(wD);Ee.prototype.visitDictionary=xe(l$);Ee.prototype.visitInterval=xe(c$);Ee.prototype.visitIntervalDayTime=xe(_D);Ee.prototype.visitIntervalYearMonth=xe(bD);Ee.prototype.visitFixedSizeList=xe(f$);Ee.prototype.visitMap=xe(n$);const Sr=new Ee,Dr=Symbol.for("parent"),Ca=Symbol.for("rowIndex");class g0{constructor(e,n){return this[Dr]=e,this[Ca]=n,new Proxy(this,new h$)}toArray(){return Object.values(this.toJSON())}toJSON(){const e=this[Ca],n=this[Dr],r=n.type.children,i={};for(let s=-1,o=r.length;++s<o;)i[r[s].name]=Ln.visit(n.children[s],e);return i}toString(){return`{${[...this].map(([e,n])=>`${Nl(e)}: ${Nl(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new d$(this[Dr],this[Ca])}}class d${constructor(e,n){this.childIndex=0,this.children=e.children,this.rowIndex=n,this.childFields=e.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const e=this.childIndex;return e<this.numChildren?(this.childIndex=e+1,{done:!1,value:[this.childFields[e].name,Ln.visit(this.children[e],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(g0.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Dr]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Ca]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class h${isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(e){return e[Dr].type.children.map(n=>n.name)}has(e,n){return e[Dr].type.children.findIndex(r=>r.name===n)!==-1}getOwnPropertyDescriptor(e,n){if(e[Dr].type.children.findIndex(r=>r.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(e,n){if(Reflect.has(e,n))return e[n];const r=e[Dr].type.children.findIndex(i=>i.name===n);if(r!==-1){const i=Ln.visit(e[Dr].children[r],e[Ca]);return Reflect.set(e,n,i),i}}set(e,n,r){const i=e[Dr].type.children.findIndex(s=>s.name===n);return i!==-1?(Sr.visit(e[Dr].children[i],e[Ca],r),Reflect.set(e,n,r)):Reflect.has(e,n)||typeof n=="symbol"?Reflect.set(e,n,r):!1}}class _e extends Be{}function Oe(t){return(e,n)=>e.getValid(n)?t(e,n):null}const p$=(t,e)=>864e5*t[e],w0=(t,e)=>4294967296*t[e+1]+(t[e]>>>0),m$=(t,e)=>4294967296*(t[e+1]/1e3)+(t[e]>>>0)/1e3,y$=(t,e)=>4294967296*(t[e+1]/1e6)+(t[e]>>>0)/1e6,SD=t=>new Date(t),v$=(t,e)=>SD(p$(t,e)),g$=(t,e)=>SD(w0(t,e)),w$=(t,e)=>null,ID=(t,e,n)=>{if(n+1>=e.length)return null;const r=e[n],i=e[n+1];return t.subarray(r,i)},_$=({offset:t,values:e},n)=>{const r=t+n;return(e[r>>3]&1<<r%8)!==0},ED=({values:t},e)=>v$(t,e),OD=({values:t},e)=>g$(t,e*2),Ys=({stride:t,values:e},n)=>e[t*n],b$=({stride:t,values:e},n)=>sD(e[t*n]),kD=({values:t},e)=>t[e],S$=({stride:t,values:e},n)=>e.subarray(t*n,t*(n+1)),I$=({values:t,valueOffsets:e},n)=>ID(t,e,n),E$=({values:t,valueOffsets:e},n)=>{const r=ID(t,e,n);return r!==null?av(r):null},O$=({values:t},e)=>t[e],k$=({type:t,values:e},n)=>t.precision!==Tn.HALF?e[n]:sD(e[n]),D$=(t,e)=>t.type.unit===Hi.DAY?ED(t,e):OD(t,e),DD=({values:t},e)=>1e3*w0(t,e*2),xD=({values:t},e)=>w0(t,e*2),CD=({values:t},e)=>m$(t,e*2),AD=({values:t},e)=>y$(t,e*2),x$=(t,e)=>{switch(t.type.unit){case ze.SECOND:return DD(t,e);case ze.MILLISECOND:return xD(t,e);case ze.MICROSECOND:return CD(t,e);case ze.NANOSECOND:return AD(t,e)}},PD=({values:t},e)=>t[e],RD=({values:t},e)=>t[e],TD=({values:t},e)=>t[e],MD=({values:t},e)=>t[e],C$=(t,e)=>{switch(t.type.unit){case ze.SECOND:return PD(t,e);case ze.MILLISECOND:return RD(t,e);case ze.MICROSECOND:return TD(t,e);case ze.NANOSECOND:return MD(t,e)}},A$=({values:t,stride:e},n)=>m0.decimal(t.subarray(e*n,e*(n+1))),P$=(t,e)=>{const{valueOffsets:n,stride:r,children:i}=t,{[e*r]:s,[e*r+1]:o}=n,l=i[0].slice(s,o-s);return new Ke([l])},R$=(t,e)=>{const{valueOffsets:n,children:r}=t,{[e]:i,[e+1]:s}=n,o=r[0];return new _0(o.slice(i,s-i))},T$=(t,e)=>new g0(t,e),M$=(t,e)=>t.type.mode===rr.Dense?ND(t,e):BD(t,e),ND=(t,e)=>{const n=t.type.typeIdToChildIndex[t.typeIds[e]],r=t.children[n];return Ln.visit(r,t.valueOffsets[e])},BD=(t,e)=>{const n=t.type.typeIdToChildIndex[t.typeIds[e]],r=t.children[n];return Ln.visit(r,e)},N$=(t,e)=>{var n;return(n=t.dictionary)===null||n===void 0?void 0:n.get(t.values[e])},B$=(t,e)=>t.type.unit===Bs.DAY_TIME?FD(t,e):LD(t,e),FD=({values:t},e)=>t.subarray(2*e,2*(e+1)),LD=({values:t},e)=>{const n=t[e],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},F$=(t,e)=>{const{stride:n,children:r}=t,s=r[0].slice(e*n,n);return new Ke([s])};_e.prototype.visitNull=Oe(w$);_e.prototype.visitBool=Oe(_$);_e.prototype.visitInt=Oe(O$);_e.prototype.visitInt8=Oe(Ys);_e.prototype.visitInt16=Oe(Ys);_e.prototype.visitInt32=Oe(Ys);_e.prototype.visitInt64=Oe(kD);_e.prototype.visitUint8=Oe(Ys);_e.prototype.visitUint16=Oe(Ys);_e.prototype.visitUint32=Oe(Ys);_e.prototype.visitUint64=Oe(kD);_e.prototype.visitFloat=Oe(k$);_e.prototype.visitFloat16=Oe(b$);_e.prototype.visitFloat32=Oe(Ys);_e.prototype.visitFloat64=Oe(Ys);_e.prototype.visitUtf8=Oe(E$);_e.prototype.visitBinary=Oe(I$);_e.prototype.visitFixedSizeBinary=Oe(S$);_e.prototype.visitDate=Oe(D$);_e.prototype.visitDateDay=Oe(ED);_e.prototype.visitDateMillisecond=Oe(OD);_e.prototype.visitTimestamp=Oe(x$);_e.prototype.visitTimestampSecond=Oe(DD);_e.prototype.visitTimestampMillisecond=Oe(xD);_e.prototype.visitTimestampMicrosecond=Oe(CD);_e.prototype.visitTimestampNanosecond=Oe(AD);_e.prototype.visitTime=Oe(C$);_e.prototype.visitTimeSecond=Oe(PD);_e.prototype.visitTimeMillisecond=Oe(RD);_e.prototype.visitTimeMicrosecond=Oe(TD);_e.prototype.visitTimeNanosecond=Oe(MD);_e.prototype.visitDecimal=Oe(A$);_e.prototype.visitList=Oe(P$);_e.prototype.visitStruct=Oe(T$);_e.prototype.visitUnion=Oe(M$);_e.prototype.visitDenseUnion=Oe(ND);_e.prototype.visitSparseUnion=Oe(BD);_e.prototype.visitDictionary=Oe(N$);_e.prototype.visitInterval=Oe(B$);_e.prototype.visitIntervalDayTime=Oe(FD);_e.prototype.visitIntervalYearMonth=Oe(LD);_e.prototype.visitFixedSizeList=Oe(F$);_e.prototype.visitMap=Oe(R$);const Ln=new _e,ei=Symbol.for("keys"),Aa=Symbol.for("vals");class _0{constructor(e){return this[ei]=new Ke([e.children[0]]).memoize(),this[Aa]=e.children[1],new Proxy(this,new $$)}[Symbol.iterator](){return new L$(this[ei],this[Aa])}get size(){return this[ei].length}toArray(){return Object.values(this.toJSON())}toJSON(){const e=this[ei],n=this[Aa],r={};for(let i=-1,s=e.length;++i<s;)r[e.get(i)]=Ln.visit(n,i);return r}toString(){return`{${[...this].map(([e,n])=>`${Nl(e)}: ${Nl(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class L${constructor(e,n){this.keys=e,this.vals=n,this.keyIndex=0,this.numKeys=e.length}[Symbol.iterator](){return this}next(){const e=this.keyIndex;return e===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(e),Ln.visit(this.vals,e)]})}}class $${isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(e){return e[ei].toArray().map(String)}has(e,n){return e[ei].includes(n)}getOwnPropertyDescriptor(e,n){if(e[ei].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(e,n){if(Reflect.has(e,n))return e[n];const r=e[ei].indexOf(n);if(r!==-1){const i=Ln.visit(Reflect.get(e,Aa),r);return Reflect.set(e,n,i),i}}set(e,n,r){const i=e[ei].indexOf(n);return i!==-1?(Sr.visit(Reflect.get(e,Aa),i,r),Reflect.set(e,n,r)):Reflect.has(e,n)?Reflect.set(e,n,r):!1}}Object.defineProperties(_0.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[ei]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Aa]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let m1;function $D(t,e,n,r){const{length:i=0}=t;let s=typeof e!="number"?0:e,o=typeof n!="number"?i:n;return s<0&&(s=(s%i+i)%i),o<0&&(o=(o%i+i)%i),o<s&&(m1=s,s=o,o=m1),o>i&&(o=i),r?r(t,s,o):[s,o]}const y1=t=>t!==t;function du(t){if(typeof t!=="object"||t===null)return y1(t)?y1:n=>n===t;if(t instanceof Date){const n=t.valueOf();return r=>r instanceof Date?r.valueOf()===n:!1}return ArrayBuffer.isView(t)?n=>n?R3(t,n):!1:t instanceof Map?U$(t):Array.isArray(t)?j$(t):t instanceof Ke?z$(t):V$(t,!0)}function j$(t){const e=[];for(let n=-1,r=t.length;++n<r;)e[n]=du(t[n]);return jh(e)}function U$(t){let e=-1;const n=[];for(const r of t.values())n[++e]=du(r);return jh(n)}function z$(t){const e=[];for(let n=-1,r=t.length;++n<r;)e[n]=du(t.get(n));return jh(e)}function V$(t,e=!1){const n=Object.keys(t);if(!e&&n.length===0)return()=>!1;const r=[];for(let i=-1,s=n.length;++i<s;)r[i]=du(t[n[i]]);return jh(r,n)}function jh(t,e){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return K$(t,n);case Map:return v1(t,n,n.keys());case _0:case g0:case Object:case void 0:return v1(t,n,e||Object.keys(n))}return n instanceof Ke?W$(t,n):!1}}function K$(t,e){const n=t.length;if(e.length!==n)return!1;for(let r=-1;++r<n;)if(!t[r](e[r]))return!1;return!0}function W$(t,e){const n=t.length;if(e.length!==n)return!1;for(let r=-1;++r<n;)if(!t[r](e.get(r)))return!1;return!0}function v1(t,e,n){const r=n[Symbol.iterator](),i=e instanceof Map?e.keys():Object.keys(e)[Symbol.iterator](),s=e instanceof Map?e.values():Object.values(e)[Symbol.iterator]();let o=0;const a=t.length;let l=s.next(),f=r.next(),h=i.next();for(;o<a&&!f.done&&!h.done&&!l.done&&!(f.value!==h.value||!t[o](l.value));++o,f=r.next(),h=i.next(),l=s.next());return o===a&&f.done&&h.done&&l.done?!0:(r.return&&r.return(),i.return&&i.return(),s.return&&s.return(),!1)}function jD(t,e,n,r){return(n&1<<r)!==0}function q$(t,e,n,r){return(n&1<<r)>>r}function b0(t,e,n){const r=n.byteLength+7&-8;if(t>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(t%8===0?n.subarray(t>>3):jd(new S0(n,t,e,null,jD)).subarray(0,r)),i}return n}function jd(t){const e=[];let n=0,r=0,i=0;for(const o of t)o&&(i|=1<<r),++r===8&&(e[n++]=i,i=r=0);(n===0||r>0)&&(e[n++]=i);const s=new Uint8Array(e.length+7&-8);return s.set(e),s}class S0{constructor(e,n,r,i,s){this.bytes=e,this.length=r,this.context=i,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=e[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function fv(t,e,n){if(n-e<=0)return 0;if(n-e<8){let s=0;for(const o of new S0(t,e,n-e,t,q$))s+=o;return s}const r=n>>3<<3,i=e+(e%8===0?0:8-e%8);return fv(t,e,i)+fv(t,r,n)+H$(t,i>>3,r-i>>3)}function H$(t,e,n){let r=0,i=Math.trunc(e);const s=new DataView(t.buffer,t.byteOffset,t.byteLength),o=n===void 0?t.byteLength:i+n;for(;o-i>=4;)r+=Om(s.getUint32(i)),i+=4;for(;o-i>=2;)r+=Om(s.getUint16(i)),i+=2;for(;o-i>=1;)r+=Om(s.getUint8(i)),i+=1;return r}function Om(t){let e=Math.trunc(t);return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),(e+(e>>>4)&252645135)*16843009>>>24}const Q$=-1;class at{constructor(e,n,r,i,s,o=[],a){this.type=e,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let l;s instanceof at?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=Si(e),s&&((l=s[0])&&(this.valueOffsets=l),(l=s[1])&&(this.values=l),(l=s[2])&&(this.nullBitmap=l),(l=s[3])&&(this.typeIds=l))),this.nullable=this._nullCount!==0&&this.nullBitmap&&this.nullBitmap.byteLength>0}get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get byteLength(){let e=0;const{valueOffsets:n,values:r,nullBitmap:i,typeIds:s}=this;return n&&(e+=n.byteLength),r&&(e+=r.byteLength),i&&(e+=i.byteLength),s&&(e+=s.byteLength),this.children.reduce((o,a)=>o+a.byteLength,e)}get nullCount(){let e=this._nullCount,n;return e<=Q$&&(n=this.nullBitmap)&&(this._nullCount=e=this.length-fv(n,this.offset,this.offset+this.length)),e}getValid(e){if(this.nullable&&this.nullCount>0){const n=this.offset+e;return(this.nullBitmap[n>>3]&1<<n%8)!==0}return!0}setValid(e,n){if(!this.nullable)return n;if(!this.nullBitmap||this.nullBitmap.byteLength<=e>>3){const{nullBitmap:l}=this._changeLengthAndBackfillNullBitmap(this.length);Object.assign(this,{nullBitmap:l,_nullCount:0})}const{nullBitmap:r,offset:i}=this,s=i+e>>3,o=(i+e)%8,a=r[s]>>o&1;return n?a===0&&(r[s]|=1<<o,this._nullCount=this.nullCount+1):a===1&&(r[s]&=~(1<<o),this._nullCount=this.nullCount-1),n}clone(e=this.type,n=this.offset,r=this.length,i=this._nullCount,s=this,o=this.children){return new at(e,n,r,i,s,o,this.dictionary)}slice(e,n){const{stride:r,typeId:i,children:s}=this,o=+(this._nullCount===0)-1,a=i===16?r:1,l=this._sliceBuffers(e,n,r,i);return this.clone(this.type,this.offset+e,n,o,l,s.length===0||this.valueOffsets?s:this._sliceChildren(s,a*e,a*n))}_changeLengthAndBackfillNullBitmap(e){if(this.typeId===N.Null)return this.clone(this.type,0,e,0);const{length:n,nullCount:r}=this,i=new Uint8Array((e+63&-64)>>3).fill(255,0,n>>3);i[n>>3]=(1<<n-(n&-8))-1,r>0&&i.set(b0(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[bi.VALIDITY]=i,this.clone(this.type,0,e,r+(e-n),s)}_sliceBuffers(e,n,r,i){let s;const{buffers:o}=this;return(s=o[bi.TYPE])&&(o[bi.TYPE]=s.subarray(e,e+n)),(s=o[bi.OFFSET])&&(o[bi.OFFSET]=s.subarray(e,e+n+1))||(s=o[bi.DATA])&&(o[bi.DATA]=i===6?s:s.subarray(r*e,r*(e+n))),o}_sliceChildren(e,n,r){return e.map(i=>i.slice(n,r))}}at.prototype.children=Object.freeze([]);class ol extends Be{visit(e){return this.getVisitFn(e.type).call(this,e)}visitNull(e){const{["type"]:n,["offset"]:r=0,["length"]:i=0}=e;return new at(n,r,i,0)}visitBool(e){const{["type"]:n,["offset"]:r=0}=e,i=Ue(e.nullBitmap),s=rt(n.ArrayType,e.data),{["length"]:o=s.length>>3,["nullCount"]:a=e.nullBitmap?-1:0}=e;return new at(n,r,o,a,[void 0,s,i])}visitInt(e){const{["type"]:n,["offset"]:r=0}=e,i=Ue(e.nullBitmap),s=rt(n.ArrayType,e.data),{["length"]:o=s.length,["nullCount"]:a=e.nullBitmap?-1:0}=e;return new at(n,r,o,a,[void 0,s,i])}visitFloat(e){const{["type"]:n,["offset"]:r=0}=e,i=Ue(e.nullBitmap),s=rt(n.ArrayType,e.data),{["length"]:o=s.length,["nullCount"]:a=e.nullBitmap?-1:0}=e;return new at(n,r,o,a,[void 0,s,i])}visitUtf8(e){const{["type"]:n,["offset"]:r=0}=e,i=Ue(e.data),s=Ue(e.nullBitmap),o=Fu(e.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=e.nullBitmap?-1:0}=e;return new at(n,r,a,l,[o,i,s])}visitBinary(e){const{["type"]:n,["offset"]:r=0}=e,i=Ue(e.data),s=Ue(e.nullBitmap),o=Fu(e.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=e.nullBitmap?-1:0}=e;return new at(n,r,a,l,[o,i,s])}visitFixedSizeBinary(e){const{["type"]:n,["offset"]:r=0}=e,i=Ue(e.nullBitmap),s=rt(n.ArrayType,e.data),{["length"]:o=s.length/Si(n),["nullCount"]:a=e.nullBitmap?-1:0}=e;return new at(n,r,o,a,[void 0,s,i])}visitDate(e){const{["type"]:n,["offset"]:r=0}=e,i=Ue(e.nullBitmap),s=rt(n.ArrayType,e.data),{["length"]:o=s.length/Si(n),["nullCount"]:a=e.nullBitmap?-1:0}=e;return new at(n,r,o,a,[void 0,s,i])}visitTimestamp(e){const{["type"]:n,["offset"]:r=0}=e,i=Ue(e.nullBitmap),s=rt(n.ArrayType,e.data),{["length"]:o=s.length/Si(n),["nullCount"]:a=e.nullBitmap?-1:0}=e;return new at(n,r,o,a,[void 0,s,i])}visitTime(e){const{["type"]:n,["offset"]:r=0}=e,i=Ue(e.nullBitmap),s=rt(n.ArrayType,e.data),{["length"]:o=s.length/Si(n),["nullCount"]:a=e.nullBitmap?-1:0}=e;return new at(n,r,o,a,[void 0,s,i])}visitDecimal(e){const{["type"]:n,["offset"]:r=0}=e,i=Ue(e.nullBitmap),s=rt(n.ArrayType,e.data),{["length"]:o=s.length/Si(n),["nullCount"]:a=e.nullBitmap?-1:0}=e;return new at(n,r,o,a,[void 0,s,i])}visitList(e){const{["type"]:n,["offset"]:r=0,["child"]:i}=e,s=Ue(e.nullBitmap),o=Fu(e.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=e.nullBitmap?-1:0}=e;return new at(n,r,a,l,[o,void 0,s],[i])}visitStruct(e){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=e,s=Ue(e.nullBitmap),{length:o=i.reduce((l,{length:f})=>Math.max(l,f),0),nullCount:a=e.nullBitmap?-1:0}=e;return new at(n,r,o,a,[void 0,void 0,s],i)}visitUnion(e){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=e,s=Ue(e.nullBitmap),o=rt(n.ArrayType,e.typeIds),{["length"]:a=o.length,["nullCount"]:l=e.nullBitmap?-1:0}=e;if(we.isSparseUnion(n))return new at(n,r,a,l,[void 0,void 0,s,o],i);const f=Fu(e.valueOffsets);return new at(n,r,a,l,[f,void 0,s,o],i)}visitDictionary(e){const{["type"]:n,["offset"]:r=0}=e,i=Ue(e.nullBitmap),s=rt(n.indices.ArrayType,e.data),{["dictionary"]:o=new Ke([new ol().visit({type:n.dictionary})])}=e,{["length"]:a=s.length,["nullCount"]:l=e.nullBitmap?-1:0}=e;return new at(n,r,a,l,[void 0,s,i],[],o)}visitInterval(e){const{["type"]:n,["offset"]:r=0}=e,i=Ue(e.nullBitmap),s=rt(n.ArrayType,e.data),{["length"]:o=s.length/Si(n),["nullCount"]:a=e.nullBitmap?-1:0}=e;return new at(n,r,o,a,[void 0,s,i])}visitFixedSizeList(e){const{["type"]:n,["offset"]:r=0,["child"]:i=new ol().visit({type:n.valueType})}=e,s=Ue(e.nullBitmap),{["length"]:o=i.length/Si(n),["nullCount"]:a=e.nullBitmap?-1:0}=e;return new at(n,r,o,a,[void 0,void 0,s],[i])}visitMap(e){const{["type"]:n,["offset"]:r=0,["child"]:i=new ol().visit({type:n.childType})}=e,s=Ue(e.nullBitmap),o=Fu(e.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=e.nullBitmap?-1:0}=e;return new at(n,r,a,l,[o,void 0,s],[i])}}function Ne(t){return new ol().visit(t)}class g1{constructor(e=0,n){this.numChunks=e,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const e=this.chunkIterator.next();if(!e.done)return e;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function UD(t){return t.reduce((e,n)=>e+n.nullCount,0)}function zD(t){return t.reduce((e,n,r)=>(e[r+1]=e[r]+n.length,e),new Uint32Array(t.length+1))}function VD(t,e,n,r){const i=[];for(let s=-1,o=t.length;++s<o;){const a=t[s],l=e[s],{length:f}=a;if(l>=r)break;if(n>=l+f)continue;if(l>=n&&l+f<=r){i.push(a);continue}const h=Math.max(0,n-l),p=Math.min(r-l,f);i.push(a.slice(h,p-h))}return i.length===0&&i.push(t[0].slice(0,0)),i}function I0(t,e,n,r){let i=0,s=0,o=e.length-1;do{if(i>=o-1)return n<e[o]?r(t,i,n-e[i]):null;s=i+Math.trunc((o-i)*.5),n<e[s]?o=s:i=s}while(i<o)}function E0(t,e){return t.getValid(e)}function Pa(t){function e(n,r,i){return t(n[r],i)}return function(n){const r=this.data;return I0(r,this._offsets,n,e)}}function KD(t){let e;function n(r,i,s){return t(r[i],s,e)}return function(r,i){const s=this.data;e=i;const o=I0(s,this._offsets,r,n);return e=void 0,o}}function WD(t){let e;function n(r,i,s){let o=s,a=0,l=0;for(let f=i-1,h=r.length;++f<h;){const p=r[f];if(~(a=t(p,e,o)))return l+a;o=0,l+=p.length}return-1}return function(r,i){e=r;const s=this.data,o=typeof i!="number"?n(s,0,0):I0(s,this._offsets,i,n);return e=void 0,o}}class be extends Be{}function Y$(t,e){return e===null&&t.length>0?0:-1}function G$(t,e){const{nullBitmap:n}=t;if(!n||t.nullCount<=0)return-1;let r=0;for(const i of new S0(n,t.offset+(e||0),t.length,n,jD)){if(!i)return r;++r}return-1}function Ae(t,e,n){if(e===void 0)return-1;if(e===null)return G$(t,n);const r=Ln.getVisitFn(t),i=du(e);for(let s=(n||0)-1,o=t.length;++s<o;)if(i(r(t,s)))return s;return-1}function qD(t,e,n){const r=Ln.getVisitFn(t),i=du(e);for(let s=(n||0)-1,o=t.length;++s<o;)if(i(r(t,s)))return s;return-1}be.prototype.visitNull=Y$;be.prototype.visitBool=Ae;be.prototype.visitInt=Ae;be.prototype.visitInt8=Ae;be.prototype.visitInt16=Ae;be.prototype.visitInt32=Ae;be.prototype.visitInt64=Ae;be.prototype.visitUint8=Ae;be.prototype.visitUint16=Ae;be.prototype.visitUint32=Ae;be.prototype.visitUint64=Ae;be.prototype.visitFloat=Ae;be.prototype.visitFloat16=Ae;be.prototype.visitFloat32=Ae;be.prototype.visitFloat64=Ae;be.prototype.visitUtf8=Ae;be.prototype.visitBinary=Ae;be.prototype.visitFixedSizeBinary=Ae;be.prototype.visitDate=Ae;be.prototype.visitDateDay=Ae;be.prototype.visitDateMillisecond=Ae;be.prototype.visitTimestamp=Ae;be.prototype.visitTimestampSecond=Ae;be.prototype.visitTimestampMillisecond=Ae;be.prototype.visitTimestampMicrosecond=Ae;be.prototype.visitTimestampNanosecond=Ae;be.prototype.visitTime=Ae;be.prototype.visitTimeSecond=Ae;be.prototype.visitTimeMillisecond=Ae;be.prototype.visitTimeMicrosecond=Ae;be.prototype.visitTimeNanosecond=Ae;be.prototype.visitDecimal=Ae;be.prototype.visitList=Ae;be.prototype.visitStruct=Ae;be.prototype.visitUnion=Ae;be.prototype.visitDenseUnion=qD;be.prototype.visitSparseUnion=qD;be.prototype.visitDictionary=Ae;be.prototype.visitInterval=Ae;be.prototype.visitIntervalDayTime=Ae;be.prototype.visitIntervalYearMonth=Ae;be.prototype.visitFixedSizeList=Ae;be.prototype.visitMap=Ae;const Ud=new be;class Se extends Be{}function ke(t){const{type:e}=t;if(t.nullCount===0&&t.stride===1&&(e.typeId===N.Timestamp||e instanceof Ls&&e.bitWidth!==64||e instanceof $l&&e.bitWidth!==64||e instanceof Ll&&e.precision!==Tn.HALF))return new g1(t.data.length,r=>{const i=t.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let n=0;return new g1(t.data.length,r=>{const s=t.data[r].length,o=t.slice(n,n+s);return n+=s,new J$(o)})}class J${constructor(e){this.vector=e,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}Se.prototype.visitNull=ke;Se.prototype.visitBool=ke;Se.prototype.visitInt=ke;Se.prototype.visitInt8=ke;Se.prototype.visitInt16=ke;Se.prototype.visitInt32=ke;Se.prototype.visitInt64=ke;Se.prototype.visitUint8=ke;Se.prototype.visitUint16=ke;Se.prototype.visitUint32=ke;Se.prototype.visitUint64=ke;Se.prototype.visitFloat=ke;Se.prototype.visitFloat16=ke;Se.prototype.visitFloat32=ke;Se.prototype.visitFloat64=ke;Se.prototype.visitUtf8=ke;Se.prototype.visitBinary=ke;Se.prototype.visitFixedSizeBinary=ke;Se.prototype.visitDate=ke;Se.prototype.visitDateDay=ke;Se.prototype.visitDateMillisecond=ke;Se.prototype.visitTimestamp=ke;Se.prototype.visitTimestampSecond=ke;Se.prototype.visitTimestampMillisecond=ke;Se.prototype.visitTimestampMicrosecond=ke;Se.prototype.visitTimestampNanosecond=ke;Se.prototype.visitTime=ke;Se.prototype.visitTimeSecond=ke;Se.prototype.visitTimeMillisecond=ke;Se.prototype.visitTimeMicrosecond=ke;Se.prototype.visitTimeNanosecond=ke;Se.prototype.visitDecimal=ke;Se.prototype.visitList=ke;Se.prototype.visitStruct=ke;Se.prototype.visitUnion=ke;Se.prototype.visitDenseUnion=ke;Se.prototype.visitSparseUnion=ke;Se.prototype.visitDictionary=ke;Se.prototype.visitInterval=ke;Se.prototype.visitIntervalDayTime=ke;Se.prototype.visitIntervalYearMonth=ke;Se.prototype.visitFixedSizeList=ke;Se.prototype.visitMap=ke;const O0=new Se,X$=(t,e)=>t+e;class Gs extends Be{visitNull(e,n){return 0}visitInt(e,n){return e.type.bitWidth/8}visitFloat(e,n){return e.type.ArrayType.BYTES_PER_ELEMENT}visitBool(e,n){return 1/8}visitDecimal(e,n){return e.type.bitWidth/8}visitDate(e,n){return(e.type.unit+1)*4}visitTime(e,n){return e.type.bitWidth/8}visitTimestamp(e,n){return e.type.unit===ze.SECOND?4:8}visitInterval(e,n){return(e.type.unit+1)*4}visitStruct(e,n){return e.children.reduce((r,i)=>r+di.visit(i,n),0)}visitFixedSizeBinary(e,n){return e.type.byteWidth}visitMap(e,n){return 8+e.children.reduce((r,i)=>r+di.visit(i,n),0)}visitDictionary(e,n){var r;return e.type.indices.bitWidth/8+(((r=e.dictionary)===null||r===void 0?void 0:r.getByteLength(e.values[n]))||0)}}const Z$=({valueOffsets:t},e)=>8+(t[e+1]-t[e]),ej=({valueOffsets:t},e)=>8+(t[e+1]-t[e]),tj=({valueOffsets:t,stride:e,children:n},r)=>{const i=n[0],{[r*e]:s}=t,{[r*e+1]:o}=t,a=di.getVisitFn(i.type),l=i.slice(s,o-s);let f=8;for(let h=-1,p=o-s;++h<p;)f+=a(l,h);return f},nj=({stride:t,children:e},n)=>{const r=e[0],i=r.slice(n*t,t),s=di.getVisitFn(r.type);let o=0;for(let a=-1,l=i.length;++a<l;)o+=s(i,a);return o},rj=(t,e)=>t.type.mode===rr.Dense?HD(t,e):QD(t,e),HD=({type:t,children:e,typeIds:n,valueOffsets:r},i)=>{const s=t.typeIdToChildIndex[n[i]];return 8+di.visit(e[s],r[i])},QD=({children:t},e)=>4+di.visitMany(t,t.map(()=>e)).reduce(X$,0);Gs.prototype.visitUtf8=Z$;Gs.prototype.visitBinary=ej;Gs.prototype.visitList=tj;Gs.prototype.visitFixedSizeList=nj;Gs.prototype.visitUnion=rj;Gs.prototype.visitDenseUnion=HD;Gs.prototype.visitSparseUnion=QD;const di=new Gs;var YD;const GD={},JD={};class Ke{constructor(e){var n,r,i;const s=e[0]instanceof Ke?e.flatMap(a=>a.data):e;if(s.length===0||s.some(a=>!(a instanceof at)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:l,indexOf:f,byteLength:h}=GD[o.typeId],p=s[0];this.isValid=y=>E0(p,y),this.get=y=>a(p,y),this.set=(y,w)=>l(p,y,w),this.indexOf=y=>f(p,y),this.getByteLength=y=>h(p,y),this._offsets=[0,p.length];break}default:Object.setPrototypeOf(this,JD[o.typeId]),this._offsets=zD(s);break}this.data=s,this.type=o,this.stride=Si(o),this.numChildren=(i=(r=o.children)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0,this.length=this._offsets[this._offsets.length-1]}get byteLength(){return this._byteLength===-1&&(this._byteLength=this.data.reduce((e,n)=>e+n.byteLength,0)),this._byteLength}get nullCount(){return this._nullCount===-1&&(this._nullCount=UD(this.data)),this._nullCount}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${N[this.type.typeId]}Vector`}isValid(e){return!1}get(e){return null}set(e,n){}indexOf(e,n){return-1}includes(e,n){return this.indexOf(e,n)>0}getByteLength(e){return 0}[Symbol.iterator](){return O0.visit(this)}concat(...e){return new Ke(this.data.concat(e.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(e,n){return new Ke($D(this,e,n,({data:r,_offsets:i},s,o)=>VD(r,i,s,o)))}toJSON(){return[...this]}toArray(){const{type:e,data:n,length:r,stride:i,ArrayType:s}=this;switch(e.typeId){case N.Int:case N.Float:case N.Decimal:case N.Time:case N.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,r*i);default:return n.reduce((o,{values:a,length:l})=>(o.array.set(a.subarray(0,l*i),o.offset),o.offset+=l*i,o),{array:new s(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(e){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(r=>r.name===e))}getChildAt(e){return e>-1&&e<this.numChildren?new Ke(this.data.map(({children:n})=>n[e])):null}get isMemoized(){return we.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(we.isDictionary(this.type)){const e=new zd(this.data[0].dictionary),n=this.data.map(r=>{const i=r.clone();return i.dictionary=e,i});return new Ke(n)}return new zd(this)}unmemoize(){if(we.isDictionary(this.type)&&this.isMemoized){const e=this.data[0].dictionary.unmemoize(),n=this.data.map(r=>{const i=r.clone();return i.dictionary=e,i});return new Ke(n)}return this}}YD=Symbol.toStringTag;Ke[YD]=(t=>{t.type=we.prototype,t.data=[],t.length=0,t.stride=1,t.numChildren=0,t._nullCount=-1,t._byteLength=-1,t._offsets=new Uint32Array([0]),t[Symbol.isConcatSpreadable]=!0;const e=Object.keys(N).map(n=>N[n]).filter(n=>typeof n=="number"&&n!==N.NONE);for(const n of e){const r=Ln.getVisitFnByTypeId(n),i=Sr.getVisitFnByTypeId(n),s=Ud.getVisitFnByTypeId(n),o=di.getVisitFnByTypeId(n);GD[n]={get:r,set:i,indexOf:s,byteLength:o},JD[n]=Object.create(t,{isValid:{value:Pa(E0)},get:{value:Pa(Ln.getVisitFnByTypeId(n))},set:{value:KD(Sr.getVisitFnByTypeId(n))},indexOf:{value:WD(Ud.getVisitFnByTypeId(n))},getByteLength:{value:Pa(di.getVisitFnByTypeId(n))}})}return"Vector"})(Ke.prototype);class zd extends Ke{constructor(e){super(e.data);const n=this.get,r=this.set,i=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=s[o];if(a!==void 0)return a;const l=n.call(this,o);return s[o]=l,l}}),Object.defineProperty(this,"set",{value(o,a){r.call(this,o,a),s[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new zd(i.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new Ke(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}class dv{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(e,n,r,i){return e.prep(8,24),e.writeInt64(i),e.pad(4),e.writeInt32(r),e.writeInt64(n),e.offset()}}const km=2,ti=4,ki=4,st=4,fs=new Int32Array(2),w1=new Float32Array(fs.buffer),_1=new Float64Array(fs.buffer),ff=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;let Ni=class hv{constructor(e,n){this.low=e|0,this.high=n|0}static create(e,n){return e==0&&n==0?hv.ZERO:new hv(e,n)}toFloat64(){return(this.low>>>0)+this.high*4294967296}equals(e){return this.low==e.low&&this.high==e.high}};Ni.ZERO=new Ni(0,0);var pv;(function(t){t[t.UTF8_BYTES=1]="UTF8_BYTES",t[t.UTF16_STRING=2]="UTF16_STRING"})(pv||(pv={}));let Ya=class XD{constructor(e){this.bytes_=e,this.position_=0}static allocate(e){return new XD(new Uint8Array(e))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(e){this.position_=e}capacity(){return this.bytes_.length}readInt8(e){return this.readUint8(e)<<24>>24}readUint8(e){return this.bytes_[e]}readInt16(e){return this.readUint16(e)<<16>>16}readUint16(e){return this.bytes_[e]|this.bytes_[e+1]<<8}readInt32(e){return this.bytes_[e]|this.bytes_[e+1]<<8|this.bytes_[e+2]<<16|this.bytes_[e+3]<<24}readUint32(e){return this.readInt32(e)>>>0}readInt64(e){return new Ni(this.readInt32(e),this.readInt32(e+4))}readUint64(e){return new Ni(this.readUint32(e),this.readUint32(e+4))}readFloat32(e){return fs[0]=this.readInt32(e),w1[0]}readFloat64(e){return fs[ff?0:1]=this.readInt32(e),fs[ff?1:0]=this.readInt32(e+4),_1[0]}writeInt8(e,n){this.bytes_[e]=n}writeUint8(e,n){this.bytes_[e]=n}writeInt16(e,n){this.bytes_[e]=n,this.bytes_[e+1]=n>>8}writeUint16(e,n){this.bytes_[e]=n,this.bytes_[e+1]=n>>8}writeInt32(e,n){this.bytes_[e]=n,this.bytes_[e+1]=n>>8,this.bytes_[e+2]=n>>16,this.bytes_[e+3]=n>>24}writeUint32(e,n){this.bytes_[e]=n,this.bytes_[e+1]=n>>8,this.bytes_[e+2]=n>>16,this.bytes_[e+3]=n>>24}writeInt64(e,n){this.writeInt32(e,n.low),this.writeInt32(e+4,n.high)}writeUint64(e,n){this.writeUint32(e,n.low),this.writeUint32(e+4,n.high)}writeFloat32(e,n){w1[0]=n,this.writeInt32(e,fs[0])}writeFloat64(e,n){_1[0]=n,this.writeInt32(e,fs[ff?0:1]),this.writeInt32(e+4,fs[ff?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+ti+ki)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let e="";for(let n=0;n<ki;n++)e+=String.fromCharCode(this.readInt8(this.position_+ti+n));return e}__offset(e,n){const r=e-this.readInt32(e);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(e,n){return e.bb_pos=n+this.readInt32(n),e.bb=this,e}__string(e,n){e+=this.readInt32(e);const r=this.readInt32(e);let i="",s=0;if(e+=ti,n===pv.UTF8_BYTES)return this.bytes_.subarray(e,e+r);for(;s<r;){let o;const a=this.readUint8(e+s++);if(a<192)o=a;else{const l=this.readUint8(e+s++);if(a<224)o=(a&31)<<6|l&63;else{const f=this.readUint8(e+s++);if(a<240)o=(a&15)<<12|(l&63)<<6|f&63;else{const h=this.readUint8(e+s++);o=(a&7)<<18|(l&63)<<12|(f&63)<<6|h&63}}}o<65536?i+=String.fromCharCode(o):(o-=65536,i+=String.fromCharCode((o>>10)+55296,(o&1024-1)+56320))}return i}__union_with_string(e,n){return typeof e=="string"?this.__string(n):this.__union(e,n)}__indirect(e){return e+this.readInt32(e)}__vector(e){return e+this.readInt32(e)+ti}__vector_len(e){return this.readInt32(e+this.readInt32(e))}__has_identifier(e){if(e.length!=ki)throw new Error("FlatBuffers: file identifier must be length "+ki);for(let n=0;n<ki;n++)if(e.charCodeAt(n)!=this.readInt8(this.position()+ti+n))return!1;return!0}createLong(e,n){return Ni.create(e,n)}createScalarList(e,n){const r=[];for(let i=0;i<n;++i)e(i)!==null&&r.push(e(i));return r}createObjList(e,n){const r=[];for(let i=0;i<n;++i){const s=e(i);s!==null&&r.push(s.unpack())}return r}},ZD=class ex{constructor(e){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null;let n;e?n=e:n=1024,this.bb=Ya.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(e){this.force_defaults=e}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(e,n){e>this.minalign&&(this.minalign=e);const r=~(this.bb.capacity()-this.space+n)+1&e-1;for(;this.space<r+e+n;){const i=this.bb.capacity();this.bb=ex.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(e){for(let n=0;n<e;n++)this.bb.writeInt8(--this.space,0)}writeInt8(e){this.bb.writeInt8(this.space-=1,e)}writeInt16(e){this.bb.writeInt16(this.space-=2,e)}writeInt32(e){this.bb.writeInt32(this.space-=4,e)}writeInt64(e){this.bb.writeInt64(this.space-=8,e)}writeFloat32(e){this.bb.writeFloat32(this.space-=4,e)}writeFloat64(e){this.bb.writeFloat64(this.space-=8,e)}addInt8(e){this.prep(1,0),this.writeInt8(e)}addInt16(e){this.prep(2,0),this.writeInt16(e)}addInt32(e){this.prep(4,0),this.writeInt32(e)}addInt64(e){this.prep(8,0),this.writeInt64(e)}addFloat32(e){this.prep(4,0),this.writeFloat32(e)}addFloat64(e){this.prep(8,0),this.writeFloat64(e)}addFieldInt8(e,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(e))}addFieldInt16(e,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(e))}addFieldInt32(e,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(e))}addFieldInt64(e,n,r){(this.force_defaults||!n.equals(r))&&(this.addInt64(n),this.slot(e))}addFieldFloat32(e,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(e))}addFieldFloat64(e,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(e))}addFieldOffset(e,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(e))}addFieldStruct(e,n,r){n!=r&&(this.nested(n),this.slot(e))}nested(e){if(e!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")}slot(e){this.vtable!==null&&(this.vtable[e]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(e){const n=e.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=n<<1,i=Ya.allocate(r);return i.setPosition(r-n),i.bytes().set(e.bytes(),r-n),i}addOffset(e){this.prep(ti,0),this.writeInt32(this.offset()-e+ti)}startObject(e){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=e;for(let n=0;n<e;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const e=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?e-this.vtable[n]:0);const i=2;this.addInt16(e-this.object_start);const s=(r+i)*km;this.addInt16(s);let o=0;const a=this.space;e:for(n=0;n<this.vtables.length;n++){const l=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(l)){for(let f=km;f<s;f+=km)if(this.bb.readInt16(a+f)!=this.bb.readInt16(l+f))continue e;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-e,this.bb.writeInt32(this.space,o-e)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-e,this.offset()-e)),this.isNested=!1,e}finish(e,n,r){const i=r?st:0;if(n){const s=n;if(this.prep(this.minalign,ti+ki+i),s.length!=ki)throw new Error("FlatBuffers: file identifier must be length "+ki);for(let o=ki-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,ti+i),this.addOffset(e),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(e,n){this.finish(e,n,!0)}requiredField(e,n){const r=this.bb.capacity()-e,i=r-this.bb.readInt32(r);if(!(this.bb.readInt16(i+n)!=0))throw new Error("FlatBuffers: field "+n+" must be set")}startVector(e,n,r){this.notNested(),this.vector_num_elems=n,this.prep(ti,e*n),this.prep(r,e*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(e){if(!e)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(e))return this.string_maps.get(e);const n=this.createString(e);return this.string_maps.set(e,n),n}createString(e){if(!e)return 0;let n;if(e instanceof Uint8Array)n=e;else{n=[];let r=0;for(;r<e.length;){let i;const s=e.charCodeAt(r++);if(s<55296||s>=56320)i=s;else{const o=e.charCodeAt(r++);i=(s<<10)+o+(65536-56623104-56320)}i<128?n.push(i):(i<2048?n.push(i>>6&31|192):(i<65536?n.push(i>>12&15|224):n.push(i>>18&7|240,i>>12&63|128),n.push(i>>6&63|128)),n.push(i&63|128))}}this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let r=0,i=this.space,s=this.bb.bytes();r<n.length;r++)s[i++]=n[r];return this.endVector()}createLong(e,n){return Ni.create(e,n)}createObjectOffset(e){return e===null?0:typeof e=="string"?this.createString(e):e.pack(this)}createObjectOffsetList(e){const n=[];for(let r=0;r<e.length;++r){const i=e[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new Error("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(e,n){return n(this,e.length),this.createObjectOffsetList(e),this.endVector()}};class zt{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsKeyValue(e,n){return(n||new zt).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsKeyValue(e,n){return e.setPosition(e.position()+st),(n||new zt).__init(e.readInt32(e.position())+e.position(),e)}key(e){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,e):null}value(e){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,e):null}static startKeyValue(e){e.startObject(2)}static addKey(e,n){e.addFieldOffset(0,n,0)}static addValue(e,n){e.addFieldOffset(1,n,0)}static endKeyValue(e){return e.endObject()}static createKeyValue(e,n,r){return zt.startKeyValue(e),zt.addKey(e,n),zt.addValue(e,r),zt.endKeyValue(e)}}var Ga;(function(t){t[t.V1=0]="V1",t[t.V2=1]="V2",t[t.V3=2]="V3",t[t.V4=3]="V4",t[t.V5=4]="V5"})(Ga||(Ga={}));var Ja;(function(t){t[t.Little=0]="Little",t[t.Big=1]="Big"})(Ja||(Ja={}));var Vd;(function(t){t[t.DenseArray=0]="DenseArray"})(Vd||(Vd={}));class Qn{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsInt(e,n){return(n||new Qn).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsInt(e,n){return e.setPosition(e.position()+st),(n||new Qn).__init(e.readInt32(e.position())+e.position(),e)}bitWidth(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}isSigned(){const e=this.bb.__offset(this.bb_pos,6);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startInt(e){e.startObject(2)}static addBitWidth(e,n){e.addFieldInt32(0,n,0)}static addIsSigned(e,n){e.addFieldInt8(1,+n,0)}static endInt(e){return e.endObject()}static createInt(e,n,r){return Qn.startInt(e),Qn.addBitWidth(e,n),Qn.addIsSigned(e,r),Qn.endInt(e)}}class Di{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsDictionaryEncoding(e,n){return(n||new Di).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDictionaryEncoding(e,n){return e.setPosition(e.position()+st),(n||new Di).__init(e.readInt32(e.position())+e.position(),e)}id(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}indexType(e){const n=this.bb.__offset(this.bb_pos,6);return n?(e||new Qn).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const e=this.bb.__offset(this.bb_pos,8);return e?!!this.bb.readInt8(this.bb_pos+e):!1}dictionaryKind(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt16(this.bb_pos+e):Vd.DenseArray}static startDictionaryEncoding(e){e.startObject(4)}static addId(e,n){e.addFieldInt64(0,n,e.createLong(0,0))}static addIndexType(e,n){e.addFieldOffset(1,n,0)}static addIsOrdered(e,n){e.addFieldInt8(2,+n,0)}static addDictionaryKind(e,n){e.addFieldInt16(3,n,Vd.DenseArray)}static endDictionaryEncoding(e){return e.endObject()}}class go{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsBinary(e,n){return(n||new go).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBinary(e,n){return e.setPosition(e.position()+st),(n||new go).__init(e.readInt32(e.position())+e.position(),e)}static startBinary(e){e.startObject(0)}static endBinary(e){return e.endObject()}static createBinary(e){return go.startBinary(e),go.endBinary(e)}}class wo{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsBool(e,n){return(n||new wo).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBool(e,n){return e.setPosition(e.position()+st),(n||new wo).__init(e.readInt32(e.position())+e.position(),e)}static startBool(e){e.startObject(0)}static endBool(e){return e.endObject()}static createBool(e){return wo.startBool(e),wo.endBool(e)}}var Kd;(function(t){t[t.DAY=0]="DAY",t[t.MILLISECOND=1]="MILLISECOND"})(Kd||(Kd={}));let Nf=class sa{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsDate(e,n){return(n||new sa).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDate(e,n){return e.setPosition(e.position()+st),(n||new sa).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Kd.MILLISECOND}static startDate(e){e.startObject(1)}static addUnit(e,n){e.addFieldInt16(0,n,Kd.MILLISECOND)}static endDate(e){return e.endObject()}static createDate(e,n){return sa.startDate(e),sa.addUnit(e,n),sa.endDate(e)}};class On{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsDecimal(e,n){return(n||new On).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDecimal(e,n){return e.setPosition(e.position()+st),(n||new On).__init(e.readInt32(e.position())+e.position(),e)}precision(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}scale(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):0}bitWidth(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt32(this.bb_pos+e):128}static startDecimal(e){e.startObject(3)}static addPrecision(e,n){e.addFieldInt32(0,n,0)}static addScale(e,n){e.addFieldInt32(1,n,0)}static addBitWidth(e,n){e.addFieldInt32(2,n,128)}static endDecimal(e){return e.endObject()}static createDecimal(e,n,r,i){return On.startDecimal(e),On.addPrecision(e,n),On.addScale(e,r),On.addBitWidth(e,i),On.endDecimal(e)}}var Xa;(function(t){t[t.SECOND=0]="SECOND",t[t.MILLISECOND=1]="MILLISECOND",t[t.MICROSECOND=2]="MICROSECOND",t[t.NANOSECOND=3]="NANOSECOND"})(Xa||(Xa={}));class ni{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsFixedSizeBinary(e,n){return(n||new ni).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFixedSizeBinary(e,n){return e.setPosition(e.position()+st),(n||new ni).__init(e.readInt32(e.position())+e.position(),e)}byteWidth(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}static startFixedSizeBinary(e){e.startObject(1)}static addByteWidth(e,n){e.addFieldInt32(0,n,0)}static endFixedSizeBinary(e){return e.endObject()}static createFixedSizeBinary(e,n){return ni.startFixedSizeBinary(e),ni.addByteWidth(e,n),ni.endFixedSizeBinary(e)}}class ri{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsFixedSizeList(e,n){return(n||new ri).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFixedSizeList(e,n){return e.setPosition(e.position()+st),(n||new ri).__init(e.readInt32(e.position())+e.position(),e)}listSize(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}static startFixedSizeList(e){e.startObject(1)}static addListSize(e,n){e.addFieldInt32(0,n,0)}static endFixedSizeList(e){return e.endObject()}static createFixedSizeList(e,n){return ri.startFixedSizeList(e),ri.addListSize(e,n),ri.endFixedSizeList(e)}}var Wd;(function(t){t[t.HALF=0]="HALF",t[t.SINGLE=1]="SINGLE",t[t.DOUBLE=2]="DOUBLE"})(Wd||(Wd={}));class ii{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsFloatingPoint(e,n){return(n||new ii).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFloatingPoint(e,n){return e.setPosition(e.position()+st),(n||new ii).__init(e.readInt32(e.position())+e.position(),e)}precision(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Wd.HALF}static startFloatingPoint(e){e.startObject(1)}static addPrecision(e,n){e.addFieldInt16(0,n,Wd.HALF)}static endFloatingPoint(e){return e.endObject()}static createFloatingPoint(e,n){return ii.startFloatingPoint(e),ii.addPrecision(e,n),ii.endFloatingPoint(e)}}var qd;(function(t){t[t.YEAR_MONTH=0]="YEAR_MONTH",t[t.DAY_TIME=1]="DAY_TIME",t[t.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(qd||(qd={}));class si{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsInterval(e,n){return(n||new si).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsInterval(e,n){return e.setPosition(e.position()+st),(n||new si).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):qd.YEAR_MONTH}static startInterval(e){e.startObject(1)}static addUnit(e,n){e.addFieldInt16(0,n,qd.YEAR_MONTH)}static endInterval(e){return e.endObject()}static createInterval(e,n){return si.startInterval(e),si.addUnit(e,n),si.endInterval(e)}}class _o{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsList(e,n){return(n||new _o).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsList(e,n){return e.setPosition(e.position()+st),(n||new _o).__init(e.readInt32(e.position())+e.position(),e)}static startList(e){e.startObject(0)}static endList(e){return e.endObject()}static createList(e){return _o.startList(e),_o.endList(e)}}let Bf=class oa{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsMap(e,n){return(n||new oa).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMap(e,n){return e.setPosition(e.position()+st),(n||new oa).__init(e.readInt32(e.position())+e.position(),e)}keysSorted(){const e=this.bb.__offset(this.bb_pos,4);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startMap(e){e.startObject(1)}static addKeysSorted(e,n){e.addFieldInt8(0,+n,0)}static endMap(e){return e.endObject()}static createMap(e,n){return oa.startMap(e),oa.addKeysSorted(e,n),oa.endMap(e)}};class bo{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsNull(e,n){return(n||new bo).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsNull(e,n){return e.setPosition(e.position()+st),(n||new bo).__init(e.readInt32(e.position())+e.position(),e)}static startNull(e){e.startObject(0)}static endNull(e){return e.endObject()}static createNull(e){return bo.startNull(e),bo.endNull(e)}}class So{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsStruct_(e,n){return(n||new So).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsStruct_(e,n){return e.setPosition(e.position()+st),(n||new So).__init(e.readInt32(e.position())+e.position(),e)}static startStruct_(e){e.startObject(0)}static endStruct_(e){return e.endObject()}static createStruct_(e){return So.startStruct_(e),So.endStruct_(e)}}class mr{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsTime(e,n){return(n||new mr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTime(e,n){return e.setPosition(e.position()+st),(n||new mr).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Xa.MILLISECOND}bitWidth(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):32}static startTime(e){e.startObject(2)}static addUnit(e,n){e.addFieldInt16(0,n,Xa.MILLISECOND)}static addBitWidth(e,n){e.addFieldInt32(1,n,32)}static endTime(e){return e.endObject()}static createTime(e,n,r){return mr.startTime(e),mr.addUnit(e,n),mr.addBitWidth(e,r),mr.endTime(e)}}class yr{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsTimestamp(e,n){return(n||new yr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTimestamp(e,n){return e.setPosition(e.position()+st),(n||new yr).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Xa.SECOND}timezone(e){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,e):null}static startTimestamp(e){e.startObject(2)}static addUnit(e,n){e.addFieldInt16(0,n,Xa.SECOND)}static addTimezone(e,n){e.addFieldOffset(1,n,0)}static endTimestamp(e){return e.endObject()}static createTimestamp(e,n,r){return yr.startTimestamp(e),yr.addUnit(e,n),yr.addTimezone(e,r),yr.endTimestamp(e)}}var Hd;(function(t){t[t.Sparse=0]="Sparse",t[t.Dense=1]="Dense"})(Hd||(Hd={}));class Dn{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsUnion(e,n){return(n||new Dn).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsUnion(e,n){return e.setPosition(e.position()+st),(n||new Dn).__init(e.readInt32(e.position())+e.position(),e)}mode(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Hd.Sparse}typeIds(e){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+e*4):0}typeIdsLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}typeIdsArray(){const e=this.bb.__offset(this.bb_pos,6);return e?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}static startUnion(e){e.startObject(2)}static addMode(e,n){e.addFieldInt16(0,n,Hd.Sparse)}static addTypeIds(e,n){e.addFieldOffset(1,n,0)}static createTypeIdsVector(e,n){e.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)e.addInt32(n[r]);return e.endVector()}static startTypeIdsVector(e,n){e.startVector(4,n,4)}static endUnion(e){return e.endObject()}static createUnion(e,n,r){return Dn.startUnion(e),Dn.addMode(e,n),Dn.addTypeIds(e,r),Dn.endUnion(e)}}class Io{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsUtf8(e,n){return(n||new Io).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsUtf8(e,n){return e.setPosition(e.position()+st),(n||new Io).__init(e.readInt32(e.position())+e.position(),e)}static startUtf8(e){e.startObject(0)}static endUtf8(e){return e.endObject()}static createUtf8(e){return Io.startUtf8(e),Io.endUtf8(e)}}var _t;(function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.FloatingPoint=3]="FloatingPoint",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct_=13]="Struct_",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Duration=18]="Duration",t[t.LargeBinary=19]="LargeBinary",t[t.LargeUtf8=20]="LargeUtf8",t[t.LargeList=21]="LargeList"})(_t||(_t={}));let fr=class Ff{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsField(e,n){return(n||new Ff).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsField(e,n){return e.setPosition(e.position()+st),(n||new Ff).__init(e.readInt32(e.position())+e.position(),e)}name(e){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,e):null}nullable(){const e=this.bb.__offset(this.bb_pos,6);return e?!!this.bb.readInt8(this.bb_pos+e):!1}typeType(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint8(this.bb_pos+e):_t.NONE}type(e){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(e,this.bb_pos+n):null}dictionary(e){const n=this.bb.__offset(this.bb_pos,12);return n?(e||new Di).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(e,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new Ff).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+e*4),this.bb):null}childrenLength(){const e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,n){const r=this.bb.__offset(this.bb_pos,16);return r?(n||new zt).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,16);return e?this.bb.__vector_len(this.bb_pos+e):0}static startField(e){e.startObject(7)}static addName(e,n){e.addFieldOffset(0,n,0)}static addNullable(e,n){e.addFieldInt8(1,+n,0)}static addTypeType(e,n){e.addFieldInt8(2,n,_t.NONE)}static addType(e,n){e.addFieldOffset(3,n,0)}static addDictionary(e,n){e.addFieldOffset(4,n,0)}static addChildren(e,n){e.addFieldOffset(5,n,0)}static createChildrenVector(e,n){e.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)e.addOffset(n[r]);return e.endVector()}static startChildrenVector(e,n){e.startVector(4,n,4)}static addCustomMetadata(e,n){e.addFieldOffset(6,n,0)}static createCustomMetadataVector(e,n){e.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)e.addOffset(n[r]);return e.endVector()}static startCustomMetadataVector(e,n){e.startVector(4,n,4)}static endField(e){return e.endObject()}},Yr=class wi{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsSchema(e,n){return(n||new wi).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsSchema(e,n){return e.setPosition(e.position()+st),(n||new wi).__init(e.readInt32(e.position())+e.position(),e)}endianness(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Ja.Little}fields(e,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new fr).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+e*4),this.bb):null}fieldsLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new zt).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}features(e){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+e*8):this.bb.createLong(0,0)}featuresLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}static startSchema(e){e.startObject(4)}static addEndianness(e,n){e.addFieldInt16(0,n,Ja.Little)}static addFields(e,n){e.addFieldOffset(1,n,0)}static createFieldsVector(e,n){e.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)e.addOffset(n[r]);return e.endVector()}static startFieldsVector(e,n){e.startVector(4,n,4)}static addCustomMetadata(e,n){e.addFieldOffset(2,n,0)}static createCustomMetadataVector(e,n){e.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)e.addOffset(n[r]);return e.endVector()}static startCustomMetadataVector(e,n){e.startVector(4,n,4)}static addFeatures(e,n){e.addFieldOffset(3,n,0)}static createFeaturesVector(e,n){e.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)e.addInt64(n[r]);return e.endVector()}static startFeaturesVector(e,n){e.startVector(8,n,8)}static endSchema(e){return e.endObject()}static finishSchemaBuffer(e,n){e.finish(n)}static finishSizePrefixedSchemaBuffer(e,n){e.finish(n,void 0,!0)}static createSchema(e,n,r,i,s){return wi.startSchema(e),wi.addEndianness(e,n),wi.addFields(e,r),wi.addCustomMetadata(e,i),wi.addFeatures(e,s),wi.endSchema(e)}};class qn{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsFooter(e,n){return(n||new qn).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFooter(e,n){return e.setPosition(e.position()+st),(n||new qn).__init(e.readInt32(e.position())+e.position(),e)}version(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Ga.V1}schema(e){const n=this.bb.__offset(this.bb_pos,6);return n?(e||new Yr).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(e,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new dv).__init(this.bb.__vector(this.bb_pos+r)+e*24,this.bb):null}dictionariesLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}recordBatches(e,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new dv).__init(this.bb.__vector(this.bb_pos+r)+e*24,this.bb):null}recordBatchesLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new zt).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static startFooter(e){e.startObject(5)}static addVersion(e,n){e.addFieldInt16(0,n,Ga.V1)}static addSchema(e,n){e.addFieldOffset(1,n,0)}static addDictionaries(e,n){e.addFieldOffset(2,n,0)}static startDictionariesVector(e,n){e.startVector(24,n,8)}static addRecordBatches(e,n){e.addFieldOffset(3,n,0)}static startRecordBatchesVector(e,n){e.startVector(24,n,8)}static addCustomMetadata(e,n){e.addFieldOffset(4,n,0)}static createCustomMetadataVector(e,n){e.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)e.addOffset(n[r]);return e.endVector()}static startCustomMetadataVector(e,n){e.startVector(4,n,4)}static endFooter(e){return e.endObject()}static finishFooterBuffer(e,n){e.finish(n)}static finishSizePrefixedFooterBuffer(e,n){e.finish(n,void 0,!0)}}class We{constructor(e=[],n,r){this.fields=e||[],this.metadata=n||new Map,r||(r=mv(e)),this.dictionaries=r}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(e=>e.name)}toString(){return`Schema<{ ${this.fields.map((e,n)=>`${n}: ${e}`).join(", ")} }>`}select(e){const n=new Set(e),r=this.fields.filter(i=>n.has(i.name));return new We(r,this.metadata)}selectAt(e){const n=e.map(r=>this.fields[r]).filter(Boolean);return new We(n,this.metadata)}assign(...e){const n=e[0]instanceof We?e[0]:Array.isArray(e[0])?new We(e[0]):new We(e),r=[...this.fields],i=df(df(new Map,this.metadata),n.metadata),s=n.fields.filter(a=>{const l=r.findIndex(f=>f.name===a.name);return~l?(r[l]=a.clone({metadata:df(df(new Map,r[l].metadata),a.metadata)}))&&!1:!0}),o=mv(s,new Map);return new We([...r,...s],i,new Map([...this.dictionaries,...o]))}}We.prototype.fields=null;We.prototype.metadata=null;We.prototype.dictionaries=null;class yt{constructor(e,n,r=!1,i){this.name=e,this.type=n,this.nullable=r,this.metadata=i||new Map}static new(...e){let[n,r,i,s]=e;return e[0]&&typeof e[0]=="object"&&({name:n}=e[0],r===void 0&&(r=e[0].type),i===void 0&&(i=e[0].nullable),s===void 0&&(s=e[0].metadata)),new yt(`${n}`,r,i,s)}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...e){let[n,r,i,s]=e;return!e[0]||typeof e[0]!="object"?[n=this.name,r=this.type,i=this.nullable,s=this.metadata]=e:{name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:s=this.metadata}=e[0],yt.new(n,r,i,s)}}yt.prototype.type=null;yt.prototype.name=null;yt.prototype.nullable=null;yt.prototype.metadata=null;function df(t,e){return new Map([...t||new Map,...e||new Map])}function mv(t,e=new Map){for(let n=-1,r=t.length;++n<r;){const s=t[n].type;if(we.isDictionary(s)){if(!e.has(s.id))e.set(s.id,s.dictionary);else if(e.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&mv(s.children,e)}return e}var b1=Ni,ij=ZD,sj=Ya;class jl{constructor(e,n=Gn.V4,r,i){this.schema=e,this.version=n,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}static decode(e){e=new sj(Ue(e));const n=qn.getRootAsFooter(e),r=We.decode(n.schema());return new oj(r,n)}static encode(e){const n=new ij,r=We.encode(n,e.schema);qn.startRecordBatchesVector(n,e.numRecordBatches);for(const o of[...e.recordBatches()].slice().reverse())$s.encode(n,o);const i=n.endVector();qn.startDictionariesVector(n,e.numDictionaries);for(const o of[...e.dictionaryBatches()].slice().reverse())$s.encode(n,o);const s=n.endVector();return qn.startFooter(n),qn.addSchema(n,r),qn.addVersion(n,Gn.V4),qn.addRecordBatches(n,i),qn.addDictionaries(n,s),qn.finishFooterBuffer(n,qn.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}*recordBatches(){for(let e,n=-1,r=this.numRecordBatches;++n<r;)(e=this.getRecordBatch(n))&&(yield e)}*dictionaryBatches(){for(let e,n=-1,r=this.numDictionaries;++n<r;)(e=this.getDictionaryBatch(n))&&(yield e)}getRecordBatch(e){return e>=0&&e<this.numRecordBatches&&this._recordBatches[e]||null}getDictionaryBatch(e){return e>=0&&e<this.numDictionaries&&this._dictionaryBatches[e]||null}}class oj extends jl{constructor(e,n){super(e,n.version()),this._footer=n}get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}getRecordBatch(e){if(e>=0&&e<this.numRecordBatches){const n=this._footer.recordBatches(e);if(n)return $s.decode(n)}return null}getDictionaryBatch(e){if(e>=0&&e<this.numDictionaries){const n=this._footer.dictionaries(e);if(n)return $s.decode(n)}return null}}class $s{constructor(e,n,r){this.metaDataLength=e,this.offset=typeof r=="number"?r:r.low,this.bodyLength=typeof n=="number"?n:n.low}static decode(e){return new $s(e.metaDataLength(),e.bodyLength(),e.offset())}static encode(e,n){const{metaDataLength:r}=n,i=new b1(n.offset,0),s=new b1(n.bodyLength,0);return dv.createBlock(e,i,r,s)}}const St=Object.freeze({done:!0,value:void 0});class S1{constructor(e){this._json=e}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}class k0{tee(){return this._getDOMStream().tee()}pipe(e,n){return this._getNodeStream().pipe(e,n)}pipeTo(e,n){return this._getDOMStream().pipeTo(e,n)}pipeThrough(e,n){return this._getDOMStream().pipeThrough(e,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class aj extends k0{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(e=>this._closedPromiseResolve=e)}get closed(){return this._closedPromise}cancel(e){return ve(this,void 0,void 0,function*(){yield this.return(e)})}write(e){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(e):this.resolvers.shift().resolve({done:!1,value:e}))}abort(e){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:e}:this.resolvers.shift().reject({done:!0,value:e}))}close(){if(this._closedPromiseResolve){const{resolvers:e}=this;for(;e.length>0;)e.shift().resolve(St);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(e){return dr.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,e)}toNodeStream(e){return dr.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,e)}throw(e){return ve(this,void 0,void 0,function*(){return yield this.abort(e),St})}return(e){return ve(this,void 0,void 0,function*(){return yield this.close(),St})}read(e){return ve(this,void 0,void 0,function*(){return(yield this.next(e,"read")).value})}peek(e){return ve(this,void 0,void 0,function*(){return(yield this.next(e,"peek")).value})}next(...e){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,r)=>{this.resolvers.push({resolve:n,reject:r})}):Promise.resolve(St)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class Lf extends aj{write(e){if((e=Ue(e)).byteLength>0)return super.write(e)}toString(e=!1){return e?av(this.toUint8Array(!0)):this.toUint8Array(!1).then(av)}toUint8Array(e=!1){return e?fi(this._values)[0]:(()=>ve(this,void 0,void 0,function*(){var n,r;const i=[];let s=0;try{for(var o=Ds(this),a;a=yield o.next(),!a.done;){const l=a.value;i.push(l),s+=l.byteLength}}catch(l){n={error:l}}finally{try{a&&!a.done&&(r=o.return)&&(yield r.call(o))}finally{if(n)throw n.error}}return fi(i,s)[0]}))()}}class Qd{constructor(e){e&&(this.source=new uj(dr.fromIterable(e)))}[Symbol.iterator](){return this}next(e){return this.source.next(e)}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}peek(e){return this.source.peek(e)}read(e){return this.source.read(e)}}class Za{constructor(e){e instanceof Za?this.source=e.source:e instanceof Lf?this.source=new lo(dr.fromAsyncIterable(e)):Bk(e)?this.source=new lo(dr.fromNodeStream(e)):d0(e)?this.source=new lo(dr.fromDOMStream(e)):Nk(e)?this.source=new lo(dr.fromDOMStream(e.body)):uc(e)?this.source=new lo(dr.fromIterable(e)):Ns(e)?this.source=new lo(dr.fromAsyncIterable(e)):fu(e)&&(this.source=new lo(dr.fromAsyncIterable(e)))}[Symbol.asyncIterator](){return this}next(e){return this.source.next(e)}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}get closed(){return this.source.closed}cancel(e){return this.source.cancel(e)}peek(e){return this.source.peek(e)}read(e){return this.source.read(e)}}class uj{constructor(e){this.source=e}cancel(e){this.return(e)}peek(e){return this.next(e,"peek").value}read(e){return this.next(e,"read").value}next(e,n="read"){return this.source.next({cmd:n,size:e})}throw(e){return Object.create(this.source.throw&&this.source.throw(e)||St)}return(e){return Object.create(this.source.return&&this.source.return(e)||St)}}class lo{constructor(e){this.source=e,this._closedPromise=new Promise(n=>this._closedPromiseResolve=n)}cancel(e){return ve(this,void 0,void 0,function*(){yield this.return(e)})}get closed(){return this._closedPromise}read(e){return ve(this,void 0,void 0,function*(){return(yield this.next(e,"read")).value})}peek(e){return ve(this,void 0,void 0,function*(){return(yield this.next(e,"peek")).value})}next(e,n="read"){return ve(this,void 0,void 0,function*(){return yield this.source.next({cmd:n,size:e})})}throw(e){return ve(this,void 0,void 0,function*(){const n=this.source.throw&&(yield this.source.throw(e))||St;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}return(e){return ve(this,void 0,void 0,function*(){const n=this.source.return&&(yield this.source.return(e))||St;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}}class I1 extends Qd{constructor(e,n){super(),this.position=0,this.buffer=Ue(e),this.size=typeof n>"u"?this.buffer.byteLength:n}readInt32(e){const{buffer:n,byteOffset:r}=this.readAt(e,4);return new DataView(n,r).getInt32(0,!0)}seek(e){return this.position=Math.min(e,this.size),e<this.size}read(e){const{buffer:n,size:r,position:i}=this;return n&&i<r?(typeof e!="number"&&(e=Number.POSITIVE_INFINITY),this.position=Math.min(r,i+Math.min(r-i,e)),n.subarray(i,this.position)):null}readAt(e,n){const r=this.buffer,i=Math.min(this.size,e+n);return r?r.subarray(e,i):new Uint8Array(n)}close(){this.buffer&&(this.buffer=null)}throw(e){return this.close(),{done:!0,value:e}}return(e){return this.close(),{done:!0,value:e}}}class Yd extends Za{constructor(e,n){super(),this.position=0,this._handle=e,typeof n=="number"?this.size=n:this._pending=(()=>ve(this,void 0,void 0,function*(){this.size=(yield e.stat()).size,delete this._pending}))()}readInt32(e){return ve(this,void 0,void 0,function*(){const{buffer:n,byteOffset:r}=yield this.readAt(e,4);return new DataView(n,r).getInt32(0,!0)})}seek(e){return ve(this,void 0,void 0,function*(){return this._pending&&(yield this._pending),this.position=Math.min(e,this.size),e<this.size})}read(e){return ve(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:n,size:r,position:i}=this;if(n&&i<r){typeof e!="number"&&(e=Number.POSITIVE_INFINITY);let s=i,o=0,a=0;const l=Math.min(r,s+Math.min(r-s,e)),f=new Uint8Array(Math.max(0,(this.position=l)-s));for(;(s+=a)<l&&(o+=a)<f.byteLength;)({bytesRead:a}=yield n.read(f,o,f.byteLength-o,s));return f}return null})}readAt(e,n){return ve(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:r,size:i}=this;if(r&&e+n<i){const s=Math.min(i,e+n),o=new Uint8Array(s-e);return(yield r.read(o,0,n,e)).buffer}return new Uint8Array(n)})}close(){return ve(this,void 0,void 0,function*(){const e=this._handle;this._handle=null,e&&(yield e.close())})}throw(e){return ve(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:e}})}return(e){return ve(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:e}})}}const lj=65536;function _a(t){return t<0&&(t=4294967295+t+1),`0x${t.toString(16)}`}const eu=8,D0=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class tx{constructor(e){this.buffer=e}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(e){const n=new Uint32Array([this.buffer[1]>>>16,this.buffer[1]&65535,this.buffer[0]>>>16,this.buffer[0]&65535]),r=new Uint32Array([e.buffer[1]>>>16,e.buffer[1]&65535,e.buffer[0]>>>16,e.buffer[0]&65535]);let i=n[3]*r[3];this.buffer[0]=i&65535;let s=i>>>16;return i=n[2]*r[3],s+=i,i=n[3]*r[2]>>>0,s+=i,this.buffer[0]+=s<<16,this.buffer[1]=s>>>0<i?lj:0,this.buffer[1]+=s>>>16,this.buffer[1]+=n[1]*r[3]+n[2]*r[2]+n[3]*r[1],this.buffer[1]+=n[0]*r[3]+n[1]*r[2]+n[2]*r[1]+n[3]*r[0]<<16,this}_plus(e){const n=this.buffer[0]+e.buffer[0]>>>0;this.buffer[1]+=e.buffer[1],n<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=n}lessThan(e){return this.buffer[1]<e.buffer[1]||this.buffer[1]===e.buffer[1]&&this.buffer[0]<e.buffer[0]}equals(e){return this.buffer[1]===e.buffer[1]&&this.buffer[0]==e.buffer[0]}greaterThan(e){return e.lessThan(this)}hex(){return`${_a(this.buffer[1])} ${_a(this.buffer[0])}`}}class Qe extends tx{times(e){return this._times(e),this}plus(e){return this._plus(e),this}static from(e,n=new Uint32Array(2)){return Qe.fromString(typeof e=="string"?e:e.toString(),n)}static fromNumber(e,n=new Uint32Array(2)){return Qe.fromString(e.toString(),n)}static fromString(e,n=new Uint32Array(2)){const r=e.length,i=new Qe(n);for(let s=0;s<r;){const o=eu<r-s?eu:r-s,a=new Qe(new Uint32Array([Number.parseInt(e.slice(s,s+o),10),0])),l=new Qe(new Uint32Array([D0[o],0]));i.times(l),i.plus(a),s+=o}return i}static convertArray(e){const n=new Uint32Array(e.length*2);for(let r=-1,i=e.length;++r<i;)Qe.from(e[r],new Uint32Array(n.buffer,n.byteOffset+2*r*4,2));return n}static multiply(e,n){return new Qe(new Uint32Array(e.buffer)).times(n)}static add(e,n){return new Qe(new Uint32Array(e.buffer)).plus(n)}}class En extends tx{negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[0]==0&&++this.buffer[1],this}times(e){return this._times(e),this}plus(e){return this._plus(e),this}lessThan(e){const n=this.buffer[1]<<0,r=e.buffer[1]<<0;return n<r||n===r&&this.buffer[0]<e.buffer[0]}static from(e,n=new Uint32Array(2)){return En.fromString(typeof e=="string"?e:e.toString(),n)}static fromNumber(e,n=new Uint32Array(2)){return En.fromString(e.toString(),n)}static fromString(e,n=new Uint32Array(2)){const r=e.startsWith("-"),i=e.length,s=new En(n);for(let o=r?1:0;o<i;){const a=eu<i-o?eu:i-o,l=new En(new Uint32Array([Number.parseInt(e.slice(o,o+a),10),0])),f=new En(new Uint32Array([D0[a],0]));s.times(f),s.plus(l),o+=a}return r?s.negate():s}static convertArray(e){const n=new Uint32Array(e.length*2);for(let r=-1,i=e.length;++r<i;)En.from(e[r],new Uint32Array(n.buffer,n.byteOffset+2*r*4,2));return n}static multiply(e,n){return new En(new Uint32Array(e.buffer)).times(n)}static add(e,n){return new En(new Uint32Array(e.buffer)).plus(n)}}class Gr{constructor(e){this.buffer=e}high(){return new En(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new En(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],this.buffer[0]==0&&++this.buffer[1],this.buffer[1]==0&&++this.buffer[2],this.buffer[2]==0&&++this.buffer[3],this}times(e){const n=new Qe(new Uint32Array([this.buffer[3],0])),r=new Qe(new Uint32Array([this.buffer[2],0])),i=new Qe(new Uint32Array([this.buffer[1],0])),s=new Qe(new Uint32Array([this.buffer[0],0])),o=new Qe(new Uint32Array([e.buffer[3],0])),a=new Qe(new Uint32Array([e.buffer[2],0])),l=new Qe(new Uint32Array([e.buffer[1],0])),f=new Qe(new Uint32Array([e.buffer[0],0]));let h=Qe.multiply(s,f);this.buffer[0]=h.low();const p=new Qe(new Uint32Array([h.high(),0]));return h=Qe.multiply(i,f),p.plus(h),h=Qe.multiply(s,l),p.plus(h),this.buffer[1]=p.low(),this.buffer[3]=p.lessThan(h)?1:0,this.buffer[2]=p.high(),new Qe(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(Qe.multiply(r,f)).plus(Qe.multiply(i,l)).plus(Qe.multiply(s,a)),this.buffer[3]+=Qe.multiply(n,f).plus(Qe.multiply(r,l)).plus(Qe.multiply(i,a)).plus(Qe.multiply(s,o)).low(),this}plus(e){const n=new Uint32Array(4);return n[3]=this.buffer[3]+e.buffer[3]>>>0,n[2]=this.buffer[2]+e.buffer[2]>>>0,n[1]=this.buffer[1]+e.buffer[1]>>>0,n[0]=this.buffer[0]+e.buffer[0]>>>0,n[0]<this.buffer[0]>>>0&&++n[1],n[1]<this.buffer[1]>>>0&&++n[2],n[2]<this.buffer[2]>>>0&&++n[3],this.buffer[3]=n[3],this.buffer[2]=n[2],this.buffer[1]=n[1],this.buffer[0]=n[0],this}hex(){return`${_a(this.buffer[3])} ${_a(this.buffer[2])} ${_a(this.buffer[1])} ${_a(this.buffer[0])}`}static multiply(e,n){return new Gr(new Uint32Array(e.buffer)).times(n)}static add(e,n){return new Gr(new Uint32Array(e.buffer)).plus(n)}static from(e,n=new Uint32Array(4)){return Gr.fromString(typeof e=="string"?e:e.toString(),n)}static fromNumber(e,n=new Uint32Array(4)){return Gr.fromString(e.toString(),n)}static fromString(e,n=new Uint32Array(4)){const r=e.startsWith("-"),i=e.length,s=new Gr(n);for(let o=r?1:0;o<i;){const a=eu<i-o?eu:i-o,l=new Gr(new Uint32Array([Number.parseInt(e.slice(o,o+a),10),0,0,0])),f=new Gr(new Uint32Array([D0[a],0,0,0]));s.times(f),s.plus(l),o+=a}return r?s.negate():s}static convertArray(e){const n=new Uint32Array(e.length*4);for(let r=-1,i=e.length;++r<i;)Gr.from(e[r],new Uint32Array(n.buffer,n.byteOffset+4*4*r,4));return n}}class nx extends Be{constructor(e,n,r,i){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=e,this.nodes=n,this.buffers=r,this.dictionaries=i}visit(e){return super.visit(e instanceof yt?e.type:e)}visitNull(e,{length:n}=this.nextFieldNode()){return Ne({type:e,length:n})}visitBool(e,{length:n,nullCount:r}=this.nextFieldNode()){return Ne({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitInt(e,{length:n,nullCount:r}=this.nextFieldNode()){return Ne({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitFloat(e,{length:n,nullCount:r}=this.nextFieldNode()){return Ne({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitUtf8(e,{length:n,nullCount:r}=this.nextFieldNode()){return Ne({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitBinary(e,{length:n,nullCount:r}=this.nextFieldNode()){return Ne({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitFixedSizeBinary(e,{length:n,nullCount:r}=this.nextFieldNode()){return Ne({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitDate(e,{length:n,nullCount:r}=this.nextFieldNode()){return Ne({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitTimestamp(e,{length:n,nullCount:r}=this.nextFieldNode()){return Ne({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitTime(e,{length:n,nullCount:r}=this.nextFieldNode()){return Ne({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitDecimal(e,{length:n,nullCount:r}=this.nextFieldNode()){return Ne({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitList(e,{length:n,nullCount:r}=this.nextFieldNode()){return Ne({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),valueOffsets:this.readOffsets(e),child:this.visit(e.children[0])})}visitStruct(e,{length:n,nullCount:r}=this.nextFieldNode()){return Ne({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),children:this.visitMany(e.children)})}visitUnion(e){return e.mode===rr.Sparse?this.visitSparseUnion(e):this.visitDenseUnion(e)}visitDenseUnion(e,{length:n,nullCount:r}=this.nextFieldNode()){return Ne({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),typeIds:this.readTypeIds(e),valueOffsets:this.readOffsets(e),children:this.visitMany(e.children)})}visitSparseUnion(e,{length:n,nullCount:r}=this.nextFieldNode()){return Ne({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),typeIds:this.readTypeIds(e),children:this.visitMany(e.children)})}visitDictionary(e,{length:n,nullCount:r}=this.nextFieldNode()){return Ne({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e.indices),dictionary:this.readDictionary(e)})}visitInterval(e,{length:n,nullCount:r}=this.nextFieldNode()){return Ne({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitFixedSizeList(e,{length:n,nullCount:r}=this.nextFieldNode()){return Ne({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),child:this.visit(e.children[0])})}visitMap(e,{length:n,nullCount:r}=this.nextFieldNode()){return Ne({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),valueOffsets:this.readOffsets(e),child:this.visit(e.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(e,n,r=this.nextBufferRange()){return n>0&&this.readData(e,r)||new Uint8Array(0)}readOffsets(e,n){return this.readData(e,n)}readTypeIds(e,n){return this.readData(e,n)}readData(e,{length:n,offset:r}=this.nextBufferRange()){return this.bytes.subarray(r,r+n)}readDictionary(e){return this.dictionaries.get(e.id)}}class cj extends nx{constructor(e,n,r,i){super(new Uint8Array(0),n,r,i),this.sources=e}readNullBitmap(e,n,{offset:r}=this.nextBufferRange()){return n<=0?new Uint8Array(0):jd(this.sources[r])}readOffsets(e,{offset:n}=this.nextBufferRange()){return rt(Uint8Array,rt(Int32Array,this.sources[n]))}readTypeIds(e,{offset:n}=this.nextBufferRange()){return rt(Uint8Array,rt(e.ArrayType,this.sources[n]))}readData(e,{offset:n}=this.nextBufferRange()){const{sources:r}=this;return we.isTimestamp(e)||(we.isInt(e)||we.isTime(e))&&e.bitWidth===64||we.isDate(e)&&e.unit===Hi.MILLISECOND?rt(Uint8Array,En.convertArray(r[n])):we.isDecimal(e)?rt(Uint8Array,Gr.convertArray(r[n])):we.isBinary(e)||we.isFixedSizeBinary(e)?fj(r[n]):we.isBool(e)?jd(r[n]):we.isUtf8(e)?f0(r[n].join("")):rt(Uint8Array,rt(e.ArrayType,r[n].map(i=>+i)))}}function fj(t){const e=t.join(""),n=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2)n[r>>1]=Number.parseInt(e.slice(r,r+2),16);return n}class Ie extends Be{compareSchemas(e,n){return e===n||n instanceof e.constructor&&this.compareManyFields(e.fields,n.fields)}compareManyFields(e,n){return e===n||Array.isArray(e)&&Array.isArray(n)&&e.length===n.length&&e.every((r,i)=>this.compareFields(r,n[i]))}compareFields(e,n){return e===n||n instanceof e.constructor&&e.name===n.name&&e.nullable===n.nullable&&this.visit(e.type,n.type)}}function zn(t,e){return e instanceof t.constructor}function lc(t,e){return t===e||zn(t,e)}function Ji(t,e){return t===e||zn(t,e)&&t.bitWidth===e.bitWidth&&t.isSigned===e.isSigned}function Uh(t,e){return t===e||zn(t,e)&&t.precision===e.precision}function dj(t,e){return t===e||zn(t,e)&&t.byteWidth===e.byteWidth}function x0(t,e){return t===e||zn(t,e)&&t.unit===e.unit}function cc(t,e){return t===e||zn(t,e)&&t.unit===e.unit&&t.timezone===e.timezone}function fc(t,e){return t===e||zn(t,e)&&t.unit===e.unit&&t.bitWidth===e.bitWidth}function hj(t,e){return t===e||zn(t,e)&&t.children.length===e.children.length&&js.compareManyFields(t.children,e.children)}function pj(t,e){return t===e||zn(t,e)&&t.children.length===e.children.length&&js.compareManyFields(t.children,e.children)}function C0(t,e){return t===e||zn(t,e)&&t.mode===e.mode&&t.typeIds.every((n,r)=>n===e.typeIds[r])&&js.compareManyFields(t.children,e.children)}function mj(t,e){return t===e||zn(t,e)&&t.id===e.id&&t.isOrdered===e.isOrdered&&js.visit(t.indices,e.indices)&&js.visit(t.dictionary,e.dictionary)}function A0(t,e){return t===e||zn(t,e)&&t.unit===e.unit}function yj(t,e){return t===e||zn(t,e)&&t.listSize===e.listSize&&t.children.length===e.children.length&&js.compareManyFields(t.children,e.children)}function vj(t,e){return t===e||zn(t,e)&&t.keysSorted===e.keysSorted&&t.children.length===e.children.length&&js.compareManyFields(t.children,e.children)}Ie.prototype.visitNull=lc;Ie.prototype.visitBool=lc;Ie.prototype.visitInt=Ji;Ie.prototype.visitInt8=Ji;Ie.prototype.visitInt16=Ji;Ie.prototype.visitInt32=Ji;Ie.prototype.visitInt64=Ji;Ie.prototype.visitUint8=Ji;Ie.prototype.visitUint16=Ji;Ie.prototype.visitUint32=Ji;Ie.prototype.visitUint64=Ji;Ie.prototype.visitFloat=Uh;Ie.prototype.visitFloat16=Uh;Ie.prototype.visitFloat32=Uh;Ie.prototype.visitFloat64=Uh;Ie.prototype.visitUtf8=lc;Ie.prototype.visitBinary=lc;Ie.prototype.visitFixedSizeBinary=dj;Ie.prototype.visitDate=x0;Ie.prototype.visitDateDay=x0;Ie.prototype.visitDateMillisecond=x0;Ie.prototype.visitTimestamp=cc;Ie.prototype.visitTimestampSecond=cc;Ie.prototype.visitTimestampMillisecond=cc;Ie.prototype.visitTimestampMicrosecond=cc;Ie.prototype.visitTimestampNanosecond=cc;Ie.prototype.visitTime=fc;Ie.prototype.visitTimeSecond=fc;Ie.prototype.visitTimeMillisecond=fc;Ie.prototype.visitTimeMicrosecond=fc;Ie.prototype.visitTimeNanosecond=fc;Ie.prototype.visitDecimal=lc;Ie.prototype.visitList=hj;Ie.prototype.visitStruct=pj;Ie.prototype.visitUnion=C0;Ie.prototype.visitDenseUnion=C0;Ie.prototype.visitSparseUnion=C0;Ie.prototype.visitDictionary=mj;Ie.prototype.visitInterval=A0;Ie.prototype.visitIntervalDayTime=A0;Ie.prototype.visitIntervalYearMonth=A0;Ie.prototype.visitFixedSizeList=yj;Ie.prototype.visitMap=vj;const js=new Ie;function yv(t,e){return js.compareSchemas(t,e)}function Dm(t,e){return gj(t,e.map(n=>n.data.concat()))}function gj(t,e){const n=[...t.fields],r=[],i={numBatches:e.reduce((p,y)=>Math.max(p,y.length),0)};let s=0,o=0,a=-1;const l=e.length;let f,h=[];for(;i.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<l;)h[a]=f=e[a].shift(),o=Math.min(o,f?f.length:o);Number.isFinite(o)&&(h=wj(n,o,h,e,i),o>0&&(r[s++]=Ne({type:new vn(n),length:o,nullCount:0,children:h.slice()})))}return[t=t.assign(n),r.map(p=>new xn(t,p))]}function wj(t,e,n,r,i){var s;const o=(e+63&-64)>>3;for(let a=-1,l=r.length;++a<l;){const f=n[a],h=f==null?void 0:f.length;if(h>=e)h===e?n[a]=f:(n[a]=f.slice(0,e),i.numBatches=Math.max(i.numBatches,r[a].unshift(f.slice(e,h-e))));else{const p=t[a];t[a]=p.clone({nullable:!0}),n[a]=(s=f==null?void 0:f._changeLengthAndBackfillNullBitmap(e))!==null&&s!==void 0?s:Ne({type:p.type,length:e,nullCount:e,nullBitmap:new Uint8Array(o)})}}return n}var rx;class mn{constructor(...e){var n,r;if(e.length===0)return this.batches=[],this.schema=new We([]),this._offsets=[0],this;let i,s;e[0]instanceof We&&(i=e.shift()),e[e.length-1]instanceof Uint32Array&&(s=e.pop());const o=l=>{if(l){if(l instanceof xn)return[l];if(l instanceof mn)return l.batches;if(l instanceof at){if(l.type instanceof vn)return[new xn(new We(l.type.children),l)]}else{if(Array.isArray(l))return l.flatMap(f=>o(f));if(typeof l[Symbol.iterator]=="function")return[...l].flatMap(f=>o(f));if(typeof l=="object"){const f=Object.keys(l),h=f.map(w=>new Ke([l[w]])),p=new We(f.map((w,I)=>new yt(String(w),h[I].type))),[,y]=Dm(p,h);return y.length===0?[new xn(l)]:y}}}return[]},a=e.flatMap(l=>o(l));if(i=(r=i??((n=a[0])===null||n===void 0?void 0:n.schema))!==null&&r!==void 0?r:new We([]),!(i instanceof We))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const l of a){if(!(l instanceof xn))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!yv(i,l.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=s??zD(this.data)}get data(){return this.batches.map(({data:e})=>e)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((e,n)=>e+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=UD(this.data)),this._nullCount}isValid(e){return!1}get(e){return null}set(e,n){}indexOf(e,n){return-1}getByteLength(e){return 0}[Symbol.iterator](){return this.batches.length>0?O0.visit(new Ke(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...e){const n=this.schema,r=this.data.concat(e.flatMap(({data:i})=>i));return new mn(n,r.map(i=>new xn(n,i)))}slice(e,n){const r=this.schema;[e,n]=$D({length:this.numRows},e,n);const i=VD(this.data,this._offsets,e,n);return new mn(r,i.map(s=>new xn(r,s)))}getChild(e){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===e))}getChildAt(e){if(e>-1&&e<this.schema.fields.length){const n=this.data.map(r=>r.children[e]);if(n.length===0){const{type:r}=this.schema.fields[e],i=Ne({type:r,length:0,nullCount:0});n.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new Ke(n)}return null}setChild(e,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===e),n)}setChildAt(e,n){let r=this.schema,i=[...this.batches];if(e>-1&&e<this.numCols){n||(n=new Ke([Ne({type:new Fs,length:this.numRows})]));const s=r.fields.slice(),o=s[e].clone({type:n.type}),a=this.schema.fields.map((l,f)=>this.getChildAt(f));[s[e],a[e]]=[o,n],[r,i]=Dm(r,a)}return new mn(r,i)}select(e){const n=this.schema.fields.reduce((r,i,s)=>r.set(i.name,s),new Map);return this.selectAt(e.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(e){const n=this.schema.selectAt(e),r=this.batches.map(i=>i.selectAt(e));return new mn(n,r)}assign(e){const n=this.schema.fields,[r,i]=e.schema.fields.reduce((a,l,f)=>{const[h,p]=a,y=n.findIndex(w=>w.name===l.name);return~y?p[y]=f:h.push(f),a},[[],[]]),s=this.schema.assign(e.schema),o=[...n.map((a,l)=>[l,i[l]]).map(([a,l])=>l===void 0?this.getChildAt(a):e.getChildAt(l)),...r.map(a=>e.getChildAt(a))].filter(Boolean);return new mn(...Dm(s,o))}}rx=Symbol.toStringTag;mn[rx]=(t=>(t.schema=null,t.batches=[],t._offsets=new Uint32Array([0]),t._nullCount=-1,t[Symbol.isConcatSpreadable]=!0,t.isValid=Pa(E0),t.get=Pa(Ln.getVisitFn(N.Struct)),t.set=KD(Sr.getVisitFn(N.Struct)),t.indexOf=WD(Ud.getVisitFn(N.Struct)),t.getByteLength=Pa(di.getVisitFn(N.Struct)),"Table"))(mn.prototype);var ix;let xn=class Vu{constructor(...e){switch(e.length){case 2:{if([this.schema]=e,!(this.schema instanceof We))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=Ne({nullCount:0,type:new vn(this.schema.fields),children:this.schema.fields.map(n=>Ne({type:n.type,nullCount:0}))})]=e,!(this.data instanceof at))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=E1(this.schema,this.data.children);break}case 1:{const[n]=e,{fields:r,children:i,length:s}=Object.keys(n).reduce((l,f,h)=>(l.children[h]=n[f],l.length=Math.max(l.length,n[f].length),l.fields[h]=yt.new({name:f,type:n[f].type,nullable:!0}),l),{length:0,fields:new Array,children:new Array}),o=new We(r),a=Ne({type:new vn(r),length:s,children:i,nullCount:0});[this.schema,this.data]=E1(o,a.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=sx(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(e){return this.data.getValid(e)}get(e){return Ln.visit(this.data,e)}set(e,n){return Sr.visit(this.data,e,n)}indexOf(e,n){return Ud.visit(this.data,e,n)}getByteLength(e){return di.visit(this.data,e)}[Symbol.iterator](){return O0.visit(new Ke([this.data]))}toArray(){return[...this]}concat(...e){return new mn(this.schema,[this,...e])}slice(e,n){const[r]=new Ke([this.data]).slice(e,n).data;return new Vu(this.schema,r)}getChild(e){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===e))}getChildAt(e){return e>-1&&e<this.schema.fields.length?new Ke([this.data.children[e]]):null}setChild(e,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===e),n)}setChildAt(e,n){let r=this.schema,i=this.data;if(e>-1&&e<this.numCols){n||(n=new Ke([Ne({type:new Fs,length:this.numRows})]));const s=r.fields.slice(),o=i.children.slice(),a=s[e].clone({type:n.type});[s[e],o[e]]=[a,n.data[0]],r=new We(s,new Map(this.schema.metadata)),i=Ne({type:new vn(s),children:o})}return new Vu(r,i)}select(e){const n=this.schema.select(e),r=new vn(n.fields),i=[];for(const s of e){const o=this.schema.fields.findIndex(a=>a.name===s);~o&&(i[o]=this.data.children[o])}return new Vu(n,Ne({type:r,length:this.numRows,children:i}))}selectAt(e){const n=this.schema.selectAt(e),r=e.map(s=>this.data.children[s]).filter(Boolean),i=Ne({type:new vn(n.fields),length:this.numRows,children:r});return new Vu(n,i)}};ix=Symbol.toStringTag;xn[ix]=(t=>(t._nullCount=-1,t[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(xn.prototype);function E1(t,e,n=e.reduce((r,i)=>Math.max(r,i.length),0)){var r;const i=[...t.fields],s=[...e],o=(n+63&-64)>>3;for(const[a,l]of t.fields.entries()){const f=e[a];(!f||f.length!==n)&&(i[a]=l.clone({nullable:!0}),s[a]=(r=f==null?void 0:f._changeLengthAndBackfillNullBitmap(n))!==null&&r!==void 0?r:Ne({type:l.type,length:n,nullCount:n,nullBitmap:new Uint8Array(o)}))}return[t.assign(i),Ne({type:new vn(i),length:n,children:s})]}function sx(t,e,n=new Map){for(let r=-1,i=t.length;++r<i;){const o=t[r].type,a=e[r];if(we.isDictionary(o)){if(!n.has(o.id))a.dictionary&&n.set(o.id,a.dictionary);else if(n.get(o.id)!==a.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}o.children&&o.children.length>0&&sx(o.children,a.children,n)}return n}class P0 extends xn{constructor(e){const n=e.fields.map(i=>Ne({type:i.type})),r=Ne({type:new vn(e.fields),nullCount:0,children:n});super(e,r)}}var Gd;(function(t){t[t.BUFFER=0]="BUFFER"})(Gd||(Gd={}));var Jd;(function(t){t[t.LZ4_FRAME=0]="LZ4_FRAME",t[t.ZSTD=1]="ZSTD"})(Jd||(Jd={}));class ds{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsBodyCompression(e,n){return(n||new ds).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBodyCompression(e,n){return e.setPosition(e.position()+st),(n||new ds).__init(e.readInt32(e.position())+e.position(),e)}codec(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt8(this.bb_pos+e):Jd.LZ4_FRAME}method(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt8(this.bb_pos+e):Gd.BUFFER}static startBodyCompression(e){e.startObject(2)}static addCodec(e,n){e.addFieldInt8(0,n,Jd.LZ4_FRAME)}static addMethod(e,n){e.addFieldInt8(1,n,Gd.BUFFER)}static endBodyCompression(e){return e.endObject()}static createBodyCompression(e,n,r){return ds.startBodyCompression(e),ds.addCodec(e,n),ds.addMethod(e,r),ds.endBodyCompression(e)}}class ox{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(e,n,r){return e.prep(8,16),e.writeInt64(r),e.writeInt64(n),e.offset()}}let ax=class{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(e,n,r){return e.prep(8,16),e.writeInt64(r),e.writeInt64(n),e.offset()}},Ii=class vv{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsRecordBatch(e,n){return(n||new vv).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsRecordBatch(e,n){return e.setPosition(e.position()+st),(n||new vv).__init(e.readInt32(e.position())+e.position(),e)}length(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}nodes(e,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new ax).__init(this.bb.__vector(this.bb_pos+r)+e*16,this.bb):null}nodesLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}buffers(e,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new ox).__init(this.bb.__vector(this.bb_pos+r)+e*16,this.bb):null}buffersLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}compression(e){const n=this.bb.__offset(this.bb_pos,10);return n?(e||new ds).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(e){e.startObject(4)}static addLength(e,n){e.addFieldInt64(0,n,e.createLong(0,0))}static addNodes(e,n){e.addFieldOffset(1,n,0)}static startNodesVector(e,n){e.startVector(16,n,8)}static addBuffers(e,n){e.addFieldOffset(2,n,0)}static startBuffersVector(e,n){e.startVector(16,n,8)}static addCompression(e,n){e.addFieldOffset(3,n,0)}static endRecordBatch(e){return e.endObject()}},aa=class gv{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsDictionaryBatch(e,n){return(n||new gv).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDictionaryBatch(e,n){return e.setPosition(e.position()+st),(n||new gv).__init(e.readInt32(e.position())+e.position(),e)}id(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}data(e){const n=this.bb.__offset(this.bb_pos,6);return n?(e||new Ii).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const e=this.bb.__offset(this.bb_pos,8);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startDictionaryBatch(e){e.startObject(3)}static addId(e,n){e.addFieldInt64(0,n,e.createLong(0,0))}static addData(e,n){e.addFieldOffset(1,n,0)}static addIsDelta(e,n){e.addFieldInt8(2,+n,0)}static endDictionaryBatch(e){return e.endObject()}};var Xd;(function(t){t[t.NONE=0]="NONE",t[t.Schema=1]="Schema",t[t.DictionaryBatch=2]="DictionaryBatch",t[t.RecordBatch=3]="RecordBatch",t[t.Tensor=4]="Tensor",t[t.SparseTensor=5]="SparseTensor"})(Xd||(Xd={}));let as=class Hr{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsMessage(e,n){return(n||new Hr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMessage(e,n){return e.setPosition(e.position()+st),(n||new Hr).__init(e.readInt32(e.position())+e.position(),e)}version(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Ga.V1}headerType(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):Xd.NONE}header(e){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(e,this.bb_pos+n):null}bodyLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}customMetadata(e,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new zt).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static startMessage(e){e.startObject(5)}static addVersion(e,n){e.addFieldInt16(0,n,Ga.V1)}static addHeaderType(e,n){e.addFieldInt8(1,n,Xd.NONE)}static addHeader(e,n){e.addFieldOffset(2,n,0)}static addBodyLength(e,n){e.addFieldInt64(3,n,e.createLong(0,0))}static addCustomMetadata(e,n){e.addFieldOffset(4,n,0)}static createCustomMetadataVector(e,n){e.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)e.addOffset(n[r]);return e.endVector()}static startCustomMetadataVector(e,n){e.startVector(4,n,4)}static endMessage(e){return e.endObject()}static finishMessageBuffer(e,n){e.finish(n)}static finishSizePrefixedMessageBuffer(e,n){e.finish(n,void 0,!0)}static createMessage(e,n,r,i,s,o){return Hr.startMessage(e),Hr.addVersion(e,n),Hr.addHeaderType(e,r),Hr.addHeader(e,i),Hr.addBodyLength(e,s),Hr.addCustomMetadata(e,o),Hr.endMessage(e)}};var _j=Ni;class bj extends Be{visit(e,n){return e==null||n==null?void 0:super.visit(e,n)}visitNull(e,n){return bo.startNull(n),bo.endNull(n)}visitInt(e,n){return Qn.startInt(n),Qn.addBitWidth(n,e.bitWidth),Qn.addIsSigned(n,e.isSigned),Qn.endInt(n)}visitFloat(e,n){return ii.startFloatingPoint(n),ii.addPrecision(n,e.precision),ii.endFloatingPoint(n)}visitBinary(e,n){return go.startBinary(n),go.endBinary(n)}visitBool(e,n){return wo.startBool(n),wo.endBool(n)}visitUtf8(e,n){return Io.startUtf8(n),Io.endUtf8(n)}visitDecimal(e,n){return On.startDecimal(n),On.addScale(n,e.scale),On.addPrecision(n,e.precision),On.addBitWidth(n,e.bitWidth),On.endDecimal(n)}visitDate(e,n){return Nf.startDate(n),Nf.addUnit(n,e.unit),Nf.endDate(n)}visitTime(e,n){return mr.startTime(n),mr.addUnit(n,e.unit),mr.addBitWidth(n,e.bitWidth),mr.endTime(n)}visitTimestamp(e,n){const r=e.timezone&&n.createString(e.timezone)||void 0;return yr.startTimestamp(n),yr.addUnit(n,e.unit),r!==void 0&&yr.addTimezone(n,r),yr.endTimestamp(n)}visitInterval(e,n){return si.startInterval(n),si.addUnit(n,e.unit),si.endInterval(n)}visitList(e,n){return _o.startList(n),_o.endList(n)}visitStruct(e,n){return So.startStruct_(n),So.endStruct_(n)}visitUnion(e,n){Dn.startTypeIdsVector(n,e.typeIds.length);const r=Dn.createTypeIdsVector(n,e.typeIds);return Dn.startUnion(n),Dn.addMode(n,e.mode),Dn.addTypeIds(n,r),Dn.endUnion(n)}visitDictionary(e,n){const r=this.visit(e.indices,n);return Di.startDictionaryEncoding(n),Di.addId(n,new _j(e.id,0)),Di.addIsOrdered(n,e.isOrdered),r!==void 0&&Di.addIndexType(n,r),Di.endDictionaryEncoding(n)}visitFixedSizeBinary(e,n){return ni.startFixedSizeBinary(n),ni.addByteWidth(n,e.byteWidth),ni.endFixedSizeBinary(n)}visitFixedSizeList(e,n){return ri.startFixedSizeList(n),ri.addListSize(n,e.listSize),ri.endFixedSizeList(n)}visitMap(e,n){return Bf.startMap(n),Bf.addKeysSorted(n,e.keysSorted),Bf.endMap(n)}}const xm=new bj;function Sj(t,e=new Map){return new We(Ej(t,e),$f(t.customMetadata),e)}function ux(t){return new ir(t.count,lx(t.columns),cx(t.columns))}function Ij(t){return new hi(ux(t.data),t.id,t.isDelta)}function Ej(t,e){return(t.fields||[]).filter(Boolean).map(n=>yt.fromJSON(n,e))}function O1(t,e){return(t.children||[]).filter(Boolean).map(n=>yt.fromJSON(n,e))}function lx(t){return(t||[]).reduce((e,n)=>[...e,new Wo(n.count,Oj(n.VALIDITY)),...lx(n.children)],[])}function cx(t,e=[]){for(let n=-1,r=(t||[]).length;++n<r;){const i=t[n];i.VALIDITY&&e.push(new ai(e.length,i.VALIDITY.length)),i.TYPE&&e.push(new ai(e.length,i.TYPE.length)),i.OFFSET&&e.push(new ai(e.length,i.OFFSET.length)),i.DATA&&e.push(new ai(e.length,i.DATA.length)),e=cx(i.children,e)}return e}function Oj(t){return(t||[]).reduce((e,n)=>e+ +(n===0),0)}function kj(t,e){let n,r,i,s,o,a;return!e||!(s=t.dictionary)?(o=D1(t,O1(t,e)),i=new yt(t.name,o,t.nullable,$f(t.customMetadata))):e.has(n=s.id)?(r=(r=s.indexType)?k1(r):new Fl,a=new Qa(e.get(n),r,n,s.isOrdered),i=new yt(t.name,a,t.nullable,$f(t.customMetadata))):(r=(r=s.indexType)?k1(r):new Fl,e.set(n,o=D1(t,O1(t,e))),a=new Qa(o,r,n,s.isOrdered),i=new yt(t.name,a,t.nullable,$f(t.customMetadata))),i||null}function $f(t){return new Map(Object.entries(t||{}))}function k1(t){return new Ls(t.isSigned,t.bitWidth)}function D1(t,e){const n=t.type.name;switch(n){case"NONE":return new Fs;case"null":return new Fs;case"binary":return new xd;case"utf8":return new Cd;case"bool":return new Ad;case"list":return new Nd((e||[])[0]);case"struct":return new vn(e||[]);case"struct_":return new vn(e||[])}switch(n){case"int":{const r=t.type;return new Ls(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=t.type;return new Ll(Tn[r.precision])}case"decimal":{const r=t.type;return new Pd(r.scale,r.precision,r.bitWidth)}case"date":{const r=t.type;return new Rd(Hi[r.unit])}case"time":{const r=t.type;return new $l(ze[r.unit],r.bitWidth)}case"timestamp":{const r=t.type;return new Td(ze[r.unit],r.timezone)}case"interval":{const r=t.type;return new Md(Bs[r.unit])}case"union":{const r=t.type;return new Bd(rr[r.mode],r.typeIds||[],e||[])}case"fixedsizebinary":{const r=t.type;return new Fd(r.byteWidth)}case"fixedsizelist":{const r=t.type;return new Ld(r.listSize,(e||[])[0])}case"map":{const r=t.type;return new $d((e||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var Uo=Ni,Dj=ZD,xj=Ya;class gn{constructor(e,n,r,i){this._version=n,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=typeof e=="number"?e:e.low}static fromJSON(e,n){const r=new gn(0,Gn.V4,n);return r._createHeader=Cj(e,n),r}static decode(e){e=new xj(Ue(e));const n=as.getRootAsMessage(e),r=n.bodyLength(),i=n.version(),s=n.headerType(),o=new gn(r,i,s);return o._createHeader=Aj(n,s),o}static encode(e){const n=new Dj;let r=-1;return e.isSchema()?r=We.encode(n,e.header()):e.isRecordBatch()?r=ir.encode(n,e.header()):e.isDictionaryBatch()&&(r=hi.encode(n,e.header())),as.startMessage(n),as.addVersion(n,Gn.V4),as.addHeader(n,r),as.addHeaderType(n,e.headerType),as.addBodyLength(n,new Uo(e.bodyLength,0)),as.finishMessageBuffer(n,as.endMessage(n)),n.asUint8Array()}static from(e,n=0){if(e instanceof We)return new gn(0,Gn.V4,Ve.Schema,e);if(e instanceof ir)return new gn(n,Gn.V4,Ve.RecordBatch,e);if(e instanceof hi)return new gn(n,Gn.V4,Ve.DictionaryBatch,e);throw new Error(`Unrecognized Message header: ${e}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===Ve.Schema}isRecordBatch(){return this.headerType===Ve.RecordBatch}isDictionaryBatch(){return this.headerType===Ve.DictionaryBatch}}class ir{constructor(e,n,r){this._nodes=n,this._buffers=r,this._length=typeof e=="number"?e:e.low}get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}}class hi{constructor(e,n,r=!1){this._data=e,this._isDelta=r,this._id=typeof n=="number"?n:n.low}get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}}class ai{constructor(e,n){this.offset=typeof e=="number"?e:e.low,this.length=typeof n=="number"?n:n.low}}class Wo{constructor(e,n){this.length=typeof e=="number"?e:e.low,this.nullCount=typeof n=="number"?n:n.low}}function Cj(t,e){return()=>{switch(e){case Ve.Schema:return We.fromJSON(t);case Ve.RecordBatch:return ir.fromJSON(t);case Ve.DictionaryBatch:return hi.fromJSON(t)}throw new Error(`Unrecognized Message type: { name: ${Ve[e]}, type: ${e} }`)}}function Aj(t,e){return()=>{switch(e){case Ve.Schema:return We.decode(t.header(new Yr));case Ve.RecordBatch:return ir.decode(t.header(new Ii),t.version());case Ve.DictionaryBatch:return hi.decode(t.header(new aa),t.version())}throw new Error(`Unrecognized Message type: { name: ${Ve[e]}, type: ${e} }`)}}yt.encode=Uj;yt.decode=$j;yt.fromJSON=kj;We.encode=jj;We.decode=Pj;We.fromJSON=Sj;ir.encode=zj;ir.decode=Rj;ir.fromJSON=ux;hi.encode=Vj;hi.decode=Tj;hi.fromJSON=Ij;Wo.encode=Kj;Wo.decode=Nj;ai.encode=Wj;ai.decode=Mj;function Pj(t,e=new Map){const n=Lj(t,e);return new We(n,jf(t),e)}function Rj(t,e=Gn.V4){if(t.compression()!==null)throw new Error("Record batch compression not implemented");return new ir(t.length(),Bj(t),Fj(t,e))}function Tj(t,e=Gn.V4){return new hi(ir.decode(t.data(),e),t.id(),t.isDelta())}function Mj(t){return new ai(t.offset(),t.length())}function Nj(t){return new Wo(t.length(),t.nullCount())}function Bj(t){const e=[];for(let n,r=-1,i=-1,s=t.nodesLength();++r<s;)(n=t.nodes(r))&&(e[++i]=Wo.decode(n));return e}function Fj(t,e){const n=[];for(let r,i=-1,s=-1,o=t.buffersLength();++i<o;)(r=t.buffers(i))&&(e<Gn.V4&&(r.bb_pos+=8*(i+1)),n[++s]=ai.decode(r));return n}function Lj(t,e){const n=[];for(let r,i=-1,s=-1,o=t.fieldsLength();++i<o;)(r=t.fields(i))&&(n[++s]=yt.decode(r,e));return n}function x1(t,e){const n=[];for(let r,i=-1,s=-1,o=t.childrenLength();++i<o;)(r=t.children(i))&&(n[++s]=yt.decode(r,e));return n}function $j(t,e){let n,r,i,s,o,a;return!e||!(a=t.dictionary())?(i=A1(t,x1(t,e)),r=new yt(t.name(),i,t.nullable(),jf(t))):e.has(n=a.id().low)?(s=(s=a.indexType())?C1(s):new Fl,o=new Qa(e.get(n),s,n,a.isOrdered()),r=new yt(t.name(),o,t.nullable(),jf(t))):(s=(s=a.indexType())?C1(s):new Fl,e.set(n,i=A1(t,x1(t,e))),o=new Qa(i,s,n,a.isOrdered()),r=new yt(t.name(),o,t.nullable(),jf(t))),r||null}function jf(t){const e=new Map;if(t)for(let n,r,i=-1,s=Math.trunc(t.customMetadataLength());++i<s;)(n=t.customMetadata(i))&&(r=n.key())!=null&&e.set(r,n.value());return e}function C1(t){return new Ls(t.isSigned(),t.bitWidth())}function A1(t,e){const n=t.typeType();switch(n){case _t.NONE:return new Fs;case _t.Null:return new Fs;case _t.Binary:return new xd;case _t.Utf8:return new Cd;case _t.Bool:return new Ad;case _t.List:return new Nd((e||[])[0]);case _t.Struct_:return new vn(e||[])}switch(n){case _t.Int:{const r=t.type(new Qn);return new Ls(r.isSigned(),r.bitWidth())}case _t.FloatingPoint:{const r=t.type(new ii);return new Ll(r.precision())}case _t.Decimal:{const r=t.type(new On);return new Pd(r.scale(),r.precision(),r.bitWidth())}case _t.Date:{const r=t.type(new Nf);return new Rd(r.unit())}case _t.Time:{const r=t.type(new mr);return new $l(r.unit(),r.bitWidth())}case _t.Timestamp:{const r=t.type(new yr);return new Td(r.unit(),r.timezone())}case _t.Interval:{const r=t.type(new si);return new Md(r.unit())}case _t.Union:{const r=t.type(new Dn);return new Bd(r.mode(),r.typeIdsArray()||[],e||[])}case _t.FixedSizeBinary:{const r=t.type(new ni);return new Fd(r.byteWidth())}case _t.FixedSizeList:{const r=t.type(new ri);return new Ld(r.listSize(),(e||[])[0])}case _t.Map:{const r=t.type(new Bf);return new $d((e||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${_t[n]}" (${n})`)}function jj(t,e){const n=e.fields.map(s=>yt.encode(t,s));Yr.startFieldsVector(t,n.length);const r=Yr.createFieldsVector(t,n),i=e.metadata&&e.metadata.size>0?Yr.createCustomMetadataVector(t,[...e.metadata].map(([s,o])=>{const a=t.createString(`${s}`),l=t.createString(`${o}`);return zt.startKeyValue(t),zt.addKey(t,a),zt.addValue(t,l),zt.endKeyValue(t)})):-1;return Yr.startSchema(t),Yr.addFields(t,r),Yr.addEndianness(t,qj?Ja.Little:Ja.Big),i!==-1&&Yr.addCustomMetadata(t,i),Yr.endSchema(t)}function Uj(t,e){let n=-1,r=-1,i=-1;const s=e.type;let o=e.typeId;we.isDictionary(s)?(o=s.dictionary.typeId,i=xm.visit(s,t),r=xm.visit(s.dictionary,t)):r=xm.visit(s,t);const a=(s.children||[]).map(h=>yt.encode(t,h)),l=fr.createChildrenVector(t,a),f=e.metadata&&e.metadata.size>0?fr.createCustomMetadataVector(t,[...e.metadata].map(([h,p])=>{const y=t.createString(`${h}`),w=t.createString(`${p}`);return zt.startKeyValue(t),zt.addKey(t,y),zt.addValue(t,w),zt.endKeyValue(t)})):-1;return e.name&&(n=t.createString(e.name)),fr.startField(t),fr.addType(t,r),fr.addTypeType(t,o),fr.addChildren(t,l),fr.addNullable(t,!!e.nullable),n!==-1&&fr.addName(t,n),i!==-1&&fr.addDictionary(t,i),f!==-1&&fr.addCustomMetadata(t,f),fr.endField(t)}function zj(t,e){const n=e.nodes||[],r=e.buffers||[];Ii.startNodesVector(t,n.length);for(const o of n.slice().reverse())Wo.encode(t,o);const i=t.endVector();Ii.startBuffersVector(t,r.length);for(const o of r.slice().reverse())ai.encode(t,o);const s=t.endVector();return Ii.startRecordBatch(t),Ii.addLength(t,new Uo(e.length,0)),Ii.addNodes(t,i),Ii.addBuffers(t,s),Ii.endRecordBatch(t)}function Vj(t,e){const n=ir.encode(t,e.data);return aa.startDictionaryBatch(t),aa.addId(t,new Uo(e.id,0)),aa.addIsDelta(t,e.isDelta),aa.addData(t,n),aa.endDictionaryBatch(t)}function Kj(t,e){return ax.createFieldNode(t,new Uo(e.length,0),new Uo(e.nullCount,0))}function Wj(t,e){return ox.createBuffer(t,new Uo(e.offset,0),new Uo(e.length,0))}const qj=(()=>{const t=new ArrayBuffer(2);return new DataView(t).setInt16(0,256,!0),new Int16Array(t)[0]===256})(),R0=t=>`Expected ${Ve[t]} Message in stream, but was null or length 0.`,T0=t=>`Header pointer of flatbuffer-encoded ${Ve[t]} Message is null or length 0.`,fx=(t,e)=>`Expected to read ${t} metadata bytes, but only read ${e}.`,dx=(t,e)=>`Expected to read ${t} bytes for message body, but only read ${e}.`;class hx{constructor(e){this.source=e instanceof Qd?e:new Qd(e)}[Symbol.iterator](){return this}next(){let e;return(e=this.readMetadataLength()).done||e.value===-1&&(e=this.readMetadataLength()).done||(e=this.readMetadata(e.value)).done?St:e}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}readMessage(e){let n;if((n=this.next()).done)return null;if(e!=null&&n.value.headerType!==e)throw new Error(R0(e));return n.value}readMessageBody(e){if(e<=0)return new Uint8Array(0);const n=Ue(this.source.read(e));if(n.byteLength<e)throw new Error(dx(e,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()}readSchema(e=!1){const n=Ve.Schema,r=this.readMessage(n),i=r==null?void 0:r.header();if(e&&!i)throw new Error(T0(n));return i}readMetadataLength(){const e=this.source.read(zh),n=e&&new Ya(e),r=(n==null?void 0:n.readInt32(0))||0;return{done:r===0,value:r}}readMetadata(e){const n=this.source.read(e);if(!n)return St;if(n.byteLength<e)throw new Error(fx(e,n.byteLength));return{done:!1,value:gn.decode(n)}}}class Hj{constructor(e,n){this.source=e instanceof Za?e:Mk(e)?new Yd(e,n):new Za(e)}[Symbol.asyncIterator](){return this}next(){return ve(this,void 0,void 0,function*(){let e;return(e=yield this.readMetadataLength()).done||e.value===-1&&(e=yield this.readMetadataLength()).done||(e=yield this.readMetadata(e.value)).done?St:e})}throw(e){return ve(this,void 0,void 0,function*(){return yield this.source.throw(e)})}return(e){return ve(this,void 0,void 0,function*(){return yield this.source.return(e)})}readMessage(e){return ve(this,void 0,void 0,function*(){let n;if((n=yield this.next()).done)return null;if(e!=null&&n.value.headerType!==e)throw new Error(R0(e));return n.value})}readMessageBody(e){return ve(this,void 0,void 0,function*(){if(e<=0)return new Uint8Array(0);const n=Ue(yield this.source.read(e));if(n.byteLength<e)throw new Error(dx(e,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()})}readSchema(e=!1){return ve(this,void 0,void 0,function*(){const n=Ve.Schema,r=yield this.readMessage(n),i=r==null?void 0:r.header();if(e&&!i)throw new Error(T0(n));return i})}readMetadataLength(){return ve(this,void 0,void 0,function*(){const e=yield this.source.read(zh),n=e&&new Ya(e),r=(n==null?void 0:n.readInt32(0))||0;return{done:r===0,value:r}})}readMetadata(e){return ve(this,void 0,void 0,function*(){const n=yield this.source.read(e);if(!n)return St;if(n.byteLength<e)throw new Error(fx(e,n.byteLength));return{done:!1,value:gn.decode(n)}})}}class Qj extends hx{constructor(e){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=e instanceof S1?e:new S1(e)}next(){const{_json:e}=this;if(!this._schema)return this._schema=!0,{done:!1,value:gn.fromJSON(e.schema,Ve.Schema)};if(this._dictionaryIndex<e.dictionaries.length){const n=e.dictionaries[this._dictionaryIndex++];return this._body=n.data.columns,{done:!1,value:gn.fromJSON(n,Ve.DictionaryBatch)}}if(this._batchIndex<e.batches.length){const n=e.batches[this._batchIndex++];return this._body=n.columns,{done:!1,value:gn.fromJSON(n,Ve.RecordBatch)}}return this._body=[],St}readMessageBody(e){return n(this._body);function n(r){return(r||[]).reduce((i,s)=>[...i,...s.VALIDITY&&[s.VALIDITY]||[],...s.TYPE&&[s.TYPE]||[],...s.OFFSET&&[s.OFFSET]||[],...s.DATA&&[s.DATA]||[],...n(s.children)],[])}}readMessage(e){let n;if((n=this.next()).done)return null;if(e!=null&&n.value.headerType!==e)throw new Error(R0(e));return n.value}readSchema(){const e=Ve.Schema,n=this.readMessage(e),r=n==null?void 0:n.header();if(!n||!r)throw new Error(T0(e));return r}}const zh=4,wv="ARROW1",Ul=new Uint8Array(wv.length);for(let t=0;t<wv.length;t+=1)Ul[t]=wv.codePointAt(t);function M0(t,e=0){for(let n=-1,r=Ul.length;++n<r;)if(Ul[n]!==t[e+n])return!1;return!0}const dc=Ul.length,px=dc+zh,Yj=dc*2+zh;class Bi extends k0{constructor(e){super(),this._impl=e}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(e){return this._impl.throw(e)}return(e){return this._impl.return(e)}cancel(){return this._impl.cancel()}reset(e){return this._impl.reset(e),this._DOMStream=void 0,this._nodeStream=void 0,this}open(e){const n=this._impl.open(e);return Ns(n)?n.then(()=>this):this}readRecordBatch(e){return this._impl.isFile()?this._impl.readRecordBatch(e):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return dr.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return dr.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(e){throw new Error('"throughNode" not available in this environment')}static throughDOM(e,n){throw new Error('"throughDOM" not available in this environment')}static from(e){return e instanceof Bi?e:uv(e)?Zj(e):Mk(e)?n4(e):Ns(e)?(()=>ve(this,void 0,void 0,function*(){return yield Bi.from(yield e)}))():Nk(e)||d0(e)||Bk(e)||fu(e)?t4(new Za(e)):e4(new Qd(e))}static readAll(e){return e instanceof Bi?e.isSync()?P1(e):R1(e):uv(e)||ArrayBuffer.isView(e)||uc(e)||Tk(e)?P1(e):R1(e)}}class Zd extends Bi{constructor(e){super(e),this._impl=e}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return Ar(this,arguments,function*(){yield ge(yield*Df(Ds(this[Symbol.iterator]())))})}}class eh extends Bi{constructor(e){super(e),this._impl=e}readAll(){var e,n;return ve(this,void 0,void 0,function*(){const r=new Array;try{for(var i=Ds(this),s;s=yield i.next(),!s.done;){const o=s.value;r.push(o)}}catch(o){e={error:o}}finally{try{s&&!s.done&&(n=i.return)&&(yield n.call(i))}finally{if(e)throw e.error}}return r})}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}class mx extends Zd{constructor(e){super(e),this._impl=e}}class Gj extends eh{constructor(e){super(e),this._impl=e}}class yx{constructor(e=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=e}get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(e){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=e,this.dictionaries=new Map,this}_loadRecordBatch(e,n){const r=this._loadVectors(e,n,this.schema.fields),i=Ne({type:new vn(this.schema.fields),length:e.length,children:r});return new xn(this.schema,i)}_loadDictionaryBatch(e,n){const{id:r,isDelta:i}=e,{dictionaries:s,schema:o}=this,a=s.get(r);if(i||!a){const l=o.dictionaries.get(r),f=this._loadVectors(e.data,n,[l]);return(a&&i?a.concat(new Ke(f)):new Ke(f)).memoize()}return a.memoize()}_loadVectors(e,n,r){return new nx(n,e.nodes,e.buffers,this.dictionaries).visitMany(r)}}class th extends yx{constructor(e,n){super(n),this._reader=uv(e)?new Qj(this._handle=e):new hx(this._handle=e)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(e){return this.closed||(this.autoDestroy=gx(this,e),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(e){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(e):St}return(e){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(e):St}next(){if(this.closed)return St;let e;const{_reader:n}=this;for(;e=this._readNextMessageAndValidate();)if(e.isSchema())this.reset(e.header());else if(e.isRecordBatch()){this._recordBatchIndex++;const r=e.header(),i=n.readMessageBody(e.bodyLength);return{done:!1,value:this._loadRecordBatch(r,i)}}else if(e.isDictionaryBatch()){this._dictionaryIndex++;const r=e.header(),i=n.readMessageBody(e.bodyLength),s=this._loadDictionaryBatch(r,i);this.dictionaries.set(r.id,s)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new P0(this.schema)}):this.return()}_readNextMessageAndValidate(e){return this._reader.readMessage(e)}}class nh extends yx{constructor(e,n){super(n),this._reader=new Hj(this._handle=e)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return ve(this,void 0,void 0,function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)})}open(e){return ve(this,void 0,void 0,function*(){return this.closed||(this.autoDestroy=gx(this,e),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this})}throw(e){return ve(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(e):St})}return(e){return ve(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(e):St})}next(){return ve(this,void 0,void 0,function*(){if(this.closed)return St;let e;const{_reader:n}=this;for(;e=yield this._readNextMessageAndValidate();)if(e.isSchema())yield this.reset(e.header());else if(e.isRecordBatch()){this._recordBatchIndex++;const r=e.header(),i=yield n.readMessageBody(e.bodyLength);return{done:!1,value:this._loadRecordBatch(r,i)}}else if(e.isDictionaryBatch()){this._dictionaryIndex++;const r=e.header(),i=yield n.readMessageBody(e.bodyLength),s=this._loadDictionaryBatch(r,i);this.dictionaries.set(r.id,s)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new P0(this.schema)}):yield this.return()})}_readNextMessageAndValidate(e){return ve(this,void 0,void 0,function*(){return yield this._reader.readMessage(e)})}}class vx extends th{constructor(e,n){super(e instanceof I1?e:new I1(e),n)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isSync(){return!0}isFile(){return!0}open(e){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const n of this._footer.dictionaryBatches())n&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(e)}readRecordBatch(e){var n;if(this.closed)return null;this._footer||this.open();const r=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(e);if(r&&this._handle.seek(r.offset)){const i=this._reader.readMessage(Ve.RecordBatch);if(i!=null&&i.isRecordBatch()){const s=i.header(),o=this._reader.readMessageBody(i.bodyLength);return this._loadRecordBatch(s,o)}}return null}_readDictionaryBatch(e){var n;const r=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(e);if(r&&this._handle.seek(r.offset)){const i=this._reader.readMessage(Ve.DictionaryBatch);if(i!=null&&i.isDictionaryBatch()){const s=i.header(),o=this._reader.readMessageBody(i.bodyLength),a=this._loadDictionaryBatch(s,o);this.dictionaries.set(s.id,a)}}}_readFooter(){const{_handle:e}=this,n=e.size-px,r=e.readInt32(n),i=e.readAt(n-r,r);return jl.decode(i)}_readNextMessageAndValidate(e){var n;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const r=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(this._recordBatchIndex);if(r&&this._handle.seek(r.offset))return this._reader.readMessage(e)}return null}}class Jj extends nh{constructor(e,...n){const r=typeof n[0]!="number"?n.shift():void 0,i=n[0]instanceof Map?n.shift():void 0;super(e instanceof Yd?e:new Yd(e,r),i)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isFile(){return!0}isAsync(){return!0}open(e){const n=Object.create(null,{open:{get:()=>super.open}});return ve(this,void 0,void 0,function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const r of this._footer.dictionaryBatches())r&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield n.open.call(this,e)})}readRecordBatch(e){var n;return ve(this,void 0,void 0,function*(){if(this.closed)return null;this._footer||(yield this.open());const r=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(e);if(r&&(yield this._handle.seek(r.offset))){const i=yield this._reader.readMessage(Ve.RecordBatch);if(i!=null&&i.isRecordBatch()){const s=i.header(),o=yield this._reader.readMessageBody(i.bodyLength);return this._loadRecordBatch(s,o)}}return null})}_readDictionaryBatch(e){var n;return ve(this,void 0,void 0,function*(){const r=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(e);if(r&&(yield this._handle.seek(r.offset))){const i=yield this._reader.readMessage(Ve.DictionaryBatch);if(i!=null&&i.isDictionaryBatch()){const s=i.header(),o=yield this._reader.readMessageBody(i.bodyLength),a=this._loadDictionaryBatch(s,o);this.dictionaries.set(s.id,a)}}})}_readFooter(){return ve(this,void 0,void 0,function*(){const{_handle:e}=this;e._pending&&(yield e._pending);const n=e.size-px,r=yield e.readInt32(n),i=yield e.readAt(n-r,r);return jl.decode(i)})}_readNextMessageAndValidate(e){return ve(this,void 0,void 0,function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const n=this._footer.getRecordBatch(this._recordBatchIndex);if(n&&(yield this._handle.seek(n.offset)))return yield this._reader.readMessage(e)}return null})}}class Xj extends th{constructor(e,n){super(e,n)}_loadVectors(e,n,r){return new cj(n,e.nodes,e.buffers,this.dictionaries).visitMany(r)}}function gx(t,e){return e&&typeof e.autoDestroy=="boolean"?e.autoDestroy:t.autoDestroy}function*P1(t){const e=Bi.from(t);try{if(!e.open({autoDestroy:!1}).closed)do yield e;while(!e.reset().open().closed)}finally{e.cancel()}}function R1(t){return Ar(this,arguments,function*(){const n=yield ge(Bi.from(t));try{if(!(yield ge(n.open({autoDestroy:!1}))).closed)do yield yield ge(n);while(!(yield ge(n.reset().open())).closed)}finally{yield ge(n.cancel())}})}function Zj(t){return new Zd(new Xj(t))}function e4(t){const e=t.peek(dc+7&-8);return e&&e.byteLength>=4?M0(e)?new mx(new vx(t.read())):new Zd(new th(t)):new Zd(new th(function*(){}()))}function t4(t){return ve(this,void 0,void 0,function*(){const e=yield t.peek(dc+7&-8);return e&&e.byteLength>=4?M0(e)?new mx(new vx(yield t.read())):new eh(new nh(t)):new eh(new nh(function(){return Ar(this,arguments,function*(){})}()))})}function n4(t){return ve(this,void 0,void 0,function*(){const{size:e}=yield t.stat(),n=new Yd(t,e);return e>=Yj&&M0(yield n.readAt(0,dc+7&-8))?new Gj(new Jj(n)):new eh(new nh(n))})}class $t extends Be{constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}static assemble(...e){const n=i=>i.flatMap(s=>Array.isArray(s)?n(s):s instanceof xn?s.data.children:s.data),r=new $t;return r.visitMany(n(e)),r}visit(e){if(e instanceof Ke)return this.visitMany(e.data),this;const{type:n}=e;if(!we.isDictionary(n)){const{length:r,nullCount:i}=e;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");we.isNull(n)||Mr.call(this,i<=0?new Uint8Array(0):b0(e.offset,r,e.nullBitmap)),this.nodes.push(new Wo(r,i))}return super.visit(e)}visitNull(e){return this}visitDictionary(e){return this.visit(e.clone(e.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function Mr(t){const e=t.byteLength+7&-8;return this.buffers.push(t),this.bufferRegions.push(new ai(this._byteLength,e)),this._byteLength+=e,this}function r4(t){const{type:e,length:n,typeIds:r,valueOffsets:i}=t;if(Mr.call(this,r),e.mode===rr.Sparse)return _v.call(this,t);if(e.mode===rr.Dense){if(t.offset<=0)return Mr.call(this,i),_v.call(this,t);{const s=r.reduce((h,p)=>Math.max(h,p),r[0]),o=new Int32Array(s+1),a=new Int32Array(s+1).fill(-1),l=new Int32Array(n),f=p0(-i[0],n,i);for(let h,p,y=-1;++y<n;)(p=a[h=r[y]])===-1&&(p=a[h]=f[h]),l[y]=f[y]-p,++o[h];Mr.call(this,l);for(let h,p=-1,y=e.children.length;++p<y;)if(h=t.children[p]){const w=e.typeIds[p],I=Math.min(n,o[w]);this.visit(h.slice(a[w],I))}}}return this}function i4(t){let e;return t.nullCount>=t.length?Mr.call(this,new Uint8Array(0)):(e=t.values)instanceof Uint8Array?Mr.call(this,b0(t.offset,t.length,e)):Mr.call(this,jd(t.values))}function Js(t){return Mr.call(this,t.values.subarray(0,t.length*t.stride))}function wx(t){const{length:e,values:n,valueOffsets:r}=t,i=r[0],s=r[e],o=Math.min(s-i,n.byteLength-i);return Mr.call(this,p0(-r[0],e,r)),Mr.call(this,n.subarray(i,i+o)),this}function N0(t){const{length:e,valueOffsets:n}=t;return n&&Mr.call(this,p0(n[0],e,n)),this.visit(t.children[0])}function _v(t){return this.visitMany(t.type.children.map((e,n)=>t.children[n]).filter(Boolean))[0]}$t.prototype.visitBool=i4;$t.prototype.visitInt=Js;$t.prototype.visitFloat=Js;$t.prototype.visitUtf8=wx;$t.prototype.visitBinary=wx;$t.prototype.visitFixedSizeBinary=Js;$t.prototype.visitDate=Js;$t.prototype.visitTimestamp=Js;$t.prototype.visitTime=Js;$t.prototype.visitDecimal=Js;$t.prototype.visitList=N0;$t.prototype.visitStruct=_v;$t.prototype.visitUnion=r4;$t.prototype.visitInterval=Js;$t.prototype.visitFixedSizeList=N0;$t.prototype.visitMap=N0;class _x extends k0{constructor(e){super(),this._position=0,this._started=!1,this._sink=new Lf,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,Fn(e)||(e={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof e.autoDestroy=="boolean"?e.autoDestroy:!0,this._writeLegacyIpcFormat=typeof e.writeLegacyIpcFormat=="boolean"?e.writeLegacyIpcFormat:!1}static throughNode(e){throw new Error('"throughNode" not available in this environment')}static throughDOM(e,n){throw new Error('"throughDOM" not available in this environment')}toString(e=!1){return this._sink.toString(e)}toUint8Array(e=!1){return this._sink.toUint8Array(e)}writeAll(e){return Ns(e)?e.then(n=>this.writeAll(n)):fu(e)?$0(this,e):L0(this,e)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(e){return this._sink.toDOMStream(e)}toNodeStream(e){return this._sink.toNodeStream(e)}close(){return this.reset()._sink.close()}abort(e){return this.reset()._sink.abort(e)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(e=this._sink,n=null){return e===this._sink||e instanceof Lf?this._sink=e:(this._sink=new Lf,e&&O3(e)?this.toDOMStream({type:"bytes"}).pipeTo(e):e&&k3(e)&&this.toNodeStream({objectMode:!1}).pipe(e)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!yv(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(e){let n=null;if(this._sink){if(e==null)return this.finish()&&void 0;if(e instanceof mn&&!(n=e.schema))return this.finish()&&void 0;if(e instanceof xn&&!(n=e.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!yv(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}e instanceof xn?e instanceof P0||this._writeRecordBatch(e):e instanceof mn?this.writeAll(e.batches):uc(e)&&this.writeAll(e)}_writeMessage(e,n=8){const r=n-1,i=gn.encode(e),s=i.byteLength,o=this._writeLegacyIpcFormat?4:8,a=s+o+r&~r,l=a-s-o;return e.headerType===Ve.RecordBatch?this._recordBatchBlocks.push(new $s(a,e.bodyLength,this._position)):e.headerType===Ve.DictionaryBatch&&this._dictionaryBlocks.push(new $s(a,e.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-o)),s>0&&this._write(i),this._writePadding(l)}_write(e){if(this._started){const n=Ue(e);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(e){return this._writeMessage(gn.from(e))}_writeFooter(e){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(Ul)}_writePadding(e){return e>0?this._write(new Uint8Array(e)):this}_writeRecordBatch(e){const{byteLength:n,nodes:r,bufferRegions:i,buffers:s}=$t.assemble(e),o=new ir(e.numRows,r,i),a=gn.from(o,n);return this._writeDictionaries(e)._writeMessage(a)._writeBodyBuffers(s)}_writeDictionaryBatch(e,n,r=!1){this._dictionaryDeltaOffsets.set(n,e.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:i,nodes:s,bufferRegions:o,buffers:a}=$t.assemble(new Ke([e])),l=new ir(e.length,s,o),f=new hi(l,n,r),h=gn.from(f,i);return this._writeMessage(h)._writeBodyBuffers(a)}_writeBodyBuffers(e){let n,r,i;for(let s=-1,o=e.length;++s<o;)(n=e[s])&&(r=n.byteLength)>0&&(this._write(n),(i=(r+7&-8)-r)>0&&this._writePadding(i));return this}_writeDictionaries(e){for(let[n,r]of e.dictionaries){let i=this._dictionaryDeltaOffsets.get(n)||0;if(i===0||(r=r==null?void 0:r.slice(i)).length>0)for(const s of r.data)this._writeDictionaryBatch(s,n,i>0),i+=s.length}return this}}class B0 extends _x{static writeAll(e,n){const r=new B0(n);return Ns(e)?e.then(i=>r.writeAll(i)):fu(e)?$0(r,e):L0(r,e)}}class F0 extends _x{static writeAll(e){const n=new F0;return Ns(e)?e.then(r=>n.writeAll(r)):fu(e)?$0(n,e):L0(n,e)}constructor(){super(),this._autoDestroy=!0}_writeSchema(e){return this._writeMagic()._writePadding(2)}_writeFooter(e){const n=jl.encode(new jl(e,Gn.V4,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(e)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function L0(t,e){let n=e;e instanceof mn&&(n=e.batches,t.reset(void 0,e.schema));for(const r of n)t.write(r);return t.finish()}function $0(t,e){var n,r,i,s;return ve(this,void 0,void 0,function*(){try{for(n=Ds(e);r=yield n.next(),!r.done;){const o=r.value;t.write(o)}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}return t.finish()})}function Ku(t){const e=Bi.from(t);return Ns(e)?e.then(n=>Ku(n)):e.isAsync()?e.readAll().then(n=>new mn(n)):new mn(e.readAll())}function Cm(t,e="stream"){return(e==="stream"?B0:F0).writeAll(t).toUint8Array(!0)}var T1=function(){function t(e,n,r,i){var s=this;this.getCell=function(o,a){var l=o<s.headerRows&&a<s.headerColumns,f=o>=s.headerRows&&a<s.headerColumns,h=o<s.headerRows&&a>=s.headerColumns;if(l){var p=["blank"];return a>0&&p.push("level"+o),{type:"blank",classNames:p.join(" "),content:""}}else if(h){var y=a-s.headerColumns,p=["col_heading","level"+o,"col"+y];return{type:"columns",classNames:p.join(" "),content:s.getContent(s.columnsTable,y,o)}}else if(f){var w=o-s.headerRows,p=["row_heading","level"+a,"row"+w];return{type:"index",id:"T_".concat(s.uuid,"level").concat(a,"_row").concat(w),classNames:p.join(" "),content:s.getContent(s.indexTable,w,a)}}else{var w=o-s.headerRows,y=a-s.headerColumns,p=["data","row"+w,"col"+y],I=s.styler?s.getContent(s.styler.displayValuesTable,w,y):s.getContent(s.dataTable,w,y);return{type:"data",id:"T_".concat(s.uuid,"row").concat(w,"_col").concat(y),classNames:p.join(" "),content:I}}},this.getContent=function(o,a,l){var f=o.getChildAt(l);if(f===null)return"";var h=s.getColumnTypeId(o,l);switch(h){case N.Timestamp:return s.nanosToDate(f.get(a));default:return f.get(a)}},this.dataTable=Ku(e),this.indexTable=Ku(n),this.columnsTable=Ku(r),this.styler=i?{caption:i.caption,displayValuesTable:Ku(i.displayValues),styles:i.styles,uuid:i.uuid}:void 0}return Object.defineProperty(t.prototype,"rows",{get:function(){return this.indexTable.numRows+this.columnsTable.numCols},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"columns",{get:function(){return this.indexTable.numCols+this.columnsTable.numRows},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"headerRows",{get:function(){return this.rows-this.dataRows},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"headerColumns",{get:function(){return this.columns-this.dataColumns},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataRows",{get:function(){return this.dataTable.numRows},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataColumns",{get:function(){return this.dataTable.numCols},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uuid",{get:function(){return this.styler&&this.styler.uuid},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"caption",{get:function(){return this.styler&&this.styler.caption},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"styles",{get:function(){return this.styler&&this.styler.styles},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"table",{get:function(){return this.dataTable},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"index",{get:function(){return this.indexTable},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"columnTable",{get:function(){return this.columnsTable},enumerable:!1,configurable:!0}),t.prototype.serialize=function(){return{data:Cm(this.dataTable),index:Cm(this.indexTable),columns:Cm(this.columnsTable)}},t.prototype.getColumnTypeId=function(e,n){return e.schema.fields[n].type.typeId},t.prototype.nanosToDate=function(e){return new Date(e/1e6)},t}(),al=function(){return al=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},al.apply(this,arguments)},ul;(function(t){t.COMPONENT_READY="streamlit:componentReady",t.SET_COMPONENT_VALUE="streamlit:setComponentValue",t.SET_FRAME_HEIGHT="streamlit:setFrameHeight"})(ul||(ul={}));var yn=function(){function t(){}return t.API_VERSION=1,t.RENDER_EVENT="streamlit:render",t.events=new EventTarget,t.registeredMessageListener=!1,t.setComponentReady=function(){t.registeredMessageListener||(window.addEventListener("message",t.onMessageEvent),t.registeredMessageListener=!0),t.sendBackMsg(ul.COMPONENT_READY,{apiVersion:t.API_VERSION})},t.setFrameHeight=function(e){e===void 0&&(e=document.body.scrollHeight),e!==t.lastFrameHeight&&(t.lastFrameHeight=e,t.sendBackMsg(ul.SET_FRAME_HEIGHT,{height:e}))},t.setComponentValue=function(e){var n;e instanceof T1?(n="dataframe",e=e.serialize()):o4(e)?(n="bytes",e=new Uint8Array(e.buffer)):e instanceof ArrayBuffer?(n="bytes",e=new Uint8Array(e)):n="json",t.sendBackMsg(ul.SET_COMPONENT_VALUE,{value:e,dataType:n})},t.onMessageEvent=function(e){var n=e.data.type;switch(n){case t.RENDER_EVENT:t.onRenderMessage(e.data);break}},t.onRenderMessage=function(e){var n=e.args;n==null&&(console.error("Got null args in onRenderMessage. This should never happen"),n={});var r=e.dfs&&e.dfs.length>0?t.argsDataframeToObject(e.dfs):{};n=al(al({},n),r);var i=!!e.disabled,s=e.theme;s&&s4(s);var o={disabled:i,args:n,theme:s},a=new CustomEvent(t.RENDER_EVENT,{detail:o});t.events.dispatchEvent(a)},t.argsDataframeToObject=function(e){var n=e.map(function(r){var i=r.key,s=r.value;return[i,t.toArrowTable(s)]});return Object.fromEntries(n)},t.toArrowTable=function(e){var n,r=(n=e.data,n.data),i=n.index,s=n.columns,o=n.styler;return new T1(r,i,s,o)},t.sendBackMsg=function(e,n){window.parent.postMessage(al({isStreamlitMessage:!0,type:e},n),"*")},t}(),s4=function(t){var e=document.createElement("style");document.head.appendChild(e),e.innerHTML=`
    :root {
      --primary-color: `.concat(t.primaryColor,`;
      --background-color: `).concat(t.backgroundColor,`;
      --secondary-background-color: `).concat(t.secondaryBackgroundColor,`;
      --text-color: `).concat(t.textColor,`;
      --font: `).concat(t.font,`;
    }

    body {
      background-color: var(--background-color);
      color: var(--text-color);
    }
  `)};function o4(t){var e=!1;try{e=t instanceof BigInt64Array||t instanceof BigUint64Array}catch{}return t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array||e}var bx=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){bx(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.componentDidMount=function(){yn.setFrameHeight()},e.prototype.componentDidUpdate=function(){yn.setFrameHeight()},e})(ra.PureComponent);function a4(t){var e=function(n){bx(r,n);function r(i){var s=n.call(this,i)||this;return s.componentDidMount=function(){yn.events.addEventListener(yn.RENDER_EVENT,s.onRenderEvent),yn.setComponentReady()},s.componentDidUpdate=function(){s.state.componentError!=null&&yn.setFrameHeight()},s.componentWillUnmount=function(){yn.events.removeEventListener(yn.RENDER_EVENT,s.onRenderEvent)},s.onRenderEvent=function(o){s.setState({renderData:o.detail})},s.state={renderData:void 0,componentError:void 0},s}return r.prototype.render=function(){return this.state.componentError!=null?ra.createElement("div",null,ra.createElement("h1",null,"Component Error"),ra.createElement("span",null,this.state.componentError.message)):this.state.renderData==null?null:ra.createElement(t,{width:window.innerWidth,disabled:this.state.renderData.disabled,args:this.state.renderData.args,theme:this.state.renderData.theme})},r.getDerivedStateFromError=function(i){return{componentError:i}},r}(ra.PureComponent);return ZL(e,t)}var u4=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!t(e[i],n[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!t(e[o],n[o]))return!1}return!0}return e!==e&&n!==n};const Sx=rh(u4);let hf;const l4=new Uint8Array(16);function c4(){if(!hf&&(hf=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!hf))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return hf(l4)}const Jt=[];for(let t=0;t<256;++t)Jt.push((t+256).toString(16).slice(1));function f4(t,e=0){return Jt[t[e+0]]+Jt[t[e+1]]+Jt[t[e+2]]+Jt[t[e+3]]+"-"+Jt[t[e+4]]+Jt[t[e+5]]+"-"+Jt[t[e+6]]+Jt[t[e+7]]+"-"+Jt[t[e+8]]+Jt[t[e+9]]+"-"+Jt[t[e+10]]+Jt[t[e+11]]+Jt[t[e+12]]+Jt[t[e+13]]+Jt[t[e+14]]+Jt[t[e+15]]}const d4=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),M1={randomUUID:d4};function h4(t,e,n){if(M1.randomUUID&&!e&&!t)return M1.randomUUID();t=t||{};const r=t.random||(t.rng||c4)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(let i=0;i<16;++i)e[n+i]=r[i];return e}return f4(r)}const{logger:Am,isEmpty:pf}=$r,p4=(t,e)=>{const[n,r]=pn.useState(),i=pn.useRef(t);return pn.useEffect(()=>{if(!n||pf(t)||Sx(t,i.current))return;i.current=t;const{added_rows:s,edited_rows:o,deleted_rows:a}=t;if(!pf(s)){const l=s.map(f=>({...f,id:h4(),createdAt:new Date().toISOString(),last_modified:Date.now()}));if(!l.length)return;e.upsertBulk(l).catch(f=>Am.log("upsertBulk",f))}if(!pf(a)){const l=[];if(a.forEach(f=>{const h=n.at(f);h&&l.push(h.id)}),!l.length)return;e.removeBulk(l).catch(f=>Am.log("removeBulk",f))}if(!pf(o)){const l=Object.entries(o).map(([f,h])=>({...n.at(+f),...h,last_modified:Date.now()}));if(!l.length)return;e.upsertBulk(l).catch(f=>Am.log("upsertBulk",f))}},[t,n,e]),[n,r]},m4=t=>{const[e,n]=pn.useState();return pn.useEffect(()=>{const r=s=>{n(s.detail)};return yn.events.addEventListener(yn.RENDER_EVENT,r),yn.setComponentReady(),()=>{yn.events.removeEventListener(yn.RENDER_EVENT,r),t.unsubscribe()}},[]),e},{logger:N1,isEmptyObject:y4,tapOnce:v4}=$r,g4=t=>{const[e,n]=pn.useState(),r=pn.useRef(),i=pn.useRef();i.current||(i.current=new su),r.current||(r.current=new Cr({}));const s=m4(i.current),{editing_state:o,collection_config:a,db_config:l,query:f,with_rev:h}=(s==null?void 0:s.args)||{},p=pn.useRef(),y=pn.useRef();p.current||(p.current=new LL);const w=()=>y.current,[,I]=p4(o,w()),E=pn.useCallback(S=>{const _=SF(S);return p.current.initDb(_)},[]),$=pn.useCallback(async S=>{y.current||(y.current=new Je(S,p.current));const _=r.current.pipe(Ms(Sx)),k=w().docs(_,h).pipe(v4(()=>n(!0)),cT(w().info())).subscribe(([z,W])=>{z&&(I(z),yn.setComponentValue({docs:z,info:W,query:r.current.value}),yn.setFrameHeight())});i.current.add(k),N1.log("Collection & docs subscription initialized, with",f,h)},[]);return pn.useEffect(()=>{e&&f&&r.current.next(f)},[e,f]),y4(s)?null:(e||E(l).then(()=>$(a)).catch(N1.log),t.args.element)},w4=a4(g4),_4=YI(document.getElementById("root"));_4.render(IC.jsx(w4,{}));
//# sourceMappingURL=index.js.map
